(function(E){function t(O){if(d[O])return d[O].exports;var T=d[O]={rX:O,VQ:!1,exports:{}};E[O].call(T.exports,T,T.exports,t);T.VQ=!0;return T.exports}var d={};t.MW=E;t.lW=d;t.d=function(d,T,G){t.vy(d,T)||Object.defineProperty(d,T,{configurable:!1,enumerable:!0,get:G})};t.tW=function(d){var O=d&&d.jW?function(){return d["default"]}:function(){return d};t.d(O,"a",O);return O};t.vy=function(d,t){return Object.prototype.hasOwnProperty.call(d,t)};t.IW="";return t(t.RW=84)})([function(E,t,d){var O=d(32),
T={};t.a=function(d,r){function f(){return function(m){m=m||"__b4w_default";if(void 0!==k[m])return k[m];k[m]=y?{}:f();r(m,k[m]);return k[m]}}var k={},y="__"==d.split("").slice(0,2).join("");if(void 0!==T[d])return T[d];var x=y?f():f()();return O.a._n_module[d]=T[d]=x}},function(E,t,d){function O(d,G){function r(b,k){var h=[];-1<b[0].indexOf("%c")?h.push(b[0].replace("%c","%c"+k+": ")):h.push(k+": "+b[0]);for(var l=1;l<b.length;l++)h.push(b[l]);return h}function f(){m++;var b=r(arguments,"B4W ERROR");
console.error.apply(console,b)}function k(b){b in q||(q[b]=b,f([b]))}function y(b,u){k(b+"() is deprecated, use "+u+"() instead.")}var x=!1,m=0,p=0,q={};G.sT=function(b){x=b};G.Sd=function(){console.log.apply(console,arguments)};G.log=function(){if(x){var b=r(arguments,"B4W LOG");console.log.apply(console,b)}};G.wE=r;G.error=f;G.Pa=k;G.df=y;G.PW=function(b,u){switch(1<u.length){case !0:k(b+"() is deprecated, use "+u.slice(0,-1).join("(), ")+"() or "+u[u.length-1]+"() instead.");break;case !1:y(b,
u[0])}};G.Uu=function(b,u){void 0===u?k('Config option "'+b+'" is deprecated.'):k('Config option "'+b+'" is deprecated, use "'+u+'" instead.')};G.warn=function(){p++;var b=r(arguments,"B4W WARN");console.warn.apply(console,b)};G.info=function(){var b=r(arguments,"B4W INFO");console.info.apply(console,b)};G.PO=function(){m++;var b=r(arguments,"B4W EXPORT ERROR");console.error.apply(console,b)};G.QO=function(){p++;var b=r(arguments,"B4W EXPORT WARNING");console.warn.apply(console,b)};G.time=function(){x&&
console.time.apply(console,arguments)};G.timeEnd=function(){x&&console.timeEnd.apply(console,arguments)};G.group=function(){console.group.apply(console,arguments)};G.groupCollapsed=function(){console.groupCollapsed.apply(console,arguments)};G.groupEnd=function(){console.groupEnd.apply(console,arguments)};G.clear=function(){"function"==typeof console.clear&&console.clear.apply(console,arguments)};G.kQ=function(){return p};G.NP=function(){return m};G.clear_errors_warnings=function(){m=p=0}}E=d(0);d=
Object(E.a)("print",O);Object(E.a)("__print",O);t.a=d},function(E,t,d){function O(a){return 0<a?1:0>a?-1:0}function T(a,c,g){var e=a[0],b=a[1];a=a[2];var l=Math.cos(e/2),h=Math.cos(b/2),n=Math.cos(a/2),w=Math.sin(e/2),b=Math.sin(b/2),z=Math.sin(a/2);if(-1<pa.indexOf(c))var k=Math.cos((e+a)/2),u=Math.sin((e+a)/2),f=Math.cos((e-a)/2),v=Math.sin((e-a)/2),za=Math.cos((a-e)/2),m=Math.sin((a-e)/2);switch(c){case Ma:g[0]=h*u;g[1]=b*f;g[2]=b*v;g[3]=h*k;break;case X:g[0]=b*v;g[1]=h*u;g[2]=b*f;g[3]=h*k;break;
case Q:g[0]=b*f;g[1]=b*v;g[2]=h*u;g[3]=h*k;break;case Aa:g[0]=h*u;g[1]=b*m;g[2]=b*za;g[3]=h*k;break;case Ba:g[0]=b*za;g[1]=h*u;g[2]=b*m;g[3]=h*k;break;case Va:g[0]=b*m;g[1]=b*za;g[2]=h*u;g[3]=h*k;break;case Ra:g[0]=w*h*n+l*b*z;g[1]=l*b*n-w*h*z;g[2]=l*h*z+w*b*n;g[3]=l*h*n-w*b*z;break;case ta:g[0]=l*h*z+w*b*n;g[1]=w*h*n+l*b*z;g[2]=l*b*n-w*h*z;g[3]=l*h*n-w*b*z;break;case ha:g[0]=l*b*n-w*h*z;g[1]=l*h*z+w*b*n;g[2]=w*h*n+l*b*z;g[3]=l*h*n-w*b*z;break;case ga:g[0]=w*h*n-l*b*z;g[1]=l*h*z-w*b*n;g[2]=l*b*n+
w*h*z;g[3]=l*h*n+w*b*z;break;case P:g[0]=l*b*n+w*h*z;g[1]=w*h*n-l*b*z;g[2]=l*h*z-w*b*n;g[3]=l*h*n+w*b*z;break;case xa:g[0]=l*h*z-w*b*n,g[1]=l*b*n+w*h*z,g[2]=w*h*n-l*b*z,g[3]=l*h*n+w*b*z}return g}function G(a,g,c){var e=a[0],b=a[1],h=a[2];a=a[3];switch(g){case Ma:c[0]=Math.atan2(e*b+h*a,b*a-e*h);c[1]=Math.acos(1-2*(b*b+h*h));c[2]=Math.atan2(e*b-h*a,e*h+b*a);break;case X:c[0]=Math.atan2(e*a+b*h,h*a-e*b);c[1]=Math.acos(1-2*(e*e+h*h));c[2]=Math.atan2(b*h-e*a,e*b+h*a);break;case Q:c[0]=Math.atan2(e*h+
b*a,e*a-b*h);c[1]=Math.acos(1-2*(e*e+b*b));c[2]=Math.atan2(e*h-b*a,e*a+b*h);break;case Aa:c[0]=Math.atan2(e*h-b*a,e*b+h*a);c[1]=Math.acos(1-2*(b*b+h*h));c[2]=Math.atan2(e*h+b*a,h*a-e*b);break;case Ba:c[0]=Math.atan2(e*b-h*a,e*a+b*h);c[1]=Math.acos(1-2*(e*e+h*h));c[2]=Math.atan2(e*b+h*a,e*a-b*h);break;case Va:c[0]=Math.atan2(b*h-e*a,e*h+b*a);c[1]=Math.acos(1-2*(e*e+b*b));c[2]=Math.atan2(e*a+b*h,b*a-e*h);break;case Ra:c[0]=Math.atan2(2*(e*a-b*h),1-2*(e*e+b*b));c[1]=Math.asin(2*(e*h+b*a));c[2]=Math.atan2(2*
(h*a-e*b),1-2*(b*b+h*h));break;case ta:g=e*b+h*a;.499999<g?(c[0]=0,c[1]=Math.PI/2,c[2]=2*Math.atan2(e,a)):-.499999>g?(c[0]=0,c[1]=-Math.PI/2,c[2]=-2*Math.atan2(e,a)):(c[0]=Math.atan2(2*(b*a-e*h),1-2*(b*b+h*h)),c[1]=Math.asin(2*(e*b+h*a)),c[2]=Math.atan2(2*(e*a-b*h),1-2*(e*e+h*h)));break;case ha:c[0]=Math.atan2(2*(h*a-e*b),1-2*(e*e+h*h));c[1]=Math.asin(2*(e*a+b*h));c[2]=Math.atan2(2*(b*a-e*h),1-2*(e*e+b*b));break;case ga:c[0]=Math.atan2(2*(e*a+b*h),1-2*(e*e+h*h));c[1]=Math.asin(2*(h*a-e*b));c[2]=Math.atan2(2*
(e*h+b*a),1-2*(b*b+h*h));break;case P:c[0]=Math.atan2(2*(e*h+b*a),1-2*(e*e+b*b));c[1]=Math.asin(2*(e*a-b*h));c[2]=Math.atan2(2*(e*b+h*a),1-2*(e*e+h*h));break;case xa:g=b*a-e*h,.499999<g?(c[0]=0,c[1]=Math.PI/2,c[2]=-2*Math.atan2(h,a)):-.499999>g?(c[0]=0,c[1]=-Math.PI/2,c[2]=2*Math.atan2(h,a)):(c[0]=Math.atan2(2*(e*b+h*a),1-2*(b*b+h*h)),c[1]=Math.asin(2*(b*a-e*h)),c[2]=Math.atan2(2*(e*a+b*h),1-2*(e*e+b*b)))}return c}function r(a,c){var g=Math.cos(a[0]),e=Math.cos(a[1]),b=Math.cos(a[2]),h=Math.sin(a[0]),
l=Math.sin(a[1]),n=Math.sin(a[2]),w=g*b,z=g*n,k=h*b,u=h*n;c[0]=e*b;c[1]=e*n;c[2]=-l;c[3]=l*k-z;c[4]=l*u+w;c[5]=e*h;c[6]=l*w+u;c[7]=l*z-k;c[8]=e*g;return c}function f(a,c,g){g||(g=new Float32Array(3));H.transformQuat(c,a,g);return g}function k(a){if(!(a instanceof Object))return a;var c;c=a.constructor;switch(c){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:c=new c(a);break;case Array:c=new c(a.length);
for(var g=0;g<a.length;g++)c[g]=k(a[g]);break;default:for(g in c=new c,a)a.hasOwnProperty(g)&&(c[g]=k(a[g]))}return c}function y(a){var c=a[0],g=a[1],e=a[2],b=a[3],h=Math.sqrt(c*c+g*g+e*e),h=1/h;a[0]=c*h;a[1]=g*h;a[2]=e*h;a[3]=b*h}function x(a,c,g,e){if(e<g)return g;var b=g+Math.floor((e-g)/2);return a[b]>c?x(a,c,g,b-1):a[b]<c?x(a,c,b+1,e):b}function m(a){return(34*a+1)*a%289}function p(a){return a-Math.floor(a)}function q(a){return b((34*a+5)*a)}function b(a){return a-289*Math.floor(a/289)}function u(a){return a-
7*Math.floor(a/7)}function h(a,c,g){a<c&&(a=c);a>g&&(a=g);return a}function l(a,c,g){a-=c;g-=c;return c+(a-Math.floor(a/g)*g)}function e(a){return l(a,0,2*Math.PI)}function c(c,g){if(c&&g){var e=c instanceof Array;if(e!=g instanceof Array)return!1;var b=c.buffer instanceof ArrayBuffer&&"undefined"!==c.byteLength;if(b!=(g.buffer instanceof ArrayBuffer&&"undefined"!==g.byteLength))return!1;if(e){if(c.length!=g.length)return!1;for(e=0;e<c.length;e++)if(!a(c[e],g[e]))return!1}else if(b){if(c.length!=
g.length)return!1;for(e=0;e<c.length;e++)if(c[e]!=g[e])return!1}else{switch(c.constructor){case WebGLUniformLocation:case WebGLProgram:case WebGLShader:case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:return c==g}for(var h in c)if(!a(c[h],g[h]))return!1;for(h in g)if(!(h in c))return!1}return!0}return!(c||g)}function a(a,g){if(typeof a!=typeof g)return!1;switch(typeof a){case "number":case "string":case "boolean":return a==g;case "object":return c(a,g);default:return!0}}
function ca(a,c,g){var e=da,b=H.dot(a,c);-.9999999>b?(H.cross(aa,a,e),1E-6>H.length(e)&&H.cross(oa,a,e),H.normalize(e,e),L.setAxisAngle(e,Math.PI,g)):(H.cross(a,c,e),g.set(e),g[3]=1+b,L.normalize(g,g));return g}function la(a,c,g){var e=Math.sqrt(a[0]*a[0]+a[1]*a[1]);1E-6<e?(c[0]=Math.atan2(a[5],a[8]),c[1]=Math.atan2(-a[2],e),c[2]=Math.atan2(a[1],a[0]),g[0]=Math.atan2(-a[5],-a[8]),g[1]=Math.atan2(-a[2],-e),g[2]=Math.atan2(-a[1],-a[0])):(c[0]=Math.atan2(-a[7],a[4]),c[1]=Math.atan2(-a[2],e),c[2]=0,H.copy(c,
g))}d.d(t,"m",function(){return M});d.d(t,"k",function(){return Ea});d.d(t,"n",function(){return Z});d.d(t,"d",function(){return aa});d.d(t,"e",function(){return oa});d.d(t,"f",function(){return ja});d.d(t,"a",function(){return Ia});d.d(t,"b",function(){return Ca});d.d(t,"c",function(){return Ja});d.d(t,"o",function(){return Ma});d.d(t,"v",function(){return X});d.d(t,"x",function(){return Q});d.d(t,"q",function(){return Aa});d.d(t,"s",function(){return Ba});d.d(t,"z",function(){return Va});d.d(t,
"p",function(){return Ra});d.d(t,"u",function(){return ta});d.d(t,"w",function(){return ha});d.d(t,"r",function(){return ga});d.d(t,"t",function(){return P});d.d(t,"y",function(){return xa});d.d(t,"j",function(){return Za});d.d(t,"g",function(){return Ga});d.d(t,"l",function(){return Sa});d.d(t,"h",function(){return Pa});d.d(t,"i",function(){return La});t._16=function(a){return"undefined"!=typeof a};t._17=function(a,c,g){for(var e=[],b=g.length,h=0;h<b;h++){var l=g[h];l[a]==c&&e.push(l)}return e};
t._1=function(a){return new Float32Array(a)};t._2=function(a,c){var g=a.length,e=new Float32Array(g+c.length);e.set(a);e.set(c,g);return e};t._66=function(a,c){var g=a.length,e=new Uint32Array(g+c.length);e.set(a);e.set(c,g);return e};t.K=function(){return 255==(new DataView((new Uint16Array([255])).buffer)).getUint16(0,!0)};t.D=function(a,c){var g=[],e={},b=c.length,h,l;for(h=0;h<b;h++)e[c[h]]=!0;b=a.length;for(h=0;h<b;h++)l=a[h],l in e&&g.push(l);return g};t._49=O;t._18=function(a,c,g){for(var e=
0;e<g.length;e++){var b=g[e];if(b[a]===c)return b}return null};t._9=function(a,c,g){for(var e=0;e<a.length;e++)if(a[e][c]==g)return e;return-1};t.C=function(a,c){for(var g=0;g<a.length;g++)if(a[g]==c)return;a.push(c)};t._59=function(a,c,g,e){e||(e=new Float32Array(16));B.identity(e);e[12]=a;e[13]=c;e[14]=g;return e};t._39=function(a){var c=a[0]%fa*na-Fa*Math.floor(a[0]/fa);a[0]=0<c?c:c+ra;return(a[0]-1)/(ra-1)};t._13=function(a,c){c||(c=[]);c[0]=ia+Math.floor(a);return c};t.Y=function(a,c){var g=
da;g[0]=a[2];g[1]=a[1];g[2]=a[0];T(g,xa,c);return c};t._26=T;t._36=G;t.Z=r;t._35=function(a,c){var g=G(a,xa,da);c[0]=g[2];c[1]=g[1];c[2]=g[0];return c};t._33=f;t.U=function(a,c,g){g||(g=new Float32Array(4));a=H.normalize(a,da);var e=H.dot(c,a);a=H.cross(c,a,N);e=Math.acos(e);g[0]=a[0]*Math.sin(e/2);g[1]=a[1]*Math.sin(e/2);g[2]=a[2]*Math.sin(e/2);g[3]=Math.cos(e/2);return g};t._60=function(a,c,g,e){e||(e=new Float32Array(4));H.transformQuat(g,c,e);e[3]=-H.dot(a,e);return e};t.G=function(a,c,g,e){if(0==
g)return a;e=e||[];for(var b=0;b<a.length;b++)e[b]=(1-g)*a[b]+g*c[b];return e};t.O=k;t.N=function(a){var c=a instanceof Array?[]:{},g;for(g in a)if(a.hasOwnProperty(g))if(a[g]instanceof Object){var e=a[g].constructor;switch(e){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:c[g]=new e(a[g]);break;case Array:c[g]=a[g].slice(0);break;default:c[g]=a[g]}}else c[g]=a[g];return c};t._23=function(a,
c){c||(c=new Float32Array(4));v.fromMat4(a,W);var g=W[0],e=W[3],b=W[6],h=W[1],l=W[4],n=W[7],w=W[2],z=W[5],k=W[8],g=Math.sqrt(g*g+e*e+b*b)||1,h=Math.sqrt(h*h+l*l+n*n)||1,w=Math.sqrt(w*w+z*z+k*k)||1;W[0]/=g;W[3]/=g;W[6]/=g;W[1]/=h;W[4]/=h;W[7]/=h;W[2]/=w;W[5]/=w;W[8]/=w;L.fromMat3(W,c);L.normalize(c,c);return c};t._25=function(a,c){c||(c=new Float32Array(3));c[0]=a[12];c[1]=a[13];c[2]=a[14];return c};t._24=function(a){z[0]=.577350269189626;z[1]=.577350269189626;z[2]=.577350269189626;z[3]=0;I.transformMat4(z,
a,z);return I.length(z)};t._0=function(a,c){var g=c.left,e=c.right,b=c.top,h=c.bottom,l=c.near,n=c.far;g[0]=a[3]+a[0];g[1]=a[7]+a[4];g[2]=a[11]+a[8];g[3]=a[15]+a[12];e[0]=a[3]-a[0];e[1]=a[7]-a[4];e[2]=a[11]-a[8];e[3]=a[15]-a[12];b[0]=a[3]-a[1];b[1]=a[7]-a[5];b[2]=a[11]-a[9];b[3]=a[15]-a[13];h[0]=a[3]+a[1];h[1]=a[7]+a[5];h[2]=a[11]+a[9];h[3]=a[15]+a[13];l[0]=a[3]+a[2];l[1]=a[7]+a[6];l[2]=a[11]+a[10];l[3]=a[15]+a[14];n[0]=a[3]-a[2];n[1]=a[7]-a[6];n[2]=a[11]-a[10];n[3]=a[15]-a[14];y(g);y(e);y(b);y(h);
y(l);y(n);return c};t._55=function(a,c,g){return g<-C.P(a,c.near)||g<-C.P(a,c.left)||g<-C.P(a,c.right)||g<-C.P(a,c.top)||g<-C.P(a,c.bottom)||g<-C.P(a,c.far)?!0:!1};t.X=function(a,c,g,e,b){var h=H.dot(g,c.far),l=H.dot(e,c.far),n=H.dot(b,c.far),h=Math.sqrt(h*h+l*l+n*n);if(h<-C.P(a,c.near)||h<-C.P(a,c.far))return!0;h=H.dot(g,c.left);l=H.dot(e,c.left);n=H.dot(b,c.left);if(Math.sqrt(h*h+l*l+n*n)<-C.P(a,c.left))return!0;h=H.dot(g,c.right);l=H.dot(e,c.right);n=H.dot(b,c.right);if(Math.sqrt(h*h+l*l+n*n)<
-C.P(a,c.right))return!0;h=H.dot(g,c.top);l=H.dot(e,c.top);n=H.dot(b,c.top);if(Math.sqrt(h*h+l*l+n*n)<-C.P(a,c.top))return!0;h=H.dot(g,c.bottom);l=H.dot(e,c.bottom);n=H.dot(b,c.bottom);return Math.sqrt(h*h+l*l+n*n)<-C.P(a,c.bottom)?!0:!1};t._27=function(a,c,g,e){e||(e=0);for(var b=a.length,h=0;h<b;h+=3){var l=a[h],n=a[h+1],w=a[h+2];g[e+h]=c[0]*l+c[4]*n+c[8]*w+c[12];g[e+h+1]=c[1]*l+c[5]*n+c[9]*w+c[13];g[e+h+2]=c[2]*l+c[6]*n+c[10]*w+c[14]}return g};t._37=function(a,c,g,e){e=e||0;for(var b=a.length,
h=ka,l=0;l<b;l+=4){h[0]=a[l];h[1]=a[l+1];h[2]=a[l+2];h[3]=a[l+3];var n=0<h[3];L.multiply(c,h,h);(n&&0>h[3]||!n&&0<h[3])&&I.scale(h,-1,h);g[e+l]=h[0];g[e+l+1]=h[1];g[e+l+2]=h[2];g[e+l+3]=h[3]}return g};t._67=function(a,c,g){g||(g=new Float32Array(3));var e=z;e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=0;I.transformMat4(e,c,e);g[0]=e[0];g[1]=e[1];g[2]=e[2]};t._68=function(a,c){c||(c=[]);for(var g=0;g<a.length;g+=3)c[g/3]=new Float32Array([a[g],a[g+1],a[g+2]]);return c};t.F=x;t.P=function(a,c){for(var g=0;g<
a.length;g++)if(a[g]!=c[g])return!1;return!0};t._62=function(a,c,e,b,h){h||(h=new Float32Array(3));e=B.fromRotationTranslation(e,b,g);1!==c&&(b=B.identity(ea),c=H.set(c,c,c,da),B.scale(b,c,b),B.multiply(e,b,e));H.transformMat4(a,e,h);return h};t._45=function(a,c,g,e){e||(e=new Float32Array(3));var b=da;H.subtract(c,a,b);H.transformQuat(b,g,b);H.subtract(c,b,e)};t._5=function(){var a=da;a[0]=0;a[1]=0;a[2]=0;var c=new Float32Array(16),g=new Float32Array(16),e=new Float32Array(16),b=new Float32Array(16),
h=new Float32Array(16),l=new Float32Array(16);B.lookAt(a,[-1,0,0],[0,-1,0],c);B.scale(c,[-1,1,1],c);B.scale(c,[-1,1,-1],g);B.lookAt(a,[0,-1,0],[0,0,-1],e);B.scale(e,[1,1,-1],e);B.scale(e,[1,-1,-1],b);B.lookAt(a,[0,0,-1],[0,-1,0],h);B.scale(h,[-1,1,1],h);B.scale(h,[-1,1,-1],l);return[c,g,e,b,h,l]};t._6=function(){var a=da;a[0]=0;a[1]=0;a[2]=0;var c=new Float32Array(16),g=new Float32Array(16),e=new Float32Array(16),b=new Float32Array(16),h=new Float32Array(16),l=new Float32Array(16);B.lookAt(a,[1,0,
0],[0,-1,0],c);B.scale(c,[-1,1,-1],g);B.lookAt(a,[0,1,0],[0,0,1],e);B.scale(e,[1,-1,-1],b);B.lookAt(a,[0,0,1],[0,-1,0],h);B.scale(h,[-1,1,-1],l);return[c,g,e,b,h,l]};t._11=function(a,c){for(var g=c,e=0;e<a.length;e++)g=(g<<5)-g+a.charCodeAt(e),g&=g;return g};t._22=function(a,c){c[15]=1;c[14]=0;c[13]=0;c[12]=0;c[11]=0;c[10]=a[8];c[9]=a[7];c[8]=a[6];c[7]=0;c[6]=a[5];c[5]=a[4];c[4]=a[3];c[3]=0;c[2]=a[2];c[1]=a[1];c[0]=a[0];return c};t._32=function(a,c){c||(c=a);var g=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<
g?(c[3]=2*Math.acos(a[3]),g=1/Math.sqrt(g),c[0]=a[0]*g,c[1]=a[1]*g,c[2]=a[2]*g):(c[3]=0,c[0]=1,c[1]=0,c[2]=0);return c};t._63=function(a){return isNaN(a)||"undefined"==typeof a?NaN:a|0};t.T=function(a){return a*Math.PI/180};t._38=function(a){return 180*a/Math.PI};t._54=function(a){var c=.366025403784439*a[0]+.366025403784439*a[1],g=Math.floor(a[0]+c),e=Math.floor(a[1]+c),b=.211324865405187*g+.211324865405187*e,c=a[0]-g+b;a=a[1]-e+b;var h=c>a?1:0,l=1-h,b=c+.211324865405187-h,n=a+.211324865405187-l,
w=c+-.577350269189626,z=a+-.577350269189626,g=g%289,e=e%289,k=Math.max(.5-(c*c+a*a),0),u=Math.max(.5-(b*b+n*n),0),f=Math.max(.5-(w*w+z*z),0),v=2*p(.024390243902439*m(m(e)+g))-1,h=2*p(.024390243902439*m(m(e+l)+g+h))-1,A=2*p(.024390243902439*m(m(e+1)+g+1))-1,g=Math.abs(v)-.5,e=Math.abs(h)-.5,l=Math.abs(A)-.5,v=v-Math.floor(v+.5),h=h-Math.floor(h+.5),A=A-Math.floor(A+.5);return 130*(k*k*k*k*(1.79284291400159-.85373472095314*(v*v+g*g))*(v*c+g*a)+u*u*u*u*(1.79284291400159-.85373472095314*(h*h+e*e))*(h*
b+e*n)+f*f*f*f*(1.79284291400159-.85373472095314*(A*A+l*l))*(A*w+l*z))};t.J=function(a){var c=1/7,g=c/2,e=b(Math.floor(a[0])),h=b(Math.floor(a[1])),l=p(a[0]);a=p(a[1]);var n=l-.5,w=l-1.5,l=a-.5;a-=1.5;var z=q(e),k=q(e+1),f=z,e=k,z=q(z+h),k=q(k+h),f=q(f+h+1),e=q(e+h+1),h=n+.7*(u(z)*c+g),v=w+.7*(u(k)*c+g),n=n+.7*(u(f)*c+g),w=w+.7*(u(e)*c+g),z=l+.7*(u(Math.floor(z*c))*c+g),l=l+.7*(u(Math.floor(k*c))*c+g),f=a+.7*(u(Math.floor(f*c))*c+g),c=a+.7*(u(Math.floor(e*c))*c+g);return Math.min(h*h+z*z,v*v+l*l,
n*n+f*f,w*w+c*c)};t._29=function(a,c,g,e,h){h||(h=new Float32Array(4));a=H.transformQuat(c,a,da);c=g[0];var b=g[1];g=g[2];var l=W;l[0]=b*b+g*g;l[1]=-b*c;l[2]=-g*c;l[3]=-c*b;l[4]=c*c+g*g;l[5]=-g*b;l[6]=-c*g;l[7]=-b*g;l[8]=c*c+b*b;H.transformMat3(a,l,a);H.normalize(a,a);L.rotationTo(e,a,h);return h};t.I=function(a,c){c||(c=new Float32Array(4));var g,e;g=L.setAxisAngle([0,0,1],Math.PI,L.create());e=L.setAxisAngle([1,0,0],Math.PI/2,L.create());L.multiply(g,e,g);L.multiply(a,g,c);return c};t.M=h;t._50=
function(a,c,g,e){return e?(g=Math.exp(-g/e),(1-g)*a+g*c):a};t._53=function(a,c,g,e,h){h||(h=new Float32Array(a.length));if(e)for(g=Math.exp(-g/e),e=0;e<h.length;e++)h[e]=(1-g)*a[e]+g*c[e];else H.copy(a,h);return h};t._51=function(a,c,g,e,h){h||(h=new Float32Array(a.length));e?L.slerp(a,c,Math.exp(-g/e),h):L.copy(a,h);return h};t._14=function(a){return"object"===typeof a&&a.buffer&&a.buffer instanceof ArrayBuffer?!0:!1};t._15=function(a,c){if(a instanceof Array||a.buffer&&a.buffer instanceof ArrayBuffer)if(c&&
c==a.length||!c)return!0;return!1};t.R=function(a,c){var g=v.fromQuat(a,W),e=da;e[0]=g[6];e[1]=g[7];e[2]=g[8];e=H.cross(ja,e,e);H.normalize(e,e);var h=g[4];!c&&0<h&&(e[0]*=-1,e[1]*=-1,e[2]*=-1);h=N;h[0]=g[0];h[1]=g[1];h[2]=g[2];H.normalize(h,h);g=w;L.rotationTo(h,e,g);L.multiply(g,a,a)};t._7=function(a,c,g,e){g=g*c-.5;e=e*c-.5;var h=g-Math.floor(g),b=e-Math.floor(e);g=Math.floor(g);e=Math.floor(e);var l=c-1;return(a[e*c+g]*(1-h)+a[e*c+Math.min(g+1,l)]*h)*(1-b)+(a[Math.min(e+1,l)*c+g]*(1-h)+a[Math.min(e+
1,l)*c+Math.min(g+1,l)]*h)*b};t._42=function(a){for(var c=0,g=0;3>g;g++)0<(a&1<<g)&&c++;return c};t._43=function(a){for(var c=[0,0,0],g=0;3>g;g++)0<(a&1<<g)&&(c[2-g]=1);return c};t._41=function(a,c){var g=0;(1==c||2==c)&&0<(a&4)&&g++;2==c&&0<(a&2)&&g++;return g};t._4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=16*Math.random()|0;return("x"==a?c:c&3|8).toString(16)})};t._8=function(a){var c=0,g;for(g in a)a.hasOwnProperty(g)&&c++;return c};t._40=function(a){return a.length?
a[Math.floor(Math.random()*a.length)]:null};t._12=function(a,c,g){g||(g=new Float32Array(3));g[0]=a[0]-c[0];g[1]=a[1]-c[1];g[2]=0;H.normalize(g,g)};t._61=function(a,c,g){var e=a[0],h=a[1];a=a[2];var b=c[0],l=c[1],n=c[2];c=c[3];var w=l*a-n*h,z=n*e-b*a,k=b*h-l*e;g[0]=e+2*w*c+2*(l*k-n*z);g[1]=h+2*z*c+2*(n*w-b*k);g[2]=a+2*k*c+2*(b*z-l*w);return g};t.B=l;t.A=e;t._58=function(a,g){for(var e in a){var h=!0,b=a[e],l=g[e];switch(typeof b){case "number":case "string":case "boolean":h=b==l;break;case "object":h=
c(b,l)}if(!h)return!1}return!0};t._28=function(a,c){var g=a[0],e=a[2],h=a[3];c[0]=a[1];c[1]=e;c[2]=h;c[3]=g;return c};t._21=function(a,c,g,e){var h=z;h.set(a);h[3]=c;a=w;da[0]=g[3];da[1]=g[4];da[2]=g[5];a.set(da);a[3]=0;a=I.dot(h,a);if(0==a)return null;c=w;H.copy(g,da);c.set(da);c[3]=1;h=-I.dot(h,c)/a;e[0]=g[0]+h*g[3];e[1]=g[1]+h*g[4];e[2]=g[2]+h*g[5];return e};t._10=function(a,c,g,e){var h=c[0]-a[0],b=g[0]-a[0],l=c[1]-a[1],n=g[1]-a[1];c=c[2]-a[2];a=g[2]-a[2];e[0]=l*a-c*n;e[1]=b*c-h*a;e[2]=h*n-l*
b;return e};t._47=ca;t.H=function(a,c,g){if(c==g)return g-a;a=e(a);c=e(c);g=e(g);c=2*Math.PI-c;g=e(g+c);a=e(a+c);return a>g?(g-=a,a=2*Math.PI-a,-g>a?a:g):0};t._52=function(a,c,g){isFinite(c)&&isFinite(g)&&(a=h(a,c,g));return a*a*(3-2*a)};t._19=function(a,c,g){return c+a*(g-c)};t.E=function(a,c){for(var g=0;g<a.length;g++)for(var e=0;e<c.length;e++)if(c[e]==a[g])return!0;return!1};t._69=function(a,c){for(var g=Math.max(a.length,c.length),e=0;e<g;e++){var h=O((e>=a.length?0:a[e])-(e>=c.length?0:c[e]));
if(h)return h}return 0};t._70=function(a){return a.join(".")};t._57=function(a){return a.split(".").map(function(a){return a|0})};t._56=function(a,c){c[0]=Math.pow(a[0],Da);c[1]=Math.pow(a[1],Da);c[2]=Math.pow(a[2],Da);return c};t._20=function(a,c){c[0]=Math.pow(a[0],1/Da);c[1]=Math.pow(a[1],1/Da);c[2]=Math.pow(a[2],1/Da);return c};t.L=function(a){return!!parseInt(a.toString(2).substr(1),2)};t.W=function(a,c,g,e){e[0]=a[0];e[1]=c[0];e[2]=g[0];e[3]=a[1];e[4]=c[1];e[5]=g[1];e[6]=a[2];e[7]=c[2];e[8]=
g[2];return e};t.S=function(){var a=[{}];a.length=0;return a};t._3=function(a){a=Math.round(32767.5*(a+1)-32768);return h(a?a:0,-32768,32767)};t._48=function(a){return h((a+32768)/32767.5-1,-1,1)};t._65=function(a){return h(Math.round(255*a),0,255)};t._64=function(a){return h(a/255,0,1)};t.V=function(a,c,g,e){var b=H.subtract(g,c,da),l=H.subtract(e,g,N),n=H.subtract(c,e,U);c=H.subtract(a,c,K);g=H.subtract(a,g,D);a=H.subtract(a,e,R);e=H.cross(b,l,V);if(0<=H.dot(H.cross(e,b,F),c)&&0<=H.dot(H.cross(e,
l,F),g)&&0<=H.dot(H.cross(e,n,F),a))return n=H.length(e),l=H.dot(e,c),Math.abs(l/n);b=H.scale(b,h(H.dot(b,c)/H.length(b),0,1),F);c=H.length(H.subtract(c,b,F));l=H.scale(l,h(H.dot(l,g)/H.length(l),0,1),F);l=H.length(H.subtract(g,l,F));n=H.scale(n,h(H.dot(n,a)/H.length(n),0,1),F);n=H.length(H.subtract(a,n,F));return Math.min(Math.min(c,l),n)};t._46=function(a,c,g,e,h){if(g||e){var b=L.identity(ka);g&&(c=L.setAxisAngle(c,g,wa),L.multiply(b,c,b));a=L.copy(a,h);e&&(h=f(a,aa,da),e=L.setAxisAngle(h,e,wa),
L.normalize(e,e),L.multiply(b,e,b));L.multiply(b,a,a);L.normalize(a,a)}};t._30=function(a,c,g,e){var h=N;f(c,e,h);H.normalize(h,h);e=U;H.subtract(g,a,e);H.normalize(e,e);a=ca(h,e,z);L.multiply(a,c,c);L.normalize(c,c)};t._31=function(a,c,g,e){c=H.transformQuat(c,a,N);var h=H.dot(e,g);e=H.scale(e,h,U);g=H.subtract(g,e,U);e=L.identity(ka);H.normalize(g,g);.999999>Math.abs(H.dot(c,g))&&ca(c,g,e);L.normalize(e,e);L.multiply(e,a,a)};t.Q=function(a,c){for(var g=2*Math.PI,e=[],h=0;3>h;h++)e[h]=a[h]-c[h],
5.1<e[h]?(a[h]-=e[h]/g*g,e[h]=a[h]-c[h]):-5.1>e[h]&&(a[h]+=-e[h]/g*g,e[h]=a[h]-c[h]);3.2<Math.abs(e[0])&&1.6>Math.abs(e[1])&&1.6>Math.abs(e[2])&&(a[0]=0<e[0]?a[0]-g:a[0]+g);3.2<Math.abs(e[1])&&1.6>Math.abs(e[2])&&1.6>Math.abs(e[0])&&(a[1]=0<e[1]?a[1]-g:a[1]+g);3.2<Math.abs(e[2])&&1.6>Math.abs(e[0])&&1.6>Math.abs(e[1])&&(a[2]=0<e[2]?a[2]-g:a[2]+g)};t._44=function(a,c,g){c=r(c,W);a=r(a,A);a=v.multiply(a,c,n);c=da;var e=N;la(a,c,e);H.copy(Math.abs(c[0])+Math.abs(c[1])+Math.abs(c[2])>Math.abs(e[0])+Math.abs(e[1])+
Math.abs(e[2])?e:c,g);return g};t._34=function(a,c,g){a=v.fromQuat(a,W);var e=da,h=N;la(a,e,h);H.copy(Math.abs(e[0]-c[0])+Math.abs(e[1]-c[1])+Math.abs(e[2]-c[2])>Math.abs(h[0]-c[0])+Math.abs(h[1]-c[1])+Math.abs(h[2]-c[2])?h:e,g);return g};var v=d(27),B=d(21),C=d(41),L=d(9),H=d(3),I=d(7),da=new Float32Array(3),N=new Float32Array(3),U=new Float32Array(3),K=new Float32Array(3),D=new Float32Array(3),R=new Float32Array(3),V=new Float32Array(3),F=new Float32Array(3),z=new Float32Array(4),w=new Float32Array(4),
W=new Float32Array(9),A=new Float32Array(9),n=new Float32Array(9),g=new Float32Array(16),ea=new Float32Array(16),ka=L.create(),wa=L.create(),M=new Float32Array([0,0,0]),Ea=new Float32Array([0,0,0,1]),Z=new Float32Array([1,1,1]),aa=new Float32Array([1,0,0]),oa=new Float32Array([0,1,0]),ja=new Float32Array([0,0,1]),Ia=new Float32Array([-1,0,0]),Ca=new Float32Array([0,-1,0]),Ja=new Float32Array([0,0,-1]),Ma=0,X=1,Q=2,Aa=3,Ba=4,Va=5,Ra=6,ta=7,ha=8,ga=9,P=10,xa=11,pa=[Ma,X,Q,Ba,Va],ia=5E4,na=48271,ra=
2147483647,Fa=ra%na,fa=Math.floor(ra/na),Za=[new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,0,0,0,0,1]),new Float32Array([0,0,1,0,0,-1,0,0,1,0,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]),new Float32Array([1,0,0,0,0,-1,0,0,0,0,-1,0,0,0,0,1]),new Float32Array([-1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1])],Da=2.2,Ga=1,Sa=2,Pa=4,La=4},function(E,t,d){function O(){var h=new b(3);h[0]=0;h[1]=0;h[2]=0;return h}function T(h,e,c){var a=new b(3);
a[0]=h;a[1]=e;a[2]=c;return a}function G(h,e,c){c[0]=h[0]-e[0];c[1]=h[1]-e[1];c[2]=h[2]-e[2];return c}function r(h,e,c){c[0]=h[0]*e[0];c[1]=h[1]*e[1];c[2]=h[2]*e[2];return c}function f(h,e,c){c[0]=h[0]/e[0];c[1]=h[1]/e[1];c[2]=h[2]/e[2];return c}function k(h,e){var c=e[0]-h[0],a=e[1]-h[1],b=e[2]-h[2];return Math.sqrt(c*c+a*a+b*b)}function y(h,e){var c=e[0]-h[0],a=e[1]-h[1],b=e[2]-h[2];return c*c+a*a+b*b}function x(h){var e=h[0],c=h[1];h=h[2];return Math.sqrt(e*e+c*c+h*h)}function m(h){var e=h[0],
c=h[1];h=h[2];return e*e+c*c+h*h}function p(h,e){var c=h[0],a=h[1],b=h[2],c=c*c+a*a+b*b;0<c&&(c=1/Math.sqrt(c),e[0]=h[0]*c,e[1]=h[1]*c,e[2]=h[2]*c);return e}function q(h,e){return h[0]*e[0]+h[1]*e[1]+h[2]*e[2]}Object.defineProperty(t,"__esModule",{value:!0});t.create=O;t.clone=function(h){var e=new b(3);e[0]=h[0];e[1]=h[1];e[2]=h[2];return e};t.fromValues=T;t.copy=function(h,e){e[0]=h[0];e[1]=h[1];e[2]=h[2];return e};t.set=function(h,e,c,a){a[0]=h;a[1]=e;a[2]=c;return a};t.add=function(h,e,c){c[0]=
h[0]+e[0];c[1]=h[1]+e[1];c[2]=h[2]+e[2];return c};t.subtract=G;d.d(t,"sub",function(){return G});t.multiply=r;d.d(t,"mul",function(){return r});t.divide=f;d.d(t,"div",function(){return f});t.min=function(h,e,c){c[0]=Math.min(h[0],e[0]);c[1]=Math.min(h[1],e[1]);c[2]=Math.min(h[2],e[2]);return c};t.max=function(h,e,c){c[0]=Math.max(h[0],e[0]);c[1]=Math.max(h[1],e[1]);c[2]=Math.max(h[2],e[2]);return c};t.scale=function(h,e,c){c[0]=h[0]*e;c[1]=h[1]*e;c[2]=h[2]*e;return c};t.scaleAndAdd=function(h,e,c,
a){a[0]=h[0]+e[0]*c;a[1]=h[1]+e[1]*c;a[2]=h[2]+e[2]*c;return a};t.distance=k;d.d(t,"dist",function(){return k});t.squaredDistance=y;d.d(t,"sqrDist",function(){return y});t.length=x;d.d(t,"len",function(){return x});t.squaredLength=m;d.d(t,"sqrLen",function(){return m});t.negate=function(h,e){e[0]=-h[0];e[1]=-h[1];e[2]=-h[2];return e};t.inverse=function(h,e){e[0]=1/h[0];e[1]=1/h[1];e[2]=1/h[2];return e};t.normalize=p;t.dot=q;t.cross=function(h,e,c){var a=h[0],b=h[1];h=h[2];var l=e[0],k=e[1];e=e[2];
c[0]=b*e-h*k;c[1]=h*l-a*e;c[2]=a*k-b*l;return c};t.lerp=function(h,e,c,a){var b=h[0],l=h[1];h=h[2];a[0]=b+c*(e[0]-b);a[1]=l+c*(e[1]-l);a[2]=h+c*(e[2]-h);return a};t.hermite=function(h,e,c,a,b,k){var l=b*b,u=l*(2*b-3)+1,f=l*(b-2)+b,m=l*(b-1);b=l*(3-2*b);k[0]=h[0]*u+e[0]*f+c[0]*m+a[0]*b;k[1]=h[1]*u+e[1]*f+c[1]*m+a[1]*b;k[2]=h[2]*u+e[2]*f+c[2]*m+a[2]*b;return k};t.bezier=function(h,e,c,a,b,k){var l=1-b,u=l*l,f=b*b,m=u*l,u=3*b*u,l=3*f*l;b*=f;k[0]=h[0]*m+e[0]*u+c[0]*l+a[0]*b;k[1]=h[1]*m+e[1]*u+c[1]*l+
a[1]*b;k[2]=h[2]*m+e[2]*u+c[2]*l+a[2]*b;return k};t.random=function(h,e){var c=2*u()*Math.PI,a=2*u()-1,b=Math.sqrt(1-a*a)*h;e[0]=Math.cos(c)*b;e[1]=Math.sin(c)*b;e[2]=a*h;return e};t.transformMat4=function(h,e,c){var a=h[0],b=h[1];h=h[2];var l=e[3]*a+e[7]*b+e[11]*h+e[15],l=l||1;c[0]=(e[0]*a+e[4]*b+e[8]*h+e[12])/l;c[1]=(e[1]*a+e[5]*b+e[9]*h+e[13])/l;c[2]=(e[2]*a+e[6]*b+e[10]*h+e[14])/l;return c};t.transformMat3=function(h,e,c){var a=h[0],b=h[1];h=h[2];c[0]=a*e[0]+b*e[3]+h*e[6];c[1]=a*e[1]+b*e[4]+h*
e[7];c[2]=a*e[2]+b*e[5]+h*e[8];return c};t.transformQuat=function(h,e,c){var a=h[0],b=h[1],l=h[2];h=e[0];var k=e[1],u=e[2];e=e[3];var f=e*a+k*l-u*b,m=e*b+u*a-h*l,q=e*l+h*b-k*a,a=-h*a-k*b-u*l;c[0]=f*e+a*-h+m*-u-q*-k;c[1]=m*e+a*-k+q*-h-f*-u;c[2]=q*e+a*-u+f*-k-m*-h;return c};t.rotateX=function(h,e,c,a){var b=[],l=[];b[0]=h[0]-e[0];b[1]=h[1]-e[1];b[2]=h[2]-e[2];l[0]=b[0];l[1]=b[1]*Math.cos(c)-b[2]*Math.sin(c);l[2]=b[1]*Math.sin(c)+b[2]*Math.cos(c);a[0]=l[0]+e[0];a[1]=l[1]+e[1];a[2]=l[2]+e[2];return a};
t.rotateY=function(h,e,c,a){var b=[],l=[];b[0]=h[0]-e[0];b[1]=h[1]-e[1];b[2]=h[2]-e[2];l[0]=b[2]*Math.sin(c)+b[0]*Math.cos(c);l[1]=b[1];l[2]=b[2]*Math.cos(c)-b[0]*Math.sin(c);a[0]=l[0]+e[0];a[1]=l[1]+e[1];a[2]=l[2]+e[2];return a};t.rotateZ=function(h,e,c,a){var b=[],l=[];b[0]=h[0]-e[0];b[1]=h[1]-e[1];b[2]=h[2]-e[2];l[0]=b[0]*Math.cos(c)-b[1]*Math.sin(c);l[1]=b[0]*Math.sin(c)+b[1]*Math.cos(c);l[2]=b[2];a[0]=l[0]+e[0];a[1]=l[1]+e[1];a[2]=l[2]+e[2];return a};d.d(t,"forEach",function(){return h});t.angle=
function(h,e){var c=T(h[0],h[1],h[2]),a=T(e[0],e[1],e[2]);p(c,c);p(a,a);c=q(c,a);return 1<c?0:Math.acos(c)};t.str=function(h){return"vec3("+h[0]+", "+h[1]+", "+h[2]+")"};var b="undefined"!==typeof Float32Array?Float32Array:Array,u=Math.random,h=function(){var h=O();return function(e,c,a,b,l,k){var u;c||(c=3);a||(a=0);for(b?u=Math.min(b*c+a,e.length):u=e.length;a<u;a+=c)h[0]=e[a],h[1]=e[a+1],h[2]=e[a+2],l(h,k,h),e[a]=h[0],e[a+1]=h[1],e[a+2]=h[2];return e}}()},function(E,t,d){E=d(0);var O=d(32),T=d(5),
G=d(1),r=d(2);d=Object(E.a)("__config",function(f,k){function d(){return O.a.module_check(k.Kf.hu)}function x(){for(var f=k.Kf,b=null,u=!1,h=document.getElementsByTagName("script"),l=0;l<h.length;l++){for(var e=h[l].src,c=0;c<f.lG.length;c++)if(0<=e.indexOf(f.lG[c])&&(b=e,h[l].attributes["b4w-offset"])){b=b.substring(0,b.lastIndexOf("/"))+"/"+h[l].attributes["b4w-offset"].value;u=!0;break}if(u)break}b||(p.warn("Couldn't determine path to ancillary resources, fallback to the current page directory"),
b=document.location.href);f=b.indexOf("?");0<=f&&(b=b.substring(0,f));return b.substring(0,b.lastIndexOf("/"))}var m=Object(T.a)(f),p=Object(G.a)(f);k.P_LOW=1;k.P_HIGH=2;k.P_ULTRA=3;k.P_CUSTOM=4;k.P_AUTO=5;k.context={alpha:!0,antialias:!1,premultipliedAlpha:!0};k.CE=r.O(k.context);k.wa={alpha_sort:!0,alpha_sort_threshold:.1,mn:[6,3],max_fps:1E4,console_verbose:!1,do_not_load_resources:!1,use_min50:!1,enable_texture_cache:!0,iF:1,fP:5,background_color:[0,0,0,0],canvas_resolution_factor:1,Gk:3,allow_cors:!1,
hF:!1,Ty:!0,anisotropic_filtering:!0,Nx:!1,wI:!1,dU:!1,cU:!1,eU:!1,aE:!1,IM:!1,show_hud_debug_info:!1,Eu:!0,shadows:!0,stereo:"NONE",reflections:!0,refractions:!0,ssao:!0,dof:!0,god_rays:!0,bloom:!0,motion_blur:!0,compositing:!0,antialiasing:!0,smaa:!1,debug_view:!1,mJ:!1,Eo:!0,Hw:!0,sd:!0,water_dynamic:!0,shore_smoothing:!0,xp:!0,TI:!0,precision:"highp",quality:k.P_HIGH,Pt:!0,lod_leap_smooth_threshold:3,assets_gzip_available:!1,MR:!1,LB:!1,Cz:!1,dJ:!1,is_mobile_device:!1,pA:!1,hz:!1,nY:!1,Js:!1,
allow_hidpi:!1,aI:!1,OA:!1,YF:!1,enable_selectable:!0,enable_outlining:!0,lod_smooth_transitions:!0,glow_materials:!0,Jv:!1,fF:!1,DA:[0,0],nH:!0,hx:!1,url_params:null,Nb:!0,Jc:4,Yq:!1,yH:!1,JS:!1,Bs:!1,wH:!1,jE:!1,UF:!1,TF:!1,media_auto_activation:!0,IG:4,hw:!1,gl_debug:!1,cE:!1,yD:!1,Qy:!1,Gm:"dds",shadow_blur_samples:"",reflection_quality:"",srgb_type:"SRGB_SIMPLE",Mv:!1,Ds:!1,debug_loading:!1,GG:!1,FG:!1,iE:!1,tp:!0};k.SE=r.O(k.wa);k.Xk={dv:-1,jF:!1,Sm:1};k.controls={GR:1/120};k.pe={path:"",$R:"B4W_ASSETS_PATH=__JS__/assets/",
pS:"B4W_PROJ_ASSETS_PATH=__JS__/../projects/__NAME__/assets/",AR:15,prevent_caching:!0,NA:!1,zz:!1,Pw:!1};k.DD=r.O(k.pe);k.Kf={shaders_path:"",AT:"../shaders/",ZH:"include/",mY:"postprocessing/",hu:"built_in_data",lG:"b4w.js b4w.min.js b4w.simple.min.js b4w.whitespace.min.js b4w_app_bundle.js B4W_MAIN_MODULE".split(" "),smaa_search_texture_path:"smaa_search_texture.png",smaa_area_texture_path:"smaa_area_texture.png"};k.RF={webvr:{distortion_coefs:[.22,.28],chromatic_aberration_coefs:[-.015,.02,.025,
.02]},nonwebvr:{YE:.8,ki:.064,Ki:.035,Gs:.039,distortion_coefs:[.34,.55],chromatic_aberration_coefs:[0,0,0,0],lm:.11,$i:.062,Li:.004}};k.xa={enabled:!0,max_fps:60,it:"",ay:"",by:"B4W_URANIUM_PATH=uranium/",CD:"uranium.js",lJ:"uranium_wasm.js",LG:"uranium.js.mem",kJ:"uranium_wasm.wasm",SI:"/dist/uranium",bz:!1,ping:!1,On:!0,nt:!0};k.fH=r.O(k.xa);k.An={Ir:1024,xu:256,LE:32,tO:128,sO:256,hH:.25,hS:.5,gS:1};k.CH=r.O(k.An);k.Qa={CC:!0,ow:!1,HD:!1,mE:!1,VE:!1};k.XH=r.O(k.Qa);k.Dd={outlining_overview_mode:!1,
ti:[1,.4,.05],Gl:.2,Hl:3.8,Il:1};k.Km={enabled:!1,Vs:39,aU:0,DT:"COLOR"};k.QE=r.O(k.Km);k.di={zR:8,GA:64,KA:8,kw:8,LA:15,KG:0,lw:128,Yg:1024,HA:4096,Ic:4096,MA:[4096,4096],wo:24};k.BE=r.O(k.di);k.apply_quality=function(){var f=k.wa,b=k.xa,u=k.An;switch(f.quality){case k.P_ULTRA:f.shadows=!0;f.shore_smoothing=!0;f.ssao=!0;f.dof=!0;f.god_rays=!0;f.bloom=!0;f.reflections=!0;f.refractions=!0;f.Eo=!0;f.Hw=!0;f.sd=!0;u.Ir=2048;u.xu=512;f.Gk=3;f.anisotropic_filtering=!0;f.use_min50=!1;f.water_dynamic=!0;
f.xp=!0;f.antialiasing=!0;f.smaa=!1;f.compositing=!0;f.motion_blur=!0;f.allow_hidpi=!0;f.enable_outlining=!0;f.glow_materials=!0;f.Jc=16;f.srgb_type="SRGB_PROPER";b.max_fps=120;f.lod_smooth_transitions=!0;break;case k.P_HIGH:f.shadows=!0;f.shore_smoothing=!0;f.ssao=!0;f.dof=!0;f.god_rays=!0;f.bloom=!0;f.reflections=!0;f.refractions=!0;f.Eo=!0;f.Hw=!0;f.sd=!0;u.Ir=1024;u.xu=256;f.Gk=3;f.anisotropic_filtering=!0;f.use_min50=!1;f.water_dynamic=!0;f.xp=!0;f.antialiasing=!0;f.smaa=!1;f.compositing=!0;
f.motion_blur=!0;f.allow_hidpi=!1;f.enable_outlining=!0;f.glow_materials=!0;f.srgb_type="SRGB_SIMPLE";f.Jc=4;b.max_fps=60;f.lod_smooth_transitions=!0;break;case k.P_LOW:f.shadows=!1;f.shore_smoothing=!1;f.ssao=!1;f.dof=!1;f.god_rays=!1;f.bloom=!1;f.reflections=!1;f.refractions=!1;f.Eo=!1;f.Hw=!1;f.sd=!1;u.Ir=512;u.xu=256;f.Gk=2;f.anisotropic_filtering=!1;f.use_min50=!0;f.water_dynamic=!1;f.xp=!1;f.antialiasing=!1;f.smaa=!1;f.compositing=!1;f.motion_blur=!1;f.allow_hidpi=!1;f.enable_outlining=!1;f.glow_materials=
!1;f.srgb_type="SRGB_SIMPLE";f.Jc=1;b.max_fps=60;f.lod_smooth_transitions=!1;break;case k.P_AUTO:m.va("Direct AUTO quality profile setting is forbidden")}};k.set=function(f,b){switch(f){case "allow_cors":k.wa.allow_cors=b;break;case "allow_hidpi":k.wa.allow_hidpi=b;break;case "alpha":k.context.alpha=b;break;case "alpha_sort":k.wa.alpha_sort=b;break;case "alpha_sort_threshold":k.wa.alpha_sort_threshold=b;break;case "anaglyph_use":p.Uu("anaglyph_use","stereo");k.wa.stereo=b?"ANAGLYPH":k.wa.stereo;break;
case "animation_framerate":k.Xk.dv=b;break;case "anisotropic_filtering":k.wa.anisotropic_filtering=b;break;case "antialiasing":k.wa.antialiasing=b;break;case "assets_dir":case "assets_path":k.pe.path=b;break;case "assets_dds_available":k.pe.zz=b;break;case "assets_pvr_available":k.pe.Pw=b;break;case "assets_min50_available":k.pe.NA=b;break;case "audio":k.Qa.CC=b;break;case "background_color":k.wa.background_color=b;break;case "bloom":k.wa.bloom=b;break;case "built_in_module_name":k.Kf.hu=b;break;
case "canvas_resolution_factor":k.wa.canvas_resolution_factor=b;break;case "console_verbose":k.wa.console_verbose=b;break;case "compositing":k.wa.compositing=b;break;case "dof":k.wa.dof=b;break;case "do_not_load_resources":k.wa.do_not_load_resources=b;break;case "god_rays":k.wa.god_rays=b;break;case "stereo":k.wa.stereo=b;break;case "lod_leap_smooth_threshold":k.wa.lod_leap_smooth_threshold=b;break;case "lod_smooth_transitions":k.wa.lod_smooth_transitions=b;break;case "max_fps":k.wa.max_fps=b;break;
case "max_fps_physics":k.xa.max_fps=b;break;case "media_auto_activation":k.wa.media_auto_activation=b;break;case "motion_blur":k.wa.motion_blur=b;break;case "physics_enabled":k.xa.enabled=b;break;case "physics_uranium_path":k.xa.nt&&window.WebAssembly?(k.xa.it=b+k.xa.lJ,k.xa.ay=b+k.xa.kJ):(k.xa.it=b+k.xa.CD,k.xa.ay=b+k.xa.LG);k.xa.SI=b;break;case "physics_use_wasm":k.xa.nt=b;break;case "physics_calc_fps":k.xa.bz=b;break;case "physics_use_workers":k.xa.On=b;break;case "precision":k.wa.precision=b;
break;case "prevent_caching":k.pe.prevent_caching=b;break;case "quality":k.wa.quality=b;break;case "reflections":k.wa.reflections=b;break;case "refractions":k.wa.refractions=b;break;case "sfx_mix_mode":k.Qa.ow=b;break;case "shaders_dir":case "shaders_path":k.Kf.shaders_path=b;break;case "shadows":k.wa.shadows=b;break;case "show_hud_debug_info":k.wa.show_hud_debug_info=b;break;case "smaa":p.Uu("smaa");k.wa.smaa=b;break;case "smaa_search_texture_path":p.Uu("smaa_search_texture_path");k.Kf.smaa_search_texture_path=
b;break;case "smaa_area_texture_path":p.Uu("smaa_area_texture_path");k.Kf.smaa_area_texture_path=b;break;case "ssao":k.wa.ssao=b;break;case "debug_view":k.wa.debug_view=b;break;case "enable_selectable":k.wa.enable_selectable=b;break;case "enable_outlining":k.wa.enable_outlining=b;break;case "outlining_overview_mode":k.Dd.outlining_overview_mode=b;break;case "glow_materials":k.wa.glow_materials=b;break;case "url_params":k.wa.url_params=b;break;case "use_min50":k.wa.use_min50=b;break;case "enable_texture_cache":k.wa.enable_texture_cache=
b;break;case "gl_debug":k.wa.gl_debug=b;break;case "srgb_type":k.wa.srgb_type=b;break;case "shadow_blur_samples":k.wa.shadow_blur_samples=b;break;case "reflection_quality":k.wa.reflection_quality=b;break;case "assets_gzip_available":k.wa.assets_gzip_available=b;break;case "debug_loading":k.wa.debug_loading=b;break;case "msaa_samples":k.wa.Jc=b;break;default:p.error("Unknown config property: "+f)}};k.get=function(f){switch(f){case "allow_cors":return k.wa.allow_cors;case "allow_hidpi":return k.wa.allow_hidpi;
case "alpha":return k.context.alpha;case "alpha_sort":return k.wa.alpha_sort;case "alpha_sort_threshold":return k.wa.alpha_sort_threshold;case "anaglyph_use":return"ANAGLYPH"==k.wa.stereo;case "animation_framerate":return k.Xk.dv;case "anisotropic_filtering":return k.wa.anisotropic_filtering;case "antialiasing":return k.wa.antialiasing;case "assets_dir":case "assets_path":return k.pe.path;case "assets_dds_available":return k.pe.zz;case "assets_pvr_available":return k.pe.Pw;case "assets_min50_available":return k.pe.NA;
case "audio":return k.Qa.CC;case "background_color":return k.wa.background_color;case "bloom":return k.wa.bloom;case "built_in_module_name":return k.Kf.hu;case "canvas_resolution_factor":return k.wa.canvas_resolution_factor;case "console_verbose":return k.wa.console_verbose;case "compositing":return k.wa.compositing;case "dof":return k.wa.dof;case "do_not_load_resources":return k.wa.do_not_load_resources;case "is_mobile_device":return k.wa.is_mobile_device;case "god_rays":return k.wa.god_rays;case "stereo":return k.wa.stereo;
case "lod_leap_smooth_threshold":return k.wa.lod_leap_smooth_threshold;case "lod_smooth_transitions":return k.wa.lod_smooth_transitions;case "max_fps":return k.wa.max_fps;case "max_fps_physics":return k.xa.max_fps;case "media_auto_activation":return k.wa.media_auto_activation;case "motion_blur":return k.wa.motion_blur;case "physics_enabled":return k.xa.enabled;case "physics_uranium_path":return k.xa.SI;case "physics_uranium_bin":return k.xa.ay;case "physics_use_wasm":return k.xa.nt;case "physics_calc_fps":return k.xa.bz;
case "physics_use_workers":return k.xa.On;case "precision":return k.wa.precision;case "prevent_caching":return k.pe.prevent_caching;case "quality":return k.wa.quality;case "reflections":return k.wa.reflections;case "refractions":return k.wa.refractions;case "sfx_mix_mode":return k.Qa.ow;case "shaders_dir":case "shaders_path":return k.Kf.shaders_path;case "shadows":return k.wa.shadows;case "show_hud_debug_info":return k.wa.show_hud_debug_info;case "smaa":return k.wa.smaa;case "smaa_search_texture_path":return k.Kf.smaa_search_texture_path;
case "smaa_area_texture_path":return k.Kf.smaa_area_texture_path;case "ssao":return k.wa.ssao;case "debug_view":return k.wa.debug_view;case "enable_selectable":return k.wa.enable_selectable;case "enable_outlining":return k.wa.enable_outlining;case "outlining_overview_mode":return k.Dd.outlining_overview_mode;case "glow_materials":return k.wa.glow_materials;case "url_params":return k.wa.url_params;case "use_min50":return k.wa.use_min50;case "enable_texture_cache":return k.wa.enable_texture_cache;case "gl_debug":return k.wa.gl_debug;
case "srgb_type":return k.wa.srgb_type;case "shadow_blur_samples":return k.wa.shadow_blur_samples;case "reflection_quality":return k.wa.reflection_quality;case "assets_gzip_available":return k.wa.assets_gzip_available;case "debug_loading":return k.wa.debug_loading;case "msaa_samples":return k.wa.Jc;default:p.error("Unknown config property: "+f)}};k.reset=function(){for(var f in k.CE)k.context[f]=k.CE[f];for(f in k.SE)k.wa[f]=k.SE[f];for(f in k.DD)k.pe[f]=k.DD[f];for(f in k.fH)k.xa[f]=k.fH[f];for(f in k.CH)k.An[f]=
k.CH[f];for(f in k.XH)k.Qa[f]=k.XH[f];for(f in k.QE)k.Km[f]=k.QE[f]};k.reset_limits=function(){var f=k.di.wo,b;for(b in k.BE)k.di[b]=k.BE[b];k.di.wo=f};k.aG=d;k.iT=function(){var f=k.Kf,b=k.xa;d()||""!=f.shaders_path||(f.shaders_path=x()+"/"+f.AT);if(k.xa.nt&&window.WebAssembly)var f=b.by+b.lJ,u=b.by+b.kJ;else f=b.by+b.CD,u=b.by+b.LG;b.enabled&&""==b.it&&(b.it=f.replace("B4W_URANIUM_PATH=",""),b.ay=u.replace("B4W_URANIUM_PATH=",""))};k.get_assets_path=function(f){var b=k.pe;if(b.path)return b.path;
var u=b.$R,h="B4W_ASSETS_PATH=";f&&(u=b.pS,h="B4W_PROJ_ASSETS_PATH=",u=u.replace("__NAME__",f));u=u.replace(h,"");return u=u.replace("__JS__",x())}});t.a=d},function(E,t,d){E=d(0);var O=d(2),T=d(1);d=Object(E.a)("assert",function(d,r){function f(b){b&&m.error.apply(m,arguments);throw"engine panic:\nThe engine tried to perform an invalid operation and halted.\nPlease copy the console contents above and submit it to the Blend4Web forum at\nhttps://www.blend4web.com/en/forums/forum/17/";}function k(b,
k){y(b)||f("Structure assertion failed: invalid first object value");y(k)||f("Structure assertion failed: invalid second object value");x(b,k)||f("Structure assertion failed: incompatible types");if(!(null==b||null==k||"object"!=typeof b||O._14(b)||b instanceof Array)){for(var h in b)y(b[h])||f("Structure assertion failed: invalid value for key in the first object: "+h),h in k||f("Structure assertion failed: missing key in the first object: "+h);for(h in k)y(k[h])||f("Structure assertion failed: invalid value for key in the second object: "+
h),h in b||f("Structure assertion failed: missing key in the second object: "+h),x(b[h],k[h])||f("Structure assertion failed: incompatible types for key "+h)}}function y(b){return"undefined"==typeof b?!1:"number"==typeof b&&isNaN(b)?!1:!0}function x(b,f){if(typeof b!=typeof f)return!1;if(null!=b&&null!=f&&"object"==typeof b){var h=b instanceof Array,l=f instanceof Array;if(h&&!l||!h&&l)return!1;h=O._14(b);l=O._14(f);if(h&&!l||!h&&l)return!1}return!0}var m=Object(T.a)(d),p=null,q=!1;r.va=f;r.assert=
function(b){b||f("Assertion failed")};r.CX=function(b,k){b.constructor!=k&&f("Type assertion failed: value <"+b+"> has type <"+b.constructor+">, required <"+k+">")};r.NW=k;r.OW=function(b){q?k(b,p):q=!0;p=null!=b&&"object"==typeof b?O.N(b):b}});t.a=d},function(E,t,d){function O(){var f=new Float32Array(8);f[3]=1;f[7]=1;return f}function T(f,b,k,h){h[0]=f[0];h[1]=f[1];h[2]=f[2];h[3]=b;h[4]=k[0];h[5]=k[1];h[6]=k[2];h[7]=k[3];return h}function G(f,b){b[0]=f[4];b[1]=f[5];b[2]=f[6];b[3]=f[7];return b}
function r(f,b,k){var h=b[0],l=b[1],e=b[2],c=b[3],a=b[4],u=b[5],m=b[6];b=b[7];var v=f[0]*c,d=f[1]*c,p=f[2]*c;f=b*v+u*p-m*d;var c=b*d+m*v-a*p,q=b*p+a*d-u*v,v=-a*v-u*d-m*p;k[0]=f*b+v*-a+c*-m-q*-u;k[1]=c*b+v*-u+q*-a-f*-m;k[2]=q*b+v*-m+f*-u-c*-a;k[0]+=h;k[1]+=l;k[2]+=e;return k}t.b=O;t.e=function(f,b,k,h,l,e,c,a){var u=O();u[0]=f;u[1]=b;u[2]=k;u[3]=h;u[4]=l;u[5]=e;u[6]=c;u[7]=a;return u};t.c=function(){var f=new Float32Array(9);f[3]=1;f[7]=1;return f};t.a=function(f,b){b[0]=f[0];b[1]=f[1];b[2]=f[2];b[3]=
f[3];b[4]=f[4];b[5]=f[5];b[6]=f[6];b[7]=f[7];return b};t.l=function(f){f[0]=0;f[1]=0;f[2]=0;f[3]=1;f[4]=0;f[5]=0;f[6]=0;f[7]=1;return f};t.s=T;t.t=function(f,b){b[0]=f[0];b[1]=f[1];b[2]=f[2];return b};t.r=function(f,b){b[3]=f;return b};t.u=function(f,b){b[0]=f[0];b[1]=f[1];b[2]=f[2];b[3]=f[3];return b};t.q=function(f,b){b[4]=f[0];b[5]=f[1];b[6]=f[2];b[7]=f[3];return b};t.j=function(f){return f.subarray(0,3)};t.i=function(f,b){b[0]=f[0];b[1]=f[1];b[2]=f[2];return b};t.h=function(f){return f[3]};t.k=
function(f,b){b[0]=f[0];b[1]=f[1];b[2]=f[2];b[3]=f[3];return b};t.g=function(f){return f.subarray(4,8)};t.f=G;t.o=function(f,b){var u=1/f[3];if(!u)return null;var h=f[0],l=f[1],e=f[2];p[0]=f[4];p[1]=f[5];p[2]=f[6];p[3]=f[7];k.invert(p,p);var c=p[0],a=p[1],m=p[2],d=p[3],h=h*u,l=l*u,v=e*u,e=d*h+a*v-m*l,B=d*l+m*h-c*v,C=d*v+c*l-a*h,h=-c*h-a*l-m*v;b[0]=-(e*d+h*-c+B*-m-C*-a);b[1]=-(B*d+h*-a+C*-c-e*-m);b[2]=-(C*d+h*-m+e*-a-B*-c);b[3]=u;b[4]=c;b[5]=a;b[6]=m;b[7]=d;return b};t.v=function(k,b){var u=k[3];f.fromRotationTranslation(k.subarray(4,
8),k.subarray(0,3),b);for(var h=0;12>h;h++)b[h]*=u;return b};t.d=function(f,b){var k=y._25(f,m),h=y._24(f),l=y._23(f,p);T(k,h,l,b);return b};t.p=function(f,b,k){r(b,f,k);k[3]=f[3]*b[3];var h=f[4],l=f[5],e=f[6];f=f[7];var c=b[4],a=b[5],u=b[6];b=b[7];k[4]=h*b+f*c+l*u-e*a;k[5]=l*b+f*a+e*c-h*u;k[6]=e*b+f*u+h*a-l*c;k[7]=f*b-h*c-l*a-e*u;return k};t.B=r;t.C=function(f,b,k){var h=b[3],l=f[0]-b[0],e=f[1]-b[1],c=f[2]-b[2];f=b[4];var a=b[5],u=b[6];b=b[7];var m=f*f+a*a+u*u+b*b,m=m?1/m:0;f=-f*m;a=-a*m;u=-u*m;
b*=m;var m=b*l+a*c-u*e,v=b*e+u*l-f*c,d=b*c+f*e-a*l,l=-f*l-a*e-u*c;k[0]=m*b+l*-f+v*-u-d*-a;k[1]=v*b+l*-a+d*-f-m*-u;k[2]=d*b+l*-u+m*-a-v*-f;k[0]/=h;k[1]/=h;k[2]/=h;return k};t.D=function(f,b,k,h){h||(h=0);var l=f.length,e=b[0],c=b[1],a=b[2],u=b[3],m=b[4],v=b[5],d=b[6];b=b[7];for(var p=0;p<l;p+=3){var y=f[p]*u,q=f[p+1]*u,x=f[p+2]*u,G=b*y+v*x-d*q,N=b*q+d*y-m*x,r=b*x+m*q-v*y,y=-m*y-v*q-d*x;k[h+p]=G*b+y*-m+N*-d-r*-v;k[h+p+1]=N*b+y*-v+r*-m-G*-d;k[h+p+2]=r*b+y*-d+G*-v-N*-m;k[h+p]+=e;k[h+p+1]+=c;k[h+p+2]+=
a}return k};t.x=function(f,b,k,h){h||(h=0);var l=f.length,e=b[3],c=b[4],a=b[5],u=b[6];b=b[7];for(var m=0;m<l;m+=3){var v=f[m]*e,d=f[m+1]*e,p=f[m+2]*e,y=b*v+a*p-u*d,q=b*d+u*v-c*p,x=b*p+c*d-a*v,v=-c*v-a*d-u*p;k[h+m]=y*b+v*-c+q*-u-x*-a;k[h+m+1]=q*b+v*-a+x*-c-y*-u;k[h+m+2]=x*b+v*-u+y*-a-q*-c}return k};t.w=function(f,b,k){var h=b[3],l=b[4],e=b[5],c=b[6];b=b[7];var a=f[0]*h,u=f[1]*h,m=f[2]*h;f=b*a+e*m-c*u;var h=b*u+c*a-l*m,v=b*m+l*u-e*a,a=-l*a-e*u-c*m;k[0]=f*b+a*-l+h*-c-v*-e;k[1]=h*b+a*-e+v*-l-f*-c;k[2]=
v*b+a*-c+f*-e-h*-l;return k};t.A=function(f,b,k,h){h||(h=0);var l=f.length,e=b[3],c=b[4],a=b[5],m=b[6];b=b[7];for(var u=0;u<l;u+=4){var v=f[u]*e,d=f[u+1]*e,p=f[u+2]*e,y=b*v+a*p-m*d,q=b*d+m*v-c*p,x=b*p+c*d-a*v,v=-c*v-a*d-m*p;k[h+u]=y*b+v*-c+q*-m-x*-a;k[h+u+1]=q*b+v*-a+x*-c-y*-m;k[h+u+2]=x*b+v*-m+y*-a-q*-c;k[h+u+3]=f[u+3]}return k};t.y=function(f,b,u){b=G(b,p);k.multiply(b,f,u);return u};t.z=function(f,b,k,h){h=h||0;b=G(b,p);y._37(f,b,k,h);return k};t.E=function(f,b,k){var h=f[3],l=f[4],e=f[5],c=f[6],
a=f[7],m=b[0]*h,u=b[1]*h,v=b[2]*h;b=a*m+e*v-c*u;var h=a*u+c*m-l*v,d=a*v+l*u-e*m,m=-l*m-e*u-c*v;k[0]=f[0]+b*a+m*-l+h*-c-d*-e;k[1]=f[1]+h*a+m*-e+d*-l-b*-c;k[2]=f[2]+d*a+m*-c+b*-e-h*-l;k[3]=f[3];k[4]=f[4];k[5]=f[5];k[6]=f[6];k[7]=f[7];return k};t.n=function(f,b,m,h){x.lerp(f.subarray(0,3),b.subarray(0,3),m,h.subarray(0,3));var l=f[3];h[3]=l+m*(b[3]-l);k.slerp(f.subarray(4,8),b.subarray(4,8),m,h.subarray(4,8));return h};t.m=function(f,b,k,h,l){l[0]=f[0]+b*k[0];l[1]=f[1]+b*k[1];l[2]=f[2]+b*k[2];l[3]=f[3];
k=h[0];var e=h[1];h=h[2];var c=f[4],a=f[5],m=f[6],u=f[7];l[4]=.5*(k*u+e*m-h*a);l[5]=.5*(e*u+h*c-k*m);l[6]=.5*(h*u+k*a-e*c);l[7]=.5*(-k*c-e*a-h*m);l[4]=f[4]+l[4]*b;l[5]=f[5]+l[5]*b;l[6]=f[6]+l[6]*b;l[7]=f[7]+l[7]*b;f=l[4];b=l[5];k=l[6];e=l[7];f=f*f+b*b+k*k+e*e;0<f&&(f=1/Math.sqrt(f),l[4]*=f,l[5]*=f,l[6]*=f,l[7]*=f)};var f=d(21),k=d(9),y=d(2),x=d(3),m=new Float32Array(3),p=new Float32Array(4)},function(E,t,d){function O(){var b=new p(4);b[0]=0;b[1]=0;b[2]=0;b[3]=0;return b}function T(b,h,l){l[0]=b[0]-
h[0];l[1]=b[1]-h[1];l[2]=b[2]-h[2];l[3]=b[3]-h[3];return l}function G(b,h,l){l[0]=b[0]*h[0];l[1]=b[1]*h[1];l[2]=b[2]*h[2];l[3]=b[3]*h[3];return l}function r(b,h,l){l[0]=b[0]/h[0];l[1]=b[1]/h[1];l[2]=b[2]/h[2];l[3]=b[3]/h[3];return l}function f(b,h){var l=h[0]-b[0],e=h[1]-b[1],c=h[2]-b[2],a=h[3]-b[3];return Math.sqrt(l*l+e*e+c*c+a*a)}function k(b,h){var l=h[0]-b[0],e=h[1]-b[1],c=h[2]-b[2],a=h[3]-b[3];return l*l+e*e+c*c+a*a}function y(b){var h=b[0],l=b[1],e=b[2];b=b[3];return Math.sqrt(h*h+l*l+e*e+
b*b)}function x(b){var h=b[0],l=b[1],e=b[2];b=b[3];return h*h+l*l+e*e+b*b}function m(b,h){var l=b[0],e=b[1],c=b[2],a=b[3],f=l*l+e*e+c*c+a*a;0<f&&(f=1/Math.sqrt(f),h[0]=l*f,h[1]=e*f,h[2]=c*f,h[3]=a*f);return h}Object.defineProperty(t,"__esModule",{value:!0});t.create=O;t.clone=function(b){var h=new p(4);h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[3];return h};t.fromValues=function(b,h,l,e){var c=new p(4);c[0]=b;c[1]=h;c[2]=l;c[3]=e;return c};t.copy=function(b,h){h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=b[3];return h};
t.set=function(b,h,l,e,c){c[0]=b;c[1]=h;c[2]=l;c[3]=e;return c};t.add=function(b,h,l){l[0]=b[0]+h[0];l[1]=b[1]+h[1];l[2]=b[2]+h[2];l[3]=b[3]+h[3];return l};t.subtract=T;d.d(t,"sub",function(){return T});t.multiply=G;d.d(t,"mul",function(){return G});t.divide=r;d.d(t,"div",function(){return r});t.min=function(b,h,l){l[0]=Math.min(b[0],h[0]);l[1]=Math.min(b[1],h[1]);l[2]=Math.min(b[2],h[2]);l[3]=Math.min(b[3],h[3]);return l};t.max=function(b,h,l){l[0]=Math.max(b[0],h[0]);l[1]=Math.max(b[1],h[1]);l[2]=
Math.max(b[2],h[2]);l[3]=Math.max(b[3],h[3]);return l};t.scale=function(b,h,l){l[0]=b[0]*h;l[1]=b[1]*h;l[2]=b[2]*h;l[3]=b[3]*h;return l};t.scaleAndAdd=function(b,h,l,e){e[0]=b[0]+h[0]*l;e[1]=b[1]+h[1]*l;e[2]=b[2]+h[2]*l;e[3]=b[3]+h[3]*l;return e};t.distance=f;d.d(t,"dist",function(){return f});t.squaredDistance=k;d.d(t,"sqrDist",function(){return k});t.length=y;d.d(t,"len",function(){return y});t.squaredLength=x;d.d(t,"sqrLen",function(){return x});t.negate=function(b,h){h[0]=-b[0];h[1]=-b[1];h[2]=
-b[2];h[3]=-b[3];return h};t.inverse=function(b,h){h[0]=1/b[0];h[1]=1/b[1];h[2]=1/b[2];h[3]=1/b[3];return h};t.normalize=m;t.dot=function(b,h){return b[0]*h[0]+b[1]*h[1]+b[2]*h[2]+b[3]*h[3]};t.lerp=function(b,h,l,e){var c=b[0],a=b[1],f=b[2];b=b[3];e[0]=c+l*(h[0]-c);e[1]=a+l*(h[1]-a);e[2]=f+l*(h[2]-f);e[3]=b+l*(h[3]-b);return e};t.random=function(b,h){h[0]=q();h[1]=q();h[2]=q();h[3]=q();m(h,h);b(h,b,h);return h};t.transformMat4=function(b,h,l){var e=b[0],c=b[1],a=b[2];b=b[3];l[0]=h[0]*e+h[4]*c+h[8]*
a+h[12]*b;l[1]=h[1]*e+h[5]*c+h[9]*a+h[13]*b;l[2]=h[2]*e+h[6]*c+h[10]*a+h[14]*b;l[3]=h[3]*e+h[7]*c+h[11]*a+h[15]*b;return l};t.transformQuat=function(b,h,l){var e=b[0],c=b[1],a=b[2],f=h[0],k=h[1],m=h[2];h=h[3];var d=h*e+k*a-m*c,p=h*c+m*e-f*a,u=h*a+f*c-k*e,e=-f*e-k*c-m*a;l[0]=d*h+e*-f+p*-m-u*-k;l[1]=p*h+e*-k+u*-f-d*-m;l[2]=u*h+e*-m+d*-k-p*-f;l[3]=b[3];return l};d.d(t,"forEach",function(){return b});t.str=function(b){return"vec4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};var p="undefined"!==typeof Float32Array?
Float32Array:Array,q=Math.random,b=function(){var b=O();return function(h,l,e,c,a,f){var k;l||(l=4);e||(e=0);for(c?k=Math.min(c*l+e,h.length):k=h.length;e<k;e+=l)b[0]=h[e],b[1]=h[e+1],b[2]=h[e+2],b[3]=h[e+3],a(b,f,b),h[e]=b[0],h[e+1]=b[1],h[e+2]=b[2],h[e+3]=b[3];return h}}()},function(E,t,d){E=d(0);var O=d(25),T=d(4),G=d(6),r=d(2),f=d(3),k=d(7);d=Object(E.a)("__obj_util",function(d,x){function m(a){a={type:a,He:0,na:G.c(),uy:G.c(),pivot:new Float32Array(3),$c:new Float32Array(3),ql:0,rl:0,tA:!1,Ov:!1,
al:null,lj:0,Kx:!1,od:f.create(),use_panning:!1,cc:0,cq:1,bq:1,fq:1,dof_distance:0,dof_front_start:0,dof_front_end:0,dof_rear_start:0,dof_rear_end:0,dof_power:0,dof_bokeh_intensity:0,dof_bokeh:!1,qe:!1,dof_object:null,zc:null,Fb:null,qc:null,je:null,ie:null,Ne:null,Wi:!0,kj:{Gl:1,Hl:1,Il:0},Ge:-1,ue:-1,ad:new Float32Array(4),se:0,uh:0,ck:!1,Zr:new Float32Array(3),iw:new Float32Array(3),Xg:0,Wg:Infinity,hk:0,ik:0,bf:!1,Lf:!1,ze:!1,qf:!1,Oe:!1,xe:!1,Fd:!1,Mh:"",wf:!1,cf:!1,sd:!1,hide:!1,QF:!1,Pl:!1,
Cw:!1,Dd:!1,Bw:!1,Dw:!1,ul:!1,is_visible:!1,zr:!1,Wn:0,zg:0,Ag:0,fg:0,eg:0,$f:0,jk:"",Cf:{BA:"",AA:"",fB:""},zm:!1,ku:new Float32Array(3),qh:!1,Hq:!1,Jq:"",Iq:!1,ig:0,fy:0,gy:0,mi:0,Tm:!1,Jd:!1,Of:!1,og:[],wl:!1,Ej:!1,Wf:1,jo:0,io:1,Dj:null,ni:!1,Mi:new Int8Array([-1,-1]),Ap:[],mw:[],gx:[],we:null,pf:null,Be:null,uf:null,am:null,Ll:null,Mg:null,Oi:null,ps:null,Aq:null,zq:null,Hj:O.w(),eb:O.w(),ai:O.w(),Xc:O.A(),Xe:O.A(),jc:O.y(),Yk:O.y(),Ld:O.C(),KD:O.C(),Gq:O.K(),Eq:O.I(),Fq:O.J(),mj:0};f.copy(r.f,
a.od);return a}function p(a){return{Kb:a,Nv:!1,Ia:[],Lg:[],nj:[],Rj:null,MB:[],Yr:0,ZG:!1,Sa:[],$H:[]}}function y(a){if(!(a instanceof Object))return a;var c=null,e=null,h=null,b=null,l=null,f=null;a.Ua&&(c=a.Ua,a.Ua=null);a.sg&&(e=a.sg,a.sg=null);a.Zf&&(h=a.Zf,a.Zf=null);a.Ub&&(b=a.Ub,a.Ub=null);a.ec&&(l=a.ec,a.ec=null);a.Pf&&(f=a.Pf,a.Pf=null);var k;k=a.constructor;switch(k){case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:k=
new k(a);break;case Array:k=new k(a.length);for(var m=0;m<a.length;m++)k[m]=y(a[m]);break;case WebGLUniformLocation:case WebGLProgram:case WebGLShader:k=a;break;case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:k=null;break;case Function:k=a;break;default:for(m in k=new k,a)k[m]=y(a[m])}c&&(k.Ua=c,a.Ua=c);e&&(k.sg=e,a.sg=e);h&&(k.Zf=h,a.Zf=h);b&&(k.Ub=b,a.Ub=b);l&&(k.ec=l,a.ec=l);f&&(k.Pf=r.S(),a.Pf=f);return k}function b(a,c){O.o(c,a.eb);O.h(a.eb,a.na,a.ai)}function u(a,
c,e){a.Xc=O.l(c,e);O.k(a.Xc,a.na,a.Xe)}function h(a,c,e,h,b,l){a.jc=O.e(c,e,h,l);f.scale(a.jc.Ab,b[0],a.jc.Ab);f.scale(a.jc.Bb,b[1],a.jc.Bb);f.scale(a.jc.Cb,b[2],a.jc.Cb);O.i(a.jc,a.na,a.Yk)}function l(a,c,e,h){a.Gq=O.d(c,h);a.Eq=O.b(e,h);a.Fq=O.c(c,h)}function e(a,c,e,h,b,l){a.Ld=O.O(l,c,e,h,b);O.j(a.Ld,a.na,a.KD)}function c(a,c,e){O.h(a.Yb.zf,c,e.zf);a.gm&&O.i(a.Yb.Yf,c,e.Yf);O.k(a.Yb.Af,c,e.Af)}function a(a,c){for(var e=a.Ba,h=0;h<e.length;h++){var b=e[h];if(b.Kb==c)return b}return null}function ca(a){return a.Kl?
a.parent:a.parent?ca(a.parent):null}var la=Object(T.a)(d).wa;x.Hy=Infinity;x.qo=m;x.iz=function(a){var c=m(a.type);c.He=a.He;G.a(a.na,c.na);G.a(a.uy,c.uy);f.copy(a.pivot,c.pivot);f.copy(a.$c,c.$c);c.ql=a.ql;c.rl=a.rl;c.tA=a.tA;c.Ov=a.Ov;a.al&&(c.al=f.clone(a.al));c.lj=a.lj;c.Kx=a.Kx;f.copy(a.od,c.od);c.use_panning=a.use_panning;c.cc=a.cc;c.cq=a.cq;c.bq=a.bq;c.fq=a.fq;c.dof_distance=a.dof_distance;c.dof_front_start=a.dof_front_start;c.dof_front_end=a.dof_front_end;c.dof_rear_start=a.dof_rear_start;
c.dof_rear_end=a.dof_rear_end;c.dof_power=a.dof_power;c.dof_bokeh_intensity=a.dof_bokeh_intensity;c.dof_bokeh=a.dof_bokeh;c.qe=a.qe;c.dof_object=a.dof_object;c.zc=r.O(a.zc);c.Fb=r.O(a.Fb);c.qc=r.O(a.qc);c.je=r.O(a.je);c.ie=r.O(a.ie);c.Ne=a.Ne;c.Wi=a.Wi;c.kj.Gl=a.kj.Gl;c.kj.Hl=a.kj.Hl;c.kj.Il=a.kj.Il;c.Ge=a.Ge;c.ue=a.ue;c.ad=a.ad;c.se=a.se;c.uh=a.uh;c.ck=a.ck;f.copy(a.Zr,c.Zr);f.copy(a.iw,c.iw);c.Xg=a.Xg;c.Wg=a.Wg;c.hk=a.hk;c.ik=a.ik;c.bf=a.bf;c.Lf=a.Lf;c.ze=a.ze;c.qf=a.qf;c.Oe=a.Oe;c.xe=a.xe;c.Fd=
a.Fd;c.Mh=a.Mh;c.wf=a.wf;c.cf=a.cf;c.sd=a.sd;c.hide=a.hide;c.Pl=a.Pl;c.Cw=a.Cw;c.Dd=a.Dd;c.Bw=a.Bw;c.Dw=a.Dw;c.ul=a.ul;c.is_visible=a.is_visible;c.zr=a.zr;c.Wn=a.Wn;c.zg=a.zg;c.Ag=a.Ag;c.fg=a.fg;c.eg=a.eg;c.$f=a.$f;c.jk=a.jk;c.Cf=a.Cf;c.zm=a.zm;f.copy(a.ku,c.ku);c.qh=a.qh;c.Hq=a.Hq;c.Jq=a.Jq;c.Iq=a.Iq;c.ig=a.ig;c.fy=a.fy;c.gy=a.gy;c.mi=a.mi;c.Tm=a.Tm;c.Jd=a.Jd;c.Of=a.Of;c.og=r.O(a.og);c.wl=a.wl;c.Ej=a.Ej;c.Wf=a.Wf;c.jo=a.jo;c.io=a.io;c.Mi.set(a.Mi);c.Ap=r.O(a.Ap);c.mw=r.O(a.mw);c.gx=r.O(a.gx);c.we=
r.O(a.we);c.pf=r.O(a.pf);c.Be=r.O(a.Be);c.uf=r.O(a.uf);c.Mg=r.O(a.Mg);c.Oi=r.O(a.Oi);c.ps=r.O(a.ps);c.Aq=r.O(a.Aq);c.zq=r.O(a.zq);O.o(a.Hj,c.Hj);O.o(a.eb,c.eb);O.o(a.ai,c.ai);O.u(a.Xc,c.Xc);O.u(a.Xe,c.Xe);O.s(a.jc,c.jc);O.s(a.Yk,c.Yk);O.p(a.Eq,c.Eq);O.r(a.Gq,c.Gq);O.q(a.Fq,c.Fq);c.mj=a.mj;return c};x.dr=function(a,c,e){e||(e=a);return{name:a,nd:r._4(),le:e,type:c,Sc:[],vl:!0,Vk:null,Hf:{Fl:[],bn:[]},is_dynamic:!1,Or:!1,jt:!1,$F:!1,ka:null,Yc:null,Qa:null,lc:null,Vt:null,anchor:null,Bo:null,nw:null,
zu:null,Ba:[],Jd:[],af:r.S(),nz:r.S(),Xa:[],zs:[],If:[],ho:[],zi:null,Bn:[],parent:null,Kl:!1,hs:"",my:null,Kw:null,Jn:!1,Rb:"",tu:"AUTO",jg:!1,is_character:!1,dn:!1,Zy:!1,xa:null,Aa:null,xh:null,ug:null,Do:null,bE:null,lB:[],Ed:{rk:"NO_COLLISION",Di:!1,$I:!1,lf:0,rt:0,qt:0,hr:0,Es:0,nR:!1,oR:!1,pR:!1,qR:!1,rR:!1,sR:!1,Ze:0,Ye:0,$e:0,vC:!1,pu:"BOX",Wp:!1},cH:{Rx:0,eB:0,dh:0,tB:0},vm:0,Lm:[],WA:!1,PG:!1,$r:[]}};x.zX=p;x.br=function(a){return a instanceof Array?a.slice():a};x.cr=y;x.is_dynamic=function(a){return a.is_dynamic};
x.kc=function(a){return"MESH"==a.type&&a.is_dynamic};x.St=function(a,c){a.Ba.push(p(c))};x.Ig=function(e,h,b){var l=e.ka;e=a(e,h);e.Ia.push(b);h=O.L();c(b,l.na,h);e.Lg.push(h)};x.MI=function(a,c){var f=a.ka,k=Math.max(Math.abs(c.max_x),Math.abs(c.min_x)),m=Math.max(Math.abs(c.max_y),Math.abs(c.min_y)),d=Math.max(Math.abs(c.max_z),Math.abs(c.min_z)),d=Math.sqrt(k*k+m*m+d*d),k=Math.sqrt(k*k+m*m),m=O.w();m.max_x=m.max_y=m.max_z=d;m.min_x=m.min_y=m.min_z=-d;b(f,m);u(f,d,[0,0,0]);h(f,[1,0,0],[0,1,0],[0,
0,1],[d,d,d],[0,0,0]);a.is_dynamic?l(f,k,k,m):e(f,[1,0,0],[0,1,0],[0,0,1],[d,d,d],[0,0,0])};x.HU=function(a,c,f){var k=a.ka,m=f.bs_rad,d=f.bc_rad,p=f.bs_cen,y=f.be_cen,ca=f.caxis_x,v=f.caxis_y,D=f.caxis_z,R=f.be_ax,C=f.rbb.rbb_c;f=f.rbb.rbb_s;b(k,c);u(k,m,p);c=a.is_dynamic;h(k,c?ca:[1,0,0],c?v:[0,1,0],c?D:[0,0,1],R,y);a.is_dynamic?l(k,d,d,k.eb):e(k,ca,v,D,f,C)};x.IU=function(a,c,f){for(var k=a.ka,m=c.max_x-c.min_x,d=c.max_y-c.min_y,p=c.max_z-c.min_z,y=(c.max_x+c.min_x)/2,ca=(c.max_y+c.min_y)/2,v=
(c.max_z+c.min_z)/2,D=y,R=ca,C=Math.max(m,Math.max(d,p))/2,F=Math.max(m,d)/2,z=[y/(m?m:1),ca/(d?d:1),v/(p?p:1)],w=.5,W=0;W<f.length;W++)for(var A=f[W],n=0;n<A.length;n+=3){var g=A[n],B=A[n+1],q=A[n+2],x=Math.sqrt((y-g)*(y-g)+(ca-B)*(ca-B)+(v-q)*(v-q));if(x>C)var M=y-C*(g-y)/x,G=ca-C*(B-ca)/x,x=v-C*(q-v)/x,y=(M+g)/2,ca=(G+B)/2,v=(x+q)/2,C=Math.sqrt((y-g)*(y-g)+(ca-B)*(ca-B)+(v-q)*(v-q));G=Math.sqrt((D-g)*(D-g)+(R-B)*(R-B));G>F&&(M=D-F*(g-D)/G,G=R-F*(B-R)/G,D=(M+g)/2,R=(G+B)/2,F=Math.sqrt((D-g)*(D-
g)+(R-B)*(R-B)));g/=m?m:1;B/=d?d:1;q/=p?p:1;x=Math.sqrt((z[0]-g)*(z[0]-g)+(z[1]-B)*(z[1]-B)+(z[2]-q)*(z[2]-q));x>w&&(M=z[0]-w*(g-z[0])/x,G=z[1]-w*(B-z[1])/x,x=z[2]-w*(q-z[2])/x,z[0]=(M+g)/2,z[1]=(G+B)/2,z[2]=(x+q)/2,w=Math.sqrt((z[0]-g)*(z[0]-g)+(z[1]-B)*(z[1]-B)+(z[2]-q)*(z[2]-q)))}f=m?m*z[0]:c.max_x;D=d?d*z[1]:c.max_y;z=p?p*z[2]:c.max_z;m*=w;d*=w;p*=w;b(k,c);u(k,C,[y,ca,v]);h(k,[1,0,0],[0,1,0],[0,0,1],[m,d,p],[f,D,z]);a.is_dynamic?l(k,F,F,k.eb):e(k,[(k.eb.max_x-k.eb.min_x)/2,0,0],[0,(k.eb.max_y-
k.eb.min_y)/2,0],[0,0,(k.eb.max_z-k.eb.min_z)/2],[1,1,1],[(k.eb.max_x+k.eb.min_x)/2,(k.eb.max_y+k.eb.min_y)/2,(k.eb.max_z+k.eb.min_z)/2])};x.RI=c;x.ZX=function(a,c){for(var e=a.Ba,h=0;h<e.length;h++)if(e[h].Kb==c){e.splice(h,1);break}};x.lb=a;x.LI=function(a,c){for(var e=0;e<a.length;e++)k.copy(c,a[e].ka.ad)};x.EB=function(a,c,e){for(var h=0;h<a.Ba.length;h++){var b=a.Ba[h];e&&b.Kb!=e||(b.Nv=c)}};x.AH=function(a,c){a.Ia.splice(c,1);a.Lg.splice(c,1)};x.rv=function(a,c){for(var e=[],h=c?la.IG-1:la.IG,
b=0;b<a.length;b++){var l=a[b];l.lc.sF&&e.length<h&&e.push(l)}return e.length?e:a[0]?[a[0]]:[]};x.FR=function(a,c){G.l(c.na);c.al=null;a.ka=c};x.eE=function(a,c){if(c.b4w_enable_soft_particles&&0<c.b4w_particles_softness){var e=c.material-1,h=a.Sc;if(0<=e&&e<h.length&&("ADD"==h[e].Ob||"ALPHA"==h[e].Ob||"ALPHA_SORT"==h[e].Ob))return!0}return!1};x.PM=function(a){a=a.Ba;for(var c=0;c<a.length;c++)for(var e=a[c].Ia,h=0;h<e.length;h++)for(var b=e[h].Lb.ei,l=0;l<b.length;l++){var f=b[l];if("USE_MODEL_TSR_INVERSE"==
f[0]&&"1"==f[1])return!0}return!1};x.nF=function(a,c){return a+"*"+c};x.get_parent=function(a){return a.Kl?null:a.parent};x.get_dg_parent=ca;x.Uz=function(a,c){for(var e=[],h=0;h<c.length;h++){var b=c[h];ca(b)==a&&e.push(b)}return e};x.get_object_data_id=function(a){return a.ka.He};x.is_mesh=function(a){return"MESH"===a.type};x.is_armature=function(a){return"ARMATURE"===a.type};x.is_speaker=function(a){return"SPEAKER"===a.type};x.is_camera=function(a){return"CAMERA"===a.type};x.is_lamp=function(a){return"LAMP"===
a.type};x.is_empty=function(a){return"EMPTY"===a.type};x.is_line=function(a){return"LINE"===a.type};x.is_world=function(a){return"WORLD"===a.type}});t.a=d},function(E,t,d){function O(){var b=new m(4);b[0]=0;b[1]=0;b[2]=0;b[3]=1;return b}function T(b,h,l){h*=.5;var e=Math.sin(h);l[0]=e*b[0];l[1]=e*b[1];l[2]=e*b[2];l[3]=Math.cos(h);return l}function G(b,h,l){var e=b[0],c=b[1],a=b[2];b=b[3];var f=h[0],k=h[1],m=h[2];h=h[3];l[0]=e*h+b*f+c*m-a*k;l[1]=c*h+b*k+a*f-e*m;l[2]=a*h+b*m+e*k-c*f;l[3]=b*h-e*f-c*
k-a*m;return l}function r(b,h,l,e){var c=b[0],a=b[1],f=b[2];b=b[3];var k=h[0],m=h[1],d=h[2];h=h[3];var p,u,y;u=c*k+a*m+f*d+b*h;0>u&&(u=-u,k=-k,m=-m,d=-d,h=-h);1E-6<1-u?(p=Math.acos(u),y=Math.sin(p),u=Math.sin((1-l)*p)/y,l=Math.sin(l*p)/y):u=1-l;e[0]=u*c+l*k;e[1]=u*a+l*m;e[2]=u*f+l*d;e[3]=u*b+l*h;return e}function f(b,h){var l=b[0]+b[4]+b[8];if(0<l)l=Math.sqrt(l+1),h[3]=.5*l,l=.5/l,h[0]=(b[5]-b[7])*l,h[1]=(b[6]-b[2])*l,h[2]=(b[1]-b[3])*l;else{var e=0;b[4]>b[0]&&(e=1);b[8]>b[3*e+e]&&(e=2);var c=(e+
1)%3,a=(e+2)%3,l=Math.sqrt(b[3*e+e]-b[3*c+c]-b[3*a+a]+1);h[e]=.5*l;l=.5/l;h[3]=(b[3*c+a]-b[3*a+c])*l;h[c]=(b[3*c+e]+b[3*e+c])*l;h[a]=(b[3*a+e]+b[3*e+a])*l}return h}Object.defineProperty(t,"__esModule",{value:!0});t.create=O;d.d(t,"rotationTo",function(){return p});d.d(t,"setAxes",function(){return q});t.identity=function(b){b[0]=0;b[1]=0;b[2]=0;b[3]=1;return b};t.setAxisAngle=T;t.multiply=G;d.d(t,"mul",function(){return G});t.rotateX=function(b,h,l){h*=.5;var e=b[0],c=b[1],a=b[2];b=b[3];var f=Math.sin(h);
h=Math.cos(h);l[0]=e*h+b*f;l[1]=c*h+a*f;l[2]=a*h-c*f;l[3]=b*h-e*f;return l};t.rotateY=function(b,h,l){h*=.5;var e=b[0],c=b[1],a=b[2];b=b[3];var f=Math.sin(h);h=Math.cos(h);l[0]=e*h-a*f;l[1]=c*h+b*f;l[2]=a*h+e*f;l[3]=b*h-c*f;return l};t.rotateZ=function(b,h,l){h*=.5;var e=b[0],c=b[1],a=b[2];b=b[3];var f=Math.sin(h);h=Math.cos(h);l[0]=e*h+c*f;l[1]=c*h-e*f;l[2]=a*h+b*f;l[3]=b*h-a*f;return l};t.calculateW=function(b,h){var l=b[0],e=b[1],c=b[2];h[0]=l;h[1]=e;h[2]=c;h[3]=Math.sqrt(Math.abs(1-l*l-e*e-c*
c));return h};t.slerp=r;d.d(t,"sqlerp",function(){return b});t.invert=function(b,h){var l=b[0],e=b[1],c=b[2],a=b[3],f=l*l+e*e+c*c+a*a,f=f?1/f:0;h[0]=-l*f;h[1]=-e*f;h[2]=-c*f;h[3]=a*f;return h};t.conjugate=function(b,h){h[0]=-b[0];h[1]=-b[1];h[2]=-b[2];h[3]=b[3];return h};t.fromMat3=f;t.str=function(b){return"quat("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};var k=d(3),y=d(7),x=d(27);d.d(t,"clone",function(){return y.clone});d.d(t,"fromValues",function(){return y.fromValues});d.d(t,"copy",function(){return y.copy});
d.d(t,"set",function(){return y.set});d.d(t,"add",function(){return y.add});d.d(t,"scale",function(){return y.scale});d.d(t,"dot",function(){return y.dot});d.d(t,"lerp",function(){return y.lerp});d.d(t,"length",function(){return y.length});d.d(t,"len",function(){return y.length});d.d(t,"squaredLength",function(){return y.squaredLength});d.d(t,"sqrLen",function(){return y.squaredLength});d.d(t,"normalize",function(){return y.normalize});var m="undefined"!==typeof Float32Array?Float32Array:Array,p=
function(){var b=k.create(),h=k.fromValues(1,0,0),l=k.fromValues(0,1,0);return function(e,c,a){var f=k.dot(e,c);if(-.9999999>f)return k.cross(h,e,b),1E-6>k.length(b)&&k.cross(l,e,b),k.normalize(b,b),T(b,Math.PI,a),a;if(.9999999<f)return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a;k.cross(e,c,b);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=1+f;return y.normalize(a,a)}}(),q=function(){var b=x.create();return function(h,l,e,c){b[0]=l[0];b[3]=l[1];b[6]=l[2];b[1]=e[0];b[4]=e[1];b[7]=e[2];b[2]=-h[0];b[5]=-h[1];b[8]=-h[2];return y.normalize(f(b,
c),c)}}(),b=function(){var b=O(),h=O();return function(l,e,c,a,f,k){r(l,a,f,b);r(e,c,f,h);r(b,h,2*f*(1-f),k);return k}}()},function(E,t,d){E=d(0);var O=d(5),T=d(16),G=d(25),r=d(14),f=d(4),k=d(15),y=d(45),x=d(31),m=d(51),p=d(38),q=d(21),b=d(61),u=d(12),h=d(17),l=d(8),e=d(88),c=d(63),a=d(1),ca=d(9),la=d(22),v=d(64),B=d(23),C=d(34),L=d(11),H=d(6),I=d(2),da=d(3),N=d(7),U=d(46);d=Object(E.a)("__scenes",function(d,D){function R(){oc||(oc=V(jb));return oc}function V(a){for(var c=0;c<a.length;c++){var b=
a[c];if(!b.Gg||!b.Gg.length)return b}return null}function F(){gc||ua.va("No active scene available");return gc}function z(a,c,b){if(!w(a,c,b))return null;b=a.b4w_shadow_settings;var g={};b.csm_resolution>ub.Ic?(g.csm_resolution=ub.Ic,qb.error("Shadow map texture has unsupported size. Changed to "+ub.Ic+".")):g.csm_resolution=b.csm_resolution;Ta.shadow_blur_samples=Ta.shadow_blur_samples?Ta.shadow_blur_samples:b.blur_samples;g.GT=b.soft_shadows;a=Ka.rv(c,Ta.ssao&&a.b4w_enable_ssao);g.self_shadow_polygon_offset=
b.self_shadow_polygon_offset;g.self_shadow_normal_offset=b.self_shadow_normal_offset;g.enable_csm=b.b4w_enable_csm&&1==a.length;b.b4w_enable_csm&&1<b.csm_num&&1<a.length&&qb.warn("Disabling Cascaded Shadow Maps because of multiple shadow casting lamps.");g.li=[];g.hI=[];g.Vq=[];g.Uq=[];for(c=0;c<a.length;c++)g.li.push(a[c].lc.type),g.hI.push(a[c].lc.En),g.Vq.push(a[c].lc.Vq),g.Uq.push(a[c].lc.Uq),"SPOT"!=g.li[c]&&"POINT"!=g.li[c]||!g.enable_csm||(qb.warn("Generating shadows for SPOT or POINT light. Disabling Cascaded Shadow Maps"),
g.enable_csm=!1);g.enable_csm?(g.csm_num=b.csm_num,g.csm_first_cascade_border=b.csm_first_cascade_border,g.first_cascade_blur_radius=b.first_cascade_blur_radius,g.csm_last_cascade_border=b.csm_last_cascade_border,g.last_cascade_blur_radius=b.last_cascade_blur_radius,g.fade_last_cascade=b.fade_last_cascade,g.blend_between_cascades=b.blend_between_cascades):(g.csm_num=1,g.csm_first_cascade_border=b.csm_first_cascade_border,g.first_cascade_blur_radius=b.first_cascade_blur_radius,g.csm_last_cascade_border=
b.csm_last_cascade_border,g.last_cascade_blur_radius=b.last_cascade_blur_radius,g.fade_last_cascade=!1,g.blend_between_cascades=!1);return g}function w(a,c,b){if(0!=c.length&&Ta.shadows)switch(a.b4w_render_shadows){case "OFF":return!1;case "ON":return!0}else return!1;var g=!1,J=!1;a=Ta.ssao&&a.b4w_enable_ssao;if(0==c.length&&!a)return!1;for(c=0;c<b.length;c++){var e=b[c];e.b4w_shadow_cast&&(g=!0);e.b4w_shadow_receive&&(J=!0);if((a||g)&&J)return!0}return!1}function W(a){for(var c=0;c<a.length;c++)if("SUN"==
a[c].lc.type)return!0;return!1}function A(a){if(!Ta.shore_smoothing)return!1;a=ya(a);for(var c=0;c<a.length;c++){var b=a[c];if(b.Ra.ej&&b.Ra.shore_smoothing)return!0}return!1}function n(a){for(var c=0;c<a.length;c++)for(var b=a[c].particle_systems,g=0;g<b.length;g++)if(Ka.eE(a[c].qb,b[g].settings))return!0;return!1}function g(a){for(var c=ya(a),b=[],g=0;g<c.length;g++){var J=c[g];if(J.Ra.ej){for(var e={},h=0;h<a.length;h++)for(var l=a[h],f=l.qb.Sc,k=0;k<f.length;k++)f[k]==J&&(e.vj=l.location[2]);
e.re=new Float32Array(4);e.re.set(J.Ra.Qm);e.re[3]=J.Ra.bv;J.Ra.is_dynamic?(e.pr=!0,e.waves_height=J.Ra.waves_height,e.waves_length=J.Ra.waves_length,e.dst_noise_scale0=J.Ra.dst_noise_scale0,e.dst_noise_scale1=J.Ra.dst_noise_scale1,e.dst_noise_freq0=J.Ra.dst_noise_freq0,e.dst_noise_freq1=J.Ra.dst_noise_freq1,e.dir_min_shore_fac=J.Ra.dir_min_shore_fac,e.dir_freq=J.Ra.dir_freq,e.dir_noise_scale=J.Ra.dir_noise_scale,e.dir_noise_freq=J.Ra.dir_noise_freq,e.dir_min_noise_fac=J.Ra.dir_min_noise_fac,e.dst_min_fac=
J.Ra.dst_min_fac,e.waves_hor_fac=J.Ra.waves_hor_fac):(e.pr=!1,e.waves_height=0,e.waves_length=0);e.Ng=J.Ra.Ru;e.GM=J.Ra.Lj;e.FM=J.Ra.Kj;e.HM=new Float32Array([.3,.7]);e.Rl=null;J=J.ih;for(h=0;h<J.length;h++)l=J[h].texture,!0===l.b4w_shore_dist_map&&"FILE"==l.image.source&&(e.Rl=l.image,e.OB=l.image.size[0],e.IA=l.b4w_max_shore_dist,l=l.b4w_shore_boundings,e.yp=[(l[0]+l[1])/2,(l[2]+l[3])/2],e.zp=[l[0]-l[1],l[2]-l[3]]);b.push(e)}}if(0<b.length){e=b[0];if(!e.pr)for(g=0;g<b.length;g++)b[g].pr&&(e=b[g]);
return e}return null}function K(a){function c(a,g){if(a)for(var e=a.nodes,J=0;J<e.length;J++){var h=e[J];"GROUP"==h.type&&h.node_group&&c(h.node_group.node_tree,g);"GROUP"==h.type&&"B4W_REFRACTION"==h.node_tree_name&&(b.refractions=!0);"BSDF_TRANSPARENT"==h.type&&(h.b4w_use_alpha?g.Ob="ALPHA_SORT":b.refractions=!0)}}var b={refractions:!1};a=ya(a);for(var g=0;g<a.length;g++){var e=a[g];e.fn&&(b.refractions=!0);e.ke&&c(e.ke,e)}return b}function ka(a,c,b){if(Ta.reflections)switch(a.b4w_render_reflections){case "OFF":return!1}else return!1;
a=[];for(var g=0,e=!1,J=!1,h=!1,l=0;l<c.length;l++){var f=c[l];f.ka.Fd&&"CUBE"==f.ka.Mh&&g++;f.ka.Fd&&"PBR"==f.ka.Mh&&(J=!0);if(f.zs.length){for(var k=null,n=0;n<a.length;n++)if(a[n]==f){k=n;break}null==k&&a.push(f)}}for(l=0;l<b.length;l++){c=b[l];c.b4w_reflexible&&(e=!0);a:if(c.b4w_reflexible){c=c.qb.Sc;for(f=0;f<c.length;f++)if(k=c[f].Ob,"OPAQUE"!=k&&"CLIP"!=k&&"ALPHA_ANTIALIASING"!=k){c=!0;break a}c=!1}else c=void 0;c&&(h=!0)}return{sH:a,VG:g,Rj:[],vz:[],nj:[],Lw:[],hA:e,tQ:J,MF:h}}function wa(a,
c){var b=a.b4w_sky_settings,g={};g.uB=b.render_sky||b.procedural_skydome;g.procedural_skydome=b.procedural_skydome;g.use_as_environment_lighting=b.use_as_environment_lighting;g.Tl=b.color;g.rayleigh_brightness=b.rayleigh_brightness;g.mie_brightness=b.mie_brightness;g.spot_brightness=b.spot_brightness;g.scatter_strength=b.scatter_strength;g.rayleigh_strength=b.rayleigh_strength;g.mie_strength=b.mie_strength;g.rayleigh_collection_power=b.rayleigh_collection_power;g.mie_collection_power=b.mie_collection_power;
g.mie_distribution=b.mie_distribution;g.Oe=b.reflexible;g.xe=b.reflexible_only;!c&&b.procedural_skydome&&qb.warn("There is no sun on the scene. Procedural sky will use a default sun position.");return g}function M(a){var c={};a=a.b4w_ssao_settings;c.radius_increase=a.radius_increase;c.wQ=a.hemisphere;c.pM=a.blur_depth;c.blur_discard_value=a.blur_discard_value;c.influence=a.influence;c.dist_factor=a.dist_factor;c.KS=a.samples;return c}function t(a){if(!Ta.bloom||!a.b4w_enable_bloom)return null;var c=
{};a=a.b4w_bloom_settings;c.blur=a.blur;c.edge_lum=a.edge_lum;c.key=a.key;c.adaptive=a.adaptive;c.average_luminance=a.average_luminance;return c}function Z(a){var c={};a=a.b4w_motion_blur_settings;c.mb_decay_threshold=a.motion_blur_decay_threshold;c.mb_factor=a.motion_blur_factor;return c}function aa(a){var c={};a=a.b4w_color_correction_settings;c.brightness=a.brightness;c.contrast=a.contrast;c.exposure=a.exposure;c.saturation=a.saturation;return c}function oa(a){var c={};a=a.b4w_god_rays_settings;
c.intensity=a.intensity;c.Al=a.max_ray_length;c.Ul=a.steps_per_pass;return c}function ja(a){var c={};c.ti=a.b4w_outline_color;c.tn=a.b4w_outline_factor;return c}function Ia(a){var c={};a=a.b4w_glow_settings;c.small_glow_mask_coeff=a.small_glow_mask_coeff;c.large_glow_mask_coeff=a.large_glow_mask_coeff;c.small_glow_mask_width=a.small_glow_mask_width;c.large_glow_mask_width=a.large_glow_mask_width;return c}function Ca(a,c){var b=a.light_settings,g={};g.Sg=b.environment_energy;g.kt=b.use_environment_light;
g.Gz=b.environment_color;g.te=a.horizon_color.slice(0);g.Ce=a.zenith_color.slice(0);g.Ln=a.use_sky_paper;g.Kn=a.use_sky_blend;g.Mn=a.use_sky_real;g.nx=null;g.Cn=null;g.Tu=null;g.Le="";c.uB&&a.use_nodes&&a.node_tree&&(b=rb.xE(a.node_tree,a.uuid,"MAIN",null,[]),g.Le=b.id);b=!0;if(g.kt&&"SKY_TEXTURE"==g.Gz&&(!c.procedural_skydome||!c.use_as_environment_lighting)){for(var e=null,J=0;J<a.texture_slots.length;J++)if(a.texture_slots[J].texture.b4w_use_as_environment_lighting&&!a.texture_slots[J].texture.b4w_use_as_skydome){e=
a.texture_slots[J];break}e?g.Tu=e:b=!1}for(J=0;J<a.texture_slots.length;J++)if(a.texture_slots[J].texture.b4w_use_as_skydome){e=a.texture_slots[J];e.texture.image&&(b=!0,g.nx=e,J=Math.min(ub.Yg,Fb.cz(e.texture.image.size[0]/3)),g.Cn={xI:J,ND:e.blend_factor,SF:e.horizon_factor,sJ:e.zenith_up_factor,rJ:e.zenith_down_factor,color:e.color,rb:e.default_value,invert:e.invert,ZI:e.use_rgb_to_intensity,OD:e.blend_type,UI:e.use_map_blend,VI:e.use_map_horizon,XI:e.use_map_zenith_up,WI:e.use_map_zenith_down});
break}g.kt=g.kt?b:!1;return g}function Ja(a){var c=a.fog_settings,b={};b.XU=c.use_fog;b.intensity=c.intensity;b.depth=c.depth;b.start=c.start;b.height=c.height;b.WO=c.falloff;b.color=c.use_custom_color?c.color.slice(0):a.horizon_color.slice(0);a=b.color;b.re=new Float32Array([a[0],a[1],a[2],1/b.depth]);b.hg=new Float32Array([b.intensity,b.depth,b.start,b.height]);return b}function Ma(a,c){if(!Ta.sd)return!1;switch(a.b4w_render_dynamic_grass){case "OFF":return!1;case "ON":return!0}for(var b=!1,g=!1,
e=0;e<c.length;e++){for(var J=c[e],h=J.qb.Sc,l=0;l<h.length;l++)h[l].rj.To&&(b=!0);J=J.particle_systems;for(l=0;l<J.length;l++)h=J[l].settings,"HAIR"==h.type&&h.b4w_dynamic_grass&&(g=!0);if(b&&g)return!0}return!1}function X(a,c){if(Ac.outlining_overview_mode)return!0;if(Ta.enable_selectable)switch(a.b4w_enable_object_selection){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var b=0;b<c.length;b++)if(c[b].qb.ka.Pl)return!0;return!1}else return!1}function Q(a,c){if(Ac.outlining_overview_mode)return!0;
if(Ta.enable_outlining)switch(a.b4w_enable_outlining){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var b=0;b<c.length;b++)if(c[b].qb.ka.Dd)return!0;return!1}else return!1}function Aa(a,c){if(Ta.glow_materials)switch(a.b4w_enable_glow_materials){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var b=0;b<c.length;b++)for(var g=c[b].qb.Sc,e=0;e<g.length;e++)if(rb.dE(g[e]))return!0;return!1}else return!1}function Ba(a,c){if(Ta.refractions)switch(a.b4w_render_refractions){case "OFF":return!1;
case "ON":return!0;case "AUTO":return c.refractions}else return!1}function E(a){for(var c=0;c<a.length;c++)for(var b=a[c].qb.Sc,g=0;g<b.length;g++){var e=b[g];if(e.vk&&"OPAQUE"!=e.Ob&&"CLIP"!=e.Ob&&"ALPHA_ANTIALIASING"!=e.Ob)return!0}return!1}function Ra(a,c){switch(a.b4w_enable_anchors_visibility){case "OFF":return!1;case "ON":return!0;case "AUTO":for(var b=0;b<c.length;b++){var g=c[b].qb;if(g.anchor&&g.anchor.xo)return!0}return!1}}function ta(a,c){for(var b=va(a,[Y.ic,Y.Kd,Y.De]),g=0;g<b.length;g++)b[g].fu=
c}function ha(a,c,b,g,e,J){for(var h=c.ka,l=Ka.lb(c,e),f=l.Ia,k=0;k<f.length;k++){var n=f[k];if(!(n.qf||n.xe||"MAIN"!=n.type&&"NODES_GLOW"!=n.type&&"PARTICLES"!=n.type&&"LINE"!=n.type)&&("OPAQUE"==n.fc&&"OPAQUE"==g||"BLEND"==n.fc&&"BLEND"==g||"XRAY"==n.fc&&"XRAY"==g||"NODES_GLOW"==n.type&&"GLOW"==g)){if(!J&&(P(n,a,c,b,g,e),!qa.md(n)))if("DEBUG"===Object(U.d)())qa.Ut(n,"error.glslv","error.glslf"),qa.md(n);else continue;var w=Y.bj(n,h,l.Lg[k]);Y.xd(a,w);Ga(b,a,n,!1);pa(n)}}}function ga(a){a.yl.lt&&
qa.dc(a,"USE_LOD_SMOOTHING",1)}function P(a,c,b,g,e,J){var h=b.ka,l=J.sa,f=Ka.lb(b,J),k="NO_SHADOWS";b=va(J,[Y.be]);if(b.length&&a.ze){switch(e){case "OPAQUE":k="SHADOW_MAPPING_OPAQUE";break;case "BLEND":case "XRAY":k="SHADOW_MAPPING_BLEND";break;case "COLOR_ID":case "REFLECT":case "GLOW":k="NO_SHADOWS";break;case "SHADOW":k="SHADOW_MASK_GENERATION";break;default:ua.va("Wrong subscene type")}for(var n=0;n<b.length;n++)qa.FD(a,J.sa.Gd)}n="NO_SOFT_SHADOWS";if(l.Gd&&l.Gd.GT)switch(Ta.shadow_blur_samples){case "16x":n=
"POISSON_X_16";break;case "8x":n="POISSON_X_8";break;case "4x":n="POISSON_X_4"}b=a.Lb;Na.Wa(b,"SHADOW_USAGE",k);Na.Wa(b,"POISSON_DISK_NUM",n);ga(a);a.sd&&(n=ma.wc(g,Y.xj))&&ia(a,n,h);xa(b,c.qa);if("SHADOW"!=a.type&&"COLOR_ID"!=e||a.bc){e=c.kp;Na.Wa(b,"NUM_LIGHTS",e);Na.Wa(b,"NUM_LFACTORS",e%2?Math.floor(e/2)+1:e/2);Na.Wa(b,"REFLECTION_PASS","REFL_PASS_NONE");Na.Wa(b,"SSAO_ONLY",0);if(e=l.Zd)Na.Wa(b,"WATER_EFFECTS",1),Na.Wa(b,"WAVES_HEIGHT",Na.Fa(e.waves_height)),Na.Wa(b,"WAVES_LENGTH",Na.Fa(e.waves_length)),
Na.Wa(b,"WATER_LEVEL",Na.Fa(e.vj));if(c.Ng&&a.Ng){Na.Wa(b,"CAUSTICS",1);if(n=l.Gd){h=n.li;for(n=k=0;n<h.length;n++)"SUN"==h[n]&&(k=n);Na.Wa(b,"SUN_NUM",k)}Na.Wa(b,"CAUST_SCALE",Na.Fa(c.Lj));Na.Wa(b,"CAUST_SPEED",Na.Fa(c.ju,2));Na.Wa(b,"CAUST_BRIGHT",Na.Fa(c.Kj))}n=f.Rj;h=f.nj;f=ma.wc(g,Y.Ue);c=ma.wc(g,Y.Tk);k=ma.wc(g,Y.ao);if(-1!==a.sg.indexOf("u_mirrormap"))Na.Wa(b,"REFLECTION_TYPE","REFL_MIRRORMAP");else if(a.Fd&&c&&k&&!n&&!h.length)qa.$h(a,c.qa.vc,"u_cube_irradiance"),qa.$h(a,k.qa.vc,"u_cube_r_convolution"),
Na.Wa(b,"REFLECTION_TYPE","REFL_PBR_STANDARD");else if(!a.Fd||n||h.length||Ta.quality==ab.P_LOW)if(a.Fd&&n)c=n.qa.vc,l.wi.hA||(n.Rm=!0,f&&(c=f.qa.vc)),qa.$h(a,c,"u_cube_reflection"),Na.Wa(b,"REFLECTION_TYPE","REFL_CUBE");else if(a.Fd&&h)for(n=0;n<h.length;n++)c=h[n].qa.vc,qa.$h(a,c,"u_plane_reflection"),Na.Wa(b,"REFLECTION_TYPE","REFL_PLANE");else Na.Wa(b,"REFLECTION_TYPE","REFL_NONE");else f?(qa.$h(a,f.qa.vc,"u_sky_reflection"),Na.Wa(b,"REFLECTION_TYPE","REFL_PBR_SIMPLE")):Na.Wa(b,"REFLECTION_TYPE",
"REFL_NONE");f?a.Mu?(c=f.qa.vc,qa.$h(a,c,"u_sky")):f.procedural_skydome&&(a.bg=f.bg,Na.Wa(b,"PROCEDURAL_FOG",1)):Na.Wa(b,"PROCEDURAL_FOG",0);c=l.mm;c.kt&&(Na.Wa(b,"USE_ENVIRONMENT_LIGHT",1),"SKY_TEXTURE"==c.Gz?(c.Tu?(f=c.Tu.texture,c=Fb.gf(c.Tu),qa.$h(a,c,"u_sky_texture",f.name)):f&&(c=f.qa.vc,qa.$h(a,c,"u_sky_texture")),Na.Wa(b,"SKY_TEXTURE",1)):"SKY_COLOR"==c.Gz&&Na.Wa(b,"SKY_COLOR",1));c=l.qJ;c.XU&&(Na.Wa(b,"USE_FOG",1),Na.Wa(b,"FOG_TYPE",c.WO));a.tk&&a.Qb?(Ta.Eu&&Na.Wa(b,"USE_REFRACTION_CORRECTION",
1),"MAIN"==a.type&&a.bc||"NODES_GLOW"==a.type?(Na.Wa(b,"REFRACTIVE",1),l.refractions?Na.Wa(b,"USE_REFRACTION",1):Na.Wa(b,"USE_REFRACTION",0)):l.refractions?Na.Wa(b,"REFRACTIVE",1):Na.Wa(b,"REFRACTIVE",0),(l.HG.refractions||l.refractions)&&Na.Wa(b,"HAS_REFRACT_TEXTURE",1)):(Na.Wa(b,"REFRACTIVE",0),Na.Wa(b,"USE_REFRACTION",0),Na.Wa(b,"USE_REFRACTION_CORRECTION",0));a.yg&&(Ta.shore_smoothing&&a.Un&&ma.wc(g,Y.KC)?Na.Wa(b,"SHORE_SMOOTHING",1):Na.Wa(b,"SHORE_SMOOTHING",0),a.water_dynamic&&e&&e.waves_height?
Na.Wa(b,"DYNAMIC",1):Na.Wa(b,"DYNAMIC",0));"PARTICLES"==a.type&&Na.Wa(b,"COLOR_RAMP_LENGTH",a.sb.ru);if(!a.yh)for(a=a.Ua,g=0;g<a.length;g++)if(c=a[g],"SCENE"==c.source)for(l=0;l<jb.length;l++)for(b=jb[l],e=jb[l].Gg,f=0;f<e.length;f++)e[f]==c&&hb.ra(Gb,b,J,null)}}function xa(a,c){c.type==Oa.We||c.type==Oa.Yh||c.type==Oa.zj?Na.Wa(a,"CAMERA_TYPE","CAM_TYPE_ORTHO"):Na.Wa(a,"CAMERA_TYPE","CAM_TYPE_PERSP")}function pa(a){8<a.Ua.length&&qb.warn(a.type,"too many textures used - "+a.Ua.length+' (max 8), materials "'+
a.Hc.join(", ")+'"')}function ia(a,c,b){a.Qd=c.Qd;var g=c.Qd[0],e=c.Qd[1],J=c.Qd[2];b=b.eb;b=Math.max(b.max_x-b.min_x,b.max_y-b.min_y);J=0==J?b:Math.max(J,b);c.Qd[2]=J;c=c.qa;Oa.JH(c,J/2,J/2,-e,-g);Oa.set_projection(c,!1);g=a.ak||0;g=0==g?b:Math.max(g,b);a.ak=g}function na(a,c,b,g,e,h){for(var l=c.ka,f=Ka.lb(c,e),k=f.Ia,n=0;n<k.length;n++){var w=k[n];if(("MAIN"==w.type||"PARTICLES"==w.type||"LINE"==w.type)&&"REFLECT"==w.fc&&w.Qb==g){if(a.type==Y.Ee||a.type==Y.Dg){var z;a:{var ua=e.sa.wi.nj;for(z=
0;z<ua.length;z++)for(var m=0;m<ua[z].length;m++)if(ua[z][m]==a)break a;ua=e.sa.wi.Lw;for(z=0;z<ua.length;z++)for(m=0;m<ua[z].length;m++)if(ua[z][m]==a)break a;z=null}if(z==l.ue)continue}else if(z=J(e,a),z==l.Ge)continue;if(!h&&(P(w,a,c,b,"REFLECT",e),z=w.Lb,Na.Wa(z,"WATER_EFFECTS",0),a.type==Y.Ee||a.type==Y.Dg?Na.Wa(z,"REFLECTION_PASS","REFL_PASS_PLANE"):Na.Wa(z,"REFLECTION_PASS","REFL_PASS_CUBE"),Na.Wa(z,"TEXTURE_NORM",0),!qa.md(w)))if("DEBUG"===Object(U.d)())qa.Ut(w,"error.glslv","error.glslf"),
qa.md(w);else continue;z=Y.bj(w,l,f.Lg[n]);Y.xd(a,z);Ga(b,a,w,!1);pa(w)}}}function ra(a){za(a);var c=Ha(a,Y.ic),b=!0,g=a.sa.Gd;hb.Oa(a.sa.fb,function(e,J){J.type===Y.be&&(fa(J,a,c.qa,g,b),b=!1)})}function Fa(a){hb.Oa(a.sa.fb,function(a,c){c.type===Y.$n&&(c.or=1)})}function fa(a,c,b,g,e){if(0!=a.Hb.length){var J=a.qa;H.a(b.na,J.na);H.a(b.xg,J.Ls);if("SUN"===g.li[a.gh]||"HEMI"===g.li[a.gh]){var h=b.na,l=Hb;G.P(l);for(var f=0;f<a.Hb.length;f++)for(var k=a.Hb[f].ub,n=0;n<k.length;n++){var w=k[n].hb,z=
k[n].ah;if(w.sd){var ua=H.f(h,Fc),m=da.transformQuat(I.c,ua,$b),ua=-m[0],m=m[1],d=H.i(h,$b),ua=d[0]-w.ak*(1+ua)/2,m=d[1]-w.ak*(1-m)/2,z=G.h(w.Yb.zf,z.na,xb),z=z.max_z-z.min_z,d=xb;d.min_x=ua;d.min_y=m;d.min_z=w.Qd[0]-z;d.max_x=ua+w.ak;d.max_y=m+w.ak;d.max_z=w.Qd[1]+z}else d=z.ai;f||n?G.D(l,d):G.o(d,l)}h=G.F(l,Gc);I._27(h,J.Kc,h);if(g.enable_csm){c=da.copy(b.Ti[a.fr],pb);g=q.invert(b.Kc,pc);I._27(c,g,c);I._27(c,J.Kc,c);a=b.gr[a.fr];if(e)for(Ob=0,Wb=-Infinity,e=2;e<h.length;e+=3)Ob=Math.min(Ob,h[e]),
Wb=Math.max(Wb,h[e]);e=Hb;e.max_x=c[0]+a;e.max_y=c[1]+a;e.max_z=Wb;e.min_x=c[0]-a;e.min_y=c[1]-a;e.min_z=Ob}else{b=e=Hb;g=kb;g.set(h);h=ac/9;l=q.identity(pc);q.rotate(l,h,I.c,l);k=f=-1;for(n=0;10>n;n++){w=G.a(g,0,g.length,xb);z=(w.max_x-w.min_x)*(w.max_y-w.min_y);if(-1==f||.1<f-z)f=z,k=n,G.o(w,b);I._27(g,l,g)}b=k*h;0<b&&(g=q.identity(pc),q.rotate(g,b,I.c,g),q.multiply(g,J.Kc,J.Kc),H.d(J.Kc,J.xg));b=e.max_x-e.min_x;g=e.max_y-e.min_y;b&&g&&(h=Math.abs(b-g)/2,2<b/g?(e.max_y+=h,e.min_y-=h):2<g/b&&(e.max_x+=
h,e.min_x-=h));e.max_x+=.005;e.max_y+=.005;e.max_z+=.005;e.min_x-=.005;e.min_y-=.005;e.min_z-=.005;Za(a,c.sa.fb)}Oa.dT(J,e.min_x,e.max_x,e.min_y,e.max_y,-e.max_z,-e.min_z);Oa.set_projection(J,!1)}else"SPOT"!==g.li[a.gh]&&"POINT"!==g.li[a.gh]||Oa.set_projection(J,!1)}}function Za(a,c){for(var b=a.qa,g=ma.bQ(c,a),e=0;e<g.length;e++){var J=g[e];if(J.type==Y.ic||J.type==Y.Eg||J.type==Y.Kd||J.type==Y.mh)if(Ta.hw)J.ot.set(b.xg,9*a.gh);else{var h=H.j(b.xg),l=H.h(b.xg),f=H.g(b.xg);N.set(h[0],h[1],h[2],l,
dc);J.aq.set(dc,4*a.gh);J.$p.set(f,4*a.gh)}}}function Da(a,c,b,g,e){for(var J=c.ka,h=Ka.lb(c,g),l=h.Ia,f=0;f<l.length;f++){var k=l[f];if("COLOR_ID"==k.type&&(a.type==Y.xf&&"COLOR_ID"==k.fc||a.type==Y.Uh&&"COLOR_ID_XRAY"==k.fc)){if(!e&&(P(k,a,c,b,"COLOR_ID",g),qa.dc(k,"USE_OUTLINE",0),!qa.md(k)))continue;k=Y.bj(k,J,h.Lg[f]);Y.xd(a,k)}}}function Ga(a,c,b,g){var e=hb.nk(a,c);hb.Lk(a,e,function(a,c,e){if(e.active){switch(e.from){case "COLOR":case "CUBEMAP":var J=c.qa.vc;break;case "DEPTH":J=c.qa.dg;break;
case "SCREEN":J=null;break;case Y.ae:return;default:ua.va("Wrong slink")}switch(e.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "NONE":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":case "u_cube_reflection":case "u_plane_reflection":break;default:if(!J)if(g)break;else ua.va("Connection of SCREEN is forbidden");J.Qf&&ua.va("Batch texture can't use renderbuffer");Na.gE(b.ec,e.to)&&(g?qa.vB(b,J,e.to):qa.$h(b,J,e.to))}}});for(a=0;a<c.Mb.length;a++){var e=c.Mb[a],J=c.Sh[a];switch(e.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "NONE":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":break;
default:J.Qf&&ua.va("Batch texture can't use renderbuffer"),Na.gE(b.ec,e.to)&&(g?qa.vB(b,J,e.to):qa.$h(b,J,e.to))}}}function Sa(a,c){Pa(a,c);for(var b=0;b<a.af.length;b++)a.af[b].parent==a&&Sa(a.af[b],c)}function Pa(a,c){a.ka.hide=c;if(Ka.is_lamp(a))for(var b=0;b<a.Ba.length;b++)for(var g=a.Ba[b],e=va(g.Kb,Mc),J=0;J<e.length;J++){var h=e[J],l=a.ka,f=a.lc,k=g.Yr,n=f.In&&!l.hide?1:0;h.jn[4*k+3]=n;n=f.Nn&&!l.hide?1:0;h.hn[4*k+3]=n;h.vb=!0}}function La(a,c){for(var b=va(c,Mc),g=a.lc,e=a.ka,J=Ka.lb(a,
c),h=H.j(e.na),e=H.g(e.na),l=0;l<b.length;l++){var f=b[l],k=f,n=a.ka,w=a.lc,z=J.Yr,ua=H.j(a.ka.na),m=w.Xq;k.Xr.set(w.direction,3*z);dc[0]=ua[0];dc[1]=ua[1];dc[2]=ua[2];dc[3]=w.In&&!n.hide?1:0;k.jn.set(dc,4*z);dc[0]=m[0];dc[1]=m[1];dc[2]=m[2];dc[3]=w.Nn&&!n.hide?1:0;k.hn.set(dc,4*z);k.vb=!0;switch(g.type){case "SUN":f.Jx.set(e);f.Ix=g.Xq;da.copy(g.direction,f.Hx);f.type==Y.Ue&&f.procedural_skydome&&(f.cp=g.QG,Ua(c,f));break;case "HEMI":case "POINT":case "SPOT":break;default:qb.error("Unknown light type: "+
g.type+'".')}f=f.Hb;for(k=0;k<f.length;k++)for(n=f[k].ub,w=0;w<n.length;w++)z=n[w].hb,z.gn&&qa.fT(z,a)}b=Ha(c,Y.ic).qa;J=J.MB;g=c.sa.Gd;for(l=0;l<J.length;l++)f=J[l],Oa.KB(f.qa,h,e),fa(f,c,b,g,!0),Za(f,c.sa.fb)}function za(a){var c=Rb.Fc(a,"LAMP",Rb.DATA_ID_ALL),c=Ka.rv(c,Ta.ssao&&a.b4w_enable_ssao);if(c.length)for(var b=0;b<c.length;b++)for(var g=c[b],e=g.ka,J=H.i(e.na,pb),e=H.f(e.na,Fc),h=0;h<g.Ba.length;h++){var l=g.Ba[h],f=l.MB;if(l.Kb==a)for(l=0;l<f.length;l++)Oa.KB(f[l].qa,J,e)}}function S(a){var c=
Ha(a,Y.Ue);c&&Ua(a,c)}function Ua(a,c){Xb.wn(c);Sb.Wj(c);if(c.cp)for(var b=va(a,mc),g=0;g<b.length;g++)for(var e=b[g].Hb,J=0;J<e.length;J++)for(var h=e[J].ub,l=0;l<h.length;l++){var f=h[l];f.Ec&&(f=f.hb,qa.KM(f)&&Sb.oU(f))}if(b=Ha(a,Y.Tk))Xb.wn(b),Sb.Wj(b);if(b=Ha(a,Y.ao))Xb.wn(b),Sb.Wj(b);if(b=Ha(a,Y.xy))Xb.wn(b),Sb.Wj(b)}function ya(a){for(var c=[],b=0;b<a.length;b++)for(var g=a[b].qb.Sc,e=0;e<g.length;e++){var J=g[e];-1==c.indexOf(J)&&c.push(J)}return c}function bb(a,c,b,g){sb.gG()&&(c*=window.devicePixelRatio,
b*=window.devicePixelRatio);var e=R();e&&(e=e.sa,c*=e.sp,b*=e.sp);c*=a.zk;b*=a.Ak;g[0]=Math.floor(c);g[1]=Math.floor(b);return g}function Xa(a,c,b){a=bb(a,c,b,tb);return a[0]>ub.Ic||a[1]>ub.Ic?(qb.warn("Texture size exceeds platform limits, downscaling"),Math.min(ub.Ic/a[0],ub.Ic/a[0])):1}function sa(a,c,b){for(var g=a.sa,e=Ka.lb(a.Aj,a).Sa,J=0!=b?c/b:1,h=0;h<e.length;h++){var l=e[h];Oa.SS(l,J);Oa.set_projection(l,!1);g.Gd&&Oa.rC(l,g.Gd)}if(g.Gd){g.vw=!0;g=va(a,[Y.Eg]);for(h=0;h<g.length;h++)g[h].vb=
!0;g=va(a,[Y.Kd]);for(h=0;h<g.length;h++)g[h].vb=!0}ba(a,c,b)}function ba(a,c,b){var g=a.sa.fb,e=Infinity;ma.Sp(g,function(a){a.Hn&&(e=Math.min(e,Xa(a,c,b)))});ma.Sp(g,function(J,h,l,f){if(J.Hn){var k,n;f&&f.type==Y.Uk||l.Gc&&!J.Tt?(k=c*J.zk,n=b*J.Ak):(n=bb(J,c,b,tb),k=n[0]*e,n=n[1]*e);if(h)for(h=0;h<l.Mb.length;h++)l.Mb[h]==J&&Fb.resize(J.wb,k,n);else switch(Fb.Uo(J.wb)&&(Fb.resize(J.wb,k,n),J.wb.Re&&(f.Wv=J.wb.NG)),J=l.qa,J.width=k,J.height=n,l.type){case Y.qq:vb(a,{dof_power:l.qa.dof_power});break;
case Y.rq:$a(a,{small_glow_mask_width:l.small_glow_mask_width,large_glow_mask_width:l.large_glow_mask_width});break;case Y.mq:Qa(a,{blur:l.ko});break;case Y.gD:J.width=J.vc.width;J.height=J.vc.height;break;case Y.$n:l=ma.zd(g,l,Y.Lc);J=ma.zd(g,l,Y.Lc);n=ma.zd(g,J,Y.Lc);h=ma.zd(g,n,Y.Lc);ma.ye(l,1/k,1/k);ma.ye(J,1/k,1/k);ma.ye(n,1/k,1/k);ma.ye(h,1/k,1/k);break;default:ma.ye(l,1/k,1/n)}}})}function va(a,c){for(var b=[],g=0;g<c.length;g++){var e=c[g];a.sa.fb&&hb.Oa(a.sa.fb,function(a,c){c.type==e&&b.push(c)})}return b}
function Ha(a,c){return ma.wc(a.sa.fb,c)}function db(a){var c=R();c&&hb.Oa(c.sa.fb,function(c,b){var g=b.qa;g&&g.type==Oa.yf&&(b.Rm=a)})}function vb(a,c){var b=va(a,[Y.qq]);if(!b.length)return qb.error("DOF is not enabled on the scene. Check camera settings"),0;for(var g=0;g<b.length;g++){var e=b[g],J=c,h=a,l=e.dof_bokeh,f=l?va(h,[Y.yy]):[],h=h.sa.fb;if("boolean"==typeof J.dof_on&&(e.qa.dof_on=J.dof_on,l))for(var k=0;k<f.length;k++)f[k].qa.dof_on=J.dof_on;if("number"==typeof J.dof_distance&&(e.qa.dof_distance=
J.dof_distance,l))for(k=0;k<f.length;k++)f[k].qa.dof_distance=J.dof_distance;if("number"==typeof J.dof_front_start&&(e.qa.dof_front_start=J.dof_front_start,l))for(k=0;k<f.length;k++)f[k].qa.dof_front_start=J.dof_front_start;if("number"==typeof J.dof_front_end&&(e.qa.dof_front_end=J.dof_front_end,l))for(k=0;k<f.length;k++)f[k].qa.dof_front_end=J.dof_front_end;if("number"==typeof J.dof_rear_start&&(e.qa.dof_rear_start=J.dof_rear_start,l))for(k=0;k<f.length;k++)f[k].qa.dof_rear_start=J.dof_rear_start;
if("number"==typeof J.dof_rear_end&&(e.qa.dof_rear_end=J.dof_rear_end,l))for(k=0;k<f.length;k++)f[k].qa.dof_rear_end=J.dof_rear_end;"number"==typeof J.dof_bokeh_intensity&&(e.qa.dof_bokeh_intensity=J.dof_bokeh_intensity,l&&(f=ma.ov(h,e,Y.Lc),f[0].qa.dof_bokeh_intensity=J.dof_bokeh_intensity,f[1].qa.dof_bokeh_intensity=J.dof_bokeh_intensity,f[0]=ma.zd(h,f[0],Y.Lc),f[0].qa.dof_bokeh_intensity=J.dof_bokeh_intensity));if("number"==typeof J.dof_power)if(l){J=J.dof_power;e.qa.dof_power=J;var J=J/2,l=e.qa.width,
k=e.qa.height,n=[1/l,0],w=[1/l*.5,1/k*.866],z=[-1/l*.5,1/k*.866],f=ma.ov(h,e,Y.Lc);ma.Vd(f[0],J);ma.ye(f[0],z[0],z[1]);ma.Vd(f[1],J);ma.ye(f[1],w[0],w[1]);f[0]=ma.zd(h,f[0],Y.Lc);ma.Vd(f[0],J);ma.ye(f[0],n[0],n[1]);e.qa.qe&&(f[0]=ma.zd(h,f[0],Y.yy),f[0]=ma.zd(h,f[0],Y.Lc),ma.ye(f[0],1/l,1/k),f[0]=ma.zd(h,f[0],Y.Lc),ma.ye(f[0],1/l,1/k))}else e.qa.dof_power=J.dof_power,f=ma.zd(h,e,Y.Lc),h=ma.zd(h,f,Y.Lc),ma.Vd(f,e.qa.dof_power),ma.ye(f,1/e.qa.width,1/e.qa.height),ma.Vd(h,e.qa.dof_power),ma.ye(h,1/e.qa.width,
1/e.qa.height)}}function Qa(a,c){var b=va(a,[Y.Ct]),g=va(a,[Y.mq]);if(!b.length||!g.length)return qb.error("Bloom is not enabled on the scene"),0;if("number"==typeof c.key)for(var e=0;e<b.length;e++)b[e].no=c.key,b[e].vb=!0;if("number"==typeof c.edge_lum)for(e=0;e<b.length;e++)b[e].mo=c.edge_lum,b[e].vb=!0;if("number"==typeof c.blur)for(e=0;e<g.length;e++){g[e].ko=c.blur;for(var J=a.sa.fb,h=g[e].qa.width/.5,l=g[e].qa.height/.5,f=ma.ov(J,g[e],Y.Lc),k=0;k<f.length;++k){var n=f[k],w=ma.zd(J,n,Y.Lc),
z=h*n.lo,ua=l*n.lo;ma.Vd(n,c.blur);ma.ye(n,1/z,1/ua);ma.Vd(w,c.blur);ma.ye(w,1/z,1/ua)}}if("number"==typeof c.average_luminance)for(e=0;e<b.length;e++)b[e].sm||(b[e].average_luminance=c.average_luminance,b[e].vb=!0)}function $a(a,c){var b=va(a,[Y.rq]);if(!b.length)return qb.error("Glow is not enabled on the scene"),null;for(var e=0;e<b.length;e++){for(var g=b[e],J=c,h=a.sa.fb,l=ma.XP(h,g),f=0;f<l.length;++f){var k=l[f];if(k.type==Y.Lc&&"GLOW_MASK_LARGE"==k.fc)var n=k;if(k.type==Y.Lc&&"GLOW_MASK_SMALL"==
k.fc)var w=k}l=ma.zd(h,n,Y.Lc);h=ma.zd(h,w,Y.Lc);"number"==typeof J.small_glow_mask_coeff&&(g.small_glow_mask_coeff=J.small_glow_mask_coeff,g.vb=!0);"number"==typeof J.large_glow_mask_coeff&&(g.large_glow_mask_coeff=J.large_glow_mask_coeff,g.vb=!0);"number"==typeof J.small_glow_mask_width&&(g.small_glow_mask_width=J.small_glow_mask_width,ma.Vd(w,J.small_glow_mask_width),ma.ye(w,1/g.qa.width,1/g.qa.height),w.vb=!0,ma.Vd(h,J.small_glow_mask_width),ma.ye(h,1/g.qa.width,1/g.qa.height),h.vb=!0);"number"==
typeof J.large_glow_mask_width&&(g.large_glow_mask_width=J.large_glow_mask_width,ma.Vd(n,J.large_glow_mask_width),ma.ye(n,1/g.qa.width,1/g.qa.height),n.vb=!0,ma.Vd(l,J.large_glow_mask_width),ma.ye(l,1/g.qa.width,1/g.qa.height),l.vb=!0)}}function gb(a,c,b){var e=a.sa,g=e.Zd;if(!g.pr)return g.vj;var J=g.waves_height,h=g.waves_length,l=g.vj,f=da.length(e.Fi)||1;a=Ha(a,Y.ic).time;a*=f;var k=tb;k[0]=20/h*(c-.25*a);k[1]=20/h*(b-.25*a);f=I.J(k);k[0]=17/h*(b+.1*a);k[1]=17/h*(c+.1*a);var k=I.J(k),f=f+k-1,
n=g.dst_noise_scale0,k=g.dst_noise_scale1,w=g.dst_noise_freq0,z=g.dst_noise_freq1,ua=tb;ua[0]=n*(c+w*a);ua[1]=n*(b+w*a);n=I._54(ua);ua[0]=k*(b-z*a);ua[1]=k*(c-z*a);k=I._54(ua);k=J*n*k;if(g.Rl)if(z=(c-g.yp[0])/g.zp[0],ua=(g.yp[1]+b)/g.zp[1],z+=.5,ua+=.5,1<z||0>z||1<ua||0>ua)c=k;else{var e=I._7(e.NB,g.OB,z,ua),n=g.dir_noise_scale,w=g.dir_noise_freq,m=g.dir_min_noise_fac,z=g.dst_min_fac,ua=Math.sqrt(e);c=J*Math.max(e,g.dir_min_shore_fac)*Math.sin(ua/(h/g.IA/Math.PI)+g.dir_freq*a)*Math.max(I._54([n/h*
(c+w*a),n/h*(b+w*a)]),m);b=Math.max(ua,z);c=c*(1-b)+k*b;f*=e}else c=k;return l+(c+.05*f)}function wb(a,c){a.en&&a.type==Y.Lc&&c.Ec!=a.Ec&&(a.Ec=c.Ec);c.Ec||a.type!=Y.$n||(a.or=0)}function lb(a,c,b,g){var e=hb.Ib(a,c);Oa.Yw(e.qa,b,g);e.Cq=!0;hb.bm(a,c,function(c,e,J){J.active&&J.from==b&&ma.QM(J)&&yb(a,c,J.to,g)});hb.Lk(a,c,function(c,e,J){J.active&&J.from==b&&J.from==J.to&&lb(a,c,b,g)})}function yb(a,c,b,g){a=hb.Ib(a,c).Hb;for(c=0;c<a.length;c++)for(var e=a[c].ub,J=0;J<e.length;J++)qa.vB(e[J].hb,
g,b)}function Ya(a){for(var c=va(a,[Y.xj]),b=0;b<c.length;b++){var g=c[b],e=g.qa,J=a.Aj.ka,h=H.i(J.na,pb),l=$b;l[0]=0;l[1]=0;l[2]=-g.Qd[2]/2;g=H.f(J.na,Fc);da.transformQuat(l,g,l);l[0]+=h[0];l[1]+=h[1];l[2]=0;ca.identity(g);Oa.KB(e,l,g)}}function Wa(a,c){hb.Oa(a,function(b,g){if(g.type==Y.Ii){g.Mb[0]&&g.Sh[0]||ua.va("Wrong MOTION_BLUR subscene");var e=g.Mb[0],J=g.Sh[0];g.Sh[0]=g.qa.vc;hb.bm(a,b,function(c,b,g){g.active&&yb(a,c,g.to,J)});lb(a,b,e.from,J);yb(a,b,e.to,g.Sh[0]);g.pw=Math.exp(-c/g.mb_factor)}})}
function nb(a){return a.sa.Fi}function J(a,c){if(!a.sa.wi)return null;for(var b=a.sa.wi.Rj,g=0;g<b.length;g++)if(b[g]==c)return g;b=a.sa.wi.vz;for(g=0;g<b.length;g++)if(b[g]==c)return g;return null}var ua=Object(O.a)(d),qa=Object(T.a)(d),Oa=Object(r.a)(d),ab=Object(f.a)(d),sb=Object(k.a)(d),eb=Object(y.a)(d),hb=Object(x.a)(d),nc=Object(m.a)(d),Ib=Object(p.a)(d),rb=Object(b.a)(d),Rb=Object(u.a)(d),ic=Object(h.a)(d),Ka=Object(l.a)(d),Xb=Object(e.a)(d),Hc=Object(c.a)(d),qb=Object(a.a)(d),Sb=Object(la.a)(d),
ma=Object(v.a)(d),zb=Object(B.a)(d),Na=Object(C.a)(d),Y=Object(L.a)(d),Fb=Object(h.a)(d),Ic=ab.Km,Ta=ab.wa,ub=ab.di,Ac=ab.Dd,mb=ab.An,Cb=[Y.xj,Y.be,Y.ic,Y.Kd,Y.mh,Y.De,Y.Ee,Y.ae,Y.Dg,Y.Sf,Y.xf,Y.Uh,Y.Eg,Y.Wh,Y.Vh];D.IV=Cb;var Mc=[Y.ic,Y.Kd,Y.mh,Y.De,Y.Ee,Y.ae,Y.Zn,Y.Bt,Y.Ue,Y.Dg,Y.Sf,Y.Ct,Y.Eg,Y.be,Y.xf,Y.Uh,Y.Wh],mc=[Y.ic,Y.Gt,Y.Kd,Y.mh,Y.De,Y.Ee,Y.ae,Y.Dg,Y.Sf],ob=[Y.be,Y.ic,Y.Kd,Y.mh,Y.De,Y.Ee,Y.ae,Y.Dg,Y.Sf,Y.xf,Y.Uh,Y.Eg,Y.Zn,Y.Wh,Y.Vh],cb=[Y.ic,Y.Kd,Y.mh,Y.De,Y.Ee,Y.ae,Y.Dg,Y.Sf],oc=null,gc=
null,jb=[],Gb=null,ac=Math.PI/2,tb=new Float32Array(2),pb=new Float32Array(3),$b=new Float32Array(3),Fc=new Float32Array(4),dc=new Float32Array(4),pc=new Float32Array(16),Gc=new Float32Array(24),kb=new Float32Array(24),Hb=G.w(),xb=G.w(),Ob=0,Wb=-Infinity,bc=new Uint8Array(4);D.GW=function(){return{}};D.set_active=function(a){gc=a;zb.RS(a)};D.nS=function(a,c){var b=a.sa,g=ma.GN(b.fb);if(a==c){sa(a,sb.JF(),sb.IF());for(var e=0;e<g.length;e++)a.sa.yn.push(g[e])}else for(e=a.Gg[0],sa(a,e.Bk,e.Bk),e=0;e<
g.length;e++)c.sa.yn.push(g[e]);g=va(a,ob);for(e=0;e<g.length;e++)g[e].Fi.set(b.Fi);for(e=0;e<b.yn.length;e++)b.yn[e].type==Y.be&&Sb.Wj(b.yn[e])};D.ji=R;D.Xu=V;D.get_active=F;D.xb=function(){return gc?!0:!1};D.ml=function(a){return a.Aj};D.Fr=function(){return jb};D.qv=function(){if(1==jb.length)return jb;for(var a=0;a<jb.length;a++){var c=jb[a].sa.fb;hb.Oa(c,function(c,b){for(var g=b.Hb,e=0;e<g.length;e++)for(var J=g[e].ub,h=0;h<J.length;h++){for(var l=J[h],f=l.hb.Ua,k=l.hb.Zf,n=null,w=0;w<f.length;w++)if("SCENE"==
f[w].source&&f[w].Qs==jb[a].name&&b.type!=Y.Ay){qb.error('Texture-scene loop detected. A scene is rendered to texture "'+k[w]+'" yet this texture belongs to the same scene.');n=l.hb;break}if(n)for(f=n.Ua,n.Ua=[],n.sg=[],qa.nU(n,null),qa.md(n),Y.xd(b,l),w=0;w<f.length;w++)ic.qE(f[w])}})}for(var b=[],a=0;a<jb.length;a++)if(c=jb[a],!c.Gg.length){c=hb.nk(Gb,c);hb.OO(Gb,c);c=hb.Wl(Gb,c,hb.Sk);c=hb.eC(c);hb.Oa(c,function(a,c){b.push(c)});break}return b};D.PL=function(a,c,b,e,J){a.Gg=a.Gg||[];a.pb=null;
var h=a.sa,l=Ka.lb(a.Aj,a),f=a.Aj.ka;h.iq=[];var k=a.world;h.WQ=b.length;h.Xl=W(b);h.mx=wa(k,h.Xl);h.mm=Ca(k,h.mx);h.qJ=Ja(k);if(k=!a.Gg.length)a:{if("HMD"==Ta.stereo){if(l.Sa[0].type!=Oa.pd){qb.warn("Head-mounted display stereo is disabled for the non-perspective camera");Ta.stereo="NONE";k=!1;break a}if(!Ib.can_use_device(Ib.DEVICE_HMD)){qb.warn("Head-mounted display stereo is disabled for the non-WebVR and non-mobile devices");Ta.stereo="NONE";k=!1;break a}}k="HMD"==Ta.stereo}h.Iv=k;if(k=!a.Gg.length)l.Sa[0].type!=
Oa.pd&&"ANAGLYPH"==Ta.stereo?(qb.warn("Anaglyph stereo is disabled for the non-perspective camera"),Ta.stereo="NONE",k=!1):k="ANAGLYPH"==Ta.stereo;h.anaglyph_use=k;if(k=!a.Gg.length)l.Sa[0].type!=Oa.pd&&"SIDEBYSIDE"==Ta.stereo?(qb.warn("Side-by-side stereo is disabled for the non-perspective camera"),Ta.stereo="NONE",k=!1):k="SIDEBYSIDE"==Ta.stereo;h.Ms=k;h.GL=!h.anaglyph_use&&!h.Ms&&Ra(a,J);h.wi=ka(a,c,e);h.oM=t(a);h.CR=Z(a);h.JM=aa(a);h.mQ=oa(a);h.TR=ja(a);h.Zi=Ia(a);h.dof=Ta.dof&&(0<f.dof_distance||
f.dof_object);h.motion_blur=Ta.motion_blur&&a.b4w_enable_motion_blur;h.compositing=Ta.compositing&&a.b4w_enable_color_correction;h.antialiasing=Ta.antialiasing&&1==Ta.Jc&&"NONE"!=a.b4w_antialiasing_quality;h.ssao=Ta.ssao&&a.b4w_enable_ssao;h.god_rays=Ta.god_rays&&a.b4w_enable_god_rays&&h.Xl;h.BO=Ta.Eu;h.uv=a.b4w_glow_settings.render_glow_over_blend;h.TT=M(a);J=K(e);h.HG=J;h.refractions=Ba(a,J);h.Gd=z(a,b,e);h.Zd=g(e);h.Hi=E(e);h.FT=n(e);h.shore_smoothing=A(e);h.sd=Ma(a,e);h.dN=X(a,e);h.outline=Q(a,
e);h.glow_materials=Aa(a,e);h.tR=a.b4w_lod_smooth_type;h.zG=a.b4w_lod_hyst_interval;switch(Ta.reflection_quality?Ta.reflection_quality:a.b4w_reflection_quality){case "LOW":h.Sj=mb.LE;h.vi=mb.hH;break;case "MEDIUM":h.Sj=mb.tO;h.vi=mb.hS;break;case "HIGH":h.Sj=mb.sO;h.vi=mb.gS;break;default:h.Sj=mb.LE,h.vi=mb.hH}sb.gG()?(qb.log("%cENABLE HIDPI MODE","color: #00a"),h.sD="AA_QUALITY_LOW",h.sp=1,Ta.Jc=1):1<Ta.Jc?(qb.log("%cENABLE MSAA RENDERING: "+Ta.Jc+"x","color: #00a"),h.sp=1):(h.sD="AA_QUALITY_"+a.b4w_antialiasing_quality,
h.sp=Ta.quality===ab.P_ULTRA?1.33:1);b=a.Gg.sort(function(a,c){return c.Bk-a.Bk});h.fb=ma.FN(h,l,f,b);h.yn=[];h.vw=!1;h.UA=!1;h.VA=!1;h.Fi=new Float32Array(3);jb.push(a);Gb||(Gb=hb.create());hb.Ga(Gb,a);for(h=0;h<c.length;h++)Ka.EB(c[h],!0,a);a=sb.get_container();sb.resize(a.clientWidth,a.clientHeight,!0)};D.QL=function(a,c,b){for(var g=0;g<c.length;g++){var e=c[g].sa;e&&e.dj&&(e.kq=b,a.sa.iq.push(c[g]))}};D.nv=function(a){return a.sa.fb};D.oF=function(a,c){hb.Oa(c,function(b,g){var e=null;switch(g.type){case Y.Lc:e=
qa.vu(g.rs);break;case Y.Gt:e=qa.MN(g);break;case Y.My:e=qa.NN(g);break;case Y.KC:e=qa.sN();break;case Y.Zn:e=qa.wN(g.Gw,g.yg,g.Ul);break;case Y.Bt:e=qa.xN();break;case Y.Ii:e=qa.AN();break;case Y.yy:e=qa.mN(g.ou);break;case Y.qq:var e=qa.tN(g),J=g.qa.dof_power;if(g.dof_bokeh){var J=J/2,h=ma.ov(c,g,Y.Lc);ma.Vd(h[0],J);ma.Vd(h[1],J);h[0]=ma.zd(c,h[0],Y.Lc);ma.Vd(h[0],J)}else{var h=ma.zd(c,g,Y.Lc),l=ma.zd(c,h,Y.Lc);ma.Vd(h,J);ma.Vd(l,J)}break;case Y.$n:var e=qa.BN(),J=ma.zd(c,g,Y.Lc),h=ma.zd(c,J,Y.Lc),
l=ma.zd(c,h,Y.Lc),f=ma.zd(c,l,Y.Lc);ma.Vd(h,g.Kq);ma.Vd(J,g.Kq);ma.Vd(f,g.vr*g.tn);ma.Vd(l,g.vr*g.tn);break;case Y.rq:e=qa.vN();break;case Y.zy:e=qa.nN();break;case Y.FC:e=qa.iN(g);break;case Y.Ky:case Y.Et:case Y.uq:case Y.Ft:e=qa.KN(g.type);break;case Y.nh:e=qa.ON(g.fc);break;case Y.Ue:e=qa.qN(a,g);break;case Y.Tk:e=qa.oN();break;case Y.ao:e=qa.pN();break;case Y.xy:e=qa.lN();break;case Y.LUMINANCE:e=qa.yN();break;case Y.IC:e=qa.jN();break;case Y.Ct:e=qa.zN(g.sm);break;case Y.mq:e=qa.kN(g.cu);break;
case Y.gD:e=qa.vu("NONE");break;case Y.wL:e=qa.oO();break;case Y.Xn:e=qa.hN();break;case Y.tq:e=qa.DN()}e&&(J=Y.bj(e,Ka.qo("NONE")),Y.xd(g,J),Ga(c,g,e,!1),pa(e))})};D.append_object=function(a,c,b){switch(c.type){case "MESH":case "LINE":case "WORLD":var g=a.sa.fb,e=c.ka;!ma.wc(g,Y.be)&&e.ze&&(e.ze=!1);for(var e=va(a,Cb),J=0;J<e.length;J++){var h=e[J],l=c,f=g,k=a,n=b;switch(h.type){case Y.ic:ha(h,l,f,"OPAQUE",k,n);break;case Y.Kd:ha(h,l,f,"BLEND",k,n);break;case Y.mh:ha(h,l,f,"XRAY",k,n);break;case Y.De:ha(h,
l,f,"GLOW",k,n);break;case Y.Ee:case Y.ae:na(h,l,f,!1,k,n);break;case Y.Dg:case Y.Sf:na(h,l,f,!0,k,n);break;case Y.Eg:for(var w=Ka.lb(l,k),z=w.Ia,ua=0;ua<z.length;ua++){var m=z[ua];if("SHADOW"==m.type&&"RECEIVE"==m.fc&&m.ze){if(!n&&(P(m,h,l,f,"SHADOW",k),!qa.md(m)))continue;var d=Y.bj(m,l.ka,w.Lg[ua]);Y.xd(h,d);Ga(f,h,m,!1);pa(m)}}break;case Y.be:w=!1;z=l.ka;l=Ka.lb(l,k);ua=l.Ia;m=ma.wc(f,Y.xj);for(d=0;d<ua.length;d++){var A=ua[d];if("SHADOW"==A.type&&"CAST"==A.fc){w=!0;if(!n){ga(A);var p=h.kp;qa.dc(A,
"NUM_LIGHTS",p);qa.dc(A,"NUM_LFACTORS",p%2?Math.floor(p/2)+1:p/2);xa(A.Lb,h.qa);Na.Wa(A.Lb,"SHADOW_USAGE","SHADOW_CASTING");A.sd&&m&&ia(A,m,z);qa.dc(A,"SHADOW_TEX_RES",Na.Fa(k.sa.Gd.csm_resolution));if(!qa.md(A))continue}A.sd&&(k.sa.Gd.JO=!0);p=Y.bj(A,z,l.Lg[d]);Y.xd(h,p);Ga(f,h,A,!1);pa(A)}}w&&(l=k.sa.Gd,n=ma.wc(f,Y.ic),fa(h,k,n.qa,l,!0));break;case Y.xf:Da(h,l,f,k,n);break;case Y.Uh:Da(h,l,f,k,n);break;case Y.Wh:w=l.ka;z=Ka.lb(l,k);ua=z.Ia;for(m=0;m<ua.length;m++)if(d=ua[m],"COLOR_ID"==d.type&&
"OUTLINE"==d.fc){if(!n&&(P(d,h,l,f,"COLOR_ID",k),qa.dc(d,"USE_OUTLINE",1),!qa.md(d)))continue;d=Y.bj(d,w,z.Lg[m]);Y.xd(h,d)}break;case Y.xj:f=l.ka;l=Ka.lb(l,k);k=l.Ia;for(w=0;w<k.length;w++)if(z=k[w],"GRASS_MAP"==z.type){if(!n&&!qa.md(z))if("DEBUG"===Object(U.d)())qa.Ut(z,"error.glslv","error.glslf"),qa.md(z);else continue;z=Y.bj(z,f,l.Lg[w]);Y.xd(h,z);z=h.qa;A=f.ai;ua=h.Qd[0];m=h.Qd[1];d=h.Qd[2];0==ua&&0==m?(ua=A.min_z,m=A.max_z):(ua=Math.min(ua,A.min_z),m=Math.max(m,A.max_z));A=1E-4*(m-ua);ua-=
A;m+=A;h.Qd[0]=ua;h.Qd[1]=m;Oa.JH(z,d/2,d/2,-m,-ua);Oa.set_projection(z,!1)}break;case Y.Vh:for(w=l.ka,l=Ka.lb(l,k),k=l.Ia,z=0;z<k.length;z++)if(ua=k[z],"DEBUG_VIEW"==ua.type){if(!n&&(ua.sd&&(m=ma.wc(f,Y.xj))&&ia(ua,m,w),!qa.md(ua)))if("DEBUG"===Object(U.d)())qa.Ut(ua,"error.glslv","error.glslf"),qa.md(ua);else break;m=Y.bj(ua,w,l.Lg[z]);Y.xd(h,m);Ga(f,h,ua,!1);pa(ua)}}}break;case "LAMP":La(c,a)}b=Ka.lb(c,a);g=b.Ia;for(e=0;e<g.length;e++)null==g[e].ec&&"PHYSICS"!=g[e].type&&(Ka.AH(b,e),e--);Ka.EB(c,
!0,a)};D.CQ=function(a,c){if(a&&a.sa&&a.sa.fb){var b=a.sa.fb,g=ma.wc(a.sa.fb,Y.Ue);if(g){var e=null;ma.Sp(b,function(a,c,b,g){if("CUBEMAP"==a.from&&b.type==Y.Ue&&g.type==Y.Uk)return e=a.wb,!0});if(e){var J=mb.xu,h=qa.Gr(c,a);if(h&&h.bc)h=rb.$P(rb.pv(h.Le).fb),-1!=h&&(J=ic.cz(h/2));else if(h=a.sa.mm.Cn)J=h.xI;J=Math.min(J,ub.Yg);g.qa.width=J;g.qa.height=J;Fb.Zw(e,J);ta(a,J);if(g=ma.wc(a.sa.fb,Y.Tk)){g.qa.width=32;g.qa.height=32;var l=null;ma.Sp(b,function(a,c,b,g){if("CUBEMAP"==a.from&&b.type==Y.Tk&&
g.type==Y.ic)return l=a.wb,!0});l&&Fb.Zw(l,32)}if(g=ma.wc(a.sa.fb,Y.ao)){g.qa.width=128;g.qa.height=128;var f=null;ma.Sp(b,function(a,c,b,g){if("CUBEMAP"==a.from&&b.type==Y.ao&&g.type==Y.ic)return f=a.wb,!0});f&&Fb.Zw(f,128)}}}}};D.uU=function(a,c){for(var b=a.Ba,g=0;g<b.length;g++){var e=b[g].Kb,J=e.sa.fb,h=ma.wc(e.sa.fb,Y.Ue);if(h){var l=null;ma.Sp(J,function(a,c,b,g){if("CUBEMAP"==a.from&&b.type==Y.Ue&&g.type==Y.Tk)return l=a.wb,!0});l&&(J=ic.cz(c.height/2),J=Math.min(J,ub.Yg),h.qa.width=J,h.qa.height=
J,Fb.Zw(l,J),ta(e,J))}}};D.FB=function(a){a.sa.vw=!0};D.LU=function(a,c){hb.Oa(c,function(c,b){b.type===Y.be&&(H.a(a.na,b.qa.na),H.a(a.xg,b.qa.Ls))})};D.uY=Za;D.HP=function(a,c){for(var b=a.sa.Gd,g=new Float32Array(b.csm_num),e=0;e<b.csm_num;e++)g[e]=Oa.rO(b,c,e);return g};D.eN=Ga;D.Tq=Sa;D.Dm=Pa;D.is_hidden=function(a){return a.ka.hide};D.uH=function(a,c){for(var b=0;b<a.Ba.length;b++)for(var g=va(a.Ba[b].Kb,Cb),e=0;e<g.length;e++)for(var J=g[e].Hb,h=0;h<J.length;h++)for(var l=J[h].ub,f=l.length-
1;0<=f;f--){var k=l[f];if(k.ah==a.ka)if(k.hb){if("undefined"==typeof c||-1!=k.hb.Hc.indexOf(c)||0==k.hb.Hc.length)qa.rE(k.hb),l.splice(f,1)}else l.splice(f,1)}};D.wU=function(a,c){for(var b=a.lc,g=Ka.lb(a,c).Yr,e=va(c,Mc),J=0;J<e.length;J++){var h=e[J];h.hn.set(b.Xq,4*g);h.vb=!0}};D.gt=La;D.Zx=function(a){a=a.Ba;for(var c=0;c<a.length;c++)S(a[c].Kb)};D.$x=S;D.MU=Ua;D.cleanup=function(){for(var a=0;a<jb.length;a++){var c=jb[a];hb.Oa(c.sa.fb,function(a,c){if(c.type!=Y.Uk){var b=c.qa;Sb.xS(b.Ff,b.vc,
b.dg,b.width,b.height);for(var b=c.Hb,g=0;g<b.length;g++)for(var e=b[g].ub,J=0;J<e.length;J++){var h=e[J].hb;h&&qa.rE(h)}}});c.sa.fb=null;c.sa.yn=[]}gc=oc=null;jb.length=0;Gb=null};D.EG=function(a,c,b){a=Oa.SO(a,a.near,a.far,null,!0);var g=Hc.nP(a);a=Ka.qo("DYNAMIC");a.ai=a.eb=G.f();a.Xe=a.Xc=G.g();var e=a.Xe.Jb;a.Yk=a.jc=G.e([e,0,0],[0,e,0],[0,0,e],a.Xe.Da);b=qa.JN(g,b);b.Vj=!0;b=Y.bj(b,a);Y.xd(c,b)};D.dX=function(a){return[a.frame_start,a.frame_end]};D.TH=function(a,c,b){sb.xT(a,c,b);gc&&sa(gc,
a,c)};D.hh=va;D.xc=Ha;D.vS=function(){db(!1)};D.wS=function(){db(!0)};D.get_environment_colors=function(a){a=Ha(a,Y.ic);var c=a.te,b=a.Ce,g=[],e=[];g[0]=c[0];g[1]=c[1];g[2]=c[2];e[0]=b[0];e[1]=b[1];e[2]=b[2];return[a.Sg,g,e]};D.set_environment_colors=function(a,c,b,g){for(var e=va(a,Mc),J=0;J<e.length;J++){var h=e[J];h.te.set(b);h.Ce.set(g);h.Sg=c;h.vb=!0}(c=ma.wc(a.sa.fb,Y.Ue))&&Ua(a,c)};D.get_sky_params=function(a){if((a=Ha(a,Y.Ue))&&a.procedural_skydome){var c={};c.color=Array(3);da.copy(a.Tl,
c.color);c.procedural_skydome=a.procedural_skydome;c.use_as_environment_lighting=a.use_as_environment_lighting;c.rayleigh_brightness=a.rayleigh_brightness;c.mie_brightness=a.mie_brightness;c.spot_brightness=a.spot_brightness;c.scatter_strength=a.scatter_strength;c.rayleigh_strength=a.rayleigh_strength;c.mie_strength=a.mie_strength;c.rayleigh_collection_power=a.rayleigh_collection_power;c.mie_collection_power=a.mie_collection_power;c.mie_distribution=a.mie_distribution;return c}return null};D.RP=function(a){return va(a,
mc)[0].hg[0]};D.PP=function(a){return va(a,mc)[0].hg[1]};D.SP=function(a){return va(a,mc)[0].hg[2]};D.QP=function(a){return va(a,mc)[0].hg[3]};D.GH=function(a,c){for(var b=va(a,mc),g=0;g<b.length;g++){var e=b[g];e.hg[0]=c;e.vb=!0}};D.EH=function(a,c){for(var b=va(a,mc),g=0;g<b.length;g++){var e=b[g];e.hg[1]=c;e.vb=!0}};D.HH=function(a,c){for(var b=va(a,mc),g=0;g<b.length;g++){var e=b[g];e.hg[2]=c;e.vb=!0}};D.FH=function(a,c){for(var b=va(a,mc),g=0;g<b.length;g++){var e=b[g];e.hg[3]=c;e.vb=!0}};D.get_fog_color_density=
function(a,c){var b=c||[],g=va(a,mc)[0].re;b[0]=g[0];b[1]=g[1];b[2]=g[2];b[3]=g[3];return b};D.set_fog_color_density=function(a,c){for(var b=va(a,mc),g=0;g<b.length;g++){var e=b[g];e.re.set(c);e.vb=!0}};D.get_ssao_params=function(a){var c=Ha(a,Y.Gt),b=Ha(a,Y.My);a=Ha(a,Y.ic);if(!c)return null;var g={};g.quality=c.Fn;g.use_hemisphere=c.Hp;g.use_blur_depth=b.Ep;g.blur_discard_value=b.Fp;g.radius_increase=c.Jp;g.influence=c.Ip;g.dist_factor=c.Gp;g.ssao_only=a.ssao_only;g.ssao_white=c.ssao_white;return g};
D.get_dof_params=function(a){a=Ha(a,Y.qq);if(!a)return null;var c={};c.dof_on=a.qa.dof_on;c.dof_bokeh=a.dof_bokeh;c.dof_distance=a.qa.dof_distance;c.dof_front_start=a.qa.dof_front_start;c.dof_front_end=a.qa.dof_front_end;c.dof_rear_start=a.qa.dof_rear_start;c.dof_rear_end=a.qa.dof_rear_end;c.dof_power=a.qa.dof_power;c.dof_bokeh_intensity=a.qa.dof_bokeh_intensity;c.dof_object=a.qa.dof_object;return c};D.set_dof_params=vb;D.get_god_rays_params=function(a){var c=va(a,[Y.Zn]);a=Ha(a,Y.Bt);if(!c||!a)return null;
var b={};b.god_rays_max_ray_length=c[0].Al;b.god_rays_intensity=a.god_rays_intensity;b.god_rays_steps=qa.Pd(c[0].Hb[0].ub[0].hb,"STEPS_PER_PASS")[1];return b};D.set_god_rays_params=function(a,c){var b=va(a,[Y.Zn]),g=va(a,[Y.Bt]);if(!b.length||!g.length)return qb.error("God Rays are not enabled on the scene"),0;if("number"==typeof c.god_rays_intensity)for(var e=0;e<g.length;e++)g[e].god_rays_intensity=c.god_rays_intensity;if("number"==typeof c.god_rays_max_ray_length)for(var J=c.god_rays_max_ray_length,
e=0;e<b.length;e++)b[e].Al=J,b[e].rp=J/b[e].Ul/(e+1),b[e].vb=!0;if("number"==typeof c.god_rays_steps)for(var h=Na.Fa(c.god_rays_steps,1),J=b[0].Al,e=0;e<b.length;e++){b[e].Ul=h;b[e].rp=J/h/(e+1);b[e].vb=!0;var l=b[e].Hb[0].ub[0],f=l.hb;qa.dc(f,"STEPS_PER_PASS",h);qa.md(f);Y.xd(b[e],l)}for(e=0;e<g.length;e++)g.vb=!0};D.get_bloom_params=function(a){var c=Ha(a,Y.Ct);a=Ha(a,Y.mq);if(!c||!a)return null;var b={};b.key=c.no;b.edge_lum=c.mo;b.blur=a.ko;b.adaptive=c.sm;b.average_luminance=c.average_luminance;
return b};D.set_bloom_params=Qa;D.get_glow_material_params=function(a){a=Ha(a,Y.rq);if(!a)return null;var c={};c.small_glow_mask_coeff=a.small_glow_mask_coeff;c.large_glow_mask_coeff=a.large_glow_mask_coeff;c.small_glow_mask_width=a.small_glow_mask_width;c.large_glow_mask_width=a.large_glow_mask_width;return c};D.set_glow_material_params=$a;D.get_wind_params=function(a){var c=nb(a);a=da.length(c);if(0==a)return null;var c=I._38(Math.atan2(c[0],-c[1])),b={};b.wind_dir=c;b.wind_strength=a;return b};
D.LS=function(a){a.sa.UA=!0};D.get_water_surface_level=gb;D.get_water_mat_params=function(a,c){var b=a.sa.Zd,g=Ha(a,Y.ic);g&&b&&(c.waves_height=b.waves_height,c.waves_length=b.waves_length,c.water_fog_density=g.Ei[3],b=c.water_fog_color=[],b[0]=g.Ei[0],b[1]=g.Ei[1],b[2]=g.Ei[2])};D.set_water_params=function(a,c){var b=a.sa.Zd;if(!b)return qb.error("set_water_params() - no water parameters on the scene"),null;"number"==typeof c.dst_noise_scale0&&(b.dst_noise_scale0=c.dst_noise_scale0);"number"==typeof c.dst_noise_scale1&&
(b.dst_noise_scale1=c.dst_noise_scale1);"number"==typeof c.dst_noise_freq0&&(b.dst_noise_freq0=c.dst_noise_freq0);"number"==typeof c.dst_noise_freq1&&(b.dst_noise_freq1=c.dst_noise_freq1);"number"==typeof c.dir_min_shore_fac&&(b.dir_min_shore_fac=c.dir_min_shore_fac);"number"==typeof c.dir_freq&&(b.dir_freq=c.dir_freq);"number"==typeof c.dir_noise_scale&&(b.dir_noise_scale=c.dir_noise_scale);"number"==typeof c.dir_noise_freq&&(b.dir_noise_freq=c.dir_noise_freq);"number"==typeof c.dir_min_noise_fac&&
(b.dir_min_noise_fac=c.dir_min_noise_fac);"number"==typeof c.dst_min_fac&&(b.dst_min_fac=c.dst_min_fac);"number"==typeof c.waves_hor_fac&&(b.waves_hor_fac=c.waves_hor_fac);"number"==typeof c.water_dynamic&&(b.pr=c.water_dynamic);for(var g=va(a,cb),e=0;e<g.length;e++){var J=g[e];"number"==typeof c.water_fog_density&&b.re&&(J.Ei[3]=c.water_fog_density);"object"==typeof c.water_fog_color&&b.re&&J.Ei.set(c.water_fog_color);J.vb=!0}};D.get_shore_dist=function(a,c,b){var g=a.sa.Zd;if(!g.Rl)return 100;var e=
g.IA;a=g.vj;var J=(c[0]-g.yp[0])/g.zp[0],h=(g.yp[1]+c[1])/g.zp[1],J=J+.5,h=h+.5;if(!(1<J||0>J||1<h||0>h))return g=e*I._7(gc.sa.NB,g.OB,J,h),c=(a-c[2])*b,c=Math.sqrt(g*g+c*c)};D.update=function(a,c){Sb.clear();for(var b=F().Aj.ka,g=0;g<jb.length;g++){var e=jb[g],J=e.sa.fb,h=e.sa;if(h.Zd)var l=H.j(b.na),f=l[2]-gb(e,l[0],l[1]);for(l=0;l<h.iq.length;l++){var k=h.iq[l].sa,n=k.Pb,w=k.me;if(!(e.b4w_use_nla&&k.hm||!n&&!w)&&Fb.iJ(k)){var z=Fb.fJ(k),ua=Fb.hJ(k);n&&Ta.is_mobile_device&&(ua-=5);var m=Fb.cV(k);
z>=m&&k.Mk||z<ua?(Fb.reset_video(k),w&&(k.Ql=Fb.Xw(k,a))):z>=m&&!k.Mk?Fb.pause_video(k):Fb.jJ(k)&&(n?Fb.QI(k):(n=Fb.Xw(k,a),n!=k.Ql&&(Fb.OI(k),k.yk++),k.Ql=n))}}hb.Oa(J,function(c,b){-1<ob.indexOf(b.type)&&(b.time=a);h.Zd&&(b.Pq=f)})}for(g=0;g<jb.length;g++)if(e=jb[g],h=e.sa,J=h.fb,b=h.yn,b.length)for(h.vw&&(ra(e),h.vw=!1),h.UA&&(Ya(e),h.UA=!1),h.VA&&(Fa(e),h.VA=!1),h.motion_blur&&Wa(J,c),e=ma.wc(J,Y.Wh),l=0;l<b.length;l++)J=b[l],Xb.wn(J),e&&wb(J,e),Sb.Wj(J);Ta.show_hud_debug_info&&nc.CT(jb,c)};D.BS=
function(a){a.sa.VA=!0};D.Qz=function(a){var c=[];hb.Oa(a.sa.fb,function(a,b){c.push(b)});return c};D.get_cam_water_depth=function(){var a=Ha(gc,Y.Kd),c=gc;return a||c.sa.Zd?a.Pq:null};D.NI=function(a){hb.Oa(a.sa.fb,function(a,c){c.vb=!0})};D.XS=function(a,c){a.debug_view_mode=c;a.Ec=c!=eb.DV_NONE;a.Qb=c==eb.DV_TRANSPARENT_WIREFRAME;a.vb=!0;for(var b=F(),g=0;g<cb.length;g++)for(var e=va(b,[cb[g]]),J=0;J<e.length;J++)e[J].nr=c==eb.DV_RENDER_TIME};D.WS=function(a,c){a.debug_colors_seed=c;a.vb=!0};D.lT=
function(a,c){a.Cu=c;a.vb=!0};D.uT=function(a,c){for(var b=a.Hb,g=0;g<b.length;g++)for(var e=b[g].ub,J=0;J<e.length;J++){var h=e[J].hb;da.copy(c,h.wireframe_edge_color);h.ec.ep=!0}};D.JI=function(a,c){var b=c.Bo,g=a.sa.Fi;if(b&&"WIND"==b.type&&g){var e=H.g(c.ka.na);da.transformQuat(I.f,e,g);da.normalize(g,g);da.scale(g,b.lI,g);b=va(a,ob);for(e=0;e<b.length;e++)b[e].Fi.set(g);return!0}return!1};D.bS=function(a,c,b){var g=Ha(a,Y.xf);if(g){var e=Ic.enabled&&(Ic.Vs===Y.xf||Ic.Vs===Y.Uh);if(e)var J=sb.Qq(c,
b,tb,g.qa);else{var h=sb.get_canvas();Oa.VS(g.qa,c,b,h.clientWidth,h.clientHeight)}Xb.wn(g);g.Ec&&Sb.Wj(g);(a=Ha(a,Y.Uh))?(q.copy(g.qa.gc,a.qa.gc),q.copy(g.qa.wg,a.qa.wg),I._0(a.qa.wg,a.qa.Um),Xb.wn(a),a.Ec&&Sb.Wj(a),c=a.qa):c=g.qa;if(g.Ec||a&&a.Ec)return e?(J[1]=c.height-J[1],Sb.Rw(c.Ff,J[0],J[1],1,1,bc)):Sb.Rw(a?a.qa.Ff:g.qa.Ff,0,0,1,1,bc)}else qb.error("Object Selection is not available on the scene");return null};D.set_outline_color=function(a){for(var c=F(),c=va(c,[Y.$n]),b=0;b<c.length;b++){var g=
c[b];g.ti.set(a);g.vb=!0}};D.iX=nb;D.get_meta_tags=function(a){var c={title:"",description:""};a.b4w_tags&&(c.title=a.b4w_tags.title,c.description=a.b4w_tags.description);return c};D.get_custom_prop=function(a){return a.b4w_custom_prop};D.II=function(a,c){var b=pb;da.negate(c,b);for(var g=0;6>g;g++){var e=a.th[g],J=a.Jm[g],h=a.qa;q.translate(I.j[g],b,e);q.multiply(h.gc,e,h.wg);I._0(h.wg,J)}};D.KI=function(a,c,b){I._60(c,b,I.f,a.qa.ad)};D.ED=function(a,c,b){var g=a.sa.wi;if(g&&c)for(var e=0;e<c.length;e++){var J=
c[e],h=Ka.lb(J,a);if(-1!=J.ka.ue){var l=g.nj,f=g.Lw,J=J.ka.ue;f.length&&J<f.length?h.nj=f[J]:l.length&&J<l.length&&(h.nj=l[J])}else-1!=J.ka.Ge&&(l=g.Rj,f=g.vz,J=J.ka.Ge,f.length?h.Rj=f[J]:l.length&&(h.Rj=l[J]))}if(b)for(c=Ka.rv(b,Ta.ssao&&a.b4w_enable_ssao),b=a.sa.Gd,e=0;e<c.length;e++)if(h=Ka.lb(c[e],a),b)for(g=va(a,[Y.be]),J=0;J<g.length;J++)e==g[J].gh&&h.MB.push(g[J])};D.marker_frame=function(a,c){return a.timeline_markers[c]};D.set_hmd_params=function(a){var c=F();if(c=Ha(c,Y.nh))a.distortion_coefs&&
(c.Uj[0]=a.distortion_coefs[0],c.Uj[1]=a.distortion_coefs[1],c.vb=!0),a.chromatic_aberration_coefs&&(c.chromatic_aberration_coefs[0]=a.chromatic_aberration_coefs[0],c.chromatic_aberration_coefs[1]=a.chromatic_aberration_coefs[1],c.chromatic_aberration_coefs[2]=a.chromatic_aberration_coefs[2],c.chromatic_aberration_coefs[3]=a.chromatic_aberration_coefs[3],c.vb=!0),a.base_line_factor&&(c.Uj[2]=a.base_line_factor,c.vb=!0),a.inter_lens_factor&&(c.Uj[3]=a.inter_lens_factor,c.vb=!0),null!=a.enable_hmd_stereo&&
(c.enable_hmd_stereo=a.enable_hmd_stereo,c.vb=!0)};D.tw=function(a,c){for(var b=jb,g=0;g<b.length;g++)ma.IR(D.nv(b[g]),a,c)};D.jU=function(a){for(var c=Rb.Fc(a,"LAMP",Rb.DATA_ID_ALL),b=va(a,Cb),g=0;g<b.length;g++)for(var e=b[g],J=e.Hb,h=0;h<J.length;h++)for(var l=J[h].ub,f=0;f<l.length;f++){var k=l[f],n=k.hb;"MAIN"==n.type&&(qa.mU(n,c,a),qa.md(n),Y.xd(e,k))}};D.rH=function(a){for(var c=0;c<jb.length;c++)hb.Oa(jb[c].sa.fb,function(c,b){for(var g=b.Hb,e=0;e<g.length;e++)for(var J=g[e].ub,h=0;h<J.length;h++){var l=
J[h];l.hb==a&&Y.xd(b,l)}})}});t.a=d},function(E,t,d){E=d(0);var O=d(5),T=d(14),G=d(4),r=d(2),f=d(25);d=Object(E.a)("__subscene",function(k,d){function y(b,e){b.kp=e;b.Xr=new Float32Array(3*e);b.jn=new Float32Array(4*e);b.hn=new Float32Array(4*e)}function m(b){b={type:b,fc:"",Rm:!1,Qb:!1,Gw:!1,Cq:!1,cp:!1,el:0,cg:0,fl:[],debug_view_mode:0,debug_colors_seed:0,Cu:1,nr:!1,time:0,qa:null,th:null,Jm:[],Hb:[],Mb:[],Sh:[],Fi:new Float32Array(3),Qd:new Float32Array(3),re:new Float32Array(4),hg:new Float32Array(4),
bg:new Float32Array(16),Cp:0,Sg:0,kp:0,Xr:null,jn:null,hn:null,tG:null,te:new Float32Array(3),Ce:new Float32Array(3),Dp:new Float32Array(4),Ix:new Float32Array(3),Hx:new Float32Array([0,0,1]),Jx:new Float32Array(4),Bp:new Float32Array(3),lx:"",fu:0,tn:0,or:0,en:!1,ti:new Float32Array(3),yg:!1,Pq:0,Ei:new Float32Array(4),vj:0,Ng:!1,Lj:0,ju:new Float32Array(2),Kj:0,procedural_skydome:!1,use_as_environment_lighting:!1,mie_brightness:0,rayleigh_brightness:0,spot_brightness:0,mie_strength:0,rayleigh_strength:0,
scatter_strength:0,mie_collection_power:0,rayleigh_collection_power:0,mie_distribution:0,Tl:new Float32Array(3),Hp:!1,Ep:!1,Fp:0,Jp:0,Ip:0,Gp:0,Fn:0,ssao_only:!1,ssao_white:!1,brightness:0,contrast:0,exposure:0,saturation:0,god_rays_intensity:0,Al:0,rp:0,Ul:0,fr:0,self_shadow_polygon_offset:0,self_shadow_normal_offset:0,aq:null,$p:null,ot:null,qk:null,Gc:!1,fv:"",no:0,ko:0,mo:0,sm:!0,average_luminance:0,Kq:0,vr:0,mb_decay_threshold:0,mb_factor:0,pw:0,rs:"",dof_bokeh:!1,ou:"",yA:new Float32Array(2),
Wv:0,cu:2,lo:.5,small_glow_mask_width:0,large_glow_mask_width:0,small_glow_mask_coeff:0,large_glow_mask_coeff:0,Xs:new Float32Array(2),nc:new Float32Array(2),Uj:new Float32Array(4),chromatic_aberration_coefs:new Float32Array(4),enable_hmd_stereo:!1,gh:0,ds:!0,kx:!1,sx:!1,ox:!1,px:!1,rx:!1,qx:!1,jx:"",Kn:!1,Ln:!1,Mn:!1,Ec:!0,enqueue:!0,Vb:!0,Zb:!0,yd:!0,vb:!0,sf:1};b.nc[0]=1;b.nc[1]=1;b.Uj[2]=.5;b.Uj[3]=.5;b.Fn=8;return b}function p(b,e){return b==e?0:b>e?1:-1}function q(b,e){return p(b.Vf,e.Vf)||
p(b.dk,e.dk)||p(b.Ud,e.Ud)||p(b.ec.OF,e.ec.OF)||p(b.Rk,e.Rk)}var b=Object(O.a)(k),u=Object(T.a)(k),h=Object(G.a)(k).Dd;d.ic=0;d.Kd=1;d.mh=2;d.Ee=3;d.ae=4;d.Dg=5;d.Sf=6;d.De=7;d.be=8;d.Eg=9;d.xj=10;d.Lc=11;d.rq=13;d.Dt=14;d.xf=15;d.Uh=16;d.Vh=17;d.Xn=18;d.KC=19;d.Gt=20;d.My=21;d.FC=22;d.uq=23;d.Et=24;d.Ky=25;d.Ft=26;d.zy=27;d.Ii=28;d.yy=29;d.qq=30;d.Wh=31;d.$n=32;d.Zn=33;d.Bt=34;d.Ue=35;d.Ay=36;d.nh=37;d.LUMINANCE=38;d.IC=39;d.Ct=40;d.mq=41;d.wL=42;d.Uk=43;d.tq=44;d.gD=45;d.Tk=46;d.ao=47;d.xy=48;d.hO=
function(b,e,c,a){var h=m(8);h.fr=b;h.self_shadow_polygon_offset=c.self_shadow_polygon_offset;h.gh=e;switch(c.li[e]){case "SPOT":case "POINT":h.qa=u.kd(u.pd);u.IH(h.qa,c.hI[e],c.Vq[e],c.Uq[e]);break;default:h.qa=u.kd(u.zj)}y(h,a);return h};d.cN=function(b){var e=m(b.type);e.fc=b.fc;e.Rm=b.Rm;e.Ec=b.Ec;e.enqueue=b.enqueue;e.Vb=b.Vb;e.Zb=b.Zb;e.yd=b.yd;e.Qb=b.Qb;e.Gw=b.Gw;e.Cq=b.Cq;e.cp=b.cp;e.vb=b.vb;e.el=0;e.cg=0;e.fl=[];e.debug_view_mode=b.debug_view_mode;e.debug_colors_seed=b.debug_colors_seed;
e.Cu=b.Cu;e.nr=b.nr;e.time=b.time;e.qa=u.rd(b.qa,!0);e.th=r.O(b.th);e.Jm=r.O(b.Jm);e.Hb=r.O(b.Hb);e.Mb=r.O(b.Mb);e.Sh=r.O(b.Sh);e.Fi.set(b.Fi);e.Qd.set(b.Qd);e.re.set(b.re);e.hg.set(b.hg);e.bg.set(b.bg);e.Cp=b.Cp;e.Sg=b.Sg;e.kp=b.kp;e.Xr=r.O(b.Xr);e.jn=r.O(b.jn);e.hn=r.O(b.hn);e.tG=r.O(b.tG);e.te.set(b.te);e.Ce.set(b.Ce);e.Dp.set(b.Dp);e.Ix.set(b.Ix);e.Hx.set(b.Hx);e.Jx.set(b.Jx);e.Bp.set(b.Bp);e.lx=b.lx;e.fu=b.fu;e.tn=b.tn;e.or=b.or;e.en=b.en;e.ti.set(b.ti);e.yg=b.yg;e.Pq=b.Pq;e.Ei.set(b.Ei);e.vj=
b.vj;e.Ng=b.Ng;e.Lj=b.Lj;e.ju.set(b.ju);e.Kj=b.Kj;e.procedural_skydome=b.procedural_skydome;e.use_as_environment_lighting=b.use_as_environment_lighting;e.mie_brightness=b.mie_brightness;e.rayleigh_brightness=b.rayleigh_brightness;e.spot_brightness=b.spot_brightness;e.mie_strength=b.mie_strength;e.rayleigh_strength=b.rayleigh_strength;e.scatter_strength=b.scatter_strength;e.mie_collection_power=b.mie_collection_power;e.rayleigh_collection_power=b.rayleigh_collection_power;e.mie_distribution=b.mie_distribution;
e.Tl.set(b.Tl);e.Hp=b.Hp;e.Ep=b.Ep;e.Fp=b.Fp;e.Jp=b.Jp;e.Ip=b.Ip;e.Gp=b.Gp;e.Fn=b.Fn;e.ssao_only=b.ssao_only;e.ssao_white=b.ssao_white;e.brightness=b.brightness;e.contrast=b.contrast;e.exposure=b.exposure;e.saturation=b.saturation;e.god_rays_intensity=b.god_rays_intensity;e.Al=b.Al;e.rp=b.rp;e.Ul=b.Ul;e.fr=b.fr;e.self_shadow_polygon_offset=b.self_shadow_polygon_offset;e.self_shadow_normal_offset=b.self_shadow_normal_offset;e.aq=r.O(b.aq);e.$p=r.O(b.$p);e.ot=r.O(b.ot);e.qk=r.O(b.qk);e.Gc=b.Gc;e.fv=
b.fv;e.no=b.no;e.ko=b.ko;e.mo=b.mo;e.sm=b.sm;e.average_luminance=b.average_luminance;e.Kq=b.Kq;e.vr=b.vr;e.mb_decay_threshold=b.mb_decay_threshold;e.mb_factor=b.mb_factor;e.pw=b.pw;e.rs=b.rs;e.ou=b.ou;e.dof_bokeh=b.dof_bokeh;e.yA.set(b.yA);e.Wv=b.Wv;e.cu=b.cu;e.lo=b.lo;e.small_glow_mask_width=b.small_glow_mask_width;e.large_glow_mask_width=b.large_glow_mask_width;e.small_glow_mask_coeff=b.small_glow_mask_coeff;e.large_glow_mask_coeff=b.large_glow_mask_coeff;e.sf=b.sf;e.Xs.set(b.Xs);e.nc.set(b.nc);
e.Uj.set(b.Uj);e.chromatic_aberration_coefs.set(b.chromatic_aberration_coefs);e.enable_hmd_stereo=b.enable_hmd_stereo;e.gh=b.gh;e.ds=b.ds;e.kx=b.kx;e.sx=b.sx;e.ox=b.ox;e.px=b.px;e.rx=b.rx;e.qx=b.qx;e.jx=b.jx;e.Kn=b.Kn;e.Ln=b.Ln;e.Mn=b.Mn;return e};d.ZN=function(){var b=m(10);b.qa=u.kd(u.Yh);return b};d.ld=function(h){var e=m(11);e.Vb=!1;e.Zb=!1;e.yd=!1;e.Gc=!0;e.qa=u.kd(u.Wc);e.rs=h;switch(h){case "NONE":e.nc[0]=1;e.nc[1]=1;break;case "GRAYSCALE":e.nc[0]=1;e.nc[1]=1;break;case "X_BLUR":e.nc[0]=1;
e.nc[1]=0;break;case "Y_BLUR":e.nc[0]=0;e.nc[1]=1;break;case "X_GLOW_BLUR":e.nc[0]=1;e.nc[1]=0;break;case "Y_GLOW_BLUR":e.nc[0]=0;e.nc[1]=1;break;case "X_BLOOM_BLUR":e.nc[0]=1;e.nc[1]=0;break;case "Y_BLOOM_BLUR":e.nc[0]=0;e.nc[1]=1;break;case "X_DOF_BLUR":e.nc[0]=1;e.nc[1]=1;break;case "Y_DOF_BLUR":e.nc[0]=1;e.nc[1]=1;break;case "X_ALPHA_BLUR":e.nc[0]=1;e.nc[1]=0;e.sf=3;break;case "Y_ALPHA_BLUR":e.nc[0]=0;e.nc[1]=1;e.sf=3;break;case "X_EXTEND":e.nc[0]=1;e.nc[1]=0;break;case "Y_EXTEND":e.nc[0]=0;e.nc[1]=
1;break;default:b.va("Wrong postprocessing effect: "+h)}return e};d.XN=function(b,e){var c=m(13);c.Vb=!1;c.Zb=!1;c.yd=!1;c.small_glow_mask_coeff=e.Zi.small_glow_mask_coeff;c.large_glow_mask_coeff=e.Zi.large_glow_mask_coeff;c.small_glow_mask_width=e.Zi.small_glow_mask_width;c.large_glow_mask_width=e.Zi.large_glow_mask_width;c.qa=b;c.Gc=!0;return c};d.Im=function(h,e,c,a,f,k,d,p,u){var l=m(h);0==h?(l.Vb=!0,l.Zb=c,l.Qb=!1):1==h?(l.Vb=!1,l.Zb=!1,l.Qb=!0):2==h?(l.Vb=!1,l.Zb=!0,l.Qb=!0):3==h||4==h?(l.Vb=
!0,l.Zb=!0,l.Qb=!1):5==h||6==h?(l.Vb=!1,l.Zb=!1,l.Qb=!0):7==h?(l.Vb=!0,l.Zb=!1,l.Qb=!0):b.va("wrong main subscene type");l.Qb&&p&&(l.self_shadow_normal_offset=p.self_shadow_normal_offset);l.qa=e;if(h=d.Cn)l.Dp.set([h.ND,h.SF,h.sJ,h.rJ]),l.Bp.set(h.color),l.Cp=h.rb;l.te.set(d.te);l.Ce.set(d.Ce);l.Sg=d.Sg;l.re=k.re;l.hg=k.hg;a&&(a.re&&l.Ei.set(a.re),l.vj=a.vj,a.Ng&&u&&(l.Ng=!0,l.Lj=a.GM,l.Kj=a.FM,l.ju.set(a.HM)));y(l,f);return l};d.er=function(){var b=m(14);b.Gc=!0;b.qa=u.kd(u.Wc);return b};d.HE=function(b,
e,c){var a=m(15);e&&(a.type=16,a.Vb=!1,a.Zb=!0);a.enqueue=!1;a.qa=b;y(a,c);return a};d.VN=function(b){var e=m(17);e.Ec=!1;e.Vb=!1;e.Zb=!1;e.qa=b;return e};d.QN=function(b){var e=m(18);e.Vb=!0;e.Zb=!1;e.qa=b;return e};d.iO=function(b,e){var c=m(9);c.qa=b;y(c,e);return c};d.WN=function(b){var e=m(19);e.Vb=!1;e.Zb=!1;e.qa=b;e.Gc=!0;return e};d.kO=function(b,e,c){var a=m(20);a.Vb=!1;a.Zb=!1;a.yd=!1;a.qa=b;a.re=e.re;a.Ei.set(e.re);a.Jp=c.radius_increase;a.Hp=c.wQ;a.Ip=c.influence;a.Gp=c.dist_factor;a.Fn=
c.KS;a.Gc=!0;return a};d.lO=function(b,e){var c=m(21);c.Vb=!1;c.Zb=!1;c.yd=!1;c.qa=b;c.Ep=e.pM;c.Fp=e.blur_discard_value;c.Gc=!0;return c};d.PN=function(b){var e=m(22);e.Vb=!1;e.Zb=!1;e.yd=!1;e.sf=1/b.sp;e.fv=b.sD;e.qa=u.kd(u.Wc);e.Gc=!0;return e};d.uz=function(b,e){var c=m(b);c.Vb=23==b||24==b?!0:!1;c.Zb=!1;c.yd=!1;c.sf=1/e.sp;c.qa=u.kd(u.Wc);23==b&&(c.RQ=new Float32Array(4));c.Gc=!0;return c};d.UN=function(b,e,c,a){var h=m(27);h.Vb=!1;h.Zb=!1;h.yd=!1;h.qa=u.kd(u.Wc);h.brightness=b;h.contrast=e;
h.exposure=c;h.saturation=a;h.Gc=!0;return h};d.cO=function(b,e){var c=m(28);c.Vb=!1;c.Zb=!1;c.yd=!1;c.qa=u.kd(u.Wc);c.Cq=!0;c.mb_decay_threshold=b;c.mb_factor=e;c.Gc=!0;return c};d.qz=function(b,e){var c=m(29);c.Vb=!1;c.Zb=!1;c.yd=!1;c.qa=b;c.sf=c.qa.dof_power;c.ou=e;c.Gc=!0;return c};d.IE=function(b,e){var c=m(30);c.Vb=!1;c.Zb=!1;c.yd=!1;c.qa=b;c.sf=b.dof_power;c.dof_bokeh=e;c.Gc=!0;return c};d.eO=function(b,e){var c=m(31);c.yd=!1;c.qa=b;y(c,e);return c};d.dO=function(b){var e=m(32);h.outlining_overview_mode?
e.ti.set(h.ti):e.ti.set(b.ti);e.tn=b.tn;e.vr=5;e.Kq=3;e.yd=!1;e.qa=u.kd(u.Wc);e.Gc=!0;return e};d.sz=function(b,e,c,a,h,f,k){var l=m(33);l.Vb=!1;l.Zb=!1;l.yd=!1;l.te=new Float32Array([1,1,1]);l.Ce=new Float32Array([1,1,1]);l.Sg=1;l.Gw=a;l.yg=e;l.rp=h;l.Al=c;l.Ul=k;l.qa=b;y(l,f);return l};d.YN=function(b,e){var c=m(34);c.Vb=!1;c.Zb=!1;c.yd=!1;c.qa=u.kd(u.Wc);c.god_rays_intensity=b;y(c,e);c.Gc=!0;return c};d.jO=function(b,e,c,a){var h=m(35);h.enqueue=!1;h.Vb=!1;h.Zb=!1;h.yd=!1;var f=u.kd(u.Wc);f.width=
a;f.height=a;h.qa=f;h.th=r._5();y(h,e);h.te=new Float32Array([1,1,1]);h.Ce=new Float32Array([1,1,1]);h.Sg=1;h.Tl.set(c.Tl);h.procedural_skydome=c.procedural_skydome;h.use_as_environment_lighting=c.use_as_environment_lighting;h.rayleigh_brightness=c.rayleigh_brightness;h.mie_brightness=c.mie_brightness;h.spot_brightness=c.spot_brightness;h.scatter_strength=c.scatter_strength;h.rayleigh_strength=c.rayleigh_strength;h.mie_strength=c.mie_strength;h.rayleigh_collection_power=c.rayleigh_collection_power;
h.mie_collection_power=c.mie_collection_power;h.mie_distribution=c.mie_distribution;if(b){h.te.set(b.te);h.Ce.set(b.Ce);h.Sg=b.Sg;if(e=b.Cn)h.Dp.set([e.ND,e.SF,e.sJ,e.rJ]),h.Bp.set(e.color),h.Cp=e.rb,h.kx=e.invert,h.sx=e.ZI,h.ox=e.UI,h.px=e.VI,h.rx=e.XI,h.qx=e.WI,h.jx=e.OD;h.Kn=b.Kn;h.Ln=b.Ln;h.Mn=b.Mn;h.lx=b.Le}return h};d.$N=function(b,e){var c=m(46);c.enqueue=!1;c.Vb=!1;c.Zb=!1;c.yd=!1;var a=u.kd(u.Wc);a.width=e;a.height=e;c.qa=a;c.th=r._5();y(c,b);return c};d.gO=function(b){var e=m(47);e.enqueue=
!1;e.Vb=!1;e.Zb=!1;e.yd=!1;var c=u.kd(u.Wc);c.width=128;c.height=128;e.qa=c;e.th=r._5();y(e,b);return e};d.TN=function(){var b=m(48);b.enqueue=!1;b.Vb=!1;b.Zb=!1;b.yd=!1;var e=u.kd(u.Wc);e.width=512;e.height=512;b.qa=e;return b};d.rz=function(){var b=m(36);b.Vb=!1;b.Zb=!1;b.qa=u.kd(u.Wc);b.Gc=!0;return b};d.mO=function(b,e){var c=m(37);c.Vb=!1;c.Zb=!1;c.fc=b?"HMD":e?"ANAGLYPH":"SIDEBYSIDE";c.qa=u.kd(u.Wc);c.Gc=!0;return c};d.aO=function(){var b=m(38);b.Vb=!1;b.Zb=!1;b.qa=u.kd(u.Wc);b.Gc=!0;return b};
d.RN=function(){var b=m(39);b.Vb=!1;b.Zb=!1;b.qa=u.kd(u.Wc);b.Gc=!0;return b};d.HN=function(){var b=m(45);b.Vb=!1;b.Zb=!1;b.qa=u.kd(u.Wc);b.Gc=!0;return b};d.bO=function(b,e,c,a){var h=m(40);h.Vb=!1;h.Zb=!1;h.no=b;h.mo=e;h.qa=a;y(h,c);h.Gc=!0;return h};d.SN=function(b){var e=m(41);e.Vb=!1;e.Zb=!1;e.qa=u.kd(u.Wc);e.ko=b;e.cu=5;e.Gc=!0;return e};d.HW=function(b){var e=m(42);e.Vb=!1;e.Zb=!1;e.qa=b;e.Gc=!0;return e};d.JE=function(){var b=m(43);b.enqueue=!1;return b};d.fO=function(){var b=m(44);b.Gc=!0;
return b};d.Gx=function(b){switch(b.type){case 0:return"MAIN OPAQUE";case 1:return"MAIN BLEND";case 2:return"MAIN XRAY";case 3:return"MAIN PLANE REFLECT";case 4:return"MAIN CUBE REFLECT";case 5:return"MAIN PLANE REFLECT BLEND";case 6:return"MAIN CUBE REFLECT BLEND";case 7:return"MAIN GLOW";case 8:return"SHADOW CAST";case 9:return"SHADOW RECEIVE";case 10:return"GRASS MAP";case 11:return"POSTPROCESSING ("+b.rs.replace(/_/g," ")+")";case 13:return"GLOW COMBINE";case 14:return"RESOLVE";case 15:return"COLOR PICKING";
case 16:return"COLOR PICKING XRAY";case 17:return"DEBUG VIEW";case 18:return"ANCHOR VISIBILITY";case 19:return"DEPTH PACK";case 20:return"SSAO";case 21:return"SSAO BLUR";case 22:return"ANTIALIASING";case 23:return"SMAA BLENDING WEIGHT CALCULATION";case 24:return"SMAA EDGE DETECTION";case 25:return"SMAA RESOLVE";case 26:return"SMAA NEIGHBORHOOD BLENDING";case 27:return"COMPOSITING";case 28:return"MOTION BLUR";case 29:return"COC";case 30:return"DOF";case 31:return"OUTLINE MASK";case 32:return"OUTLINE";
case 33:return"GOD RAYS";case 34:return"GOD RAYS COMBINE";case 35:return"SKY";case 46:return"IRRADIANCE";case 47:return"ROUGHNESS_CONVOLUTION";case 48:return"PRE-COMPUTE_BRDF";case 36:return"COPY";case 37:return"STEREO";case 38:return"LUMINANCE";case 39:return"AVERAGE LUMINANCE";case 40:return"LUMINANCE TRUNCED";case 41:return"BLOOM";case 42:return"VELOCITY";case 44:return"PERFORMANCE";case 43:return"SINK";case 45:return"RESIZE";default:return"UNKNOWN"}};d.xd=function(b,e){for(var c=e.hb,a=c.ec,h=
c.Vf,f=0;f<b.Hb.length;f++){var k=b.Hb[f].ub,l=k.indexOf(e);if(-1!=l&&(k.splice(l,1),!k.length)){b.Hb.splice(f,1);break}}f=b.Qb?c.Ud:0;a:{k=b.Hb;for(l=0;l<k.length;l++){var d=k[l];if(d.ec==a&&d.Vf==h&&d.Ud==f&&d.dk==c.dk){k=d;break a}}k=null}k?k.ub.push(e):(b.Hb.push({ec:a,ub:[e],Vf:h,Ud:f,dk:c.dk,Ec:!0,Rk:Infinity}),b.ds=!0)};d.bj=function(b,e,c){e={Ec:!0,Ez:[!0,!0,!0,!0,!0,!0],ah:e,hb:b,yt:c||null,Lv:null,Rk:Infinity};b.Rf&&b.Za.Je&&(c=b.Za.Je,e.Lv={DR:new Float32Array(c.length),ER:new Float32Array(c.length),
EO:new Float32Array(c.length/3),tJ:new Float32Array(3),lM:f.m(b.Yb.zf)});return e};d.HT=function(b){b.Hb.sort(q);b.ds=!1}});t.a=d},function(E,t,d){E=d(0);var O=d(37),T=d(5),G=d(16),r=d(25),f=d(14),k=d(4),y=d(58),x=d(15),m=d(30),p=d(20),q=d(57),b=d(74),u=d(52),h=d(8),l=d(47),e=d(19),c=d(1),a=d(63),ca=d(9),la=d(10),v=d(11),B=d(23),C=d(17),L=d(18),H=d(13),I=d(6),da=d(2),N=d(3),U=d(56),K=d(55),D=d(22);d=Object(E.a)("__objects",function(d,V){function F(a){var c=a.Ba;a=a.ka;for(var b=0;b<c.length;b++){var g=
c[b].Kb;g.sa.outline&&a.lj&&fa.BS(g)}}function z(a){a.ka.lj=0;a=ba.indexOf(a);-1!=a&&ba.splice(a,1)}function w(a){if(a.Bo)for(var c=a.Ba,b=0;b<c.length;b++)fa.JI(c[b].Kb,a)}function R(a,c){for(var b=a.Ba,g=c.Ba,e=0;e<b.length;e++){for(var h=!1,f=0;f<g.length;f++)if(b[e].Kb==g[f].Kb){h=!0;break}h||A(c,b[e].Kb)&&pa.St(c,b[e].Kb)}}function A(a,c){return!c.rD&&"SPEAKER"==a.type||!c.BL&&"LAMP"==a.type?!1:!0}function n(a){var c=a.b4w_do_not_batch,b=a.b4w_collision,e=a.b4w_vehicle,h=a.b4w_floating,f=a.b4w_character,
k=ia.rQ(a),l=xa.SD(a),n=0<a.data.b4w_shape_keys.length,w=a.b4w_dynamic_geometry,z=g(a);if(!(c=Q.RD(a)||c||b||e||n||h||k||f||l||w))a:{a=a.data;for(c=0;c<a.materials.length;c++)if(b=a.materials[c],b.Ra.ej||b.cj||ka(b.ke)){c=!0;break a}c=!1}return c||z}function g(a){var c=!1,b=a.constraints.length;if(b){for(var g=null,b=b-1;0<=b;b--){var e=a.constraints[b];if("LOCKED_TRACK"!=e.type||"REFLECTION PLANE"!=e.name){g=e;break}}if(!g||!g.target)return!1;a=g.target;g=a.type;if(a.parent)return g=a.parent.type,
"MESH"==g?c=c||n(a.parent):"EMPTY"==g?c=c||ea(a.parent):c=!0,c;"MESH"==g?c=c||n(a):"EMPTY"==g?c=c||ea(a):c=!0}return c}function ea(a){var c=xa.SD(a),b=a.b4w_do_not_batch,e=!!a.b4w_anchor,h=g(a);return Q.RD(a)||c||b||e||h}function ka(a){if(!a)return!1;a=a.nodes;for(var c=0;c<a.length;c++){var b=a[c];if("VECT_TRANSFORM"==b.type){var g=b.convert_from,e=b.convert_to,h=b.outputs[0];if(!(!h.is_linked||"WORLD"==g&&"CAMERA"==e||"CAMERA"==g&&"WORLD"==e||"OBJECT"==g&&"OBJECT"==e))return!0}if("NORMAL_MAP"==
b.type&&(g=b.space,h=b.outputs[0],h.is_linked&&("OBJECT"==g||"BLENDER_OBJECT"==g))||"TEX_COORD"==b.type&&b.outputs[3].is_linked||"OBJECT_INFO"==b.type&&(h=b.outputs[1],g=b.outputs[3],b.outputs[0].is_linked||h.is_linked||g.is_linked))return!0}return!1}function wa(a){if(aa(a,ya.ALL,!1,-1)){for(var c=1,b;;){b="."+(3>String(c).length?("000"+String(c)).slice(-3):String(c));if(!aa(a+b,ya.ALL,!1,-1))break;c++}ra.error('Object "'+a+'" already exists. Name was replaced by "'+a+b+'".');return b}return""}function M(a,
c,b){c=ya[c]||[];for(var g=[],e=0;e<c.length;e++){var h=c[e];if(h.ka.He==b||-1==b)for(var f=h.Ba,k=0;k<f.length;k++)f[k].Kb==a&&g.push(h)}return g}function t(a,c){var b=ya[a]||[];if(-1==c)return b;for(var g=[],e=0;e<b.length;e++){var h=b[e];h.ka.He==c&&g.push(h)}return g}function Z(a,c,b,g){for(var e=0;e<a.Ba.length;e++)for(var h=a.Ba[e].Ia,f=0;f<h.length;f++){var k=h[f];k.Za&&(k.Za.sh=c);k.sh=c;k.ec&&(k.ec.sh=b);Ba.US(g)}}function aa(a,c,b,g,e){for(var h=null,f=0;f<c.length;f++){var k=c[f];if(!((b?
k.le:k.name)!=a||k.ka.He!=g&&-1!=g||e&&k.vl||(h=k,pa.get_dg_parent(h))))break}return h}function oa(a){ya.ALL.push(a);ya[a.type]||(ya[a.type]=[]);ya[a.type].push(a);var c=a.ka.ue;if(null!=c)for(var b=0;b<sa.length;b++){var g=sa[b];g.ka.ue==c&&g.zs.push(a)}}function ja(a,c,b){if(!c.ck)return!0;a=a.yl;if(a.Ui!=a.Bf)if(a.lt){var g=da._49(a.Ui-a.Bf);a.Bf+=g*Sa.KP()/.4;a.Bf=da.M(a.Bf,0,1)}else a.Bf=a.Ui;g="STATIC"==c.type?c.Zr:N.add(c.Xe.Da,c.iw,va);b=N.dist(g,b);0==a.No?(g=Math.max(c.Xg-a.Mo/2,0),c=c.Wg+
a.Lo/2):-1==a.No?(g=c.Xg+a.Mo/2,c=c.Wg+a.Lo/2):(g=Math.max(c.Xg-a.Mo/2,0),c=Math.max(c.Wg-a.Lo/2,0));a.No=b<g?-1:b<c?0:1;a.Ui=b<g||b>c?0:1;a.nu=a.Ui?1:-1;Math.abs(b-a.Mw)>S.lod_leap_smooth_threshold&&(0==a.Bf||1==a.Bf)&&(a.Bf=a.Ui);a.Mw=b;return!!a.Ui||0!=a.Bf}function Ia(a,c){Z(a,!0,!1,!0);for(var b=t("ALL",-1),g=0;g<b.length;g++){var e=b[g];e!=a&&Z(e,!1,!1,!1)}fa.uH(a,c);for(g=0;g<a.Ba.length;g++)for(e=a.Ba[g].Ia.length-1;0<=e;e--){var h=a.Ba[g].Ia[e];0!=h.Hc.length&&-1==h.Hc.indexOf(c)||pa.AH(a.Ba[g],
e)}na.ab(a)&&na.remove_object(a);for(g=0;g<b.length;g++)b[g]!=a&&Z(b[g],!0,!0,!0);Q.zO(a,c);b=a.Vk.qb;a.Vk.qb=a;return b}function Ca(a,c){a.Vk.qb=c;Z(a,!0,!0,!0)}function Ja(a,c,b,g){var e=b.Hf.Fl.indexOf(g);c=a.Sc[a.Hf.Fl.indexOf(c)];b.Sc[e]=c;a=c.name;c.name=g;for(g=0;g<b.Sc.length;g++)b.Hf.bn[g]=g!=e;return a}function Ma(a,c,b,g){for(var e=0;e<b.Sc.length;e++)b.Hf.bn[e]=!1;a.Sc[a.Hf.Fl.indexOf(c)].name=g}function X(a,c,b,g,e){for(var h=1;h<a.ka.og.length;h++)P.Uy(a,a.ka.og[h].name,a.ka.og[h].value);
if(Q.is_animated(a))for(h=0;h<a.Xa.length;h++){var f=a.Xa[h];if(f)switch(f.type){case Q.OBJ_ANIM_TYPE_PARTICLES:Q.set_frame(a,Q.Tz(a,h),h);break;case Q.OBJ_ANIM_TYPE_MATERIAL:if(f.ip)for(var k=f.ip.length-1;0<=k;k--)-1!=f.ip[k].Hc.indexOf(c)&&f.ip.splice(k,1)}}g&&Ba.xA(a,c,function(c){if(c.sb){var b=c.sb.name;if(g[b]){var e=c.sb.po!=g[b].po;c.sb=ia.sE(g[b]);e&&ia.set_factor(a,b,c.sb.po)}}},"PARTICLES");e&&(h=Ba.$b(a,c,"MAIN"))&&(h.Qc.set(e.Qc),h.Ie=e.Ie,h.Vi=e.Vi,h.ee.set(e.ee),h.Qe.set(e.Qe),h.Dk=
e.Dk,h.rf.set(e.rf),h.pg=e.pg,h.fe=e.fe,h.ce=e.ce,h.ph=e.ph,h.nn=e.nn,h.jp=e.jp,h.reflect_factor=e.reflect_factor,h.Nh=e.Nh,h.ii.set(e.ii),h.parallax_scale=e.parallax_scale,h.Rh.set(e.Rh),h.shallow_water_col.set(e.shallow_water_col),h.shallow_water_col_fac=e.shallow_water_col_fac,h.shore_water_col.set(e.shore_water_col),h.shore_water_col_fac=e.shore_water_col_fac,h.foam_factor=e.foam_factor,h.km=e.km,h.ri=e.ri.slice(),h.Me=e.Me.slice());Ba.xA(a,c,function(c){for(var g=0;g<c.Zf.length;g++){var e=c.Zf[g],
h=c.Ua[g];if("IMAGE"==h.source||"ENVIRONMENT"==h.source){var f=Ga.sv(b,e);f&&h.pl!=f.pl&&Ga.qT(a,e,f)}}})}var Q=Object(O.a)(d),Aa=Object(T.a)(d),Ba=Object(G.a)(d),E=Object(f.a)(d),Ra=Object(k.a)(d),ta=Object(y.a)(d),ha=Object(x.a)(d),ga=Object(m.a)(d),P=Object(p.a)(d),xa=Object(u.a)(d),pa=Object(h.a)(d),ia=Object(l.a)(d),na=Object(e.a)(d),ra=Object(c.a)(d),Fa=Object(a.a)(d),fa=Object(la.a)(d),Za=Object(v.a)(d),Da=Object(B.a)(d),Ga=Object(C.a)(d),Sa=Object(L.a)(d),Pa=Object(H.a)(d),La=Object(K.a)(d),
za=Object(D.a)(d),S=Ra.wa,Ua=Ra.Dd,ya={ALL:[]},bb=0,Xa=0,sa=[],ba=[],va=new Float32Array(3),Ha=new Float32Array(4);V.Fy=0;V.Ey=1;V.ne=2;V.DATA_ID_ALL=-1;V.update=function(a){for(var c=0;c<ba.length;c++){var b=ba[c],g=b,e=a,h=0,f=g.cH;0==f.Rx&&(f.Rx=e);e-=f.Rx;if(f.tB&&e/f.dh>=f.tB)z(g);else{e%=f.dh;if(e<f.eB)switch(f=e/(f.eB/5),e=Math.floor(f),e){case 0:h=(f-e)/2;break;case 1:h=(f-e)/2+.5;break;case 2:h=1;break;case 3:h=1-(f-e)/2;break;case 4:h=.5-(f-e)/2}g.ka.lj=h}b.ka.lj&&F(b)}if(a=ya.ARMATURE)for(c=
0;c<a.length;c++)b=a[c],b.WA&&(Pa.Ea(b),b.WA=!1)};V.set_outline_intensity=function(a,c){a.ka.lj=c;F(a)};V.apply_outline_anim=function(a,c,b,g){var e=a.cH;e.Rx=0;e.eB=c;e.dh=b;e.tB=g;-1==ba.indexOf(a)&&ba.push(a)};V.clear_outline_anim=z;V.FE=function(a,c){var b=pa.dr(c?"%meta_world%"+a.name:a.name,c?"WORLD":a.type,c?"%meta_world%"+a.name:a.origin_name);if("MESH"==b.type)for(var g=0;g<a.data.materials.length;g++)b.Sc.push(a.data.materials[g]);for(g=0;g<a.oe.length;g++)pa.St(b,a.oe[g]);a.qb=b;if(c)b.nd=
a.uuid,b.vl=!1,b.Lm=a.fo,b.is_dynamic=a.Bj,b.ka=pa.qo(b.type),b.jt=a.b4w_use_default_animation,b.vm=Q.Sy(a.b4w_anim_behavior);else{b.nd=a.uuid;b.vl=!1;b.Lm=a.fo;b.is_dynamic=a.Bj;b.Or=a.qD||!1;b.jg=a.b4w_vehicle;b.is_character=a.b4w_character;b.dn=a.b4w_floating;b.Jn=a.b4w_collision;b.Rb=a.b4w_collision_id;b.tu=a.b4w_correct_bounding_offset;g=a.game;b.Ed={rk:g.physics_type,Di:g.use_ghost,$I:g.use_sleep,lf:g.mass,rt:g.velocity_min,qt:g.velocity_max,hr:g.damping,Es:g.rotation_damping,nR:g.lock_location_x,
oR:g.lock_location_y,pR:g.lock_location_z,qR:g.lock_rotation_x,rR:g.lock_rotation_y,sR:g.lock_rotation_z,Ze:g.collision_margin,Ye:g.collision_group,$e:g.collision_mask,vC:g.use_collision_bounds,pu:g.collision_bounds_type,Wp:g.use_collision_compound};if(g=a.b4w_vehicle_settings)b.ug={name:g.name,mg:g.part,bU:g.suspension_rest_length,ZB:g.suspension_compression,aC:g.suspension_stiffness,$B:g.suspension_damping,EC:g.wheel_friction,zB:g.roll_influence,JA:g.max_suspension_travel_cm,yr:g.force_max,Nq:g.brake_max,
Lp:g.steering_max,Zo:g.max_speed_angle,kr:g.delta_tach_angle,Ss:g.speed_ratio,Us:g.steering_ratio,Nr:g.inverse_control,Pm:g.floating_factor,Sn:g.water_lin_damp,Tn:g.water_rot_damp,rI:g.synchronize_position};if(g=a.b4w_floating_settings)b.Do={name:g.name,mg:g.part,Pm:g.floating_factor,Sn:g.water_lin_damp,Tn:g.water_rot_damp,rI:g.synchronize_position};if(g=a.b4w_character_settings)b.bE={iV:g.walk_speed,IS:g.run_speed,VT:g.step_height,UQ:g.jump_strength,lV:g.waterline};for(g=0;g<a.constraints.length;g++){var e=
a.constraints[g];"RIGID_BODY_JOINT"==e.type&&b.lB.push({target:e.target.qb,cS:e.pivot_type,dS:e.pivot_x,eS:e.pivot_y,fS:e.pivot_z,Ab:e.axis_x,Bb:e.axis_y,Cb:e.axis_z,YU:e.use_limit_x,ZU:e.use_limit_y,$U:e.use_limit_z,UU:e.use_angular_limit_x,VU:e.use_angular_limit_y,WU:e.use_angular_limit_z,fR:e.limit_max_x,gR:e.limit_max_y,hR:e.limit_max_z,iR:e.limit_min_x,jR:e.limit_min_y,kR:e.limit_min_z,$Q:e.limit_angle_max_x,aR:e.limit_angle_max_y,bR:e.limit_angle_max_z,cR:e.limit_angle_min_x,dR:e.limit_angle_min_y,
eR:e.limit_angle_min_z})}g=b.ka=pa.qo("MESH"===b.type?b.is_dynamic?"DYNAMIC":"STATIC":b.type);a.parent?(b.parent=a.parent.qb,"BONE"==a.parent_type&&"ARMATURE"==a.parent.type&&(b.hs=a.parent_bone),a.pinverse_tsr&&(b.Kw=I.b(),I.a(a.pinverse_tsr,b.Kw))):a.dg_parent&&(b.parent=a.dg_parent.qb,b.Kl=!0);var e=a.location,h=a.scale[0];da._28(a.rotation_quaternion,Ha);Pa.set_translation(b,e);Pa.set_rotation(b,Ha);Pa.set_scale(b,h);b.jt=a.b4w_use_default_animation;b.vm=Q.Sy(a.b4w_anim_behavior);a.b4w_object_tags&&
(b.nw={title:a.b4w_object_tags.title,description:a.b4w_object_tags.description,category:a.b4w_object_tags.category});b.zu=a.b4w_custom_prop;a.b4w_viewport_alignment&&(b.my={EL:a.b4w_viewport_alignment.alignment,distance:a.b4w_viewport_alignment.distance});g.hide=a.b4w_hidden_on_load;g.QF=a.b4w_hide_chldr_on_load;switch(a.type){case "ARMATURE":U.e(a,b);e=g.Mg;h=Q.AM(e);a.b4w_animation_mixing?(g.we=new Float32Array(h.tc),g.pf=new Float32Array(h.tc),g.Be=new Float32Array(h.trans),g.uf=new Float32Array(h.trans)):
(g.we=h.tc,g.pf=h.tc,g.Be=h.trans,g.uf=h.trans);for(var f in e){var k=e[f];1==k.lu.length&&U.d(k,!0,h.trans,h.tc)}g.ps=h;g.ig=0;g.Ej=a.b4w_animation_mixing;break;case "MESH":g.Hj=Ba.kM(a.data.b4w_boundings.bb);b.$F=a.data.is_boundings_overridden;g.bf=a.b4w_do_not_render;g.Pl=Ua.outlining_overview_mode||a.b4w_selectable;g.Cw=a.b4w_selectable;g.Dd=Ua.outlining_overview_mode||a.b4w_outlining;g.Bw=a.b4w_outlining;g.Dw=Ua.outlining_overview_mode||a.b4w_outline_on_select;g.qh=a.b4w_billboard;g.Hq=a.b4w_pres_glob_orientation;
g.Jq="BASIC";g.Iq="SPHERICAL"==a.b4w_billboard_geometry;f=g.kj;f.Gl=a.b4w_outline_settings.outline_duration;f.Hl=a.b4w_outline_settings.outline_period;f.Il=a.b4w_outline_settings.outline_relapses;g.Pl&&(g.al=ga.mF(bb),bb++);for(f=0;f<a.data.b4w_vertex_anim.length;f++)e=a.data.b4w_vertex_anim[f],b.Jd.push({name:e.name,jb:e.frame_start,Sb:e.frame_end,rW:e.averaging,sW:e.averaging_interval,FL:e.allow_nla});b.ka.Jd=b.Jd.length?!0:!1;"MESH"!=a.type&&Aa.va("Wrong object type: "+a.name);f=b.ka;if(a.data.b4w_shape_keys.length)for(f.Of=
!0,e=0;e<a.data.b4w_shape_keys.length;e++)h={},h.value=a.data.b4w_shape_keys[e].value,h.name=a.data.b4w_shape_keys[e].name,f.og.push(h);else f.Of=!1;g.Lf=a.b4w_shadow_cast;g.ze=a.b4w_shadow_receive;g.qf=a.b4w_shadow_cast_only&&g.Lf;g.Oe=a.b4w_reflexible;g.xe=a.b4w_reflexible_only&&g.Oe;g.Fd=a.b4w_reflective;g.Mh=a.b4w_reflection_type;if(!g.Fd)for(f=b.Sc,e=0;e<f.length;e++)h=f[e],!h.kh||-1==h.ke.wq.indexOf("BSDF_GLOSSY")&&-1==h.ke.wq.indexOf("BSDF_DIFFUSE")&&-1==h.ke.wq.indexOf("BSDF_PRINCIPLED")||
(b.ka.Fd=!0,b.ka.Mh="PBR");g.Ng=a.b4w_caustics;if(g.wf=a.b4w_wind_bending)g.Wn=a.b4w_wind_bending_angle,f=Ba.nJ(da.T(a.b4w_wind_bending_angle),g.Hj,a.scale[0]),g.zg=f,g.Ag=a.b4w_wind_bending_freq,g.fg=a.b4w_detail_bending_freq,g.eg=a.b4w_detail_bending_amp,g.$f=a.b4w_branch_bending_amp,g.jk=a.b4w_main_bend_stiffness_col,f=a.b4w_detail_bend_colors,g.Cf.BA=f.leaves_stiffness_col,g.Cf.AA=f.leaves_phase_col,g.Cf.fB=f.overall_stiffness_col;g.cf=a.b4w_dynamic_geometry;if(g.cf)for(b.Vk=a,f=0;f<b.Sc.length;f++)b.Hf.Fl.push(b.Sc[f].name),
b.Hf.bn.push(!1);f=b.Sc[0];g.se=f.Ed.se;g.uh=f.Ed.uh;g.Xg=0;g.Wg=pa.Hy;g.mj=a.pass_index;break;case "LINE":g.eb=r.w();g.jc=r.y();g.ai=r.w();g.Yk=r.y();break;case "CAMERA":E.EM(a,b);E.bM(b);break;case "LAMP":q.a(a,b);break;case "SPEAKER":b.Qa=Da.IN();g=!1;for(f=0;f<b.Ba.length;f++)if(b.Ba[f].Kb.wd){g=!0;break}g&&Da.Yx(a,b);break;case "EMPTY":f=r.w(),g.eb=f,f=r.A(),g.Xc=f,a.field&&(b.Bo={type:a.field.type,lI:a.field.strength}),a.b4w_anchor&&(b.anchor={type:a.b4w_anchor.type,xo:a.b4w_anchor.detect_visibility,
hl:a.b4w_anchor.element_id,BR:a.b4w_anchor.max_width})}}oa(b);return b};V.CU=function(a,b){var c=b.ka;if("MESH"==b.type){var g=Q.wF(a);if(g){var e=g.qb,h=e.ka.ps,f=b.ka,k=a.data;b.Vt=e;k=k.vertex_groups;if(k.length){var e=e.ka.Mg,l=0,n={},w;for(w in e){var J=da._18("name",w,k);J&&(n[w]={eJ:J.index,Ni:e[w].Ni,Az:l++})}f.Oi=n;w=l;k=Q.BF();f.mi=w;w>2*k?(f.wl=!1,ra.error('too many bones for "'+a.name+'" / '+f.mi+" bones (max "+k+" with blending, "+2*k+" without blending). Skinning will be disabled.")):
f.wl=!0}h=Q.UO(h.trans,h.tc,c.Oi);g.b4w_animation_mixing?(c.we=new Float32Array(h.tc),c.pf=new Float32Array(h.tc),c.Be=new Float32Array(h.trans),c.uf=new Float32Array(h.trans)):(c.we=h.tc,c.pf=h.tc,c.Be=h.trans,c.uf=h.trans);c.Aq=new Float32Array(4);c.zq=ca.create();c.ps=h;c.ig=0}if(c.Fd)if(c=b.ka,"CUBE"==c.Mh)c.Ge=Xa++;else if("PLANE"==c.Mh){a:{g=a.constraints;for(h=0;h<g.length;h++)if(f=g[h],"LOCKED_TRACK"==f.type&&"REFLECTION PLANE"==f.name){if(f.target&&f.target.qb){g=f.target.qb;break a}ra.warn('Reflection plane target for object: "'+
b.name+"\" is not present on the scene. Using object's Z-axis.")}g=null}g||(g=ga.et("%reflection%"),g=pa.dr(g,"EMPTY"),h=pa.qo("EMPTY"),g.ka=h,R(b,g),ta.AD(g,b,[0,0,0],null,1),oa(g));h=null;for(f=0;f<sa.length;f++)if(sa[f]==g){h=f;break}null==h&&(h=sa.length,sa.push(g));g.ka.ue=h;c.ue=h;g.zs.push(b)}}};V.vU=w;V.EW=R;V.MM=A;V.DU=function(a){for(var b=0;b<a.length;b++){var c=a[b];!c.ka||"DYNAMIC"!=c.ka.type&&"CAMERA"!=c.ka.type||Pa.Ea(c);c.jt&&Q.$G(c)&&(Q.apply_def(c),c.Xa.length&&Q.play(c,null,Q.SLOT_ALL))}};
V.TD=function(a){if(a.b4w_hidden_on_load||a.dg_parent&&a.dg_parent.Bj||a.parent&&a.parent.Bj)return!0;switch(a.type){case "MESH":return n(a);case "EMPTY":return ea(a);default:return!0}};V.get_meta_tags=function(a){return da.O(a.nw)};V.get_custom_prop=function(a){return a.zu};V.cleanup=function(){Xa=bb=0;sa.length=0;ba.length=0;ya={ALL:[]}};V.copy=function(a,c,g){var e=pa.get_dg_parent(a),e=e?pa.nF(e.name,c):c,h=wa(e);c=pa.dr(e+h,a.type,c+h);c.vl=a.vl;c.Vk=a.Vk;c.Hf.Fl=pa.br(a.Hf.Fl);c.Hf.bn=pa.br(a.Hf.bn);
c.is_dynamic=a.is_dynamic;c.Or=a.Or;c.jt=a.jt;c.Lm=a.Lm;c.ka=pa.iz(a.ka);c.ka.ck=!1;c.nw=pa.cr(a.nw);c.zu=pa.cr(a.zu);R(a,c);c.ho=pa.br(a.ho);c.parent=pa.br(a.parent);c.Kl=a.Kl;c.hs=a.hs;c.Jd=pa.br(a.Jd);c.vm=a.vm;!a.xa||a.jg||a.is_character||a.dn||(c.Jn=a.Jn,c.xa=null);c.Rb=a.Rb;c.tu=a.tu;c.Ed=pa.cr(a.Ed);e=[];for(h=0;h<a.Ba.length;h++){var f=c.Ba[h],k=a.Ba[h].Ia;if(g){for(var l=f.Ia,n=0;n<k.length;n++)if(!k[n].yh){var w=pa.cr(k[n]);w.Za=P.$M(k[n].Za);pa.Ig(c,f.Kb,w);e.push(k[n].Za)}for(n=0;n<k.length;n++)if(k[n].yh){w=
pa.cr(k[n]);pa.Ig(c,f.Kb,w);for(var z=0;z<e.length;z++)e[z]==k[n].Za&&(w.Za=l[z].Za)}for(n=0;n<l.length;n++)l[n].Za&&P.sC(l[n].Za),S.Qy&&l[n].Za&&za.eM(l[n]),l[n].El=Ba.sP(l[n],c.ka,c.nd),Ba.lU(l[n]);Ga.BT(l)}else for(n=0;n<k.length;n++)pa.Ig(c,f.Kb,k[n])}for(e=0;e<a.Sc.length;e++)c.Sc.push(b.a(a.Sc[e]));pa.EB(c,!1);oa(c);c.ka.tA=!0;c.ka.Ov=g;c.ka.al=ga.mF(bb);bb++;return c};V.xF=function(a,c){var b=[],g=a.animation_data,e=a.data?a.data.animation_data:null;g&&g.action&&(g=g.action,(g.sa.type==Q.OBJ_ANIM_TYPE_OBJECT||
g.sa.type==Q.OBJ_ANIM_TYPE_ARMATURE&&"ARMATURE"==a.type||g.sa.type==Q.wK&&"LAMP"==a.type||g.sa.type==Q.vK&&c)&&b.push(Q.VF(null,g)));e&&e.action&&("SPEAKER"==a.type||"LAMP"==a.type)&&b.push(Q.VF(null,e.action));"MESH"==a.type&&b.push.apply(b,Q.yP(a));c&&b.push.apply(b,Q.zP(a));return b};V.update_boundings=function(a){for(var c=a.ka,b=null,g=a.Ba[0].Ia,e=0;e<g.length;e++){var h=g[e],f=a.Ba[0].Lg[e];if(h.Za&&f.Yf&&f.zf){var k=P.Io("a_position");if(k=P.Zz(h.Za.Pc,k)){var l=h.Za.mc.a_position.offset,
n=h.Za.mc.a_position.length+l;Ba.xU(h,k.subarray(l,n));pa.RI(h,c.na,f);"MAIN"==h.type&&(b?r.D(b,h.Yb.zf):b=r.n(h.Yb.zf))}}}b=b||r.w();if(c.qh)pa.MI(a,b);else{f=[];for(e=0;e<g.length;e++)if(h=g[e],"MAIN"==h.type&&(k=P.Io("a_position"),k=P.Zz(h.Za.Pc,k)))h=g[e].Za.mc,l=h.a_position.offset,n=h.a_position.length+l,f.push(k.subarray(l,n));pa.IU(a,b,f)}if(S.debug_view)for(e=0;e<g.length;e++)if("DEBUG_VIEW"===g[e].type&&g[e].Tj){a=c.jc;c=Fa.Oz(1,a.Da);P.zH(c,[a.Ab[0],a.Bb[1],a.Cb[2]],a.Da);P.Ex(c,1,!0);
c.gb.a_polyindex=P.Vu(c);Ba.FI(g[e],c);break}};V.Fc=M;V.FF=function(a,c,b){c=ya[c]||[];for(var g=[],e=0;e<c.length;e++){var h=c[e];if(!(h.ka.He!=b&&-1!=b||h.vl))for(var f=h.Ba,k=0;k<f.length;k++)f[k].Kb==a&&g.push(h)}return g};V.get_all_objects=t;V.get_first_character=function(a){var c=ya.MESH;if(c)for(var b=0;b<c.length;b++){var g=c[b];if(na.NF(g))for(var e=g.Ba,h=0;h<e.length;h++)if(e[h].Kb==a)return g}return null};V.mp=Z;V.get_selectable_objects=function(){var a=[],c=ya.MESH;if(c)for(var b=0;b<
c.length;b++){var g=c[b];g.ka.Pl&&!g.vl&&a.push(g)}return a};V.get_outlining_objects=function(){var a=[],c=ya.MESH;if(c)for(var b=0;b<c.length;b++){var g=c[b];g.ka.Dd&&!g.vl&&a.push(g)}return a};V.Bd=function(a,c,b,g){var e=null,h=ya.ALL;switch(a){case V.Fy:e=aa(c,h,!0,b,g);break;case V.Ey:a:{for(a=0;a<h.length;a++)if(e=h[a],e.le==b&&(e.ka.He==g||-1==g)){var f=pa.get_dg_parent(e);if(f&&f.le==c)break a}e=null}break;case V.ne:a:{for(g=0;g<h.length;g++){a=h[g];for(var e=c.length-1,f=a,k=!0;0<=e&&k;)k=
f&&f.le==c[e]&&(f.ka.He==b||-1==b),f&&(f=pa.get_dg_parent(f)),e--;if(k&&!f){e=a;break a}}e=null}}return e};V.get_world_by_name=function(a,c){return aa("%meta_world%"+a,ya.WORLD,!0,c)};V.tv=function(a){return a.le.replace("%meta_world%","")};V.pick_object=function(a,c){var b=fa.ji();if(!b)return ra.error("No active scene"),null;var g=fa.xc(b,Za.nh);g&&g.enable_hmd_stereo&&(g=ha.get_canvas(),a=g.clientHeight/2,c=g.clientWidth/2);if(g=La.aS(a,c))return g;g=fa.bS(b,a,c);if(!g)return null;for(var b=M(b,
"MESH",-1),e=0;e<b.length;e++){var h=b[e].ka,f=h.al;if(f&&3>Math.abs(255*f[0]-g[0])&&3>Math.abs(255*f[1]-g[1])&&3>Math.abs(255*f[2]-g[2]))return h.Dd&&h.Dw&&(Ua.outlining_overview_mode?V.apply_outline_anim(b[e],Ua.Gl,Ua.Hl,Ua.Il):(g=h.kj,V.apply_outline_anim(b[e],g.Gl,g.Hl,g.Il))),b[e]}return null};V.set_wind_params=function(a,c){for(var b=M(a,"EMPTY",-1),g=0;g<b.length;g++){var e=b[g];if(e.Bo&&"WIND"===e.Bo.type){var h=e;break}}if(!h)return ra.error("There is no wind on the scene"),0;"number"==typeof c.wind_dir&&
(b=da.T(c.wind_dir),N.set(Math.sin(b),-Math.cos(b),0,va),da.U(va,da.f,Ha),Pa.set_rotation(h,Ha));"number"==typeof c.wind_strength&&(h.Bo.lI=c.wind_strength);w(h)};V.remove_object=function(a){ta.NM(a)&&ta.remove(a);var c=ya.ALL,b=ya[a.type],g=c.indexOf(a);a=b.indexOf(a);-1!=g&&c.splice(g,1);-1!=a&&b.splice(a,1)};V.QR=oa;V.UX=function(a){return ya[a.type]&&-1<ya[a.type].indexOf(a)};V.yU=function(a,c){if(a.ka.ck){var b=a.ka,g=c.sa;if(b.ck)for(var e=Pa.get_translation(c.Aj,va),h=0;h<a.Ba.length;h++)if(a.Ba[h].Kb==
c)for(var f=0;f<a.Ba[h].Ia.length;f++){var k=a.Ba[h].Ia[f],l=k.yl,n="SHADOW"==k.type&&"RECEIVE"==k.fc&&!S.tp;S.lod_smooth_transitions&&!n&&(n=g.tR,"ALL"==n||"NON-OPAQUE"==n&&(k.Qb||k.Cj))&&(l.lt=!0);ja(k,b,e);l.Bf=l.Ui;l.Mo=Math.min(g.zG,.6*b.hk);l.Lo=Math.min(g.zG,.6*b.ik)}}};V.zU=ja;V.eT=function(a){var c=a.ka,b=c.zg,g=c.Ag,e=c.fg,h=c.eg,f=c.$f;a=a.Ba;for(c=0;c<a.length;c++)for(var k=a[c].Ia,l=0;l<k.length;l++){var n=k[l].Za,w=n.mc,J=w.au_wind_bending_amp,z=w.au_wind_bending_freq,d=w.au_detail_bending_amp,
m=w.au_detail_bending_freq,w=w.au_branch_bending_amp;if(z){var A=Array.apply(null,Array(z.length)).map(function(){return g});P.ft(n,P.bo,new Float32Array(A),z.offset)}J&&(A=Array.apply(null,Array(J.length)).map(function(){return b}),P.ft(n,P.bo,new Float32Array(A),J.offset));d&&(A=Array.apply(null,Array(d.length)).map(function(){return h}),P.ft(n,P.bo,new Float32Array(A),d.offset));m&&(A=Array.apply(null,Array(m.length)).map(function(){return e}),P.ft(n,P.bo,new Float32Array(A),m.offset));w&&(A=Array.apply(null,
Array(w.length)).map(function(){return f}),P.ft(n,P.bo,new Float32Array(A),w.offset))}};V.inherit_material=function(a,c,b,g){if(a.ka.cf&&b.ka.cf){var e=Ba.$b(a,c,"MAIN"),h=null;Ba.xA(b,g,function(a){h||(h={});a.sb&&(h[a.sb.name]=a.sb)},"PARTICLES");for(var f=Ia(b,g),k=Ja(a,c,b,g),l=fa.get_active(),n=0;n<b.Ba.length;n++){var w=b.Ba[n].Kb;fa.set_active(w);var J=M(w,"LAMP",0),z=b.Ba[n].Ia;b.Ba[n].Ia=[];b.Ba[n].Lg=[];Ba.rF(w,[b.Vk],J,[]);Ba.uu(b,fa.nv(w),w);fa.ED(w,[b]);fa.append_object(w,b,!1);na.append_object(b,
w);for(J=0;J<z.length;J++)pa.Ig(b,w,z[J])}Ma(a,c,b,k);Ca(b,f);X(b,g,a,h,e);fa.set_active(l)}};V.create_line=function(a){a=a||"";a+=wa(a);a=pa.dr(a,"LINE");a.ka=pa.qo("EMPTY");a.is_dynamic=!0;Ba.qF(fa.ji(),[a]);fa.append_object(fa.ji(),a);oa(a);return a};V.rP=function(a,c){var b=c.ka,g=r.n(b.Hj);b.qh?pa.MI(c,g):pa.HU(c,g,a.data.b4w_boundings)};V.set_nodemat_value=function(a,c,b,g){for(var e=pa.is_world(a),h=!1,f=0;f<a.Ba.length;f++)for(var k=a.Ba[f].Ia,l=0;l<k.length;l++){var n=k[l];if(e||-1!=n.Hc.indexOf(c))h|=
Ba.set_nodemat_value(n,b,g)}h&&e&&fa.Zx(a);return h};V.set_nodemat_rgb=function(a,c,b,g,e,h){for(var f=pa.is_world(a),k=!1,l=0;l<a.Ba.length;l++)for(var n=a.Ba[l].Ia,w=0;w<n.length;w++){var J=n[w];if(f||-1!=J.Hc.indexOf(c))k|=Ba.set_nodemat_rgb(J,b,g,e,h)}k&&f&&fa.Zx(a);return k};V.get_nodemat_value=function(a,c,b){a=Ba.wh(a,c,"MAIN")||Ba.wh(a,c,"PARTICLES");return Ba.get_nodemat_value(a,b)};V.get_nodemat_rgb=function(a,c,b,g){a=Ba.wh(a,c,"MAIN")||Ba.wh(a,c,"PARTICLES");return Ba.get_nodemat_rgb(a,
b,g)}});t.a=d},function(E,t,d){E=d(0);var O=d(25),T=d(14),G=d(58),r=d(57),f=d(12),k=d(8),y=d(10),x=d(23),m=d(6),p=d(2),q=d(3);d=Object(E.a)("__transform",function(b,d){function h(a,c){C.Ch(a)?m.t(c,C.Ah(a)):m.t(c,a.ka.na)}function l(a,c){var b=a.ka;if(C.Ch(a)){m.q(c,b.na);var e=C.iv(a),e=m.o(e,D);m.p(e,b.na,C.Ah(a))}else m.q(c,b.na)}function e(a,c){C.Ch(a)?m.q(c,C.Ah(a)):m.q(c,a.ka.na)}function c(a,c){m.f(a.ka.na,c);return c}function a(a,c){C.Ch(a)?m.f(C.Ah(a),c):m.f(a.ka.na,c);return c}function u(a,
c){C.Ch(a)?m.a(c,C.Ah(a)):m.a(c,a.ka.na)}function la(a,c){C.Ch(a)?m.a(C.Ah(a),c):m.a(a.ka.na,c);return c}function v(a){var c=a.ka,b=a.Ba,e=a.type;C.tU(a,V);"CAMERA"==e&&B.rU(a);O.h(c.eb,c.na,c.ai);O.k(c.Xc,c.na,c.Xe);for(var h=0;h<b.length;h++)for(var g=b[h].Ia,f=0;f<g.length;f++)H.RI(g[f],c.na,b[h].Lg[f]);switch(e){case "MESH":a.PG&&m.o(a.ka.na,a.ka.uy);if(g=a.Vt)m.o(g.ka.na,D),m.p(D,c.na,D),m.k(D,c.Aq),m.f(D,c.zq);c.zr=!0;break;case "CAMERA":for(h=0;h<b.length;h++)B.sU(a,b[h]);break;case "SPEAKER":da.MT(a,
V,F);break;case "LAMP":r.g(a)}for(var g=m.i(c.na,N),k=m.f(c.na,K),h=0;h<b.length;h++)if(f=b[h],f.Nv){var l=f.Kb,d=l.sa;switch(e){case "MESH":c.Lf&&I.FB(l);d=f.Rj;null!=c.Ge&&d&&I.II(d,g);break;case "EMPTY":L.vU(a);break;case "CAMERA":if(I.get_active()==l&&I.ml(l)==a){I.LS(l);if(d.Gd){(d.Gd.enable_csm||d.Gd.JO)&&I.FB(l);var z=H.lb(a,l).Sa[0];I.LU(z,d.fb)}da.lR(l,g,k,V,F)}break;case "LAMP":I.gt(a,l)}d=f.nj;z=a.zs;if(z.length)for(f=0;f<d.length;f++){var p=d[f].qa;I.KI(d[f],g,k);H.LI(z,p.ad);B.tT(p,I.ml(l))}}c=
a.af;for(h=0;h<c.length;h++)v(c[h]);a=a.nz;for(h=0;h<a.length;h++)c=a[h],g=c[0],C.pU(g,c[1])}var B=Object(T.a)(b),C=Object(G.a)(b),L=Object(f.a)(b),H=Object(k.a)(b),I=Object(y.a)(b),da=Object(x.a)(b),N=new Float32Array(3),U=new Float32Array(3),K=new Float32Array(4),D=m.b(),R=m.b(),V=0,F=0;d.update=function(a){V=a;F++};d.set_translation=function(a,c){var b=a.ka;if(C.Ch(a)){m.t(c,b.na);var e=C.iv(a),e=m.o(e,D);m.p(e,b.na,C.Ah(a))}else m.t(c,b.na)};d.set_translation_rel=h;d.get_translation=function(a,
c){m.i(a.ka.na,c);return c};d.get_translation_rel=function(a,c){C.Ch(a)?m.i(C.Ah(a),c):m.i(a.ka.na,c);return c};d.set_rotation=l;d.set_rotation_rel=e;d.get_rotation=c;d.get_rotation_rel=a;d.set_rotation_euler=function(a,c){var b=p.Y(c,K);l(a,b)};d.set_rotation_euler_rel=function(a,c){var b=p.Y(c,K);e(a,b)};d.get_rotation_euler=function(a,b){var e=c(a,K);return b=p._35(e,b)};d.get_rotation_euler_rel=function(c,b){var e=a(c,K);return b=p._35(e,b)};d.set_scale=function(a,c){var b=a.ka;if(C.Ch(a)){var b=
C.Ah(a),e=m.h(C.iv(a));m.r(c/e,b)}else m.r(c,b.na)};d.set_scale_rel=function(a,c){var b=a.ka;C.Ch(a)?m.r(c,C.Ah(a)):m.r(c,b.na)};d.get_scale=function(a){return m.h(a.ka.na)};d.get_scale_rel=function(a){return C.Ch(a)?m.h(C.Ah(a)):m.h(a.ka.na)};d.set_tsr=function(a,c){m.a(c,a.ka.na);if(C.Ch(a)){var b=C.iv(a),b=m.o(b,D);m.p(b,a.ka.na,C.Ah(a))}};d.set_tsr_rel=u;d.get_tsr=function(a,c){return m.a(a.ka.na,c)};d.get_tsr_rel=la;d.get_object_size=function(a){var c=a.ka;a=c.Hj;var b=m.h(c.na),c=b*(a.max_x-
a.min_x),e=b*(a.max_y-a.min_y);a=b*(a.max_z-a.min_z);return.5*Math.sqrt(c*c+e*e+a*a)};d.get_object_center=function(a,c,b){c?(a=a.ka,q.copy(a.Xe.Da,b)):(a=a.ka,c=a.Hj,b[0]=(c.max_x+c.min_x)/2,b[1]=(c.max_y+c.min_y)/2,b[2]=(c.max_z+c.min_z)/2,m.B(b,a.na,b));return b};d.move_local=function(a,c,b,e){var f=la(a,D),g=N;g[0]=c;g[1]=b;g[2]=e;m.B(g,f,g);h(a,g)};d.AB=function(a,c){var b=la(a,D),e=m.q(c,m.l(R));m.p(b,e,e);u(a,e)};d.Ea=v;d.distance=function(a,c){var b=m.i(a.ka.na,N),e=m.i(c.ka.na,U);return q.dist(b,
e)};d.es=function(a,c){var b=m.i(a.ka.na,N);return q.dist(b,c)}});t.a=d},function(E,t,d){E=d(0);var O=d(5),T=d(25),G=d(15),r=d(21),f=d(41),k=d(8),y=d(1),x=d(9),m=d(10),p=d(11),q=d(13),b=d(6),u=d(2),h=d(3),l=d(7);d=Object(E.a)("__camera",function(e,c){function a(a,c,b,e,h){La.set_translation(a,c);b&&w(a,c,b);n(a,e);g(a,h)}function d(a,c,b,e,h,f,k,l){var J=a.ka;La.set_translation(a,c);J.pivot.set(b);w(a,c,b);n(a,e);g(a,h);M(a,f);t(a,k);J.use_panning=l}function la(a,c,b,g,e,h,f,k){var J=a.ka;La.set_translation(a,
c);J.$c.set(b);w(a,c,b);wa(a,g);ea(a,e);Z(a,h);aa(a,f);J.Wi=k}function v(a,c,g){var e=a.ka,h=b.j(e.na),J=b.g(e.na),e=lb;e.set(u.f);e[3]=0;a=U(a,Xa)[1];J=u._33(J,u.c,va);f.R(nb,h);f.Q(nb,J);if(!u._21(e,-c,nb,g)||Math.abs(a)<S)Ga.warn("Active hover camera view vector and the supporting plane are parallel to each other. Hover pivot will be set based on the camera position."),g[0]=h[0],g[1]=h[1],g[2]=0;return g}function B(a){for(var g=a.ka,e=0;e<a.Ba.length;e++){var J=a.Ba[e].Sa[0];if(J.type==c.We)switch(g.cc){case c.MS_TARGET_CONTROLS:var f=
b.j(g.na);g.ql=h.dist(f,g.pivot);g.rl=J.Rc;break;case c.MS_HOVER_CONTROLS:f=b.j(g.na),g.ql=h.dist(f,g.$c),g.rl=J.Rc}}}function C(a){a={type:a,name:"",cI:1,width:0,height:0,Ff:null,Ar:null,vc:null,dg:null,Xb:0,Rc:0,Co:"VERTICAL",near:0,far:0,left:0,right:0,top:0,bottom:0,Rd:l.create(),na:new Float32Array(9),Kc:new Float32Array(16),jq:new Float32Array(16),ut:{trans:h.create(),angle:0},gc:new Float32Array(16),wg:new Float32Array(16),ky:new Float32Array(16),nB:new Float32Array(16),Oh:new Float32Array(16),
direction:new Float32Array(3),xg:b.c(),ly:b.c(),xs:b.c(),Sw:b.c(),Ls:b.c(),dof_distance:0,dof_front_start:0,dof_front_end:0,dof_rear_start:0,dof_rear_end:0,dof_power:0,dof_bokeh_intensity:0,dof_object:null,dof_bokeh:!1,qe:!1,dof_on:!1,dw:new Float32Array(3),Um:H(),Vl:0,rg:0,ad:null,Ti:null,gr:null,wu:new Float32Array(4),pp:new Float32Array(4)};a.Rd[0]=a.Rd[2]=0;a.Rd[1]=a.Rd[3]=0;return a}function L(a,c){var g=C(a.type);g.name=a.name;g.cI=a.cI;g.width=a.width;g.height=a.height;c||(g.Ff=a.Ff,g.Ar=a.Ar,
g.vc=a.vc,g.dg=a.dg);g.Xb=a.Xb;g.Co=a.Co;g.Rc=a.Rc;g.near=a.near;g.far=a.far;g.left=a.left;g.right=a.right;g.top=a.top;g.bottom=a.bottom;l.copy(a.Rd,g.Rd);b.a(a.na,g.na);r.copy(a.Kc,g.Kc);r.copy(a.jq,g.jq);g.ut=u.O(a.ut);r.copy(a.gc,g.gc);r.copy(a.wg,g.wg);r.copy(a.ky,g.ky);r.copy(a.nB,g.nB);r.copy(a.Oh,g.Oh);g.direction.set(a.direction);b.a(a.xg,g.xg);b.a(a.ly,g.ly);b.a(a.xs,g.xs);b.a(a.Sw,g.Sw);b.a(a.Ls,g.Ls);g.dof_distance=a.dof_distance;g.dof_front_start=a.dof_front_start;g.dof_front_end=a.dof_front_end;
g.dof_rear_start=a.dof_rear_start;g.dof_rear_end=a.dof_rear_end;g.dof_power=a.dof_power;g.dof_bokeh_intensity=a.dof_bokeh_intensity;g.dof_object=a.dof_object;g.dof_bokeh=a.dof_bokeh;g.qe=a.qe;g.dof_on=a.dof_on;h.copy(a.dw,g.dw);var e=a.Um,J=g.Um;l.copy(e.left,J.left);l.copy(e.right,J.right);l.copy(e.top,J.top);l.copy(e.bottom,J.bottom);l.copy(e.near,J.near);l.copy(e.far,J.far);g.Vl=a.Vl;g.rg=a.rg;a.ad&&(g.ad=l.clone(a.ad));if(a.Ti){e=a.Ti.length;g.Ti=Array(e);for(J=0;J<e;J++)g.Ti[J]=h.clone(a.Ti[J]);
g.gr=new Float32Array(a.gr)}l.copy(a.wu,g.wu);l.copy(a.pp,g.pp);return g}function H(){return{left:new Float32Array([0,0,0,0]),right:new Float32Array([0,0,0,0]),top:new Float32Array([0,0,0,0]),bottom:new Float32Array([0,0,0,0]),near:new Float32Array([0,0,0,0]),far:new Float32Array([0,0,0,0])}}function I(a){switch(a){case "STATIC":return c.MS_STATIC;case "TARGET":return c.MS_TARGET_CONTROLS;case "EYE":return c.MS_EYE_CONTROLS;case "HOVER":return c.MS_HOVER_CONTROLS;default:fa.va("Unknown move style")}}
function da(a){var b=C(a);if(a==c.Wc)return b;switch(a){case c.pd:R(b,za,.1,1E3);break;case c.We:R(b,2.5,.1,1E3);break;case c.Uf:break;case c.Yh:break;case c.zj:break;case c.gd:case c.qd:case c.Tf:case c.yf:fa.va("Stereo camera may only be created from perspective one");break;default:fa.va("Unknown camera type")}return b}function N(a,b,g){a.type!=c.gd&&a.type!=c.qd&&a.type!=c.Tf&&a.type!=c.yf&&fa.va("set_stereo_params(): wrong camera type");if(a.type==c.gd||a.type==c.qd)a.Vl=b;a.rg=g;Ra(a,!1);if(Sa.xb()&&
(b=Sa.get_active(),a=b.sa.Gd))for(b=Da.lb(Sa.ml(b),b).Sa,g=0;g<b.length;g++)pa(b[g],a)}function U(a,c){var g=b.g(a.ka.na);return K(g,a.ka.od,c)}function K(a,c,b){var g=va,e=Ha;0<h.dot(c,u.f)?(h.cross(u.d,c,g),h.normalize(g,g)):h.copy(u.f,g);h.cross(c,g,e);var J=u._33(a,u.f,db),f=u._33(a,u.b,vb);a=-Math.asin(h.dot(J,c));c=h.dot(f,c);J=Math.abs(a)>Math.PI/4?h.scale(f,-u._49(a),Qa):h.scale(J,-u._49(Math.asin(c)),$a);f=Math.atan(Math.abs(h.dot(e,J)/h.dot(g,J)));0<c&&(a=u._49(a)*Math.PI-a);c=f;0>h.dot(g,
J)&&(c=Math.PI-c);0>h.dot(e,J)&&(c=2*Math.PI-c);b[0]=c;b[1]=a;return b}function D(a){switch(a.Co){case "AUTO":return 1<a.Xb?ra(a)?a.Rc/a.Xb:2*Math.atan(Math.tan(a.Rc/2)/a.Xb):a.Rc;case "HORIZONTAL":return ra(a)?a.Rc/a.Xb:2*Math.atan(Math.tan(a.Rc/2)/a.Xb);case "VERTICAL":return a.Rc}}function R(a,b,g,e){switch(a.type){case c.pd:case c.gd:case c.qd:a.Rc=b;a.Xb=1;break;case c.We:a.Rc=b;a.Xb=1;break;case c.Tf:case c.yf:break;default:fa.va("set_frustum(): Unsupported camera type: "+a.type)}a.near=g;a.far=
e}function V(a,g){var e=b.i(g.ka.na,va),J=b.f(g.ka.na,gb),f=r.fromRotationTranslation(J,e,Ya);r.invert(f,a.Kc);if(Sa.xb())var f=Sa.get_active(),k=Sa.xc(f,Pa.nh);if(a.type==c.gd||k&&k.enable_hmd_stereo&&a.type==c.Tf)a.Kc[12]+=a.rg/2;else if(a.type==c.qd||k&&k.enable_hmd_stereo&&a.type==c.yf)a.Kc[12]-=a.rg/2;if(a.ad){b.d(a.Kc,a.xs);b.o(a.xs,a.Sw);var f=a.ad[0],k=a.ad[1],l=a.ad[2],n=a.ad[3],w=a.jq;w[0]=1-2*f*f;w[1]=-2*f*k;w[2]=-2*f*l;w[3]=0;w[4]=-2*f*k;w[5]=1-2*k*k;w[6]=-2*k*l;w[7]=0;w[8]=-2*f*l;w[9]=
-2*k*l;w[10]=1-2*l*l;w[11]=0;w[12]=-2*f*n;w[13]=-2*k*n;w[14]=-2*l*n;w[15]=1;r.multiply(a.Kc,a.jq,a.Kc);F(a,!0);h.transformMat4(e,a.jq,e)}b.d(a.Kc,a.xg);b.o(a.xg,a.ly);b.s(e,1,J,a.na);ha(a)}function F(a,c){Ra(a,!0);var b=lb,g=Ya;r.invert(a.Kc,g);r.transpose(g,g);l.transformMat4(a.ad,g,b);g=yb;g[0]=(u._49(b[0])+a.gc[8])/a.gc[0];g[1]=(u._49(b[1])+a.gc[9])/a.gc[5];g[2]=-1;g[3]=(1+a.gc[10])/a.gc[14];l.scale(b,2/(b[0]*g[0]+b[1]*g[1]+b[2]*g[2]+b[3]*g[3]),b);a.gc[2]=b[0];a.gc[6]=b[1];a.gc[10]=b[2]+1;a.gc[14]=
b[3];ta(a);c||ha(a)}function z(a,c,b){b=h.subtract(b,c,va);h.length(b)&&(h.normalize(b,b),b=u._47(u.c,b,gb),La.set_rotation(a,b));La.set_translation(a,c)}function w(a,c,g){var e=a.ka,J,f=b.g(a.ka.na);J=a.ka.od;f=u._33(f,u.e,va);J=0>h.dot(f,J);z(a,c,g);J?(c=h.copy(e.od,va),h.negate(c,c),A(a,c,!0)):A(a,e.od,!0)}function W(a,c){for(var g=a.ka,e=c.Sa,J=b.f(g.na,gb),J=u._33(J,u.c,va),f=b.i(g.na,Ha),k=c.$H,l=0;l<k.length;l++){var n=k[l];h.copy(J,n.direction);b.i(g.na,n.dw)}for(l=0;l<e.length;l++)n=e[l],
V(n,a),h.copy(J,n.direction),n.dof_object&&n.dof_on&&(g=La.get_translation(n.dof_object,db),g=h.dist(f,g),n.dof_distance=g)}function A(a,c,g){a=b.g(a.ka.na);var e=u._33(a,u.f,va);h.normalize(e,e);if(.999999<Math.abs(h.dot(c,e)))e=x.identity(gb);else{var J=h.cross(c,e,Ha);h.normalize(J,J);var f=u._33(a,u.b,db);0<h.dot(f,c)&&h.negate(J,J);f=u._33(a,u.d,db);h.normalize(f,f);var k=u.M(h.dot(f,J),-1,1),e=-.999999>=k?x.setAxisAngle(e,Math.acos(k),gb):x.rotationTo(f,J,gb);x.normalize(e,e)}x.multiply(e,a,
a);g&&(g=u._33(a,u.e,va),0>h.dot(c,g)&&x.rotateZ(a,Math.PI,a))}function n(a,b){var g=a.ka;if(b){g.zc=g.zc||{};g.zc.left=b.left;g.zc.right=b.right;g.zc.Xo=b.left;g.zc.vp=b.right;g.zc.camera_space=!!b.camera_space;var e=a.ka;!(g=e.zc)||e.cc!=c.MS_EYE_CONTROLS&&e.cc!=c.MS_TARGET_CONTROLS||(e=U(a,Xa),g.camera_space?(g.left+=e[0],g.right+=e[0]):(g.Xo-=e[0],g.vp-=e[0]),g.left=u.A(g.left),g.right=u.A(g.right),g.Xo=u.A(g.Xo),g.vp=u.A(g.vp))}else g.zc=null}function g(a,c){var b=a.ka;c?(b.Fb=b.Fb||{},b.Fb.down=
c.down,b.Fb.up=c.up,b.Fb.zo=c.down,b.Fb.Up=c.up,b.Fb.camera_space=!!c.camera_space,ka(a)):b.Fb=null}function ea(a,c){var b=a.ka;if(!c){var g=U(a,Xa);c={down:g[1],up:g[1]}}b.Fb=b.Fb||{};b.Fb.down=c.down;b.Fb.up=c.up;ka(a);b.qc&&b.Fb&&E(a)}function ka(a){var b=a.ka,g=b.Fb;if(g)switch(b.cc){case c.MS_EYE_CONTROLS:case c.MS_TARGET_CONTROLS:a=U(a,Xa);g.camera_space?(g.up+=a[1],g.down+=a[1]):(g.Up-=a[1],g.zo-=a[1]);g.up=u.B(g.up,-Math.PI,Math.PI);g.down=u.B(g.down,-Math.PI,Math.PI);g.Up=u.B(g.Up,-Math.PI,
Math.PI);g.zo=u.B(g.zo,-Math.PI,Math.PI);break;case c.MS_HOVER_CONTROLS:g.up=u.B(g.up,-Math.PI,Math.PI),g.down=u.B(g.down,-Math.PI,Math.PI),g.up=u.M(g.up,-Math.PI/2,0),g.down=u.M(g.down,-Math.PI/2,0)}}function wa(a,c){var b=a.ka;if(!c){var g=La.es(a,b.$c);c={min:g,max:g}}b.qc=b.qc||{};b.qc.min=c.min;b.qc.max=c.max;b.qc&&b.Fb&&E(a)}function M(a,c){var b=a.ka;c?(b.qc=b.qc||{},b.qc.min=c.min,b.qc.max=c.max):b.qc=null}function t(a,c){var b=a.ka;c?(b.Ne=b.Ne||{},b.Ne.min_z=c.min_z,b.Ne.max_z=c.max_z):
b.Ne=null}function Z(a,c){var b=a.ka;c?(b.ie=b.ie||{},b.ie.min=c.min,b.ie.max=c.max):b.ie=null}function aa(a,c){var b=a.ka;c?(b.je=b.je||{},b.je.min=c.min,b.je.max=c.max):b.je=null}function oa(a){var g=a.ka;if(Da.is_camera(a))for(var e=a.Ba,J=0;J<e.length;J++){var f=e[J].Sa;if(f[0].type===c.We){switch(g.cc){case c.MS_TARGET_CONTROLS:var k=b.j(g.na),k=h.dist(k,g.pivot),k=k/g.ql*g.rl;break;case c.MS_HOVER_CONTROLS:k=b.j(g.na);k=h.distance(k,g.$c);k=k/g.ql*g.rl;break;default:k=f[0].Rc}for(var l=0;l<
f.length;l++){var n=f[l];n.Rc=k;Ra(n,!0)}W(a,e[J])}}}function ja(a){var g=a.ka,e=g.cc;if(e===c.MS_TARGET_CONTROLS||e===c.MS_EYE_CONTROLS){if(g.zc){var J=g.zc.left,f=g.zc.right,k=U(a,Xa);(k=e==c.MS_TARGET_CONTROLS?u.H(k[0],J,f):u.H(k[0],f,J))&&(e==c.MS_TARGET_CONTROLS?Ca(a,k,0):Ma(a,k,0))}g.Fb&&(J=g.Fb.down,f=g.Fb.up,k=U(a,Xa),(k=e==c.MS_TARGET_CONTROLS?u.H(k[1],f,J):u.H(k[1],J,f))&&(e==c.MS_TARGET_CONTROLS?Ca(a,0,k):Ma(a,0,k)));if(e===c.MS_TARGET_CONTROLS&&g.qc){var k=a.ka,J=b.j(k.na),f=h.subtract(J,
k.pivot,va),l=h.length(f);l>k.qc.max?(h.scale(f,k.qc.max/l,f),h.add(k.pivot,f,J)):l<k.qc.min&&(l=b.g(k.na),l=u._33(l,u.c,Ha),h.scale(l,100*k.qc.min,l),h.add(f,l,f),h.scale(f,-k.qc.min/h.length(f),f),h.add(k.pivot,f,J))}}e===c.MS_TARGET_CONTROLS&&g.Ne&&(g=a.ka,k=g.pivot[2],J=u.M(g.pivot[2],g.Ne.min_z,g.Ne.max_z),J!=k&&(k=h.set(0,0,J-k,va),h.add(g.pivot,k,g.pivot),g=b.j(g.na),h.add(g,k,g)));e===c.MS_HOVER_CONTROLS&&(e=a.ka,e.ie&&(k=u.M(e.$c[0],e.ie.min,e.ie.max)-e.$c[0],e.$c[0]+=k,g=b.j(e.na),g[0]+=
k),e.je&&(k=u.M(e.$c[1],e.je.min,e.je.max)-e.$c[1],e.$c[1]+=k,g=b.j(e.na),g[1]+=k),e=a.ka,g=U(a,Xa)[1],(e=u.H(g,e.Fb.up,e.Fb.down))&&Q(a,0,e))}function Ia(a,c,b,g){a=U(a,ba);g[0]=c-a[0];g[1]=b-a[1];return g}function Ca(a,c,b){Ba(a,a.ka.pivot,c,b)}function Ja(a,c,b){c=Ia(a,c,b,sa);Ca(a,c[0],c[1])}function Ma(a,c,g){var e=a.ka;if(c||g)a=x.identity(gb),c&&(c=x.setAxisAngle(e.od,c,wb),x.multiply(a,c,a)),c=b.g(e.na),g&&(e=u._33(c,u.d,va),g=x.setAxisAngle(e,g,wb),x.normalize(g,g),x.multiply(a,g,a)),x.multiply(a,
c,c),x.normalize(c,c)}function X(a,c,g){var e=a.ka,h=b.f(e.na,gb),e=K(h,e.od,Xa);Ma(a,c-e[0],g-e[1])}function Q(a,c,b){var g=a.ka;g.Wi||(c=0);Ba(a,g.$c,c,b);b&&E(a)}function Aa(a,c,b){c=Ia(a,c,b,sa);Q(a,c[0],c[1])}function Ba(a,c,g,e){var h=a.ka;if(g||e){var J=x.identity(gb);g&&x.setAxisAngle(a.ka.od,g,gb);a=b.g(h.na);e&&(g=u._33(a,u.d,va),e=x.setAxisAngle(g,e,wb),x.normalize(e,e),x.multiply(J,e,J));h=b.j(h.na);u._45(h,c,J,h);x.multiply(J,a,a);x.normalize(a,a)}}function E(a){var c=a.ka,g=U(a,Xa)[1],
e=a.ka;a=e.Fb;e=e.qc;a.down-a.up?(g=(a.down-g)/(a.down-a.up),g=Math.max(g,0)):g=0;g=g*(e.max-e.min)+e.min;a=b.j(c.na);e=b.g(c.na);e=u._33(e,u.c,va);h.normalize(e,e);h.scale(e,g,e);h.subtract(c.$c,e,a)}function Ra(a,b){switch(a.type){case c.pd:case c.Uf:r.perspective(D(a),a.Xb,a.near,a.far,a.gc);break;case c.We:case c.Yh:var g=D(a),e=g*a.Xb;r.ortho(-e,e,-g,g,a.near,a.far,a.gc);break;case c.zj:r.ortho(a.left,a.right,a.bottom,a.top,a.near,a.far,a.gc);break;case c.gd:case c.qd:var e=Math.tan(D(a)/2),
g=a.near*e,h=a.Xb*a.Vl*e;a.type==c.gd?(e=h-a.rg/2,h+=a.rg/2):(e=h+a.rg/2,h-=a.rg/2);e=-(a.near/a.Vl*e);h*=a.near/a.Vl;r.frustum(e,h,-g,g,a.near,a.far,a.gc);a.left=e;a.right=h;break;case c.Tf:case c.yf:Sa.xb()&&(g=Sa.get_active(),(g=Sa.xc(g,Pa.nh))&&g.enable_hmd_stereo?(g=Math.tan(a.Rd[1]),e=Math.tan(a.Rd[2]),h=Math.tan(a.Rd[3]),a.top=a.near*Math.tan(a.Rd[0]),a.right=a.near*g,a.bottom=-a.near*e,a.left=-a.near*h,r.frustum(a.left,a.right,a.bottom,a.top,a.near,a.far,a.gc)):(a.top=a.near*Math.tan(D(a)/
2),a.bottom=-a.top,a.right=a.top*a.Xb,a.left=-a.right,r.perspective(D(a),a.Xb,a.near,a.far,a.gc)));break;case c.Wc:return;default:fa.va("Wrong camera type: "+a.type)}ta(a);b||ha(a)}function ta(a){r.translate(a.gc,a.ut.trans,a.gc);r.rotateZ(a.gc,a.ut.angle,a.gc)}function ha(a){ga(a);P(a);u._0(a.wg,a.Um)}function ga(a){r.copy(a.Kc,a.wg);r.multiply(a.gc,a.wg,a.wg);r.invert(a.wg,a.ky)}function P(a){r.copy(a.Kc,a.Oh);a.Oh[12]=0;a.Oh[13]=0;a.Oh[14]=0;a.Oh[15]=1;r.multiply(a.gc,a.Oh,a.Oh);r.invert(a.Oh,
a.Oh)}function xa(a,b,g,e,h){e||(e=new Float32Array(24));b||(b=a.near);g||(g=a.far);var J,f,k,l,n,w,d,m;switch(a.type){case c.Wc:fa.va("Extraction from NONE camera is not possible");break;case c.pd:case c.Uf:J=b*Math.tan(D(a)/2);l=-J;f=J*a.Xb;k=-f;n=g/b*J;m=-n;w=n*a.Xb;d=-w;break;case c.We:case c.Yh:l=D(a);k=l*a.Xb;J=n=l;f=w=k;l=m=-l;k=d=-k;break;case c.zj:J=n=a.top;f=w=a.right;l=m=a.bottom;k=d=a.left;break;case c.gd:case c.qd:n=b/a.near;J=b*Math.tan(D(a)/2);l=-J;f=a.right*n;k=a.left*n;d=g/b;n=J*
d;m=-n;w=f*d;d*=k;break;case c.Tf:case c.yf:n=b/a.near;J=a.top*n;l=a.bottom*n;f=a.right*n;k=a.left*n;d=g/b;n=J*d;m=l*d;w=f*d;d*=k;break;default:fa.va("Wrong camera type: "+a.type)}e[0]=k;e[1]=l;e[2]=-b;e[3]=f;e[4]=l;e[5]=-b;e[6]=f;e[7]=J;e[8]=-b;e[9]=k;e[10]=J;e[11]=-b;e[12]=d;e[13]=m;e[14]=-g;e[15]=d;e[16]=n;e[17]=-g;e[18]=w;e[19]=n;e[20]=-g;e[21]=w;e[22]=m;e[23]=-g;h&&(b=Ya,r.invert(a.Kc,b),u._27(e,b,e,0));return e}function pa(a,c){if(c.enable_csm){var b=c.csm_num;if(!a.Ti){var g=c.csm_num;a.Ti=
Array(g);for(var e=0;e<g;e++)a.Ti[e]=new Float32Array(3);a.gr=new Float32Array(g)}for(g=0;g<b;g++){var e=g?ia(c,a,g-1):a.near,J=ia(c,a,g),e=xa(a,e,J,Wa),e=T.H(e);a.Ti[g].set(e.Da);a.gr[g]=e.Jb;a.wu[g]=h.length(e.Da);a.pp[g]=na(c.first_cascade_blur_radius,c.last_cascade_blur_radius,b,g)}}else a.pp[0]=c.first_cascade_blur_radius}function ia(a,c,b){var g=a.csm_num,e=u.M(a.csm_first_cascade_border,c.near,c.far);a=u.M(a.csm_last_cascade_border,c.near,c.far);return u.M(na(e,a,g,b),c.near,c.far)}function na(a,
c,b,g){switch(g){case 0:break;case b-1:a=c;break;default:a=0==a?0:a*Math.pow(c/a,g/(b-1))}return a}function ra(a){switch(a.type){case c.We:case c.Yh:case c.zj:return!0;default:return!1}}function Fa(a,c){c||(c=new Float32Array(3));var g=b.j(a.ka.na);h.copy(g,c);return c}var fa=Object(O.a)(e),Za=Object(G.a)(e),Da=Object(k.a)(e),Ga=Object(y.a)(e),Sa=Object(m.a)(e),Pa=Object(p.a)(e),La=Object(q.a)(e);c.Wc=10;c.pd=20;c.We=30;c.Uf=40;c.Yh=50;c.zj=60;c.gd=70;c.qd=80;c.Tf=90;c.yf=100;c.MS_STATIC=0;c.MS_TARGET_CONTROLS=
2;c.MS_EYE_CONTROLS=3;c.MS_HOVER_CONTROLS=4;var za=u.T(40),S=u.T(.5),Ua=new Float32Array([1,1,1,1]),ya=new Float32Array([-1,-1,1,1]),bb=new Float32Array([0,0,-1,1]),Xa=new Float32Array(2),sa=new Float32Array(2),ba=new Float32Array(2),va=new Float32Array(3),Ha=new Float32Array(3),db=new Float32Array(3),vb=new Float32Array(3),Qa=new Float32Array(3),$a=new Float32Array(3),gb=new Float32Array(4),wb=new Float32Array(4),lb=new Float32Array(4),yb=new Float32Array(4),Ya=new Float32Array(16),Wa=new Float32Array(24),
nb=new Float32Array(6);c.EM=function(g,e){var h=e.ka,J=g.data;switch(J.type){case "PERSP":var f=da(c.pd);f.Co=J.sensor_fit;R(f,J.angle,J.clip_start,J.clip_end);break;case "ORTHO":f=da(c.We),f.Co=J.sensor_fit,R(f,J.ortho_scale/2,J.clip_start,J.clip_end)}f.name=e.name;var k=e.Ba;k[0].Sa.push(f);for(var l=1;l<k.length;l++){var n=L(f,!1);k[l].Sa.push(n)}h.cc=I(J.b4w_move_style);h.dof_distance=J.dof_distance;f=J.dof_object;h.dof_object=f?f.qb:null;h.dof_front_start=J.b4w_dof_front_start;h.dof_front_end=
J.b4w_dof_front_end;h.dof_rear_start=J.b4w_dof_rear_start;h.dof_rear_end=J.b4w_dof_rear_end;h.dof_power=J.b4w_dof_power;h.dof_bokeh=J.b4w_dof_bokeh;h.dof_bokeh_intensity=J.b4w_dof_bokeh_intensity;h.qe=J.b4w_dof_foreground_blur;h.cq=J.b4w_trans_velocity;h.bq=J.b4w_rot_velocity;h.fq=J.b4w_zoom_velocity;f=e.ka.cc;k=g.data;l=null;f!=c.MS_TARGET_CONTROLS&&f!=c.MS_EYE_CONTROLS||!k.b4w_use_horizontal_clamping||(l={left:k.b4w_rotation_left_limit,right:k.b4w_rotation_right_limit,camera_space:"LOCAL"==k.b4w_horizontal_clamping_type},
f==c.MS_EYE_CONTROLS&&(l.left*=-1,l.right*=-1));f=l;k=e.ka.cc;l=g.data;n=null;k!=c.MS_TARGET_CONTROLS&&k!=c.MS_EYE_CONTROLS||!l.b4w_use_vertical_clamping?k==c.MS_HOVER_CONTROLS&&l.b4w_use_zooming&&(l.b4w_hover_angle_min<=l.b4w_hover_angle_max?(n={down:l.b4w_hover_angle_min,up:l.b4w_hover_angle_max},n.down*=-1,n.up*=-1):Ga.error("Wrong angle limits for the HOVER camera. Disabling angle limits.")):(n={down:l.b4w_rotation_down_limit,up:l.b4w_rotation_up_limit,camera_space:"LOCAL"==l.b4w_vertical_clamping_type},
k==c.MS_TARGET_CONTROLS&&(n.down*=-1,n.up*=-1));var k=n,l=e.ka.cc,n=g.data,w=null;l==c.MS_TARGET_CONTROLS&&n.b4w_use_target_distance_limits&&n.b4w_distance_min<=n.b4w_distance_max?w={min:n.b4w_distance_min,max:n.b4w_distance_max}:l===c.MS_HOVER_CONTROLS&&n.b4w_use_zooming&&(n.b4w_distance_min<=n.b4w_distance_max?w={min:n.b4w_distance_min,max:n.b4w_distance_max}:Ga.error("Wrong distance limits for the HOVER camera. Disabling distance limits."));l=w;n=g.data;w=null;e.ka.cc==c.MS_HOVER_CONTROLS&&n.b4w_use_horizontal_clamping&&
n.b4w_horizontal_translation_min<=n.b4w_horizontal_translation_max&&(w={min:n.b4w_horizontal_translation_min,max:n.b4w_horizontal_translation_max});var n=w,w=g.data,m=null;e.ka.cc==c.MS_HOVER_CONTROLS&&w.b4w_use_vertical_clamping&&w.b4w_vertical_translation_min<=w.b4w_vertical_translation_max&&(m={min:w.b4w_vertical_translation_min,max:w.b4w_vertical_translation_max});var w=m,m=g.data,z=null;e.ka.cc==c.MS_TARGET_CONTROLS&&m.b4w_use_pivot_limits&&(z={min_z:m.b4w_pivot_z_min,max_z:m.b4w_pivot_z_max});
m=z;switch(h.cc){case c.MS_EYE_CONTROLS:h=b.j(e.ka.na);a(e,h,null,f,k);break;case c.MS_TARGET_CONTROLS:h=b.j(e.ka.na);d(e,h,J.b4w_target,f,k,l,m,J.b4w_use_panning);break;case c.MS_HOVER_CONTROLS:h=b.j(e.ka.na),f=v(e,g.data.b4w_hover_zero_level,Ha),la(e,h,f,l,k,n,w,J.b4w_enable_hover_hor_rotation)}ja(e);B(e)};c.UH=a;c.WH=d;c.VH=la;c.Po=B;c.rd=L;c.uN=H;c.RX=I;c.kd=da;c.xW=function(a,c){switch(c){case "COLOR":case "CUBEMAP":return!!a.vc;case "DEPTH":return!!a.dg;case "SCREEN":return!a.vc&&!a.dg;default:fa.va("Wrong attachment type: "+
c)}};c.Yw=function(a,c,b){switch(c){case "COLOR":case "CUBEMAP":a.vc=b;break;case "DEPTH":a.dg=b;break;case "SCREEN":a.vc=null;a.dg=null;break;default:fa.va("Wrong attachment type: "+c)}};c.XW=function(a,c){switch(c){case "COLOR":case "CUBEMAP":return a.vc;case "DEPTH":return a.dg;case "SCREEN":return null;default:fa.va("Wrong attachment type: "+c)}};c.jw=function(a,b){(a.type!=c.pd||b!=c.gd&&b!=c.qd&&b!=c.Tf&&b!=c.yf)&&fa.va("make_stereo(): wrong camera type");a.type=b;N(a,6,.065)};c.oT=N;c.get_camera_angles=
U;c.Sz=K;c.get_camera_angles_char=function(a,c){U(a,c);c[0]=u.A(c[0]+Math.PI);c[1]*=-1;return c};c.set_fov=function(a,b){switch(a.type){case c.pd:case c.Uf:case c.gd:case c.qd:a.Rc=b}};c.get_fov=function(a){switch(a.type){case c.pd:case c.Uf:case c.gd:case c.qd:return a.Rc;default:return 0}};c.jQ=D;c.IH=R;c.JH=function(a,b,g,e,h){switch(a.type){case c.pd:case c.gd:case c.qd:case c.We:a.Rc=g;a.Xb=1;break;case c.Uf:case c.Yh:a.Rc=g;a.Xb=b/g;break;case c.Tf:case c.yf:break;default:fa.va("set_frustum2(): Unsupported camera type: "+
a.type)}a.near=e;a.far=h};c.dT=function(a,b,g,e,h,f,k){switch(a.type){case c.zj:a.left=b;a.right=g;a.bottom=e;a.top=h;a.near=f;a.far=k;break;default:fa.va("set_frustum_asymmetric(): Unsupported camera type: "+a.type)}};c.get_move_style=function(a){return a.ka.cc};c.tT=V;c.QH=F;c.KB=function(a,g,e){var f=va;f[0]=0;f[1]=0;f[2]=-1;h.transformQuat(f,e,f);f[0]+=g[0];f[1]+=g[1];f[2]+=g[2];var J=Ha;J[0]=0;J[1]=1;J[2]=0;h.transformQuat(J,e,J);r.lookAt(g,f,J,a.Kc);e=Sa.get_active();e=Sa.xc(e,Pa.nh);if(a.type==
c.gd||e&&e.enable_hmd_stereo&&a.type==c.Tf)a.Kc[12]+=a.rg/2;else if(a.type==c.qd||e&&e.enable_hmd_stereo&&a.type==c.yf)a.Kc[12]-=a.rg/2;b.d(a.Kc,a.xg);ga(a);P(a);b.t(g,a.na)};c.NH=z;c.gT=w;c.sU=W;c.rU=function(a){var g=a.ka;ja(a);oa(a);switch(g.cc){case c.MS_TARGET_CONTROLS:var e=b.j(g.na),f=b.g(g.na);u._30(e,f,g.pivot,u.c);for(f=0;f<a.Ba.length;f++)for(var J=a.Ba[f].Sa,k=0;k<J.length;k++){var l=J[k];l.type!=c.gd&&l.type!=c.qd||N(l,h.dist(e,g.pivot),l.rg)}A(a,g.od);break;case c.MS_EYE_CONTROLS:a.Yc||
A(a,g.od)}};c.correct_up=A;c.$w=n;c.ax=g;c.hover_set_vertical_limits=ea;c.hover_set_distance_limits=wa;c.DH=M;c.PH=t;c.LH=Z;c.SH=aa;c.EU=oa;c.dY=Ca;c.lY=Ja;c.aY=function(a,c,b){Ma(a,c,b)};c.jY=function(a,c,b){X(a,c,b)};c.cY=Ma;c.kY=X;c.bY=Q;c.nT=Aa;c.FS=function(a,b,g){var e=a.ka.cc;e===c.MS_TARGET_CONTROLS?Ca(a,b,g):e===c.MS_EYE_CONTROLS?Ma(a,b,g):e===c.MS_HOVER_CONTROLS?Q(a,b,g):e===c.MS_STATIC&&Ma(a,b,g)};c.mT=function(a,b,g){var e=a.ka.cc;e===c.MS_TARGET_CONTROLS?Ja(a,b,g):e===c.MS_EYE_CONTROLS?
X(a,b,g):e===c.MS_HOVER_CONTROLS?Aa(a,b,g):e===c.MS_STATIC&&X(a,b,g)};c.EX=function(a){switch(a.type){case c.pd:case c.We:case c.gd:case c.qd:return!0;default:return!1}};c.vP=function(a){switch(a.type){case c.pd:case c.Uf:case c.gd:case c.qd:var b;a:{switch(a.Co){case "AUTO":b=1<a.Xb?a.Rc:ra(a)?a.Rc*a.Xb:2*Math.atan(Math.tan(a.Rc/2)*a.Xb);break a;case "HORIZONTAL":b=a.Rc;break a;case "VERTICAL":b=ra(a)?a.Rc*a.Xb:2*Math.atan(Math.tan(a.Rc/2)*a.Xb);break a}b=void 0}return Math.min(D(a),b);default:return Ga.error("get_angular_diameter(): Unsupported camera type: "+
a.type),0}};c.SS=function(a,b){switch(a.type){case c.Uf:case c.Yh:Ga.error("set_aspect(): Unsupported camera type: "+a.type);break;default:a.Xb=b}};c.WW=function(a){return a.Xb};c.set_projection=Ra;c.VS=function(a,b,g,e,h){var f=1/Math.max(h,e);switch(a.type){case c.Wc:case c.pd:case c.Uf:h/=2;e/=2;g=-(g-h)/h*Math.tan(D(a)/2);b=(b-e)/e*Math.tan(D(a)/2)*a.Xb;e=a.near*(g+f);h=a.near*(b+f);g=a.near*(g-f);b=a.near*(b-f);r.frustum(b,h,g,e,a.near,a.far,a.gc);break;case c.We:case c.Yh:g=-g/h;b/=e;e=D(a);
h=e*a.Xb;r.ortho(-h+(b-f)*(h+h),-h+(b+f)*(h+h),e+(g-f)*(e+e),e+(g+f)*(e+e),a.near,a.far,a.gc);break;case c.zj:g=-g/h,b/=e,e=a.top+(g+f)*(a.top-a.bottom),h=a.left+(b+f)*(a.right-a.left),g=a.top+(g-f)*(a.top-a.bottom),b=a.left+(b-f)*(a.right-a.left),r.ortho(b,h,g,e,a.near,a.far,a.gc)}ta(a);ha(a)};c.BM=P;c.SO=xa;c.bM=function(a){a=a.ka;var c=T.w();c.min_x=-1;c.max_x=1;c.min_y=-1;c.max_y=1;c.min_z=-1;c.max_z=1;a.eb=c;var b=T.l(1,u._1([0,0,0]));a.Xc=b;a.Eq=T.b(1,c);a.Gq=T.d(1,c);a.Fq=T.c(1,c)};c.is_static_camera=
function(a){return Da.is_camera(a)&&a.ka&&a.ka.cc==c.MS_STATIC};c.is_target_camera=function(a){return Da.is_camera(a)&&a.ka&&a.ka.cc==c.MS_TARGET_CONTROLS};c.is_eye_camera=function(a){return Da.is_camera(a)&&a.ka&&a.ka.cc==c.MS_EYE_CONTROLS};c.is_hover_camera=function(a){return Da.is_camera(a)&&a.ka&&a.ka.cc==c.MS_HOVER_CONTROLS};c.is_ortho_camera=function(a){return Da.is_camera(a)&&a.ka&&a.Ba[0].Sa[0].type==c.We};c.rC=pa;c.rO=ia;c.project_point=function(a,b,g){a=a.Ba[0].Sa[0];switch(a.type){case c.pd:case c.Uf:case c.We:case c.Yh:case c.gd:case c.qd:case c.Tf:case c.yf:case c.Wc:var e=
lb;e.set(b);e[3]=1;l.transformMat4(e,a.wg,e);b=-e[1]/e[3];g[0]=(e[0]/e[3]+1)/2*a.width;g[1]=(b+1)/2*a.height;Za.dV(g[0],g[1],g,a);2<g.length&&(g[2]=(e[2]/Math.abs(e[3])+1)/2);return g;default:return Ga.error("Non-compatible camera"),g}};c.OP=function(a){return a.Ba[0].Sa[0]};c.jv=function(a,b){switch(a.type){case c.pd:case c.Uf:case c.gd:case c.qd:var g=Math.tan(D(a)/2);switch(b){case "LEFT":return-g*a.Xb;case "RIGHT":return g*a.Xb;case "TOP":return g;case "BOTTOM":return-g}break;case c.We:case c.Yh:switch(b){case "LEFT":return-D(a)*
a.Xb;case "RIGHT":return D(a)*a.Xb;case "TOP":return D(a);case "BOTTOM":return-D(a)}break;case c.zj:switch(b){case "LEFT":return a.left;case "RIGHT":return a.right;case "TOP":return a.top;case "BOTTOM":return a.bottom}break;case c.Tf:case c.yf:g=Sa.get_active();if((g=Sa.xc(g,Pa.nh))&&g.enable_hmd_stereo)switch(b){case "LEFT":return-Math.tan(Math.min(a.Rd[1],a.Rd[3]));case "RIGHT":return Math.tan(Math.min(a.Rd[1],a.Rd[3]));case "TOP":return Math.tan(Math.min(a.Rd[0],a.Rd[2]));case "BOTTOM":return-Math.tan(Math.min(a.Rd[0],
a.Rd[2]))}else switch(g=Math.tan(D(a)/2),b){case "LEFT":return-g*a.Xb;case "RIGHT":return g*a.Xb;case "TOP":return g;case "BOTTOM":return-g}break;default:fa.va("Unknown camera type")}};c.PQ=ra;c.JB=function(a,c,g){a=a.ka;b.t(c,a.na);h.copy(g,a.pivot)};c.MH=function(a,c){var g=a.ka,e=h.subtract(c,g.$c,va),f=b.j(g.na),e=h.add(e,f,e);La.set_translation(a,e);h.copy(c,g.$c)};c.pT=function(a,c){var g=a.ka,e=h.subtract(c,g.pivot,va),f=b.j(g.na),e=h.add(e,f,e);La.set_translation(a,e);h.copy(c,g.pivot)};c.$W=
Fa;c.iY=function(a,g){a.ka.cc=g;a.ka.zc=null;a.ka.Fb=null;a.ka.qc=null;a.ka.ie=null;a.ka.je=null;B(a);switch(g){case c.MS_HOVER_CONTROLS:var e=b.j(a.ka.na),f=v(a,0,Ha);la(a,e,f,null,null,null,null,a.ka.Wi);break;case c.MS_TARGET_CONTROLS:e=Fa(a,va),f=b.g(a.ka.na),f=u._33(f,u.c,Ha),f=h.scaleAndAdd(e,f,10,f),h.copy(f,a.ka.pivot)}};c.wt=function(a){a=a.ka;a.cc=0;h.set(0,0,0,a.pivot);h.set(0,0,0,a.$c);a.use_panning=!1;a.zc=null;a.Fb=null;a.qc=null;a.ie=null;a.je=null;a.Ne=null;a.Wi=!0};c.set_eye_distance=
function(a,c){for(var b=0;b<a.length;b++){var g=a[b];70!=g.type&&80!=g.type&&90!=g.type&&100!=g.type||N(g,g.Vl,c)}};c.set_hmd_fov=function(a,c,b){var g=Sa.get_active();a=Da.lb(a,g).Sa;for(g=0;g<a.length;g++){var e=a[g];if(90==e.type||100==e.type)90==e.type&&l.copy(c,e.Rd),100==e.type&&l.copy(b,e.Rd),e.ad?F(e,!1):Ra(e,!1)}};c.hY=function(a,c,b){var g=Sa.get_active();a=Da.lb(a,g).Sa;for(g=0;g<a.length;g++){var e=a[g];if(90==e.type||100==e.type)90==e.type&&c&&r.copy(c,e.gc),100==e.type&&b&&r.copy(b,
e.gc),ta(e),ha(e)}};c.jT=function(a,b){for(var g=Sa.get_active(),g=Da.lb(a,g).Sa,e,h,f,k,J,n,w,d,m=0;m<g.length;m++){var z=g[m];if(z.type==c.Wc&&z.near||z.type==c.pd||z.type==c.Uf){e=z.near;h=r.invert(b,Ya);k=l.transformMat4(Ua,h,lb);f=k[0]*e;k=k[1]*e;n=l.transformMat4(ya,h,lb);J=n[0]*e;n=n[1]*e;h=l.transformMat4(bb,h,lb);h=-h[2]*h[3];w=r.frustum(J,f,n,k,e,h,Ya);d=(f-J)/(k-n);break}}for(m=0;m<g.length;m++)if(z=g[m],z.type==c.Wc||z.type==c.pd||z.type==c.Uf)z.far=h,z.near=e,z.right=f,z.top=k,z.left=
J,z.bottom=n,z.Xb=d,z.Rc=Math.atan(k/e)-Math.atan(n/e),r.copy(w,z.gc),ta(z),ha(z)}});t.a=d},function(E,t,d){E=d(0);var O=d(5),T=d(4),G=d(42),r=d(51),f=d(1),k=d(10),y=d(11),x=d(13);d(2);d=Object(E.a)("__container",function(d,p){var m,b,u;function h(){U.getBoundingClientRect()}function l(a,c,b,e){I.TF?(b=b.getBoundingClientRect(),e[0]=a-b.left,e[1]=c-b.top):(R.clientX=a,R.clientY=c,R.view=window,a=new MouseEvent("b4w_convert",R),b.dispatchEvent(a),e[0]=a.offsetX,e[1]=a.offsetY);return e}function e(a,
c,b,e){a.style.width=b+"px";a.style.height=e+"px";c&&(c.style.width=b+"px",c.style.height=e+"px")}function c(a,c,b){var h=U,f=K;b&&e(h,f,a,c);f&&(f.width=a,f.height=c,v.Hn());b=Math.floor(a*I.canvas_resolution_factor);c=Math.floor(c*I.canvas_resolution_factor);h.width=b;h.height=c;var f=Math.min(N.drawingBufferWidth,da.HA,da.MA[0]),k=Math.min(N.drawingBufferHeight,da.HA,da.MA[1]);if(b>f||c>k)B.warn("Canvas size exceeds platform limits, downscaling"),f=Math.min(f/b,f/c),b*=f,c*=f;h.width=Math.floor(b);
h.height=Math.floor(c);C.TH(h.width,h.height,a?b/a:1);C.xb()&&H.Ea(C.get_active().Aj);la.AU(h.width,h.height)}var a=Object(O.a)(d),ca=Object(T.a)(d),la=Object(G.a)(d),v=Object(r.a)(d),B=Object(f.a)(d),C=Object(k.a)(d),L=Object(y.a)(d),H=Object(x.a)(d),I=ca.wa,da=ca.di,N=null,U=null,K=null,D=null,R={clientX:0,clientY:0};b=m=0;u=1;p.fh=function(a){N=a};p.get_canvas=function(){return U};p.get_canvas_hud=function(){return K};p.get_container=function(){return D};p.init=function(c,b){c&&c.parentNode?(U=
c,K=b,D=c.parentNode):a.va("canvas container is not available")};p.insert_to_container=function(a,c){c=c||"LAST";switch(c){case "FIRST":D.insertBefore(a,D.firstElementChild);break;case "JUST_BEFORE_CANVAS":D.insertBefore(a,U);break;case "JUST_AFTER_CANVAS":U.nextElementSibling?D.insertBefore(a,U.nextElementSibling):D.appendChild(a,U);break;case "LAST":D.appendChild(a,U);break;default:B.error(c+" invalid stack order")}};p.JF=function(){return m};p.IF=function(){return b};p.set_canvas_offsets=function(){};
p.update_canvas_offsets=h;p.xT=function(a,c,e){m=a;b=c;u=e;h()};p.force_offsets_updating=function(){};p.client_to_canvas_coords=function(a,c,b){return l(a,c,U,b)};p.get_coords_target_space=function(a,c,b){a.constructor==MouseEvent?(b[0]=a.offsetX,b[1]=a.offsetY):a.constructor==TouchEvent?(c="touchend"==a.type?a.changedTouches:c?a.targetTouches:a.touches,l(c[0].clientX,c[0].clientY,a.target,b)):(b[0]=-1,b[1]=-1);return b};p.client_to_element_coords=l;p.Qq=function(a,c,b,e){b||(b=new Float32Array(2));
b[0]=a*u;b[1]=c*u;e&&(a=e.width/m,b[0]*=a,b[1]*=a);return b};p.dV=function(a,c,b,e){b||(b=new Float32Array(2));b[0]=a/u;b[1]=c/u;e&&(a=e.width/m,b[0]/=a,b[1]/=a)};p.bG=function(a){return a&&a.parentNode?a.parentNode==D?!0:p.bG(a.parentNode):!1};p.gG=function(){return I.allow_hidpi&&2<=window.devicePixelRatio?!0:!1};p.resize=c;p.resize_to_container=function(a){var b=D,h=U,f=b.clientWidth,b=b.clientHeight;if(a||f!=h.clientWidth||b!=h.clientHeight){a=h.width;h=h.height;e(U,K,f,b);if(C.xb()){var k=C.get_active();
if((k=C.xc(k,L.nh))&&k.enable_hmd_stereo){c(a,h,!1);return}}c(f,b,!1)}};p.reset=function(){D=K=U=N=null}});t.a=d},function(E,t,d){E=d(0);var O=d(5),T=d(25),G=d(4),r=d(30),f=d(1),k=d(28),y=d(31),x=d(27),m=d(61),p=d(8),q=d(47),b=d(63),u=d(9),h=d(22),l=d(64),e=d(10),c=d(34),a=d(11),ca=d(17),la=d(6),v=d(20),B=d(2),C=d(3),L=d(7);d=Object(E.a)("__batch",function(d,I){function H(a){a={type:a,fc:"",id:0,He:0,Wq:-1,El:"",Bu:-1,so:-1,ir:0,cg:0,fl:[],Ua:[],sg:[],Zf:[],Hc:[],Oj:[],uj:null,ud:{},ec:null,Lb:ya.FQ(),
Le:"",Dq:[],Za:null,Pf:B.S(),Of:!1,Tj:!1,Du:!1,num_vertices:0,num_triangles:0,Sv:0,Tv:0,sd:!1,vv:0,ak:0,Qd:new Float32Array(3),bg:new Float32Array(16),Cj:!1,Vf:!1,Qb:!1,yb:!1,Hi:!1,ob:!1,bd:!1,cf:!1,Lf:!1,qf:!1,ze:!1,Oe:!1,xe:!1,Fd:!1,fi:sa.Yn,Rf:!1,yh:!1,Vj:!1,Ng:!1,Wg:Sa.Hy,Xg:0,hk:0,ik:0,yl:U(),Ge:-1,ue:-1,Bv:!1,Fv:0,Cv:0,Gv:0,Hv:0,Ev:new Float32Array(3),Dv:new Float32Array(3),Jr:!1,ce:0,fe:0,Ie:1,reflect_factor:0,Dk:0,pg:1,parallax_scale:0,Vi:0,ph:1,jp:0,nn:0,Ud:0,Nh:0,ee:new Float32Array(2),
rf:new Float32Array(3),Rh:new Float32Array(3),Qe:new Float32Array(3),Qc:new Float32Array(4),ii:new Float32Array(2),gn:null,Wo:null,Tr:null,Sr:null,bc:!1,wireframe_edge_color:C.create(),yg:!1,water_dynamic:!1,Un:!1,py:!1,qy:0,ry:0,oy:0,km:.1,shallow_water_col_fac:0,shore_water_col_fac:0,foam_factor:0,av:new Float32Array(2),$u:new Float32Array(2),xr:new Float32Array(2),shallow_water_col:new Float32Array(3),shore_water_col:new Float32Array(3),pk:null,tk:!1,dk:!1,Mu:!1,sb:null,kn:0,um:null,ks:null,ri:[],
pi:[],Me:[],oi:[],Yb:T.L(),gm:!1,Wd:null,sh:!0,WF:0,lp:new Float32Array(3),gj:[]};a.Qc[3]=1;a.yb=!0;a.kn=1;a.yl.No=-1;return a}function N(a){var b=H(a.type);b.fc=a.fc;b.id=a.id;b.Wq=a.Wq;b.El=a.El;b.Bu=a.Bu;b.so=a.so;b.ir=a.ir;b.cg=a.cg;b.fl=[];b.Ua=a.Ua.slice();b.sg=a.sg.slice();b.Zf=a.Zf.slice();b.Hc=a.Hc.slice();b.Oj=a.Oj.slice();b.uj=B.O(a.uj);b.ud=B.O(a.ud);b.ec=a.ec;b.Lb=ya.aN(a.Lb);b.Le=a.Le;b.Dq=za.YM(a.Dq);b.Za=a.Za;b.Of=a.Of;b.Tj=a.Tj;b.Du=a.Du;b.num_vertices=a.num_vertices;b.num_triangles=
a.num_triangles;b.Sv=a.Sv;b.Tv=a.Tv;b.vv=a.vv;b.ak=a.ak;b.Qd=a.Qd;b.bg=a.bg;b.Cj=a.Cj;b.Vf=a.Vf;b.Qb=a.Qb;b.yb=a.yb;b.Hi=a.Hi;b.ob=a.ob;b.bd=a.bd;b.cf=a.cf;b.Lf=a.Lf;b.qf=a.qf;b.ze=a.ze;b.Oe=a.Oe;b.xe=a.xe;b.Fd=a.Fd;b.sd=a.sd;b.fi=a.fi;b.Rf=a.Rf;b.yh=a.yh;b.Vj=a.Vj;b.Ng=a.Ng;b.Wg=a.Wg;b.Xg=a.Xg;b.hk=a.hk;b.ik=a.ik;var c=a.yl,g=U();g.lt=c.lt;g.Bf=c.Bf;g.nu=c.nu;g.Ui=c.Ui;g.No=c.No;g.Mo=c.Mo;g.Lo=c.Lo;g.Mw=c.Mw;b.yl=g;b.Ge=a.Ge;b.ue=a.ue;b.Bv=a.Bv;b.Fv=a.Fv;b.Cv=a.Cv;b.Gv=a.Gv;b.Hv=a.Hv;C.copy(a.Ev,
b.Ev);C.copy(a.Dv,b.Dv);b.Jr=a.Jr;b.ce=a.ce;b.fe=a.fe;b.Ie=a.Ie;b.reflect_factor=a.reflect_factor;b.Dk=a.Dk;b.pg=a.pg;b.parallax_scale=a.parallax_scale;b.Vi=a.Vi;b.ph=a.ph;b.jp=a.jp;b.nn=a.nn;b.Ud=a.Ud;b.Nh=a.Nh;b.ee[0]=a.ee[0];b.ee[1]=a.ee[1];C.copy(a.rf,b.rf);C.copy(a.Rh,b.Rh);C.copy(a.Qe,b.Qe);L.copy(a.Qc,b.Qc);b.ii.set(a.ii);b.gn=B.O(a.gn);a.Wo&&(b.Wo=new Float32Array(a.Wo),b.Tr=new Float32Array(a.Tr),b.Sr=new Float32Array(a.Sr));b.bc=a.bc;C.copy(a.wireframe_edge_color,b.wireframe_edge_color);
b.yg=a.yg;b.water_dynamic=a.water_dynamic;b.Un=a.Un;b.py=a.py;b.qy=a.qy;b.ry=a.ry;b.oy=a.oy;b.km=a.km;b.shallow_water_col_fac=a.shallow_water_col_fac;b.shore_water_col_fac=a.shore_water_col_fac;b.foam_factor=a.foam_factor;b.av.set(a.av);b.$u.set(a.$u);b.xr.set(a.xr);C.copy(a.shallow_water_col,b.shallow_water_col);C.copy(a.shore_water_col,b.shore_water_col);b.pk=B.O(a.pk);b.tk=a.tk;b.dk=a.dk;b.Mu=a.Mu;a.sb&&(b.sb=Pa.sE(a.sb));b.kn=a.kn;a.um&&(b.um=new Float32Array(a.um));b.ks=B.O(a.ks);b.ri=a.ri.slice();
b.pi=a.pi.slice();b.Me=a.Me.slice();b.oi=a.oi.slice();T.t(a.Yb,b.Yb);b.gm=a.gm;b.sh=a.sh;b.lp=a.lp;b.gj=a.gj;return b}function U(){return{lt:!1,Bf:0,Ui:0,No:0,Mo:0,Lo:0,Mw:0,nu:1}}function K(a){switch(a.type){case "MAIN":case "PARTICLES":case "LINE":a.fc=a.Qb?a.Hi?"XRAY":"BLEND":"OPAQUE";break;case "SHADOW":a.fc=a.qf?"CAST":"RECEIVE";break;case "COLOR_ID":a.fc=a.Hi?"COLOR_ID_XRAY":"COLOR_ID"}}function D(a,b,c){for(var g=[],e=0;e<a.length;e++){var h=a[e],f=h.qb;f.Or||g.push.apply(g,R(h,f.ka,b,c))}return g}
function R(a,b,c,g){var e=[],h=a.qb,f=F(c,b,!b.bf,!1),k=a.data,l=h.Sc,n=Array(l.length),J=Array(l.length),d=[],w=S.wc(c,bb.ic),m=!1;w&&(m=w.jn.length?!0:!1);for(var p=0;p<f.length;p++)for(var A=f[p],R=0;R<l.length;R++){var D=l[R];if(!ia(h,R)&&!sa.PF(k,R))if("PHYSICS"==A&&a.b4w_collision&&"NAVMESH"==a.game.physics_type)d.push(sa.Wu(k,R,[],b.Oi,{},null));else if(!D.cj||m){var u=H(A);u.gj=B.O(g);"MAIN"==A?n[R]=u:"DEBUG_VIEW"==A&&(J[R]=u);u.Wq=a.b4w_cluster_data.cluster_id;if(E(u,D)&&z(u,D,k)){"SHADOW"==
A&&n[R]&&(u.bd=n[R].bd);u.fi=b.Of||b.cf?sa.At:sa.Yn;Ia(u,b);Ma(u,a.particle_systems);if("DYNAMIC"==b.type||"COLOR_ID"==u.type)u.El=pa(u,b,a.uuid);u.Vj=a.b4w_do_not_cull;"MAIN"==u.type&&(u.Ng=a.b4w_caustics);Q(u,"DISABLE_FOG",("COLOR_ID"!=A&&"SHADOW"!=A&&a.b4w_disable_fogging)|0);var y=sa.Wu(k,R,u.Oj,b.Oi,u.ud,u.uj);!D.Se||"a_shade_tangs"in y.Va[0]||(Q(u,"CALC_TBN",1),X(u,"a_tbn"));if(D.cj){for(var W=y,xa=W.Eb,q=W.Va[0].a_position,v=[],ua=[],M=0;M<xa;M++)ua.push(q[3*M]),v.push(q[3*M+1]),ua.push(q[3*
M+2]);v=new Float32Array(v);ua=new Float32Array(ua);W.gb.a_lf_dist=v;W.gb.a_lf_bb_vertex=ua;y=W}Ra(u);e.push({hb:u,ah:b,bu:b,Wd:y,Ih:[D.name],Pe:[a]})}}}if(d.length){u=H("PHYSICS");u.fc="NAVMESH";u.El=pa(u,b,a.uuid);for(var y=sa.oI(d),ca=[],p=0;p<l.length;p++)ca.push(l[p].name);Ra(u);e.push({hb:u,ah:b,bu:b,Wd:y,Ih:ca,Pe:[a]})}for(p=0;p<J.length;p++)J[p]&&(J[p].so=n[p].id,Ra(J[p]));var x=a.particle_systems;if(0<x.length){for(var V=!1,K=!1,p=0;p<x.length;p++){var Qa=x[p],N=Qa.settings;N.use_render_emitter&&
e.length&&(V=!0);"HAIR"!=N.type||"OBJECT"!=N.render_type&&"GROUP"!=N.render_type&&Qa.transforms.length||(K=!0);if(V&&K)break}var P;if(e.length)P=e[0];else{var G=H("TMP");Ma(G,x);var L=sa.Wu(k,0,G.Oj,b.Oi,G.ud,G.uj);P={hb:G,Wd:L}}var ea=P,wa=ea.hb.ud,r;if(K){var I;if(1<l.length){for(var aa={},qa=0;qa<x.length;qa++){var za=x[qa].settings;if("HAIR"==za.type&&("OBJECT"==za.render_type||"GROUP"==za.render_type)){var Ya=za.b4w_vcol_from_name,ka=za.b4w_vcol_to_name;""!==Ya&&""!==ka&&(aa[Ya]=B.O(wa[Ya]))}}"a_bending_col_main"in
wa&&(aa.a_bending_col_main=B.O(wa.a_bending_col_main));"a_bending_col_detail"in wa&&(aa.a_bending_col_detail=B.O(wa.a_bending_col_detail));I=sa.eF(k,[],aa)}else I=ea.Wd;r=I}else r=null;for(var yb=r,Ja=a.qb,db=[],Xa=a.particle_systems,vb=a.data,U=0;U<Xa.length;U++){var $a=Xa[U],t=$a.settings;if(t.count)if("EMITTER"==t.type){if("DYNAMIC"==b.type){var Z=H("PARTICLES");Z.Yb.zf=b.eb;Z.Yb.Yf=b.jc;Z.Yb.Af=b.Xc;Z.gj=B.O(g);var oa,da=$a.settings.material-1;da>=Ja.Sc.length&&(fa.warn('Wrong material used for rendering particle system "'+
$a.name+'"'),da=0);oa=da;var Da=Ja.Sc[oa];if(!ia(Ja,oa)&&("HALO"===$a.settings.render_type&&"HALO"==Da.type&&(Z.Jr=!0),z(Z,Da,vb))){var Oa=Z,Za=Ja,Ca=$a.settings;switch(Ca.b4w_billboard_align){case "VIEW":Q(Oa,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW");break;case "XY":Q(Oa,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_XY");break;case "YZ":Q(Oa,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_YZ");break;case "ZX":Q(Oa,"BILLBOARD_ALIGN","BILLBOARD_ALIGN_ZX");break;default:na.va("Wrong billboard align value")}Q(Oa,"BILLBOARD",
0);var Ea=Ca.b4w_enable_soft_particles&&Sa.eE(Za,Ca);Q(Oa,"SOFT_PARTICLES",0<Ca.b4w_particles_softness&&Ea&&ba.Eu?1:0);Q(Oa,"SOFT_STRENGTH",ya.Fa(Ca.b4w_particles_softness));ya.Wa(Oa.Lb,"WORLD_SPACE","WORLD"==Ca.b4w_coordinate_system?1:0);Z.cf=!0;Z.Vj=a.b4w_do_not_cull;Z.El=pa(Z,b,Ja.name+"_"+t.uuid);Pa.CN(Z,$a,Da);var ja=Pa.mP(Z,vb,$a,Ja.ka);Pa.GU(ja,Z,t.count);Pa.FU(Ja);Ia(Z,Ja.ka);Ra(Z);db.push({hb:Z,ah:b,bu:b,Wd:ja,Ih:[Da.name],Pe:[a]})}}}else if("HAIR"==t.type){var ga=B._13($a.seed),Fa=-1!=B._69(ba.DA,
nb)&&!t.b4w_initial_rand_rotation&&!t.b4w_hair_billboard,ta=4;Fa&&(ta=8);if($a.transforms.length)var Wa=$a.transforms;else for(var gb=sa.Pz(yb,t.count,!1,ga),Wa=new Float32Array(gb.length*ta),ra=0;ra<gb.length;ra++){var Ga=.75+.5*B._39(ga);Wa[ra*ta]=gb[ra][0];Wa[ra*ta+1]=gb[ra][1];Wa[ra*ta+2]=gb[ra][2];Wa[ra*ta+3]=Ga;Fa&&(Wa[ra*ta+4]=1,Wa[ra*ta+5]=0,Wa[ra*ta+6]=0,Wa[ra*ta+7]=0)}var Ua=S.wc(c,bb.xj)?!0:!1;if("OBJECT"==t.render_type){var va=[F(c,t.dupli_object.qb.ka,!b.bf,!0)],ha=Ba(a,b,wa,yb,[t.dupli_object],
va,[Wa],t,$a,Ua,ga,!1,g);db.push.apply(db,ha)}else if("GROUP"==t.render_type){for(var O=t.dupli_group.objects,va=[],ra=0;ra<O.length;ra++){var Ha=F(c,O[ra].qb.ka,!b.bf,!0);va.push(Ha)}for(var wb=!1,La=[],ra=0;ra<O.length;ra++)La.push(O[ra].qb);if(t.use_whole_group){for(var Aa,T=Wa,lb=La,Va=Fa,Kb=ta,Tb={},Yb=new Float32Array([0,0,0,1]),Lb=0;Lb<T.length;Lb+=Kb)for(var Pb=0;Pb<lb.length;Pb++){var Pc=C.create(),zd=la.h(lb[Pb].ka.na),ad=la.j(lb[Pb].ka.na);C.scale(ad,zd,Pc);var Qb=C.clone([T[Lb],T[Lb+1],
T[Lb+2]]);Tb[Pb]||(Tb[Pb]=new Float32Array(T.length));Va&&(Tb[Pb][Lb+4]=Yb[0]=T[Lb+4],Tb[Pb][Lb+5]=Yb[1]=T[Lb+5],Tb[Pb][Lb+6]=Yb[2]=T[Lb+6],Tb[Pb][Lb+7]=Yb[3]=T[Lb+7],B._28(Yb,Yb),B._61(Pc,Yb,Pc));C.add(Qb,Pc,Qb);Tb[Pb][Lb]=Qb[0];Tb[Pb][Lb+1]=Qb[1];Tb[Pb][Lb+2]=Qb[2];Tb[Pb][Lb+3]=T[Lb+3]}Aa=Tb;wb=!0}else{var ec;if(t.use_group_count){for(var Ub=Wa,Qc=La,Rc=t.dupli_weights,md=ga,bd=Fa,uc=ta,Db={},qc=[],Mb=0;Mb<Qc.length;Mb++)for(var Ab=Qc[Mb],nd=Ab.le||Ab.name,rc=0;rc<Rc.length;rc++){var Vb=Rc[rc];
nd==Vb.name&&qc.push(Vb)}Rc.length!=qc.length&&fa.error("dupli weights match failed");for(Mb=0;Mb<Ub.length;Mb+=uc){for(var fc,fb=qc,Zb=[0],Bb=0;Bb<fb.length;Bb++)Zb[Bb+1]=Zb[Bb]+fb[Bb].count;for(var Sc=Zb[Zb.length-1]*B._39(md),Jb=0,Bb=0;Bb<Zb.length;Bb++)if(Sc>=Zb[Bb]&&Sc<Zb[Bb+1]){Jb=Bb;break}fc=Jb;Db[fc]=Db[fc]||[];Db[fc].push(Ub[Mb],Ub[Mb+1],Ub[Mb+2],Ub[Mb+3]);bd&&Db[fc].push(Ub[Mb+4],Ub[Mb+5],Ub[Mb+6],Ub[Mb+7])}for(fc in Db)Db[fc]=new Float32Array(Db[fc]);ec=Db}else{for(var xc=Wa,sc=ga,Tc=Fa,
Vc=ta,Wc=La.length,ib={},Nb=0;Nb<xc.length;Nb+=Vc){var Eb=Math.floor(Wc*B._39(sc));ib[Eb]=ib[Eb]||[];ib[Eb].push(xc[Nb],xc[Nb+1],xc[Nb+2],xc[Nb+3]);Tc&&ib[Eb].push(xc[Nb+4],xc[Nb+5],xc[Nb+6],xc[Nb+7])}for(Eb in ib)ib[Eb]=new Float32Array(ib[Eb]);ec=ib}Aa=ec}ha=Ba(a,b,wa,yb,O,va,Aa,t,$a,Ua,ga,wb,g);db.push.apply(db,ha)}"INSTANCE"==t.b4w_wind_bend_inheritance&&Ja.ka.wf&&fa.warn('Emitter object "'+Ja.name+"\" has a particle system with wind bending inheritance from the particle instance. Wind bending on the emitter isn't disabled. Expect unforeseen behavior.")}else na.va("Unknown particle settings type")}V?
e.push.apply(e,db):e=db}return e}function V(a){for(var b=[],c=[],g={},e=0;e<a.length;e++){var h=a[e].hb,f=null;if(h.id in g){var k=g[h.id],l=c[k].hb;ta(h,function(a){ta(l,function(b){B._58(a,b)&&1!=a.WF&&(f=c[k])})});if(!f){do h.id++;while(g[h.id])}}f||(f={hb:h,aH:[],JD:[],qI:[],Pe:[],tH:[],Ih:[]},g[h.id]=c.length,c.push(f));if(a[e].Wd&&a[e].Wd.Eb){f.aH.push(a[e].ah);f.JD.push(a[e].bu);f.qI.push(a[e].Wd);for(var n=0;n<a[e].Pe.length;n++)h=a[e].Pe[n],-1==f.tH.indexOf(h.uuid)&&(f.Pe.push(h),f.tH.push(h.uuid));
for(n=0;n<a[e].Ih.length;n++)h=a[e].Ih[n],-1==f.Ih.indexOf(h)&&f.Ih.push(h)}f.Ih.sort()}for(e=0;e<c.length;e++){var h=c[e].hb,J=c[e].aH,d=c[e].JD,w=c[e].qI;a="DYNAMIC"==d[0].type||"COLOR_ID"==h.type?d[0]:Sa.iz(d[0]);if("STATIC"==a.type&&"COLOR_ID"!=h.type)for(n=0;n<J.length;n++){var m=J[n],z=d[n],g=w[n],p=la.l(lb);m.qh&&!m.Hq?(m=la.k(m.na,wb),la.u(m,p)):la.a(m.na,p);z.ul?g.Gf||(z.qh?sa.ZT(g,p):sa.YB(g,p)):sa.YB(g,p);if(z.ul)Q(h,"AU_QUALIFIER","GLSL_IN");else if(1<c[e].Pe.length){m={};if(z.wf||z.qh)m.au_center_pos=
[p[0],p[1],p[2]];z.wf&&(m.au_wind_bending_amp=[z.zg],m.au_wind_bending_freq=[z.Ag],m.au_detail_bending_amp=[z.eg],m.au_detail_bending_freq=[z.fg],m.au_branch_bending_amp=[z.$f]);sa.YT(g,m);Q(h,"AU_QUALIFIER","GLSL_IN")}else a.ku.set(p.subarray(0,3)),Q(h,"AU_QUALIFIER","uniform")}if(0==w.length)g=sa.Gh(Fa.et("%empty"));else if(1==w.length)g=w[0];else{g=[];for(n=0;n<w.length;n++)sa.NQ(w[n])||g.push(n);if(g.length<w.length)for(n=0;n<g.length;n++)sa.Ex(w[g[n]]);g=sa.oI(w)}if("STATIC"==a.type){if("COLOR_ID"!=
h.type){w=[];for(n=0;n<c[e].Pe.length;n++)T.G(c[e].Pe[n].qb.ka.KD,w);T.a(w,0,w.length,a.ai);T.o(a.ai,a.eb);a.Yk=T.z(B._1(w),!0);T.s(a.Yk,a.jc);a.Xe=T.B(a.Yk);T.u(a.Xe,a.Xc)}a.ck&&(n=c[e].Pe[0].b4w_cluster_data,n.cluster_center?a.Zr.set(n.cluster_center):a.Zr.set(a.Xe.Da))}"PARTICLES"!=h.type&&(n=g.Hd,a.qh?(T.o(a.eb,h.Yb.zf),T.s(a.jc,h.Yb.Yf),T.u(a.Xc,h.Yb.Af),h.gm=!1):(T.o(n.eb,h.Yb.zf),T.s(n.jc,h.Yb.Yf),a.Xc.Jb<n.Xc.Jb?"STATIC"==a.type&&"COLOR_ID"!=h.type?T.u(a.Xe,h.Yb.Af):T.u(a.Xc,h.Yb.Af):T.u(n.Xc,
h.Yb.Af),h.gm=T.M(h.Yb.Yf,h.Yb.Af)));b.push({hb:h,ka:a,Wd:g,Ih:c[e].Ih,Pe:c[e].Pe})}return b}function F(a,b,c,g){var e=[];g||(b.Pl&&S.wc(a,bb.xf)||b.Dd&&S.wc(a,bb.Wh))&&e.push("COLOR_ID");c&&(e.push("MAIN"),e.push("NODES_GLOW"),S.wc(a,bb.Vh)&&e.push("DEBUG_VIEW"),S.wc(a,bb.Eg)&&e.push("SHADOW"),S.wc(a,bb.xj)&&e.push("GRASS_MAP"));e.push("PHYSICS");if(b.qf||b.xe)for(a=null,b.qf&&(a=["MAIN","NODES_GLOW","COLOR_ID","PHYSICS","DEBUG_VIEW"]),b.xe&&(b=["COLOR_ID","PHYSICS","SHADOW","DEBUG_VIEW"],a?a=B.D(a,
b):a=b),b=a,a=0;a<b.length;a++)c=e.indexOf(b[a]),-1!==c&&e.splice(c,1);return e}function z(a,b,c){var e;switch(a.type){case "MAIN":if(b.bf)e=!1;else{if(b.kh&&"HALO"!=b.type)M(a,b,c,"MAIN");else{n(a,b);a.ob=b.ob;a.Hi=b.vk&&"OPAQUE"!=b.Ob&&"CLIP"!=b.Ob&&"ALPHA_ANTIALIASING"!=b.Ob;a.Ud=b.Ud;a.Rh.set([1,1,1]);var h=b.ih;a.Qc.set(b.Qc);a.Qc[3]=b.alpha;if(b.cj){ga(a,"lens_flares.glslv","lens_flares.glslf");X(a,"a_position");X(a,"a_texcoord");var f=Xa.gf(h[0]),k=h[0].texture;P(a,f,"u_sampler",k.name)}else{ga(a,
"main.glslv","main_stack.glslf");b.bd||(c={bd:b.bd,Df:b.Df,Mf:b.Mf,Se:b.Se},e=w(b.nd,"MAIN"),c=Ga.pz(e,c,a.gj),a.Lb.Jf=Ga.Zq(c));var l=g("use_map_color_diffuse",h);e=g("use_map_color_spec",h);var d=g("use_map_normal",h),J=g("use_map_mirror",h),m=g("use_stencil",h);c=l[0];e=e[0];d=d[0];J=J[0];l=l[1];h=m[0]&&g("use_rgb_to_intensity",h)[0];if(c){k=c.texture;switch(c.blend_type){case "MIX":Q(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":Q(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}f=
Xa.gf(c);P(a,f,"u_colormap0",k.name);a.Vi=c.diffuse_color_factor;c.use_map_alpha?a.ph=c.alpha_factor:a.ph=0;a.Rh.set(c.scale)}m=c&&c==e;e&&(m||(k=e.texture,f=Xa.gf(e),P(a,f,"u_specmap0",k.name)),a.Dk=e.specular_color_factor);if(d&&(k=d.texture,X(a,"a_tbn"),f=Xa.gf(d),P(a,f,"u_normalmap0",k.name),a.jp=d.normal_factor,k.b4w_use_map_parallax&&ba.Hw)){var f=ya.Fa(k.b4w_parallax_steps),z=ya.Fa(k.b4w_parallax_lod_dist);Q(a,"PARALLAX",1);Q(a,"PARALLAX_STEPS",f);Q(a,"PARALLAX_LOD_DIST",z);a.parallax_scale=
k.b4w_parallax_scale}J&&(k=J.texture,f=Xa.gf(J),P(a,f,"u_mirrormap",k.name),a.nn=J.mirror_factor);if(J=c&&l&&h?1:0)f=Xa.gf(l),k=l.texture,P(a,f,"u_colormap1",k.name),f=Xa.gf(h),k=h.texture,P(a,f,"u_stencil0",k.name);(k=c||e||d)&&a.Rh.set(k.scale);Q(a,"TEXTURE_SPEC",void 0==e?0:1);Q(a,"ALPHA_AS_SPEC",m?1:0);Q(a,"TEXTURE_STENCIL_ALPHA_MASK",J);X(a,"a_position");X(a,"a_tbn");(c||e||d)&&X(a,"a_texcoord");if(b.Ra.ej){a.yg=!0;a.water_dynamic=b.Ra.is_dynamic;b.Ra.shore_smoothing&&!a.Qb?(fa.warn('Material: "'+
b.name+'" is opaque.',"Disabling water shore smoothing."),a.Un=!1):a.Un="REFLECT"!=a.fc?b.Ra.shore_smoothing:!1;ga(a,"water.glslv","water.glslf");J={bd:!1,Df:b.Df,Mf:b.Mf,Se:b.Se};m=w(b.nd);J=Ga.pz(m,J,a.gj);a.Lb.Jf=Ga.Zq(J);X(a,"a_position");ba.mJ?(X(a,"a_polyindex"),a.yb=!0,C.set(0,0,0,a.wireframe_edge_color),Za.Yz()?Q(a,"DEBUG_WIREFRAME",1):Q(a,"DEBUG_WIREFRAME",2)):Q(a,"DEBUG_WIREFRAME",0);m=b.ih;J=g("use_map_normal",m);f=g("use_map_mirror",m)[0];J.length&&(k=J[0].texture,P(a,Xa.gf(J[0]),"u_normalmap0",
k.name),a.km=b.Ra.norm_uv_velocity);Q(a,"NUM_NORMALMAPS",J.length);a.pk=Array(J.length);for(k=0;k<J.length;k++)a.pk[k]=new Float32Array(2),a.pk[k].set([J[k].scale[0],J[k].scale[1]]);f&&(z=Xa.gf(f),k=f.texture,P(a,z,"u_mirrormap",k.name),a.nn=f.mirror_factor);f=null;if(ba.Eo)for(k=0;k<m.length;k++){var p=m[k];if(!0===p.texture.b4w_water_foam){f=p;break}}f&&(Q(a,"FOAM",1),z=Xa.gf(f),k=f.texture,P(a,z,"u_foam",k.name),a.foam_factor=b.Ra.foam_factor,a.av.set(k.b4w_foam_uv_freq),a.$u.set(k.b4w_foam_uv_magnitude),
a.xr[0]=f.scale[0],a.xr[1]=f.scale[1]);for(k=0;k<m.length;k++)if(p=m[k],!0===p.texture.b4w_shore_dist_map){var R=p;break}R&&ba.Pt&&(m=Xa.gf(R),k=R.texture,P(a,m,"u_shore_dist_map",k.name),Q(a,"SHORE_PARAMS",1),R=p.texture.b4w_shore_boundings,Q(a,"MAX_SHORE_DIST",ya.Fa(p.texture.b4w_max_shore_dist)),Q(a,"SHORE_MAP_SIZE_X",ya.Fa(R[0]-R[1])),Q(a,"SHORE_MAP_SIZE_Y",ya.Fa(R[2]-R[3])),Q(a,"SHORE_MAP_CENTER_X",ya.Fa((R[0]+R[1])/2)),Q(a,"SHORE_MAP_CENTER_Y",ya.Fa((R[2]+R[3])/2)));b.Ra.Pv?(Q(a,"GENERATED_MESH",
1),a.py=!0,a.qy=b.Ra.xw,a.ry=b.Ra.yw,a.oy=b.Ra.Gu):(X(a,"a_tbn"),(f||J.length)&&X(a,"a_texcoord"),Q(a,"GENERATED_MESH",0));if(b.Ra.is_dynamic){var p=ya.Fa(b.Ra.dst_noise_scale0),R=ya.Fa(b.Ra.dst_noise_scale1),J=ya.Fa(b.Ra.dst_noise_freq0),m=ya.Fa(b.Ra.dst_noise_freq1),k=ya.Fa(b.Ra.dir_min_shore_fac),f=ya.Fa(b.Ra.dir_freq),z=ya.Fa(b.Ra.dir_noise_scale),F=ya.Fa(b.Ra.dir_noise_freq),D=ya.Fa(b.Ra.dir_min_noise_fac),u=ya.Fa(b.Ra.dst_min_fac),y=ya.Fa(b.Ra.waves_hor_fac);Q(a,"DST_NOISE_SCALE_0",p);Q(a,"DST_NOISE_SCALE_1",
R);Q(a,"DST_NOISE_FREQ_0",J);Q(a,"DST_NOISE_FREQ_1",m);Q(a,"DIR_MIN_SHR_FAC",k);Q(a,"DIR_FREQ",f);Q(a,"DIR_NOISE_SCALE",z);Q(a,"DIR_NOISE_FREQ",F);Q(a,"DIR_MIN_NOISE_FAC",D);Q(a,"DST_MIN_FAC",u);Q(a,"WAVES_HOR_FAC",y)}ka(a,b);wa(a,b);a.shallow_water_col.set(b.Ra.bx);a.shore_water_col.set(b.Ra.ex);a.shallow_water_col_fac=b.Ra.cx;a.shore_water_col_fac=b.Ra.fx;Q(a,"ABSORB",ya.Fa(b.Ra.absorb_factor));Q(a,"SSS_STRENGTH",ya.Fa(b.Ra.sss_strength));Q(a,"SSS_WIDTH",ya.Fa(b.Ra.sss_width))}"HALO"===b.type&&
(ga(a,"halo.glslv","halo.glslf"),W(a,b),a.Oj=["a_position"]);b.Se&&(Q(a,"USE_TBN_SHADING",1),X(a,"a_shade_tangs"));Q(a,"TEXCOORD",0);Q(a,"NORMAL_TEXCOORD",0);c&&A(a,c,"TEXTURE_COLOR0_CO");l&&A(a,l,"TEXTURE_COLOR1_CO");h&&A(a,h,"TEXTURE_STENCIL_ALPHA_MASK_CO");e&&A(a,e,"TEXTURE_SPEC_CO");d&&A(a,d,"TEXTURE_NORM_CO");Q(a,"SHADELESS",b.bd?1:0);a.bd=b.bd}Q(a,"ALPHA","OPAQUE"===b.Ob?0:1);Q(a,"ALPHA_CLIP","CLIP"===b.Ob?1:0);Q(a,"DOUBLE_SIDED_LIGHTING",b.Xp?1:0);b.mt?(Q(a,"VERTEX_COLOR",1),X(a,"a_color")):
Q(a,"VERTEX_COLOR",0);a.ce=b.ce;a.Ie=b.Ie;a.fe=b.fe;a.Qe.set(b.Qe);a.pg=b.pg;ka(a,b);wa(a,b);b.Qr?Q(a,"WETTABLE",1):Q(a,"WETTABLE",0);ea(a,b);b.fn&&!a.Qb?(fa.warn('Material "'+b.name+'" is not blend. Disabling refractions.'),a.tk=!1):a.tk=b.fn;a.Nh=b.Nh}e=!0}break;case "NODES_GLOW":e=M(a,b,c,"GLOW");break;case "SHADOW":if(b.cj||b.Ra.ej||b.bf||"HALO"==b.type)e=!1;else if(n(a,b),a.ob=b.ob,a.Qb)e=!1;else{!b.kh||"CLIP"!=b.Ob&&"ALPHA_ANTIALIASING"!=b.Ob?ga(a,"shadow.glslv","shadow.glslf"):M(a,b,c,"SHADOW");
a.yb=a.yb&&!(ba.tp&&"ALPHA_ANTIALIASING"==b.Ob);L.set(0,0,0,b.alpha,a.Qc);X(a,"a_position");X(a,"a_tbn");Q(a,"ALPHA","OPAQUE"===b.Ob?0:1);a.Rh.set([1,1,1]);c=g("use_map_color_diffuse",b.ih)[0];if(!c||"CLIP"!=b.Ob&&"ALPHA_ANTIALIASING"!=b.Ob)Q(a,"TEXTURE_COLOR",0);else{switch(c.blend_type){case "MIX":Q(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":Q(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.Rh.set(c.scale);Q(a,"TEXTURE_COLOR",1);X(a,"a_texcoord");b=Xa.gf(c);c=
c.texture;"IMAGE"!=b.source&&"ENVIRONMENT_MAP"!=b.source&&"CANVAS"!=b.source&&"NONE"!=b.source||P(a,b,"u_colormap0",c.name)}e=!0}break;case "PHYSICS":c=b.Ed;b=b.Ra;c.Vp?(a.Di=c.Di,a.Rb=c.Rb,a.Ze=c.Ze,a.Ye=c.Ye,a.$e=c.$e,a.se=c.se,a.uh=c.uh,e=!0):b.ej?(a.yg=!0,a.kV=b.is_dynamic,a.dst_noise_scale0=b.dst_noise_scale0,a.dst_noise_scale1=b.dst_noise_scale1,a.dst_noise_freq0=b.dst_noise_freq0,a.dst_noise_freq1=b.dst_noise_freq1,a.dir_min_shore_fac=b.dir_min_shore_fac,a.dir_freq=b.dir_freq,a.dir_noise_scale=
b.dir_noise_scale,a.dir_noise_freq=b.dir_noise_freq,a.dir_min_noise_fac=b.dir_min_noise_fac,a.dst_min_fac=b.dst_min_fac,a.waves_hor_fac=b.waves_hor_fac,e=!0):e=!1;break;case "COLOR_ID":if(b.cj||"HALO"==b.type)e=!1;else{d=e=b.Ob;"ALPHA_ANTIALIASING"==d&&(d="CLIP",b.Ob="CLIP");n(a,b);a.ob=b.ob;a.Rf=!1;a.yb=!0;a.Qb=!1;a.Hi=b.vk&&"OPAQUE"!=d&&"CLIP"!=d;b.kh&&"CLIP"==d?M(a,b,c,"COLOR_ID"):ga(a,"color_id.glslv","color_id.glslf");L.set(0,0,0,b.alpha,a.Qc);X(a,"a_position");Q(a,"ALPHA","OPAQUE"===d?0:1);
a.Rh.set([1,1,1]);c=g("use_map_color_diffuse",b.ih)[0];Q(a,"ALPHA_CLIP","CLIP"===d?1:0);if(c&&"CLIP"==d){switch(c.blend_type){case "MIX":Q(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":Q(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.Rh.set(c.scale);Q(a,"TEXTURE_COLOR",1);X(a,"a_texcoord");d=Xa.gf(c);c=c.texture;"IMAGE"!=d.source&&"ENVIRONMENT_MAP"!=d.source&&"CANVAS"!=d.source&&"NONE"!=d.source||P(a,d,"u_colormap0",c.name)}else Q(a,"TEXTURE_COLOR",0);b.Ob=e;e=!0}break;
case "GRASS_MAP":!b.rj.To||b.bf?e=!1:(n(a,b),a.ob=b.ob,a.Qb=!1,a.Rf=!1,a.yb=!0,ga(a,"grass_map.glslv","grass_map.glslf"),X(a,"a_position"),c=b.rj.rr?b.rj.rr:null,b=b.rj.qr?b.rj.qr:null,a.ud.a_grass_size={Wm:!0,src:[]},c?(a.ud.a_grass_size.src.push({name:c,Hh:4}),Q(a,"DYNAMIC_GRASS_SIZE",1)):Q(a,"DYNAMIC_GRASS_SIZE",0),a.ud.a_grass_color={Wm:!0,src:[]},b?(a.ud.a_grass_color.src.push({name:b,Hh:7}),Q(a,"DYNAMIC_GRASS_COLOR",1)):Q(a,"DYNAMIC_GRASS_COLOR",0),Q(a,"GRASS_TEXTURE_SIZE",ya.Fa(Ha.Ir)),e=!0);
break;case "DEBUG_VIEW":e=ja(a,b);break;case "PARTICLES":a:if(b.bf)e=!1;else{e=b.ih;if(a.Jr)ga(a,"particle_system.glslv","particle_system_stack.glslf"),Q(a,"HALO_PARTICLES",1),W(a,b);else{d={bd:!1,Df:b.Df,Mf:b.Mf,Se:b.Se};if(b.kh){ga(a,"particle_system.glslv","particle_system.glslf");M(a,b,c,"PARTICLES");e=!0;break a}ga(a,"particle_system.glslv","particle_system_stack.glslf");c=w(b.nd);c=Ga.pz(c,d,a.gj);a.Lb.Jf=Ga.Zq(c);if(c=g("use_map_color_diffuse",e)[0]){Q(a,"TEXTURE_COLOR",1);switch(c.blend_type){case "MIX":Q(a,
"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX");break;case "MULTIPLY":Q(a,"TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY")}a.Vi=c.diffuse_color_factor;c.use_map_alpha?a.ph=c.alpha_factor:a.ph=0;P(a,Xa.gf(c),"default"+String(a.Ua.length),c.texture.name)}}a.Qc.set(b.Qc);a.Qc[3]=b.alpha;a.ce=b.ce;a.Ie=b.Ie;a.fe=b.fe;a.Qe.set(b.Qe);a.pg=b.pg;X(a,"a_position");X(a,"a_tbn");Q(a,"ALPHA","OPAQUE"===b.Ob?0:1);Q(a,"ALPHA_CLIP","CLIP"===b.Ob?1:0);Q(a,"PARTICLES_SHADELESS",b.bd?1:0);ka(a,b);wa(a,b);n(a,b);
a.ob=b.ob;a.Hi=b.vk&&"OPAQUE"!=b.Ob&&"CLIP"!=b.Ob&&"ALPHA_ANTIALIASING"!=b.Ob;a.Ud=b.Ud;e=!0}break;default:na.va("Wrong batch type: "+a.type)}return e}function w(a,b,c){var g="";Ua.xb()&&(g=Ua.get_active().uuid);return Ga.pP(a,b,g,c)}function W(a,b){var c=b.Ko;Q(a,"NUM_RINGS",c.Tw);Q(a,"NUM_LINES",c.Zv);Q(a,"NUM_STARS",c.Ax);Q(a,"SKY_STARS",c.Rv?1:0);a.Fv=c.size;a.Cv=c.Kr/20;a.Ev.set(c.Uw);a.Dv.set(c.aw);a.Gv=1/c.Bx;a.Hv=c.Cx;a.Bv=!0}function A(a,b,c){switch(b.texture_coords){case "UV":case "ORCO":Q(a,
c,"TEXTURE_COORDS_UV_ORCO");Q(a,"TEXCOORD",1);break;case "NORMAL":Q(a,c,"TEXTURE_COORDS_NORMAL");Q(a,"NORMAL_TEXCOORD",1);break;default:Q(a,c,"TEXTURE_COORDS_NONE")}}function n(a,b){switch(b.Ob){case "ALPHA_ANTIALIASING":a.Qb=!1;a.Rf=!1;a.yb=!0;a.Cj=!1;a.Vf=!0;break;case "ALPHA_SORT":a.Qb=!0;a.Rf=!0;a.yb=!0;a.Cj=!1;a.Vf=!1;break;case "ALPHA":a.Qb=!0;a.Rf=!1;a.yb=!0;a.Cj=!1;a.Vf=!1;break;case "CLIP":a.Qb=!1;a.Rf=!1;a.yb=!0;a.Cj=!0;a.Vf=!1;break;case "ADD":a.Qb=!0;a.Rf=!1;a.yb=!1;a.Cj=!1;a.Vf=!1;break;
case "OPAQUE":a.Qb=!1;a.Rf=!1;a.yb=!0;a.Cj=!1;a.Vf=!1;break;default:na.va("Unknown alpha blend mode: "+b.Ob)}}function g(a,b){for(var c=[],g=b.length,e=0;e<g;e++){var h=b[e];1==h[a]&&h.texture&&h.texture.sa&&c.push(h)}return c}function ea(a,b){var c=b.zn;a.reflect_factor=c.reflect_factor;a.ii[0]=c.fresnel;a.ii[1]=1-c.fresnel_factor/5}function ka(a,b){var c,g=0;switch(b.Mf){case "PHONG":case "COOKTORR":c=b.Dn;break;case "WARDISO":c=b.vx;break;case "TOON":c=b.wx;g=b.xx;break;case "BLINN":c=b.ux;g=b.Dn;
break;default:fa.error("unsupported specular shader: "+b.Mf+' (material "'+b.name+'")'),c=b.Dn}a.rf[0]=b.Rs;a.rf[1]=c;a.rf[2]=g}function wa(a,b){switch(b.Df){case "LAMBERT":a.ee[0]=0;a.ee[1]=0;break;case "OREN_NAYAR":a.ee[0]=b.Vw;a.ee[1]=0;break;case "FRESNEL":a.ee[0]=b.Hu;a.ee[1]=b.Iu;break;case "MINNAERT":a.ee[0]=b.Au;a.ee[1]=0;break;case "TOON":a.ee[0]=b.Ju;a.ee[1]=b.Ku;break;default:fa.error("unsupported diffuse shader: "+b.Df+' (material "'+b.name+'")'),a.ee[0]=0,a.ee[1]=0}}function M(a,b,c,
g){if(!b.kh||b.bf)return!1;var e;switch(g){case "MAIN":ga(a,"main.glslv","main.glslf");e=!1;break;case "GLOW":ga(a,"main.glslv","main.glslf");e=!0;break;case "SHADOW":ga(a,"shadow.glslv","shadow.glslf");e=!1;break;case "COLOR_ID":ga(a,"color_id.glslv","color_id.glslf"),e=!1}var h=b.ke;c={yC:c.active_vcol_name,xC:c.active_uv_name};var f=w(b.nd,g,c);g=Ga.xE(h,f,g,c,a.gj);if(!g.fb)return fa.error('Failed to create node graph for material "'+b.name+'", disable nodes'),oa(a,b),!0;a.Le=g.id;a.bc=!0;Q(a,
"NODES",1);Q(a,"DOUBLE_SIDED_LIGHTING",b.Xp?1:0);X(a,"a_position");b.dy&&X(a,"a_orco_tex_coord");n(a,b);a.ob=b.ob;a.Ud=b.Ud;e?(Q(a,"ALPHA",1),Q(a,"ALPHA_CLIP",0)):(Q(a,"ALPHA","OPAQUE"===b.Ob?0:1),Q(a,"ALPHA_CLIP","CLIP"===b.Ob?1:0));a.Hi=b.vk&&"OPAQUE"!=b.Ob&&"CLIP"!=b.Ob&&"ALPHA_ANTIALIASING"!=b.Ob;a.fe=b.fe;a.ce=b.ce;ea(a,b);b.Qr?Q(a,"WETTABLE",1):Q(a,"WETTABLE",0);var k=null,l=!1;Da.Oa(g.fb,function(c,g){switch(g.type){case "UVMAP":case "TEX_COORD_UV":case "GEOMETRY_UV":case "UV_MERGED":var e=
g.data.name,h=g.data.value;a.uj||(a.uj={});a.uj[h]=e;break;case "GEOMETRY_VC":case "GEOMETRY_VC1":case "GEOMETRY_VC2":case "GEOMETRY_VC3":e=g.data.name;a.ud[e]={Wm:!0,src:[{name:g.data.value}]};h=0;if("GEOMETRY_VC"==g.type)h=7;else for(var f=0;f<g.outputs.length;f++){var n="RGB".indexOf(g.outputs[f].identifier);-1<n&&(h|=1<<2-n)}a.ud[e].src[0].Hh=h;break;case "TEX_COORD_NO":case "TEX_COORD_RE":case "GEOMETRY_NO":case "FRESNEL":case "LAYER_WEIGHT":X(a,"a_tbn");break;case "TEX_COORD_OB":Q(a,"USE_MODEL_TSR_INVERSE",
1);break;case "TEX_COORD_WI":Q(a,"USE_POSITION_CLIP",1);break;case "MATERIAL_BEGIN":g.data.value.Se&&(Q(a,"USE_TBN_SHADING",1),"PARTICLES"!=a.type&&X(a,"a_shade_tangs"));X(a,"a_tbn");l=!0;break;case "BSDF_BEGIN":l=!0;X(a,"a_tbn");break;case "TEXTURE_COLOR":case "TEXTURE_ENVIRONMENT_CUBE":case "TEXTURE_ENVIRONMENT_EQUIRECTANGULAR":case "TEXTURE_ENVIRONMENT_MIRROR_BALL":e=g.data.name;h=g.data.Lq;f=g.data.value;P(a,f,e,h);break;case "TEXTURE_NORMAL":case "B4W_PARALLAX":Q(a,"CALC_TBN_SPACE",1);X(a,"a_tbn");
g.data&&(e=g.data.name,h=g.data.Lq,f=g.data.value,P(a,f,e,h));break;case "NORMAL_MAP":X(a,"a_tbn");switch(Number(g.Gb[0][1])){case Ga.mK:Q(a,"CALC_TBN_SPACE",1);break;case Ga.lK:case Ga.kK:Q(a,"USE_MODEL_TSR",1)}break;case "LAMP":g.data&&(a.gn=g.data);break;case "B4W_REFRACTION":a.Qb?a.tk=!0:(a.tk=!1,fa.warn('Material "'+b.name+'" is not blend. Disabling refractions.'));Q(a,"USE_POSITION_CLIP",1);break;case "VALTORGB":case "CURVE_VEC":case "CURVE_RGB":k||(k=g.data.wb);break;case "PARTICLE_INFO":"PARTICLES"==
a.type&&g.data&&(a.ks=g.data);break;case "VECT_TRANSFORM":switch(Number(g.Gb[1][1])){case Ga.nD:Q(a,"USE_MODEL_TSR_INVERSE",1);break;case Ga.mD:Q(a,"USE_VIEW_TSR",1);break;case Ga.lD:Q(a,"USE_MODEL_TSR",1);break;case Ga.kD:Q(a,"USE_MODEL_TSR",1);Q(a,"USE_VIEW_TSR",1);break;case Ga.jD:Q(a,"USE_VIEW_TSR_INVERSE",1);break;case Ga.iD:Q(a,"USE_MODEL_TSR_INVERSE",1),Q(a,"USE_VIEW_TSR_INVERSE",1)}break;case "OBJECT_INFO":Q(a,"USE_MODEL_TSR",1);a.lp[1]=b.mj;a.lp[2]=Math.random();break;case "B4W_VECTOR_VIEW":case "GEOMETRY_VW":Q(a,
"USE_VIEW_TSR",1);break;case "B4W_REFLECT":Q(a,"USE_VIEW_TSR_INVERSE",1);break;case "BUMP":case "DISPLACEMENT_BUMP":X(a,"a_tbn");Za.Yz()?Q(a,"USE_DERIVATIVES_EXT",1):fa.warn('"OES_standard_derivatives" extension is not available. Disabling the BUMP node in the "'+b.name+'" material.');break;case "BSDF_TRANSPARENT":g.data.value.TU?Q(a,"USE_BSDF_TRANSPARENT_ALPHA",1):(a.Qb=!0,a.tk=!0,Q(a,"USE_BSDF_TRANSPARENT_REFRACT",1));break;case "BSDF_GLOSSY":case "BSDF_DIFFUSE":case "BSDF_PRINCIPLED":Q(a,"USE_BSDF_SKY_DIM",
1),Za.GF()&&Q(a,"USE_TEXTURE_LOD_EXT",1)}});k&&P(a,k,"u_nodes_texture");l||(a.bd=!0);e=a.Lb.Jf=Ga.Zq(g.fb);Z(g.fb,a);g=a.pi;h=a.oi;for(c=0;c<e.length;c++)switch(f=e[c],f.id){case "VALUE":var d=f.np[0];if(d)for(var m=0;m<g.length;m+=3)if(g[m]==d){f.Gb.push(["VALUE_ROW_IND",g[m+1]]);f.Gb.push(["VALUE_COL_IND",g[m+2]]);break}break;case "RGB":if(d=f.np[0])for(m=0;m<h.length;m+=2)if(h[m]==d){f.Gb.push(["RGB_IND",h[m+1]]);break}}Q(a,"NUM_VALUES",a.ri.length/4);Q(a,"NUM_RGBS",a.Me.length);return!0}function t(a,
b){var c=b.sa.mm;if(""!=c.Le){a.bc=!0;a.Le=c.Le;var g=Ga.pv(c.Le).fb;if(g){var e=null;Da.Oa(g,function(b,c){switch(c.type){case "TEXTURE_COLOR":case "TEXTURE_ENVIRONMENT_EQUIRECTANGULAR":case "TEXTURE_ENVIRONMENT_MIRROR_BALL":P(a,c.data.value,c.data.name,c.data.Lq);break;case "VALTORGB":case "CURVE_VEC":case "CURVE_RGB":e||(e=c.data.wb);break;case "VECT_TRANSFORM":switch(Number(c.Gb[1][1])){case Ga.nD:Q(a,"USE_MODEL_TSR_INVERSE",1);break;case Ga.mD:Q(a,"USE_VIEW_TSR",1);break;case Ga.lD:Q(a,"USE_MODEL_TSR",
1);break;case Ga.kD:Q(a,"USE_MODEL_TSR",1);Q(a,"USE_VIEW_TSR",1);break;case Ga.jD:Q(a,"USE_VIEW_TSR_INVERSE",1);break;case Ga.iD:Q(a,"USE_MODEL_TSR_INVERSE",1),Q(a,"USE_VIEW_TSR_INVERSE",1)}break;case "B4W_VECTOR_VIEW":Q(a,"USE_VIEW_TSR",1);break;case "B4W_REFLECT":Q(a,"USE_VIEW_TSR_INVERSE",1)}});e&&P(a,e,"u_nodes_texture");c=a.Lb.Jf=Ga.Zq(g);Z(g,a);for(var g=a.pi,h=a.oi,f=0;f<c.length;f++){var k=c[f];switch(k.id){case "VALUE":var l=k.np[0];if(l)for(var n=0;n<g.length;n+=3)if(g[n]==l){k.Gb.push(["VALUE_ROW_IND",
g[n+1]]);k.Gb.push(["VALUE_COL_IND",g[n+2]]);break}break;case "RGB":if(l=k.np[0])for(n=0;n<h.length;n+=2)if(h[n]==l){k.Gb.push(["RGB_IND",h[n+1]]);break}}}Q(a,"NUM_VALUES",a.ri.length/4);Q(a,"NUM_RGBS",a.Me.length)}else fa.error('Failed to create node graph for world "'+b.world.name+'", disable nodes'),oa(a,b.world.name)}}function Z(a,b){var c=[],g=[],e=[],h=[];aa(a,c,g,e,h);b.ri=c;b.pi=g;b.Me=e;b.oi=h}function aa(a,b,c,g,e){Da.Oa(a,function(a,h){if("VALUE"==h.type){var f=""+h.name;b.push(h.outputs[0].rb);
var k=c.length/3;c.push(f,parseInt(k/4),parseInt(k%4))}else"RGB"==h.type&&(f=""+h.name,k=h.outputs[0].rb.slice(0,3),g.push(k[0],k[1],k[2]),e.push(f,e.length/2))});a=b.length+4-b.length%4;for(var h=b.length;h<a;h++)b.push(0)}function oa(a,b){switch(a.type){case "SHADOW":ga(a,"shadow.glslv","shadow.glslf");break;case "COLOR_ID":ga(a,"color_id.glslv","color_id.glslf");break;default:ga(a,"main.glslv","main_stack.glslf")}Q(a,"SHADELESS",1);X(a,"a_position");X(a,"a_tbn");L.set(1,0,1,1,a.Qc);b&&(Q(a,"ALPHA",
"OPAQUE"===b.Ob?0:1),Q(a,"ALPHA_CLIP","CLIP"===b.Ob?1:0),Q(a,"VERTEX_COLOR",0),a.Ud=b.Ud,n(a,b),a.ob=b.ob);return!0}function ja(a,b){if(b&&(b.cj||b.bf))return!1;ga(a,"debug_view.glslv","debug_view.glslf");X(a,"a_position");X(a,"a_tbn");X(a,"a_polyindex");a.yb=!0;C.set(0,0,0,a.wireframe_edge_color);return!0}function Ia(a,b){a.He=b.He;if("PHYSICS"!==a.type){"DYNAMIC"==b.type||"COLOR_ID"==a.type?(b.ul?Q(a,"AU_QUALIFIER","GLSL_IN"):Q(a,"AU_QUALIFIER","uniform"),Q(a,"STATIC_BATCH",0)):(Q(a,"AU_QUALIFIER",
"GLSL_IN"),Q(a,"STATIC_BATCH",1));"DEBUG_VIEW"==a.type&&(Za.Yz()?Q(a,"WIREFRAME_QUALITY",1):Q(a,"WIREFRAME_QUALITY",0),a.Tj?(Q(a,"DEBUG_SPHERE",1),a.Du?Q(a,"DEBUG_SPHERE_DYNAMIC",1):Q(a,"DEBUG_SPHERE_DYNAMIC",0)):Q(a,"DEBUG_SPHERE",0),Q(a,"ALPHA",1));b.Of&&"PARTICLES"!=a.type&&!b.ul&&(a.Of=b.Of);b.wf?(""!==b.jk?(a.ud.a_bending_col_main={Wm:!0,src:[{name:b.jk,Hh:4}]},X(a,"a_bending_col_main"),""!==b.Cf.BA&&""!==b.Cf.AA&&""!==b.Cf.fB?(a.ud.a_bending_col_detail={Wm:!0,src:[{name:b.Cf.BA,Hh:4},{name:b.Cf.AA,
Hh:2},{name:b.Cf.fB,Hh:1}]},X(a,"a_bending_col_detail"),X(a,"a_tbn"),Q(a,"DETAIL_BEND",1)):Q(a,"DETAIL_BEND",0),Q(a,"MAIN_BEND_COL",1)):Q(a,"MAIN_BEND_COL",0),b.zm?Q(a,"BEND_CENTER_ONLY",1):Q(a,"BEND_CENTER_ONLY",0),Q(a,"WIND_BEND",1)):Q(a,"WIND_BEND",0);Q(a,"BILLBOARD_PRES_GLOB_ORIENTATION",b.Hq|0);b.qh?Q(a,"BILLBOARD",1):Q(a,"BILLBOARD",0);b.qh&&b.ul?Q(a,"HAIR_BILLBOARD",1):Q(a,"HAIR_BILLBOARD",0);b.Iq?Q(a,"BILLBOARD_SPHERICAL",1):Q(a,"BILLBOARD_SPHERICAL",0);switch(b.Jq){case "RANDOM":Q(a,"BILLBOARD_RANDOM",
1);Q(a,"BILLBOARD_JITTERED",0);break;case "JITTERED":Q(a,"BILLBOARD_RANDOM",0);Q(a,"BILLBOARD_JITTERED",1);break;default:Q(a,"BILLBOARD_RANDOM",0),Q(a,"BILLBOARD_JITTERED",0)}b.sd&&ba.Pt?Q(a,"DYNAMIC_GRASS",1):Q(a,"DYNAMIC_GRASS",0);a.sd=b.sd;"PARTICLES"!=a.type&&(a.cf=b.cf);a.Lf=b.Lf;a.qf=b.qf;a.ze=b.ze&&!a.bd&&!(a.Qb&&ba.Cz);ba.Ds?("MAIN"==a.type&&a.ze||"SHADOW"==a.type)&&Q(a,"RGBA_SHADOWS",1):Q(a,"RGBA_SHADOWS",0);a.Oe=b.Oe;a.xe=b.xe;a.Fd=b.Fd;a.lp[0]=b.mj;a.Wg=b.Wg;a.Xg=b.Xg;a.hk=b.hk;a.ik=b.ik;
a.Ge=b.Ge;a.ue=b.ue;b.wl?(X(a,"a_influence"),Q(a,"SKINNED",1),ba.hx?(Q(a,"DISABLE_TANGENT_SKINNING",1),Q(a,"FRAMES_BLENDING",0)):(Q(a,"DISABLE_TANGENT_SKINNING",0),b.Tm?Q(a,"FRAMES_BLENDING",1):Q(a,"FRAMES_BLENDING",0)),Q(a,"MAX_BONES",b.mi)):(Q(a,"SKINNED",0),Q(a,"FRAMES_BLENDING",0),Q(a,"DISABLE_TANGENT_SKINNING",0));b.Jd?(Q(a,"VERTEX_ANIM",1),ba.dJ?Q(a,"VERTEX_ANIM_MIX_NORMALS_FACTOR",.5):Q(a,"VERTEX_ANIM_MIX_NORMALS_FACTOR","u_va_frame_factor")):Q(a,"VERTEX_ANIM",0);b.wl&&b.Jd&&na.va("Skinning and vertex animation are mutually exlusive")}}
function Ca(a,b,c){if(b.length){for(var g=Sa.rv(b,ba.ssao&&c.b4w_enable_ssao),e=a.Lb,h=a.gn,f=0,k=0;k<a.Lb.Jf.length;k++){var l=a.Lb.Jf[k];if("LIGHTING_LAMP"==l.id){var n=b[f++%b.length],d=n.lc,w=Sa.lb(n,c);if("SPOT"==d.type||"POINT"==d.type)var m=Math.cos(d.En/2);if("SPOT"==d.type)var z=d.Ts*(1-m);n=g.indexOf(n);l.Gb=[["LAMP_TYPE",d.type],["LAMP_IND",w.Yr],["LAMP_SPOT_SIZE",ya.Fa(m||.01)],["LAMP_SPOT_BLEND",ya.Fa(z||.01)],["LAMP_LIGHT_DIST",ya.Fa(d.distance)],["LAMP_USE_SPHERE",d.wC?1:0],["LAMP_SHADOW_MAP_IND",
n]]}else if("LAMP"==l.id&&h)for(var w=l.Gb[0][1],p=0;p<b.length;p++)if(n=b[p],h[n.nd]==w){d=n.lc;if("SPOT"==d.type||"POINT"==d.type)m=Math.cos(d.En/2);"SPOT"==d.type&&(z=d.Ts*(1-m));l.Gb.push(["LAMP_TYPE",d.type],["LAMP_SPOT_SIZE",ya.Fa(m||.01)],["LAMP_SPOT_BLEND",ya.Fa(z||.01)],["LAMP_LIGHT_DIST",ya.Fa(d.distance)],["LAMP_USE_SPHERE",d.wC?1:0])}}if(h){c=0;for(var A in h)c++;a.Wo=new Float32Array(3*c);a.Tr=new Float32Array(3*c);a.Sr=new Float32Array(3*c);ya.Wa(e,"NUM_LAMP_LIGHTS",c);for(k=0;k<b.length;k++)Ja(a,
b[k])}}}function Ja(a,b){if(b.nd in a.gn){var c=a.gn[b.nd],g=la.j(b.ka.na);a.Wo.set(g,3*c);a.Tr.set(b.lc.direction,3*c);a.Sr.set(b.lc.Xq,3*c)}}function Ma(a,b){for(var c=0;c<b.length;c++){var g=b[c].settings.b4w_vcol_from_name,e=b[c].settings.b4w_vcol_to_name;""!==g&&""!==e&&(a.ud[g]={Wm:!1,src:[{name:g,Hh:7}]})}}function X(a,b){var c=a.Oj;-1==c.indexOf(b)&&c.push(b);a.Oj=c.sort()}function Q(a,b,c){ya.Wa(a.Lb,b,c)}function Aa(a,b,c){if("PHYSICS"==a.type)"NAVMESH"==a.fc?a.Za=sa.pI(b,sa.Yn,[]):(0<b.Ub.length&&
sa.$T(b,b.Va[0],c),a.Wd=b);else{c=a.fi;a.Bv&&"PARTICLES"!=a.type&&(b=sa.TO(b));a.py&&(b=La.lP(a.qy,a.ry,a.oy));c=sa.pI(b,c,a.ud);a.Za=c;a.cf||a.Rf||a.Of||(c.Je=null,c.Pc.length=0);c=b.Va.length;a.num_vertices=b.Eb*c;var g;a:switch(a.fi){case sa.Yn:case sa.pq:case sa.At:g=!0;break a;default:g=!1}g?sa.MQ(b)?a.num_triangles=b.$a.length/3*c:a.num_triangles=b.Eb/3*c:a.num_triangles=0}}function Ba(a,b,c,g,e,h,f,k,l,n,d,w,m){var p=a.qb,A=[],R=k.b4w_dynamic_grass;if(!n&&R)return A;for(var J="INSTANCE"==k.b4w_wind_bend_inheritance,
F="INSTANCE"==k.b4w_shadow_inheritance,D="INSTANCE"==k.b4w_reflection_inheritance,y=[],W=[],xa=0;xa<e.length;xa++){var q=e[xa].qb.ka,v=Sa.iz(b);v.qh=k.b4w_hair_billboard;v.Jq=k.b4w_hair_billboard_type;v.Iq="SPHERICAL"==k.b4w_hair_billboard_geometry;v.sd=R;v.ul=!0;J?(v.wf=q.wf,v.Wn=q.Wn,v.Ag=q.Ag,v.fg=q.fg,v.jk=q.jk,v.eg=q.eg,v.$f=q.$f,v.zg=q.zg,v.Cf=q.Cf,v.zm=!1):(v.wf=p.ka.wf,v.Wn=p.ka.Wn,v.Ag=p.ka.Ag,v.fg=p.ka.fg,v.jk=p.ka.jk,v.eg=p.ka.eg,v.$f=p.ka.$f,v.zg=p.ka.zg,v.Cf=p.ka.Cf,v.zm=!0);F?(v.Lf=
q.Lf,v.qf=q.qf,v.ze=q.ze):(v.Lf=p.ka.Lf,v.qf=p.ka.qf,v.ze=p.ka.ze);D?(v.Oe=q.Oe,v.xe=q.xe,v.Fd=q.Fd,v.Ge=q.Ge,v.ue=q.ue,v.Mh=q.Mh):(v.Oe=p.ka.Oe,v.xe=p.ka.xe,v.Fd=p.ka.Fd,v.Ge=p.ka.Ge,v.ue=p.ka.ue,v.Mh=p.ka.Mh);y.push(v);var M=f[xa];M||(M=new Float32Array);w&&B._13(l.seed,d);var ca=new Float32Array(3),x=new Float32Array([0,0,0,1]),V=[],K=-1!=B._69(ba.DA,nb)&&!k.b4w_initial_rand_rotation&&!k.b4w_hair_billboard,N=4;K&&(N=8);for(var Qa=0;Qa<M.length;Qa+=N){ca[0]=M[Qa];ca[1]=M[Qa+1];ca[2]=M[Qa+2];var P=
M[Qa+3]*la.h(q.na);if(k.b4w_initial_rand_rotation){switch(k.b4w_rotation_type){case "XYZ":var G=new Float32Array([B._39(d),B._39(d),B._39(d)]);C.normalize(G,G);break;case "Z":G=new Float32Array([0,0,1]);break;default:na.va("Unsupported random rotation type: "+k.b4w_rotation_type)}u.setAxisAngle(G,k.b4w_rand_rotation_strength*(2*Math.PI*B._39(d)-Math.PI),x)}else if(K&&(x.set(M.subarray(Qa+4,Qa+8)),B._28(x,x),!k.use_whole_group))if(k.use_rotation_dupli){var L=la.g(q.na);u.multiply(x,L,x)}else u.multiply(x,
vb,x);var ea=la.s(ca,P,x,la.b());V.push(ea)}W.push(V)}for(var wa={},r=0,xa=0;xa<e.length;xa++)for(var I=e[xa].qb.Sc,Qa=0;Qa<I.length;Qa++)I[Qa].name in wa?wa[I[Qa].name]++:(wa[I[Qa].name]=1,r++);for(var r=r?r:1,S={},xa=0;xa<e.length;xa++){var aa=e[xa],za=h[xa],v=y[xa],Ya={};v.wf&&(Ya.au_wind_bending_amp=[v.zg],Ya.au_wind_bending_freq=[v.Ag],Ya.au_detail_bending_freq=[v.fg],Ya.au_detail_bending_amp=[v.eg],Ya.au_branch_bending_amp=[v.$f],v.zg=0,v.Ag=0,v.fg=0,v.eg=0,v.$f=0);V=W[xa];if(V.length){for(var ka=
aa.data,I=aa.qb.Sc,yb=Array(I.length),Ja=Array(I.length),Qa=0;Qa<I.length;Qa++)if(!ia(p,Qa)&&!sa.PF(ka,Qa))for(var ua=0;ua<za.length;ua++){var db=za[ua],X=H(db),Xa=I[Qa];"MAIN"==db?yb[Qa]=X:"DEBUG_VIEW"==db&&(Ja[Qa]=X);X.Wq=a.b4w_cluster_data.cluster_id;if(E(X,Xa)&&(X.gj=B.O(m),z(X,Xa,ka))){"SHADOW"==db&&yb[Qa]&&(X.bd=yb[Qa].bd);X.fi=sa.Yn;Ia(X,v);X.El=pa(X,v,k.uuid);X.Vj=a.b4w_do_not_cull||k.b4w_dynamic_grass;"MAIN"==X.type&&(X.Ng=a.b4w_caustics);Q(X,"DISABLE_FOG",("COLOR_ID"!=db&&"SHADOW"!=db&&
a.b4w_disable_fogging)|0);"JITTERED"==k.b4w_hair_billboard_type&&(X.Sv=k.b4w_hair_billboard_jitter_amp,X.Tv=k.b4w_hair_billboard_jitter_freq);R&&(X.vv=k.b4w_dynamic_grass_scale_threshold);J||(delete X.ud.a_bending_col_main,delete X.ud.a_bending_col_detail);var U=sa.Wu(ka,Qa,X.Oj,b.Oi,X.ud,X.uj),t=p.ka.na,$a=!0;if(1<wa[Xa.name]){var Z=0,oa;for(oa in U.Va)Z++;$a=U.$a.length*V.length*Z*wa[Xa.name]>2E5*r}var da=ba.yD&&$a&&"PHYSICS"!=X.type;if(da){X.WF=k.use_whole_group?2:1;var Da=sa.bN(U);sa.WD(U,Da,
V);Da.Gf={at:V,VB:t,iI:"STATIC"==b.type,Fx:Ya,op:{},Ou:R};if(v.wf&&v.zm){var qa=C.fromValues(0,0,0);la.B(qa,p.ka.na,qa);for(var Ca=[],Za=0;Za<V.length;Za++)Ca.push(qa[0],qa[1],qa[2]);Da.Gf.op.a_emitter_center={Tc:3,data:Ca}}sa.WD(U,U,V);"STATIC"==b.type&&sa.rM(Da.Hd,t)}else{var Ba=Da=sa.wR(U,Ya,V),Ea=V;Ba.gb.au_center_pos=new Float32Array(3*Ba.Eb);for(var ja=Ea.length,ga=Ba.Eb/ja,ta=0;ta<ja;ta++)for(var Fa=Ea[ta],Ma=3*ga*ta,ra=0;ra<ga;ra++)Ba.gb.au_center_pos[Ma+3*ra]=Fa[0],Ba.gb.au_center_pos[Ma+
3*ra+1]=Fa[1],Ba.gb.au_center_pos[Ma+3*ra+2]=Fa[2];Da=Ba;if(v.wf&&v.zm){var Wa=Da,Oa=p.ka.na;Wa.gb.a_emitter_center=new Float32Array(3*Wa.Eb);var gb=C.fromValues(0,0,0);la.B(gb,Oa,gb);for(var ya=0;ya<Wa.Eb;ya++)Wa.gb.a_emitter_center[3*ya]=gb[0],Wa.gb.a_emitter_center[3*ya+1]=gb[1],Wa.gb.a_emitter_center[3*ya+2]=gb[2];Da=Wa}}var Ga=k.b4w_vcol_from_name,Ua=k.b4w_vcol_to_name,va=X,Pa=c,ha=!J,ab=ka,O=[];if(""!==Ga&&""!==Ua){var Ha,wb=void 0,La=Ua,Aa=va.ud,T=[];for(wb in Aa)for(var eb=Aa[wb].src,hb=0,
sb=0;sb<eb.length;sb++){var lb=eb[sb].Hh;La==eb[sb].name&&T.push(wb,lb,hb);hb+=B._42(lb)}Ha=T;if(0<Ha.length)for(var bb=0;bb<Ha.length;bb+=3)O.push({sr:Ga,Qu:7,Iw:Ha[bb],Jw:Ha[bb+1],Nu:Ha[bb+2]});else sa.pQ(va.Oj,"a_color")&&Ua==ab.active_vcol_name&&O.push({sr:Ga,Qu:7,Iw:"a_color",Jw:7,Nu:0})}ha&&("a_bending_col_main"in Pa&&O.push({sr:"a_bending_col_main",Qu:4,Iw:"a_bending_col_main",Jw:4,Nu:0}),"a_bending_col_detail"in Pa&&O.push({sr:"a_bending_col_detail",Qu:7,Iw:"a_bending_col_detail",Jw:7,Nu:0}));
for(var Va=Da,Ib=V,rb=g,nc=O,ic=X.ud,Rb=da,uc=!1,Db=0;Db<nc.length;Db++){var qc=nc[Db].sr,Mb=rb.gb[qc];if(Mb&&0<Mb.length){uc=!0;break}}if(Rb)var Ab=Va.Gf.op;if(uc){var nd,rc=p.ka.eb,Vb=rb.Va[0].a_position,fc=Ib,fb=S,Zb=new Float32Array(3),Bb=new Float32Array(3),Sc=new Uint32Array(fc.length);if(!("verts_indices"in fb)){fb.Mj=new Float32Array(3);fb.Gj=new Float32Array(3);fb.zC=new Uint32Array(Vb.length/3);fb.fs=new Uint32Array(Vb.length/3);fb.Mj[0]=(rc.max_x-rc.min_x)/20;fb.Mj[1]=(rc.max_y-rc.min_y)/
20;fb.Mj[2]=(rc.max_z-rc.min_z)/20;fb.Gj[0]=rc.min_x;fb.Gj[1]=rc.min_y;fb.Gj[2]=rc.min_z;for(var Jb=0;Jb<Vb.length/3;Jb++){var xc=Vb[3*Jb+1],sc=Vb[3*Jb+2],Tc=B._63((Vb[3*Jb]-fb.Gj[0])/fb.Mj[0]),Vc=B._63((xc-fb.Gj[1])/fb.Mj[1]),Wc=B._63((sc-fb.Gj[2])/fb.Mj[2]),Tc=B.M(Tc,0,19),Vc=B.M(Vc,0,19),Wc=B.M(Wc,0,19);fb.zC[Jb]=Jb;fb.fs[Jb]=Wc*Math.pow(20,2)+20*Vc+Tc}sa.IT(fb.fs,fb.zC,sa.Ly,!0);fb.Qn=new Uint32Array(Math.pow(20,3));for(Jb=0;Jb<fb.fs.length;Jb++)fb.Qn[fb.fs[Jb]]++;delete fb.fs;for(Jb=1;Jb<fb.Qn.length;Jb++)fb.Qn[Jb]+=
fb.Qn[Jb-1]}for(var ib=0;ib<fc.length;ib++){Zb[0]=fc[ib][0];Zb[1]=fc[ib][1];Zb[2]=fc[ib][2];for(var Nb=1E10,Eb=-1,cd=B._63((Zb[0]-fb.Gj[0])/fb.Mj[0]),dd=B._63((Zb[1]-fb.Gj[1])/fb.Mj[1]),yc=B._63((Zb[2]-fb.Gj[2])/fb.Mj[2]),cd=B.M(cd,0,19),dd=B.M(dd,0,19),yc=B.M(yc,0,19),od=yc*Math.pow(20,2)+20*dd+cd,Jd=fb.Qn[od],kc=0==od?0:fb.Qn[od-1];kc<Jd;kc++){var Ad=fb.zC[kc];Bb[0]=Vb[3*Ad];Bb[1]=Vb[3*Ad+1];Bb[2]=Vb[3*Ad+2];C.sub(Bb,Zb,Bb);var tc=C.sqrLen(Bb);tc<=Nb&&(Nb=tc,Eb=Ad)}if(-1==Eb)for(kc=0;kc<Vb.length/
3;kc++)Bb[0]=Vb[3*kc],Bb[1]=Vb[3*kc+1],Bb[2]=Vb[3*kc+2],C.sub(Bb,Zb,Bb),tc=C.sqrLen(Bb),tc<=Nb&&(Nb=tc,Eb=kc);Sc[ib]=Eb}nd=Sc;for(var Wd=Va.Eb/Ib.length,Db=0;Db<nc.length;Db++){var vc=nc[Db].Iw,pd=nc[Db].Jw,qc=nc[Db].sr,ed=nc[Db].Qu,Mb=rb.gb[qc];switch(vc){case "a_bending_col_main":var Jc=1;break;case "a_bending_col_detail":Jc=3;break;case "a_color":Jc=3;break;default:for(var Bc=Jc=0;Bc<ic[vc].src.length;Bc++)Jc+=B._42(ic[vc].src[Bc].Hh)}if(Mb&&0<Mb.length){var Bd=B._42(ed),Cd=B._42(pd),qd=ed&pd,
fd=B._43(qd);qd!=pd&&fa.error("Wrong color extraction from "+qc+" to "+vc+".");if(Rb)for(Ab[vc]={Tc:Jc,data:[]},Bc=0;Bc<Ib.length;Bc++)for(gd=nd[Bc],Xc=gd*Bd,zc=0;zc<fd.length;zc++)fd[zc]&&(rd=B._41(ed,zc),Ab[vc].data.push(Mb[Xc+rd]));else{if("a_bending_col_main"==vc||"a_bending_col_detail"==vc)Va.gb[vc]=new Float32Array(Va.Eb*Cd);for(Bc=0;Bc<Ib.length;Bc++){var gd=nd[Bc],Xc=gd*Bd,Kd=Bc*Wd*Jc;if(-1!=gd)for(var Ld=0;Ld<Wd;Ld++)for(var Md=Ld*Jc,zc=0;zc<fd.length;zc++)if(fd[zc]){var rd=B._41(ed,zc),
Nd=nc[Db].Nu+B._41(pd,zc);Va.gb[vc][Kd+Md+Nd]=Mb[Xc+rd]}}}}else Va.gb[vc]=new Float32Array(0)}}Da=Va;Q(X,"USE_INSTANCED_PARTCLS",Da.Gf?1:0);Ra(X);A.push({hb:X,ah:b,bu:v,Wd:Da,Ih:[Xa.name],Pe:[a]})}}for(Qa=0;Qa<Ja.length;Qa++)Ja[Qa]&&(Ja[Qa].so=yb[Qa].id,Ra(Ja[Qa]))}}return A}function E(a,b){var c=!0;"NODES_GLOW"==a.type&&(c=Ga.dE(b));return c}function Ra(a){ta(a,function(a){a.id=0;a.id=Fa.XD(a)})}function ta(a,b){for(var c=null,g=null,e=[],h=0;h<a.Ua.length;h++){var f=a.Ua[h],k=f.rh;k&&(c||(c={}),
c[h]=k,f.rh=null);if(k=f.Pb)g||(g={}),g[h]=k,f.Pb=null;e.push(f.WG);f.WG=0}f=a.Yb;a.Yb=null;k=a.Pf;a.Pf=null;var l=a.Za;a.Za=null;var n=a.Wd;a.Wd=null;b(a);a.Za=l;a.Wd=n;a.Pf=k;a.Yb=f;if(c)for(h in c)a.Ua[h].rh=c[h];if(g)for(h in g)a.Ua[h].Pb=g[h];for(h=0;h<a.Ua.length;h++)a.Ua[h].WG=e[h]}function ha(a,b,c,g){var e=H("DEBUG_VIEW");ga(e,"debug_view.glslv","debug_view.glslf");e.Tj=!0;e.yb=!0;e.El=pa(e,a,b);e.Du=c;Ia(e,a);Ra(e);if(g.gm){a=g.Yb.Yf;var h=C.create();b=La.Oz(1,h);c=C.fromValues(C.length(a.Ab),
C.length(a.Bb),C.length(a.Cb));sa.zH(b,c,h);var h=C.normalize(a.Ab,Qa),f=C.normalize(a.Bb,$a),k=C.normalize(a.Cb,gb);!c[0]&&c[1]&&c[2]?C.cross(f,k,h):!c[1]&&c[0]&&c[2]?C.cross(k,h,f):!c[2]&&c[0]&&c[1]&&C.cross(h,f,k);c=B.W(h,f,k,yb);x.invert(c,c);c=u.fromMat3(c,wb);la.q(c,lb);la.r(1,lb);la.t(a.Da,lb);sa.YB(b,lb)}else a=g.Yb.Af,b=La.Oz(a.Jb,a.Da);T.t(g.Yb,e.Yb);sa.Ex(b,1,!0);b.gb.a_polyindex=sa.Vu(b);Aa(e,b);return e}function ga(a,b,c){a.Lb.vg=b;a.Lb.ef=c;ya.ZS(a.Lb)}function P(a,b,c,g){g=g||"";-1==
a.sg.indexOf(c)&&(a.Ua.push(b),a.sg.push(c),a.Zf.push(g));a.ec&&za.GD(a)}function xa(a){a.Lb||na.va("No shaders info for batch "+a.name);a.ec=ya.EP(a.Lb);var b=a.Lb;if(b.status===ya.hD){var c=a.ec.attributes,g=a.Za.mc,e;for(e in c)g[e]||na.va('missing data for "'+e+'" attribute')}b.status&ya.yJ&&fa.error("Texture limit exceeded for shader - "+b.ef+', materials: "'+a.Hc.join(", ")+'". Maximum texture count: '+va.KA+", actual texture count: "+b.Mx);b.status&ya.xJ&&fa.error("Fragment uniform limit exceeded for shader - "+
b.ef+', materials: "'+a.Hc.join(", ")+'". ');b.status&ya.BJ&&fa.error("Vertex uniform limit exceeded for shader - "+b.vg+', materials: "'+a.Hc.join(", ")+'". ');b.status&ya.AJ&&fa.error("Vertex attribute limit exceeded for shader - "+b.vg+', materials: "'+a.Hc.join(", ")+'". Maximum attribute count: '+va.LA+", actual attribute count: "+b.Xt);b.status&ya.zJ&&("MAIN"!=a.type||a.bc||fa.error("Varying limit exceeded for shader - "+a.Lb.ef+', materials: "'+a.Hc.join(", ")+'"'),"MAIN"==a.type&&a.bc||"NODES_GLOW"==
a.type)&&(g=c=0,a.uj&&(c=B._8(a.uj)),a.ud&&(g=B._8(a.ud)),fa.error("Varying limit exceeded for node shader - "+a.Lb.ef+", uv: "+c+", vc: "+g+', materials: "'+a.Hc.join(", ")+'"'));b.status&ya.vJ&&fa.error("Shader compilation/linking error: "+b.vg+", "+b.ef+', materials: "'+a.Hc.join(", ")+'"');return a.Lb.status===ya.hD?(za.dM(a.ec),za.Wt(a),za.GD(a),!0):!1}function pa(a,b,c){return"NAVMESH"==a.fc?c:b.cf?"_odd_id_"+Fa.EI():c}function ia(a,b){return 0<=b&&b<a.Hf.bn.length&&a.Hf.bn[b]}var na=Object(O.a)(d),
ra=Object(G.a)(d),Fa=Object(r.a)(d),fa=Object(f.a)(d),Za=Object(k.a)(d),Da=Object(y.a)(d),Ga=Object(m.a)(d),Sa=Object(p.a)(d),Pa=Object(q.a)(d),La=Object(b.a)(d),za=Object(h.a)(d),S=Object(l.a)(d),Ua=Object(e.a)(d),ya=Object(c.a)(d),bb=Object(a.a)(d),Xa=Object(ca.a)(d),sa=Object(v.a)(d),ba=ra.wa,va=ra.di,Ha=ra.An,db=ra.RF,vb=new Float32Array([0,0,-Math.sqrt(.5),Math.sqrt(.5)]),Qa=new Float32Array(3),$a=new Float32Array(3),gb=new Float32Array(3),wb=new Float32Array(4),lb=la.b(),yb=x.create(),Ya={},
Wa=new Float32Array(24),nb=[5,4];I.iM=function(a){return Ya[a]||null};I.jM=function(a,b){Ya[a]=b};I.ZM=N;I.rF=function(a,b,c,g){for(var e=(c||[]).map(function(a){return a.lc}),e=D(b,a.sa.fb,e),e=V(e),h=0;h<e.length;h++){var f=e[h].hb;f.Hc=e[h].Ih;Aa(f,e[h].Wd);Ca(f,c,a);if("STATIC"==e[h].ka.type&&"COLOR_ID"!=f.type){var k=Fa.et("%meta%"+f.type+"%"+f.Hc.join("%")+"%"),l=Sa.dr(k,"MESH");Sa.FR(l,e[h].ka);Sa.St(l,a);Sa.Ig(l,a,f);g.push(l);if("MAIN"==f.type)for(var n=0;n<e[h].Pe.length;n++)k=e[h].Pe[n].qb,
k.$r.push(l)}else k=e[h].Pe[0].qb,Sa.Ig(k,a,f)}if(ba.debug_view){for(h=0;h<e.length;h++)if(c=e[h].ka,"DYNAMIC"==c.type&&(k=e[h].Pe[0].qb,f=e[h].hb,"MAIN"==f.type)){for(var n=Sa.lb(k,a),l=n.Ia,d=!1,n=0;n<l.length;n++)l[n].Tj&&(d=!0);d||(f=ha(c,k.name,!0,f),Sa.Ig(k,a,f))}for(h=0;h<g.length;h++)k=g[h],c=k.ka,n=Sa.lb(k,a),f=n.Ia[0],"MAIN"==f.type&&(f=ha(c,k.name,!1,f),Sa.Ig(k,a,f));for(h=0;h<e.length;h++)f=e[h].hb,"DEBUG_VIEW"==f.type&&(f.Bu=h)}for(h=0;h<b.length;h++)for(n=Sa.lb(b[h].qb,a),l=n.Ia,n=0;n<
l.length;n++)K(l[n]);for(h=0;h<g.length;h++)for(n=Sa.lb(g[h],a),l=n.Ia,n=0;n<l.length;n++)K(l[n])};I.TL=function(a,b,c){var g=a.sa.mm,e=H("MAIN");ga(e,"sky.glslv","sky.glslf");e.dk=!0;e.yb=!1;if(b.procedural_skydome)Q(e,"PROCEDURAL_SKYDOME",1),e.Mu=!0;else{var h=g.Cn,f=S.wc(a.sa.fb,bb.Ue).qa.vc;P(e,f,"u_sky");h&&(Q(e,"WO_SKYTEX",1),h.invert&&Q(e,"MTEX_NEGATIVE",1),h.ZI&&Q(e,"MTEX_RGBTOINT",1),Q(e,"BLENDTYPE",h.OD),h.UI&&Q(e,"WOMAP_BLEND",1),h.VI&&Q(e,"WOMAP_HORIZ",1),h.XI&&Q(e,"WOMAP_ZENUP",1),h.WI&&
Q(e,"WOMAP_ZENDOWN",1));g.Kn&&Q(e,"WO_SKYBLEND",1);g.Ln&&Q(e,"WO_SKYPAPER",1);g.Mn&&Q(e,"WO_SKYREAL",1)}b.Oe&&(e.Oe=!0,b.xe&&(e.xe=!0));X(e,"a_position");b=La.oP();Aa(e,b);K(e);e.Vj=!0;Ra(e);Sa.Ig(c,a,e);S.wc(a.sa.fb,bb.Vh)&&(g=N(e),g.type="DEBUG_VIEW",g.fc="",ja(g),Q(g,"DEBUG_VIEW_SPECIAL_SKYDOME",1),b.gb.a_polyindex=sa.Vu(b),Aa(g,b),g.so=e.id,Ra(g),Sa.Ig(c,a,g))};I.uu=function(a,b,c){var g=Sa.lb(a,c).Ia,e=[],h=S.wc(b,bb.Ee),f=S.wc(b,bb.ae),k=S.wc(b,bb.Wh);b=S.wc(b,bb.xf);for(var l=0;l<g.length;l++){var n=
g[l],d=null;"SHADOW"==n.type&&"RECEIVE"==n.fc&&n.Lf&&(d=N(n),d.fc="CAST");"MAIN"!=n.type&&"PARTICLES"!=n.type||!h&&!f||!n.Oe||(d=N(n),d.fc="REFLECT",d.tk=!1,d.Rf&&(d.Rf=!1,d.yb=!1),d.sb=n.sb);"COLOR_ID"==n.type&&k&&a.ka.Dd&&(b&&a.ka.Pl?(d=N(n),d.fc="OUTLINE"):n.fc="OUTLINE");d&&(d.yh=!0,Ra(d),e.push(d))}for(g=0;g<e.length;g++)Sa.Ig(a,c,e[g])};I.nJ=function(a,b,c){return(b=c*(b.max_z-b.min_z))?.5*(Math.sqrt(2*Math.sqrt(4*b*Math.tan(a)+1)+2)/2-1)/b:0};I.mV=function(a,b,c){b=c*(b.max_z-b.min_z);if(!b)return 0;
a=2*b*a;return Math.atan((Math.pow(a+1,4)-Math.pow(a+1,2))/b)};I.kM=function(a){var b=T.w();b.max_x=a.max_x;b.min_x=a.min_x;b.max_y=a.max_y;b.min_y=a.min_y;b.max_z=a.max_z;b.min_z=a.min_z;return b};I.as=function(a,b){for(var c=a[b],g=b+1;g<a.length;g++)c=(c?c+"%join%":"")+a[g];return c};I.nU=oa;I.mU=Ca;I.fT=Ja;I.FD=function(a,b){Q(a,"CSM_SECTION1",0);Q(a,"CSM_SECTION2",0);Q(a,"CSM_SECTION3",0);Q(a,"NUM_CAST_LAMPS",0);if(b){Q(a,"NUM_CAST_LAMPS",b.li.length);ba.hw&&Q(a,"MAC_OS_SHADOW_HACK",1);for(var c=
1;c<b.csm_num;c++)Q(a,"CSM_SECTION"+String(c),1);Q(a,"SHADOW_TEX_RES",ya.Fa(b.csm_resolution));Q(a,"CSM_FADE_LAST_CASCADE",b.fade_last_cascade?1:0);Q(a,"CSM_BLEND_BETWEEN_CASCADES",b.blend_between_cascades&&!ba.iE?1:0)}else Q(a,"SHADOW_TEX_RES",0),Q(a,"CSM_FADE_LAST_CASCADE",0),Q(a,"CSM_BLEND_BETWEEN_CASCADES",0)};I.dc=Q;I.Pd=function(a,b){return ya.MP(a.Lb,b)};I.FI=Aa;I.lU=Ra;I.xU=function(a,b){a.Yb.zf=T.a(b,0,b.length,a.Yb.zf);var c=T.F(a.Yb.zf,Wa);a.Yb.Yf=T.z(c,!0);a.Yb.Af=T.B(a.Yb.Yf);a.gm=T.M(a.Yb.Yf,
a.Yb.Af)};I.Ut=ga;I.$h=P;I.vB=function(a,b,c){c=a.sg.indexOf(c);-1<c&&(a.Ua[c]=b)};I.JN=function(a,b){var c=H("MAIN");c.Qb=!0;L.set(b[0],b[1],b[2],.5,c.Qc);c.fi=sa.pq;Aa(c,a);ga(c,"main.glslv","main_stack.glslf");Q(c,"SHADELESS",1);xa(c);return c};I.md=xa;I.qF=function(a,b){for(var c=0;c<b.length;c++){var g=b[c],e=H("LINE");ga(e,"line.glslv","line.glslf");e.Qb=!0;e.Vj=!0;var h=La.qP();Aa(e,h);K(e);Sa.St(g,a);Sa.Ig(g,a,e);xa(e)}};I.KM=function(a){return a.ec.ls.length?a.ec.kB.u_cube_fog?!0:!1:!1};
I.sN=function(){var a=H("DEPTH_PACK");a.ob=!0;a.yb=!1;var b=La.Od();Aa(a,b);ga(a,"postprocessing/postprocessing.glslv","postprocessing/depth_pack.glslf");xa(a);return a};I.vu=function(a){var b=H("POSTPROCESSING");ga(b,"postprocessing/postprocessing.glslv","postprocessing/postprocessing.glslf");switch(a){case "NONE":Q(b,"POST_EFFECT","POST_EFFECT_NONE");break;case "GRAYSCALE":Q(b,"POST_EFFECT","POST_EFFECT_GRAYSCALE");break;case "X_BLUR":case "Y_BLUR":Q(b,"POST_EFFECT","POST_EFFECT_BLUR");break;case "X_GLOW_BLUR":case "Y_GLOW_BLUR":case "X_BLOOM_BLUR":case "Y_BLOOM_BLUR":Q(b,
"POST_EFFECT","POST_EFFECT_GLOW_BLUR");break;case "X_DOF_BLUR":case "Y_DOF_BLUR":Q(b,"POST_EFFECT","POST_EFFECT_DOF_BLUR");break;case "X_ALPHA_BLUR":case "Y_ALPHA_BLUR":Q(b,"POST_EFFECT","POST_EFFECT_ALPHA_BLUR");break;case "X_EXTEND":case "Y_EXTEND":Q(b,"POST_EFFECT","POST_EFFECT_EXTEND");break;case "FLIP_CUBEMAP_COORDS":Q(b,"POST_EFFECT","FLIP_CUBEMAP_COORDS");break;default:na.va("Wrong postprocessing effect: "+a)}Q(b,"SHADOW_USAGE","NO_SHADOWS");b.ob=!0;b.yb=!1;a=La.Od();Aa(b,a);xa(b);return b};
I.MN=function(a){var b=H("SSAO");b.yb=!1;b.ob=!0;var c=La.Od();Aa(b,c);ga(b,"postprocessing/postprocessing.glslv","postprocessing/ssao.glslf");Q(b,"SSAO_QUALITY","SSAO_QUALITY_"+a.Fn);Q(b,"SSAO_HEMISPHERE",a.Hp?1:0);Q(b,"SHADOW_USAGE","NO_SHADOWS");a={width:4,height:4,data:new Uint8Array([150,123,254,0,127,3,97,0,164,246,99,0,155,177,14,0,54,83,221,0,2,142,143,0,32,57,79,0,49,160,32,0,57,232,115,0,178,216,203,0,70,196,218,0,241,164,82,0,225,58,85,0,233,88,189,0,144,25,203,0,117,73,12,0])};c=Xa.Qj(Xa.Xh,
!1);c.source="NODE_TEX";Xa.ht(c,a,0);P(b,c,"u_ssao_special_tex");xa(b);return b};I.NN=function(a){var b=H("SSAO_BLUR");b.yb=!1;b.ob=!0;var c=La.Od();Aa(b,c);ga(b,"postprocessing/postprocessing.glslv","postprocessing/ssao_blur.glslf");Q(b,"SSAO_BLUR_DEPTH",a.Ep?1:0);Q(b,"SHADOW_USAGE","NO_SHADOWS");xa(b);return b};I.mN=function(a){var b=H("COC");b.yb=!1;b.ob=!0;var c=La.Od();Aa(b,c);ga(b,"postprocessing/postprocessing.glslv","postprocessing/coc.glslf");Q(b,"DEPTH_RGBA",1);switch(a){case "COC_ALL":Q(b,
"COC_TYPE","COC_ALL");break;case "COC_FOREGROUND":Q(b,"COC_TYPE","COC_FOREGROUND");break;case "COC_COMBINE":Q(b,"COC_TYPE","COC_COMBINE")}Q(b,"SHADOW_USAGE","NO_SHADOWS");xa(b);return b};I.tN=function(a){var b=H("DOF");b.yb=!1;b.ob=!0;var c=La.Od();Aa(b,c);ga(b,"postprocessing/postprocessing.glslv","postprocessing/dof.glslf");a.dof_bokeh?Q(b,"DOF_TYPE","DOF_BOKEH"):(Q(b,"DOF_TYPE","DOF_SIMPLE"),Q(b,"DEPTH_RGBA",1));Q(b,"SHADOW_USAGE","NO_SHADOWS");xa(b);return b};I.BN=function(){var a=H("OUTLINE");
a.yb=!1;a.ob=!0;var b=La.Od();Aa(a,b);ga(a,"postprocessing/postprocessing.glslv","postprocessing/outline.glslf");xa(a);return a};I.vN=function(){var a=H("GLOW_COMBINE");a.yb=!1;a.ob=!0;var b=La.Od();Aa(a,b);ga(a,"postprocessing/postprocessing.glslv","postprocessing/glow.glslf");xa(a);return a};I.wN=function(a,b,c){var g=H("GOD_RAYS");g.yb=!1;g.ob=!0;var e=La.kP();Aa(g,e);ga(g,"postprocessing/god_rays.glslv","postprocessing/god_rays.glslf");Q(g,"DEPTH_RGBA",a?1:0);Q(g,"WATER_EFFECTS",b?1:0);Q(g,"STEPS_PER_PASS",
ya.Fa(c,1));Q(g,"SHADOW_USAGE","NO_SHADOWS");xa(g);return g};I.xN=function(){var a=H("GOD_RAYS_COM");a.yb=!1;a.ob=!0;var b=La.Od();Aa(a,b);ga(a,"postprocessing/postprocessing.glslv","postprocessing/god_rays_combine.glslf");Q(a,"SAFARI_CANVAS_ALPHA_HACK",ba.yH?1:0);xa(a);return a};I.qN=function(a,b){var c=H("SKY");c.yb=!1;c.ob=!1;var g=La.hv();Aa(c,g);""!=b.lx?(ga(c,"skybox.glslv","node_skybox.glslf"),Q(c,"IS_WORLD",1),t(c,a)):b.procedural_skydome?(ga(c,"skybox.glslv","proc_skybox.glslf"),Q(c,"WATER_EFFECTS",
1)):(ga(c,"skybox.glslv","tex_skybox.glslf"),a&&(g=a.sa.mm,g.nx&&P(c,Xa.gf(g.nx),"u_sky_texture",g.nx.texture.name),g.Cn&&Q(c,"WO_SKYTEX",1)),b.kx&&Q(c,"MTEX_NEGATIVE",1),b.sx&&Q(c,"MTEX_RGBTOINT",1),Q(c,"BLENDTYPE",b.jx),b.ox&&Q(c,"WOMAP_BLEND",1),b.px&&Q(c,"WOMAP_HORIZ",1),b.rx&&Q(c,"WOMAP_ZENUP",1),b.qx&&Q(c,"WOMAP_ZENDOWN",1),b.Kn&&Q(c,"WO_SKYBLEND",1),b.Ln&&Q(c,"WO_SKYPAPER",1),b.Mn&&Q(c,"WO_SKYREAL",1));xa(c);return c};I.ML=function(a,b){var c=S.wc(a.sa.fb,bb.Ue);c&&Sa.Ig(b,a,c.Hb[0].ub[0].hb)};
I.oN=function(){var a=H("IRRADIANCE");a.yb=!1;a.ob=!1;var b=La.hv();Aa(a,b);ga(a,"skybox.glslv","irradiance_skybox.glslf");xa(a);return a};I.pN=function(){var a=H("R_CONVOLUTION");a.yb=!1;a.ob=!1;var b=La.hv();Aa(a,b);ga(a,"skybox.glslv","r_convolution_skybox.glslf");xa(a);return a};I.lN=function(){var a=H("BRDF");a.yb=!1;a.ob=!1;var b=La.hv();Aa(a,b);ga(a,"postprocessing/postprocessing.glslv","postprocessing/precompute_brdf.glslf");xa(a);return a};I.iN=function(a){var b=H("ANTIALIASING");b.yb=!1;
b.ob=!0;var c=La.Od();Aa(b,c);ga(b,"postprocessing/postprocessing.glslv","postprocessing/antialiasing.glslf");ba.nH?(Q(b,"AA_METHOD","AA_METHOD_FXAA_QUALITY"),Q(b,"AA_QUALITY",a.fv)):Q(b,"AA_METHOD","AA_METHOD_FXAA_LIGHT");xa(b);return b};I.KN=function(a){var b=H("SMAA"),c=La.Od();Aa(b,c);ga(b,"postprocessing/smaa.glslv","postprocessing/smaa.glslf");Q(b,"AA_METHOD","AA_METHOD_SMAA_HIGH");Q(b,"SMAA_PASS",a);Q(b,"SMAA_PREDICATION",0);Q(b,"SMAA_REPROJECTION",0);xa(b);b.yb=!1;b.ob=!0;return b};I.nN=function(){var a=
H("COMPOSITING");a.yb=!1;a.ob=!0;var b=La.Od();Aa(a,b);ga(a,"postprocessing/postprocessing.glslv","postprocessing/compositing.glslf");xa(a);return a};I.AN=function(){var a=H("MOTION_BLUR");a.ob=!0;a.yb=!1;var b=La.Od();Aa(a,b);ga(a,"postprocessing/postprocessing.glslv","postprocessing/motion_blur.glslf");xa(a);return a};I.ON=function(a){var b=H("STEREO");b.ob=!0;b.yb=!1;var c=La.Od();Aa(b,c);ga(b,"postprocessing/postprocessing.glslv","postprocessing/stereo.glslf");Q(b,"ANAGLYPH","ANAGLYPH"===a?1:
0);Q(b,"SIDEBYSIDE","SIDEBYSIDE"===a?1:0);Q(b,"DISTOR_SCALE",db.nonwebvr.YE);xa(b);return b};I.yN=function(){var a=H("LUMINANCE");a.yb=!1;a.ob=!0;var b=La.Od();Aa(a,b);ga(a,"postprocessing/postprocessing.glslv","postprocessing/luminance.glslf");xa(a);return a};I.jN=function(){var a=H("LUMINANCE");a.yb=!1;a.ob=!0;var b=La.Od();Aa(a,b);ga(a,"postprocessing/postprocessing.glslv","postprocessing/luminance_av.glslf");xa(a);return a};I.zN=function(a){var b=H("LUMINANCE_X_BLUR");b.yb=!1;b.ob=!0;var c=La.Od();
Aa(b,c);ga(b,"postprocessing/postprocessing.glslv","postprocessing/luminance_truncated.glslf");a&&ya.Wa(b.Lb,"ADAPTIVE_BLOOM",1);xa(b);return b};I.kN=function(a){var b=H("BLOOM");b.yb=!1;b.ob=!0;var c=La.Od();Aa(b,c);ga(b,"postprocessing/postprocessing.glslv","postprocessing/bloom_combine.glslf");if(1==a)var g="BLUR_PASS_1";else 2==a?g="BLUR_PASS_2":3==a?g="BLUR_PASS_3":4==a?g="BLUR_PASS_4":5==a&&(g="BLUR_PASS_5");ya.Wa(b.Lb,"BLUR_PASS_NUM",g);xa(b);return b};I.oO=function(){var a=H("VELOCITY");a.yb=
!1;a.ob=!0;var b=La.Od();Aa(a,b);ga(a,"postprocessing/postprocessing.glslv","postprocessing/velocity.glslf");xa(a);return a};I.hN=function(){var a=H("ANCHOR_VISIBILITY");a.yb=!0;a.ob=!0;a.fi=sa.pq;ga(a,"anchors.glslv","anchors.glslf");var b=La.pF(1);Aa(a,b);Q(a,"ANCHOR_NUM",1);xa(a);a.um=new Float32Array(3);return a};I.DN=function(){var a=H("PERFORMANCE");a.yb=!1;a.ob=!0;var b=La.Od();Aa(a,b);ga(a,"postprocessing/postprocessing.glslv","postprocessing/performance.glslf");xa(a);return a};I.kU=function(a,
b){var c=b.length/3;if(c!=a.um.length/3){var g=La.pF(c);Aa(a,g);Q(a,"ANCHOR_NUM",c);xa(a)}a.um=b};I.kv=function(a){if(!a.Ba.length)return null;a=a.Ba[0];return a.Ia.length?a.Ia[0]:null};I.wh=function(a,b,c){a=a.Ba[0].Ia;for(var g=0;g<a.length;g++)if(a[g].type==c&&-1!=a[g].Hc.indexOf(b))return a[g];return null};I.$b=function(a,b,c){a=a.Ba[0].Ia;for(var g=0;g<a.length;g++)if(a[g].type==c&&!a[g].yh&&-1!=a[g].Hc.indexOf(b))return a[g];return null};I.Tg=function(a,b,c){a=a.Ba[0].Ia;for(var g=0;g<a.length;g++)if(a[g].type==
c&&a[g].yh&&-1!=a[g].Hc.indexOf(b))return a[g];return null};I.xA=function(a,b,c,g){a=a.Ba[0].Ia;for(var e=0;e<a.length;e++){var h=a[e];if(-1!=h.Hc.indexOf(b)&&(!g||h.type==g)&&c(h))break}};I.yW=function(a,b){for(var c=a.Ba[0].Ia,g=0;g<c.length;g++)if(c[g].type==b)return!0;return!1};I.Gr=function(a,b){for(var c=(b?Sa.lb(a,b):a.Ba[0]).Ia,g=0;g<c.length;g++)if("SKY"==c[g].type)return c[g];return null};I.rE=function(a){var b=a.Ua;a.Ua=[];for(var c=0;c<b.length;c++)Xa.qE(b[c]);a.Ua=b;a.Za&&a.Za.sh&&sa.TM(a.Za);
a.sh&&a.Pf.length&&za.WM(a);a.ec&&a.ec.sh&&ya.VM(a.ec);a.Le&&(b=Ga.pv(a.Le))&&b.pE&&Ga.UM(a.Le)};I.US=function(a){""!==a.Le&&(a=Ga.pv(a.Le))&&(a.pE=void 0)};I.sP=pa;I.cleanup=function(){Ya={}};I.set_nodemat_value=function(a,b,c){for(var g=a.pi,e=0;e<g.length;e+=3)if(g[e]==b)return a.ri[4*g[e+1]+g[e+2]]=c,!0;return!1};I.set_nodemat_rgb=function(a,b,c,g,e){for(var h=a.oi,f=0;f<h.length;f+=2)if(h[f]==b)return b=h[f+1],a.Me[3*b]=c,a.Me[3*b+1]=g,a.Me[3*b+2]=e,!0;return!1};I.get_nodemat_value=function(a,
b){for(var c=a.pi,g=0;g<c.length;g+=3)if(c[g]==b)return a.ri[4*c[g+1]+c[g+2]];return null};I.get_nodemat_rgb=function(a,b,c){for(var g=a.oi,e=0;e<g.length;e+=2)if(g[e]==b)return b=g[e+1],c[0]=a.Me[3*b],c[1]=a.Me[3*b+1],c[2]=a.Me[3*b+2],c;return null}});t.a=d},function(E,t,d){E=d(0);var O=d(5),T=d(35),G=d(4),r=d(70),f=d(44),k=d(28),y=d(1),x=d(18),m=d(2),p=d(22),q=d(12),b=d(8),u=d(75),h=d(3),l=d(10),e=d(48);d=Object(E.a)("__textures",function(c,a){function d(){Sa||(Sa=S.createFramebuffer());return Sa}
function la(){Ga||(Ga=S.createTexture());return Ga}function v(){return{type:0,source:"",Qs:"",width:0,height:0,$q:1,anisotropic_filtering:0,Bk:1024,il:!1,rh:null,Wb:0,hc:null,Qf:null,dj:!1,kq:-1,Pb:null,st:"",Bl:0,zh:0,jb:0,Mc:0,kl:0,Jh:!1,yi:1,Re:!1,NG:0,me:null,Is:0,Hs:0,yk:-1,Ks:!1,Ql:-1,tt:!1,uC:!1,Mk:!1,hm:!1,repeat:!0,pl:"",Oo:"",Ym:"",mA:"",lA:"",ol:""}}function B(a,b,c){a.Ym=b.uuid;a.Oo=b.filepath;a.mA=b.source;a.lA=b.name;a.pl=Object(e.b)(c+b.filepath);a.ol=b.oh;-1==Pa.Ua.indexOf(a)&&(Pa.Ua.push(a),
Pa.Yo.push(!1))}function C(a,b,c){var g=-1<b.indexOf(".pvr");a.ol=-1<b.indexOf(".dds")?"dds":g?"pvr":"";a.Oo=b;a.pl=c;a.Ym=m._4();Pa.Ua.push(a);Pa.Yo.push(!0)}function L(b,c,g){var e=v();e.type=b;e.source="NONE";e.Re=g;if(b==a.Jt||b==a.Ht||b==a.Kt||b==a.It)e.Qf=S.createRenderbuffer();else{var h=S.TEXTURE_2D,f=S.createTexture();S.bindTexture(h,f);S.texParameteri(h,S.TEXTURE_MAG_FILTER,S.LINEAR);g?S.texParameteri(h,S.TEXTURE_MIN_FILTER,Ua[Fa.Gk]):S.texParameteri(h,S.TEXTURE_MIN_FILTER,S.LINEAR);S.texParameteri(h,
S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE);S.texParameteri(h,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE);g=z(e);var k=w(e),n=A(e);if(b==a.om)var l=null;else b==a.pm?l=new Float32Array([204,204,204,255]):l=new Uint8Array([204,204,204,255]);S.texImage2D(h,0,k,1,1,0,g,n,l);Fa.Yq&&c&&S.texParameterf(h,S.TEXTURE_COMPARE_MODE,S.COMPARE_REF_TO_TEXTURE);S.bindTexture(h,null);e.Wb=h;e.hc=f}return e}function H(a){var b=a.Wb;S.bindTexture(b,a.hc);var c=z(a),g=w(a),e=A(a),h=a.rh.canvas;S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,!0);S.texImage2D(b,
0,g,c,e,h);S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,!1);a.il&&S.generateMipmap(b);S.bindTexture(b,null);a.width=h.width;a.height=h.height}function I(a){var b=a.Wb;S.bindTexture(b,a.hc);S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,!0);4!=a.Pb.length?a.Jh?U(a,a.Pb,a.width*a.yi,a.height*a.yi,!1):S.texImage2D(b,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,a.Pb):S.texImage2D(b,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,a.Pb);S.bindTexture(b,null)}function t(a){var b=a.Wb;S.bindTexture(b,a.hc);S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,!0);
a.Jh?U(a,a.me[a.yk],a.width*a.yi,a.height*a.yi,!1):S.texImage2D(b,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,a.me[a.yk]);S.bindTexture(b,null)}function N(){Da||(Da=document.createElement("canvas"));return Da}function U(a,b,c,g,e){e||(D(S.TEXTURE_2D),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,b));S.bindTexture(S.TEXTURE_2D,null);b=d();e=la();xa.HO(a,c,g,b,e)}function K(a,b,c){for(var g=0;6>g;g++){var e=ya[g],h=bb[g],f=N();f.width=c;f.height=c;var k=f.getContext("2d");k.translate(c/2,c/2);"TEXTURE_CUBE_MAP_POSITIVE_X"==
e?(k.rotate(Math.PI/2),k.scale(1,-1)):"TEXTURE_CUBE_MAP_NEGATIVE_X"==e?(k.rotate(Math.PI/2),k.scale(-1,1)):"TEXTURE_CUBE_MAP_POSITIVE_Y"==e||"TEXTURE_CUBE_MAP_POSITIVE_Z"==e?k.scale(1,-1):"TEXTURE_CUBE_MAP_NEGATIVE_Y"!=e&&"TEXTURE_CUBE_MAP_NEGATIVE_Z"!=e||k.scale(-1,1);k.drawImage(a,h[0]*b,h[1]*b,b,b,-c/2,-c/2,c,c);Fa.OE?S.texImage2D(S[e],0,S.RGBA,c,c,0,S.RGBA,S.UNSIGNED_BYTE,new Uint8Array(k.getImageData(0,0,c,c).data.buffer)):S.texImage2D(S[e],0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,f)}}function D(a){S.bindTexture(a,
null);var b=la();S.bindTexture(a,b);S.texParameteri(a,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE);S.texParameteri(a,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE);S.texParameteri(a,S.TEXTURE_MAG_FILTER,S.LINEAR);S.texParameteri(a,S.TEXTURE_MIN_FILTER,S.LINEAR)}function R(a,b,c){var g=a.source,e=a.hc,h=a.Wb,f=a.ol,k=a.Oo,l;S.bindTexture(h,e);a.repeat?(S.texParameteri(h,S.TEXTURE_WRAP_S,S.REPEAT),S.texParameteri(h,S.TEXTURE_WRAP_T,S.REPEAT)):(S.texParameteri(h,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(h,S.TEXTURE_WRAP_T,
S.CLAMP_TO_EDGE));a.dj||"NODE_TEX"==g?S.texParameteri(h,S.TEXTURE_MIN_FILTER,S.LINEAR):S.texParameteri(h,S.TEXTURE_MIN_FILTER,Ua[Fa.Gk]);a.anisotropic_filtering&&S.texParameterf(h,ha.Rz().TEXTURE_MAX_ANISOTROPY_EXT,a.anisotropic_filtering);4==b.length&&(l=!0,b=new Uint8Array([255*b[0],255*b[1],255*b[2],255*b[3]]));if("IMAGE"==g)if(l)S.texImage2D(h,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,b),a.width=1,a.height=1;else if(f){l=Ra.KF(b,f);c=m.L(l.width)||m.L(l.height);if(l.width>fa.Ic||l.height>fa.Ic){ga.error('Image "'+
k+'" has unsupported size: '+l.width+"x"+l.height+". Max available: "+fa.Ic+"x"+fa.Ic+".");return}g=l.width;l=l.height;if(c||"pvr"==f)a.Jh=!0,D(h),g=F(g*a.yi),l=F(l*a.yi);"dds"==f?Ra.RU(S,ha.EF(),b,!0):"pvr"==f&&Ra.SU(S,ha.DF(),b);a.Jh&&(U(a,null,g,l,!0),S.bindTexture(h,e),S.generateMipmap(h));a.width=g;a.height=l;a.$q=Ra.FP(b,f)}else{S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,!0);a.dj?Fa.Js?(g=b[0].width,l=b[0].height):(g=b.videoWidth,l=b.videoHeight):(g=b.width,l=b.height);a.width=g;a.height=l;if(g>fa.Ic||
l>fa.Ic)ga.warn('Image "'+k+'" has unsupported size: '+g+"x"+l+". Max available: "+fa.Ic+"x"+fa.Ic+". Reduced image size will be used."),a.yi=Math.min(fa.Ic/g,fa.Ic/l),a.Jh=!0;a.dj&&(c in za||(za[c]={}),za[c][a.st]=a,Fa.Js?(a.me=b,a.Is=b.length,a.zh=a.Hs*a.Bl/b.length,b=b[0]):(a.Pb=b,a.Pb.loop=a.Mk,a.zh=b.duration?a.Bl/b.duration:P.he(),Za.VE||(b.playbackRate=P.he()/a.zh,Za.mE&&2<b.playbackRate&&(b.playbackRate=2)),V(a)));g=F(a.width*a.yi);l=F(a.height*a.yi);a.Jh||Fa.wH?(k=N(),f=k.getContext("2d"),
k.width=g,k.height=l,f.drawImage(b,0,0,a.width,a.height,0,0,g,l),Fa.OE?S.texImage2D(h,0,S.RGBA,g,l,0,S.RGBA,S.UNSIGNED_BYTE,new Uint8Array(f.getImageData(0,0,g,l).data.buffer)):S.texImage2D(h,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,k)):Fa.Nb||!m.L(a.width)&&!m.L(a.height)?S.texImage2D(h,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,b):(U(a,b,g,l,!1),a.Jh=!0);a.width=g;a.height=l;a.dj||(S.bindTexture(h,e),S.generateMipmap(h))}else if("ENVIRONMENT_MAP"==g)if(l){for(e=0;6>e;e++)S.texImage2D(S["TEXTURE_CUBE_MAP_"+ya[e]],0,
S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,b);a.width=3;a.height=2}else{S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,!1);if(b.width%3||b.height%2){ga.error('Cubemap Image "'+k+'" has unsupported size: '+b.width+"x"+b.height+". The width must be multiple of three and the height - multiple of two.");return}e=b.width/3;e>fa.Yg?(ga.warn('Cubemap Image "'+k+'" has unsupported size: '+b.width+"x"+b.height+". Max available: "+3*fa.Yg+"x"+2*fa.Yg+". Reduced image size will be used."),k=F(fa.Yg/e*e),a.Jh=!0):(k=F(e),!Fa.Nb&&
(3*k>fa.Ic||2*k>fa.Ic)&&(a.Jh=!0));if(a.Jh||Fa.Bs)K(b,e,k);else{f=b;g=k;D(S.TEXTURE_2D);S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,f);S.bindTexture(S.TEXTURE_2D,null);for(f=0;6>f;f++)S.texImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,S.RGBA,g,g,0,S.RGBA,S.UNSIGNED_BYTE,null);S.bindTexture(a.Wb,null);f=d();S.bindFramebuffer(S.FRAMEBUFFER,f);l=la();for(f=0;6>f;f++)xa.GO(a,S[ya[f]],g,e,l,f);S.bindFramebuffer(S.FRAMEBUFFER,null);S.bindTexture(a.Wb,a.hc);S.texParameteri(a.Wb,S.TEXTURE_MIN_FILTER,
Ua[Fa.Gk]);S.texParameteri(a.Wb,S.TEXTURE_MAG_FILTER,S.LINEAR)}ta.YO()&&(ga.warn("Firefox detected, setting max cubemap size to 256, use canvas for resizing."),K(b,e,Ba.bD));a.width=3*k;a.height=2*k;S.generateMipmap(h)}else"NODE_TEX"==g&&(S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,!1),S.texImage2D(h,0,S.RGBA,b.width,b.height,0,S.RGBA,S.UNSIGNED_BYTE,b.data),a.width=b.width,a.height=b.height);S.bindTexture(h,null)}function V(a){a.Pb.oncanplay=function(){wa(a)&&I(a)}}function F(a){return m.L(a)?m.M(Math.pow(2,
(a|0).toString(2).length),2,fa.Ic):a}function z(b){var c;switch(b.type){case a.Xh:c=S.RGBA;break;case a.Lt:c=S.RGB;break;case a.pm:c=S.RGBA;break;case a.vq:c=S.RGB;break;case a.om:c=S.DEPTH_COMPONENT;break;default:Aa.va("Wrong texture type")}return c}function w(b){var c;switch(b.type){case a.Xh:c=Fa.Nb?S.RGBA8:S.RGBA;break;case a.Lt:c=Fa.Nb?S.RGB8:S.RGB;break;case a.pm:c=Fa.Nb?S.RGBA32F:S.RGBA;break;case a.vq:c=Fa.Nb?S.RGB8:S.RGB;break;case a.om:c=Fa.Nb?W(fa.wo):S.DEPTH_COMPONENT;break;default:Aa.va("Wrong texture type")}return c}
function W(a){switch(a){case 16:a=S.DEPTH_COMPONENT16;break;case 24:a=S.DEPTH_COMPONENT24;break;case 32:a=S.DEPTH_COMPONENT32F;break;default:a=S.DEPTH_COMPONENT24}return a}function A(b){var c;switch(b.type){case a.Xh:c=S.UNSIGNED_BYTE;break;case a.Lt:c=S.UNSIGNED_BYTE;break;case a.pm:c=S.FLOAT;break;case a.vq:c=S.FLOAT;break;case a.om:c=S.UNSIGNED_INT;break;default:Aa.va("Wrong texture type")}return c}function n(a){a.Pb?a.Pb.play():a.me&&(a.Ks=!0);a.tt=!1}function g(a){a.Pb?a.Pb.pause():a.me&&(a.Ks=
!1);a.tt=!0}function ea(a){a.Pb?a.Pb.currentTime=a.Mc/a.zh:a.me&&(a.yk=M(a,a.Mc),t(a))}function ka(a){return a.Pb?!a.Pb.paused:a.me?a.Ks:!1}function wa(a){return a.Pb||a.me?a.Pb?2<=a.Pb.readyState:!0:0}function M(a,b){return Math.round(b*a.Is/a.Bl)}function Ea(a,b){if(ia.is_dynamic(a))return aa(a,b);for(var c=a.$r,g=0;g<c.length;g++){var e=aa(c[g],b);if(e)return e}return null}function Z(a,b,c){if(ia.is_dynamic(a))oa(a,b,c);else{a=a.$r;for(var g=0;g<a.length;g++)oa(a[g],b,c)}}function aa(a,b){var c=
a.Ba;if(c.length)for(var c=c[0].Ia,g=0;g<c.length;g++){var e=c[g];if("MAIN"==e.type||"SKY"==e.type)for(var h=0;h<e.Ua.length;h++)if(e.Zf[h]==b)return e.Ua[h]}return null}function oa(a,b,c){a=a.Ba;if(a.length){a=a[0].Ia;for(var g=0;g<a.length;g++){var e=a[g];if("MAIN"==e.type)for(var h=0;h<e.Ua.length;h++)if(e.Zf[h]==b){var f=e.Ua[h];e.Ua[h]=c;Ma(f)}}}}function ja(a,b){var c=a.Ba;if(c.length)for(var c=c[0].Ia,g=0;g<c.length;g++){var e=c[g];if("MAIN"==e.type)for(var h=0;h<e.Ua.length;h++){var f=e.Ua[h],
k=e.Zf[h];-1==b.indexOf(k)&&"NODE_TEX"!=f.source&&b.push(k)}}}function Ia(a,b,c){var g=a.elements;a=a.interpolation;for(var e=0;e<b;e++){var h=e/(b-1),f=Ca(g,h,!0),k=Ja(g,h,!0);if(f&&k)if("CONSTANT"==a)c.push.apply(c,f.color);else{var l=c,n=f,d=k;n==d?l.push.apply(l,n.color):(l.push(na.$v(d.color[0],d.position,n.color[0],n.position,h)),l.push(na.$v(d.color[1],d.position,n.color[1],n.position,h)),l.push(na.$v(d.color[2],d.position,n.color[2],n.position,h)),l.push(na.$v(d.color[3],d.position,n.color[3],
n.position,h)))}k&&!f&&c.push.apply(c,k.color);f&&!k&&c.push.apply(c,f.color)}}function Ca(a,b,c){for(var g=null,e=0;e<a.length;e++){var h=c?b-a[e].position:b-a[e][1][0];0<=h&&(g?h<=(c?b-g.position:b-a[e][1][0])&&(g=a[e]):g=a[e])}return g}function Ja(a,b,c){for(var g=null,e=0;e<a.length;e++){var h=c?a[e].position-b:a[e][1][0]-b;0<=h&&(g?h<=(c?g.position-b:g[1][0]-b)&&(g=a[e]):g=a[e])}return g}function Ma(a){var b;if(!(b=Fa.enable_texture_cache))a:{b=pa.get_all_objects("ALL",pa.DATA_ID_ALL);for(var c=
0;c<b.length;c++){var g=b[c];if(X(g,a)){b=!0;break a}for(var g=g.$r,e=0;e<g.length;e++)if(X(g[e],a)){b=!0;break a}}b=!1}b||(a.hc&&S.deleteTexture(a.hc),a=Pa.Ua.indexOf(a),-1!=a&&(Pa.Ua.splice(a,1),Pa.Yo.splice(a,1)))}function X(a,b){for(var c=0;c<a.Ba.length;c++)for(var g=a.Ba[c].Ia,e=0;e<g.length;e++)for(var h=g[e].Ua,f=0;f<h.length;f++)if(h[f]==b)return!0}function Q(a,b){for(var c=0;c<Pa.Ua.length;c++){var g=Pa.Ua[c];if(g.pl==a&&g.type==b.type&&g.source==b.source&&g.repeat==b.repeat&&g.anisotropic_filtering==
b.anisotropic_filtering&&g.hm==b.hm)return g}return null}var Aa=Object(O.a)(c),Ba=Object(T.a)(c),E=Object(G.a)(c),Ra=Object(r.a)(c),ta=Object(f.a)(c),ha=Object(k.a)(c),ga=Object(y.a)(c),P=Object(x.a)(c),xa=Object(p.a)(c),pa=Object(q.a)(c),ia=Object(b.a)(c),na=Object(u.a)(c),ra=Object(l.a)(c),Fa=E.wa,fa=E.di,Za=E.Qa,Da=null,Ga=null,Sa=null;a.Ve=0;a.Ca=0;a.vL=0;a.tL=0;a.uL=0;a.yj=0;a.Xh=10;a.Lt=20;a.pm=30;a.vq=40;a.om=50;a.Jt=60;a.Ht=70;a.Kt=80;a.It=90;a.JC=128;a.uJ=128;a.fD=128;var Pa={Ua:[],Yo:[]},
La={},za={},S=null,Ua,ya="TEXTURE_CUBE_MAP_POSITIVE_X TEXTURE_CUBE_MAP_NEGATIVE_X TEXTURE_CUBE_MAP_POSITIVE_Y TEXTURE_CUBE_MAP_NEGATIVE_Y TEXTURE_CUBE_MAP_POSITIVE_Z TEXTURE_CUBE_MAP_NEGATIVE_Z".split(" "),bb=[[2,0],[0,0],[2,1],[1,0],[1,1],[0,1]];a.fh=function(b){Ua=[b.NEAREST_MIPMAP_NEAREST,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_LINEAR];a.Ve=b.NEAREST;a.Ca=b.LINEAR;a.vL=b.NEAREST_MIPMAP_NEAREST;a.tL=b.LINEAR_MIPMAP_NEAREST;a.uL=b.NEAREST_MIPMAP_LINEAR;a.yj=b.LINEAR_MIPMAP_LINEAR;
S=b};a.YW=function(a,b){return b in La&&a in La[b]?La[b][a].rh:null};a.tY=function(a,b){return b in La&&a in La[b]?(H(La[b][a]),!0):!1};a.zD=B;a.Qj=L;a.rN=function(b,c){var g=S.createTexture(),e=S.TEXTURE_CUBE_MAP;S.bindTexture(e,g);S.texParameteri(e,S.TEXTURE_MAG_FILTER,S.LINEAR);c?S.texParameteri(e,S.TEXTURE_MIN_FILTER,Ua[Fa.Gk]):S.texParameteri(e,S.TEXTURE_MIN_FILTER,S.LINEAR);S.texParameteri(e,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE);S.texParameteri(e,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE);for(var h=0;6>
h;h++)S.texImage2D(S[ya[h]],0,S.RGBA,b,b,0,S.RGBA,S.UNSIGNED_BYTE,null);S.bindTexture(e,null);e=v();e.type=a.Xh;e.source="NONE";e.width=3*b;e.height=2*b;e.$q=1;e.Re=c;e.hc=g;e.Wb=S.TEXTURE_CUBE_MAP;return e};a.Zw=function(a,b){var c=a.Wb;S.bindTexture(c,a.hc);for(var g=0;6>g;g++)S.texImage2D(S[ya[g]],0,S.RGBA,b,b,0,S.RGBA,S.UNSIGNED_BYTE,null);S.bindTexture(c,null);a.width=3*b;a.height=2*b};a.HB=function(a,b,c){var g=a.Wb;S.bindTexture(g,a.hc);b&&S.texParameteri(g,S.TEXTURE_MIN_FILTER,b);c&&S.texParameteri(g,
S.TEXTURE_MAG_FILTER,c);S.bindTexture(g,null)};a.resize=function(b,c,g){c=Math.max(c,1);g=Math.max(g,1);if(b.width!=c||b.height!=g){switch(b.type){case a.Jt:S.bindRenderbuffer(S.RENDERBUFFER,b.Qf);S.renderbufferStorage(S.RENDERBUFFER,S.RGB565,c,g);S.bindRenderbuffer(S.RENDERBUFFER,null);break;case a.Ht:S.bindRenderbuffer(S.RENDERBUFFER,b.Qf);S.renderbufferStorage(S.RENDERBUFFER,W(fa.wo),c,g);S.bindRenderbuffer(S.RENDERBUFFER,null);break;case a.Kt:S.bindRenderbuffer(S.RENDERBUFFER,b.Qf);S.renderbufferStorageMultisample(S.RENDERBUFFER,
Fa.Jc,S.RGBA8,c,g);S.bindRenderbuffer(S.RENDERBUFFER,null);break;case a.It:S.bindRenderbuffer(S.RENDERBUFFER,b.Qf);S.renderbufferStorageMultisample(S.RENDERBUFFER,Fa.Jc,W(fa.wo),c,g);S.bindRenderbuffer(S.RENDERBUFFER,null);break;default:var e=b.Wb;S.bindTexture(e,b.hc);var h=z(b),f=w(b),k=A(b);b.Re&&(Fa.Nb||(g=Math.max(c,g),c=F(g),g=F(g)),b.NG=Math.round(Math.log(Math.max(c,g))/Math.log(2)+.5));S.texImage2D(e,0,f,c,g,0,h,k,null);S.bindTexture(e,null)}c>fa.Ic||g>fa.Ic?Aa.va('Slink texture "'+b.type+
'" has unsupported size: '+c+"x"+g+". Max available: "+fa.Ic+"x"+fa.Ic+"."):(b.width=c,b.height=g)}};a.nO=function(b,c,g,h,f){var k=b.type;if("BLEND"==k)return null;var l=b.image,n=v();n.type=a.Xh;n.width=1;n.height=1;if(Fa.Ty){var d=b.b4w_anisotropic_filtering;"DEFAULT"===d&&(d=c);"OFF"!==d&&Fa.anisotropic_filtering&&(n.anisotropic_filtering=parseFloat(d.split("x")[0]))}if("REPEAT"!=b.extension||b.b4w_shore_dist_map)n.repeat=!1;if(l){"IMAGE"==k&&"MOVIE"==l.source&&(n.dj=!0,n.st=b.name,n.jb=b.frame_start,
n.Mc=b.frame_offset,n.kl=b.frame_duration,n.uC=b.use_auto_refresh,n.Mk=b.use_cyclic,n.Bl=b.movie_length,n.hm=b.b4w_nla_video,0!=n.Mc&&ga.warn('Frame offset for texture "'+b.name+'" has a nonzero value. Can lead to undefined behaviour for mobile devices.'));n.source=k;c=Object(e.b)(f+l.filepath);if(c=Q(c,n))return c;B(n,l,f)}c=new Uint8Array([204,204,204,255]);switch(k){case "IMAGE":f=S.createTexture();l=S.TEXTURE_2D;S.bindTexture(l,f);S.texImage2D(l,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,c);break;
case "NONE":if("NONE"==b.b4w_source_type)return null;f=S.createTexture();l=S.TEXTURE_2D;n.source=b.b4w_source_type;if("SCENE"==n.source){if(!b.b4w_source_id)return null;h=m._18("name",b.b4w_source_id,g);if(!h)return null;n.Qs=b.b4w_source_id;n.Bk=b.b4w_source_size;h.Gg=h.Gg||[];h.Gg.push(n);S.bindTexture(l,f);S.texImage2D(l,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,c)}else"CANVAS"==n.source&&(g=b.b4w_source_id,c=b.b4w_source_size,n.Qs=g,n.il=b.b4w_enable_canvas_mipmapping,b=document.createElement("canvas"),
b.width=c,b.height=c,n.rh=b.getContext("2d"),h in La||(La[h]={}),La[h][g]=n,S.bindTexture(l,f));break;case "ENVIRONMENT_MAP":f=S.createTexture();l=S.TEXTURE_CUBE_MAP;S.bindTexture(l,f);b="POSITIVE_X NEGATIVE_X POSITIVE_Y NEGATIVE_Y POSITIVE_Z NEGATIVE_Z".split(" ");for(h=0;6>h;h++)S.texImage2D(S["TEXTURE_CUBE_MAP_"+b[h]],0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,c);break;default:return ga.error('texture "'+b.name+'" has unsupported type "'+k+'"'),null}n.hc=f;n.Wb=l;"NONE"==k?(n.il?S.texParameteri(l,S.TEXTURE_MIN_FILTER,
Ua[Fa.Gk]):S.texParameteri(l,S.TEXTURE_MIN_FILTER,S.LINEAR),n.anisotropic_filtering&&S.texParameterf(l,ha.Rz().TEXTURE_MAX_ANISOTROPY_EXT,n.anisotropic_filtering),"CANVAS"==n.source&&H(n)):(S.generateMipmap(l),S.bindTexture(l,null));return n};a.PU=H;a.QI=I;a.OI=t;a.ht=R;a.cz=F;a.Uo=function(a){return a&&(a.hc||a.Qf)?!0:!1};a.So=function(a){return a&&a.Qf?!0:!1};a.DX=function(b){return b.type==a.pm||b.type==a.vq?!0:!1};a.iQ=function(b){var c=0;switch(b.type){case a.Xh:case a.Lt:c=4;break;case a.pm:case a.vq:c=
32;break;case a.om:c=3;break;case a.Jt:case a.Ht:c=2;break;case a.Kt:c=4*Fa.Jc;break;case a.It:c=3*Fa.Jc}return c};a.cleanup=function(){if(!Fa.Js)for(var a in za)for(var b in za[a])za[a][b].Pb.pause(),za[a][b].Pb.src="",za[a][b].Pb.load();Pa.Ua.length=0;Pa.Yo.length=0;La={};za={}};a.pause=function(){for(var a in za)for(var b in za[a]){var c=za[a][b];ka(c)&&g(c)}};a.reset=function(){for(var a in za)for(var b in za[a])ea(za[a][b])};a.play=function(a){for(var b in za)for(var c in za[b]){var g=za[b][c];
a&&!g.tt||n(g)}};a.aA=function(a,b){return b in za&&a in za[b]?za[b][a]:null};a.AC=function(a){return a.hm};a.play_video=n;a.pause_video=g;a.reset_video=ea;a.bT=function(a,b,c){c in za&&a in za[c]&&(a=za[c][a],a.Pb?a.Pb.currentTime=b/a.zh:a.me&&(a.yk=b,t(a)))};a.iJ=ka;a.jJ=wa;a.fJ=function(a){return a.Pb||a.me?a.Pb?Math.round(a.Pb.currentTime*a.zh):a.yk:0};a.hJ=function(a){return a.Pb||a.me?a.Pb?a.Mc:M(a,a.Mc):0};a.cV=function(a){if(!a.Pb&&!a.me)return 0;var b=Math.min(a.kl,a.Bl-a.Mc);return a.Pb?
a.Mc+b:M(a,a.Mc+b)};a.Xw=function(a,b){return Math.round(b*a.Hs*(P.he()/a.zh))};a.gJ=function(a){return Math.min(a.kl,a.Bl-a.Mc)};a.bV=M;a.BP=function(a,b){var c=Ea(a,b);return c&&"CANVAS"==c.source?c.rh:null};a.sv=Ea;a.qT=Z;a.get_texture_names=function(a){var b=[];if(ia.is_dynamic(a))ja(a,b);else{a=a.$r;for(var c=0;c<a.length;c++)ja(a[c],b)}return b};a.BT=function(a){for(var b={},c=0;c<a.length;c++){for(var g=a[c].Ua,e=a[c].sg,h=[],f=[],k=0;k<g.length;k++){var l=g[k],n=e[k];if("CANVAS"==l.source)if(n in
b)l=b[n];else{var d=g[k],l=v();l.source="CANVAS";l.width=d.width;l.height=d.height;l.il=d.il;l.type=d.type;d=document.createElement("canvas");d.width=l.width;d.height=l.height;l.rh=d.getContext("2d");l.Wb=S.TEXTURE_2D;l.hc=S.createTexture();S.bindTexture(S.TEXTURE_2D,l.hc);l.il?S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,Ua[Fa.Gk]):S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,S.LINEAR);S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,S.LINEAR);S.bindTexture(S.TEXTURE_2D,null);d=l;d.rh.drawImage(g[k].rh.canvas,
0,0);H(d);b[n]=l}h.push(l);f.push(n)}a[c].Ua=h}};a.RO=function(a,b){for(var c=[],g=0;g<a.length;g++)Ia(a[g].data.value.color_ramp,b,c);return new Uint8Array(c.map(function(a){return m.M(255*a,0,255)}))};a.zM=Ia;a.VO=function(a,b){for(var c=new Float32Array(3),g=new Float32Array(3),e=[],f=0;f<a.length;f++){for(var k=a[f].data.value,l=[],n=k.curve_mapping.curves_data,d=k.curve_mapping.curve_extend,w=k.curve_mapping.curves_handle_types,k=0;k<n.length;k++){for(var z=d[k],p=n[k],A=[],R=w[k],F=0;F<p.length;F++)A.push([new Float32Array(3),
new Float32Array(p[F].concat(0)),new Float32Array(3)]);na.dz(A[0],null,A[1],R[0],R[0]);for(F=1;F<A.length-1;F++)na.dz(A[F],A[F-1],A[F+1],R[F],R[F]);na.dz(A[A.length-1],A[A.length-2],null,R[A.length-1],R[A.length-1]);if(2<A.length){if("AUTO"==R[0]){h.subtract(A[0][2],A[0][1],c);F=h.length(c);h.copy(A[1][0],g);g[0]<A[0][1][0]&&(g[0]=A[0][1][0]);h.subtract(g,A[0][1],g);var D=h.length(g);1E-8<D&&(h.scale(g,F/D,g),h.add(A[0][1],g,A[0][2]),h.subtract(A[0][1],g,A[0][0]))}p=A.length-1;"AUTO"==R[0]&&(h.subtract(A[p][0],
A[p][1],c),F=h.length(c),h.copy(A[p-1][2],g),g[0]>A[p][1][0]&&(g[0]=A[p][1][0]),h.subtract(g,A[p][1],g),D=h.length(g),1E-8<D&&(h.scale(g,F/D,g),h.add(A[p][1],g,A[p][0]),h.subtract(A[p][1],g,A[p][2])))}for(p=0;p<A.length-1;p++)na.fN(A[p][1],A[p][2],A[p+1][0],A[p+1][1]);p=[];3>=n.length?(F=Math.round(-b/2),R=Math.round(b/2)):(F=0,R=b);for(;F<R;F++){var D=F/(R-1),u=Ca(A,D,!1),v=Ja(A,D,!1);u&&v?p.push(na.mM(D,u[1],u[2],v[0],v[1])):v&&!u?"EXTRAPOLATED"==z?(D=v[1][0]==v[2][0]?v[1][1]:na.uG(D,v[1],v[2]),
p.push(D)):p.push(v[1][1]):u&&!v&&("EXTRAPOLATED"==z?(D=u[0][0]==u[1][0]?u[1][1]:na.uG(D,u[0],u[1]),p.push(D)):p.push(u[1][1]))}l.push(p)}e.push(l)}c=[];for(F=0;F<e.length;F++)for(l=e[F],k=0;k<l[0].length;k++)3>=l.length?(g=m.M(127.5*(l[0][k]+1),0,255),f=m.M(127.5*(l[1][k]+1),0,255),n=m.M(127.5*(l[2][k]+1),0,255),p=255):(g=m.M(255*l[0][k],0,255),f=m.M(255*l[1][k],0,255),n=m.M(255*l[2][k],0,255),p=m.M(255*l[3][k],0,255)),c.push(g,f,n,p);return new Uint8Array(c)};a.EE=function(b,c){var g=L(a.Xh,!1);
g.source="NODE_TEX";g.repeat=!1;R(g,{width:c,height:b.length/(4*c),data:b});return g};a.change_image=function(a,b,c,g,h){var f=Object(e.b)(h);if("WORLD"!=a.type){var k=Q(f,b);if(!k){k=v();k.type=b.type;k.anisotropic_filtering=b.anisotropic_filtering;k.source=b.source;k.Qs=b.Qs;k.width=b.width;k.height=b.height;k.$q=b.$q;k.Bk=b.Bk;k.il=b.il;k.rh=b.rh;k.Wb=b.Wb;k.hc=b.hc;k.Qf=b.Qf;k.dj=b.dj;k.kq=b.kq;k.Pb=b.Pb;k.st=b.st;k.Bl=b.Bl;k.zh=b.zh;k.jb=b.jb;k.Mc=b.Mc;k.kl=b.kl;k.Jh=b.Jh;k.yi=b.yi;k.me=b.me;
k.Is=b.Is;k.Hs=b.Hs;k.yk=b.yk;k.Ks=b.Ks;k.Ql=b.Ql;k.tt=b.tt;k.uC=b.uC;k.Mk=b.Mk;k.hm=b.hm;k.repeat=b.repeat;k.Oo=b.Oo;k.pl=b.pl;k.Ym=b.Ym;k.mA=b.mA;k.lA=b.lA;k.ol=b.ol;var l=k;S.bindTexture(b.Wb,b.hc);var n=S.getTexParameter(b.Wb,S.TEXTURE_MAG_FILTER),d=S.getTexParameter(b.Wb,S.TEXTURE_MIN_FILTER),w=S.getTexParameter(b.Wb,S.TEXTURE_WRAP_S);b=S.getTexParameter(b.Wb,S.TEXTURE_WRAP_T);l.hc=S.createTexture();S.bindTexture(l.Wb,l.hc);S.texParameteri(l.Wb,S.TEXTURE_MAG_FILTER,n);S.texParameteri(l.Wb,S.TEXTURE_MIN_FILTER,
d);S.texParameteri(l.Wb,S.TEXTURE_WRAP_S,w);S.texParameteri(l.Wb,S.TEXTURE_WRAP_T,b);S.bindTexture(l.Wb,null);C(k,h,f);R(k,g,0)}Z(a,c,k)}else k=b,C(k,h,f),R(k,g,0),ra.uU(a,k),ra.Zx(a)};a.qE=Ma;a.gf=function(a){return a.texture.sa};a.DS=function(){S=null};a.AF=function(){return Pa.Ua};a.AP=function(a){a=Pa.Ua.indexOf(a);return-1==a?!1:Pa.Yo[a]};a.TS=function(a){a=Pa.Ua.indexOf(a);-1!=a&&(Pa.Yo[a]=!0)}});t.a=d},function(E,t,d){E=d(0);var O=d(4);d=Object(E.a)("__time",function(d,G){function r(){return-1!==
f.Xk.dv?f.Xk.dv:b}var f=Object(O.a)(d),k=0,y=0,x=[],m=0,p=0,q=[],b=-1,u=0;G.RH=function(b){k=b;y=performance.now();for(b=0;b<x.length;b++){var h=x[b];k>h.Iz&&(x.splice(b,1),b--,h.callback())}for(b=0;b<q.length;b++){var h=q[b],e=1-(h.Iz-k)/h.duration,e=Math.min(e,1);h.callback(h.from+e*(h.to-h.from));1==e&&(q.splice(b,1),b--)}};G.get_timeline=function(){return k};G.$S=function(b){u=b};G.KP=function(){return u};G.set_timeout=function(b,f){var e;m++;e=m;x.push({id:e,callback:b,Iz:k+(performance.now()-
y+f)/1E3});return e};G.clear_timeout=function(b){for(var h=0;h<x.length;h++)if(x[h].id==b){x.splice(h,1);break}};G.clear_animation=function(b){for(var h=q.length;h--;)if(q[h].id==b){q.splice(h,1);break}};G.animate=function(b,f,e,c){e/=1E3;var a;p++;a=p;q.push({id:a,callback:c,from:b,to:f,Iz:k+e,duration:e});c(b);return a};G.reset=function(){y=k=0;x.length=0;p=m=q.length=0};G.he=r;G.cT=function(h){b=h};G.get_frame=function(b){return b*r()}});t.a=d},function(E,t,d){E=d(0);var O=d(5),T=d(4),G=d(62),
r=d(87),f=d(8),k=d(1),y=d(9),x=d(10),m=d(11),p=d(13),q=d(6),b=d(2),u=d(3),h=d(46),l=d(73),e=d(16);d=Object(E.a)("__physics",function(c,a){function d(a,b){for(var c=a.af,g=0;g<c.length;g++)c[g].Ed.Wp&&b.push(c[g]),d(c[g],b)}function la(a,b,c){for(var e=a.dd.ub,h=0;h<e.length;h++)for(var f=e[h].xa,k=0;k<f.ag.length;k++){var l=f.ag[k];"ANY"!=l.Rb&&c!=l.Rb||g(l,a,b)}}function v(a,b,c){if(X.Nv(a))switch(b){case X.IJ:var g=B(a);g.dd.pJ=!0;X.Ta(a,X.WK,Date.now()-performance.now(),ga.max_fps,ga.bz?P.iF:0);
break;case X.JJ:Aa.Sd("URANIUM:",c.slice(1));break;case X.EJ:Aa.error(c);break;case X.FJ:Ma.fbmsg.apply(this,c.slice(1));break;case X.RC:if(a=L(c.Ja)){var e=a;a=c.trans;g=c.quat;b=c.hj;var h=c.Ji,f=e.xa;f.yu=c.time;c=q.h(e.ka.na);q.s(a,c,g,f.xz);u.copy(b,f.hj);u.copy(h,f.Ji)}break;case X.PC:(a=L(c.fz))&&q.s(c.trans,1,c.quat,a.Aa.ss[c.pB]);break;case X.GJ:if(g=L(c[1]))a=c[4],g=g.xh.du[c[2]],Ra.set_translation(g,c[3]),Ra.set_rotation(g,a),Ra.Ea(g);break;case X.MJ:if(a=L(c[1]))a.Aa.speed=c[2];break;
case X.NC:g=B(a);H(g,c.Am,c.Bm,c.result,null,null,0);break;case X.OC:g=B(a);H(g,c.Am,c.Bm,c.result,c.Fm,c.coll_norm,c.coll_dist);break;case X.CJ:if(a=L(c[1]))a=a.xa,a.Em&&a.Em(c[2]);break;case X.Gy:case X.QC:g=B(a);if(a=g.dd.Ml[c.id])g=L(c.oo),b==X.Gy?(b=a.callback,b(a.id,c.hit_fract,g,c.hit_time)):(b=c.hit_fract,h=c.hit_time,f=c.hit_pos,e=a.callback,f?e(a.id,b,g,h,f,c.hit_norm):e(a.id,b,g,h));break;case X.LJ:wa(c.id);break;case X.KJ:a=ia.indexOf(a);Aa.log("Physics #"+a+" Ping: OUT "+(c[2]-c[1]).toFixed(3)+
" ms, IN "+(performance.now()-c[2]).toFixed(3)+" ms, ALL "+(performance.now()-c[1]).toFixed(3)+" ms");break;case X.HJ:pa=c[1];break;case X.DJ:a=ia.indexOf(a);Aa.log("Worker: #"+String(a));Aa.log(c[1]);break;default:Aa.error("Wrong message: "+b)}}function B(a){for(var b=0;b<ia.length;b++)if(ia[b]==a)return na[b]}function C(a){for(var b=0;b<na.length;b++)if(na[b]==a)return ia[b]}function L(a){return ra[a]||null}function H(a,b,c,g,e,h,f){a=a.dd.ub;for(var k=0;k<a.length;k++)for(var l=a[k].xa,n=0;n<l.ag.length;n++){for(var d=
l.ag[n],w=d.Jl,m=!1,z=0;z<w.length;z++){var p=w[z];if(p[0]===b&&p[1]===c){d.gs[z]=g;m=!0;break}}m&&(w=I(d),e&&d.$y!=b&&(m=e,z=h,p=f,m[0]+=z[0]*p,m[1]+=z[1]*p,m[2]+=z[2]*p,z[0]*=-1,z[1]*=-1,z[2]*=-1),d.callback(w,w?d.$y==b?L(c):L(b):null,e,h,f))}}function I(a){a=a.gs;for(var b=!1,c=0;c<a.length;c++)b=b||a[c];return b}function t(){Za.body++;return Za.body}function N(a,b,c){c=c?a.xa.Ja:t();var g=b.Wd;return{Ja:c,Wd:g,positions:g.Va[0].a_position,$a:g.$a||null,trans:q.j(a.ka.na),se:b.se,Cs:b.uh,Rb:b.Rb,
Og:U(b.Rb),Ze:b.Ze,Ye:b.Ye,$e:b.$e}}function U(a){var b=fa.indexOf(a);return-1==b?(fa.push(a),fa.length-1):b}function K(a,b){return{Ja:a,type:b,lf:0,tl:!1,Sl:!0,jg:!1,is_character:!1,KQ:!1,su:null,Rb:"",Og:0,zW:{},ag:[],Em:null,yu:0,xz:new Float32Array([0,0,0,1,0,0,0,1]),hj:new Float32Array(3),Ji:new Float32Array(3),iu:new Float32Array(3),Oq:new Float32Array(4),bs:null}}function D(a,b,c){var g=a.ka,e=a.Ed,h=e.rk;if(c)a:{for(var f in ra)if(ra[f]===a){c=f;break a}c=-1}else c=t();if(!(0>=c)){if("CAMERA"==
a.type){var k=e.vC?e.pu:"BOX";f=R(k,g);var l=.5,n=0}else if("EMPTY"==a.type)k="EMPTY",f=null,n=l=0;else{k=e.vC?e.pu:"BOX";f=R(k,g);var d=q.h(g.na);if(1!=d){var w=f;switch(k){case "BOX":w.min_x*=d;w.max_x*=d;w.min_y*=d;w.max_y*=d;w.min_z*=d;w.max_z*=d;break;case "CYLINDER":case "CONE":case "CAPSULE":w.height*=d;w.Jb*=d;break;case "SPHERE":w.Jb*=d}}l=g.se;n=g.uh}f=V(f);var d=q.j(g.na),w=q.g(g.na),m=e.Di,z=e.$I,p=e.lf,A=e.rt,F=e.qt,D=e.hr,u=e.Es,v=a.Rb,W=U(a.Rb),xa=e.Ze,C=e.Ye,e=e.$e,M=g.Xc.Jb;a=a.tu;
var x=k;if(b.length){var ca=[],fa={};fa.quat=new Float32Array([0,0,0,1]);fa.trans=new Float32Array(3);fa.worker_bounding=f;fa.bounding_type=k;ca.push(fa);k=q.o(g.na,Pa);fa=Sa;g=q.g(g.na);y.invert(g,fa);for(g=0;g<b.length;g++){var B={},K=b[g],N=K.Ed.pu,P=new Float32Array(4),G=new Float32Array(3),pa=q.j(K.ka.na),L=q.g(K.ka.na);q.B(pa,k,G);y.multiply(fa,L,P);B.trans=G;B.quat=P;B.bounding_type=N;B.worker_bounding=V(R(N,K.ka));ca.push(B)}b=ca}else b=[];return{Ja:c,trans:d,quat:w,tl:m,WE:z,lf:p,rt:A,qt:F,
hr:D,Es:u,Rb:v,Og:W,Ze:xa,Ye:C,$e:e,size:M,oJ:f,DE:a,Cs:n,se:l,QD:x,rk:h,uE:b}}}function R(a,b){switch(a){case "BOX":var c=b.eb;break;case "CYLINDER":c=b.Gq;break;case "CONE":c=b.Fq;break;case "SPHERE":c=b.Xc;break;case "CAPSULE":c=b.Eq}return c}function V(a){if(!a)return null;var b={};"number"===typeof a.min_x&&(b.min_x=a.min_x);"number"===typeof a.min_y&&(b.min_y=a.min_y);"number"===typeof a.min_z&&(b.min_z=a.min_z);"number"===typeof a.max_x&&(b.max_x=a.max_x);"number"===typeof a.max_y&&(b.max_y=
a.max_y);"number"===typeof a.max_z&&(b.max_z=a.max_z);"object"===typeof a.Da&&(b.center=a.Da);"number"===typeof a.Jb&&(b.radius=a.Jb);"number"===typeof a.height&&(b.height=a.height);return b}function F(a,b,c,g,e){var h=q.j(a.ka.na),f=q.o(b.ka.na,Pa),k=new Float32Array(3);q.B(h,f,k);switch(b.Aa.type){case 10:b=b.ug;a=a.ka.eb;X.Ta(e,X.zK,c,k,b.bU,b.zB,(a.max_z-a.min_z)/2,g);break;case 20:X.Ta(e,X.yK,c,k,a.Zy)}}function z(a){return a.xa&&a.xa.su}function w(a,b,c,g,e,h,f,k,l,n){var d;Za.Yc++;d=Za.Yc.toString(16);
var w=b.xa.Ja;X.Ta(W(w),X.GK,d,a,k,w,c,g,e.xa.Ja,h,f,l,n);b.xa.su=d}function W(a){for(var b=0;b<na.length;b++)for(var c=na[b].dd.ub,g=0;g<c.length;g++)if(c[g].xa.Ja==a)return ia[b];return null}function A(a){var b=a.xa;if(b=b?0===b.lf?!0:!0===b.tl?!0:!1===b.Sl?!0:"RIGID_BODY"!==b.type&&"DYNAMIC"!==b.type?!0:!1:!1)var b=q.i(a.ka.na,Da),c=q.f(a.ka.na,Sa),b=b[0]!=a.xa.iu[0]||b[1]!=a.xa.iu[1]||b[2]!=a.xa.iu[2]||c[0]!=a.xa.Oq[0]||c[1]!=a.xa.Oq[1]||c[2]!=a.xa.Oq[2]||c[3]!=a.xa.Oq[3];if(b){var b=a.xa,g=a.ka,
c=X.CF(X.sq);c.Ja=b.Ja;var e=q.i(g.na,c.trans),g=q.f(g.na,c.quat);u.copy(e,b.iu);y.copy(g,b.Oq);"DYNAMIC"==b.type&&y.identity(c.quat);X.Ta(W(b.Ja),X.sq)}a=a.af;for(b=0;b<a.length;b++)A(a[b])}function n(a,b,c,g,e){e=e||new Float32Array(3);a=q.g(a.ka.na);e[0]=b;e[1]=c;e[2]=g;u.transformQuat(e,a,e)}function g(a,b,c){var g=a.Jl,e=a.gs,h=a.$y,f=[],k=a.Rb;f||Ca.va("At least one destination required");for(var l=0;l<b.dd.ub.length;l++){var n=b.dd.ub[l];if("ANY"==k||n.xa.Rb==k&&"NAVMESH"!=n.xa.type)n=n.xa.Ja,
f&&-1==f.indexOf(n)&&f.push(n)}for(b=0;b<f.length;b++)k=f[b],h<k&&!ea(g,h,k)?(g.push([h,k]),e.push(!1)):h>k&&!ea(g,k,h)&&(g.push([k,h]),e.push(!1));X.Ta(c,X.xK,h);X.Ta(c,X.FK,g,a.Qi)}function ea(a,b,c){for(var g=0;g<a.length;g++)if(a[g][0]==b&&a[g][1]==c)return!0;return!1}function ka(a){a.xa&&a.xa.Em&&(a=a.xa,X.Ta(W(a.Ja),X.SK,a.Ja),a.Em=null)}function wa(a){var b=Ea(a),c=M(a).dd;c.Ml[a]&&(delete c.Ml[a],c.sB.splice(c.sB.indexOf,1),X.Ta(b,X.aL,a))}function M(a){for(var b=0;b<na.length;b++){var c=
na[b];if(c.dd.Ml[a])return c}return null}function Ea(a){for(var b=0;b<na.length;b++)if(na[b].dd.Ml[a])return ia[b];return null}function Z(a,b,c){if(b.Mp){a=a.xa.Ja;var g=b.Ao*b.yr,e=b.Mq*b.Nq,h=-b.Kp*b.Lp*2*Math.PI/b.Us;b.Nr&&(h*=-1);switch(b.type){case 10:X.Ta(c,X.qL,a,g,e,h);break;case 20:X.Ta(c,X.oL,a,g,e,h)}}}function aa(a){return a.jg&&"CHASSIS"==a.ug.mg}function oa(a){return a.jg&&"HULL"==a.ug.mg}function ja(a){return"NAVMESH"==a.Ed.rk}function Ia(a){return a.dn&&"MAIN_BODY"==a.Do.mg}var Ca=
Object(O.a)(c),Ja=Object(T.a)(c),Ma=Object(G.a)(c),X=Object(r.a)(c),Q=Object(f.a)(c),Aa=Object(k.a)(c),Ba=Object(x.a)(c),E=Object(m.a)(c),Ra=Object(p.a)(c),ta=Object(l.a)(c),ha=Object(e.a)(c),ga=Ja.xa,P=Ja.wa,xa=Ja.pe,pa=0,ia=[],na=[],ra={},Fa=[],fa=["ANY"],Za={body:0,Yc:0,pH:0},Da=new Float32Array(3),Ga=new Float32Array(3),Sa=new Float32Array(4),Pa=q.b(),La=q.b();a.EQ=function(a){a.dd={pJ:!1,ub:[],Ml:{},sB:[]};var b=ga.it;xa.prevent_caching&&(b+="?v="+Object(h.c)());Aa.log("%cLOAD PHYSICS","color: #0a0",
ga.On?"Using Separate Worker Thread,":"Using Same Thread,","Max FPS: "+ga.max_fps);Aa.log("%cPHYSICS PATH","color: #0a0",b);var c=X.pO(b,!ga.On);X.fM(c,v);ia.push(c);na.push(a);ga.ping&&setInterval(function(){X.Ta(c,X.YK,performance.now())},1E3)};a.RM=function(a){return a.dd?a.dd.pJ:!0};a.cleanup=function(){for(var a=0;a<ia.length;a++)X.terminate(ia[a]);ia.length=0;na.length=0;ra={};Fa.length=0;fa=["ANY"];for(var b in Za)Za[b]=0};a.append_object=function(a,c){if(c.dd){var g=C(c),e=[];a.Ed.Wp&&d(a,
e);var h=c.dd.ub;if(aa(a)||oa(a)||a.is_character||Ia(a)||a.Jn){var f=ja(a);if(f){var e=t(),e=K(e,"NAVMESH"),k=Q.lb(a,c).Ia;e.bs=null;for(var l=0;l<k.length;l++){var n=k[l];if("PHYSICS"==n.type){e.bs=ta.LR(n.Za);break}}}else e=D(a,e,!1),X.Ta(g,X.CK,e.Ja,e.trans,e.quat,e.rk,e.tl,e.WE,e.lf,e.rt,e.qt,e.hr,e.Es,e.Og,e.Ze,e.Ye,e.$e,e.QD,e.oJ,e.size,e.se,e.Cs,e.uE,e.DE),ra[e.Ja]=a,Fa.push(a),k=K(e.Ja,"BOUNDING"),k.type=e.rk,k.lf=e.lf,k.tl=e.tl,k.Rb=e.Rb,k.Og=e.Og,e=k;l=e;a.xa=l;k={hb:null,xa:l};f||(h.push(k),
la(c,g,l.Rb))}else for(e=Q.lb(a,c).Ia,f=0;f<e.length;f++){k=e[f];if(l="PHYSICS"==k.type){a:{l=c.dd.ub;for(n=0;n<l.length;n++){var m=l[n].hb;if(m&&m.id==k.id){l=!0;break a}}l=!1}l=!l}if(l)if(k.Wd.Eb)if(k.yg&&c.sa.Zd){var p=k,k=c,l=g,n=k.sa.Zd;X.Ta(l,X.LK,n.vj);if(p.kV){m={};m.dst_noise_scale0=p.dst_noise_scale0;m.dst_noise_scale1=p.dst_noise_scale1;m.dst_noise_freq0=p.dst_noise_freq0;m.dst_noise_freq1=p.dst_noise_freq1;m.dir_min_shore_fac=p.dir_min_shore_fac;m.dir_freq=p.dir_freq;m.dir_noise_scale=
p.dir_noise_scale;m.dir_noise_freq=p.dir_noise_freq;m.dir_min_noise_fac=p.dir_min_noise_fac;m.dst_min_fac=p.dst_min_fac;m.waves_hor_fac=p.waves_hor_fac;var p=n.waves_height,A=n.waves_length;n.Rl?X.Ta(l,X.cD,m,n.zp[0],n.zp[1],n.yp[0],n.yp[1],n.IA,p,A,n.OB,k.sa.NB):X.Ta(l,X.cD,m,0,0,0,0,0,p,A,0,null)}}else{if(k.Di){var R=a,v=k,l=g,n=t(),p=v.Wd,m=p.Va[0].a_position,W=p.$a||null,p=v.Rb,A=U(p),xa=v.Ze,M=v.Ye,v=v.$e,R=q.j(R.ka.na);X.Ta(l,X.IK,n,m,W,R,A,xa,M,v);l=K(n,"STATIC_MESH");l.tl=!0;l.Rb=p;l.Og=A}else n=
g,l=N(a,k),X.Ta(n,X.KK,l.Ja,l.positions,l.$a,l.trans,l.se,l.Cs,l.Og,l.Ze,l.Ye,l.$e),n=K(l.Ja,"STATIC_MESH"),n.Rb=l.Rb,n.Og=l.Og,l=n;a.xa=l;k={hb:k,xa:l};h.push(k);la(c,g,l.Rb)}else Aa.error("Object "+a.name+" has collision material with no assigned vertices")}if(aa(a)||oa(a)){f=a.xa.Ja;aa(a)?(a.Aa.type=10,X.Ta(g,X.DK,f,a.Aa.ZB,a.Aa.aC,a.Aa.$B,a.Aa.EC,a.Aa.JA)):oa(a)&&(a.Aa.type=20,X.Ta(g,X.BK,f,a.Aa.Pm,a.Aa.Sn,a.Aa.Tn));if(a.Aa.xn)switch(h=a.Aa.xn,a.Aa.type){case 10:F(h[0],a,f,!0,g);F(h[1],a,f,!0,
g);F(h[2],a,f,!1,g);F(h[3],a,f,!1,g);break;case 20:for(e=0;e<h.length;e++)F(h[e],a,f,!1,g)}Z(a,a.Aa,g)}else if(a.is_character){h=a.ka;f=a.xa;h=h.eb.max_z-h.eb.min_z;e=f.Ja;p=a.bE;k=p.iV;l=p.IS;n=p.VT;m=p.UQ;p=p.lV;R=q.g(a.ka.na);A=Da;switch(a.type){case "CAMERA":A[0]=0;A[1]=-1;A[2]=0;u.transformQuat(A,R,A);Ga[0]=0;Ga[1]=0;Ga[2]=-1;break;case "MESH":A[0]=0;A[1]=0;A[2]=1;u.transformQuat(A,R,A);Ga[0]=0;Ga[1]=0;Ga[2]=1;break;case "EMPTY":A[0]=0,A[1]=1,A[2]=0,u.transformQuat(A,R,A),Ga[0]=0,Ga[1]=1,Ga[2]=
0}A[1]=0;u.normalize(A,A);R=u.dot(A,Ga);X.Ta(g,X.EK,e,Math.acos(R)*(0<-A[0]*Ga[2]?-1:1),h,k,l,n,m,p);f.is_character=!0}else if(Ia(a)){f=a.xa.Ja;X.Ta(g,X.HK,f,a.xh.Pm,a.xh.Sn,a.xh.Tn);if(a.xh.du)for(h=a.xh.du,e=0;e<h.length;e++)k=h[e],l=q.j(k.ka.na),n=q.o(a.ka.na,Pa),m=new Float32Array(3),q.B(l,n,m),X.Ta(g,X.AK,f,m,k.Zy);a.xa.KQ=!0}for(f=0;f<Fa.length;f++)if(g=Fa[f],g.xa&&!z(g))for(h=0;h<g.lB.length;h++)m=g.lB[h],e=m.target,k=m.cS,e.xa&&(l=new Float32Array([m.dS,m.eS,m.fS]),n=b.Y(new Float32Array([m.Ab,
m.Bb,m.Cb]),new Float32Array(4)),"HINGE"==k&&y.rotateY(n,Math.PI/2,n),p=q.l(Pa),p=q.t(l,p),p=q.q(n,p),p=q.p(g.ka.na,p,Pa),A=q.o(e.ka.na,La),A=q.p(A,p,A),p=q.j(A),A=q.g(A),R={},R.use_limit_x=m.YU,R.use_limit_y=m.ZU,R.use_limit_z=m.$U,R.use_angular_limit_x=m.UU,R.use_angular_limit_y=m.VU,R.use_angular_limit_z=m.WU,R.limit_max_x=m.fR,R.limit_min_x=m.iR,R.limit_max_y=m.gR,R.limit_min_y=m.jR,R.limit_max_z=m.hR,R.limit_min_z=m.kR,R.limit_angle_max_x=m.$Q,R.limit_angle_min_x=m.cR,R.limit_angle_max_y=m.aR,
R.limit_angle_min_y=m.dR,R.limit_angle_max_z=m.bR,R.limit_angle_min_z=m.eR,w(k,g,l,n,e,p,A,R,null,null))}};a.$O=L;a.update=function(a,b){for(var c=0;c<ia.length;c++){var g=ia[c],e=a;g&&X.fG(g)&&X.Ta(g,X.sL,e,b);for(var h=0;h<Fa.length;h++){var f=Fa[h],k=f.xa;if(k.Sl&&k.yu){var l=X.fG(g)?e-k.yu:performance.now()/1E3-k.yu,l=Math.min(l,10/ga.max_fps),l=l-1/ga.max_fps;P.MR&&(l=0);var n=Pa;q.m(k.xz,l,k.hj,k.Ji,Pa);Ra.set_tsr(f,n);Ra.Ea(f);A(f);if(f.Aa)for(var k=f,l=k.Aa.xn,n=k.ka.na,d=Pa,w=0;w<l.length;w++){var m=
l[w];q.p(n,k.Aa.ss[w],d);Ra.set_tsr(m,d);Ra.Ea(m)}f.Aa&&f.Aa.Mp&&(d=f,l=d.Aa,k=l.Mp)&&(w=d.Aa.jI,q.p(d.ka.na,d.Aa.kI,k.ka.na),n=Da,q.w(w,d.ka.na,n),d=Sa,y.setAxisAngle(n,-l.Kp*l.Lp*2*Math.PI,d),l=q.g(k.ka.na),y.multiply(d,l,l),Ra.Ea(k));f.Aa&&f.Aa.QB&&(d=f,l=d.Aa,k=l.QB)&&(w=d.Aa.fI,q.p(d.ka.na,d.Aa.gI,k.ka.na),n=Da,q.w(w,d.ka.na,n),d=Sa,w=Math.abs(l.speed)*l.Ss,w>l.Zo&&(w=l.Zo),y.setAxisAngle(n,-w,d),l=q.g(k.ka.na),y.multiply(d,l,l),y.normalize(l,l),Ra.Ea(k));f.Aa&&f.Aa.bC&&(n=f,k=n.Aa,f=k.bC)&&
(d=n.Aa.sI,q.p(n.ka.na,n.Aa.tI,f.ka.na),l=Da,q.w(d,n.ka.na,l),n=Sa,y.setAxisAngle(l,-Math.abs(k.Ao)*k.kr,n),k=q.g(f.ka.na),y.multiply(n,k,k),y.normalize(k,k),Ra.Ea(f))}}X.kS(g);g=na[c];(e=g.sa.Zd)&&0<e.waves_height&&(g=Ba.xc(g,E.ic),e=u.length(g.Fi)||1,X.Ta(ia[c],X.nL,g.time*e))}};a.tP=function(){return na[0]};a.pause=function(){for(var a=0;a<ia.length;a++)X.Ta(ia[a],X.XK)};a.resume=function(){for(var a=0;a<ia.length;a++)X.Ta(ia[a],X.bL)};a.enable_simulation=function(a){(a=a.xa)||Ca.va("No object physics");
if(!a.Sl){var b=a.Ja,c=W(b);a.Sl=!0;X.Ta(c,X.VK,b)}};a.disable_simulation=function(a){(a=a.xa)||Ca.va("No object physics");if(a.Sl){var b=a.Ja,c=W(b);a.Sl=!1;X.Ta(c,X.UK,b)}};a.wp=function(a){return!!a.dd};a.ab=function(a){return!!a.xa};a.has_dynamic_physics=function(a){return(a=a.xa)&&a.Sl&&("RIGID_BODY"==a.type||"DYNAMIC"==a.type)&&0<a.lf&&0==a.tl?!0:!1};a.has_simulated_physics=function(a){return(a=a.xa)&&a.Sl?!0:!1};a.set_gravity=function(a,b,c,g){a=a.xa.Ja;X.Ta(W(a),X.mL,a,b,c,g)};a.qQ=z;a.apply_constraint=
w;a.clear_constraint=function(a){a=a.xa;X.Ta(W(a.Ja),X.$K,a.su);a.su=null};a.pull_to_constraint_pivot=function(b,c,g,e,h,f){c=q.s(c,1,g,Pa);h=q.s(h,1,f,La);q.o(c,c);q.p(h,c,c);Ra.get_tsr(e,h);q.p(h,c,c);Ra.set_tsr(b,c);Ra.Ea(b);e=q.j(b.ka.na);h=q.g(b.ka.na);a.set_transform(b,e,h)};a.set_transform=function(a,b,c){var g=a.xa,e=X.CF(X.sq),h=q.i(a.ka.na,e.trans);a=q.f(a.ka.na,e.quat);q.s(h,1,a,g.xz);e.Ja=g.Ja;u.copy(b,e.trans);y.copy(c,e.quat);X.Ta(W(g.Ja),X.sq)};a.sync_transform=A;a.sync_bounding=function(a,
b){var c=C(b),g=[];a.Ed.Wp&&d(a,g);(aa(a)||oa(a)||a.is_character||Ia(a)||a.Jn)&&!ja(a)&&(g=D(a,g,!0),X.Ta(c,X.pL,g.Ja,g.trans,g.quat,g.rk,g.tl,g.WE,g.lf,g.rt,g.qt,g.hr,g.Es,g.Og,g.Ze,g.Ye,g.$e,g.QD,g.oJ,g.size,g.se,g.Cs,g.uE,g.DE))};a.sync_mesh=function(a,b){for(var c=C(b),g=a.Ba[0].Ia,e=0;e<g.length;e++){var h=g[e];if("PHYSICS"==h.type){ha.FI(g[e],g[e].Wd,a.ka.og);if(h.Di)Aa.error("The function is not implemented for ghost objects yet");else{var f=c,h=N(a,h,!0);X.Ta(f,X.rL,h.Ja,h.positions,h.$a,
h.trans,h.se,h.Cs,h.Og,h.Ze,h.Ye,h.$e)}la(b,c,a.xa.Rb)}}};a.apply_velocity=function(a,b,c,g){var e=Da;n(a,b,c,g,e);a=a.xa.Ja;b=Math.abs(0);c=Math.abs(0);g=Math.abs(0);var h=Math.abs(e[0]),f=Math.abs(e[1]),k=Math.abs(e[2]);e[0]=h?e[0]/h*Math.max(h,b):0;e[1]=f?e[1]/f*Math.max(f,c):0;e[2]=k?e[2]/k*Math.max(k,g):0;X.Ta(W(a),X.eD,a,e[0],e[1],e[2])};a.apply_velocity_world=function(a,b,c,g){a=a.xa.Ja;X.Ta(W(a),X.eD,a,b,c,g)};a.apply_force=function(a,b,c,g,e){var h=Da;e?(h[0]=b,h[1]=c,h[2]=g):n(a,b,c,g,h);
a=a.xa.Ja;X.Ta(W(a),X.MK,a,h[0],h[1],h[2])};a.apply_torque=function(a,b,c,g){var e=Da;n(a,b,c,g,e);a=a.xa.Ja;X.Ta(W(a),X.OK,a,e[0],e[1],e[2])};a.set_angular_velocity=function(a,b,c,g){a=a.xa.Ja;X.Ta(W(a),X.cL,a,b,c,g)};a.set_character_move_dir=function(a,b,c){a=a.xa.Ja;X.Ta(W(a),X.fL,a,b,c)};a.set_character_move_type=function(a,b){var c=a.xa.Ja;X.Ta(W(c),X.gL,c,b)};a.set_character_walk_velocity=function(a,b){var c=a.xa.Ja;X.Ta(W(c),X.lL,c,b)};a.set_character_run_velocity=function(a,b){var c=a.xa.Ja;
X.Ta(W(c),X.iL,c,b)};a.set_character_fly_velocity=function(a,b){var c=a.xa.Ja;X.Ta(W(c),X.dL,c,b)};a.character_jump=function(a){a=a.xa.Ja;X.Ta(W(a),X.QK,a)};a.character_rotation_inc=function(a,b,c){a=a.xa.Ja;X.Ta(W(a),X.RK,a,b,c)};a.set_character_rotation=function(a,b,c){a=a.xa.Ja;X.Ta(W(a),X.hL,a,b,c)};a.set_character_rotation_h=function(a,b){var c=a.xa.Ja;X.Ta(W(c),X.eL,c,b)};a.set_character_rotation_v=function(a,b){var c=a.xa.Ja;X.Ta(W(c),X.kL,c,b)};a.set_character_vert_move_dir_angle=function(a,
b){var c=a.xa.Ja;X.Ta(W(c),X.jL,c,b)};a.append_collision_test=function(a,b,c,e){var h=a.xa;if(!h.bs){for(var f=h.Ja,k=0;k<h.ag.length;k++)if(a=h.ag[k],a.Rb==b&&a.callback==c)return;a={$y:f,Qi:e||!1,Rb:b,callback:c,Jl:[],gs:[]};h.ag.push(a);b=W(f);g(a,B(b),b)}};a.remove_collision_test=function(a,b,c){a=a.xa;for(var g=W(a.Ja),e=B(g),h=0;h<a.ag.length;h++){var f=a.ag[h];if(f.Rb==b&&f.callback==c){if(I(f)){var k=u.set(0,0,0,Da);f.callback(!1,null,k,k,0)}a.ag.splice(h,1);h--;for(var k=g,f=f.Jl,l=e.dd.ub,
n=0;n<l.length;n++)for(var d=l[n].xa,w=0;w<d.ag.length;w++)for(var m=d.ag[w],z=0;z<m.Jl.length;z++)for(var p=m.Jl[z],A=0;A<f.length;A++){var R=f[A];p[0]==R[0]&&p[1]==R[1]&&(f.splice(A,1),A--)}f.length&&X.Ta(k,X.dD,f)}}};a.apply_collision_impulse_test=function(a,b){a.xa&&a.xa.Em&&ka(a);var c=a.xa;X.Ta(W(c.Ja),X.NK,c.Ja);c.Em=b};a.clear_collision_impulse_test=ka;a.append_ray_test=function(a,b,c,g,e,h,f,k,l){var n;Za.pH++;n=Za.pH;a={id:n,Ja:a?a.xa.Ja:0,from:new Float32Array(b),to:new Float32Array(c),
Rb:g,Og:U(g),ID:h,yM:f,Qi:k,Kv:l,callback:e};b=W(a.Ja)||ia[0];c=B(b).dd;c.Ml[n]=a;c.sB.push(a);X.Ta(b,X.JK,a.id,a.Ja,a.from,a.to,a.Og,a.ID,a.yM,a.Qi,a.Kv);return n};a.remove_ray_test=wa;a.change_ray_test_from_to=function(a,b,c){var g=Ea(a),e=M(a).dd.Ml[a];e&&!e.ID&&(e.from.set(b),e.to.set(c),X.Ta(g,X.PK,a,b,c))};a.hG=function(a){return M(a).dd.Ml[a]?!0:!1};a.vehicle_throttle=function(a,b){var c=a.Aa;c.Ao=b;Z(a,c,W(a.xa.Ja))};a.vehicle_steer=function(a,b){var c=a.Aa;c.Kp=b;Z(a,c,W(a.xa.Ja))};a.vehicle_brake=
function(a,b){var c=a.Aa;c.Mq=b;Z(a,c,W(a.xa.Ja))};a.is_vehicle_chassis=aa;a.is_vehicle_hull=oa;a.GX=ja;a.JQ=function(a){if(!a.jg)return!1;a=a.ug.mg;return"WHEEL_FRONT_LEFT"==a||"WHEEL_FRONT_RIGHT"==a||"WHEEL_BACK_LEFT"==a||"WHEEL_BACK_RIGHT"==a?!0:!1};a.IQ=function(a){return a.jg?"BOB"==a.ug.mg?!0:!1:!1};a.LQ=function(a){return a.dn?"BOB"==a.Do.mg?!0:!1:!1};a.jG=function(a){return a.jg&&"STEERING_WHEEL"==a.ug.mg?!0:!1};a.iG=function(a){return a.jg&&"SPEEDOMETER"==a.ug.mg?!0:!1};a.kG=function(a){return a.jg&&
"TACHOMETER"==a.ug.mg?!0:!1};a.get_vehicle_speed=function(a){return a.Aa.speed};a.nV=function(a){switch(a){case "WHEEL_FRONT_RIGHT":return 0;case "WHEEL_FRONT_LEFT":return 1;case "WHEEL_BACK_LEFT":return 2;case "WHEEL_BACK_RIGHT":return 3}};a.NF=function(a){return a.xa&&a.xa.is_character};a.FX=Ia;a.TP=function(){return pa};a.xO=function(){for(var a=0;a<ia.length;a++)X.Ta(ia[a],X.TK)};a.remove_object=function(a){var b=a.xa.Ja;if("BOUNDING"==a.xa.type){var c=Fa.indexOf(a);-1==c&&Aa.error("Object "+
a.name+" doesn't have bounding physics");delete ra[b];Fa.splice(c,1)}for(var c=W(b),g=B(c),e=g.dd.ub,h=[],f=0;f<e.length;f++)for(var k=e[f].xa,l=0;l<k.ag.length;l++)for(var n=k.ag[l],d=0;d<n.Jl.length;d++){var w=n.Jl[d],m=n.gs[d];if(w[0]==b||w[1]==b)n.Jl.splice(d,1),n.gs.splice(d,1),d--,m&&!I(n)&&(m=u.set(0,0,0,Da),n.callback(!1,null,m,m,0)),h.push(w)}h.length&&X.Ta(c,X.dD,h);a.xa&&a.xa.Em&&ka(a);a=g.dd.ub;for(g=0;g<a.length;g++)a[g].xa.Ja==b&&(a.splice(g,1),g--);X.Ta(c,X.ZK,b)};a.sQ=function(a){var b=
a.Ed;return a.jg||a.dn||a.is_character||a.Jn&&!b.Di&&0<b.lf&&("DYNAMIC"==b.rk||"RIGID_BODY"==b.rk)}});t.a=d},function(E,t,d){E=d(0);var O=d(5),T=d(25),G=d(30),r=d(28),f=d(1),k=d(9),y=d(36),x=d(6),m=d(2),p=d(3);d=Object(E.a)("__geometry",function(d,b){function u(){return{length:0,frames:1,Tc:0,offset:0,Nm:0}}function h(a,b,c){var g=b.a_tbn,e=b.a_position,h=e.length;b=a.Ub.length;if(c)for(var f=a.Ub[0].ff.a_position,k=0;k<h;k++)e[k]=f[k];for(var l=1;l<b;l++)for(var n=c?c[l].value:a.Ub[l].Lr,f=a.Ub[l].ff.a_position,
k=0;k<h;k++)e[k]+=n*f[k];b=y.f(g);if(c)for(h=a.Ub[0].ff.a_tbn,l=0;l<b;l++)y.n(g,h,l);for(l=0;l<b;l++){e=y.i(Q);for(k=1;k<a.Ub.length;k++)if(h=a.Ub[k].ff.a_tbn,n=c?c[k].value:a.Ub[k].Lr)h=y.e(h,l,Aa),n=y.p(y.i(Ba),h,n,Aa),y.k(n,e,e);k=y.e(g,l,Aa);k=y.k(e,k,Aa);y.n(g,k,l)}}function l(a){return 65536<a.Eb?Ja.zF()?!1:!0:!1}function e(a){return 0<a.$a.length?!0:!1}function c(b,c,g){if(!e(b))return b;g||X.log('%cDEBUG max vertices exceeded for indexed submesh "'+b.name+'": '+b.Eb*(c||1)+", will use drawArrays",
"color: #aa0");c=b.$a;g=b.Eb;var h=b.gb,f=b.Va,k;for(k in h){var l=h[k],n=V(l,g);h[k]=a(c,l,n)}for(h=0;h<f.length;h++){var d=f[h];for(k in d)l=d[k],n=V(l,g),d[k]=a(c,l,n)}for(h=0;h<b.Ub.length;h++){k=b.Ub[h].ff;for(var w in k)l=k[w],n=V(l,g),k[w]=a(c,l,n)}b.Eb=c.length;b.$a=new Uint16Array(0);return b}function a(a,b,c){if(0==b.length)return new Float32Array(0);for(var g=new Float32Array(a.length*c),e=0;e<a.length;e++)for(var h=a[e],f=0;f<c;f++)g[c*e+f]=b[c*h+f];return g}function q(){return{Je:null,
Pc:ea(),Xm:0,count:0,mc:{},usage:0,ro:0,uo:0,Yd:[],Eh:null,Ub:null,an:1,sh:!0}}function la(a,b,c,g){if("a_normal"==b)return g=y.d(g),la(a,"a_tbn",c,g);var e=a.mc,h=e[b],f=aa(b);if(h)c&&h.Tc!=c&&Ca.va('invalid num_comp for "'+b+'"'),oa(a.Pc,b,g,h.offset);else{h=wa(a.Pc,f);-1==h&&(a.Pc.push(ka(f,0)),h=a.Pc.length-1);var f=a.Pc[h].im,k=new f.constructor(f.length+g.length);k.set(f);a.Pc[h].im=k;oa(a.Pc,b,g,f.length);b=e[b]=u();b.Tc=c;b.offset=f.length;b.length=g.length}L(a);return a}function v(a,b){if("a_normal"==
b){for(var c=v(a,"a_tbn"),g=y.f(c),e=new Float32Array(3*g),h=0;h<g;h++){var f=y.g(c,h,E);e.set(f,3*h)}return e}if(c=a.mc[b])return g=aa(b),ja(b,Ea(a.Pc,g).subarray(c.offset,c.offset+c.length),new Float32Array(c.length));Ca.va("extract_array_float() failed; invalid name: "+b)}function B(a,c){var g;switch(c){case b.Yn:case b.pq:g=P.STATIC_DRAW;break;case b.At:g=P.DYNAMIC_DRAW;break;default:Ca.va("Wrong draw_mode")}a.usage=g}function C(a,b,c){function g(a,b){e[a]||(e[a]=0);e[a]+=b}var e={},h;for(h in a[0]){var f=
a[0][h],k=aa(h);g(k,f.length*a.length)}for(h in b)f=b[h],k=aa(h),g(k,f.length);if(c){a=c.at.length;k=aa("a_part_ts");g(k,4*a);k=aa("a_part_r");g(k,4*a);b=c.op;for(h in b)k=aa(h),g(k,b[h].Tc*a);c=c.Fx;for(h in c)k=aa(h),g(k,a)}return e}function L(a){a.Je?(a.Eh||(a.Eh=P.createBuffer()),P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,a.Eh),P.bufferData(P.ELEMENT_ARRAY_BUFFER,a.Je,a.usage),a.ro=a.Je.byteLength):a.ro=0;for(var b=a.uo=0;b<a.Pc.length;b++){var c=a.Pc[b].type,g=wa(a.Yd,c);-1==g&&(a.Yd.push({Nk:null,
type:c,wO:Ma.EI()}),g=a.Yd.length-1);c=a.Yd[g];c.Nk||(c.Nk=P.createBuffer());P.bindBuffer(P.ARRAY_BUFFER,c.Nk);P.bufferData(P.ARRAY_BUFFER,a.Pc[b].im,a.usage);a.uo+=a.Pc[b].im.byteLength}}function H(a,b){a.eb=T.h(a.eb,b);a.jc=T.i(a.jc,b);a.Xc=T.k(a.Xc,b);a.Ld=T.j(a.Ld,b)}function I(a){for(var b=a[0],c=a[0],e=g("JOIN_"+a.length+"_SUBMESHES"),h=0,f=0;f<a.length;f++)h+=a[f].$a.length;e.$a=new Uint32Array(h);var k=h=0;if(0<a[0].Ub.length)for(var l=0;l<a[0].Ub.length;l++){for(f=0;f<a.length;f++)h+=a[f].Ub[l].ff.a_position.length,
k+=y.f(a[f].Ub[l].ff.a_tbn);f={a_position:new Float32Array(h),a_tbn:y.c(k)};e.Ub.push({Lr:a[0].Ub[l].Lr,ff:f})}for(f=h=0;f<a.length;f++)h+=a[f].Eb;e.Eb=h;for(var n in c.gb){for(f=h=0;f<a.length;f++)h+=a[f].gb[n].length;e.gb[n]=new Float32Array(h)}for(n in c.Va[0]){for(f=h=0;f<a.length;f++)h+=a[f].Va[0][n].length;for(f=0;f<c.Va.length;f++)e.Va[f]=e.Va[f]||{},e.Va[f][n]=new Float32Array(h)}f=e.Hd;f.eb=T.n(b.Hd.eb);k=h=0;l=[];for(c=0;c<a.length;c++){var d=a[c],w=d.$a,z=d.Eb,p=d.gb;n=d.Hd.Xc;T.D(f.eb,
d.Hd.eb);T.E(f.Xc,n);T.G(d.Hd.Ld,l);for(n=0;n<w.length;n++)e.$a[h+n]=w[n]+k;var h=h+w.length,A;for(A in p){var w=p[A],R=k*V(w,z);e.gb[A].set(w,R)}for(n=0;n<d.Va.length;n++){var p=d.Va[n],F=e.Va[n];for(A in p)w=p[A],R=k*V(w,z),F[A].set(w,R)}k+=z}f.jc=T.z(m._1(l),!0);if(0<e.Ub.length)for(c=0;c<e.Ub.length;c++)for(A=e.Ub[c].ff,n=h=f=0;n<a.length;n++)k=a[n].Ub[c].ff,A.a_position.set(k.a_position,f),A.a_tbn.set(k.a_tbn,h),f+=k.a_position.length,h+=k.a_tbn.length;a[0].Gf&&(e.Gf={at:b.Gf.at,VB:b.Gf.VB,iI:!0,
Fx:b.Gf.Fx,op:b.Gf.op,Ou:b.Gf.Ou});return e}function t(a,b,c){b=b.Hd;for(var g=T.w(),e=T.C(),h=[],f=0;f<c.length;f++)T.h(a.Hd.eb,c[f],g),T.D(b.eb,g),T.j(a.Hd.Ld,c[f],e),T.G(e,h);b.jc=T.z(m._1(h),!0);b.Ld=T.x(b.jc);b.Xc=T.B(b.jc)}function N(a,b,e,h,f,k){var l=a.submeshes[b],n=l.base_length,d=g("SUBMESH_"+a.name+"_"+a.materials[b].name);d.Eb=n;var w=!1;if(D(e,"a_texcoord")){var z=null,A=a.materials[b];b=a.submeshes[b];if(A.ih.length)switch(A=A.ih[0],A.texture_coords){case "UV":z=K(b,A.uv_layer||a.active_uv_name,
a.name);break;case "ORCO":for(var F=a.b4w_boundings.bb_src,z=new Float32Array(2*b.base_length),A=(F.max_x+F.min_x)/2,u=(F.max_y+F.min_y)/2,v=F.max_x-F.min_x,F=F.max_y-F.min_y,y=0,q=0;q<b.position.length;q+=3)z[y++]=(b.position[q]-A)/v+.5,z[y++]=(b.position[q+1]-u)/F+.5}null===z&&(z=new Float32Array(2*b.base_length));b=z}else b=new Float32Array(0);if(D(e,"a_orco_tex_coord")){for(var z=a.b4w_boundings.bb_src,A=new Float32Array(3*l.base_length),u=l.position,v=z.max_x-z.min_x,F=z.max_y-z.min_y,y=z.max_z-
z.min_z,C=q=0;C<u.length;C+=3)v?A[q++]=m.M(parseFloat(((u[C]-z.min_x)/v).toFixed(5)),0,1):A[q++]=.5,F?A[q++]=m.M(parseFloat(((u[C+1]-z.min_y)/F).toFixed(5)),0,1):A[q++]=.5,y?A[q++]=m.M(parseFloat(((u[C+2]-z.min_z)/y).toFixed(5)),0,1):A[q++]=.5;z=A}else z=new Float32Array(0);A=l.group;if(D(e,"a_influence")&&h){u=new Float32Array(4*n);v=A.length/n;F=new Float32Array(v);for(y=0;y<v;y++){F[y]=-1;for(var M in h)if(q=h[M],q.eJ===y){F[y]=q.Az;break}}C=3<v?v:4;h=new Float32Array(C);M=new Uint32Array(C);for(var y=
new Float32Array(4),q=new Float32Array(C),C=new Uint32Array(C),x=new Float32Array(4),ca=0;ca<n;ca++)h.set(q),M.set(C),y.set(x),u.set(R(A,v,ca,n,F,h,M,y),4*ca)}else u=new Float32Array(0);h=u;f=f?m.O(f):{};f.a_color={Wm:!0};f.a_color.src=D(e,"a_color")&&a.active_vcol_name?[{name:a.active_vcol_name,Hh:7}]:[];d.gb.a_texcoord=b;d.gb.a_influence=h;d.gb.a_orco_tex_coord=z;h=d.gb;M=l.vertex_colors;b=l.color;z=a.name;A=[];for(u=0;u<M.length;u++)A.push(M[u].name);for(var V in f)if(u=f[V].src,u.length){for(F=
v=0;F<u.length;F++)v+=m._42(u[F].Hh);h[V]=new Float32Array(v*n);for(F=y=0;F<u.length;F++){var B=u[F].name,q=u[F].Hh,C=m._43(q),x=A.indexOf(B);if(-1==x)X.warn('vertex color "'+B+'" for mesh "'+z+'" not found'),ca=7;else{var ca=M[x].mask,xa;xa=M;for(var N=x,P=n,G=0,L=0;L<N;L++)G+=m._42(xa[L].mask);xa=G*P}N=m._42(ca);(q&ca)!==q&&X.error("Wrong color extraction from "+B+" to "+V+' for the mesh "'+z+'".');for(B=0;B<n;B++)for(P=0;3>P;P++)C[P]&&(G=y+m._41(q,P),L=m._41(ca,P),h[V][B*v+G]=-1==x?0:b[xa+B*N+
L]);y+=N}}else h[V]=new Float32Array(0);V=a.name;xa=d.gb;if(k)for(var ea in k)xa[k[ea]]=K(l,ea,V);d.$a=new Uint32Array(l.indices);ea=l.position.length/n/3;V=D(e,"a_tbn")&&l.tbn.length?!0:!1;xa=D(e,"a_shade_tangs")&&l.shade_tangs.length?!0:!1;0<a.b4w_shape_keys.length&&(w=!0);for(f=0;f<ea;f++){k=U(l,n,V,xa,f);if(w)if(h={},h.name=a.b4w_shape_keys[f].name,d.Ub.push(h),f){h.ff=k;h.Lr=a.b4w_shape_keys[f].value;continue}else h.ff=U(l,n,V,xa,f),h.Lr=1;d.Va.push(k)}if(1<ea&&!w){a=d.Va[0];k={};for(var wa in a)k[wa]=
new Float32Array(a[wa]);d.Va.push(k)}D(e,"a_polyindex")&&(c(d,1,!0),d.gb.a_polyindex=W(d));l=l.boundings;e=d.Hd;e.eb=T.w();e.eb.max_x=l.bb.max_x;e.eb.max_y=l.bb.max_y;e.eb.max_z=l.bb.max_z;e.eb.min_x=l.bb.min_x;e.eb.min_y=l.bb.min_y;e.eb.min_z=l.bb.min_z;wa=l.rbb;a=l.caxis_x;n=l.caxis_y;w=l.caxis_z;k=l.be_ax;e.jc=T.e(a,n,w,l.be_cen);p.scale(e.jc.Ab,k[0],e.jc.Ab);p.scale(e.jc.Bb,k[1],e.jc.Bb);p.scale(e.jc.Cb,k[2],e.jc.Cb);e.Xc=T.B(e.jc);p.copy(wa.rbb_c,e.Ld.Da);p.copy(a,e.Ld.Ab);p.copy(n,e.Ld.Bb);
p.copy(w,e.Ld.Cb);l=wa.rbb_s;p.scale(e.Ld.Ab,l[0],e.Ld.Ab);p.scale(e.Ld.Bb,l[1],e.Ld.Bb);p.scale(e.Ld.Cb,l[2],e.Ld.Cb);return d}function U(a,b,c,g,e){var h={},f=new Float32Array(3*b),k=y.c(c?b:0),l=e*b*3;f.set(a.position.subarray(l,l+3*b),0);c&&y.b(a.tbn,e*b,b,k);g&&(c=new Float32Array(3*b),c.set(a.shade_tangs.subarray(0,3*b),0),h.a_shade_tangs=c);h.a_position=f;h.a_tbn=k;return h}function K(a,b,c){var g=2*a.base_length,e=a.uv_layers.indexOf(b);if(-1==e)return X.warn('uv layer "'+b+'" for mesh "'+
c+'" not found'),new Float32Array(g);b=e*g;return a.texcoord.subarray(b,b+g)}function D(a,b){return-1<a.indexOf(b)?!0:!1}function R(a,c,g,e,h,f,k,l){for(var n=!0,d=0;d<c;d++){var w=a[d*e+g];if(-1!==w){var m=h[d];-1!==m&&(f[d]=w,k[d]=m,n=!1)}}if(n)return l;F(f,k,b.Ly,!1);for(d=a=0;4>d;d++)a+=f[d];if(.01>a)return l;for(d=0;4>d;d++)f[d]/=a;if(.01>Math.abs(f[0]-1))l[0]=k[0]+1;else for(d=0;4>d;d++)l[d]=k[d]+f[d];return l}function V(a,b){if(0==b)return 0;var c=a.length,g=c/b;g!=Math.floor(g)&&Ca.va("Array size mismatch during geometry calculation: array length="+
c+", base length="+b);return g}function F(a,c,g,e){for(var h=a.length,f=h,k=!1,l=e?-1:1;1<f||k;){1<f&&(f=Math.floor(f/1.247330950103979));for(var k=!1,n=0;f+n<h;n++)if(g==b.Ly?0>l*(a[n]-a[n+f]):a[n]<a[n+f]&&e)k=a[n],a[n]=a[n+f],a[n+f]=k,k=c[n],c[n]=c[n+f],c[n+f]=k,k=!0}}function z(a,b,c){var g=[],e=[];p.subtract(b,a,g);p.subtract(c,a,e);p.normalize(g,g);p.normalize(e,e);a=m.M(p.dot(g,e),-1,1);return Math.acos(a)}function w(a,b){var c=[];if(e(b))for(var g=b.$a,h=g.length/3,f=0;f<h;f++){var k=new Float32Array(9),
l=g[3*f];k[0]=a[3*l];k[1]=a[3*l+1];k[2]=a[3*l+2];l=g[3*f+1];k[3]=a[3*l];k[4]=a[3*l+1];k[5]=a[3*l+2];l=g[3*f+2];k[6]=a[3*l];k[7]=a[3*l+1];k[8]=a[3*l+2];c[f]=k}else for(f=0;f<a.length;f++)k=new Float32Array(9),k[0]=a[9*f],k[1]=a[9*f+1],k[2]=a[9*f+2],k[3]=a[9*f+3],k[4]=a[9*f+4],k[5]=a[9*f+5],k[6]=a[9*f+6],k[7]=a[9*f+7],k[8]=a[9*f+8],c[f]=k;return c}function W(a){for(var b=new Float32Array(a.Eb),c=0;c<a.Eb;c++)b[c]=c%3/2;return b}function A(a,b,c){var g=p.dist(a,b);a=p.dist(a,c);b=p.dist(b,c);c=(g+a+
b)/2;return c*(c-g)*(c-a)*(c-b)}function n(a){for(var b=new Float32Array([0,0,0,1,1,1,1,0]),c=new Float32Array(8*a),g=0;g<a;g++)c.set(b,8*g);return c}function g(a){return{name:a,Eb:0,$a:null,Va:[],gb:{a_influence:new Float32Array(0),a_color:new Float32Array(0),a_texcoord:new Float32Array(0)},Ub:[],Hd:{eb:T.w(),jc:T.y(),Xc:T.A(),Ld:T.C()},Gf:null}}function ea(a){var b=[],c;for(c in a)b.push(ka(c,a[c]));return b}function ka(a,b){return{im:new (Z(a))(b),type:a}}function wa(a,b){for(var c=0;c<a.length;c++)if(a[c].type==
b)return c;return-1}function M(a,b){var c=wa(a,b);return-1==c?null:a[c].Nk}function Ea(a,b){var c=wa(a,b);return-1==c?null:a[c].im}function Z(a){switch(a){case "float":return Float32Array;case "short":return Int16Array;case "unsigned_byte":return Uint8Array;default:return Float32Array}}function aa(a){a=a.replace(/_next$/,"");a=a.replace(/param_GEOMETRY_VC_a_\w+/,"param_GEOMETRY_VC_a");switch(a){case "a_tbn":case "a_shade_tangs":return"short";case "a_color":case "a_bending_col_main":case "a_bending_col_detail":case "a_grass_size":case "a_grass_color":case "param_GEOMETRY_VC_a":case "a_polyindex":case "a_p_bb_vertex":case "a_halo_bb_vertex":case "a_bb_vertex":return"unsigned_byte";
default:return"float"}}function oa(a,b,c,g){var e=aa(b);Ia(b,c,a[wa(a,e)].im.subarray(g))}function ja(a,b,c){switch(aa(a)){case "float":c.set(b);break;case "short":for(a=0;a<b.length;a++)c[a]=m._48(b[a]);break;case "unsigned_byte":for(a=0;a<b.length;a++)c[a]=m._64(b[a])}return c}function Ia(a,b,c){switch(aa(a)){case "float":c.set(b);break;case "short":for(a=0;a<b.length;a++)c[a]=m._3(b[a]);break;case "unsigned_byte":for(a=0;a<b.length;a++)c[a]=m._65(b[a])}return c}var Ca=Object(O.a)(d),Ja=Object(r.a)(d),
Ma=Object(G.a)(d),X=Object(f.a)(d),Q=y.c(),Aa=y.c(),Ba=y.c(),E=new Float32Array(3),Ra=new Float32Array(3),ta=new Float32Array(3),ha=k.create(),ga=new Float32Array(8);b.pq=10;b.At=20;b.Ly=0;b.JV=1;b.Yn=b.pq;var P=null;b.bo="float";b.LV="short";b.MV="unsigned_byte";b.fh=function(a){P=a};b.pI=function(a,b,g){l(a)&&c(a);var e=a.$a,f=a.Eb,k=a.Va,n={},d;for(d in a.gb)d in g&&!g[d].Wm||(n[d]=a.gb[d]);g=q();0<a.Ub.length&&h(a,k[0]);d=a.Gf;if(e.length){var w=e.length;if(65536>=f)var e=new Uint16Array(e),m=
P.UNSIGNED_SHORT;else e=new Uint32Array(e),m=P.UNSIGNED_INT}else w=f,e=null;for(var z=C(k,n,d),z=ea(z),A={},R=0;R<z.length;R++)A[z[R].type]=0;var F={},D;for(D in n){var v=n[D],y=v.length;if(y){var W=aa(D),R=F[D]=u();R.length=y;R.Tc=V(v,f);R.offset=A[W];oa(z,D,v,A[W]);A[W]+=y}}n=k.length;for(D in k[0])if(v=k[0][D],W=aa(D),y=v.length,v=V(v,f),y)for(R=F[D]=u(),R.length=y,R.frames=n,R.Tc=v,R.offset=A[W],1<n&&(R=F[D+"_next"]=u(),R.length=y,R.frames=n,R.Tc=v,R.offset=A[W]+y),R=0;R<n;R++)v=k[R][D],W=aa(D),
oa(z,D,v,A[W]),A[W]+=y;if(d){k=d.at;D=d.VB;var n=d.op,y=d.Fx,W=d.iI,f={a_part_ts:{data:[],Tc:4},a_part_r:{data:[],Tc:4}},M;for(M in n)f[M]={data:[],Tc:n[M].Tc};for(M in y)f[M]={data:[],Tc:1};for(v=0;v<k.length;v++){R=k[v];W&&D&&!d.Ou&&(R=x.p(D,k[v],ga));!W&&d.Ou&&p.subtract(k[v],D,k[v]);f.a_part_ts.data.push(R[0],R[1],R[2],R[3]);f.a_part_r.data.push(R[4],R[5],R[6],R[7]);for(M in n)for(var R=n[M].Tc,ca=0;ca<R;ca++)f[M].data.push(n[M].data[v*R+ca]);for(M in y)f[M].data.push(y[M][0])}for(M in f)k=aa(M),
oa(z,M,f[M].data,A[k]),D=u(),D.Tc=f[M].Tc,D.offset=A[k],D.Nm=1,D.length=f[M].data.length,F[M]=D,A[k]+=D.length;g.an=d.at.length}g.count=w;g.Je=e;g.Pc=z;g.Xm=m;g.mc=F;B(g,b);L(g);g.Ub=a.Ub;return g};b.$T=h;b.NQ=l;b.MQ=e;b.Ex=c;b.HI=function(a,b,c){B(a,b);a.count=c.length;a.Je=c;a.Xm=c instanceof Uint16Array?P.UNSIGNED_SHORT:P.UNSIGNED_INT};b.GI=la;b.Kz=v;b.MX=function(a){a.usage=P.STATIC_DRAW};b.vR=function(a){a.usage=P.DYNAMIC_DRAW};b.sC=L;b.ft=function(a,b,c,g){P.bindBuffer(P.ARRAY_BUFFER,a.Yd[wa(a.Yd,
b)].Nk);P.bufferSubData(P.ARRAY_BUFFER,m.h*g,c)};b.TM=function(a){a.Eh&&P.deleteBuffer(a.Eh);for(var b=0;b<a.Yd.length;b++)a.Yd[b].Nk&&P.deleteBuffer(a.Yd[b].Nk);a.Yd.length=0};b.PF=function(a,b){return a.submeshes[b].base_length?!1:!0};b.YB=function(a,b){for(var c=0;c<a.Va.length;c++){var g=a.Va[c].a_position;x.D(g,b,g,0);g=a.Va[c].a_tbn;y.m(g,b,g);(g=a.Va[c].a_shade_tangs)&&0<g.length&&x.x(g,b,g,0)}(c=a.gb.au_center_pos)&&c.length&&x.D(c,b,c,0);H(a.Hd,b)};b.ZT=function(a,b){var c=a.gb.au_center_pos;
if(c&&c.length){var g=new Float32Array(c);x.D(g,b,g,0);for(var e=0;e<a.Va.length;e++)for(var h=0;h<g.length;h++)a.Va[e].a_position[h]+=g[h]-c[h];c.set(g)}else Ca.va('Attribute "au_center_pos" is missing in particle submesh');H(a.Hd,b)};b.rM=H;b.YT=function(a,b){var c=a.Eb,g;for(g in b){var e=b[g].length;a.gb[g]=new Float32Array(e*c);for(var h=0;h<c;h++)for(var f=0;f<e;f++)a.gb[g][h*e+f]=b[g][f]}};b.oI=I;b.wR=function(a,b,e){if(!a.Eb)return g("EMPTY");var h=e.length;65536<a.Eb*h&&!Ja.zF()&&c(a,h);
var f=a.$a,k=a.Eb,l=a.gb,n=a.Va,d;for(d in b){var w=b[d].length,m=w*k;l[d]=new Float32Array(m);for(var z=0;z<k;z++)for(m=0;m<w;m++)l[d][z*w+m]=b[d][m]}b=g("CLONE_"+h+"_SUBMESHES");b.Eb=k*h;b.$a=new Uint32Array(f.length*h);for(z=0;z<h;z++)for(w=f.length*z,d=k*z,m=0;m<f.length;m++)b.$a[w+m]=f[m]+d;for(var p in l)for(f=l[p],m=f.length*h,w=V(f,k),b.gb[p]=new Float32Array(m),z=0;z<h;z++)d=k*w*z,b.gb[p].set(f,d);for(p in n[0])for(z=0;z<n.length;z++)for(f=n[z][p],m=f.length*h,w=V(f,k),b.Va[z]=b.Va[z]||{},
b.Va[z][p]=new Float32Array(m),m=0;m<h;m++)switch(l=e[m],d=k*w*m,p){case "a_position":x.D(f,l,b.Va[z][p],d);break;case "a_tbn":x.z(f,l,b.Va[z][p],d);break;case "a_shade_tangs":x.A(f,l,b.Va[z][p],d);break;default:Ca.va("Wrong attribute name: "+p)}t(a,b,e);return b};b.WD=t;b.Wu=N;b.TO=function(a){var b=a.Eb,c=a.Va[0].a_position,e=new Float32Array(12*b);a=new Uint32Array(4*a.$a.length);for(var h=new Float32Array(4*b),f=0;f<b;f++){e[12*f]=c[3*f];e[12*f+1]=c[3*f+1];e[12*f+2]=c[3*f+2];e[12*f+3]=c[3*f];
e[12*f+4]=c[3*f+1];e[12*f+5]=c[3*f+2];e[12*f+6]=c[3*f];e[12*f+7]=c[3*f+1];e[12*f+8]=c[3*f+2];e[12*f+9]=c[3*f];e[12*f+10]=c[3*f+1];e[12*f+11]=c[3*f+2];a[6*f]=4*f+2;a[6*f+1]=4*f+1;a[6*f+2]=4*f;a[6*f+3]=4*f+2;a[6*f+4]=4*f;a[6*f+5]=4*f+3;var k=Math.random();h[4*f]=k;h[4*f+1]=k;h[4*f+2]=k;h[4*f+3]=k}c=g("HALO");c.Va[0]={};c.Eb=4*b;c.Va[0].a_position=e;c.gb.a_halo_bb_vertex=n(b);c.gb.a_random_vals=h;c.$a=a;return c};b.pQ=D;b.eF=function(a,b,c){for(var e=[],h=0;h<a.submeshes.length;h++){var f=N(a,h,b,null,
c,null);f.Eb&&e.push(f)}return e.length?1==e.length?e[0]:I(e):g("EMPTY")};b.qU=function(a,b,c,g){var e=a.Je,h=v(a,"a_position"),f=b.DR,k=b.ER;b=b.EO;for(var l=e,n=l.length/3,d=0;d<n;d++){var w=l[3*d],m=l[3*d+1],z=l[3*d+2],p=h[3*w+1],A=h[3*w+2],R=h[3*m+1],F=h[3*m+2],D=h[3*z+1],u=h[3*z+2];f[3*d]=(h[3*w]+h[3*m]+h[3*z])/3;f[3*d+1]=(p+R+D)/3;f[3*d+2]=(A+F+u)/3}x.D(f,c,k);c=k.length/3;for(h=0;h<c;h++)f=k[3*h]-g[0],l=k[3*h+1]-g[1],n=k[3*h+2]-g[2],b[h]=f*f+l*l+n*n;g=e;e=b.length;if(!(2>e))for(k=e,h=!1;1<
k||h;)for(1<k&&(k=Math.floor(k/1.247330950103979)),h=!1,c=0;k+c<e;c++)0>b[c]-b[c+k]&&(h=b[c],b[c]=b[c+k],b[c+k]=h,h=g,f=c,l=c+k,n=h[3*f],d=h[3*f+1],w=h[3*f+2],h[3*f]=h[3*l],h[3*f+1]=h[3*l+1],h[3*f+2]=h[3*l+2],h[3*l]=n,h[3*l+1]=d,h[3*l+2]=w,h=!0);e=g;P.bindBuffer(P.ELEMENT_ARRAY_BUFFER,a.Eh);P.bufferData(P.ELEMENT_ARRAY_BUFFER,e,P.DYNAMIC_DRAW)};b.IT=F;b.UD=function(a,b,c){for(var g=b.length/3,e=a.length/3,h=[],f=Array(3),k=Array(3),l=Array(3),n=0;n<e;n++){for(var d=a[3*n],w=a[3*n+1],m=a[3*n+2],A=
0;3>A;A++)f[A]=b[3*d+A],k[A]=b[3*w+A],l[A]=b[3*m+A];if(c)var A=z(f,k,l),R=z(k,l,f),F=Math.PI-A-R;else F=R=A=1;var D=h,u;u=f;var v=l,y=[],W=[],q=[];p.subtract(k,u,y);p.subtract(v,u,W);p.cross(y,W,q);p.normalize(q,q);u=q;for(v=0;3>v;v++)y=3*w+v,W=3*m+v,D[3*d+v]=A*u[v],D[y]=R*u[v],D[W]=F*u[v]}if(c)for(var M in c)for(n=c[M],a=0;3>a;a++){b=3*n[0]+a;for(e=1;e<n.length;e++)f=3*n[e]+a,h[b]+=h[f];for(e=1;e<n.length;e++)f=3*n[e]+a,h[f]=h[b]}for(n=0;n<g;n++){c=n;M=h;a=new Float32Array(3);for(b=0;3>b;b++)e=3*
c+b,a[b]=M[e];p.normalize(a,a);for(b=0;3>b;b++)e=3*c+b,M[e]=a[b]}return h};b.VD=function(a,b,c){for(var g={},e=b.length/3,h=0;h<e;h++){var f=String(b[3*h])+String(b[3*h+1])+String(b[3*h+2]);g[f]=[]}b=a.length;for(h=0;h<b;h++)e=a[h],f=String(c[3*e])+String(c[3*e+1])+String(c[3*e+2]),f in g&&g[f].push(e);return g};b.Pz=function(a,b,c,g){var e;e=w(a.Va[0].a_position,a);if(c){var h;h=a.Va[0].a_tbn;for(var f=y.f(h),l=new Float32Array(3*f),n=0;n<f;n++){var d=y.h(h,n,ha),d=p.transformQuat(m.e,d,E);l[3*n]=
d[0];l[3*n+1]=d[1];l[3*n+2]=d[2]}h=w(l,a)}l=e.length;n=new Float32Array(l);f=E;for(a=0;a<l;a++){var z=e[a];f.set(z.subarray(0,3));Ra.set(z.subarray(3,6));ta.set(z.subarray(6));n[a]=Math.sqrt(A(f,Ra,ta))}f=new Float32Array(l);f[0]=n[0];for(a=1;a<l;a++)f[a]=f[a-1]+n[a];l=f[n.length-1];n=[];for(a=0;a<b;a++){var d=l*m._39(g),d=m.F(f,d,0,f.length-1),z=c?h[d]:e[d],R=g;(d=E)||(d=new Float32Array(3));var F=z[0],D=z[1],u=z[2],v=z[3],W=z[4],q=z[5],M=z[6],C=z[7],z=z[8],x=m._39(R),R=m._39(R);1<x+R&&(x=1-x,R=
1-R);var ca=1-x-R;d[0]=ca*F+x*v+R*M;d[1]=ca*D+x*W+R*C;d[2]=ca*u+x*q+R*z;c?(n[a]=new Float32Array(4),p.normalize(d,d),d=k.rotationTo(m.e,d,ha),n[a][0]=d[0],n[a][1]=d[1],n[a][2]=d[2],n[a][3]=d[3]):(n[a]=new Float32Array(3),n[a][0]=d[0],n[a][1]=d[1],n[a][2]=d[2])}return n};b.Vu=W;b.qY=A;b.lF=n;b.zH=function(a,b,c){a=a.Va[0].a_position;for(var g=0;g<a.length;g+=3)a[g]=(a[g]-c[0])*b[0]+c[0],a[g+1]=(a[g+1]-c[1])*b[1]+c[1],a[g+2]=(a[g+2]-c[2])*b[2]+c[2]};b.Uy=function(a,b,c){var g=a.Ba[0].Ia;a=a.ka.og;for(var e=
1;e<a.length;e++)a[e].name==b&&(a[e].value=c);for(e=0;e<g.length;e++)if(!g[e].yh&&g[e].Of&&!g[e].Tj){b=g[e].Za;c=aa("a_position");var h=Ea(b.Pc,c);P.bindBuffer(P.ARRAY_BUFFER,M(b.Yd,c));var f=b.mc.a_position;c=g[e];var k=a;if(f){for(var l=f.offset,f=f.length+l,n=c.Za.Ub[0].ff.a_position,d=l;d<f;d++)h[d]=n[d-l];for(d=1;d<c.Za.Ub.length;d++){var n=c.Za.Ub[d].ff.a_position,w=k[d].value;if(w)for(var z=l;z<f;z++)h[z]+=w*n[z-l]}P.bufferSubData(P.ARRAY_BUFFER,m.h*l,h.subarray(l))}h=aa("a_tbn");c=Ea(b.Pc,
h);P.bindBuffer(P.ARRAY_BUFFER,M(b.Yd,h));k=b.mc.a_tbn;b=c;c=a;if(k){h=k.offset;k=k.length+h;l=g[e].Za.Ub;f=l[0].ff.a_tbn;d=y.i(Q);for(n=h;n<k;n+=y.a){for(var w=y.i(Ba),z=(n-h)/y.a,p=1;p<l.length;p++){var A=c[p].value;if(A){var R=y.e(l[p].ff.a_tbn,z,Aa),A=y.p(d,R,A,Aa);y.k(A,d,w)}}z=y.e(f,z,Aa);w=y.k(w,z,Aa);b[n]=m._3(w[0]);b[n+1]=m._3(w[1]);b[n+2]=m._3(w[2]);b[n+3]=m._3(w[3])}P.bufferSubData(P.ARRAY_BUFFER,m.h*h,b.subarray(h))}}};b.check_shape_keys=function(a){return a.ka.Of};b.get_shape_keys_names=
function(a){var b=[];if(a.ka)for(var c=1;c<a.ka.og.length;c++)b.push(a.ka.og[c].name);return b};b.get_shape_key_value=function(a,b){if(a.ka)for(var c=1;c<a.ka.og.length;c++)if(b==a.ka.og[c].name)return a.ka.og[c].value;return 0};b.iA=function(a,b){var c=a.ka.og;if(c)for(var g=1;g<c.length;g++)if(c[g].name==b)return!0;return!1};b.bk=function(a){return a&&a.ka&&a.ka.cf?!0:!1};b.draw_line=function(a,c,g){var e=a.Za;if(e){for(var h=g?c.length/3/2:c.length/3-1,f=new Float32Array(12*h),k=new Float32Array(12*
h),l=new Uint16Array(6*h),n=0;n<h;n++){if(g)var d=6*n,w=6*n+3;else d=3*n,w=3*(n+1);var m=c[d],z=c[d+1],d=c[d+2],p=c[w],A=c[w+1],w=c[w+2],R=p-m,F=A-z,D=w-d;f[12*n]=m;f[12*n+1]=z;f[12*n+2]=d;k[12*n]=R;k[12*n+1]=F;k[12*n+2]=D;f[12*n+3]=p;f[12*n+4]=A;f[12*n+5]=w;k[12*n+3]=-R;k[12*n+4]=-F;k[12*n+5]=-D;f[12*n+6]=m;f[12*n+7]=z;f[12*n+8]=d;k[12*n+6]=-R;k[12*n+7]=-F;k[12*n+8]=-D;f[12*n+9]=p;f[12*n+10]=A;f[12*n+11]=w;k[12*n+9]=R;k[12*n+10]=F;k[12*n+11]=D;l[6*n]=4*n;l[6*n+1]=4*n+1;l[6*n+2]=4*n+2;l[6*n+3]=4*
n;l[6*n+4]=4*n+3;l[6*n+5]=4*n+1}g=0;for(var u in e.mc)c=e.mc[u],g+=f.length/3*c.Tc;c={};c["float"]=g;g=e.Pc=ea(c);b.HI(e,a.fi,l);a=0;for(u in e.mc)switch(c=e.mc[u],u){case "a_position":oa(g,u,f,a);c.offset=a;c.length=f.length;a+=c.length;break;case "a_direction":oa(g,u,k,a);c.offset=a;c.length=k.length;a+=c.length;break;default:c.offset=a,c.length=f.length/3*c.Tc,l=new Float32Array(c.length),oa(g,u,l,a),a+=c.length}L(e)}};b.$M=function(a){if(a){var b=q();if(a.Je)switch(a.Xm){case P.UNSIGNED_SHORT:b.Je=
new Uint16Array(a.Je);break;case P.UNSIGNED_INT:b.Je=new Uint32Array(a.Je)}else b.Je=null;for(var c=b,g=a.Pc,e=[],h=0;h<g.length;h++){var f=g[h].im,k=g[h].type;e.push({im:new f.constructor(f),type:k})}c.Pc=e;b.Xm=a.Xm;b.count=a.count;b.mc=m.O(a.mc);b.usage=a.usage;b.ro=a.ro;b.uo=a.uo;b.Eh=null;b.Lv=m.O(a.Lv);b.Ub=m.O(a.Ub);b.an=a.an;b.sh=a.sh}else b=null;return b};b.Gh=g;b.bN=function(a){var b=g(a.name);b.Eb=a.Eb;b.$a=m.O(a.$a);b.Va=m.O(a.Va);b.gb=m.O(a.gb);b.Ub=m.O(a.Ub);T.o(a.Hd.eb,b.Hd.eb);T.s(a.Hd.jc,
b.Hd.jc);T.u(a.Hd.Xc,b.Hd.Xc);T.v(a.Hd.Ld,b.Hd.Ld);b.Gf=m.O(a.Gf);return b};b.reset=function(){P=null};b.GQ=ea;b.MS=wa;b.gX=M;b.Zz=Ea;b.GP=Z;b.Io=aa;b.HF=function(a){switch(aa(a)){case "float":return m.h;case "short":return m.l;case "unsigned_byte":return m.g;default:return m.h}};b.WP=function(a){switch(aa(a)){case "float":return P.FLOAT;case "short":return P.SHORT;case "unsigned_byte":return P.UNSIGNED_BYTE;default:return P.FLOAT}};b.pt=oa;b.xY=function(a,b){switch(aa(a)){case "short":return m._48(b);
case "unsigned_byte":return m._64(b)}return b};b.wY=function(a,b){switch(aa(a)){case "short":return m._3(b);case "unsigned_byte":return m._65(b)}return b};b.qW=ja;b.pW=Ia;b.Si=function(){return{a_position:new Float32Array(0),a_tbn:y.c(0)}}});t.a=d},function(E,t,d){function O(f){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function T(f,k,d){var y=f[0],m=f[1],p=f[2],q=f[3],b=f[4],u=f[5],h=f[6],l=f[7],e=f[8],c=f[9],a=f[10],
ca=f[11],G=f[12],v=f[13],B=f[14];f=f[15];var C=k[0],L=k[1],H=k[2],r=k[3];d[0]=C*y+L*b+H*e+r*G;d[1]=C*m+L*u+H*c+r*v;d[2]=C*p+L*h+H*a+r*B;d[3]=C*q+L*l+H*ca+r*f;C=k[4];L=k[5];H=k[6];r=k[7];d[4]=C*y+L*b+H*e+r*G;d[5]=C*m+L*u+H*c+r*v;d[6]=C*p+L*h+H*a+r*B;d[7]=C*q+L*l+H*ca+r*f;C=k[8];L=k[9];H=k[10];r=k[11];d[8]=C*y+L*b+H*e+r*G;d[9]=C*m+L*u+H*c+r*v;d[10]=C*p+L*h+H*a+r*B;d[11]=C*q+L*l+H*ca+r*f;C=k[12];L=k[13];H=k[14];r=k[15];d[12]=C*y+L*b+H*e+r*G;d[13]=C*m+L*u+H*c+r*v;d[14]=C*p+L*h+H*a+r*B;d[15]=C*q+L*l+H*
ca+r*f;return d}Object.defineProperty(t,"__esModule",{value:!0});t.create=function(){var f=new r(16);f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f};t.clone=function(f){var k=new r(16);k[0]=f[0];k[1]=f[1];k[2]=f[2];k[3]=f[3];k[4]=f[4];k[5]=f[5];k[6]=f[6];k[7]=f[7];k[8]=f[8];k[9]=f[9];k[10]=f[10];k[11]=f[11];k[12]=f[12];k[13]=f[13];k[14]=f[14];k[15]=f[15];return k};t.copy=function(f,k){k[0]=f[0];k[1]=f[1];k[2]=f[2];k[3]=
f[3];k[4]=f[4];k[5]=f[5];k[6]=f[6];k[7]=f[7];k[8]=f[8];k[9]=f[9];k[10]=f[10];k[11]=f[11];k[12]=f[12];k[13]=f[13];k[14]=f[14];k[15]=f[15];return k};t.identity=O;t.transpose=function(f,k){if(k===f){var d=f[1],x=f[2],m=f[3],p=f[6],q=f[7],b=f[11];k[1]=f[4];k[2]=f[8];k[3]=f[12];k[4]=d;k[6]=f[9];k[7]=f[13];k[8]=x;k[9]=p;k[11]=f[14];k[12]=m;k[13]=q;k[14]=b}else k[0]=f[0],k[1]=f[4],k[2]=f[8],k[3]=f[12],k[4]=f[1],k[5]=f[5],k[6]=f[9],k[7]=f[13],k[8]=f[2],k[9]=f[6],k[10]=f[10],k[11]=f[14],k[12]=f[3],k[13]=f[7],
k[14]=f[11],k[15]=f[15];return k};t.invert=function(f,k){var d=f[0],x=f[1],m=f[2],p=f[3],q=f[4],b=f[5],u=f[6],h=f[7],l=f[8],e=f[9],c=f[10],a=f[11],ca=f[12],G=f[13],v=f[14],B=f[15],C=d*b-x*q,L=d*u-m*q,r=d*h-p*q,I=x*u-m*b,t=x*h-p*b,N=m*h-p*u,U=l*G-e*ca,K=l*v-c*ca,D=l*B-a*ca,R=e*v-c*G,V=e*B-a*G,F=c*B-a*v,z=C*F-L*V+r*R+I*D-t*K+N*U;if(!z)return null;z=1/z;k[0]=(b*F-u*V+h*R)*z;k[1]=(m*V-x*F-p*R)*z;k[2]=(G*N-v*t+B*I)*z;k[3]=(c*t-e*N-a*I)*z;k[4]=(u*D-q*F-h*K)*z;k[5]=(d*F-m*D+p*K)*z;k[6]=(v*r-ca*N-B*L)*z;
k[7]=(l*N-c*r+a*L)*z;k[8]=(q*V-b*D+h*U)*z;k[9]=(x*D-d*V-p*U)*z;k[10]=(ca*t-G*r+B*C)*z;k[11]=(e*r-l*t-a*C)*z;k[12]=(b*K-q*R-u*U)*z;k[13]=(d*R-x*K+m*U)*z;k[14]=(G*L-ca*I-v*C)*z;k[15]=(l*I-e*L+c*C)*z;return k};t.adjoint=function(f,k){var d=f[0],x=f[1],m=f[2],p=f[3],q=f[4],b=f[5],u=f[6],h=f[7],l=f[8],e=f[9],c=f[10],a=f[11],ca=f[12],G=f[13],v=f[14],B=f[15];k[0]=b*(c*B-a*v)-e*(u*B-h*v)+G*(u*a-h*c);k[1]=-(x*(c*B-a*v)-e*(m*B-p*v)+G*(m*a-p*c));k[2]=x*(u*B-h*v)-b*(m*B-p*v)+G*(m*h-p*u);k[3]=-(x*(u*a-h*c)-b*
(m*a-p*c)+e*(m*h-p*u));k[4]=-(q*(c*B-a*v)-l*(u*B-h*v)+ca*(u*a-h*c));k[5]=d*(c*B-a*v)-l*(m*B-p*v)+ca*(m*a-p*c);k[6]=-(d*(u*B-h*v)-q*(m*B-p*v)+ca*(m*h-p*u));k[7]=d*(u*a-h*c)-q*(m*a-p*c)+l*(m*h-p*u);k[8]=q*(e*B-a*G)-l*(b*B-h*G)+ca*(b*a-h*e);k[9]=-(d*(e*B-a*G)-l*(x*B-p*G)+ca*(x*a-p*e));k[10]=d*(b*B-h*G)-q*(x*B-p*G)+ca*(x*h-p*b);k[11]=-(d*(b*a-h*e)-q*(x*a-p*e)+l*(x*h-p*b));k[12]=-(q*(e*v-c*G)-l*(b*v-u*G)+ca*(b*c-u*e));k[13]=d*(e*v-c*G)-l*(x*v-m*G)+ca*(x*c-m*e);k[14]=-(d*(b*v-u*G)-q*(x*v-m*G)+ca*(x*u-m*
b));k[15]=d*(b*c-u*e)-q*(x*c-m*e)+l*(x*u-m*b);return k};t.determinant=function(f){var k=f[0],d=f[1],x=f[2],m=f[3],p=f[4],q=f[5],b=f[6],u=f[7],h=f[8],l=f[9],e=f[10],c=f[11],a=f[12],ca=f[13],G=f[14];f=f[15];return(k*q-d*p)*(e*f-c*G)-(k*b-x*p)*(l*f-c*ca)+(k*u-m*p)*(l*G-e*ca)+(d*b-x*q)*(h*f-c*a)-(d*u-m*q)*(h*G-e*a)+(x*u-m*b)*(h*ca-l*a)};t.multiply=T;d.d(t,"mul",function(){return T});t.translate=function(f,k,d){var y=k[0],m=k[1];k=k[2];var p,q,b,u,h,l,e,c,a,ca,G,v;f===d?(d[12]=f[0]*y+f[4]*m+f[8]*k+f[12],
d[13]=f[1]*y+f[5]*m+f[9]*k+f[13],d[14]=f[2]*y+f[6]*m+f[10]*k+f[14],d[15]=f[3]*y+f[7]*m+f[11]*k+f[15]):(p=f[0],q=f[1],b=f[2],u=f[3],h=f[4],l=f[5],e=f[6],c=f[7],a=f[8],ca=f[9],G=f[10],v=f[11],d[0]=p,d[1]=q,d[2]=b,d[3]=u,d[4]=h,d[5]=l,d[6]=e,d[7]=c,d[8]=a,d[9]=ca,d[10]=G,d[11]=v,d[12]=p*y+h*m+a*k+f[12],d[13]=q*y+l*m+ca*k+f[13],d[14]=b*y+e*m+G*k+f[14],d[15]=u*y+c*m+v*k+f[15]);return d};t.scale=function(f,k,d){var y=k[0],m=k[1];k=k[2];d[0]=f[0]*y;d[1]=f[1]*y;d[2]=f[2]*y;d[3]=f[3]*y;d[4]=f[4]*m;d[5]=f[5]*
m;d[6]=f[6]*m;d[7]=f[7]*m;d[8]=f[8]*k;d[9]=f[9]*k;d[10]=f[10]*k;d[11]=f[11]*k;d[12]=f[12];d[13]=f[13];d[14]=f[14];d[15]=f[15];return d};t.rotate=function(f,k,d,x){var m=d[0],p=d[1];d=d[2];var q=Math.sqrt(m*m+p*p+d*d),b,u,h,l,e,c,a,y,r,v,B,C,L,H,I,t,N,U,K,D;if(Math.abs(q)<G)return null;q=1/q;m*=q;p*=q;d*=q;b=Math.sin(k);u=Math.cos(k);h=1-u;k=f[0];q=f[1];l=f[2];e=f[3];c=f[4];a=f[5];y=f[6];r=f[7];v=f[8];B=f[9];C=f[10];L=f[11];H=m*m*h+u;I=p*m*h+d*b;t=d*m*h-p*b;N=m*p*h-d*b;U=p*p*h+u;K=d*p*h+m*b;D=m*d*
h+p*b;m=p*d*h-m*b;p=d*d*h+u;x[0]=k*H+c*I+v*t;x[1]=q*H+a*I+B*t;x[2]=l*H+y*I+C*t;x[3]=e*H+r*I+L*t;x[4]=k*N+c*U+v*K;x[5]=q*N+a*U+B*K;x[6]=l*N+y*U+C*K;x[7]=e*N+r*U+L*K;x[8]=k*D+c*m+v*p;x[9]=q*D+a*m+B*p;x[10]=l*D+y*m+C*p;x[11]=e*D+r*m+L*p;f!==x&&(x[12]=f[12],x[13]=f[13],x[14]=f[14],x[15]=f[15]);return x};t.rotateX=function(f,k,d){var y=Math.sin(k);k=Math.cos(k);var m=f[4],p=f[5],q=f[6],b=f[7],u=f[8],h=f[9],l=f[10],e=f[11];f!==d&&(d[0]=f[0],d[1]=f[1],d[2]=f[2],d[3]=f[3],d[12]=f[12],d[13]=f[13],d[14]=f[14],
d[15]=f[15]);d[4]=m*k+u*y;d[5]=p*k+h*y;d[6]=q*k+l*y;d[7]=b*k+e*y;d[8]=u*k-m*y;d[9]=h*k-p*y;d[10]=l*k-q*y;d[11]=e*k-b*y;return d};t.rotateY=function(f,k,d){var y=Math.sin(k);k=Math.cos(k);var m=f[0],p=f[1],q=f[2],b=f[3],u=f[8],h=f[9],l=f[10],e=f[11];f!==d&&(d[4]=f[4],d[5]=f[5],d[6]=f[6],d[7]=f[7],d[12]=f[12],d[13]=f[13],d[14]=f[14],d[15]=f[15]);d[0]=m*k-u*y;d[1]=p*k-h*y;d[2]=q*k-l*y;d[3]=b*k-e*y;d[8]=m*y+u*k;d[9]=p*y+h*k;d[10]=q*y+l*k;d[11]=b*y+e*k;return d};t.rotateZ=function(f,k,d){var y=Math.sin(k);
k=Math.cos(k);var m=f[0],p=f[1],q=f[2],b=f[3],u=f[4],h=f[5],l=f[6],e=f[7];f!==d&&(d[8]=f[8],d[9]=f[9],d[10]=f[10],d[11]=f[11],d[12]=f[12],d[13]=f[13],d[14]=f[14],d[15]=f[15]);d[0]=m*k+u*y;d[1]=p*k+h*y;d[2]=q*k+l*y;d[3]=b*k+e*y;d[4]=u*k-m*y;d[5]=h*k-p*y;d[6]=l*k-q*y;d[7]=e*k-b*y;return d};t.fromTranslation=function(f,k){k[0]=1;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=1;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=1;k[11]=0;k[12]=f[0];k[13]=f[1];k[14]=f[2];k[15]=1;return k};t.fromScaling=function(f,k){k[0]=f[0];k[1]=
0;k[2]=0;k[3]=0;k[4]=0;k[5]=f[1];k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=f[2];k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;return k};t.fromRotation=function(f,k,d){var y=k[0],m=k[1];k=k[2];var p=Math.sqrt(y*y+m*m+k*k),q;if(Math.abs(p)<G)return null;p=1/p;y*=p;m*=p;k*=p;p=Math.sin(f);f=Math.cos(f);q=1-f;d[0]=y*y*q+f;d[1]=m*y*q+k*p;d[2]=k*y*q-m*p;d[3]=0;d[4]=y*m*q-k*p;d[5]=m*m*q+f;d[6]=k*m*q+y*p;d[7]=0;d[8]=y*k*q+m*p;d[9]=m*k*q-y*p;d[10]=k*k*q+f;d[11]=0;d[12]=0;d[13]=0;d[14]=0;d[15]=1;return d};t.fromXRotation=
function(f,k){var d=Math.sin(f),x=Math.cos(f);k[0]=1;k[1]=0;k[2]=0;k[3]=0;k[4]=0;k[5]=x;k[6]=d;k[7]=0;k[8]=0;k[9]=-d;k[10]=x;k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;return k};t.fromYRotation=function(f,k){var d=Math.sin(f),x=Math.cos(f);k[0]=x;k[1]=0;k[2]=-d;k[3]=0;k[4]=0;k[5]=1;k[6]=0;k[7]=0;k[8]=d;k[9]=0;k[10]=x;k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;return k};t.fromZRotation=function(f,k){var d=Math.sin(f),x=Math.cos(f);k[0]=x;k[1]=d;k[2]=0;k[3]=0;k[4]=-d;k[5]=x;k[6]=0;k[7]=0;k[8]=0;k[9]=0;k[10]=
1;k[11]=0;k[12]=0;k[13]=0;k[14]=0;k[15]=1;return k};t.fromRotationTranslation=function(f,k,d){var y=f[0],m=f[1],p=f[2],q=f[3],b=y+y,u=m+m,h=p+p;f=y*b;var l=y*u,y=y*h,e=m*u,m=m*h,p=p*h,b=q*b,u=q*u,q=q*h;d[0]=1-(e+p);d[1]=l+q;d[2]=y-u;d[3]=0;d[4]=l-q;d[5]=1-(f+p);d[6]=m+b;d[7]=0;d[8]=y+u;d[9]=m-b;d[10]=1-(f+e);d[11]=0;d[12]=k[0];d[13]=k[1];d[14]=k[2];d[15]=1;return d};t.fromRotationTranslationScale=function(f,k,d,x){var m=f[0],p=f[1],q=f[2],b=f[3],u=m+m,h=p+p,l=q+q;f=m*u;var e=m*h,m=m*l,c=p*h,p=p*l,
q=q*l,u=b*u,h=b*h,b=b*l,l=d[0],a=d[1];d=d[2];x[0]=(1-(c+q))*l;x[1]=(e+b)*l;x[2]=(m-h)*l;x[3]=0;x[4]=(e-b)*a;x[5]=(1-(f+q))*a;x[6]=(p+u)*a;x[7]=0;x[8]=(m+h)*d;x[9]=(p-u)*d;x[10]=(1-(f+c))*d;x[11]=0;x[12]=k[0];x[13]=k[1];x[14]=k[2];x[15]=1;return x};t.fromRotationTranslationScaleOrigin=function(f,k,d,x,m){var p=f[0],q=f[1],b=f[2],u=f[3],h=p+p,l=q+q,e=b+b;f=p*h;var c=p*l,p=p*e,a=q*l,q=q*e,b=b*e,h=u*h,l=u*l,u=u*e,e=d[0],ca=d[1];d=d[2];var y=x[0],v=x[1];x=x[2];m[0]=(1-(a+b))*e;m[1]=(c+u)*e;m[2]=(p-l)*
e;m[3]=0;m[4]=(c-u)*ca;m[5]=(1-(f+b))*ca;m[6]=(q+h)*ca;m[7]=0;m[8]=(p+l)*d;m[9]=(q-h)*d;m[10]=(1-(f+a))*d;m[11]=0;m[12]=k[0]+y-(m[0]*y+m[4]*v+m[8]*x);m[13]=k[1]+v-(m[1]*y+m[5]*v+m[9]*x);m[14]=k[2]+x-(m[2]*y+m[6]*v+m[10]*x);m[15]=1;return m};t.fromQuat=function(f,k){var d=f[0],x=f[1],m=f[2],p=f[3],q=d+d,b=x+x,u=m+m,d=d*q,h=x*q,x=x*b,l=m*q,e=m*b,m=m*u,q=p*q,b=p*b,p=p*u;k[0]=1-x-m;k[1]=h+p;k[2]=l-b;k[3]=0;k[4]=h-p;k[5]=1-d-m;k[6]=e+q;k[7]=0;k[8]=l+b;k[9]=e-q;k[10]=1-d-x;k[11]=0;k[12]=0;k[13]=0;k[14]=
0;k[15]=1;return k};t.frustum=function(f,k,d,x,m,p,q){var b=1/(k-f),u=1/(x-d),h=1/(m-p);q[0]=2*m*b;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=2*m*u;q[6]=0;q[7]=0;q[8]=(k+f)*b;q[9]=(x+d)*u;q[10]=(p+m)*h;q[11]=-1;q[12]=0;q[13]=0;q[14]=p*m*2*h;q[15]=0;return q};t.perspective=function(f,k,d,x,m){f=1/Math.tan(f/2);var p=1/(d-x);m[0]=f/k;m[1]=0;m[2]=0;m[3]=0;m[4]=0;m[5]=f;m[6]=0;m[7]=0;m[8]=0;m[9]=0;m[10]=(x+d)*p;m[11]=-1;m[12]=0;m[13]=0;m[14]=2*x*d*p;m[15]=0;return m};t.perspectiveFromFieldOfView=function(f,k,d,
x){var m=Math.tan(f.upDegrees*Math.PI/180),p=Math.tan(f.downDegrees*Math.PI/180),q=Math.tan(f.leftDegrees*Math.PI/180);f=Math.tan(f.rightDegrees*Math.PI/180);var b=2/(q+f),u=2/(m+p);x[0]=b;x[1]=0;x[2]=0;x[3]=0;x[4]=0;x[5]=u;x[6]=0;x[7]=0;x[8]=-((q-f)*b*.5);x[9]=(m-p)*u*.5;x[10]=d/(k-d);x[11]=-1;x[12]=0;x[13]=0;x[14]=d*k/(k-d);x[15]=0;return x};t.ortho=function(f,k,d,x,m,p,q){var b=1/(f-k),u=1/(d-x),h=1/(m-p);q[0]=-2*b;q[1]=0;q[2]=0;q[3]=0;q[4]=0;q[5]=-2*u;q[6]=0;q[7]=0;q[8]=0;q[9]=0;q[10]=2*h;q[11]=
0;q[12]=(f+k)*b;q[13]=(x+d)*u;q[14]=(p+m)*h;q[15]=1;return q};t.lookAt=function(f,k,d,x){var m,p,q,b,u,h,l,e,c=f[0],a=f[1];f=f[2];q=d[0];b=d[1];p=d[2];l=k[0];d=k[1];m=k[2];if(Math.abs(c-l)<G&&Math.abs(a-d)<G&&Math.abs(f-m)<G)return O(x);k=c-l;d=a-d;l=f-m;e=1/Math.sqrt(k*k+d*d+l*l);k*=e;d*=e;l*=e;m=b*l-p*d;p=p*k-q*l;q=q*d-b*k;(e=Math.sqrt(m*m+p*p+q*q))?(e=1/e,m*=e,p*=e,q*=e):q=p=m=0;b=d*q-l*p;u=l*m-k*q;h=k*p-d*m;(e=Math.sqrt(b*b+u*u+h*h))?(e=1/e,b*=e,u*=e,h*=e):h=u=b=0;x[0]=m;x[1]=b;x[2]=k;x[3]=0;
x[4]=p;x[5]=u;x[6]=d;x[7]=0;x[8]=q;x[9]=h;x[10]=l;x[11]=0;x[12]=-(m*c+p*a+q*f);x[13]=-(b*c+u*a+h*f);x[14]=-(k*c+d*a+l*f);x[15]=1;return x};t.str=function(f){return"mat4("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+", "+f[9]+", "+f[10]+", "+f[11]+", "+f[12]+", "+f[13]+", "+f[14]+", "+f[15]+")"};t.frob=function(f){return Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2)+Math.pow(f[2],2)+Math.pow(f[3],2)+Math.pow(f[4],2)+Math.pow(f[5],2)+Math.pow(f[6],2)+Math.pow(f[7],
2)+Math.pow(f[8],2)+Math.pow(f[9],2)+Math.pow(f[10],2)+Math.pow(f[11],2)+Math.pow(f[12],2)+Math.pow(f[13],2)+Math.pow(f[14],2)+Math.pow(f[15],2))};var G=1E-7,r="undefined"!==typeof Float32Array?Float32Array:Array},function(E,t,d){E=d(0);var O=d(16),T=d(14),G=d(4),r=d(71),f=d(44),k=d(72),y=d(28),x=d(20),m=d(9),p=d(11),q=d(17),b=d(6),u=d(2),h=d(46),l=d(3);d=Object(E.a)("__renderer",function(e,c){function a(a){for(var c=a.qa,g=a.Hb,e=null,h=b.i(c.na,M),f=0;f<g.length;f++){var k=g[f];if(k.Ec){var n=k.ec,
d=k.ub;if(n.pj!=e){A.useProgram(n.pj);for(var e=a,w=c,m=n,z=m.CI,p=z.length;p--;){var F=z[p];F.Go(A,F.kf,e,w)}if(m.ep&&!m.ww)for(m.jB.length||B(m),m=m.jB,z=m.length;z--;)F=m[z],F.Go(A,F.kf,e,w);e=n.pj}k.Vf?(A.enable(A.SAMPLE_ALPHA_TO_COVERAGE),a.Qb||A.enable(A.BLEND)):(A.disable(A.SAMPLE_ALPHA_TO_COVERAGE),a.Qb||A.disable(A.BLEND));for(k=0;k<d.length;k++)if(z=d[k],z.Ec){m=z.ah;w=z.hb;N.UT(w);N.eG()&&"DEBUG_VIEW"==w.type&&(w.ir=u._50(C.iM(w.so),w.ir,1,15));if(aa.alpha_sort&&w.Rf){var F=m,z=z.Lv,p=
h,v=w.Za;if(l.dist(p,z.tJ)>aa.alpha_sort_threshold*Math.min(z.lM,1)||F.zr)K.qU(v,z,F.na,p),l.copy(p,z.tJ),F.zr=!1}for(var F=a,z=w,p=n,q=p.DI,ca=q.length;ca--;)v=q[ca],v.Go(A,v.kf,m,z);if(p.ep&&!p.ww){p.ls.length||B(p);q=p.ls;for(ca=q.length;ca--;)v=q[ca],v.Go(A,v.kf,m,z);p.ep=!1}A.depthMask(z.yb);z.ob?A.enable(A.CULL_FACE):A.disable(A.CULL_FACE);v=z.Ua;q=A;for(ca=0;ca<v.length;ca++){var V=v[ca];q.activeTexture(q.TEXTURE0+ca);q.bindTexture(V.Wb,V.hc);V.Re&&q.generateMipmap(V.Wb)}if(F.type==D.Ue||F.type==
D.Tk){m=F;p=p.dm;q=m.qa.vc;v=q.hc;q=q.Wb;ca=m.th;for(V=0;6>V;V++){var x=t(V);aa.hz?(A.bindTexture(A.TEXTURE_CUBE_MAP,v),A.texImage2D(x,0,A.RGBA,1,1,0,A.RGBA,A.UNSIGNED_BYTE,W)):(A.uniformMatrix4fv(p.u_cube_view_matrix,!1,ca[V]),A.uniform4fv(p.u_sky_tex_fac,m.Dp),A.uniform3fv(p.u_sky_tex_color,m.Bp),A.uniform1f(p.u_sky_tex_dvar,m.Cp),A.uniform3fv(p.u_horizon_color,m.te),A.uniform3fv(p.u_zenith_color,m.Ce),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,x,v,0),wa(z,0));if(m.cp&&5!=V){var x=
m,y=V,G=Z;aa.hz?G.set(W):(A.readPixels(191,191,1,1,A.RGBA,A.UNSIGNED_BYTE,G),255!=G[0]&&255!=G[1]&&255!=G[2]||A.readPixels(191,220,1,1,A.RGBA,A.UNSIGNED_BYTE,G));var r=G[0],L=G[1],G=G[2],r=r/255,L=L/255,G=G/255;4===y?(x.bg[3]=r,x.bg[7]=L,x.bg[11]=G):(x.bg[4*y]=r,x.bg[4*y+1]=L,x.bg[4*y+2]=G)}}aa.Nx&&(A.bindTexture(q,v),A.generateMipmap(q),A.texParameteri(q,A.TEXTURE_MIN_FILTER,R.yj));A.bindFramebuffer(A.FRAMEBUFFER,null);F.el+=6}else if(F.type==D.ao){m=z;z=p.dm;v=F.qa.vc;p=v.hc;q=v.Wb;v=F.th;aa.Nx&&
(A.activeTexture(A.TEXTURE7),A.bindTexture(q,p),A.generateMipmap(q),A.texParameteri(q,A.TEXTURE_MIN_FILTER,R.yj));for(q=0;5>q;++q)for(A.viewport(0,0,128*Math.pow(.5,q),128*Math.pow(.5,q)),ca=q/4,V=0;6>V;V++)x=t(V),A.uniformMatrix4fv(z.u_cube_view_matrix,!1,v[V]),A.uniform1f(z.u_roughness,ca),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,x,p,q),wa(m,0);F.el+=30}else wa(z,m.fy),F.el++;N.WT(w);N.eG()&&"MAIN"==w.type&&C.jM(w.id,w.cg)}}}}function d(a){if(a){var b=(a.Vb?A.COLOR_BUFFER_BIT:0)|
(a.Zb?A.DEPTH_BUFFER_BIT:0);if(!b)return;switch(a.type){case D.De:a=w;break;case D.be:a=V;break;case D.Eg:a=F;break;case D.xf:case D.Uh:case D.Xn:a=z;break;case D.ic:case D.Wh:case D.uq:case D.Et:a=w;break;default:a=aa.background_color}}else b=A.COLOR_BUFFER_BIT|A.DEPTH_BUFFER_BIT,a=aa.background_color;A.colorMask(!0,!0,!0,!0);A.depthMask(!0);A.clearColor(a[0],a[1],a[2],a[3]);A.clear(b)}function t(a){switch(a){case 0:return A.TEXTURE_CUBE_MAP_POSITIVE_X;case 1:return A.TEXTURE_CUBE_MAP_NEGATIVE_X;
case 2:return A.TEXTURE_CUBE_MAP_POSITIVE_Y;case 3:return A.TEXTURE_CUBE_MAP_NEGATIVE_Y;case 4:return A.TEXTURE_CUBE_MAP_POSITIVE_Z;case 5:return A.TEXTURE_CUBE_MAP_NEGATIVE_Z}}function v(a){var b=U.$z(),c=a.Dq,e=a.Za,h=e.mc;a.Pf.length=0;var f=1,k;for(k in h)f=Math.max(f,h[k].frames);for(h=0;h<f;h++){k=b.createVertexArray();ka(k);e.Eh&&A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,e.Eh);for(var n=0;n<e.Yd.length;n++){A.bindBuffer(A.ARRAY_BUFFER,e.Yd[n].Nk);for(var l=0;l<c.length;l++){var d=c[l];d.iy==e.Yd[n].type&&
(A.enableVertexAttribArray(d.kf),A.vertexAttribPointer(d.kf,d.Tc,d.Jo,d.Jo==A.FLOAT?!1:!0,0,d.au+d.cv*h),g(d.kf,d.Nm))}}ka(null);a.Pf.push(k)}}function B(a){var c=a.dm,g=a.DI,e=a.ls,h=a.CI,f=a.jB;g.length=0;e.length=0;h.length=0;f.length=0;for(var k in c){var n=!1,l=null,d=null;switch(k){case "u_proj_matrix":l=function(a,b,c,g){a.uniformMatrix4fv(b,!1,g.gc)};n=!0;break;case "u_view_refl_matrix":l=function(a,b,c,g){a.uniformMatrix4fv(b,!1,g.jq)};n=!0;break;case "u_view_tsr":case "u_view_tsr_frag":l=
function(a,b,c,g){g.ad?a.uniformMatrix3fv(b,!1,g.xs):a.uniformMatrix3fv(b,!1,g.xg)};n=!0;break;case "u_view_tsr_inverse":l=function(a,b,c,g){g.ad?a.uniformMatrix3fv(b,!1,g.Sw):a.uniformMatrix3fv(b,!1,g.ly)};n=!0;break;case "u_shadow_cast_billboard_view_tsr":l=function(a,b,c,g){a.uniformMatrix3fv(b,!1,g.Ls)};n=!0;break;case "u_view_proj_prev":l=function(a,b,c,g){a.uniformMatrix4fv(b,!1,g.nB)};n=!0;break;case "u_view_proj_matrix":l=function(a,b,c,g){a.uniformMatrix4fv(b,!1,g.wg)};n=!0;break;case "u_view_proj_inverse":l=
function(a,b,c,g){a.uniformMatrix4fv(b,!1,g.ky)};n=!0;break;case "u_sky_vp_inverse":l=function(a,b,c,g){a.uniformMatrix4fv(b,!1,g.Oh)};n=!0;break;case "u_camera_eye":case "u_camera_eye_frag":l=function(a,c,g,e){a.uniform3fv(c,b.i(e.na,M))};n=!0;break;case "u_camera_quat":l=function(a,c,g,e){a.uniform4fv(c,b.f(e.na,Ea))};n=!0;break;case "u_view_max_depth":l=function(a,b,c,g){a.uniform1f(b,g.far)};n=!0;break;case "u_camera_range":l=function(a,b,c,g){a.uniform2f(b,g.near,g.far)};n=!0;break;case "u_csm_center_dists":l=
function(a,b,c,g){a.uniform4fv(b,g.wu)};break;case "u_height":l=function(a,b,c,g){a.uniform1f(b,g.height)};n=!0;break;case "u_pcf_blur_radii":l=function(a,b,c,g){a.uniform4fv(b,g.pp)};break;case "u_dof_dist":l=function(a,b,c,g){g.dof_on?a.uniform1f(b,g.dof_distance):a.uniform1f(b,0)};n=!0;break;case "u_dof_front_start":l=function(a,b,c,g){a.uniform1f(b,g.dof_front_start)};n=!0;break;case "u_dof_front_end":l=function(a,b,c,g){a.uniform1f(b,g.dof_front_end)};n=!0;break;case "u_dof_rear_start":l=function(a,
b,c,g){a.uniform1f(b,g.dof_rear_start)};n=!0;break;case "u_dof_rear_end":l=function(a,b,c,g){a.uniform1f(b,g.dof_rear_end)};n=!0;break;case "u_dof_bokeh_intensity":l=function(a,b,c,g){a.uniform1f(b,g.dof_bokeh_intensity)};n=!0;break;case "u_camera_direction":l=function(a,b,c,g){a.uniform3fv(b,g.direction)};n=!0;break;case "u_cam_water_depth":l=function(a,b,c){a.uniform1f(b,c.Pq)};n=!0;break;case "u_fog_color_density":l=function(a,b,c){a.uniform4fv(b,c.re)};break;case "u_fog_params":l=function(a,b,
c){a.uniform4fv(b,c.hg)};break;case "u_underwater_fog_color_density":l=function(a,b,c){a.uniform4fv(b,c.Ei)};break;case "u_bloom_key":l=function(a,b,c){a.uniform1f(b,c.no)};break;case "u_average_lum_val":l=function(a,b,c){a.uniform1f(b,c.average_luminance)};break;case "u_mipmap_1x1":l=function(a,b,c){a.uniform1f(b,c.Wv)};break;case "u_bloom_edge_lum":l=function(a,b,c){a.uniform1f(b,c.mo)};break;case "u_time":l=function(a,b,c){a.uniform1f(b,c.time)};n=!0;break;case "u_wind":l=function(a,b,c){a.uniform3fv(b,
c.Fi)};n=!0;break;case "u_sky_tex_dvar":l=function(a,b,c){a.uniform1f(b,c.Cp)};break;case "u_sky_tex_fac":l=function(a,b,c){a.uniform4fv(b,c.Dp)};break;case "u_sky_tex_color":l=function(a,b,c){a.uniform3fv(b,c.Bp)};break;case "u_horizon_color":l=function(a,b,c){a.uniform3fv(b,c.te)};break;case "u_zenith_color":l=function(a,b,c){a.uniform3fv(b,c.Ce)};break;case "u_environment_energy":l=function(a,b,c){a.uniform1f(b,c.Sg)};break;case "u_bsdf_cube_sky_dim":l=function(a,b,c){a.uniform1f(b,c.fu)};n=!0;
break;case "u_sky_color":l=function(a,b,c){a.uniform3fv(b,c.Tl)};break;case "u_rayleigh_brightness":l=function(a,b,c){a.uniform1f(b,c.rayleigh_brightness)};break;case "u_mie_brightness":l=function(a,b,c){a.uniform1f(b,c.mie_brightness)};break;case "u_spot_brightness":l=function(a,b,c){a.uniform1f(b,c.spot_brightness)};break;case "u_scatter_strength":l=function(a,b,c){a.uniform1f(b,c.scatter_strength)};break;case "u_rayleigh_strength":l=function(a,b,c){a.uniform1f(b,c.rayleigh_strength)};break;case "u_mie_strength":l=
function(a,b,c){a.uniform1f(b,c.mie_strength)};break;case "u_rayleigh_collection_power":l=function(a,b,c){a.uniform1f(b,c.rayleigh_collection_power)};break;case "u_mie_collection_power":l=function(a,b,c){a.uniform1f(b,c.mie_collection_power)};break;case "u_mie_distribution":l=function(a,b,c){a.uniform1f(b,c.mie_distribution)};break;case "u_light_positions":l=function(a,b,c){a.uniform4fv(b,c.jn)};break;case "u_light_directions":l=function(a,b,c){a.uniform3fv(b,c.Xr)};break;case "u_light_color_intensities":l=
function(a,b,c){a.uniform4fv(b,c.hn)};break;case "u_sun_quaternion":l=function(a,b,c){a.uniform4fv(b,c.Jx)};break;case "u_sun_intensity":l=function(a,b,c){a.uniform3fv(b,c.Ix)};break;case "u_sun_direction":l=function(a,b,c){a.uniform3fv(b,c.Hx)};break;case "u_debug_view_mode":l=function(a,b,c){a.uniform1i(b,c.debug_view_mode)};break;case "u_debug_colors_seed":l=function(a,b,c){a.uniform1f(b,c.debug_colors_seed)};break;case "u_debug_render_time_threshold":l=function(a,b,c){a.uniform1f(b,c.Cu)};break;
case "u_subpixel_jitter":l=function(a,b,c){a.uniform2fv(b,c.yA)};n=!0;break;case "u_subsample_indices":l=function(a,b,c){a.uniform4fv(b,c.RQ)};n=!0;break;case "u_radial_blur_step":l=function(a,b,c){a.uniform1f(b,c.rp)};break;case "u_god_rays_intensity":l=function(a,b,c){a.uniform1f(b,c.god_rays_intensity)};break;case "u_ssao_radius_increase":l=function(a,b,c){a.uniform1f(b,c.Jp)};break;case "u_ssao_blur_discard_value":l=function(a,b,c){a.uniform1f(b,c.Fp)};n=!0;break;case "u_ssao_influence":l=function(a,
b,c){a.uniform1f(b,c.Ip)};break;case "u_ssao_dist_factor":l=function(a,b,c){a.uniform1f(b,c.Gp)};break;case "u_texel_size":l=function(a,b,c){a.uniform2fv(b,c.Xs)};n=!0;break;case "u_normal_offset":l=function(a,b,c){a.uniform1f(b,c.self_shadow_normal_offset)};break;case "u_v_light_ts":l=function(a,b,c){a.uniform4fv(b,c.aq)};n=!0;break;case "u_v_light_r":l=function(a,b,c){a.uniform4fv(b,c.$p)};n=!0;break;case "u_v_light_tsr":l=function(a,b,c){a.uniformMatrix3fv(b,!1,c.ot)};n=!0;break;case "u_p_light_matrix0":l=
function(a,b,c){a.uniformMatrix4fv(b,!1,c.qk[0])};n=!0;break;case "u_p_light_matrix1":l=function(a,b,c){a.uniformMatrix4fv(b,!1,c.qk[1])};n=!0;break;case "u_p_light_matrix2":l=function(a,b,c){a.uniformMatrix4fv(b,!1,c.qk[2])};n=!0;break;case "u_p_light_matrix3":l=function(a,b,c){a.uniformMatrix4fv(b,!1,c.qk[3])};n=!0;break;case "u_outline_color":l=function(a,b,c){a.uniform3fv(b,c.ti)};break;case "u_draw_outline":l=function(a,b,c){a.uniform1f(b,c.or)};n=!0;break;case "u_glow_mask_small_coeff":l=function(a,
b,c){a.uniform1f(b,c.small_glow_mask_coeff)};n=!0;break;case "u_glow_mask_large_coeff":l=function(a,b,c){a.uniform1f(b,c.large_glow_mask_coeff)};n=!0;break;case "u_brightness":l=function(a,b,c){a.uniform1f(b,c.brightness)};break;case "u_contrast":l=function(a,b,c){a.uniform1f(b,c.contrast)};break;case "u_exposure":l=function(a,b,c){a.uniform1f(b,c.exposure)};break;case "u_saturation":l=function(a,b,c){a.uniform1f(b,c.saturation)};break;case "u_enable_hmd_stereo":l=function(a,b,c){a.uniform1i(b,c.enable_hmd_stereo)};
break;case "u_distortion_params":l=function(a,b,c){a.uniform4fv(b,c.Uj)};break;case "u_chromatic_aberration_coefs":l=function(a,b,c){a.uniform4fv(b,c.chromatic_aberration_coefs)};break;case "u_motion_blur_exp":l=function(a,b,c){a.uniform1f(b,c.pw)};n=!0;break;case "u_motion_blur_decay_threshold":l=function(a,b,c){a.uniform1f(b,c.mb_decay_threshold)};n=!0;break;case "u_model_tsr":d=function(a,b,c){a.uniformMatrix3fv(b,!1,c.na)};n=!0;break;case "u_model_tsr_inverse":d=function(a,b,c){a.uniformMatrix3fv(b,
!1,c.uy)};n=!0;break;case "u_transb":d=function(a,b,c){a.uniform4fv(b,c.Be)};n=!0;break;case "u_transa":d=function(a,b,c){a.uniform4fv(b,c.uf)};n=!0;break;case "u_arm_rel_trans":d=function(a,b,c){a.uniform4fv(b,c.Aq)};n=!0;break;case "u_arm_rel_quat":d=function(a,b,c){a.uniform4fv(b,c.zq)};n=!0;break;case "u_quat":d=function(a,c,g){a.uniform4fv(c,b.f(g.na,Ea))};n=!0;break;case "u_quatsb":d=function(a,b,c){a.uniform4fv(b,c.we)};n=!0;break;case "u_quatsa":d=function(a,b,c){a.uniform4fv(b,c.pf)};n=!0;
break;case "u_frame_factor":d=function(a,b,c){a.uniform1f(b,c.ig)};n=!0;break;case "au_center_pos":d=function(a,b,c){a.uniform3fv(b,c.ku)};n=!0;break;case "au_wind_bending_amp":d=function(a,b,c){a.uniform1f(b,c.zg)};n=!0;break;case "au_wind_bending_freq":d=function(a,b,c){a.uniform1f(b,c.Ag)};n=!0;break;case "au_detail_bending_freq":d=function(a,b,c){a.uniform1f(b,c.fg)};n=!0;break;case "au_detail_bending_amp":d=function(a,b,c){a.uniform1f(b,c.eg)};n=!0;break;case "au_branch_bending_amp":d=function(a,
b,c){a.uniform1f(b,c.$f)};n=!0;break;case "u_node_values":d=function(a,b,c,g){a.uniform4fv(b,g.ri)};n=!0;break;case "u_node_rgbs":d=function(a,b,c,g){a.uniform3fv(b,g.Me)};n=!0;break;case "u_lod_coverage":d=function(a,b,c,g){a.uniform1f(b,g.yl.Bf)};n=!0;break;case "u_lod_cmp_logic":d=function(a,b,c,g){a.uniform1f(b,g.yl.nu)};n=!0;break;case "u_diffuse_color":d=function(a,b,c,g){a.uniform4fv(b,g.Qc)};n=!0;break;case "u_diffuse_intensity":d=function(a,b,c,g){a.uniform1f(b,g.Ie)};n=!0;break;case "u_diffuse_params":d=
function(a,b,c,g){a.uniform2fv(b,g.ee)};n=!0;break;case "u_emit":d=function(a,b,c,g){a.uniform1f(b,g.fe)};n=!0;break;case "u_ambient":d=function(a,b,c,g){a.uniform1f(b,g.ce)};n=!0;break;case "u_specular_color":d=function(a,b,c,g){a.uniform3fv(b,g.Qe)};n=!0;break;case "u_specular_alpha":d=function(a,b,c,g){a.uniform1f(b,g.pg)};n=!0;break;case "u_specular_params":d=function(a,b,c,g){a.uniform3fv(b,g.rf)};n=!0;break;case "u_reflect_factor":d=function(a,b,c,g){a.uniform1f(b,g.reflect_factor)};n=!0;break;
case "u_mirror_factor":d=function(a,b,c,g){a.uniform1f(b,g.nn)};n=!0;break;case "u_grass_map_dim":d=function(a,b,c,g){a.uniform3fv(b,g.Qd)};n=!0;break;case "u_grass_size":d=function(a,b,c,g){a.uniform1f(b,g.ak)};n=!0;break;case "u_scale_threshold":d=function(a,b,c,g){a.uniform1f(b,g.vv)};n=!0;break;case "u_cube_fog":d=function(a,b,c,g){a.uniformMatrix4fv(b,!1,g.bg)};break;case "u_jitter_amp":d=function(a,b,c,g){a.uniform1f(b,g.Sv)};n=!0;break;case "u_jitter_freq":d=function(a,b,c,g){a.uniform1f(b,
g.Tv)};n=!0;break;case "u_wireframe_edge_color":d=function(a,b,c,g){a.uniform3fv(b,g.wireframe_edge_color)};break;case "u_cluster_id":d=function(a,b,c,g){a.uniform1f(b,g.Wq)};n=!0;break;case "u_batch_debug_id_color":d=function(a,b,c,g){a.uniform1f(b,g.Bu)};n=!0;break;case "u_batch_debug_main_render_time":d=function(a,b,c,g){a.uniform1f(b,g.ir)};n=!0;break;case "u_refr_bump":d=function(a,b,c,g){a.uniform1f(b,g.Nh)};n=!0;break;case "u_line_width":d=function(a,b,c,g){a.uniform1f(b,g.kn)};n=!0;break;
case "u_lamp_light_positions":d=function(a,b,c,g){a.uniform3fv(b,g.Wo)};break;case "u_lamp_light_directions":d=function(a,b,c,g){a.uniform3fv(b,g.Tr)};break;case "u_lamp_light_color_intensities":d=function(a,b,c,g){a.uniform3fv(b,g.Sr)};break;case "u_halo_size":d=function(a,b,c,g){a.uniform1f(b,g.Fv)};n=!0;break;case "u_halo_hardness":d=function(a,b,c,g){a.uniform1f(b,g.Cv)};n=!0;break;case "u_halo_rings_color":d=function(a,b,c,g){a.uniform3fv(b,g.Ev)};n=!0;break;case "u_halo_lines_color":d=function(a,
b,c,g){a.uniform3fv(b,g.Dv)};n=!0;break;case "u_halo_stars_blend":d=function(a,b,c,g){a.uniform1f(b,g.Gv)};n=!0;break;case "u_halo_stars_height":d=function(a,b,c,g){a.uniform1f(b,g.Hv)};n=!0;break;case "u_fresnel_params":d=function(a,b,c,g){a.uniform2fv(b,g.ii)};n=!0;break;case "u_texture_scale":d=function(a,b,c,g){a.uniform3fv(b,g.Rh)};n=!0;break;case "u_parallax_scale":d=function(a,b,c,g){a.uniform1f(b,g.parallax_scale)};n=!0;break;case "u_color_id":d=function(a,b,c){a.uniform3fv(b,c.al)};n=!0;
break;case "u_diffuse_color_factor":d=function(a,b,c,g){a.uniform1f(b,g.Vi)};n=!0;break;case "u_alpha_factor":d=function(a,b,c,g){a.uniform1f(b,g.ph)};n=!0;break;case "u_specular_color_factor":d=function(a,b,c,g){a.uniform1f(b,g.Dk)};n=!0;break;case "u_normal_factor":d=function(a,b,c,g){a.uniform1f(b,g.jp)};n=!0;break;case "u_normalmap0_scale":d=function(a,b,c,g){a.uniform2fv(b,g.pk[0])};n=!0;break;case "u_normalmap1_scale":d=function(a,b,c,g){a.uniform2fv(b,g.pk[1])};n=!0;break;case "u_normalmap2_scale":d=
function(a,b,c,g){a.uniform2fv(b,g.pk[2])};n=!0;break;case "u_normalmap3_scale":d=function(a,b,c,g){a.uniform2fv(b,g.pk[3])};n=!0;break;case "u_foam_factor":d=function(a,b,c,g){a.uniform1f(b,g.foam_factor)};n=!0;break;case "u_foam_uv_freq":d=function(a,b,c,g){a.uniform2fv(b,g.av)};n=!0;break;case "u_foam_mag":d=function(a,b,c,g){a.uniform2fv(b,g.$u)};n=!0;break;case "u_foam_scale":d=function(a,b,c,g){a.uniform2fv(b,g.xr)};n=!0;break;case "u_water_norm_uv_velocity":d=function(a,b,c,g){a.uniform1f(b,
g.km)};n=!0;break;case "u_shallow_water_col":d=function(a,b,c,g){a.uniform3fv(b,g.shallow_water_col)};n=!0;break;case "u_shore_water_col":d=function(a,b,c,g){a.uniform3fv(b,g.shore_water_col)};n=!0;break;case "u_water_shallow_col_fac":d=function(a,b,c,g){a.uniform1f(b,g.shallow_water_col_fac)};n=!0;break;case "u_water_shore_col_fac":d=function(a,b,c,g){a.uniform1f(b,g.shore_water_col_fac)};n=!0;break;case "u_p_length":d=function(a,b,c,g){a.uniform1f(b,g.sb.Qx)};n=!0;break;case "u_p_cyclic":d=function(a,
b,c,g){a.uniform1i(b,g.sb.cyclic)};n=!0;break;case "u_p_max_lifetime":d=function(a,b,c,g){a.uniform1f(b,g.sb.Yv)};n=!0;break;case "u_p_fade_in":d=function(a,b,c,g){a.uniform1f(b,g.sb.Xj)};n=!0;break;case "u_p_fade_out":d=function(a,b,c,g){a.uniform1f(b,g.sb.Ef)};n=!0;break;case "u_p_size":d=function(a,b,c,g){a.uniform1f(b,g.sb.size)};n=!0;break;case "u_p_alpha_start":d=function(a,b,c,g){a.uniform1f(b,g.sb.Rt)};n=!0;break;case "u_p_alpha_end":d=function(a,b,c,g){a.uniform1f(b,g.sb.Qt)};n=!0;break;
case "u_p_nfactor":d=function(a,b,c,g){a.uniform1f(b,g.sb.fp)};n=!0;break;case "u_p_gravity":d=function(a,b,c,g){a.uniform1f(b,g.sb.wv)};n=!0;break;case "u_p_mass":d=function(a,b,c,g){a.uniform1f(b,g.sb.lf)};n=!0;break;case "u_p_color_ramp":d=function(a,b,c,g){a.uniform4fv(b,g.sb.qu)};n=!0;break;case "u_p_wind_fac":d=function(a,b,c,g){a.uniform1f(b,g.sb.ty)};n=!0;break;case "u_p_time":d=function(a,b,c,g){a.uniform1f(b,g.sb.time)};n=!0;break;case "u_p_tilt":d=function(a,b,c,g){a.uniform1f(b,g.sb.Ox)};
n=!0;break;case "u_p_tilt_rand":d=function(a,b,c,g){a.uniform1f(b,g.sb.Px)};n=!0;break;case "u_position":d=function(a,b,c,g){a.uniform3fv(b,g.um)};n=!0;break;case "u_va_frame_factor":d=function(a,b,c){a.uniform1f(b,c.gy)};n=!0;break;case "u_refl_plane":d=function(a,b,c){a.uniform4fv(b,c.ad)};n=!0;break;case "u_outline_intensity":d=function(a,b,c){a.uniform1f(b,c.lj)};n=!0;break;case "u_obj_info":d=function(a,b,c,g){a.uniform3fv(b,g.lp)},n=!0}d&&(d={name:k,Go:d,kf:c[k]},n?g.push(d):e.push(d));l&&(d=
{name:k,Go:l,kf:c[k]},n?h.push(d):f.push(d))}if(e.length||f.length){a=a.kB;for(var w in a)delete a[w];for(w=0;w<e.length;w++)d=e[w],a[d.name]=d;for(w=0;w<f.length;w++)d=f[w],a[d.name]=d}else a.ww=!0}var C=Object(O.a)(e),L=Object(T.a)(e),H=Object(G.a)(e),I=Object(r.a)(e),da=Object(f.a)(e),N=Object(k.a)(e),U=Object(y.a)(e),K=Object(x.a)(e),D=Object(p.a)(e),R=Object(q.a)(e),V=[1,0,0,1],F=[1,1,1,1],z=[0,0,0,1],w=[0,0,0,0],W=new Uint8Array([91.8,142.8,.96*255,255]),A=null,n=null,g=null,ea=null,ka=null,
wa=null,M=new Float32Array(3),Ea=m.create(),Z=new Uint8Array(4),aa=H.wa;c.fh=function(a){var b=aa.background_color;a.clearColor(b[0],b[1],b[2],b[3]);a.clearDepth(1);a.enable(a.DEPTH_TEST);a.depthFunc(a.LEQUAL);a.enable(a.CULL_FACE);a.frontFace(a.CCW);a.cullFace(a.BACK);a.enable(a.BLEND);a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);A=a};c.Wj=function(c){if(c.Ec&&!c.Rm)if(c.type==D.Dt){N.UB(c);var g=c.qa;A.bindFramebuffer(A.READ_FRAMEBUFFER,g.Ar);A.bindFramebuffer(A.DRAW_FRAMEBUFFER,g.Ff);var e=0;g.vc&&
(e|=A.COLOR_BUFFER_BIT);g.dg&&(e|=A.DEPTH_BUFFER_BIT);A.blitFramebuffer(0,0,g.width,g.height,0,0,g.width,g.height,e,A.NEAREST);N.XB(c);da.bA("draw resolve")}else if(c.type==D.Ay)N.UB(c),g=c.qa,A.bindFramebuffer(A.FRAMEBUFFER,g.Ar),A.bindTexture(A.TEXTURE_2D,g.vc.hc),A.copyTexSubImage2D(A.TEXTURE_2D,0,0,0,0,0,g.width,g.height,0),N.XB(c),da.bA("draw copy");else{N.UB(c);g=c.qa;A.bindFramebuffer(A.FRAMEBUFFER,g.Ff);c.Cq&&(e=g.vc,A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,e.Wb,e.hc,0));A.viewport(0,
0,g.width,g.height);c.type!=D.ae&&c.type!=D.Sf&&d(c);c.Qb?A.enable(A.BLEND):A.disable(A.BLEND);c.yd?A.enable(A.DEPTH_TEST):A.disable(A.DEPTH_TEST);switch(c.type){case D.be:A.enable(A.POLYGON_OFFSET_FILL);A.polygonOffset(c.self_shadow_polygon_offset,c.self_shadow_polygon_offset);A.cullFace(A.BACK);break;case D.Ee:case D.Dg:A.disable(A.POLYGON_OFFSET_FILL);A.cullFace(A.FRONT);break;case D.Vh:A.enable(A.POLYGON_OFFSET_FILL);A.polygonOffset(-4,-4);A.cullFace(A.BACK);break;case D.De:if(1<aa.Jc||aa.JS){A.enable(A.POLYGON_OFFSET_FILL);
A.polygonOffset(-2,-2);break}default:A.disable(A.POLYGON_OFFSET_FILL),A.cullFace(A.BACK)}if(c.type==D.ae||c.type==D.Sf)for(var g=c.qa,e=g.vc.hc,h=0;6>h;h++){var f=t(h);g.Kc=c.th[h];b.d(g.Kc,g.xg);L.BM(g);A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,f,e,0);d(c);for(var f=c.Hb,k=0;k<f.length;k++)for(var n=0;n<f[k].ub.length;n++){var l=f[k].ub[n];l.Ec=l.Ez[h]}a(c)}else a(c);N.XB(c);da.bA("draw subscene: "+D.Gx(c));c.type==D.xy&&A.bindFramebuffer(A.FRAMEBUFFER,null)}};c.clear=function(a){if(a)A.bindFramebuffer(A.FRAMEBUFFER,
a.qa.Ff);else{var b=aa.background_color;if(b[0]===w[0]&&b[1]===w[1]&&b[2]===w[2]&&b[3]===w[3])return}d(a)};c.Wt=function(a){var b=a.Dq;b.length=0;var c=a.Za,g=c.mc,e=a.ec.attributes,f;for(f in e){var k=g[f],n=K.Io(f),l=K.WP(f),d=K.HF(f);b.push({iy:n,Jo:l,kf:e[f],au:k.offset*d,cv:1<k.frames?k.length*d:0,Tc:k.Tc,Nm:k.Nm})}if("DEBUG"==Object(h.d)())for(f in g)n=K.Io(f),b=K.MS(c.Yd,n),b=c.Yd[b],k=a.Lb.vg+" | "+a.Lb.ef,n=g[f].length*g[f].frames*K.HF(f),I.ZO(b.wO,k,f,n,f in e);aa.Qy&&v(a)};c.eM=v;c.WM=
function(a){for(var b=U.$z(),c=0;c<a.Pf.length;c++)b.deleteVertexArray(a.Pf[c]);a.Pf.length=0};c.YM=function(a){for(var b=[],c=0;c<a.length;c++){var g=a[c];b.push({iy:g.iy,Jo:g.Jo,kf:g.kf,au:g.au,cv:g.cv,Tc:g.Tc,Nm:g.Nm})}return b};c.dM=B;c.GD=function(a){var b=a.ec,c=a.Ua;a=a.sg;A.useProgram(b.pj);for(var g=0;g<c.length;g++)A.uniform1i(b.dm[a[g]],g)};c.Rw=function(a,b,c,g,e,h){A.bindFramebuffer(A.FRAMEBUFFER,a);A.readPixels(b,c,g,e,A.RGBA,A.UNSIGNED_BYTE,h);A.bindFramebuffer(A.FRAMEBUFFER,null);
return h};c.oU=function(a){var b=a.ec;b.ww||(A.useProgram(b.pj),b.ls.length||B(b),b=b.kB.u_cube_fog,b.Go(A,b.kf,null,a))};c.yS=function(a,b){var c=A.createFramebuffer();A.bindFramebuffer(A.FRAMEBUFFER,c);if(R.So(a)){var g=a.Qf;A.framebufferRenderbuffer(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.RENDERBUFFER,g)}else if(R.Uo(a)){var e=a,g=e.hc,e=e.Wb==A.TEXTURE_CUBE_MAP?A.TEXTURE_CUBE_MAP_NEGATIVE_Z:e.Wb;A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,e,g,0)}R.So(b)?(g=b.Qf,A.framebufferRenderbuffer(A.FRAMEBUFFER,
A.DEPTH_ATTACHMENT,A.RENDERBUFFER,g)):R.Uo(b)&&(e=b,g=e.hc,e=e.Wb,A.framebufferTexture2D(A.FRAMEBUFFER,A.DEPTH_ATTACHMENT,e,g,0));da.qM();A.bindFramebuffer(A.FRAMEBUFFER,null);return c};c.xS=function(a,b,c,g,e){null==a?(A.bindFramebuffer(A.FRAMEBUFFER,a),A.viewport(0,0,g,e),A.clear(A.COLOR_BUFFER_BIT|A.DEPTH_BUFFER_BIT)):(R.So(b)?A.deleteRenderbuffer(b.Qf):R.Uo(b)&&A.deleteTexture(b.hc),R.So(c)?A.deleteRenderbuffer(c.Qf):R.Uo(c)&&A.deleteTexture(c.hc),A.deleteFramebuffer(a))};c.sX=function(){};c.GO=
function(a,b,c,g,e,h){a=a.hc;A.viewport(0,0,c,c);A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,b,a,0);b=C.vu("FLIP_CUBEMAP_COORDS");a=b.ec;A.activeTexture(A.TEXTURE0);A.bindTexture(A.TEXTURE_2D,e);var f=e=0;c!=g&&(e=1/(6*g),f=1/(4*g));A.uniform1i(a.dm.u_tex_number,h);A.uniform2fv(a.dm.u_delta,[e,f]);A.useProgram(a.pj);wa(b,0);A.bindTexture(A.TEXTURE_2D,null)};c.HO=function(a,b,c,g,e){A.bindFramebuffer(A.FRAMEBUFFER,g);g=a.hc;a=a.Wb;A.bindTexture(a,g);A.viewport(0,0,b,c);A.texImage2D(a,
0,A.RGBA,b,c,0,A.RGBA,A.UNSIGNED_BYTE,null);A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,a,g,0);b=C.vu("NONE");c=b.ec;A.activeTexture(A.TEXTURE0);A.bindTexture(a,e);A.useProgram(c.pj);wa(b,0);A.bindFramebuffer(A.FRAMEBUFFER,null);A.bindTexture(a,null)};c.cleanup=function(){};c.aT=function(){var a=U.YP(),b=U.$z();aa.yD=a?!0:!1;aa.Qy=b?!0:!1;a?(n=function(b,c,g,e){a.drawElementsInstanced(A.TRIANGLES,b,c,g,e)},g=function(b,c){a.vertexAttribDivisor(b,c)},ea=function(b,c,g){a.drawArraysInstanced(A.TRIANGLES,
b,c,g)}):(n=function(a,b,c){A.drawElements(A.TRIANGLES,a,b,c)},g=function(){},ea=function(a,b){A.drawArrays(A.TRIANGLES,a,b)});b?(ka=function(a){b.bindVertexArray(a)},wa=function(a,b){var c=a.Za;ka(a.Pf[b]);c.Eh?n(c.count,c.Xm,0,c.an):ea(0,c.count,c.an);ka(null)}):wa=function(a,b){for(var c=a.Za,e=a.Dq,h=0;h<c.Yd.length;h++){A.bindBuffer(A.ARRAY_BUFFER,c.Yd[h].Nk);for(var f=0;f<e.length;f++){var k=e[f];k.iy==c.Yd[h].type&&(A.enableVertexAttribArray(k.kf),A.vertexAttribPointer(k.kf,k.Tc,k.Jo,k.Jo==
A.FLOAT?!1:!0,0,k.au+k.cv*b),g(k.kf,k.Nm))}}c.Eh?(A.bindBuffer(A.ELEMENT_ARRAY_BUFFER,c.Eh),n(c.count,c.Xm,0,c.an)):ea(0,c.count,c.an);for(h=0;h<e.length;h++)k=e[h],A.disableVertexAttribArray(k.kf)}};c.reset=function(){ka=ea=g=n=A=null}});t.a=d},function(E,t,d){E=d(0);var O=d(5),T=d(4),G=d(1),r=d(9),f=d(18),k=d(6),y=d(2),x=d(3);d=Object(E.a)("__sfx",function(d,p){function m(){var a=window.AudioContext||window.webkitAudioContext;if(a){try{var b=new a}catch(Ea){return U.error('Unable to initialize AudioContext: "'+
Ea+'". The audio is disabled.'),null}if(b.createGain)return b;U.warn("deprecated WebAudio implementation");return null}U.warn("WebAudio is not supported");return null}function b(b,g,h){var f=b.Qa;if("NONE"!=f.behavior){var k=f.loop,d=f.pitch;if(f.src&&(k||0<=h)){f.Wy=Math.floor(5E4*Math.random());var w=A.currentTime+g,w=Math.max(0,w);f.qg=w;f.state=20;var m=n.wd;"POSITIONAL"==f.behavior&&"none"==m.mr&&(f.behavior="BACKGROUND_SOUND");u(b,n.wd);if("POSITIONAL"==f.behavior||"BACKGROUND_SOUND"==f.behavior){g=
A.createBufferSource();g.buffer=f.src;g.playbackRate.value=d;if(k){f.Uc&&f.Uc.disconnect();f.Ae&&f.Ae.disconnect();g.loop=!0;g.loopStart=f.DG;if(g.loopEnd=f.gw)h=A.createBufferSource(),h.buffer=f.src,h.playbackRate.value=d,f.Ae=h,h.connect(f.ve);g.start(w);f.duration=0}else k=g.buffer?g.buffer.duration:0,h>k?(k=w+h+f.Ef,g.loop=!0,g.start(w),g.stop(k),f.duration=h):(g.loop=!1,g.start(w),f.duration=k);g.connect(f.ve);f.Uc=g;l(f);e(f);c(f)}else"BACKGROUND_MUSIC"==f.behavior&&(K.clear_timeout(f.Xy),K.clear_timeout(f.Yy),
h=function(){var a=b.Qa,c=a.src;c&&(c.volume=1,c.loop=a.loop,a.Uc=a.Uc||A.createMediaElementSource(c),a.Uc.connect(a.ve),20==a.state&&(c.currentTime&&(c.currentTime=0),c.play()))},0==g?h():f.Xy=K.set_timeout(h,1E3*g),k?f.duration=0:f.duration=I(b));a(f,w)}}}function u(a,b){var c=a.Qa;if(!c.ve){var g=k.j(a.ka.na),e=k.g(a.ka.na);if(R.ow){var h=A.createBiquadFilter();h.type="peaking"}else h=null;var f=A.createGain();switch(c.behavior){case "POSITIONAL":var n=A.createPanner();"string"!=typeof n.panningModel?
(n.panningModel=n.EQUALPOWER,n.distanceModel=n.INVERSE_DISTANCE):(n.panningModel="equalpower",n.distanceModel=b.mr);n.setPosition(g[0],g[1],g[2]);x.copy(g,c.zA);g=V;y._33(e,y.c,g);n.setOrientation(g[0],g[1],g[2]);n.refDistance=c.dist_ref;n.maxDistance=c.dist_max;n.rolloffFactor=c.attenuation;n.coneInnerAngle=c.yE;n.coneOuterAngle=c.zE;n.coneOuterGain=c.AE;var l=A.createGain();l.gain.value=H(c);h?(n.connect(h),h.connect(l)):n.connect(l);l.connect(f);c.ve=n;if(c.Rn){var d=A.createGain();f.connect(d);
d.connect(b.ve)}else d=null,f.connect(b.ve);break;case "BACKGROUND_SOUND":n=null;l=A.createGain();l.gain.value=H(c);h?(c.ve=h,h.connect(l)):c.ve=l;l.connect(f);c.Rn?(d=A.createGain(),f.connect(d),d.connect(b.ve)):(d=null,f.connect(b.ve));break;case "BACKGROUND_MUSIC":d=n=null,l=A.createGain(),l.gain.value=H(c),h?(c.ve=h,h.connect(l)):c.ve=l,l.connect(f),f.connect(b.ve)}c.gB=n;c.gi=h;c.Ho=l;c.jl=f;c.rB=d}}function h(a){var c=a.Qa;b(a,c.delay+c.TE*Math.random(),c.duration)}function l(a){var b=a.Ae||
a.Uc;y._16(b.onended)&&(b.onended=function(){a.state=50})}function e(a){a.Rn&&a.rB.gain.cancelScheduledValues(a.qg);a.qp&&(a.Uc.playbackRate.cancelScheduledValues(a.qg),a.Ae&&a.Ae.playbackRate.cancelScheduledValues(a.qg));a.vt=a.qg}function c(a){if(a.Rn||a.qp){var b=a.rB,c=a.Uc,g=c.buffer?c.buffer.duration:0;if(g){var e=a.qg;ea[0]=a.Wy;for(var h=0;5>h;){var f=a.pitch+a.qp*y._39(ea);if(e>=a.vt){if(a.Rn){var k=1-y.M(a.Rn,0,1)*Math.random();b.gain.setTargetAtTime(k,e,.015)}a.qp&&(c.playbackRate.setTargetAtTime(f,
e,.015),a.Ae&&a.Ae.playbackRate.setTargetAtTime(f,e,.015));h++}e+=g/f}a.vt=e-.001}}}function a(a,b){if(a.Xj||a.Ef){var c=a.jl;c.gain.cancelScheduledValues(b);a.Xj?(c.gain.setTargetAtTime(0,b,.015),c.gain.linearRampToValueAtTime(1,b+a.Xj)):c.gain.setTargetAtTime(1,b,.015);a.Ef&&!a.loop&&(c.gain.setTargetAtTime(1,b+a.duration,.015),c.gain.linearRampToValueAtTime(0,b+a.duration+a.Ef))}}function ca(a){"SPEAKER"!=a.type&&da.va("Wrong object type");var b=a.Qa;if(50==b.state)b.state=30;else if(20==b.state||
40==b.state){var c=b.jl,g=A.currentTime;b.Ef&&(c.gain.setTargetAtTime(c.gain.value,g,.015),c.gain.linearRampToValueAtTime(0,g+b.Ef,.015));"BACKGROUND_MUSIC"==b.behavior?b.src&&(K.clear_timeout(b.Xy),K.clear_timeout(b.Yy),b.Yy=K.set_timeout(function(){var b=a.Qa.src;b&&(b.currentTime&&(b.currentTime=0),b.pause())},1E3*b.Ef)):(c=b.Uc,c.onended=function(){},b.duration<c.buffer.duration?b.Ef&&20==b.state?c.stop(g+b.Ef):20==b.state&&(c.stop(0),c.disconnect()):c.disconnect(),b.qg=0,b.iB=0,b.gu=0);b.state=
30}}function t(a){a=a.Qa;if(20==a.state){var b=A.currentTime;a.iB=b;"BACKGROUND_MUSIC"==a.behavior?(b=a.src)&&b.pause():(b>a.qg?a.gu=v(a,b):a.gu=0,a.Uc.onended=function(){},a.Uc.stop(0),a.Uc.disconnect(),e(a));a.state=40}}function v(a,b){ea[0]=a.Wy;for(var c=a.Uc.buffer.duration,g=a.qg,e;g<b;)e=a.pitch+a.qp*y._39(ea),g+=c/e;return(c/e-(g-b))*e}function B(b){var g=b.Qa;if(40==g.state){var e=A.currentTime;g.qg+=e-g.iB;if("BACKGROUND_MUSIC"==g.behavior)g.src.play();else{b=b.Qa;var h=A.createBufferSource();
h.loop=b.Uc.loop;h.loopStart=b.Uc.loopStart;h.loopEnd=b.Uc.loopEnd;h.buffer=b.Uc.buffer;h.playbackRate.value=b.Uc.playbackRate.value;h.connect(b.ve);b.Uc=h;b.Ae&&(h=A.createBufferSource(),h.loop=b.Ae.loop,h.buffer=b.Ae.buffer,h.playbackRate.value=b.Ae.playbackRate.value,h.connect(b.ve),b.Ae=h);g.vt=e;e=g.Uc;l(g);e.start(g.qg,g.gu);c(g)}a(g,g.qg);g.state=20}}function C(a,b,c){var g;g=b.FO;if(0<g){var e=b.NT;if(0!=x.dot(a.jy,a.jy)||0!=x.dot(b.ln,b.ln)){var h=x.subtract(a.zA,b.ij,V),f=x.length(h);b=
x.dot(h,b.ln)/f;h=x.dot(h,a.jy)/f;f=e/g;b=Math.min(-b,f);h=Math.min(-h,f);g=(e-g*b)/(e-g*h);isFinite(g)||(g=0);g=Math.min(g,16);g=Math.max(g,.125);g=y._50(g,a.qG,c,.3);a.Uc.playbackRate.value=g;a.qG=g}}}function L(a){a=a.Qa;return!a||20!=a.state&&40!=a.state&&30!=a.state&&50!=a.state?!1:!0}function H(a){return a.muted?0:a.volume}function I(a){a=a.Qa;return(a=a.src)?a.duration:0}var da=Object(O.a)(d),N=Object(T.a)(d),U=Object(G.a)(d),K=Object(f.a)(d),D=N.wa,R=N.Qa,V=new Float32Array(3),F=new Float32Array(3),
z=r.create(),w=[],W=[],A=null,n=null,g=[],ea=[1],ka=null;p.HC=10;p.wy=20;p.GC=30;p.IN=function(){return{nd:-1,Yi:"",behavior:"NONE",muted:!1,volume:1,pitch:1,attenuation:1,dist_ref:1,dist_max:1E4,yE:360,zE:360,AE:1,autoplay:!1,cyclic:!1,loop:!1,DG:0,gw:0,delay:0,TE:0,Rn:0,qp:0,Xj:0,Ef:0,qg:0,iB:0,gu:0,duration:0,vt:0,Wy:1,src:null,state:10,zA:new Float32Array(3),jy:new Float32Array(3),Su:!1,qG:1,Xy:-1,Yy:-1,Om:0,ve:null,Uc:null,Ae:null,gB:null,gi:null,Ho:null,jl:null,rB:null,fm:0}};p.init=function(){var a=
document.createElement("audio"),b=document.createElement("video");a.canPlayType&&(""!=a.canPlayType("audio/ogg")&&(w.push("ogg"),w.push("ogv"),w.push("oga")),""!=a.canPlayType("audio/mpeg")&&w.push("mp3"),""!=a.canPlayType("audio/mp4")&&(w.push("mp4"),w.push("m4v"),w.push("m4a")),""!=a.canPlayType("audio/webm")&&w.push("webm"));b.canPlayType&&(""!=b.canPlayType("video/ogg")&&(W.push("ogv"),W.push("ogg"),W.push("oga")),""!=b.canPlayType("video/mp4")&&(W.push("m4v"),W.push("mp4")),""!=b.canPlayType("video/webm")&&
W.push("webm"),""!=b.canPlayType("video/mpeg")&&W.push("mp3"))};p.gM=function(a){R.CC&&!A&&(A=m())&&U.log("%cINIT WEBAUDIO: "+A.sampleRate+"Hz","color: #00a");if(A){var b={ij:new Float32Array(3),ln:new Float32Array(3),fm:0},c=A.createGain(),g=A.createGain();b.Ho=c;b.jl=g;c.connect(g);g.connect(A.destination);if(a.b4w_enable_dynamic_compressor){var g=A.createDynamicsCompressor(),e=a.b4w_dynamic_compressor_settings;g.threshold.value=e.threshold;g.knee.value=e.knee;g.ratio.value=e.ratio;g.attack.value=
e.attack;g.release.value=e.release;g.connect(c);b.ar=g;b.ve=g}else b.ar=null,b.ve=c;switch(a.audio_distance_model){case "INVERSE":case "INVERSE_CLAMPED":b.mr="inverse";break;case "LINEAR":case "LINEAR_CLAMPED":b.mr="linear";break;case "EXPONENT":case "EXPONENT_CLAMPED":b.mr="exponential";break;case "NONE":b.mr="none";break;default:da.va("Wrong audio distance model")}b.FO=a.audio_doppler_factor;b.NT=a.audio_doppler_speed;b.muted=!1;b.volume=a.audio_volume;c.gain.value=H(b);b.Om=0}else b=null;a.wd=
b};p.RS=function(a){n=a};p.detect_audio_container=function(a){a||(a="ogg");return-1<w.indexOf(a)?a:-1<w.indexOf("m4a")?"m4a":-1<w.indexOf("oga")?"oga":""};p.detect_video_container=function(a){a||(a="webm");return-1<W.indexOf(a)?a:-1<W.indexOf("m4v")?"m4v":-1<W.indexOf("webm")?"webm":""};p.Yx=function(a,b){var c=a.data,e=b.Qa;if(a.data.sound){e.nd=a.data.sound.uuid;e.Yi=a.data.sound.filepath;switch(c.b4w_behavior){case "POSITIONAL":case "BACKGROUND_SOUND":e.behavior=A?c.b4w_behavior:"NONE";break;case "BACKGROUND_MUSIC":var h;
A?(window.MediaElementAudioSourceNode?h=!0:(U.warn("MediaElementAudioSourceNode not found"),h=!1),h=h&&!D.jE?"BACKGROUND_MUSIC":"BACKGROUND_SOUND"):h="NONE";e.behavior=h;break;default:da.va("Wrong speaker behavior")}c.sound||(e.behavior="NONE");e.Su=c.b4w_enable_doppler;e.muted=c.muted;e.volume=c.volume;e.pitch=c.pitch;e.attenuation=c.attenuation;e.dist_ref=c.distance_reference;e.dist_max=c.distance_max||1E4;e.yE=c.cone_angle_inner;e.zE=c.cone_angle_outer;e.AE=c.cone_volume_outer;e.autoplay=c.b4w_auto_play;
e.cyclic=c.b4w_cyclic_play;e.loop=c.b4w_loop;e.DG=c.b4w_loop_start;e.gw=c.b4w_loop_end;e.delay=c.b4w_delay;e.TE=c.b4w_delay_random;e.Rn=c.b4w_volume_random;e.qp=c.b4w_pitch_random;e.Xj=c.b4w_fade_in;e.Ef=c.b4w_fade_out;g.push(b)}};p.eI=function(a){"SPEAKER"!=a.type&&da.va("Wrong object type");switch(a.Qa.behavior){case "POSITIONAL":return p.wy;case "BACKGROUND_SOUND":return p.wy;case "BACKGROUND_MUSIC":return p.GC;case "NONE":return p.HC;default:da.va("Wrong speaker behavior")}};p.NU=function(a,b){var c=
a.Qa;switch(c.behavior){case "POSITIONAL":case "BACKGROUND_SOUND":case "BACKGROUND_MUSIC":c.src=b;break;case "NONE":break;default:da.va("Wrong speaker behavior")}};p.iH=function(){var a=A.createBufferSource();a.buffer=A.createBuffer(1,22050,22050);a.connect(A.destination);a.start(0)};p.yO=function(a,b,c){A?A.decodeAudioData(a,b,c):c()};p.KT=function(a){ca(a);a.Qa=null;g.splice(g.indexOf(a),1)};p.cleanup=function(){for(var a=0;a<g.length;a++){var b=g[a].Qa;"BACKGROUND_MUSIC"==b.behavior?(b=b.src)&&
b.pause():(b.Uc&&b.Uc.disconnect(),b.Ae&&b.Ae.disconnect())}n&&n.wd&&(a=n.wd,a.ij[0]=0,a.ij[1]=0,a.ij[2]=0,a.ln[0]=0,a.ln[1]=0,a.ln[2]=0);n=null;g.splice(0);ka=null};p.update=function(a){if(A&&g.length){for(var b=0;b<g.length;b++){var e=g[b],f=e.Qa,k=f.Uc,n=A.currentTime;!f.loop&&20==f.state&&f.duration&&f.qg+f.duration<n&&("BACKGROUND_MUSIC"==f.behavior||k&&!y._16(k.onended))&&(f.state=50);f.cyclic&&50==f.state&&h(e);20==f.state&&3>f.vt-n&&c(f)}ka&&ka.Ck.length&&(-1==ka.active||a>ka.xD+ka.$E[ka.active])&&
(b=ka,-1<b.active&&ca(b.Ck[b.active]),e=-1==b.active&&b.random?Math.round(Math.random()*(b.Ck.length-1)):b.random?(b.active+(1+Math.round(Math.random()*(b.Ck.length-2))))%b.Ck.length:(b.active+1)%b.Ck.length,h(b.Ck[e]),b.active=e,b.xD=a)}};p.play=b;p.play_def=h;p.stop=ca;p.is_playing=function(a){return 20==a.Qa.state};p.JT=t;p.LT=B;p.loop_stop=function(a,b){var c=a.Qa,g=c.Ae;if(L(a)&&("POSITIONAL"==c.behavior||"BACKGROUND_SOUND"==c.behavior)&&g){var e=A.currentTime+b;c.Uc.stop(e);g.start(e,c.gw)}};
p.playrate=function(a,b){var g=a.Qa;g.pitch=b;!L(a)||"POSITIONAL"!=g.behavior&&"BACKGROUND_SOUND"!=g.behavior||(g.Uc.playbackRate.value=b,g.Ae&&(g.Ae.playbackRate.value=b),e(g),c(g))};p.get_playrate=function(a){return a.Qa.pitch};p.cyclic=function(a,b){a.Qa.cyclic=!!b};p.HQ=function(a){return a.Qa.autoplay};p.is_cyclic=function(a){return a.Qa.cyclic};p.lR=function(a,b,c,e,h){if(a=a.wd){var f=V;f[0]=0;f[1]=0;f[2]=-1;x.transformQuat(f,c,f);F[0]=0;F[1]=1;F[2]=0;x.transformQuat(F,c,F);c=A.listener;c.setPosition(b[0],
b[1],b[2]);c.setOrientation(f[0],f[1],f[2],F[0],F[1],F[2]);if(e&&a.fm!=h){if(a.listener_stride)a.listener_stride=!1,x.copy(b,a.ij);else for(c=a.ln,c[0]=(b[0]-a.ij[0])/e,c[1]=(b[1]-a.ij[1])/e,c[2]=(b[2]-a.ij[2])/e,x.copy(b,a.ij),b=0;b<g.length;b++)c=g[b],f=c.Qa,L(c)&&"POSITIONAL"==f.behavior&&f.Su&&C(f,a,e);a.fm=h}else x.copy(b,a.ij)}};p.listener_stride=function(){var a=n.wd;a&&(a.listener_stride=!0)};p.MT=function(a,b,c){var g=a.Qa;if(L(a)&&"POSITIONAL"==g.behavior){var e=k.i(a.ka.na,V);a=k.f(a.ka.na,
z);var h=g.gB;h.setPosition(e[0],e[1],e[2]);y._33(a,y.c,F);h.setOrientation(F[0],F[1],F[2]);g.Su&&(a=g.zA,b&&g.fm!=c?(g.mI?(x.copy(e,a),g.mI=!1):(h=g.jy,h[0]=(e[0]-a[0])/b,h[1]=(e[1]-a[1])/b,h[2]=(e[2]-a[2])/b,x.copy(e,a),C(g,n.wd,b)),g.fm=c):x.copy(e,a))}};p.speaker_stride=function(a){var b=a.Qa;L(a)&&"POSITIONAL"==b.behavior&&b.Su&&(b.mI=!0)};p.Xz=function(a){return a.Qa.behavior};p.check_active_speakers=function(){for(var a=0;a<g.length;a++)if(L(g[a]))return!0;return!1};p.hT=function(a){var b=
n.wd;b&&(b.volume=a,A&&(b.Ho.gain.value=H(b)))};p.ZP=function(){var a=n.wd;return a?a.volume:0};p.set_volume=function(a,b){var c=a.Qa;c.volume=b;L(a)&&(c.Ho.gain.value=H(c))};p.get_volume=function(a){return a.Qa.volume};p.mute=function(a,b){a.Qa.muted=!!b;L(a)&&(a.Qa.Ho.gain.value=H(a.Qa))};p.is_muted=function(a){return a.Qa.muted};p.KR=function(a){var b=n.wd;b&&(b.muted=!!a,A&&(b.Ho.gain.value=H(b)))};p.OQ=function(){var a=n.wd;return a?a.muted:!1};p.get_speaker_objects=function(){return g};p.pause=
function(){for(var a=0;a<g.length;a++)t(g[a])};p.resume=function(){for(var a=0;a<g.length;a++)B(g[a])};p.set_compressor_params=function(a,b){if(a.wd&&a.wd.ar){var c=a.wd.ar;c.threshold.value=b.threshold;c.knee.value=b.knee;c.ratio.value=b.ratio;c.attack.value=b.attack;c.release.value=b.release}};p.get_compressor_params=function(a){if(!a.wd||!a.wd.ar)return null;a=a.wd.ar;return{threshold:a.threshold.value,knee:a.knee.value,ratio:a.ratio.value,attack:a.attack.value,release:a.release.value}};p.duck=
function(a,b,c){if(L(a)){a=a.Qa;var g=a.jl,e=A.currentTime;g.gain.setTargetAtTime(g.gain.value,e,.015);g.gain.linearRampToValueAtTime(b,e+c);a.Om=c}};p.unduck=function(a){if(L(a)){a=a.Qa;var b=a.jl,c=A.currentTime;b.gain.setTargetAtTime(b.gain.value,c,.015);b.gain.linearRampToValueAtTime(1,c+a.Om);a.Om=0}};p.IO=function(a,b){if(A){var c=n.wd,g=c.jl,e=A.currentTime;g.gain.setTargetAtTime(g.gain.value,e,.015);g.gain.linearRampToValueAtTime(a,e+b);c.Om=b}};p.iU=function(){if(A){var a=n.wd,b=a.jl,c=A.currentTime;
b.gain.setTargetAtTime(b.gain.value,c,.015);b.gain.linearRampToValueAtTime(1,c+a.Om);a.Om=0}};p.apply_playlist=function(a,b,c){ka={active:-1,xD:0,random:c,Ck:[],$E:[]};for(c=0;c<a.length;c++){var g=a[c],e=I(g);0==e?U.warn("Ignoring speaker with zero duration: "+g.name):(ca(g),g.Qa.cyclic=!1,ka.Ck.push(g),ka.$E.push(e+b))}};p.get_duration=I;p.clear_playlist=function(){if(ka)for(var a=ka.Ck,b=0;b<a.length;b++)ca(a[b]);ka=null};p.get_positional_params=function(a){return(a=a.Qa)&&"POSITIONAL"==a.behavior?
{dist_ref:a.dist_ref,dist_max:a.dist_max,attenuation:a.attenuation}:null};p.set_positional_params=function(a,b){var c=a.Qa;if(c&&"POSITIONAL"==c.behavior){c.dist_ref=b.dist_ref;c.dist_max=b.dist_max;c.attenuation=b.attenuation;var g=c.gB;g&&(g.refDistance=c.dist_ref,g.maxDistance=c.dist_max,g.rolloffFactor=c.attenuation)}};p.set_filter_params=function(a,b){var c=a.Qa;c&&c.gi&&(c.gi.frequency.value=b.freq,c.gi.Q.value=b.Q,c.gi.gain.value=b.gain)};p.get_filter_params=function(a){return(a=a.Qa)&&a.gi?
{freq:a.gi.frequency.value,Q:a.gi.Q.value,gain:a.gi.gain.value}:null};p.get_filter_freq_response=function(a,b,c,g){a=a.Qa;if(!a||!a.gi)return null;a.gi.getFrequencyResponse(b,c,g)};p.reset=function(){w.length=0;W.length=0;A=null}});t.a=d},function(E,t,d){E=d(0);var O=d(53),T=d(19),G=d(1);d=Object(E.a)("controls",function(d,f){var k=Object(O.a)(d),y=Object(T.a)(d),x=Object(G.a)(d);f.CT_POSITIVE=k.CT_POSITIVE;f.CT_CONTINUOUS=k.CT_CONTINUOUS;f.CT_TRIGGER=k.CT_TRIGGER;f.CT_SHOT=k.CT_SHOT;f.CT_LEVEL=k.CT_LEVEL;
f.CT_CHANGE=k.CT_CHANGE;f.KEY_BACKSPACE=8;f.KEY_TAB=9;f.KEY_ENTER=13;f.KEY_SHIFT=16;f.KEY_CTRL=17;f.KEY_ALT=18;f.KEY_PAUSE=19;f.KEY_CAPSLOCK=20;f.KEY_ESC=27;f.KEY_SPACE=32;f.KEY_LEFT=37;f.KEY_UP=38;f.KEY_RIGHT=39;f.KEY_DOWN=40;f.KEY_1=49;f.KEY_2=50;f.KEY_3=51;f.KEY_4=52;f.KEY_5=53;f.KEY_6=54;f.KEY_7=55;f.KEY_8=56;f.KEY_9=57;f.KEY_A=65;f.KEY_B=66;f.KEY_C=67;f.KEY_D=68;f.KEY_E=69;f.KEY_F=70;f.KEY_G=71;f.KEY_H=72;f.KEY_I=73;f.KEY_J=74;f.KEY_K=75;f.KEY_L=76;f.KEY_M=77;f.KEY_N=78;f.KEY_O=79;f.KEY_P=80;
f.KEY_Q=81;f.KEY_R=82;f.KEY_S=83;f.KEY_T=84;f.KEY_U=85;f.KEY_V=86;f.KEY_W=87;f.KEY_X=88;f.KEY_Y=89;f.KEY_Z=90;f.KEY_NUM0=96;f.KEY_NUM1=97;f.KEY_NUM2=98;f.KEY_NUM3=99;f.KEY_NUM4=100;f.KEY_NUM5=101;f.KEY_NUM6=102;f.KEY_NUM7=103;f.KEY_NUM8=104;f.KEY_NUM9=105;f.KEY_MULT=106;f.KEY_ADD=107;f.KEY_SUB=109;f.KEY_DEC_POINT=110;f.KEY_DIV=111;f.KEY_SEMI_COLON=186;f.KEY_EQUAL_SIGN=187;f.KEY_COMMA=188;f.KEY_DASH=189;f.KEY_PERIOD=190;f.KEY_FORWARD_SLASH=191;f.KEY_GRAVE_ACCENT=192;f.KEY_LEFT_SQ_BRACKET=219;f.KEY_BACK_SLASH=
220;f.KEY_RIGHT_SQ_BRACKET=221;f.KEY_SINGLE_QUOTE=222;f.PL_SINGLE_TOUCH_MOVE=k.PL_SINGLE_TOUCH_MOVE;f.PL_MULTITOUCH_MOVE_ZOOM=k.PL_MULTITOUCH_MOVE_ZOOM;f.PL_MULTITOUCH_MOVE_PAN=k.PL_MULTITOUCH_MOVE_PAN;f.PL_MULTITOUCH_MOVE_ROTATE=k.PL_MULTITOUCH_MOVE_ROTATE;f.default_AND_logic_fun=k.default_AND_logic_fun;f.default_OR_logic_fun=k.default_OR_logic_fun;f.create_gamepad_btn_sensor=k.create_gamepad_btn_sensor;f.create_gamepad_axis_sensor=k.create_gamepad_axis_sensor;f.create_gamepad_position_sensor=k.create_gamepad_position_sensor;
f.create_gamepad_orientation_sensor=k.create_gamepad_orientation_sensor;f.create_custom_sensor=k.create_custom_sensor;f.create_keyboard_sensor=k.create_keyboard_sensor;f.create_collision_sensor=function(f,d,q){return k.create_collision_sensor(f,d||"ANY",q||!1)};f.create_collision_impulse_sensor=k.create_collision_impulse_sensor;f.create_ray_sensor=function(f,d,q,b,u,h,l){if(f&&!y.ab(f))x.Pa("No physics for object "+f.name);else return k.create_ray_sensor(f,d,q,b||"ANY",u||!1,h||!1,l||!1)};f.create_mouse_click_sensor=
k.create_mouse_click_sensor;f.create_mouse_wheel_sensor=k.create_mouse_wheel_sensor;f.create_mouse_move_sensor=k.create_mouse_move_sensor;f.create_plock_mouse_sensor=k.create_plock_mouse_sensor;f.create_plock_sensor=k.create_plock_sensor;f.create_touch_move_sensor=k.create_touch_move_sensor;f.create_touch_zoom_sensor=k.create_touch_zoom_sensor;f.create_touch_rotate_sensor=k.create_touch_rotate_sensor;f.create_touch_click_sensor=k.create_touch_click_sensor;f.create_motion_sensor=k.create_motion_sensor;
f.create_vertical_velocity_sensor=k.create_vertical_velocity_sensor;f.create_gyro_angles_sensor=k.create_gyro_angles_sensor;f.create_gyro_quat_sensor=k.create_gyro_quat_sensor;f.create_gyro_delta_sensor=k.create_gyro_delta_sensor;f.create_hmd_quat_sensor=k.create_hmd_quat_sensor;f.create_hmd_position_sensor=k.create_hmd_position_sensor;f.create_timer_sensor=function(f,d){return k.create_timer_sensor(f,d||!1)};f.reset_timer_sensor=k.reset_timer_sensor;f.create_elapsed_sensor=k.create_elapsed_sensor;
f.create_timeline_sensor=k.create_timeline_sensor;f.create_selection_sensor=function(f,d){return k.create_selection_sensor(f,d||!1)};f.create_callback_sensor=function(f,d){return k.create_callback_sensor(f,d||0)};f.set_custom_sensor=function(f,d){k.OS(f,d)};f.get_custom_sensor=function(f){return f.value};f.get_sensor_value=k.get_sensor_value;f.get_sensor_payload=k.get_sensor_payload;f.create_sensor_manifold=function(f,d,q,b,u,h,l){u=u||k.default_AND_logic_fun;k.create_sensor_manifold(f,d,q,b,u,h,
void 0===l?null:l)};f.create_kb_sensor_manifold=function(f,d,q,b,u,h){b=k.create_keyboard_sensor(b);k.create_sensor_manifold(f,d,q,[b],k.default_AND_logic_fun,u,void 0===h?null:h)};f.check_sensor_manifolds=function(f){return k.check_sensor_manifold(f,null)};f.check_sensor_manifold=k.check_sensor_manifold;f.remove_sensor_manifold=k.remove_sensor_manifold;f.reset=k.reset;f.set_plock_smooth_factor=k.set_plock_smooth_factor});t.a=d},function(E,t,d){function O(){return{max_x:0,min_x:0,max_y:0,min_y:0,
max_z:0,min_z:0}}function T(a,b){b.min_x=a.min_x;b.max_x=a.max_x;b.min_y=a.min_y;b.max_y=a.max_y;b.min_z=a.min_z;b.max_z=a.max_z;return b}function G(){return{Da:new Float32Array(3),Ab:new Float32Array(3),Bb:new Float32Array(3),Cb:new Float32Array(3)}}function r(a,b){var c=a.max_y,e=a.max_z,h=a.min_x,f=a.min_y,k=a.min_z;a.max_x=Math.max(b.max_x,a.max_x);a.max_y=Math.max(b.max_y,c);a.max_z=Math.max(b.max_z,e);a.min_x=Math.min(b.min_x,h);a.min_y=Math.min(b.min_y,f);a.min_z=Math.min(b.min_z,k);return a}
function f(a,b,c,e){var h=a[b],f=a[b+1],k=a[b+2],n=a[b],g=a[b+1],l=a[b+2];for(b+=3;b<c;b+=3)var d=a[b],m=a[b+1],z=a[b+2],h=Math.max(h,d),f=Math.max(f,m),k=Math.max(k,z),n=Math.min(n,d),g=Math.min(g,m),l=Math.min(l,z);e.max_x=h;e.max_y=f;e.max_z=k;e.min_x=n;e.min_y=g;e.min_z=l;return e}function k(a,b){b||(b=new Float32Array(24));var c=a.max_x,e=a.max_y,h=a.max_z,f=a.min_x,k=a.min_y,n=a.min_z;b[0]=f;b[1]=k;b[2]=n;b[3]=c;b[4]=k;b[5]=n;b[6]=c;b[7]=e;b[8]=n;b[9]=f;b[10]=e;b[11]=n;b[12]=f;b[13]=k;b[14]=
h;b[15]=c;b[16]=k;b[17]=h;b[18]=c;b[19]=e;b[20]=h;b[21]=f;b[22]=e;b[23]=h;return b}function y(){return{Da:new Float32Array(3),Jb:0}}function x(a,b){b.Da[0]=a.Da[0];b.Da[1]=a.Da[1];b.Da[2]=a.Da[2];b.Jb=a.Jb;return b}function m(){return{Ab:new Float32Array(3),Bb:new Float32Array(3),Cb:new Float32Array(3),Da:new Float32Array(3)}}function p(b,c){a.copy(b.Ab,c.Ab);a.copy(b.Bb,c.Bb);a.copy(b.Cb,c.Cb);a.copy(b.Da,c.Da);return c}function q(a,b,c,e){return{Ab:new Float32Array(a),Bb:new Float32Array(b),Cb:new Float32Array(c),
Da:new Float32Array([e[0],e[1],e[2]])}}function b(b,c){var e=ca.g(b,H),e=c?ca.e(b,e,da):la.identity(da),e=ca.L(e,K,I);a.copy(b,B);a.transformMat3(B,e,B);for(var h=B[0],f=h,k=B[1],l=k,n=B[2],g=n,d,m,p,R,u=3;u<b.length;u+=3)B[0]=b[u],B[1]=b[u+1],B[2]=b[u+2],a.transformMat3(B,e,B),d=B[0],m=B[1],p=B[2],d>h&&(h=d),d<f&&(f=d),m>k&&(k=m),m<l&&(l=m),p>n&&(n=p),p<g&&(g=p);h=Math.max(h-f,U);k=Math.max(k-l,U);n=Math.max(n-g,U);g=la.identity(da);g[0]=h?1/h:1/D;g[4]=k?1/k:1/D;g[8]=n?1/n:1/D;la.transpose(e,N);
B[0]=b[0];B[1]=b[1];B[2]=b[2];a.transformMat3(B,e,B);a.transformMat3(B,g,B);a.transformMat3(B,N,B);l=B[0];f=B[0];d=B[1];m=B[1];p=B[2];R=B[2];for(u=3;u<b.length;u+=3)B[0]=b[u],B[1]=b[u+1],B[2]=b[u+2],a.transformMat3(B,e,B),a.transformMat3(B,g,B),a.transformMat3(B,N,B),l=Math.max(l,B[0]),f=Math.min(f,B[0]),d=Math.max(d,B[1]),m=Math.min(m,B[1]),p=Math.max(p,B[2]),R=Math.min(R,B[2]);u=Math.sqrt((l-f)*(l-f)+(d-m)*(d-m)+(p-R)*(p-R))/2;u=Math.min(u,1);L[0]=(l+f)/2;L[1]=(d+m)/2;L[2]=(p+R)/2;l=L;g=la.identity(da);
g[0]=h;g[4]=k;g[8]=n;a.transformMat3(l,e,l);a.transformMat3(l,g,l);a.transformMat3(l,N,l);g=[e[0],e[3],e[6]];f=[e[1],e[4],e[7]];e=[e[2],e[5],e[8]];a.scale(g,h*u,g);a.scale(f,k*u,f);a.scale(e,n*u,e);return q(g,f,e,l)}function u(){return{Jb:0,height:0,Da:new Float32Array(3)}}function h(a,b){b.Jb=a.Jb;b.height=a.height;b.Da.set(a.Da);return b}function l(b,c,e){a.add(c,e,b.Da);a.scale(b.Da,.5,b.Da);b.Jb=a.distance(b.Da,c);return b}t.L=function(){return{zf:O(),Yf:m(),Af:y()}};t.t=function(a,b){T(a.zf,
b.zf);p(a.Yf,b.Yf);x(a.Af,b.Af);return b};t.w=O;t.o=T;t.C=G;t.v=function(b,c){a.copy(b.Da,c.Da);a.copy(b.Ab,c.Ab);a.copy(b.Bb,c.Bb);a.copy(b.Cb,c.Cb);return c};t.f=function(){return{max_x:1E12,min_x:-1E12,max_y:1E12,min_y:-1E12,max_z:1E12,min_z:-1E12}};t.P=function(a){a.max_x=0;a.min_x=0;a.max_y=0;a.min_y=0;a.max_z=0;a.min_z=0;return a};t.n=function(a){var b=O();T(a,b);return b};t.m=function(a){var b=a.max_x-a.min_x,c=a.max_y-a.min_y;c<b&&(b=c);a=a.max_z-a.min_z;a<b&&(b=a);return b};t.D=r;t.a=f;t.h=
function(a,b,c){c||(c=O());a=k(a,v);e.D(a,b,a);return f(a,0,a.length,c)};t.F=k;t.k=function(a,b,c){c||(c=y());e.B(a.Da,b,c.Da);b=e.h(b);c.Jb=a.Jb*(0>b?-b:b);return c};t.i=function(b,c,h){h||(h=m());e.B(b.Da,c,h.Da);a.copy(b.Ab,h.Ab);a.copy(b.Bb,h.Bb);a.copy(b.Cb,h.Cb);e.w(h.Ab,c,h.Ab);e.w(h.Bb,c,h.Bb);e.w(h.Cb,c,h.Cb);return h};t.j=function(b,c,h){h||(h=G());e.B(b.Da,c,h.Da);a.copy(b.Ab,h.Ab);a.copy(b.Bb,h.Bb);a.copy(b.Cb,h.Cb);e.w(h.Ab,c,h.Ab);e.w(h.Bb,c,h.Bb);e.w(h.Cb,c,h.Cb);return h};t.l=function(b,
c){var e=y();a.copy(c,e.Da);e.Jb=b;return e};t.O=function(b,c,e,h,f){var k=G();a.copy(b,k.Da);a.copy(c,k.Ab);a.copy(e,k.Bb);a.copy(h,k.Cb);a.scale(k.Ab,f[0],k.Ab);a.scale(k.Bb,f[1],k.Bb);a.scale(k.Cb,f[2],k.Cb);return k};t.A=y;t.u=x;t.y=m;t.s=p;t.e=q;t.g=function(b){b||(b=y());a.set(0,0,0,b.Da);b.Jb=1E12;return b};t.E=function(b,c){var e=a.subtract(c.Da,b.Da,a.create());0==a.length(e)&&a.set(1,0,0,e);var h=a.normalize(e,a.create()),e=a.scale(h,b.Jb,a.create());a.add(e,b.Da,e);var f=a.scale(h,-b.Jb,
a.create());a.add(f,b.Da,f);var k=a.scale(h,c.Jb,a.create());a.add(k,c.Da,k);var l=a.scale(h,-c.Jb,a.create());a.add(l,c.Da,l);e=[e,f,k,l];h=a.normalize(h,a.create());f=e[0];k=e[0];for(l=1;l<e.length;l++){var n=a.dot(e[l],h);n<a.dot(f,h)&&(f=e[l]);n>a.dot(k,h)&&(k=e[l])}h=[f,k];e=h[0];h=h[1];b.Da=a.scale(a.add(e,h,a.create()),.5,a.create());b.Jb=a.length(a.subtract(h,e,a.create()))/2};t.G=function(b,c){a.add(b.Da,b.Bb,B);a.add(B,b.Ab,B);a.add(B,b.Cb,B);c.push(B[0],B[1],B[2]);a.add(b.Da,b.Bb,B);a.add(B,
b.Ab,B);a.subtract(B,b.Cb,B);c.push(B[0],B[1],B[2]);a.add(b.Da,b.Bb,B);a.subtract(B,b.Ab,B);a.add(B,b.Cb,B);c.push(B[0],B[1],B[2]);a.add(b.Da,b.Bb,B);a.subtract(B,b.Ab,B);a.subtract(B,b.Cb,B);c.push(B[0],B[1],B[2]);a.subtract(b.Da,b.Bb,B);a.add(B,b.Ab,B);a.add(B,b.Cb,B);c.push(B[0],B[1],B[2]);a.subtract(b.Da,b.Bb,B);a.add(B,b.Ab,B);a.subtract(B,b.Cb,B);c.push(B[0],B[1],B[2]);a.subtract(b.Da,b.Bb,B);a.subtract(B,b.Ab,B);a.add(B,b.Cb,B);c.push(B[0],B[1],B[2]);a.subtract(b.Da,b.Bb,B);a.subtract(B,b.Ab,
B);a.subtract(B,b.Cb,B);c.push(B[0],B[1],B[2])};t.z=b;t.x=function(b){var c=G();a.copy(b.Ab,c.Ab);a.copy(b.Bb,c.Bb);a.copy(b.Cb,c.Cb);a.copy(b.Da,c.Da);return c};t.B=function(b){var c=y(),e;e=a.length(b.Ab);var h=a.length(b.Bb),f=a.length(b.Cb);e=e>h?e:h;c.Da=b.Da;c.Jb=f>e?f:e;return c};t.M=function(b,c){var e=a.length(b.Ab),h=a.length(b.Bb),f=a.length(b.Cb);return.75*c.Jb*c.Jb*c.Jb>e*h*f};d.d(t,"I",function(){return u});d.d(t,"K",function(){return u});d.d(t,"J",function(){return u});t.b=function(a,
b){var c=b.max_z,e=b.min_z,h=Math.max(0,c-e-2*a),f=u();f.Jb=a;f.height=h;f.Da[0]=0;f.Da[1]=0;f.Da[2]=(c+e)/2;return f};t.d=function(a,b){var c=b.max_z,e=b.min_z,h=Math.max(0,c-e),f=u();f.Jb=a;f.height=h;f.Da[0]=0;f.Da[1]=0;f.Da[2]=(c+e)/2;return f};t.c=function(a,b){var c=b.max_z,e=b.min_z,h=Math.max(0,c-e),f=u();f.Jb=a;f.height=h;f.Da[0]=0;f.Da[1]=0;f.Da[2]=(c+e)/2;return f};d.d(t,"p",function(){return h});d.d(t,"r",function(){return h});d.d(t,"q",function(){return h});t.N=function(a){for(var c=
0,e=0,h=O(),l=0;l<a.submeshes.length;l++){for(var d=a.submeshes[l],m=d.position,n=0;n<m.length/3;n++)var g=m[3*n],p=m[3*n+1],D=m[3*n+2],c=Math.max(Math.sqrt(g*g+p*p+D*D),c),e=Math.max(Math.sqrt(g*g+p*p),e);n=d.boundings.bb;m=f(m,0,m.length,O());n.max_x=m.max_x;n.min_x=m.min_x;n.max_y=m.max_y;n.min_y=m.min_y;n.max_z=m.max_z;n.min_z=m.min_z;n=k(m,v);n=b(n,!1);d.boundings.be_cen=n.Da;d.boundings.be_ax=[n.Ab[0],n.Bb[1],n.Cb[2]];l?r(h,m):T(m,h)}l=a.b4w_boundings.bb;l.max_x=h.max_x;l.min_x=h.min_x;l.max_y=
h.max_y;l.min_y=h.min_y;l.max_z=h.max_z;l.min_z=h.min_z;l=a.b4w_boundings.bb_src;l.max_x=h.max_x;l.min_x=h.min_x;l.max_y=h.max_y;l.min_y=h.min_y;l.max_z=h.max_z;l.min_z=h.min_z;a.b4w_boundings.bs_rad=c;a.b4w_boundings.bc_rad=e;n=k(h,v);n=b(n,!1);a.b4w_boundings.be_cen=n.Da;a.b4w_boundings.be_ax=[n.Ab[0],n.Bb[1],n.Cb[2]]};t.H=function(b){var e=b.subarray(0,3),h=b.subarray(6,9),f=b.subarray(12,15),k=b.subarray(18,21);b=a.subtract(h,e,B);a.normalize(b,b);var d=c._10(e,h,f,C),d=a.cross(d,b,d);a.normalize(d,
d);var m=a.create(),n=a.create();a.subtract(h,e,L);n[0]=a.dot(L,b);n[1]=a.dot(L,d);h=a.create();a.subtract(f,e,L);h[0]=a.dot(L,b);h[1]=a.dot(L,d);f=a.create();a.subtract(k,e,L);f[0]=a.dot(L,b);f[1]=a.dot(L,d);k=y();f=[m,n,h,f];m=l(k,f[0],f[1]);for(k=2;k<f.length;k++)if(a.distance(m.Da,f[k])>m.Jb){for(var g=m,m=f,n=f[k],h=k-1,g=l(g,n,m[0]),p=1;p<=h;p++)if(a.distance(g.Da,m[p])>g.Jb){for(var D=g,g=m,u=n,v=m[p],R=p-1,D=l(D,u,v),q=0;q<=R;q++)if(a.distance(D.Da,g[q])>D.Jb){var ca=u,K=v,x=g[q],G=a.subtract(K,
x,L),G=a.squaredLength(G),N=a.subtract(ca,x,L),r=a.squaredLength(N),N=a.subtract(ca,K,L),H=a.squaredLength(N),N=G*(r+H-G),I=r*(H+G-r),G=H*(G+r-H),r=N+I+G;a.copy(ca,D.Da);a.scale(D.Da,N/r,D.Da);a.scaleAndAdd(D.Da,K,I/r,D.Da);a.scaleAndAdd(D.Da,x,G/r,D.Da);D.Jb=a.distance(D.Da,ca)}g=D}m=g}k=m;b=a.scale(b,k.Da[0],L);a.scaleAndAdd(b,d,k.Da[1],b);a.add(b,e,k.Da);return k};var e=d(6),c=d(2),a=d(3),ca=d(41),la=d(27),v=new Float32Array(24),B=new Float32Array(3),C=new Float32Array(3),L=new Float32Array(3),
H=new Float32Array(3),I=new Float32Array(9),da=new Float32Array(9),N=new Float32Array(9),U=.001,K=5E-4,D=U/2},function(E,t,d){E=d(0);var O=d(5),T=d(35),G=d(30),r=d(1),f=d(9),k=d(36),y=d(2),x=d(3);d=Object(E.a)("util",function(d,p){var m=Object(O.a)(d),b=Object(T.a)(d),u=Object(G.a)(d),h=Object(r.a)(d);p.AXIS_X=new Float32Array([1,0,0]);p.AXIS_Y=new Float32Array([0,1,0]);p.AXIS_Z=new Float32Array([0,0,1]);p.AXIS_MX=new Float32Array([-1,0,0]);p.AXIS_MY=new Float32Array([0,-1,0]);p.AXIS_MZ=new Float32Array([0,
0,-1]);p.XYX=y.o;p.YZY=y.v;p.ZXZ=y.x;p.XZX=y.q;p.YXY=y.s;p.ZYZ=y.z;p.XYZ=y.p;p.YZX=y.u;p.ZXY=y.w;p.XZY=y.r;p.YXZ=y.t;p.ZYX=y.y;p.f32=function(b){return y._1(b||0)};p.assert=m.assert;p.keyfind=y._17;p.keysearch=y._18;p.matrix_to_quat=function(b){return y._23(b)};p.euler_to_quat=function(b,e){e||(e=new Float32Array(4));return y.Y(b,e)};p.ordered_angles_to_quat=function(b,e,c){c||(c=f.create());return y._26(b,e,c)};p.quat_to_ordered_angles=function(b,e,c){c||(c=x.create());return y._36(b,e,c)};p.quat_to_euler=
function(b,e){e||(e=new Float32Array(3));return y._35(b,e)};p.sign=y._49;p.clamp=y.M;p.quat_to_dir=y._33;p.ground_project_cam_quat=function(b,e){return y._29(b,y.c,y.f,y.e,e)};p.cam_quat_to_mesh_quat=function(b,e){return y.I(b,e)};p.quat_project=function(b,e,c,a,f){return 0!=x.dot(c,a)?(h.error("Wrong in-plane direction"),null):y._29(b,e,c,a,f)};p.hash_code=function(){return u.hash_code.apply(u,arguments)};p.smooth=y._50;p.smooth_v=y._53;p.is_vector=y._15;p.correct_cam_quat_up=y.R;p.quat_to_angle_axis=
y._32;p.random_from_array=y._40;p.horizontal_direction=y._12;p.angle_wrap_0_2pi=y.A;p.angle_wrap_periodic=y.B;p.smooth_step=y._52;p.lerp=y._19;p.deg_to_rad=y.T;p.rad_to_deg=y._38;p.dir_to_quat=y.U;p.is_ie11=b.is_ie11;p.gen_tbn_quats=function(b,e){h.Pa("util.gen_tbn_quats() deprecated. Do not use it anymore.");return k.d(b,e)};p.trunc=y._63});t.a=d},function(E,t,d){function O(d,r,f){var k=d[0],y=d[1],x=d[2],m=d[3],p=d[4],q=d[5],b=d[6],u=d[7];d=d[8];var h=r[0],l=r[1],e=r[2],c=r[3],a=r[4],ca=r[5],G=
r[6],v=r[7];r=r[8];f[0]=h*k+l*m+e*b;f[1]=h*y+l*p+e*u;f[2]=h*x+l*q+e*d;f[3]=c*k+a*m+ca*b;f[4]=c*y+a*p+ca*u;f[5]=c*x+a*q+ca*d;f[6]=G*k+v*m+r*b;f[7]=G*y+v*p+r*u;f[8]=G*x+v*q+r*d;return f}Object.defineProperty(t,"__esModule",{value:!0});t.create=function(){var d=new T(9);d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=1;d[5]=0;d[6]=0;d[7]=0;d[8]=1;return d};t.fromMat4=function(d,r){r[0]=d[0];r[1]=d[1];r[2]=d[2];r[3]=d[4];r[4]=d[5];r[5]=d[6];r[6]=d[8];r[7]=d[9];r[8]=d[10];return r};t.clone=function(d){var G=new T(9);
G[0]=d[0];G[1]=d[1];G[2]=d[2];G[3]=d[3];G[4]=d[4];G[5]=d[5];G[6]=d[6];G[7]=d[7];G[8]=d[8];return G};t.copy=function(d,r){r[0]=d[0];r[1]=d[1];r[2]=d[2];r[3]=d[3];r[4]=d[4];r[5]=d[5];r[6]=d[6];r[7]=d[7];r[8]=d[8];return r};t.identity=function(d){d[0]=1;d[1]=0;d[2]=0;d[3]=0;d[4]=1;d[5]=0;d[6]=0;d[7]=0;d[8]=1;return d};t.transpose=function(d,r){if(r===d){var f=d[1],k=d[2],y=d[5];r[1]=d[3];r[2]=d[6];r[3]=f;r[5]=d[7];r[6]=k;r[7]=y}else r[0]=d[0],r[1]=d[3],r[2]=d[6],r[3]=d[1],r[4]=d[4],r[5]=d[7],r[6]=d[2],
r[7]=d[5],r[8]=d[8];return r};t.invert=function(d,r){var f=d[0],k=d[1],y=d[2],x=d[3],m=d[4],p=d[5],q=d[6],b=d[7],u=d[8],h=u*m-p*b,l=-u*x+p*q,e=b*x-m*q,c=f*h+k*l+y*e;if(!c)return null;c=1/c;r[0]=h*c;r[1]=(-u*k+y*b)*c;r[2]=(p*k-y*m)*c;r[3]=l*c;r[4]=(u*f-y*q)*c;r[5]=(-p*f+y*x)*c;r[6]=e*c;r[7]=(-b*f+k*q)*c;r[8]=(m*f-k*x)*c;return r};t.adjoint=function(d,r){var f=d[0],k=d[1],y=d[2],x=d[3],m=d[4],p=d[5],q=d[6],b=d[7],u=d[8];r[0]=m*u-p*b;r[1]=y*b-k*u;r[2]=k*p-y*m;r[3]=p*q-x*u;r[4]=f*u-y*q;r[5]=y*x-f*p;r[6]=
x*b-m*q;r[7]=k*q-f*b;r[8]=f*m-k*x;return r};t.determinant=function(d){var r=d[3],f=d[4],k=d[5],y=d[6],x=d[7],m=d[8];return d[0]*(m*f-k*x)+d[1]*(-m*r+k*y)+d[2]*(x*r-f*y)};t.multiply=O;d.d(t,"mul",function(){return O});t.translate=function(d,r,f){var k=d[0],y=d[1],x=d[2],m=d[3],p=d[4],q=d[5],b=d[6],u=d[7];d=d[8];var h=r[0];r=r[1];f[0]=k;f[1]=y;f[2]=x;f[3]=m;f[4]=p;f[5]=q;f[6]=h*k+r*m+b;f[7]=h*y+r*p+u;f[8]=h*x+r*q+d;return f};t.rotate=function(d,r,f){var k=d[0],y=d[1],x=d[2],m=d[3],p=d[4],q=d[5],b=d[6],
u=d[7];d=d[8];var h=Math.sin(r);r=Math.cos(r);f[0]=r*k+h*m;f[1]=r*y+h*p;f[2]=r*x+h*q;f[3]=r*m-h*k;f[4]=r*p-h*y;f[5]=r*q-h*x;f[6]=b;f[7]=u;f[8]=d;return f};t.scale=function(d,r,f){var k=r[0];r=r[1];f[0]=k*d[0];f[1]=k*d[1];f[2]=k*d[2];f[3]=r*d[3];f[4]=r*d[4];f[5]=r*d[5];f[6]=d[6];f[7]=d[7];f[8]=d[8];return f};t.fromTranslation=function(d,r){r[0]=1;r[1]=0;r[2]=0;r[3]=0;r[4]=1;r[5]=0;r[6]=d[0];r[7]=d[1];r[8]=1;return r};t.fromRotation=function(d,r){var f=Math.sin(d),k=Math.cos(d);r[0]=k;r[1]=f;r[2]=0;
r[3]=-f;r[4]=k;r[5]=0;r[6]=0;r[7]=0;r[8]=1;return r};t.fromScaling=function(d,r){r[0]=d[0];r[1]=0;r[2]=0;r[3]=0;r[4]=d[1];r[5]=0;r[6]=0;r[7]=0;r[8]=1;return r};t.fromMat2d=function(d,r){r[0]=d[0];r[1]=d[1];r[2]=0;r[3]=d[2];r[4]=d[3];r[5]=0;r[6]=d[4];r[7]=d[5];r[8]=1;return r};t.fromQuat=function(d,r){var f=d[0],k=d[1],y=d[2],x=d[3],m=f+f,p=k+k,q=y+y,f=f*m,b=k*m,k=k*p,u=y*m,h=y*p,y=y*q,m=x*m,p=x*p,x=x*q;r[0]=1-k-y;r[3]=b-x;r[6]=u+p;r[1]=b+x;r[4]=1-f-y;r[7]=h-m;r[2]=u-p;r[5]=h+m;r[8]=1-f-k;return r};
t.normalFromMat4=function(d,r){var f=d[0],k=d[1],y=d[2],x=d[3],m=d[4],p=d[5],q=d[6],b=d[7],u=d[8],h=d[9],l=d[10],e=d[11],c=d[12],a=d[13],ca=d[14],G=d[15],v=f*p-k*m,B=f*q-y*m,C=f*b-x*m,L=k*q-y*p,H=k*b-x*p,I=y*b-x*q,t=u*a-h*c,N=u*ca-l*c,u=u*G-e*c,U=h*ca-l*a,h=h*G-e*a,l=l*G-e*ca,e=v*l-B*h+C*U+L*u-H*N+I*t;if(!e)return null;e=1/e;r[0]=(p*l-q*h+b*U)*e;r[1]=(q*u-m*l-b*N)*e;r[2]=(m*h-p*u+b*t)*e;r[3]=(y*h-k*l-x*U)*e;r[4]=(f*l-y*u+x*N)*e;r[5]=(k*u-f*h-x*t)*e;r[6]=(a*I-ca*H+G*L)*e;r[7]=(ca*C-c*I-G*B)*e;r[8]=
(c*H-a*C+G*v)*e;return r};t.str=function(d){return"mat3("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+", "+d[8]+")"};t.frob=function(d){return Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)+Math.pow(d[2],2)+Math.pow(d[3],2)+Math.pow(d[4],2)+Math.pow(d[5],2)+Math.pow(d[6],2)+Math.pow(d[7],2)+Math.pow(d[8],2))};var T="undefined"!==typeof Float32Array?Float32Array:Array},function(E,t,d){E=d(0);var O=d(4),T=d(1);d=Object(E.a)("__extensions",function(d,r){function f(){return q.Nb?
x("OES_texture_float_linear"):y("OES_texture_float_linear")}function k(){return q.Nb?x("EXT_color_buffer_float"):y("WEBGL_color_buffer_float")}function y(h){if(h in u)return u[h];var f=b.getExtension(h)||null;u[h]=f;p.log("%cGET EXTENSION","color: #"+(f?"0a0":"a00"),h);return f}function x(h){if(h in u)return u[h];switch(h){case "WEBGL_depth_texture":case "OES_element_index_uint":case "OES_standard_derivatives":case "EXT_shader_texture_lod":case "OES_texture_float":case "OES_texture_half_float":var f=
{};break;case "ANGLE_instanced_arrays":case "OES_vertex_array_object":f=b;break;default:f=b.getExtension(h)||null}u[h]=f;p.log("%cGET EXTENSION (WebGL 2)","color: #"+(f?"0a0":"a00"),h);return f}var m=Object(O.a)(d),p=Object(T.a)(d),q=m.wa,b=null,u={};r.fh=function(h){b=h};r.EF=function(){return y("WEBGL_compressed_texture_s3tc")||y("WEBKIT_WEBGL_compressed_texture_s3tc")};r.DF=function(){return y("WEBKIT_WEBGL_compressed_texture_pvrtc")||y("WEBGL_compressed_texture_pvrtc")};r.LP=function(){return q.Nb?
x("WEBGL_depth_texture"):y("WEBGL_depth_texture")||y("WEBKIT_WEBGL_depth_texture")};r.eQ=function(){return q.Nb?x("OES_texture_float"):y("OES_texture_float")};r.gQ=function(){return q.Nb?x("OES_texture_half_float"):y("OES_texture_half_float")};r.fQ=f;r.hQ=function(){return q.Nb?f():y("OES_texture_half_float_linear")};r.CP=k;r.DP=function(){return q.Nb?k():y("EXT_color_buffer_half_float")};r.Rz=function(){return y("EXT_texture_filter_anisotropic")||y("WEBKIT_EXT_texture_filter_anisotropic")};r.GF=
function(){return q.Nb?x("EXT_shader_texture_lod"):y("EXT_shader_texture_lod")};r.IP=function(){return y("WEBGL_debug_shaders")};r.get_renderer_info=function(){return y("WEBGL_debug_renderer_info")};r.zF=function(){return q.Nb?x("OES_element_index_uint"):y("OES_element_index_uint")};r.Yz=function(){return q.Nb?x("OES_standard_derivatives"):y("OES_standard_derivatives")};r.Vz=function(){var h=q.Nb?x("EXT_disjoint_timer_query_webgl2"):y("EXT_disjoint_timer_query");return null==h?h:h.createQueryEXT?
{createQuery:function(){return h.createQueryEXT()},beginQuery:function(b){h.beginQueryEXT(h.TIME_ELAPSED_EXT,b)},endQuery:function(){h.endQueryEXT(h.TIME_ELAPSED_EXT)},uF:function(b){return h.getQueryObjectEXT(b,h.QUERY_RESULT_AVAILABLE_EXT)},vF:function(b){return h.getQueryObjectEXT(b,h.QUERY_RESULT_EXT)},tF:function(){return b.getParameter(h.GPU_DISJOINT_EXT)}}:{createQuery:function(){return b.createQuery()},beginQuery:function(f){b.beginQuery(h.TIME_ELAPSED_EXT,f)},endQuery:function(){b.endQuery(h.TIME_ELAPSED_EXT)},
uF:function(h){return b.getQueryParameter(h,b.QUERY_RESULT_AVAILABLE)},vF:function(h){return b.getQueryParameter(h,b.QUERY_RESULT)},tF:function(){return b.getParameter(h.GPU_DISJOINT_EXT)}}};r.YP=function(){if(q.Nb)return x("ANGLE_instanced_arrays");var b=y("ANGLE_instanced_arrays");return null==b?b:{drawElementsInstanced:function(h,e,c,a,f){b.drawElementsInstancedANGLE(h,e,c,a,f)},vertexAttribDivisor:function(h,e){b.vertexAttribDivisorANGLE(h,e)},drawArraysInstanced:function(h,e,c,a){b.drawArraysInstancedANGLE(h,
e,c,a)}}};r.$z=function(){if(q.Nb)return x("OES_vertex_array_object");var b=y("OES_vertex_array_object");return null==b?b:{bindVertexArray:function(h){b.bindVertexArrayOES(h)},createVertexArray:function(){return b.createVertexArrayOES()},deleteVertexArray:function(h){b.deleteVertexArrayOES(h)},isVertexArray:function(h){return b.isVertexArrayOES(h)}}};r.cleanup=function(){u={}};r.reset=function(){b=null}});t.a=d},function(E,t,d){E=d(0);var O=d(16),T=d(14),G=d(15),r=d(42),f=d(31),k=d(12),y=d(8),x=d(1),
m=d(19),p=d(10),q=d(11),b=d(2);d=Object(E.a)("scenes",function(d,h){function l(){var a=u.get_canvas();return B.pick_object(a.clientWidth/2,a.clientHeight/2)}function e(a){return C.kc(a)||C.is_empty(a)||C.is_line(a)||C.is_lamp(a)}var c=Object(O.a)(d),a=Object(T.a)(d),u=Object(G.a)(d),t=Object(r.a)(d),v=Object(f.a)(d),B=Object(k.a)(d),C=Object(y.a)(d),L=Object(x.a)(d),H=Object(m.a)(d),I=Object(p.a)(d),da=Object(q.a)(d);h.DATA_ID_ALL=B.DATA_ID_ALL;h.set_active=function(a){var c=I.Fr();I.set_active(b._18("name",
a,c))};h.get_active=function(){return I.xb()?I.get_active().name:""};h.get_scenes=function(){for(var a=I.Fr(),b=[],c=0;c<a.length;c++)b.push(a[c].name);return b};h.get_active_camera=function(){if(I.xb())return I.ml(I.get_active());L.error("No active scene");return!1};h.get_object_by_name=function(a,b){var c=B.Bd(B.Fy,a,b|0,!0);if(c)return c;L.error("get object "+a+": not found")};h.get_object_by_dupli_name=function(a,b,c){if(a=B.Bd(B.Ey,a,b,c|0))return a;L.error("get object "+b+": not found")};h.get_object_by_dupli_name_list=
function(a,b){var c=B.Bd(B.ne,a,b|0);if(c)return c;L.error("get object "+a+": not found")};h.get_world_by_name=function(a,b){var c=B.get_world_by_name(a,b|0);if(c)return c;L.error("get object "+a+": not found")};h.get_object_data_id=function(a){return C.get_object_data_id(a)};h.pick_object=function(a,b){var c=I.ji();return c?(c=I.xc(c,da.nh))&&c.enable_hmd_stereo?(L.Pa("pick_object() is not available in the stereo rendering mode. Use scenes.pick_center instead."),l()):B.pick_object(a,b):(L.error("No active scene"),
null)};h.pick_center=l;h.outlining_is_enabled=function(a){return a&&a.ka&&a.ka.Dd};h.set_outline_intensity=function(a,b){a&&a.ka&&a.ka.Dd?B.set_outline_intensity(a,b):L.error("set_outline_intensity(): wrong object")};h.get_outline_intensity=function(a){if(a&&a.ka&&a.ka.Dd)return a.ka.lj;L.error("get_outline_intensity(): wrong object");return 0};h.apply_outline_anim=function(a,b,c,e){a&&a.ka&&a.ka.Dd?B.apply_outline_anim(a,b,c,e):L.error("apply_outline_anim(): wrong object")};h.apply_outline_anim_def=
function(a){if(a&&a.ka&&a.ka.Dd){var b=a.ka.kj;B.apply_outline_anim(a,b.Gl,b.Hl,b.Il)}else L.error("apply_outline_anim_def(): wrong object")};h.clear_outline_anim=function(a){a&&a.ka&&a.ka.Dd?B.clear_outline_anim(a):L.error("clear_outline_anim(): wrong object")};h.set_outline_color=I.set_outline_color;h.get_outline_color=function(a){var b=I.get_active();if(b=I.xc(b,da.$n))return a=a||new Float32Array(3),a.set(b.ti),a};h.set_hmd_params=function(a){I.xb()?a&&(!a.distortion_coefs||a.distortion_coefs instanceof
Array||(a.distortion_coefs=null),!a.chromatic_aberration_coefs||a.chromatic_aberration_coefs instanceof Array||(a.chromatic_aberration_coefs=null),"number"!=typeof a.base_line_factor&&(a.base_line_factor=null),"number"!=typeof a.inter_lens_factor&&(a.inter_lens_factor=null),"boolean"!=typeof a.enable_hmd_stereo&&(a.enable_hmd_stereo=null),I.set_hmd_params(a)):L.error("No active scene")};h.get_shadow_params=function(){if(!I.xb())return L.error("No active scene"),!1;var a=I.get_active(),b=I.xc(a,da.be);
if(!b)return null;var c=a.sa.Gd,e=I.xc(a,da.ic),h=I.xc(a,da.Eg),f={};f.csm_resolution=c.csm_resolution;f.self_shadow_polygon_offset=b.self_shadow_polygon_offset;h&&(f.self_shadow_normal_offset=h.self_shadow_normal_offset);f.enable_csm=c.enable_csm;f.csm_num=c.csm_num;f.csm_first_cascade_border=c.csm_first_cascade_border;f.first_cascade_blur_radius=c.first_cascade_blur_radius;f.csm_last_cascade_border=c.csm_last_cascade_border;f.last_cascade_blur_radius=c.last_cascade_blur_radius;f.fade_last_cascade=
c.fade_last_cascade;f.blend_between_cascades=c.blend_between_cascades;c.enable_csm?(f.csm_borders=I.HP(a,e.qa),f.blur_radii=new Float32Array(c.csm_num),f.blur_radii.set(e.qa.pp.subarray(0,c.csm_num))):(f.csm_borders=null,f.blur_radii=null);return f};h.set_shadow_params=function(b){if(I.xb()){var e=I.get_active();"number"==typeof b.self_shadow_polygon_offset&&v.Oa(e.sa.fb,function(a,c){c.type==da.be&&(c.self_shadow_polygon_offset=b.self_shadow_polygon_offset)});for(var h=I.hh(e,[da.Eg]),f=0;f<h.length;f++){var k=
h[f];"number"==typeof b.self_shadow_normal_offset&&(k.self_shadow_normal_offset=b.self_shadow_normal_offset);"number"==typeof b.pcf_blur_radius&&(k.pcf_blur_radius=b.pcf_blur_radius)}h=I.hh(e,[da.Kd]);for(f=0;f<h.length;f++){var d=h[f];"number"==typeof b.self_shadow_normal_offset&&(d.self_shadow_normal_offset=b.self_shadow_normal_offset);"number"==typeof b.pcf_blur_radius&&(d.pcf_blur_radius=b.pcf_blur_radius);d.vb=!0}h=e.sa.Gd;"number"==typeof b.csm_first_cascade_border&&(h.csm_first_cascade_border=
b.csm_first_cascade_border);"number"==typeof b.first_cascade_blur_radius&&(h.first_cascade_blur_radius=b.first_cascade_blur_radius);"number"==typeof b.csm_last_cascade_border&&(h.csm_last_cascade_border=b.csm_last_cascade_border);"number"==typeof b.last_cascade_blur_radius&&(h.last_cascade_blur_radius=b.last_cascade_blur_radius);if(k){d=k.Hb;for(f=0;f<d.length;f++)for(var l=d[f].ub,m=0;m<l.length;m++){var w=l[m];if(w.ah.ze){var p=w.hb;c.FD(p,h);c.md(p);da.xd(k,w)}}k.vb=!0}k=C.lb(e.Aj,e).Sa;for(f=
0;f<k.length;f++)a.rC(k[f],h);I.FB(e)}else L.error("No active scene")};h.get_environment_colors=function(){if(!I.xb())return L.error("No active scene"),[];var a=I.get_active();return I.get_environment_colors(a)};h.set_environment_colors=function(a,b,c){if(I.xb()){var e=I.get_active(),h=I.xc(e,da.ic);I.set_environment_colors(e,a||0==a?parseFloat(a):h.Sg,b||0==b?b:h.te,c||0==c?c:h.Ce)}else L.error("No active scene")};h.get_fog_color_density=function(a){if(!I.xb())return L.error("No active scene"),!1;
var b=I.get_active();return I.get_fog_color_density(b,a)};h.set_fog_color_density=function(a){if(I.xb()){var b=I.get_active();I.set_fog_color_density(b,a)}else L.error("No active scene")};h.get_fog_params=function(){if(!I.xb())return L.error("No active scene"),!1;var a=I.get_active(),b={};b.fog_intensity=I.RP(a);b.fog_depth=I.PP(a);b.fog_start=I.SP(a);b.fog_height=I.QP(a);return b};h.set_fog_params=function(a){if(I.xb()){var b=I.get_active();"number"==typeof a.fog_intensity&&I.GH(b,a.fog_intensity);
"number"==typeof a.fog_depth&&I.EH(b,a.fog_depth);"number"==typeof a.fog_start&&I.HH(b,a.fog_start);"number"==typeof a.fog_height&&I.FH(b,a.fog_height)}else L.error("No active scene")};h.get_ssao_params=function(){if(!I.xb())return L.error("No active scene"),!1;var a=I.get_active();return I.get_ssao_params(a)};h.set_ssao_params=function(a){if(I.xb()){var b=I.get_active(),e=I.hh(b,[da.Gt]),b=I.hh(b,[da.My]);if(!e.length)return L.error("SSAO is not enabled on the scene"),0;for(var h=0;h<e.length;h++){var f=
e[h],k=b[h],d=a,l=I.get_active(),m=f.Hb[0].ub[0],p=m.hb,A=k.Hb[0].ub[0],n=A.hb;if("quality"in d){var g=d.quality;8===g||16===g||24===g||32===g?(f.Fn=g,c.dc(p,"SSAO_QUALITY","SSAO_QUALITY_"+g),c.md(p),da.xd(f,m)):L.error('set_ssao_params(): Wrong "quality" value.')}"use_hemisphere"in d&&(f.Hp=d.use_hemisphere,c.dc(p,"SSAO_HEMISPHERE",d.use_hemisphere|0),c.md(p),da.xd(f,m));"use_blur_depth"in d&&(k.Ep=d.use_blur_depth,c.dc(n,"SSAO_BLUR_DEPTH",d.use_blur_depth|0),c.md(n),da.xd(k,A),I.eN(l.sa.fb,k,n,
!1));"ssao_white"in d&&(f.ssao_white=d.ssao_white,c.dc(p,"SSAO_WHITE",d.ssao_white|0),c.md(p),da.xd(f,m));"blur_discard_value"in d&&(k.Fp=d.blur_discard_value);"radius_increase"in d&&(f.Jp=d.radius_increase);"influence"in d&&(f.Ip=d.influence);"dist_factor"in d&&(f.Gp=d.dist_factor);if("boolean"==typeof d.ssao_only){l=I.xc(l,da.ic);l.ssao_only=d.ssao_only;m=l.Hb;p=[];for(A=0;A<m.length;A++)for(n=m[A].ub,g=0;g<n.length;g++){var u=n[g].hb;c.dc(u,"SSAO_ONLY",d.ssao_only|0);c.md(u);p.push(n[g])}for(A=
0;A<p.length;A++)da.xd(l,p[A])}f.vb=!0;k.vb=!0}}else L.error("No active scene")};h.get_color_correction_params=function(){if(!I.xb())return L.error("No active scene"),null;var a=I.get_active(),a=I.xc(a,da.zy);if(!a)return null;var b={};b.brightness=a.brightness;b.contrast=a.contrast;b.exposure=a.exposure;b.saturation=a.saturation;return b};h.set_color_correction_params=function(a){if(I.xb()){var b=I.get_active();if(b=I.xc(b,da.zy))"brightness"in a&&(b.brightness=a.brightness),"contrast"in a&&(b.contrast=
a.contrast),"exposure"in a&&(b.exposure=a.exposure),"saturation"in a&&(b.saturation=a.saturation),b.vb=!0}else L.error("No active scene")};h.get_sky_params=function(){if(!I.xb())return L.error("No active scene"),!1;var a=I.get_active();return I.get_sky_params(a)};h.set_sky_params=function(a){if(I.xb()){var b=I.get_active(),c=I.xc(b,da.Ue);c&&("color"in a&&c.Tl.set(a.color),"rayleigh_brightness"in a&&(c.rayleigh_brightness=a.rayleigh_brightness),"mie_brightness"in a&&(c.mie_brightness=a.mie_brightness),
"spot_brightness"in a&&(c.spot_brightness=a.spot_brightness),"scatter_strength"in a&&(c.scatter_strength=a.scatter_strength),"rayleigh_strength"in a&&(c.rayleigh_strength=a.rayleigh_strength),"mie_strength"in a&&(c.mie_strength=a.mie_strength),"rayleigh_collection_power"in a&&(c.rayleigh_collection_power=a.rayleigh_collection_power),"mie_collection_power"in a&&(c.mie_collection_power=a.mie_collection_power),"mie_distribution"in a&&(c.mie_distribution=a.mie_distribution),c.vb=!0,c.cp=!0,I.MU(b,c))}else L.error("No active scene")};
h.get_dof_params=function(){if(!I.xb())return L.error("No active scene"),!1;var a=I.get_active();return I.xc(a,da.qq)?I.get_dof_params(a):null};h.set_dof_params=function(a){if(I.xb()){var b=I.get_active();I.set_dof_params(b,a)}else L.error("No active scene")};h.get_god_rays_params=function(){if(!I.xb())return L.error("No active scene"),!1;var a=I.get_active();return I.xc(a,da.Zn)?I.get_god_rays_params(a):null};h.set_god_rays_params=function(a){if(I.xb()){var b=I.get_active();I.set_god_rays_params(b,
a)}else L.error("No active scene")};h.get_bloom_params=function(){if(!I.xb())return L.error("No active scene"),!1;var a=I.get_active();return I.xc(a,da.mq)?I.get_bloom_params(a):null};h.set_bloom_params=function(a){if(I.xb()){var b=I.get_active();I.set_bloom_params(b,a)}else L.error("No active scene")};h.get_glow_material_params=function(){if(!I.xb())return L.error("No active scene"),!1;var a=I.get_active();return I.xc(a,da.rq)?I.get_glow_material_params(a):null};h.set_glow_material_params=function(a){if(I.xb()){var b=
I.get_active();I.set_glow_material_params(b,a)}else L.error("No active scene")};h.get_wind_params=function(){if(!I.xb())return L.error("No active scene"),!1;var a=I.get_active();return I.get_wind_params(a)};h.set_wind_params=function(a){if(I.xb()){var b=I.get_active();B.set_wind_params(b,a)}else L.error("No active scene")};h.get_water_surface_level=function(a,b){if(!I.xb())return L.error("No active scene"),0;var c=I.get_active();return c.sa.Zd?I.get_water_surface_level(c,a,b):(L.error("No water parameters on the active scene"),
0)};h.set_water_params=function(a){if(I.xb()){var b=I.get_active();I.set_water_params(b,a)}else L.error("No active scene")};h.get_water_mat_params=function(a){if(I.xb()){var b=I.get_active();I.get_water_mat_params(b,a)}else L.error("No active scene")};h.update_scene_materials_params=function(){if(I.xb()){var a=I.get_active();I.NI(a)}else L.error("No active scene")};h.hide_object=function(a,b){b=b||!1;e(a)?b?I.Dm(a,!0):I.Tq(a,!0):L.error("show/hide is only supported for dynamic objects.")};h.show_object=
function(a,b){b=b||!1;e(a)?b?I.Dm(a,!1):I.Tq(a,!1):L.error("show/hide is only supported for dynamic objects.")};h.is_hidden=function(a){if(e(a))return I.is_hidden(a);L.error("show/hide is only supported for dynamic meshes/empties and lamps");return!1};h.is_visible=function(a){return a.ka.is_visible};h.check_object_by_name=function(a,b){return B.Bd(B.Fy,a,b|0,!0)?!0:!1};h.check_object_by_dupli_name=function(a,b,c){return B.Bd(B.Ey,a,b,c|0)?!0:!1};h.check_object_by_dupli_name_list=function(a,b){return B.Bd(B.ne,
a,b|0)?!0:!1};h.get_all_objects=function(a,b){var c=I.get_active();a||(a="ALL");b||0===b||(b=B.DATA_ID_ALL);return B.FF(c,a,b)};h.get_object_name=function(a){return a?a.le:(L.error("Wrong object name"),"")};h.get_object_name_hierarchy=function(a){if(!a)return L.error("Wrong object name"),null;for(var b=[];a;)b.push(a.le),a=C.get_dg_parent(a);return b.reverse()};h.get_object_type=function(a){return a&&a.type?a.type:(L.error("Wrong object"),"UNDEFINED")};h.get_object_children=function(a){return a.af.slice(0)};
h.get_first_character=function(){return B.get_first_character(I.get_active())};h.get_shore_dist=function(a,b){b||0===b||(b=1);if(!I.xb())return L.error("No active scene"),0;var c=I.get_active();return I.get_shore_dist(c,a,b)};h.get_cam_water_depth=function(){return I.get_cam_water_depth()};h.get_type_mesh_object=function(a){return C.is_mesh(a)?a.ka.type:""};h.get_meta_tags=function(){if(!I.xb())return L.error("No active scene"),!1;var a=I.get_active();return I.get_meta_tags(a)};h.get_custom_prop=
function(){if(!I.xb())return L.error("No active scene"),!1;var a=I.get_active();return I.get_custom_prop(a)};h.append_object=function(a,c){if(c)var e=I.Fr(),e=b._18("name",c,e);else e=I.get_active();I.append_object(e,a,!0);H.append_object(a,e)};h.remove_object=function(a){C.kc(a)||C.is_empty(a)||C.is_line(a)?(B.mp(a,a.ka.Ov,!1,!1),t.kH(a),B.mp(a,!0,!0,!0),B.remove_object(a)):L.error("Can't remove object \""+a.name+'". It must be dynamic and type of MESH or EMPTY.')};h.marker_frame=function(a){var b=
I.get_active();if(b.timeline_markers&&a in b.timeline_markers)return I.marker_frame(b,a);L.error('"'+a+'" marker not found.');return 0};h.get_mb_params=function(){var a=I.get_active();return(a=I.xc(a,da.Ii))?{mb_factor:a.mb_factor,mb_decay_threshold:a.mb_decay_threshold}:null};h.set_mb_params=function(a){var b=I.get_active(),b=I.hh(b,[da.Ii]);if(b.length)for(var c=0;c<b.length;c++){var e=b[c];"number"==typeof a.mb_decay_threshold&&(e.mb_decay_threshold=a.mb_decay_threshold);"number"==typeof a.mb_factor&&
(e.mb_factor=a.mb_factor)}else L.error("The motion blur subscene doesn't exist.")};h.can_select_objects=function(){var a=I.get_active();return!!I.xc(a,da.xf)}});t.a=d},function(E,t,d){E=d(0);var O=d(5),T=d(1);d=Object(E.a)("generator",function(d,r){function f(b,d){var e=d;switch(typeof b){case "object":if(b)switch(b.constructor){case Object:for(var c in b)e=f(b[c],e);break;case Int8Array:case Uint8Array:case Uint8ClampedArray:case Int16Array:case Uint16Array:case Int32Array:case Uint32Array:case Float32Array:case Float64Array:for(c=
0;c<b.length;c++)e=k(b[c],e);break;case Array:for(c=0;c<b.length;c++)e=f(b[c],e);break;case WebGLUniformLocation:case WebGLProgram:case WebGLShader:case WebGLFramebuffer:case WebGLRenderbuffer:case WebGLTexture:case WebGLBuffer:e=k(0,e);break;default:y.va("Wrong object constructor:",b.constructor)}else e=k(0,e);return e;case "number":return k(b,e);case "boolean":return k(b|0,e);case "string":for(c=0;c<b.length;c++)e=(e<<5)-e+b.charCodeAt(c),e&=e;return e;case "function":case "undefined":return k(0,
e)}}function k(h,f){var e=f;b[0]=h;e=(e<<5)-e+u[0];e&=e;e=(e<<5)-e+u[1];return e&e}var y=Object(O.a)(d),x=Object(T.a)(d),m=1,p=0,q={},b=new Float64Array(1),u=new Uint32Array(b.buffer);r.et=function(b){q[b]||(q[b]=0);var h=b+q[b];q[b]++;return h};r.cleanup=function(){p=0;q={}};r.EI=function(){p++;return p.toString(10)};r.mF=function(b){b++;132651<b&&x.error("Color ID pool depleted");var h=Math.floor(b/2601);b%=2601;return new Float32Array([h/51,Math.floor(b/51)/51,b%51/51])};r.qS=function(){m=(69069*
m+5)%Math.pow(2,32);return Math.round(m/65536)%32768/32767};r.ST=function(b){m=b};r.XD=function(b){return f(b,0)};r.hash_code=f});t.a=d},function(E,t,d){E=d(0);var O=d(5),T=d(2);d=Object(E.a)("__graph",function(d,r){function f(a,b,c){c||(c=null);k(a,b)?R.va("Graph already has node with given ID"):a.Ha.push(b,c)}function k(a,b){for(var c=a.Ha,e=0;e<c.length;e+=2)if(c[e]==b)return!0;return!1}function y(a,b,c,e){e||(e=null);k(a,b)&&k(a,c)?a.kb.push(b,c,e):R.va("Wrong node IDs")}function x(a,b){k(a,b)||
R.va("Node not found");for(var c=a.Ha,e=0;e<c.length;e+=2)c[e]==b&&(c.splice(e,2),e-=2)}function m(a,b,c,e){N(a,b,c)||R.va("Edge not found");a=a.kb;for(var h=0,f=0;f<a.length;f+=3)if(a[f]==b&&a[f+1]==c){if(-1==e)a.splice(f,3);else{if(e==h){a.splice(f,3);break}h++}f-=3}}function p(a){a=a.Ha;for(var b=-1,c=0;c<a.length;c+=2)b=Math.max(b,a[c]);return++b}function q(a,b){for(var c=a.Ha,e=0;e<c.length;e+=2)if(c[e+1]==b)return c[e];return-1}function b(a){var b=[],c={};u(a,c);for(var e=a.Ha,f=0;f<e.length;f+=
2)0==H(a,e[f])&&h(a,e[f],c,b);return{Ha:b,kb:a.kb.slice(0)}}function u(a,b){for(var c=a.Ha,e=0;e<c.length;e+=2)b[c[e]]=!1}function h(a,b,c,e){if(!c[b]){c[b]=!0;for(var f=0;f<L(a,b);f++)h(a,I(a,b,f),c,e);e.unshift(b,C(a,b))}}function l(a,b,c,e){if(!c[b]){c[b]=!0;if(10==e||30==e)for(var h=0;h<L(a,b);h++){var f=I(a,b,h);l(a,f,c,e)}if(20==e||30==e)for(h=0;h<H(a,b);h++)f=t(a,b,h),l(a,f,c,e)}}function e(a){for(var b=a.kb,c=0;c<b.length;c+=3){var e=b[c+1];k(a,b[c])&&k(a,e)||(b.splice(c,3),c-=3)}}function c(a){for(var b=
[],c=a.Ha,e=0;e<c.length;e+=2){var h=c[e];L(a,h)||b.push(h)}return b}function a(a){var b=a.Ha;a=a.kb;for(var c=[],e=[],h=[],f=0;f<b.length;f++)h[b[2*f]]=f,c.push(f,b[2*f+1]);for(f=0;f<a.length;f+=3)e.push(h[a[f]],h[a[f+1]],a[f+2]);return{Ha:c,kb:e}}function ca(a,b,c){if(c.Ri==c.Cl){for(var e=0,h=0;e<c.Cl;e++)-1!=c.Pj[e]&&(a[h]=e,b[h]=c.Pj[e],h++);return!0}if(c.Cl>c.bp||c.Yl>c.Zl||c.Op>c.Qp||c.Np>c.Pp)return!1;for(var h=e=-1,f=!1;!f&&G(c,V,e,h);)if(e=V[0],h=V[1],v(c,e,h)){var g;g=c;f={};f.Dr=g.Dr;
f.Er=g.Er;f.XA=g.XA;f.Pu=g.Pu;f.Cl=g.Cl;f.bp=g.bp;f.order=g.order;f.Ri=f.Aw=g.Ri;f.Np=g.Np;f.Op=g.Op;f.Yl=g.Yl;f.Pp=g.Pp;f.Qp=g.Qp;f.Zl=g.Zl;f.xq=-1;f.Pj=g.Pj;f.Hm=g.Hm;f.Zm=g.Zm;f.$m=g.$m;f.rn=g.rn;f.sn=g.sn;f.dx=g.dx;g.dx[0]+=1;var f=g=f,k=e,d=h,l=f.Dr,m=f.Er,w=f.Cl,p=f.bp,z=f.Pj,D=f.Hm,u=f.Zm,R=f.$m,q=f.rn,F=f.sn;B(k<w);B(d<p);B(f.Ri<w);B(f.Ri<p);w=++f.Ri;f.xq=k;u[k]||(u[k]=w,f.Np++,q[k]&&f.Yl++);q[k]||(q[k]=w,f.Op++,u[k]&&f.Yl++);R[d]||(R[d]=w,f.Pp++,F[d]&&f.Zl++);F[d]||(F[d]=w,f.Qp++,R[d]&&f.Zl++);
z[k]=d;D[d]=k;for(z=0;z<H(l,k);z++)D=t(l,k,z),u[D]||(u[D]=w,f.Np++,q[D]&&f.Yl++);for(z=0;z<L(l,k);z++)D=I(l,k,z),q[D]||(q[D]=w,f.Op++,u[D]&&f.Yl++);for(z=0;z<H(m,d);z++)D=t(m,d,z),R[D]||(R[D]=w,f.Pp++,F[D]&&f.Zl++);for(z=0;z<L(m,d);z++)D=I(m,d,z),F[D]||(F[D]=w,f.Qp++,R[D]&&f.Zl++);f=ca(a,b,g);B(1>=g.Ri-g.Aw);B(-1!=g.xq);D=g.Dr;k=g.Er;d=g.Ri;l=g.xq;m=g.Pj;u=g.Hm;w=g.Zm;R=g.$m;p=g.rn;q=g.sn;if(g.Aw<d){w[l]==d&&(w[l]=0);for(F=0;F<H(D,l);F++)z=t(D,l,F),w[z]==d&&(w[z]=0);p[l]==d&&(p[l]=0);for(F=0;F<L(D,
l);F++)z=I(D,l,F),p[z]==d&&(p[z]=0);D=m[l];R[D]==d&&(R[D]=0);for(F=0;F<H(k,D);F++)z=t(k,D,F),R[z]==d&&(R[z]=0);q[D]==d&&(q[D]=0);for(F=0;F<L(k,D);F++)z=I(k,D,F),q[z]==d&&(q[z]=0);m[l]=-1;u[D]=-1;g.Ri=g.Aw;g.xq=-1}}return f}function G(a,b,c,e){-1==c&&(c=0);-1==e?e=0:e++;var h=a.Yl,f=a.Zl,g=a.Op,k=a.Qp,d=a.Np,l=a.Pp,m=a.Ri,w=a.Cl,p=a.bp,z=a.Pj,D=a.Hm,u=a.Zm,v=a.$m,R=a.rn,q=a.sn;if(h>m&&f>m)for(;c<w&&(-1!=z[c]||0==R[c]||0==u[c]);)c++,e=0;else if(g>m&&k>m)for(;c<w&&(-1!=z[c]||0==R[c]);)c++,e=0;else if(d>
m&&l>m)for(;c<w&&(-1!=z[c]||0==u[c]);)c++,e=0;else if(0==c&&0!=a.order){for(u=0;u<w&&-1!=z[c=a.order[u]];)u++;u==w&&(c=w)}else for(;c<w&&-1!=z[c];)c++,e=0;if(h>m&&f>m)for(;e<p&&(-1!=D[e]||0==q[e]||0==v[e]);)e++;else if(g>m&&k>m)for(;e<p&&(-1!=D[e]||0==q[e]);)e++;else if(d>m&&l>m)for(;e<p&&(-1!=D[e]||0==v[e]);)e++;else for(;e<p&&-1!=D[e];)e++;return c<w&&e<p?(b[0]=c,b[1]=e,!0):!1}function v(a,b,c){var e=a.Dr,h=a.Er,f=a.bp,g=a.Pj,k=a.Hm,d=a.Zm,l=a.$m,m=a.rn,w=a.sn;B(b<a.Cl);B(c<f);B(-1==g[b]);B(-1==
k[c]);if(!(0,a.XA)(C(e,b),C(h,c)))return!1;for(var p=f=0,z=0,D=0,u=0,v=0,R=0;R<L(e,b);R++){var q=I(e,b,R);if(-1!=g[q]){var F=g[q];if(!N(h,c,F)||!U(a.Pu,e,b,q,h,c,F))return!1}else d[q]&&z++,m[q]&&f++,d[q]||m[q]||u++}for(R=0;R<H(e,b);R++)if(q=t(e,b,R),-1!=g[q]){if(F=g[q],!N(h,F,c)||!U(a.Pu,e,q,b,h,F,c))return!1}else d[q]&&z++,m[q]&&f++,d[q]||m[q]||u++;for(R=0;R<L(h,c);R++)if(F=I(h,c,R),-1!=k[F]){if(q=k[F],!N(e,b,q))return!1}else l[F]&&D++,w[F]&&p++,l[F]||w[F]||v++;for(R=0;R<H(h,c);R++)if(F=t(h,c,R),
-1!=k[F]){if(q=k[F],!N(e,q,b))return!1}else l[F]&&D++,w[F]&&p++,l[F]||w[F]||v++;return z<=D&&f<=p&&u<=v}function B(a){a||R.va("Assertion failed")}function C(a,b){for(var c=a.Ha,e=0;e<c.length;e+=2)if(c[e]==b)return c[e+1];return null}function L(a,b){for(var c=a.kb,e=0,h=0;h<c.length;h+=3)c[h]==b&&e++;return e}function H(a,b){for(var c=a.kb,e=0,h=0;h<c.length;h+=3)c[h+1]==b&&e++;return e}function I(a,b,c){a=a.kb;for(var e=0,h=0;h<a.length;h+=3)if(a[h]==b){if(e==c)return a[h+1];e++}return-1}function t(a,
b,c){a=a.kb;for(var e=0,h=0;h<a.length;h+=3)if(a[h+1]==b){if(e==c)return a[h];e++}return-1}function N(a,b,c){a=a.kb;for(var e=0;e<a.length;e+=3)if(a[e]==b&&a[e+1]==c)return!0;return!1}function U(a,b,c,e,h,f,g){for(var k=K(b,c,e),d=K(h,f,g),l=0;l<k;l++){for(var n=!1,m=0;m<d;m++)if(a(D(b,c,e,l),D(h,f,g,m))){n=!0;break}if(!n)return!1}return!0}function K(a,b,c){var e=0;a=a.kb;for(var h=0;h<a.length;h+=3)a[h]==b&&a[h+1]==c&&e++;return e}function D(a,b,c,e){a=a.kb;for(var h=0,f=0;f<a.length;f+=3)if(a[f]==
b&&a[f+1]==c){if(h==e)return a[f+2];h++}return null}var R=Object(O.a)(d),V=[-1,-1];r.Jy=-1;r.CV=10;r.Sk=20;r.KV=30;r.create=function(){for(var a=arguments,b=[],c=[],e=0;e<a.length;e++){var h=a[e];switch(h.length){case 2:b.push(h[0],h[1]);break;case 3:c.push(h[0],h[1],h[2]);break;default:R.va("Wrong graph constructor params")}}return{Ha:b,kb:c}};r.clone=function(a,b,c){if(b)for(var e=Array(a.Ha.length),h=0;h<a.Ha.length;h+=2)e[h]=a.Ha[h],e[h+1]=b(a.Ha[h+1]);else e=T.O(a.Ha);if(c)for(b=Array(a.kb.length),
h=0;h<a.kb.length;h+=3)b[h]=a.kb[h],b[h+1]=a.kb[h+1],b[h+2]=c(a.kb[h+2]);else b=T.O(a.kb);return a={Ha:e,kb:b}};r.FW=function(a,b){for(var c=[],e=[],h=0;h<a.length;h++)c.push(a[h][0],a[h][1]);for(h=0;h<b.length;h++)e.push(b[h][0],b[h][1],b[h][2]);return{Ha:c,kb:e}};r.Zh=f;r.mX=k;r.hd=y;r.ng=x;r.Ol=m;r.xi=function(a,b,c,e){N(a,b,c)||R.va("Edge not found");a=a.kb;for(var h=0;h<a.length;h+=3)if(a[h]==b&&a[h+1]==c&&a[h+2][0]==e[0]&&a[h+2][1]==e[1]){a.splice(h,3);break}};r.Ga=function(a,b){if(-1==q(a,
b)){var c=p(a);f(a,c,b);return c}R.va("Non-unique attribute")};r.AS=function(a,b,c,e,h){a=a.kb;for(var f=0;f<a.length;f+=3)a[f]==b&&a[f+1]==c&&a[f+2]==e&&(a[f+2]=h)};r.BD=function(a,b,c,e){c=c||[];e=e||[];for(var h={},k=0;k<a.Ha.length;k+=2){var g=a.Ha[k],d=p(b);f(b,d,a.Ha[k+1]);h[g]=d}for(k=0;k<a.kb.length;k+=3){var d=h[a.kb[k]],l=h[a.kb[k+1]],g=a.kb[k+2];y(b,d,l,g)}for(k=0;k<c.length;k+=3)d=h[c[k]],a=c[k+1],g=c[k+2],y(b,d,a,g);for(k=0;k<e.length;k+=3)c=e[k],l=h[e[k+1]],g=e[k+2],y(b,c,l,g)};r.$j=
p;r.nk=q;r.ra=function(a,b,c,e){b=q(a,b);c=q(a,c);-1!=b&&-1!=c?y(a,b,c,e):R.va("Attributes not found")};r.Oa=function(a,b){for(var c=a.Ha,e=0;e<c.length&&!b(c[e],c[e+1]);e+=2);};r.Th=function(a,b){for(var c=a.kb,e=0;e<c.length&&!b(c[e],c[e+1],c[e+2]);e+=3);};r.Lk=function(a,b,c){for(var e=a.kb,h=0;h<e.length;h+=3)if(e[h+1]==b){var f=e[h];if(c(f,C(a,f),e[h+2]))break}};r.bm=function(a,b,c){for(var e=a.kb,h=0;h<e.length;h+=3)if(e[h]==b){var f=e[h+1];if(c(f,C(a,f),e[h+2]))break}};r.eC=b;r.hU=function(a){a=
b(a).Ha;for(var c=[],e=0;e<a.length;e+=2)c.push(a[e+1]);return c};r.BX=function(){};r.Wl=function(a,b,c){k(a,b)||R.va("No such node");var h={};u(a,h);l(a,b,h,c);b=[];for(var f in h)h[f]&&(f=Number(f),b.push(f,C(a,f)));a={Ha:b,kb:a.kb.slice(0)};e(a);return a};r.gz=e;r.cQ=function(a){for(var b=[],c=a.Ha,e=0;e<c.length;e+=2){var h=c[e];H(a,h)||b.push(h)}return b};r.Hr=c;r.match=function(b,c,e,h){var f={};f.Dr=a(b);f.Er=a(c);f.XA=e||function(a,b){return a==b};f.Pu=h||function(a,b){return a==b};h=b.Ha.length/
2;var k=c.Ha.length/2;f.Cl=h;f.bp=k;f.order=0;f.Ri=f.Aw=0;f.Yl=f.Np=f.Op=0;f.Zl=f.Pp=f.Qp=0;f.xq=-1;f.Pj=Array(h);f.Hm=Array(k);f.Zm=Array(h);f.$m=Array(k);f.rn=Array(h);f.sn=Array(k);f.dx=[1];for(e=0;e<h;e++)f.Pj[e]=-1,f.Zm[e]=0,f.rn[e]=0;for(e=0;e<k;e++)f.Hm[e]=-1,f.$m[e]=0,f.sn[e]=0;k=Array(h);h=Array(h);if(ca(k,h,f)){for(e=0;e<k.length;e++)k[e]=b.Ha[2*k[e]],h[e]=c.Ha[2*h[e]];return[k,h]}return null};r.aQ=function(a,b){for(var c=a.Ha,e=1;e<c.length;e+=2)if(c[e]==b)return c[e-1];return null};r.Ib=
C;r.bh=L;r.aj=H;r.Bh=I;r.Ug=t;r.ZW=K;r.td=D;r.replace=function(a,b,c){for(var e=a.kb,h=p(a),k=0;k<b.length;k++){var g=b[k];x(a,g);for(var d=0;d<e.length;d+=3)e[d]==g&&(e[d]=h),e[d+1]==g&&(e[d+1]=h),e[d]==e[d+1]&&(e.splice(d,3),d-=3)}f(a,h,c)};r.rS=function(a,b,c,e,h){N(a,b,c)||R.va("Edge not found");a=a.kb;for(var f=0;f<a.length;f+=3)a[f]==b&&a[f+1]==c&&(a[f]=e,a[f+1]=h)};r.OO=function(a,b){function e(a,b){if(-1!=d.indexOf(a)){var c=d.slice(d.indexOf(a));if(-1!=f[c[c.length-1]].indexOf(c[0])){l.push([a,
c[c.length-1]]);return}}d.push(a);for(c=0;c<b.length;c++)b[c]in f&&e(b[c],f[b[c]])}b||(b=c(a)[0]);var h=a.kb;if(h.length&&-1!=h.indexOf(b)){for(var f={},k=0,g=0;g<h.length;g+=3)h[g+1]in f?f[h[g+1]].push(h[g]):f[h[g+1]]=[h[g]],k++;var d=[],l=[];e(b,f[b]);for(g=0;g<l.length;g++)for(var p=k=0;p<h.length;p+=3)l[g][1]==h[p+1]&&l[g][0]==h[p]&&m(a,h[p],h[p+1],k),k++}};r.PE=function(a,b,c){var e=a.Ha;a=a.kb;var h;h="digraph debug {\n    node [shape=box];\n";for(var f=0;f<e.length;f+=2){var g=e[f],k=e[f+1],
k=b?b(g,k):String(g);h+="    ";h+=String(g)+' [label="'+k.replace(/\"/g,'\\"')+'"];\n'}for(f=0;f<a.length;f+=3)b=a[f],e=a[f+1],k=a[f+2],h+="    ",h+=String(b)+" -> "+String(e),c&&(h+=' [label="'+c(b,e,k)+'"]'),h+=";\n";return h+"}"}});t.a=d},function(E,t){var d,O=!1;try{d=window.b4w}catch(f){d=self.b4w,O=!0}if(!d){d={};O?self.b4w=d:window.b4w=d;var T={},G={};d.module=T;d._n_module=G;var r={};d.cleanup=function(f,k){var d=T[f];d&&(d.eo=null);r[k||"__b4w_default"]=null};d.register=function(f,k){T[f]||
(T[f]=k)};d.require=function(f,k){if(!T[f]&&!G[f])throw Error('Module "'+f+'" not found');k=k||"__b4w_default";if(void 0!==G[f])return G[f](k);r[k]||(r[k]=function(f){return function(k){if(!T[k]&&!G[k])throw Error('Module "'+k+'" not found');if(void 0!==G[k])return G[k](f);k=T[k];k.eo||(k.eo={});k.eo[f]||(k.eo[f]={},k(k.eo[f],r[f]));return k.eo[f]}}(k));return r[k](f)};d.module_check=function(f){return void 0!==T[f]||void 0!==G[f]};d.get_namespace=function(f){for(var k in r)if(r[k]==f)return k;return""};
d.worker_listeners=[];d.worker_namespaces=[]}t.a=d},function(E,t,d){E=d(0);var O=d(14),T=d(15),G=d(41),r=d(8),f=d(19),k=d(1),y=d(10),x=d(13),m=d(6),p=d(2),q=d(3),b=d(7),u=d(9);d=Object(E.a)("camera",function(h,d){function e(a,b){if(!l.is_camera(a))return v.error("get_view_vector(): Wrong camera object"),null;b=b||new Float32Array(3);var c=m.g(a.ka.na);p._33(c,p.c,b);return b}var c=Object(O.a)(h),a=Object(T.a)(h),l=Object(r.a)(h),t=Object(f.a)(h),v=Object(k.a)(h),B=Object(y.a)(h),C=Object(x.a)(h),
L=new Float32Array(2),H=new Float32Array(3),I=new Float32Array(3),da=new Float32Array(4),N=u.create(),U={},K={};d.MS_STATIC=c.MS_STATIC;d.MS_TARGET_CONTROLS=c.MS_TARGET_CONTROLS;d.MS_EYE_CONTROLS=c.MS_EYE_CONTROLS;d.MS_HOVER_CONTROLS=c.MS_HOVER_CONTROLS;d.static_setup=function(a,b){if(l.is_camera(a)){c.wt(a);a.ka.cc=c.MS_STATIC;if(b){var e=b.pos||m.j(a.ka.na);b.look_at?c.NH(a,e,b.look_at):C.set_translation(a,e)}C.Ea(a);t.sync_transform(a);c.Po(a)}else v.error("static_setup(): Wrong camera object")};
d.static_set_look_at=function(a,b,e){c.is_static_camera(a)?(b=b||m.j(a.ka.na),e?c.NH(a,b,e):C.set_translation(a,b),C.Ea(a),t.sync_transform(a)):v.error("static_set_look_at(): Wrong camera object or camera move style")};d.static_set_rotation=function(a,b){c.is_static_camera(a)?(C.set_rotation(a,b),C.Ea(a),t.sync_transform(a)):v.error("static_set_rotation(): Wrong camera object or camera move style")};d.static_get_rotation=function(a,b){if(!c.is_static_camera(a))return v.error("static_get_rotation(): Wrong camera object or camera move style"),
null;b=b||new Float32Array(4);return C.get_rotation(a,b)};d.eye_setup=function(a,b){if(l.is_camera(a))if(b&&b.horiz_rot_lim&&("number"!=typeof b.horiz_rot_lim.left||"number"!=typeof b.horiz_rot_lim.right))v.error("eye_setup(): Wrong horizontal limits object.");else if(b&&b.vert_rot_lim&&("number"!=typeof b.vert_rot_lim.down||"number"!=typeof b.vert_rot_lim.up))v.error("eye_setup(): Wrong vertical limits object.");else{c.wt(a);a.ka.cc=c.MS_EYE_CONTROLS;if(b){var e=b.pos||m.j(a.ka.na);c.UH(a,e,b.look_at,
b.horiz_rot_lim,b.vert_rot_lim)}C.Ea(a);t.sync_transform(a);c.Po(a)}else v.error("eye_setup(): Wrong camera object")};d.eye_set_look_at=function(a,b,e){c.is_eye_camera(a)?(b=b||m.j(a.ka.na),e?c.gT(a,b,e):C.set_translation(a,b),c.correct_up(a,a.ka.od,!0),C.Ea(a),t.sync_transform(a)):v.error("eye_set_look_at(): Wrong camera object or camera move style")};d.eye_rotate=function(a,b,e,h){v.df("eye_rotate","rotate_camera");c.is_eye_camera(a)?d.rotate_camera(a,b,e,h||!1):v.error("eye_rotate(): Wrong camera object or camera move style")};
d.eye_set_vertical_limits=function(a,b){c.is_eye_camera(a)?!b||"number"==typeof b.down&&"number"==typeof b.up?(c.ax(a,b),C.Ea(a),t.sync_transform(a)):v.error("eye_set_vertical_limits(): Incorrect limits object."):v.error("eye_set_vertical_limits(): Wrong camera object or camera move style")};d.eye_get_vertical_limits=function(a,b,e){if(!c.is_eye_camera(a))return v.error("eye_get_vertical_limits(): Wrong camera object or camera move style"),null;a=a.ka;return a.Fb?(b=b||{},e?(b.down=a.Fb.zo,b.up=a.Fb.Up):
(b.down=a.Fb.down,b.up=a.Fb.up),b.camera_space=e||!1,b):null};d.eye_set_horizontal_limits=function(a,b){c.is_eye_camera(a)?!b||"number"==typeof b.left&&"number"==typeof b.right?(c.$w(a,b),C.Ea(a),t.sync_transform(a)):v.error("eye_set_horizontal_limits(): Incorrect limits object."):v.error("eye_set_horizontal_limits(): Wrong camera object or camera move style")};d.eye_get_horizontal_limits=function(a,b,e){if(!c.is_eye_camera(a))return v.error("eye_get_horizontal_limits(): Wrong camera object or camera move style"),
null;a=a.ka;return a.zc?(b=b||{},e?(b.left=a.zc.Xo,b.right=a.zc.vp):(b.left=a.zc.left,b.right=a.zc.right),b.camera_space=e||!1,b):null};d.target_setup=function(a,b){if(l.is_camera(a))if(!b.horiz_rot_lim||"number"==typeof b.horiz_rot_lim.left&&"number"==typeof b.horiz_rot_lim.right)if(!b.vert_rot_lim||"number"==typeof b.vert_rot_lim.down&&"number"==typeof b.vert_rot_lim.up){if(b.dist_lim){if("number"!=typeof b.dist_lim.min||"number"!=typeof b.dist_lim.max||b.dist_lim.min>b.dist_lim.max){v.error("target_setup(): Wrong distance limits object");
return}b.dist_lim.min=Math.max(b.dist_lim.min,0);b.dist_lim.max=Math.max(b.dist_lim.max,0)}if(b.ms&&("number"!=typeof b.ms.min_y||"number"!=typeof b.ms.max_y||b.ms.min_y>b.ms.max_y))v.error("target_setup(): Wrong pivot limits object");else{c.wt(a);a.ka.cc=c.MS_TARGET_CONTROLS;var h=b.pos||m.j(a.ka.na),f=b.pivot;f||(f=e(a,H),f=q.add(h,f,f));c.WH(a,h,f,b.horiz_rot_lim,b.vert_rot_lim,b.dist_lim,b.ms,b.use_panning||!1);C.Ea(a);t.sync_transform(a);c.Po(a)}}else v.error("target_setup(): Wrong vertical limits object");
else v.error("target_setup(): Wrong horizontal limits object");else v.error("target_setup(): Wrong camera object")};d.target_rotate=function(a,b,e,h){v.df("target_rotate","rotate_camera");c.is_target_camera(a)?d.rotate_camera(a,b,e,h||!1):v.error("target_rotate(): Wrong camera object or camera move style")};d.target_set_trans_pivot=function(a,b,e){c.is_target_camera(a)?(b=b||m.j(a.ka.na),e=e||a.ka.pivot,c.JB(a,b,e),C.Ea(a),t.sync_transform(a)):v.error("target_set_trans_pivot(): Wrong camera object or camera move style")};
d.target_set_pivot_translation=function(a,b){c.is_target_camera(a)?(c.pT(a,b),C.Ea(a),t.sync_transform(a)):v.error("target_set_pivot_translation(): Wrong camera object or camera move style")};d.target_set_distance=function(a,b){if(c.is_target_camera(a)){var e=C.es(a,a.ka.pivot);C.move_local(a,0,0,Math.max(0,b)-e);C.Ea(a);t.sync_transform(a)}else v.error("target_set_distance(): Wrong camera object or camera move style")};d.target_get_distance=function(a){return c.is_target_camera(a)?C.es(a,a.ka.pivot):
(v.error("target_get_distance(): Wrong camera object or camera move style"),0)};d.target_zoom_object=function(a,b){if(c.is_target_camera(a)){var e=C.get_object_center(b,!1,H),h=C.get_object_size(b),f=B.get_active(),f=l.lb(a,f).Sa[0],f=c.vP(f)/2,h=h/Math.sin(f),f=C.es(a,e);c.JB(a,m.j(a.ka.na),e);C.Ea(a);C.move_local(a,0,0,h-f);C.Ea(a);t.sync_transform(a)}else v.error("target_zoom_object(): Wrong camera object or camera move style")};d.target_get_pivot=function(a,b){if(!c.is_target_camera(a))return v.error("target_get_pivot(): Wrong camera object or camera move style"),
null;b=b||new Float32Array(3);q.copy(a.ka.pivot,b);return b};d.target_set_distance_limits=function(a,b){if(c.is_target_camera(a)){if(b){if("number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max){v.error("target_set_distance_limits(): Wrong limits object");return}b.min=Math.max(b.min,0);b.max=Math.max(b.max,0)}c.DH(a,b);C.Ea(a);t.sync_transform(a)}else v.error("target_set_distance_limits(): Wrong camera object or camera move style")};d.target_get_distance_limits=function(a,b){if(!c.is_target_camera(a))return v.error("target_get_distance_limits(): Wrong camera object or camera move style"),
null;var e=a.ka;return e.qc?(b=b||{},b.min=e.qc.min,b.max=e.qc.max,b):null};d.target_set_vertical_limits=function(a,b){c.is_target_camera(a)?!b||"number"==typeof b.down&&"number"==typeof b.up?(c.ax(a,b),C.Ea(a),t.sync_transform(a)):v.error("target_set_vertical_limits(): Wrong limits object"):v.error("target_set_vertical_limits(): Wrong camera object or camera move style")};d.target_get_vertical_limits=function(a,b,e){if(!c.is_target_camera(a))return v.error("target_get_vertical_limits(): Wrong camera object or camera move style"),
null;a=a.ka;return a.Fb?(b=b||{},e?(b.down=a.Fb.zo,b.up=a.Fb.Up):(b.down=a.Fb.down,b.up=a.Fb.up),b.camera_space=e||!1,b):null};d.target_set_horizontal_limits=function(a,b){c.is_target_camera(a)?!b||"number"==typeof b.left&&"number"==typeof b.right?(c.$w(a,b),C.Ea(a),t.sync_transform(a)):v.error("target_set_horizontal_limits(): Wrong limits object"):v.error("target_set_horizontal_limits(): Wrong camera object or camera move style")};d.target_get_horizontal_limits=function(a,b,e){if(!c.is_target_camera(a))return v.error("target_get_horizontal_limits(): Wrong camera object or camera move style"),
null;a=a.ka;return a.zc?(b=b||{},e?(b.left=a.zc.Xo,b.right=a.zc.vp):(b.left=a.zc.left,b.right=a.zc.right),b.camera_space=e||!1,b):null};d.target_set_pivot_limits=function(a,b){c.is_target_camera(a)?b&&("number"!=typeof b.min_z||"number"!=typeof b.max_z||b.min_z>b.max_z)?v.error("target_set_pivot_limits(): Wrong limits object"):(c.PH(a,b),C.Ea(a),t.sync_transform(a)):v.error("target_set_pivot_limits(): Wrong camera object or camera move style")};d.target_get_pivot_limits=function(a,b){if(!c.is_target_camera(a))return v.error("target_get_pivot_limits(): Wrong camera object or camera move style"),
null;var e=a.ka;return e.Ne?(b=b||{},b.min_z=e.Ne.min_z,b.max_z=e.Ne.max_z,b):null};d.target_pan_pivot=function(a,b,e){if(c.is_target_camera(a)){var h=a.ka;h.use_panning&&(H[0]=b,H[1]=-e,H[2]=0,m.w(H,h.na,H),q.add(h.pivot,H,h.pivot),b=m.j(h.na),q.add(b,H,b),C.Ea(a),t.sync_transform(a))}else v.error("target_pan_pivot(): wrong object")};d.target_switch_panning=function(a,b){if(!c.is_target_camera(a))return v.error("target_switch_panning(): Wrong camera object or camera move style"),null;a.ka.use_panning=
b};d.hover_setup_rel=function(a,b){d.hover_setup(a,{pos:b.pos,pivot:b.pivot});var e="undefined"==typeof b.dist_interval?0:Math.max(b.dist_interval,0),h="undefined"==typeof b.angle_interval?0:Math.max(b.angle_interval,0),f="undefined"==typeof b.t?.5:p.M(b.t,0,1),k=d.hover_get_distance_limits(a,U);k.min=Math.max(k.min-f*e,0);k.max+=(1-f)*e;e=d.hover_get_vertical_limits(a,K);e.down=p.M(e.down+f*h,-Math.PI/2,0);e.up=p.M(e.up-(1-f)*h,-Math.PI/2,0);c.hover_set_distance_limits(a,k);c.hover_set_vertical_limits(a,
e);C.Ea(a);t.sync_transform(a);c.Po(a)};d.hover_setup=function(a,b){if(l.is_camera(a)){if(b.dist_lim){if("number"!=typeof b.dist_lim.min||"number"!=typeof b.dist_lim.max||b.dist_lim.min>b.dist_lim.max){v.error("hover_setup(): Wrong distance limits object");return}b.dist_lim.min=Math.max(b.dist_lim.min,0);b.dist_lim.max=Math.max(b.dist_lim.max,0)}if(b.hover_angle_lim&&("number"!=typeof b.hover_angle_lim.down||"number"!=typeof b.hover_angle_lim.up||b.hover_angle_lim.down<b.hover_angle_lim.up))v.error("hover_setup(): Wrong hover angle limits object");
else if(b.horiz_trans_lim&&("number"!=typeof b.horiz_trans_lim.min||"number"!=typeof b.horiz_trans_lim.max||b.horiz_trans_lim.min>b.horiz_trans_lim.max))v.error("hover_setup(): Wrong horizontal translation limits object");else if(b.vert_trans_lim&&("number"!=typeof b.vert_trans_lim.min||"number"!=typeof b.vert_trans_lim.max||b.vert_trans_lim.min>b.vert_trans_lim.max))v.error("hover_setup(): Wrong vertical translation limits object");else{c.wt(a);a.ka.cc=c.MS_HOVER_CONTROLS;var e=b.pos||m.j(a.ka.na);
c.VH(a,e,b.pivot,b.dist_lim,b.hover_angle_lim,b.horiz_trans_lim,b.vert_trans_lim,b.enable_horiz_rot||!1);C.Ea(a);t.sync_transform(a);c.Po(a)}}else v.error("hover_setup(): Wrong camera object")};d.hover_rotate=function(a,b,e,h){v.df("hover_rotate","rotate_camera");c.is_hover_camera(a)?d.rotate_camera(a,b,e,h||!1):v.error("hover_rotate(): Wrong camera object or camera move style")};d.hover_set_pivot_translation=function(a,b){c.is_hover_camera(a)?(c.MH(a,b),C.Ea(a),t.sync_transform(a)):v.error("hover_set_pivot_translation(): Wrong camera object or camera move style")};
d.hover_get_pivot=function(a,b){if(!c.is_hover_camera(a))return v.error("hover_get_pivot(): Wrong camera object or camera move style"),null;b=b||new Float32Array(3);q.copy(a.ka.$c,b);return b};d.hover_get_distance=function(a){return c.is_hover_camera(a)?C.es(a,a.ka.$c):(v.error("hover_get_distance(): Wrong camera object or camera move style"),0)};d.hover_set_vertical_limits=function(a,b){c.is_hover_camera(a)?"number"!=typeof b.down||"number"!=typeof b.up||b.down<b.up?v.error("hover_set_vertical_limits(): Wrong limits object"):
(c.hover_set_vertical_limits(a,b),C.Ea(a),t.sync_transform(a)):v.error("hover_set_vertical_limits(): Wrong camera object or camera move style")};d.hover_get_vertical_limits=function(a,b){if(!c.is_hover_camera(a))return v.error("hover_get_vertical_limits(): Wrong camera object or camera move style"),null;var e=a.ka;b=b||{};b.down=e.Fb.down;b.up=e.Fb.up;return b};d.hover_set_distance_limits=function(a,b){c.is_hover_camera(a)?"number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max?v.error("hover_set_distance_limits(): Wrong limits object"):
(b.min=Math.max(b.min,0),b.max=Math.max(b.max,0),c.hover_set_distance_limits(a,b),C.Ea(a),t.sync_transform(a)):v.error("hover_set_distance_limits(): Wrong camera object or camera move style")};d.hover_get_distance_limits=function(a,b){if(!c.is_hover_camera(a))return v.error("hover_get_distance_limits(): Wrong camera object or camera move style"),null;var e=a.ka;b=b||{};b.min=e.qc.min;b.max=e.qc.max;return b};d.hover_set_vert_trans_limits=function(a,b){c.is_hover_camera(a)?b&&("number"!=typeof b.min||
"number"!=typeof b.max||b.min>b.max)?v.error("hover_set_vert_trans_limits(): Wrong limits object"):(c.SH(a,b),C.Ea(a),t.sync_transform(a)):v.error("hover_set_vert_trans_limits(): Wrong camera object or camera move style")};d.hover_get_vert_trans_limits=function(a,b){if(!c.is_hover_camera(a))return v.error("hover_get_vert_trans_limits(): Wrong camera object or camera move style"),null;var e=a.ka;return e.je?(b=b||{},b.min=e.je.min,b.max=e.je.max,b):null};d.hover_set_horiz_trans_limits=function(a,b){c.is_hover_camera(a)?
b&&("number"!=typeof b.min||"number"!=typeof b.max||b.min>b.max)?v.error("hover_set_horiz_trans_limits(): Wrong limits object"):(c.LH(a,b),C.Ea(a),t.sync_transform(a)):v.error("hover_set_horiz_trans_limits(): Wrong camera object or camera move style")};d.hover_get_horiz_trans_limits=function(a,b){if(!c.is_hover_camera(a))return v.error("hover_get_horiz_trans_limits(): Wrong camera object or camera move style"),null;var e=a.ka;return e.ie?(b=b||{},b.min=e.ie.min,b.max=e.ie.max,b):null};d.hover_switch_horiz_rotation=
function(a,b){if(!c.is_hover_camera(a))return v.error("hover_switch_horiz_rotation(): Wrong camera object or camera move style"),null;a.ka.Wi=b};d.is_static_camera=c.is_static_camera;d.is_target_camera=c.is_target_camera;d.is_eye_camera=c.is_eye_camera;d.is_hover_camera=c.is_hover_camera;d.get_move_style=function(a){return l.is_camera(a)?c.get_move_style(a):(v.error("get_move_style(): Wrong camera object"),null)};d.set_translation=function(a,b){if(l.is_camera(a)){var e=a.ka;if(c.is_target_camera(a)){var h=
m.j(e.na),h=q.subtract(b,h,H);q.add(h,e.pivot,e.pivot)}else c.is_hover_camera(a)&&(h=m.j(e.na),h=q.subtract(b,h,H),q.add(h,e.$c,e.$c));C.set_translation(a,b);C.Ea(a);t.sync_transform(a)}else v.error("set_translation(): Wrong camera object")};d.get_translation=function(a,b){if(!l.is_camera(a))return v.error("get_translation(): Wrong camera object"),null;b=b||new Float32Array(3);return C.get_translation(a,b)};d.rotate_camera=function(a,b,e,h){l.is_camera(a)?(h?c.mT(a,b,e):c.FS(a,b,e),C.Ea(a),t.sync_transform(a)):
v.error("rotate_camera(): Wrong camera object")};d.set_velocities=function(a,b){if(l.is_camera(a)){var c=a.ka;"number"==typeof b.trans&&(c.cq=p.M(b.trans,0,Infinity));"number"==typeof b.rot&&(c.bq=p.M(b.rot,0,Infinity));"number"==typeof b.zoom&&(c.fq=p.M(b.zoom,0,.99))}else v.error("set_velocities(): Wrong camera object")};d.get_velocities=function(a,b){if(!l.is_camera(a))return v.error("get_velocities(): Wrong camera object"),null;var c=a.ka;b=b||{};b.trans=c.cq;b.rot=c.bq;b.zoom=c.fq;return b};
d.is_look_up=function(a){if(!l.is_camera(a))return v.error("is_look_up(): Wrong camera object"),!1;a=m.g(a.ka.na);return 0<=p._33(a,p.c,H)[1]};d.get_camera_angles=function(a,b){if(!l.is_camera(a))return v.error("get_camera_angles(): Wrong camera object"),null;b=b||new Float32Array(2);c.get_camera_angles(a,b);return b};d.get_camera_angles_char=function(a,b){if(!l.is_camera(a))return v.error("get_camera_angles_char(): Wrong camera object"),null;b=b||new Float32Array(2);c.get_camera_angles_char(a,b);
return b};d.get_camera_angles_dir=function(a,b){b=b||new Float32Array(2);var e=q.normalize(a,H),e=p._47(p.c,e,N);p.R(e,!0);c.Sz(e,p.f,b);return b};d.set_stereo_distance=function(a,b){if(l.is_camera(a))for(var e=B.get_active(),e=l.lb(a,e).Sa,h=0;h<e.length;h++){var f=e[h];f.type!=c.gd&&f.type!=c.qd&&f.type!=c.Tf&&f.type!=c.yf||c.oT(f,b,f.rg)}else v.error("set_stereo_distance(): Wrong camera object")};d.get_stereo_distance=function(a){if(!l.is_camera(a))return v.error("get_stereo_distance(): Wrong camera object"),
0;var b=B.get_active();a=l.lb(a,b).Sa;for(b=0;b<a.length;b++){var e=a[b];if(e.type==c.gd||e.type==c.qd)return e.Vl}return 0};d.set_eye_distance=function(a,b){if(l.is_camera(a)){var e=B.get_active(),e=l.lb(a,e).Sa;c.set_eye_distance(e,b)}else v.error("set_eye_distance(): Wrong camera object")};d.get_eye_distance=function(a){if(!l.is_camera(a))return v.error("get_eye_distance(): Wrong camera object"),0;var b=B.get_active();a=l.lb(a,b).Sa;for(b=0;b<a.length;b++){var e=a[b];if(e.type==c.gd||e.type==c.qd||
e.type==c.Tf||e.type==c.yf)return e.rg}return 0};d.set_vertical_axis=function(a,b){l.is_camera(a)?(q.copy(b,a.ka.od),C.Ea(a),t.sync_transform(a)):v.error("set_vertical_axis(): Wrong camera object")};d.get_vertical_axis=function(a,b){if(l.is_camera(a))return b||(b=q.create()),q.copy(a.ka.od,b),b;v.error("get_vertical_axis(): Wrong camera object")};d.translate_view=function(a,b,e){if(l.is_camera(a)){var h=B.get_active();a=l.lb(a,h).Sa;for(h=0;h<a.length;h++){var f=a[h];q.set(-b,-e,0,f.ut.trans);f.ad?
c.QH(f,!1):c.set_projection(f,!1)}}else v.error("translate_view(): Wrong camera object")};d.get_view_vector=e;d.get_fov=function(a){if(!l.is_camera(a))return v.error("get_fov(): Wrong camera object"),0;var b=B.get_active();a=l.lb(a,b).Sa;return c.get_fov(a[0])};d.set_fov=function(a,b){if(l.is_camera(a))for(var e=B.get_active(),e=l.lb(a,e).Sa,h=0;h<e.length;h++){var f=e[h];c.set_fov(f,b);f.ad?c.QH(f,!1):c.set_projection(f,!1)}else v.error("set_fov(): Wrong camera object")};d.set_hmd_fov=function(){v.Pa("set_hmd_fov() deprecated")};
d.correct_up=function(a,b,e){l.is_camera(a)?(b=b||a.ka.od,c.correct_up(a,b,e||!1),C.Ea(a),t.sync_transform(a)):v.error("correct_up(): Wrong camera object")};d.set_ortho_scale=function(a,b){if(l.is_camera(a)&&c.is_ortho_camera(a)){var e=a.ka;if(c.is_target_camera(a)){var h=m.j(e.na),h=q.dist(h,e.pivot);e.rl=b/2*e.ql/h}else c.is_hover_camera(a)?(h=m.j(e.na),h=q.distance(h,e.$c),e.rl=b/2*e.ql/h):(e=B.get_active(),l.lb(a,e).Sa[0].Rc=b/2);c.EU(a)}else v.error("set_ortho_scale(): Wrong camera object")};
d.get_ortho_scale=function(a){if(!l.is_camera(a)||!c.is_ortho_camera(a))return v.error("get_ortho_scale(): Wrong camera object"),0;var b=B.get_active();return 2*l.lb(a,b).Sa[0].Rc};d.is_ortho_camera=function(a){return l.is_camera(a)?c.is_ortho_camera(a):(v.error("is_ortho_camera(): Wrong camera object"),!1)};d.calc_ray=function(b,e,h,f){if(!l.is_camera(b))return v.error("calc_ray(): Wrong camera object"),null;var k=B.get_active(),d=l.lb(b,k).Sa[0];f&&3==f.length?v.Pa('dest parameter in the function "calc_ray" should be type of parametric line.'):
f=f||new Float32Array(6);switch(d.type){case c.pd:case c.Uf:case c.gd:case c.qd:var u=Math.tan(c.jQ(d)/2),A=u*d.Xb,k=H;e=a.Qq(e,h,L,d);k[0]=(2*e[0]/d.width-1)*A;k[1]=(1-2*e[1]/d.height)*u;k[2]=-1;m.w(k,b.ka.na,k);q.normalize(k,k);3==f.length?q.copy(k,f):(b=C.get_translation(b,I),G.R(f,b),G.Q(f,k));return f;case c.We:return k=H,e=a.Qq(e,h,L,d),k[0]=(2*e[0]/d.width-1)*d.top*d.Xb,k[1]=(1-2*e[1]/d.height)*d.top,k[2]=0,m.B(k,b.ka.na,k),q.copy(k,f),b=m.g(b.ka.na,da),q.transformQuat(p.c,b,k),G.Q(f,k),f;
default:return v.error("calc_ray(): Non-compatible camera"),f}};d.project_point=function(a,b,e){if(!l.is_camera(a))return v.error("project_point(): Wrong camera object"),null;e=e||new Float32Array(2);return c.project_point(a,b,e)};d.has_distance_limits=function(a){return(c.is_target_camera(a)||c.is_hover_camera(a))&&null!==a.ka.qc};d.has_vertical_rot_limits=function(a){return(c.is_eye_camera(a)||c.is_target_camera(a)||c.is_hover_camera(a))&&null!==a.ka.Fb};d.has_horizontal_rot_limits=function(a){return(c.is_target_camera(a)||
c.is_eye_camera(a))&&null!==a.ka.zc};d.has_vertical_trans_limits=function(a){return c.is_hover_camera(a)&&null!==a.ka.je};d.has_horizontal_trans_limits=function(a){return c.is_hover_camera(a)&&null!==a.ka.ie};d.get_frustum_planes=function(a,c){if(!l.is_camera(a))return v.error("get_frustum_planes(): Wrong camera object"),null;var e=B.get_active(),e=l.lb(a,e).Sa[0].Um;b.copy(e.left,c.left);b.copy(e.right,c.right);b.copy(e.top,c.top);b.copy(e.bottom,c.bottom);b.copy(e.near,c.near);b.copy(e.far,c.far);
return c};d.set_projection=function(a,b){l.is_camera(a)?c.jT(a,b):v.error("set_projection(): Wrong camera object")}});t.a=d},function(E,t,d){E=d(0);var O=d(32),T=d(5),G=d(43),r=d(4);d(90);var f=d(1),k=d(2),y=d(48),x={parse:function(){}};d=Object(E.a)("__shaders",function(d,p){function m(){return{vg:"",ef:"",ei:[],Jf:[],status:0,Xt:0,Mx:0}}function b(a){var b=m();b.vg=a.vg;b.ef=a.ef;b.ei=k.O(a.ei);b.Jf=k.O(a.Jf);b.status=a.status;b.Xt=a.Xt;b.Mx=a.Mx;return b}function u(a,b,c){var g=a.ei;"string"==
typeof c?(a=h(a,c))&&(c=a[1]):c=String(c);for(a=0;a<g.length;a++)if(g[a][0]==b){g[a][1]=c;break}}function h(a,b){for(var c=a.ei,g=0;g<c.length;g++)if(c[g][0]==b)return c[g];return!1}function l(a,b){var c=a+b;if(!(c in Z)){var g=da(ka.shaders_path,a),e=da(ka.shaders_path,b),g=U(g),e=U(e),h;for(h in e)g[h]=e[h];e=[];for(h in g)e.push([h,g[h]]);Z[c]=e}return Z[c]}function e(a,b,e){g.gl_debug&&(e=c(e),n.error("shader compilation failed:\n"+e+"\n"+ta.getShaderInfoLog(a)+" ("+b+")"))}function c(a){a=a.split("\n");
for(var b=0;b<a.length;b++)a[b]=b+1+" "+a[b];return a=a.join("\n")}function a(a,b){return a+b}function ca(b,c){return(b.split(";").map(function(a){return(a=a.match(c))&&(a[3]?parseInt(a[3],10):1)}).filter(function(a){return a})||[]).reduce(a,0)}function t(a,b){var c=I(a.type),g=I(b.type),e=a.ym,h=b.ym;return c>g?-1:c<g?1:e>h?-1:e<h?1:0}function v(a){if(g.Nb){a=a.replace(/(.*?)\([^()]*?\)(.*?)/g,"$1$2");var b=Ia}else b=Ca;a=a.split(";").map(function(a){return(a=a.match(b))&&{type:a[2],ym:a[4]?parseInt(a[4],
10):1}}).filter(function(a){return a});return C(a,X,ea.kw)}function B(a,b,c){a=a.split(";");for(var g=[],e=0;e<a.length;e++){var h=a[e].match(ja);h&&g.push({type:h[2],ym:h[4]?parseInt(h[4],10):1})}return C(g,b,c)}function C(a,b,c){function g(){for(var c=0;l<a.length;){var g=a[l];if(3!=I(g.type))break;c+=H(g.type)*g.ym;l++}k=d+c;if(k>Va)return!1;L(b,d,c,0,3);return!0}function e(){for(var c=Va-k,g=c,e=c;l<a.length;){var h=a[l];if(2!=I(h.type))break;h=H(h.type)*h.ym;if(h<=g)g-=h;else if(h<=e)e-=h;else return!1;
l++}e=c-e;L(b,k,c-g,0,2);L(b,Va-e,e,2,2);return!0}function h(){for(;l<a.length;){for(var g=a[l],g=H(g.type)*g.ym,e=-1,h=c+1,f=-1,k=0;4>k;k++){var d=Ma;d[0]=0;d[1]=1;var n;n=b;for(var m=k,p=g,w=d;Ba<n.length&&15===n[Ba];)Ba++;for(;0<Va&&15===n[Va];)Va--;if(Va-Ba<p)n=!1;else{for(var m=1<<m,z=0,A=-1,u=n.length+1,v=!1,q=Ba;q<=Va;q++)q<Va&&!(n[q]&m)?v||(z=q,v=!0):(v&&(v=q-z,v>=p&&v<u&&(u=v,A=z)),v=!1);0>A?n=!1:(w[0]=A,w[1]=u,n=!0)}n&&d[1]<h&&(f=d[0],h=d[1],e=k)}if(0>e)return!1;L(b,f,g,e,1);l++}return!0}
if(!a.length)return!0;for(var f=0;f<c;f++)b[f]=0;Va=c;a.sort(t);var k=0,d=0,l=0;return function(){for(;l<a.length;){var c=a[l];if(4!=I(c.type))break;d+=H(c.type)*c.ym;l++}if(d>Va)return!1;Ba=d;L(b,0,d,0,4);return!0}()&&g()&&e()&&h()}function L(a,b,c,g,e){for(var h=0,f=0;f<e;f++)h|=1<<g+f;for(f=0;f<c;f++)a[b+f]|=h}function H(a){switch(a){case "mat4":a=4;break;case "mat3":a=3;break;case "mat2":a=2;break;default:a=1}return a}function I(a){switch(a){case "mat4":case "vec4":case "ivec4":case "bvec4":case "mat2":a=
4;break;case "mat3":case "vec3":case "ivec3":case "bvec3":a=3;break;case "vec2":case "ivec2":case "bvec2":a=2;break;default:a=1}return a}function da(a,b){var c=a+b;if(M[c])return M[c];if(E){var g=E[b];if(!g)return null;g=x.parse(g)}else if(g=O.a.require("shader_texts")[b],!g)return null;return M[c]=g}function N(a,b){for(var c={},e=b.ei||[],h=0;h<e.length;h++)c[e[h][0]]=[e[h][1]];for(h=0;h<b.Jf.length;h++)c["USE_NODE_"+b.Jf[h].id]=["1"];g.Nb?(c.GLSL1=["0"],c.GLSL3=["1"],c.GLSL_VERSION=["300 es"],c.GLSL_IN=
["in"],c.GLSL_OUT=["out"],c.GLSL_OUT_FRAG_COLOR=["glsl_out_frag_color"],c.GLSL_TEXTURE=["texture"],c.GLSL_TEXTURE_CUBE=["texture"],c.GLSL_TEXTURE_PROJ=["textureProj"],c.GLSL_TEXTURE_LOD=["textureLod"],c.GLSL_TEXTURE_CUBE_LOD=["textureLod"]):(c.GLSL1=["1"],c.GLSL3=["0"],c.GLSL_VERSION=["100"],c.GLSL_IN="vert"==a?["attribute"]:["varying"],c.GLSL_OUT="vert"==a?["varying"]:[""],c.GLSL_OUT_FRAG_COLOR=["gl_FragColor"],c.GLSL_TEXTURE=["texture2D"],c.GLSL_TEXTURE_CUBE=["textureCube"],c.GLSL_TEXTURE_PROJ=
["texture2DProj"],c.GLSL_TEXTURE_LOD=["textureLod"],g.Nx?(c.GLSL_TEXTURE_LOD=["texture2DLodEXT"],c.GLSL_TEXTURE_CUBE_LOD=["textureCubeLodEXT"]):(c.GLSL_TEXTURE_LOD=["texture2D"],c.GLSL_TEXTURE_CUBE_LOD=["textureCube"]));c.GLSL_SMPLR2D_SHDW=g.Yq&&!g.Ds?["sampler2DShadow"]:["sampler2D"];for(var f in c)c[f][0].constructor!=String&&n.warn("Warning! The value of a directive '"+f+"' is not of type string.");return c}function U(a){function b(a){"var"==a.$?g[a.ba]=a.aa.join(""):"include"==a.$&&(a=da(ka.shaders_path,
ka.ZH+a.oa),c(a,b))}function c(a,b,g){if(a instanceof Array)for(var e=0;e<a.length;e++)c(a[e],b,g);else if(a instanceof Object&&a){b&&b(a);for(e in a)c(a[e],b,g);g&&g(a)}}var g={};c(a,b);return g}function K(a,b,c){function e(b){b=b.da;for(var c=0;c<b.length;c++){var g=b[c];switch(g.$){case "cond":a:for(var g=g.da,m=0;m<g.length;m++){var C=g[m];switch(C.$){case "if":case "elif":if(h(C.ga)){e(C.ha);break a}break;case "else":e(C.ha);break a;case "ifdef":C.ba in u&&e(C.ha);break;case "ifndef":C.ba in
u||e(C.ha)}}break;case "include":g=g.oa;m=da(ka.shaders_path,ka.ZH+g);q.push("include/"+g);e(m);q.pop();break;case "var":break;case "define":u[g.ba]=g.aa;break;case "error":w.va("Shader error: #error "+g.aa.join(" "));break;case "line":break;case "pragma":A.push("#pragma "+g.ba+" "+g.aa.join(" "));break;case "undef":delete u[g.ba];break;case "warning":n.warn("Shader warning: #warning "+g.aa.join(" "));break;case "extension":g=l(g.aa,u,v,!1);A.push("#extension "+g.join(" "));break;case "version":g=
l(g.aa,u,v,!1),A.push("#version "+g.join(" "));case "#":break;case "node":B[g.ba]=g;break;case "nodes_global":g=p;for(m=0;m<g.length;m++){var C=g[m],x=B[C.id];if(x)for(var y=0,K=0;K<x.la.length;K++){var F=x.la[K];if("node_param"==F.$){var H;if("PARTICLE_INFO"==C.id&&F.ea)if(1==u.PARTICLE_BATCH)switch(H=!1,y){case 0:H=z(C.Gb,"PART_INFO_IND")||z(C.Gb,"PART_INFO_AGE")||z(C.Gb,"PART_INFO_LT")||z(C.Gb,"PART_INFO_SIZE");break;case 1:H=z(C.Gb,"PART_INFO_LOC");break;case 2:H=z(C.Gb,"PART_INFO_VEL");break;
case 3:H=z(C.Gb,"PART_INFO_A_VEL");break;case 4:H=z(C.Gb,"PART_INFO_IND")}else H=!1;else H=!0;H&&(F=F.fa.join(" ")+" ","vert"==a?F+=C.vf[y]:"frag"==a&&(F+=C.Ma[y],null!==C.np[y]&&(F+="="+C.np[y])),F+=";",d(k(F)));y++}}}break;case "nodes_main":g=p;for(m=0;m<g.length;m++)if(C=g[m],x=B[C.id]){y={};L=r=D=0;K=x;F=C;H=K;for(var I={},P=0;P<H.ma.length;P++){var J=H.ma[P];I[J.ba]=[J.aa.join("")]}H=I;for(I=0;I<F.Gb.length;I++)P=F.Gb[I][0],P in H&&(H[P]=[F.Gb[I][1]]);for(I=P=0;I<K.la.length;I++)J=K.la[I],"node_out"==
J.$&&(H["USE_OUT_"+J.ba]=[-1<ca.indexOf(F.outputs[P])|0],P++);K=H;F=C;H=x.la;I=y;P=K;for(J=0;J<H.length;J++){var R=H[J];switch(R.$){case "node_in":var M=F.inputs[D];if(null!==F.qA[D]){if(("MATERIAL_BEGIN"==F.id&&3===D||!P.MATERIAL_EXT&&("MATERIAL_BEGIN"==F.id&&4===D||"MATERIAL_END"==F.id&&3===D||"MATERIAL_END"==F.id&&4===D||"MATERIAL_END"==F.id&&5===D)||"TEXTURE_COLOR"==F.id||"TEXTURE_NORMAL"==F.id)&&R.ea){I[R.ba]=F.qA[D];D++;continue}var fa=R.fa.join(" ")+" ",fa=fa+(M+"="+F.qA[D]+";");d(k(fa))}I[R.ba]=
M;D++;break;case "node_out":M=F.outputs[r];if(!R.ea||-1<ca.indexOf(M))fa=R.fa.join(" ")+" ",fa+=M+";",d(k(fa)),I[R.ba]=M;r++;break;case "node_param":"vert"==a?M=F.vf[L]:"frag"==a&&(M=F.Ma[L]),I[R.ba]=M,L++}}A.push("{");f(C,x.ja,y,K);A.push("}")}break;case "txt":d(g.aa);break;default:w.va("Unknown element type: "+g.$)}}}function h(a,b){var c;c=l(a,u,v,!0,b);for(var g=[],e=0;e<c.length;e++)if(c[e]instanceof Object)switch(c[e].$){case "conditional_expr":var h=g.pop(),f=g.pop();g.pop()?g.push(f):g.push(h);
break;case "logical_or_expr":for(var f=g.pop(),k=0;k<c[e].ia-1;k++)h=g.pop(),f=f||h;g.push(f);break;case "logical_and_expr":f=g.pop();for(k=0;k<c[e].ia-1;k++)h=g.pop(),f=f&&h;g.push(f);break;case "logical_bitor_expr":f=g.pop();for(k=0;k<c[e].ia-1;k++)f|=g.pop();g.push(f);break;case "logical_bitxor_expr":f=g.pop();for(k=0;k<c[e].ia-1;k++)f^=g.pop();g.push(f);break;case "logical_bitand_expr":f=g.pop();for(k=0;k<c[e].ia-1;k++)f&=g.pop();g.push(f);break;case "equal_expr":h=g.pop();f=g.pop();g.push(f==
h);break;case "non_equal_expr":h=g.pop();f=g.pop();g.push(f!=h);break;case "le_expr":h=g.pop();f=g.pop();g.push(f<=h);break;case "ge_expr":h=g.pop();f=g.pop();g.push(f>=h);break;case "l_expr":h=g.pop();f=g.pop();g.push(f<h);break;case "g_expr":h=g.pop();f=g.pop();g.push(f>h);break;case "left_shift_expr":f=g.pop();h=g.pop();g.push(f<<h);break;case "right_shift_expr":f=g.pop();h=g.pop();g.push(f>>h);break;case "add_expr":f=g.pop();h=g.pop();g.push(f+h);break;case "sub_expr":f=g.pop();h=g.pop();g.push(f-
h);break;case "mul_expr":f=g.pop();h=g.pop();g.push(f*h);break;case "div_expr":f=g.pop();h=g.pop();g.push(f/h);break;case "mod_expr":f=g.pop();h=g.pop();g.push(f%h);break;case "pre_inc_expr":case "post_inc_expr":h=g.pop();g.push(++h);break;case "pre_dec_expr":case "post_dec_expr":h=g.pop();g.push(--h);break;case "positive_expr":h=g.pop();g.push(+h);break;case "negative_expr":h=g.pop();g.push(-h);break;case "one_compl_expr":h=g.pop();g.push(~h);break;case "logic_negative_expr":h=g.pop();g.push(!h);
break;default:w.va("Unknown operation type: "+c[e].$)}else h=c[e],/^[a-zA-Z_$][a-zA-Z_$0-9]*$/.test(h)?(g.push(0),0!=h.indexOf("USE_NODE_")&&(f=q[q.length-1],f in C||(C[f]=[]),-1==C[f].indexOf(h)&&(C[f].push(h),n.error("Undefined directive '"+h+"' in shader '"+f+"'. Should it be defined with #var/#node_var or #define?")))):g.push(parseFloat(c[e]));1==g.length?c=g[0]:(w.va("Incorrect expression: "+c.join(" ")),c=void 0);return c}function f(a,b,c,g){for(var e=0;e<b.length;e++){var k=b[e];switch(k.$){case "node_cond":a:for(var l=
a,k=k.da,n=c,m=g,p=0;p<k.length;p++){var w=k[p];switch(w.$){case "node_if":case "node_elif":if(h(w.ga,m)){f(l,w.ja,n,m);break a}break;case "node_else":f(l,w.ja,n,m);break a;case "node_ifdef":(w.ba in u||w.ba in m)&&f(l,w.ja,n,m);break;case "node_ifndef":w.ba in u||w.ba in m||f(l,w.ja,n,m)}}break;case "txt":l=[];for(n=0;n<k.aa.length;n++)m=k.aa[n],m in c?l.push(c[m]):l.push(m);d(l,g)}}}function k(a){return a.match(/([\d]+\.[\d]+|[\w]+|[^\s])/g)}function d(b,c){var e=b;if(!g.Nb&&"frag"==a){var h=e.join(" ");
K&&(h.match(/[^;]*;/)?(h=h.replace(/[^;]*;/,""),K=!1):h="");h=h.replace(/GLSL_OUT [^;]*;/g,"");h.match(/GLSL_OUT(?:$| [^;]*)/)&&(h=h.replace(/GLSL_OUT(?:$| [^;]*)/,""),K=!0);h=h.replace(/ {2,}/g," ");(h=h.trim())?e=h.split(" "):e=[]}b=e;b.length&&(e=l(b,u,v,!1,c),A.push(e.join(" ")))}function l(a,b,c,g,e){var h=[];m(a,b,c,g,h,e);return h}function m(a,b,c,g,e,h){for(var f=0;f<a.length;f++){var k=a[f];if(h&&k in h)k=h[k];else if(k in b)k=b[k];else{e.push(k);continue}0==k.length&&g?e.push(0):m(k,b,c,
g,e,h)}}var p=c.Jf,A=[],u=N(a,c),v={},q=[c[a]],C={},B={},ca=[],x;for(x in p)for(var y in p[x].inputs)ca.push(p[x].inputs[y]);var K=!1;e(b);var D=0,r=0,L=0;return A.join("\n")}function D(a,b,c){c=a.createShader(c);a.shaderSource(c,b);a.compileShader(c);return c}function R(a){ta.deleteProgram(a.pj);ta.deleteShader(a.ny);ta.deleteShader(a.ev);delete wa[a.yT]}function V(a,b){!b&&a.length?b=a.length:b||(b=1);switch(b){case 1:return F(a);case 2:return"vec2("+F(a[0])+","+F(a[1])+")";case 3:return"vec3("+
F(a[0])+","+F(a[1])+","+F(a[2])+")";case 4:return"vec4("+F(a[0])+","+F(a[1])+","+F(a[2])+","+F(a[3])+")";case 9:return"mat3("+F(a[0])+","+F(a[1])+","+F(a[2])+","+F(a[3])+","+F(a[4])+","+F(a[5])+","+F(a[6])+","+F(a[7])+","+F(a[8])+")";case 16:return"mat4("+F(a[0])+","+F(a[1])+","+F(a[2])+","+F(a[3])+","+F(a[4])+","+F(a[5])+","+F(a[6])+","+F(a[7])+","+F(a[8])+","+F(a[9])+","+F(a[10])+","+F(a[11])+","+F(a[12])+","+F(a[13])+","+F(a[14])+","+F(a[15])+")";default:w.va("Wrong glsl value dimension")}}function F(a){return a%
1?String(a):String(a)+".0"}function z(a,b){for(var c=0;c<a.length;c++)if(a[c][0]==b)return!0;return!1}var w=Object(T.a)(d),W=Object(G.a)(d),A=Object(r.a)(d),n=Object(f.a)(d),g=A.wa,ea=A.di,ka=A.Kf,wa={},M={},E=null,Z={},aa="anchors.glslf anchors.glslv color_id.glslf color_id.glslv shadow.glslf shadow.glslv error.glslf error.glslv grass_map.glslf grass_map.glslv halo.glslf halo.glslv line.glslf line.glslv main.glslf main.glslv main_stack.glslf particle_system.glslf particle_system_stack.glslf particle_system.glslv proc_skybox.glslf skybox.glslv lens_flares.glslf lens_flares.glslv sky.glslf sky.glslv water.glslf water.glslv tex_skybox.glslf debug_view.glslf debug_view.glslv node_skybox.glslf irradiance_skybox.glslf r_convolution_skybox.glslf postprocessing/antialiasing.glslf postprocessing/bloom_combine.glslf postprocessing/coc.glslf postprocessing/compositing.glslf postprocessing/depth_pack.glslf postprocessing/dof.glslf postprocessing/glow.glslf postprocessing/god_rays.glslf postprocessing/god_rays.glslv postprocessing/god_rays_combine.glslf postprocessing/luminance.glslf postprocessing/luminance_av.glslf postprocessing/luminance_truncated.glslf postprocessing/motion_blur.glslf postprocessing/outline.glslf postprocessing/performance.glslf postprocessing/postprocessing.glslf postprocessing/postprocessing.glslv postprocessing/smaa.glslf postprocessing/smaa.glslv postprocessing/ssao.glslf postprocessing/ssao_blur.glslf postprocessing/stereo.glslf postprocessing/precompute_brdf.glslf include/blending.glslf include/caustics.glslf include/color_util.glslf include/coverage.glslf include/depth_fetch.glslf include/dynamic_grass.glslv include/environment.glslf include/fog.glslf include/fxaa.glslf include/halo_color.glslf include/lighting_nodes.glslf include/math.glslv include/mirror.glslf include/nodes.glslf include/nodes.glslv include/pack.glslf include/particles.glslv include/particles_nodes.glslf include/particles_nodes.glslv include/precision_statement.glslf include/procedural.glslf include/refraction.glslf include/scale_texcoord.glslv include/shadow.glslf include/shadow.glslv include/skin.glslv include/sky_blending.glslf include/std.glsl include/to_world.glslv include/wind_bending.glslv".split(" ");
p.hD=0;p.yJ=1;p.xJ=2;p.BJ=4;p.AJ=8;p.zJ=16;p.vJ=32;var oa=/(?:^|[^a-zA-Z_])uniform.*?(sampler2D|samplerCube)(?=\s)(.*?\[\s*([0-9]*)\s*\])?/,ja=/(?:^|[^a-zA-Z_])(uniform)(?=\s)\s*(float|vec2|vec3|vec4|ivec2|ivec3|ivec4|bvec2|bvec3|bvec4|mat2|mat3|mat4|sampler2D|samplerCube)\s*(.*?\[\s*([0-9]*)\s*\])?/,Ia=/(?:^|[^a-zA-Z_])(in)(?=\s)\s*(float|vec2|vec3|vec4|mat2|mat3|mat4)\s*(.*?\[\s*([0-9]*)\s*\])?/,Ca=/(?:^|[^a-zA-Z_])(varying)(?=\s)\s*(float|vec2|vec3|vec4|mat2|mat3|mat4)\s*(.*?\[\s*([0-9]*)\s*\])?/,
Ja=/(?:\W|^)discard(\W|$)/,Ma=new Int16Array(2),X=null,Q=null,Aa=null,Ba=0,Va=0,Ra=[],ta=null,ha=!1;p.fh=function(a){ta=a};p.FQ=m;p.aN=b;p.Wa=u;p.MP=h;p.ZS=function(a){a.ei=k.O(l(a.vg,a.ef));u(a,"PRECISION",A.wa.precision);"highp"==A.wa.precision?u(a,"EPSILON",V(1E-6)):u(a,"EPSILON",V(1E-4));u(a,"CONSTANTS_HACK",g.LB|0);u(a,"SRGB",g.srgb_type);u(a,"COMPARED_MODE",g.Yq|0)};p.hX=function(a){return a.vg};p.aX=function(a){return a.ef};p.EP=function(a){var h=JSON.stringify(a.vg)+JSON.stringify(a.ef)+JSON.stringify(a.ei)+
JSON.stringify(a.Jf),f=wa[h];if(f)return f;var d=a.ef,l=da(ka.shaders_path,a.vg),d=da(ka.shaders_path,d);if(!l||!d)return null;var l=K("vert",l,a),d=K("frag",d,a),f=0,m=ca(d,oa);a.Mx=m;m>ea.KA&&(f|=1);X||(X=new Uint32Array(ea.kw));Q||(Q=new Uint32Array(ea.GA));Aa||(Aa=new Uint32Array(ea.lw));B(d,Q,ea.GA)||(f|=2);B(l,Aa,ea.lw)||(f|=4);m=g.Nb?(l.replace(/(.*?)\([^()]*?\)(.*?)/g,"$1$2").match(/(?:^|[^a-zA-Z_])in(?=\s)/g)||[]).length:(l.match(/(?:^|[^a-zA-Z_])attribute(?=\s)/g)||[]).length;a.Xt=m;m>ea.LA&&
(f|=8);v(d)||(f|=16);a.status=f;if(0===a.status){var f=ta,p=D(f,l,f.VERTEX_SHADER),w=D(f,d,f.FRAGMENT_SHADER),m=f.createProgram();f.attachShader(m,p);f.attachShader(m,w);f.linkProgram(m);for(var p={ny:p,ev:w,pj:m,attributes:{},dm:{},ls:k.S(),jB:k.S(),kB:{},ep:!0,ww:!1,DI:k.S(),CI:k.S(),Lb:b(a),yT:h,OF:!!d.match(Ja),sh:!0},z=f.getProgramParameter(m,f.ACTIVE_ATTRIBUTES),w=0;w<z;w++){var A=f.getActiveAttrib(m,w).name;p.attributes[A]=f.getAttribLocation(m,A)}z=f.getProgramParameter(m,f.ACTIVE_UNIFORMS);
for(w=0;w<z;w++)A=f.getActiveUniform(m,w).name.split("[0]").join(""),p.dm[A]=f.getUniformLocation(m,A);wa[h]=f=p;m=!ta.getShaderParameter(f.ev,ta.COMPILE_STATUS);p=!ta.getShaderParameter(f.ny,ta.COMPILE_STATUS);w=!ta.getProgramParameter(f.pj,ta.LINK_STATUS);m?e(f.ev,h,d):p?e(f.ny,h,l):w&&(z=f.pj,g.gl_debug&&(l=c(l),d=c(d),n.error("shader linking failed:\n"+l+"\n\n\n"+d+"\n"+ta.getProgramInfoLog(z)+" ("+h+")")));if(m||p||w)a.status|=32,f=null}else f=null;return f};p.mR=function(){ha=!1;if(O.a.module_check("shader_texts"))ha=
!0;else{for(var a=[],b=W.AT_TEXT,c=0;c<aa.length;c++){var g=Object(y.b)(ka.shaders_path+aa[c]);a.push({id:aa[c],type:b,url:g})}b=function(a,b){E||(E={});E[b]=a};a.length?W.enqueue(a,b,function(){ha=!0}):n.error("Shaders have not been found.")}};p.fE=function(){return ha};p.JW=function(){return Ra};p.yF=function(){return wa};p.cleanup=function(){for(var a in wa)R(wa[a]);for(var b in M)delete M[b];for(var c in Ra)delete Ra[c];Aa=Q=X=null;Z={}};p.VM=R;p.KW=function(a){var b=a.ei;n.log("Shader: "+a.vg+
" "+a.ef+", "+String(b.length)+" directives: ");for(a=0;a<b.length;a++)n.log("  "+b[a][0],b[a][1])};p.Fa=V;p.gE=function(a,b){return b in a.dm?!0:!1};p.reset=function(){ta=null}});t.a=d},function(E,t,d){E=d(0);var O=d(4),T=d(44),G=d(28),r=d(1),f=d(22);d=Object(E.a)("__compat",function(k,d){function x(a){return-1<navigator.userAgent.indexOf(a)?!0:!1}function m(){return navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||
navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)}function p(){return!window.ActiveXObject&&"ActiveXObject"in window}var q=Object(O.a)(k),b=Object(T.a)(k),u=Object(G.a)(k),h=Object(r.a)(k),l=Object(f.a)(k),e="R600;RV610;RV630;RV620;RV635;RV670;RS780;RS880;RV770;RV730;RV710;RV740;CEDAR;REDWOOD;JUNIPER;CYPRESS;PALM (Wrestler/Ontario);SUMO (Llano);SUMO2 (Llano);ARUBA (Trinity/Richland);BARTS;TURKS;CAICOS;CAYMAN".split(";");d.bD=256;var c=
q.Xk,a=q.wa,ca=q.Km,y=q.context,v=q.di,B=q.Qa,C=q.xa,L=q.pe;d.CO=function(a){a.getError()==a.INVALID_ENUM&&h.warn("Possible Tegra invalid enum issue detected, ignoring")};d.KH=function(f,k){function r(a){k&&h.warn(a)}v.zR=f.getParameter(f.MAX_COMBINED_TEXTURE_IMAGE_UNITS);v.GA=f.getParameter(f.MAX_FRAGMENT_UNIFORM_VECTORS);v.KA=f.getParameter(f.MAX_TEXTURE_IMAGE_UNITS);v.kw=f.getParameter(f.MAX_VARYING_VECTORS);v.LA=f.getParameter(f.MAX_VERTEX_ATTRIBS);v.KG=f.getParameter(f.MAX_VERTEX_TEXTURE_IMAGE_UNITS);
v.lw=f.getParameter(f.MAX_VERTEX_UNIFORM_VECTORS);v.Yg=f.getParameter(f.MAX_CUBE_MAP_TEXTURE_SIZE);v.HA=f.getParameter(f.MAX_RENDERBUFFER_SIZE);v.Ic=f.getParameter(f.MAX_TEXTURE_SIZE);v.MA=f.getParameter(f.MAX_VIEWPORT_DIMS);var I=u.get_renderer_info();if(I){var H=f.getParameter(I.UNMASKED_VENDOR_WEBGL),K=f.getParameter(I.UNMASKED_RENDERER_WEBGL);-1<H.indexOf("Qualcomm")&&-1<K.indexOf("330")&&(x("Chrome")||x("Firefox"))&&(r("Chrome/Firefox and Qualcomm 330 detected, force enable WebGL 1, disable blending cascaded shadow maps."),
a.Nb=!1,a.iE=!0)}v.wo=a.Nb?24:16;a.Nb&&!ca.enabled&&(a.Yq=!0);a.Nb?(a.Jc=Math.min(a.Jc,f.getParameter(f.MAX_SAMPLES)),x("Firefox")&&(r("Firefox and WebGL 2 detected, applying framebuffer hack."),a.cE=!0),x("Windows")&&x("Chrome")&&(r("Windows, Chrome and WebGL 2 detected, applying multisample hack, disabling MSAA."),a.Jc=1)):a.Jc=1;x("Firefox")&&"NONE"!==a.stereo&&(r("Firefox and Stereo rendering detected, disable texture reusage"),a.fF=!0);if(a.Nb&&b.JR()||x("Firefox"))r("Firefox detected, disabling multisample"),
a.Jc=1;x("Mac OS X")&&x("Chrome/60")&&(r("macOS and Chrome 60 detected, disabling multisample"),a.Jc=1);l.aT();var D=!!u.LP();x("Firefox/28.0")&&(x("Linux")||x("Macintosh"))&&(r("Firefox 28 detected, applying depth hack"),D=!1);x("Windows Phone")||(x("iPad")||x("iPhone")?(r("iOS detected, applying alpha hack, applying vertex animation mix normals hack, disable smaa. Disable ssao for performance. Initialize WebAudio context with empty sound. Applying glow hack."),y.alpha||(a.background_color[3]=1),
a.Mv=!0,a.dJ=!0,a.smaa=!1,a.ssao=!1,a.pA=!0,u.DF()&&L.Pw&&(a.Gm="pvr")):x("Mac OS X")&&x("Safari")&&!x("Chrome")&&(r("OS X / Safari detected, force to wait complete loading. Applying playback rate hack for video textures. Applying canvas alpha hack."),a.yH=!0,B.HD=!0,B.mE=!0));x("Windows")&&(x("Chrome/40")||x("Firefox/33")||x("Firefox/34")||x("Firefox/35")||x("Firefox/36"))&&(r("Windows/Chrome40 or Firefox33-36 detected. Applying clear procedural skydome hack."),a.hz=!0);x("Chrome")&&!m()&&q.aG()&&
(r('Chrome (non-mobile) was detected for a single HTML-exported file. "Background Music" speakers were changed to "Background Sound".'),a.jE=!0);x("Mac OS X")&&(a.hw=!0,r("OS X detected, applying shadows hack"));m()&&(r("Mobile detected, applying various hacks for video textures."),a.is_mobile_device=!0,x("iPad")||x("iPhone")||x("Windows Phone")||(r("Mobile (not iOS) detected, disable playback rate for video textures."),B.VE=!0));x("iPad")&&(r('iPad detected, use "autoplay" hack for video textures.'),
a.YF=!0);(x("Firefox/35.0")||x("Firefox/36.0"))&&x("Windows")&&(r("Windows/Firefox 35/36 detected, applying shadows slink hack"),a.aI=!0);if(x("iPhone")||p())r("iPhone or IE11 detected. Enable sequential video fallback for video textures."),a.Js=!0;10>v.kw&&(r("Not enough varyings, disable shadows on blend objects"),a.Cz=!0);x("Windows Phone")&&(r("Windows Phone detected. Disable debug view mode, glow materials, ssao, smaa, shadows, reflections, refractions."),a.debug_view=!1,a.glow_materials=!1,
a.ssao=!1,a.smaa=!1,a.shadows=!1,a.reflections=!1,a.refractions=!1,a.nH=!1);if(x("UCBrowser")||x("Chrome")&&x("Nexus")&&a.is_mobile_device)r("Mobile Nexus Chrome or UCBrowser detected, disable workers."),C.On=!1;x("Firefox")&&(r("Firefox detected, disabling workers"),C.On=!1);if(p()||x("Edge"))r("IE11 or Edge detected, disabling workers"),C.On=!1;x("Chrome")&&x("Linux")&&(r("Chrome and Linux detected, disabling wasm physics."),C.nt=!1);if(I){H=f.getParameter(I.UNMASKED_VENDOR_WEBGL);K=f.getParameter(I.UNMASKED_RENDERER_WEBGL);
I=/\b4\d{2}\b/;H.indexOf("Intel")&&(-1<K.indexOf("3000")||-1<K.indexOf("2000"))&&(a.tp=!1,r("Intel HD Graphics 2000/3000 detected, disable depth reuse."));x("Chrome")&&-1<K.indexOf("Mali-T720")&&(r('Chrome and ARM Mali-T720 detected, changing "Alpha Anti-Aliasing" materials to "Alpha Clip".'),a.GG=!0);-1<K.indexOf("AMD")&&x("Windows")&&x("Firefox")&&(r("AMD, Windows and Firefox detected, disabling depth textures."),D=!1);-1<H.indexOf("ARM")&&I.test(K)&&(r("ARM Mali-400 series detected, applying lamps, depth and frames blending hacks"),
D=!1,c.jF=!0,a.FG=!0);-1<H.indexOf("ARM")&&-1<K.indexOf("Mali-T604")&&(r("ARM Mali-T604 detected, disabling shadows."),a.shadows=!1);-1<H.indexOf("ARM")&&-1<K.indexOf("Mali-T760")&&(r("ARM Mali-T760 detected, disabling SSAO."),a.ssao=!1,a.hx=!0,a.Nb&&(a.Jc=1,r("ARM Mali-T760 and WebGL 2 detected, switching MSAA samples to 1.")));-1<H.indexOf("ARM")&&-1<K.indexOf("Mali-T720")&&(r("ARM Mali-T720 detected, disabling depth textures."),D=!1,a.Nb&&(a.Jc=1,r("ARM Mali-T720 and WebGL 2 detected, switching MSAA samples to 1.")));
-1<H.indexOf("Qualcomm")&&-1<K.indexOf("Adreno")&&(r("Qualcomm Adreno detected, applying shader constants hack."),a.LB=!0,-1<K.indexOf("420")&&(r("Qualcomm Adreno420 detected, setting max cubemap size to 12288x8192, setting max texture size to 4096x4096."),v.Ic=Math.min(v.Ic,4096),v.Yg=Math.min(v.Yg,4096)),x("Chrome")&&(K.match(/4../)||K.match(/5../))&&(r("Qualcomm Adreno 4xx or 5xx detected, switch MSAA samples to 1."),a.Jc=1));-1<H.indexOf("NVIDIA")&&-1<K.indexOf("Tegra 3")&&(r("NVIDIA Tegra 3 detected, force low quality for B4W_LEVELS_OF_QUALITY nodes."),
a.hF=!0);x("Windows")&&x("Chrome")&&!x("Edge")&&(K.match(/NVIDIA GeForce 8..0/)||K.match(/NVIDIA GeForce 9..0/)||K.match(/NVIDIA GeForce( (G|GT|GTS|GTX))? 2../))&&(r("Chrome / Windows / NVIDIA GeForce 8/9/200 series detected, setting max cubemap size to 768x512, use canvas for resizing."),v.Yg=d.bD,a.Bs=!0);-1<K.indexOf("PowerVR")&&-1<K.indexOf("SGX")&&(r("PowerVR SGX series detected, use canvas for resizing. Disable shadows. Apply skinning hack, disable skin blending between frames."),a.Bs=!0,a.hx=
!0,a.shadows=!1);x("Windows")&&-1<K.indexOf("Direct3D9")&&(r("DirectX 9.0 detected, using canvas for resizing textures/cubemap textures."),a.OE=!0,a.Bs=!0,a.wH=!0);H="";for(I=0;I<e.length;I++)if(-1<K.indexOf(e[I])){H=e[I];break}H&&(r("Architecture "+H+" detected. Blending between frames and shadows on blend objects will be disabled."),a.hx=!0,a.Cz=!0)}0==v.KG&&(r("Vertex textures are not allowed. Disabling vertex textures"),a.Pt=!1);D||(a.Eo=!1,a.sd=!1,a.water_dynamic=!1,a.shore_smoothing=!1,a.xp=
!1,a.smaa=!1,a.ssao=!1,a.Ds=!0);a.TI=!!u.EF()||"pvr"==a.Gm;a.Eu=D;if(f.getShaderPrecisionFormat)var R=f.getShaderPrecisionFormat(f.FRAGMENT_SHADER,f.HIGH_FLOAT);f.getShaderPrecisionFormat&&0!==R.precision||(a.precision="mediump");if(p()&&x("Touch")||x("Edge"))r("IE11 and touchscreen or Edge detected. Behaviour of the mouse move sensor will be changed."),a.Jv=!0;if(p()||x("Edge"))a.UF=!0,a.TF=!0,a.Bs=!0;m()&&x("Firefox")&&(h.log("Mobile firefox detected. Applying autoplay media hack.Setting max cubemap size to 12288x8192, setting max texture size to 4096x4096."),
a.OA=!0,v.Ic=Math.min(v.Ic,4096),v.Yg=Math.min(v.Yg,4096));K=!!u.Rz();a.Ty=K;K=!!u.GF();a.Nx=K;K=!!u.eQ();a.wI=K;K=!!u.gQ();a.dU=K;K=!!u.fQ();a.cU=K;K=!!u.hQ();a.eU=K;K=!!u.CP();a.aE=K;K=!!u.DP();a.IM=K};d.hE=x;d.detect_mobile=m;d.ZL=function(){x("Firefox/35.0")&&x("Windows")&&(h.warn("Windows/Firefox 35 detected, forcing context's alpha"),q.context.alpha=!0)};d.is_ie11=p});t.a=d},function(E,t,d){function O(a,c,e){a=x(a,c||0,e);b.normalize(a,e);return e}function T(a,c,h){h=h||0;var f=x(a,h,L),k=b.length(f),
d=l._49(f[3])*l._49(c[3])||1;b.scale(c,d*k,f);Math.abs(f[3])<e&&(f[3]=0<f[3]?e:-e);m(a,f,h);return a}function G(a,b){return l._49(a[4*(b||0)+3])}function r(a,c,e){e=e||0;var h=x(a,e,L);0>l._49(h[3])*c&&b.scale(h,-1,h);m(a,h,e)}function f(a,c,h){h=h||0;var f=x(a,h,L);b.normalize(f,f);b.scale(f,c,f);Math.abs(f[3])<e&&(f[3]=0<f[3]?f[3]+e:f[3]-e);m(a,f,h)}function k(a,c){var e=x(a,c||0,L);return b.length(e)}function y(b){b=0!==b?b||1:0;for(var c=new Float32Array(4*b),e=0;e<b;e++)c[4*e+3]=a;return c}function x(a,
b,c){c[0]=a[4*b];c[1]=a[4*b+1];c[2]=a[4*b+2];c[3]=a[4*b+3];return c}function m(a,b,c){a[4*c]=b[0];a[4*c+1]=b[1];a[4*c+2]=b[2];a[4*c+3]=b[3];return a}function p(a){return a.length/4}function q(a,c,e){for(var h=p(a),d=0;d<h;d++){var l=G(a,d),m=k(a,d),u=O(a,d,la),u=b.multiply(c,u,la);T(e,u,d);f(e,m,d);r(e,l,d)}}d.d(t,"a",function(){return c});t.d=function(k,d,m){var p=!(!d||!d.length),u=k.length/3;m=m||y(u);for(var q=0;q<u;++q){var x=v;x[0]=k[3*q];x[1]=k[3*q+1];x[2]=k[3*q+2];h.normalize(x,x);if(p){var L=
H;L[0]=d[c*q];L[1]=d[c*q+1];L[2]=d[c*q+2];L[3]=d[c*q+3];h.normalize(L,L);var F=h.cross(L,x,B);h.normalize(F,F);var z=b.rotationTo(l.f,F,ca),w=h.transformQuat(l.e,z,C),w=b.rotationTo(w,x,la),z=b.multiply(w,z,ca);b.normalize(z,z);w=a;F=h.cross(x,F,C);if(Math.abs(F[0]-L[0])>e||Math.abs(F[1]-L[1])>e||Math.abs(F[2]-L[2])>e)w=Math.acos(h.dot(x,L))/Math.PI;T(m,z,q);r(m,l._49(L[3]),q);f(m,w,q)}else z=b.rotationTo(l.e,x,ca),T(m,z,q)}return m};t.b=function(a,b,c,e){if(0!==c){b=4*b||0;c=c||a.length;for(var h=
0,f=0;h<4*c;h+=4,f+=4)e[f]=a[b+h],e[f+1]=a[b+h+1],e[f+2]=a[b+h+2],e[f+3]=a[b+h+3]}};t.h=O;t.o=T;t.g=function(a,b,c){a=O(a,b,ca);return h.transformQuat(l.e,a,c)};t.c=y;t.i=function(b){for(var c=0;c<b.length;c+=4)b[c]=0,b[c+1]=0,b[c+2]=0,b[c+3]=a;return b};t.e=x;t.n=m;t.f=p;t.j=q;t.m=function(a,b,c){b=u.f(b,ca);return q(a,b,c)};t.p=function(a,c,e,h){var d=G(c,0),l=O(a,0,ca),m=O(c,0,la);a=k(a);c=k(c);l=b.slerp(l,m,e,la);b.normalize(l,l);T(h,l,0);f(h,e*(a-c)+c);r(h,d,0);return h};t.k=function(c,e,h){var d=
G(e,0),l=O(c,0,ca),m=O(e,0,la);c=k(c,0);e=k(e,0);l=b.multiply(l,m,ca);T(h,l,0);f(h,c+e-a);r(h,d,0);return h};t.l=function(c,e,h){var d=G(e,0),l=O(c,0,ca),m=O(e,0,la);c=k(c);e=k(e);m=b.invert(m,la);l=b.multiply(l,m,ca);T(h,l,0);f(h,c-e+a);r(h,d,0);return h};var b=d(9),u=d(6),h=d(3);E=d(7);var l=d(2),e=3.1E-5,c=4,a=.5,ca=b.create(),la=b.create(),v=h.create(),B=h.create(),C=h.create(),L=E.create(),H=E.create()},function(E,t,d){E=d(0);var O=d(56),T=d(5),G=d(4),r=d(57),f=d(8),k=d(47),y=d(19),x=d(1),m=
d(9),p=d(10),q=d(23),b=d(11),u=d(18),h=d(13),l=d(6),e=d(2),c=d(3);d=Object(E.a)("__animation",function(a,d){function ca(a,b){var c=a.Xa[b];c&&c.Yu&&c.ur&&(c.ur=!1,c.Yu(a,b))}function v(a,b,c){c=a.Xa[c];c.type=30;var g=b.jb,e=b.Sb-g+1;c.start=g;c.length=e;c.Pg=g;c.Fj=b.name;for(e=g=0;e<a.Jd.length;e++){var h=a.Jd[e];if(h==b)break;else g+=h.Sb-h.jb+1}c.bJ=g}function B(a,b){a.type=50;a.Fj=b.name;a.start=b.jb;a.length=b.Sb-a.start;b.cyclic||(a.length+=b.Wr)}function C(a,b){var c={type:null,Fj:null,Ny:null,
wD:0,uD:null,Nj:new Int8Array(8),tc:null,trans:null,Ij:null,Jj:null,PB:[],play:!1,behavior:20,Pg:0,start:0,length:0,nC:0,qB:0,ur:!1,bJ:null,speed:1,volume:null,pitch:null,color:null,Rg:null,Ce:null,te:null,fog_intensity:null,fog_depth:null,fog_start:null,fog_height:null,Qm:null,TG:[],pi:[],SG:[],oi:[],ip:null};if(!a.Xa.length)for(var g=0;8>g;g++)a.Xa.push(null);a.Xa[b]=c}function L(a){return a.replace(/_B4W_BAKED$/,"")}function H(a,b){return{qn:a,action:b}}function I(a,b,c){if(a.animation_data){var g=
a.animation_data.action;g&&60==g.sa.type&&b.push(H(c,g))}a=a.nodes;for(g=0;g<a.length;g++){var e=a[g];if(e.node_group){var h=e.node_group.node_tree;if(h){var f=c.slice();f.push(e.name);I(h,b,f)}}}}function t(a){return ha.is_mesh(a)&&a.ka.Jd?!0:!1}function N(a,b,c){var g=a.Xa;if(-1==c)for(c=0;8>c;c++){var e=g[c];e&&(e.Pg=b,K(a,0,c,!0))}else if(e=g[c])e.Pg=b,K(a,0,c,!0)}function U(a,b,c){if(-1==b)for(b=0;8>b;b++){var g=a[b];g&&c(g)}else(g=a[b])&&c(g)}function K(a,b,c,e){A(a,b,c,e);ca(a,c);a.ka.Ej&&
(wa(a,b),g(a,b))}function D(a,b,c,g){var e=c.frame_range;if(e[0]>e[1])return xa.warn('Incompatible action "'+c.name+'" has been applied to object "'+a.name+'"'),!1;var h=c.sa,f=a.Xa[g];f.Fj=c.name;f.Ny=e;f.wD=h.gH;f.uD=h.LD;f.Nj.set(h.Nj);f.start=e[0];f.length=e[1]-e[0];f.Pg=e[0];switch(h.type){case 10:if(ha.is_armature(a)){f.type=10;var d=R(a,b,c);d||(d=M(c,a.ka.Mg),V(a,b,c,d));f.trans=d.trans;f.tc=d.tc;f.Ij=d.Ij;f.Jj=d.Jj;F(a,g,c,d)}break;case 40:ha.is_speaker(a)&&(f.volume=h.Ma.volume||null,f.pitch=
h.Ma.pitch||null,f.type=40);break;case 70:ha.is_lamp(a)&&(f.color=h.Ma.color||null,f.Rg=h.Ma.energy||null,f.type=70);break;case 60:if("MESH"==a.type||"WORLD"==a.type){f.type=60;var e=ha.is_world(a),k=[],l=[],n=[],m=[],p=[];c=c.sa;var z=b?b[0]:null;for(d in c.Ma){var A;A=b;var u=d.match(/"(.*?)"/)[1];if(A&&1<A.length){for(var v=A[1],q=2;q<A.length;q++)v=v+"%join%"+A[q];v+="%join%"+u}else v=u;A=v;for(u=0;u<a.Ba.length;u++)for(v=a.Ba[u].Ia,q=0;q<v.length;q++){var C=v[q];if(e||!z||-1!=C.Hc.indexOf(z)){var B=
C.oi,x;x=d;var y=A,ca=c,r=l,L=k,K=C.pi;if(K){for(var D=!1,H=0;H<K.length;H+=3)y==K[H]&&(L.push(4*K[H+1]+K[H+2]),r.push(new Float32Array(ca.Ma[x])),D=!0);x=D}else x=!1;y=d;ca=A;r=c;L=m;K=n;if(B){D=!1;for(H=0;H<B.length;H+=2)ca==B[H]&&(K.push(B[H+1]),L.push(new Float32Array(r.Ma[y])),D=!0);B=D}else B=!1;(x||B)&&p.push(C)}}}f.pi=k;f.TG=l;f.oi=n;f.SG=m;f.ip=p}break;case 20:if(d=h.Ma.tsr)f.type=20,e=R(a,b,c),e||(e=W(c,d),V(a,b,c,e)),f.trans=e.trans,f.tc=e.tc,ga.ZA(a)&&ga.OU(a,f.trans[0],f.tc[0]);else return xa.warn('Incompatible action "'+
c.name+'" has been applied to object "'+a.name+'"'),!1;break;case 80:ha.is_world(a)&&(f.Rg=h.Ma["light_settings.environment_energy"]||null,f.te=h.Ma.horizon_color||null,f.Ce=h.Ma.zenith_color||null,f.fog_intensity=h.Ma["mist_settings.intensity"]||null,f.fog_depth=h.Ma["mist_settings.depth"]||null,f.fog_start=h.Ma["mist_settings.start"]||null,f.fog_height=h.Ma["mist_settings.height"]||null,f.Qm=h.Ma.b4w_fog_color||null,f.type=80)}ha.is_armature(a)&&10!=h.type&&w(a,g);return!0}function R(a,b,c){a=a.ho;
b=b?b.join("%join%"):null;for(var g=0;g<a.length;g+=3)if(c==a[g]&&b==a[g+1])return a[g+2];return null}function V(a,b,c,g){a.ho.push(c,b?b.join("%join%"):null,g)}function F(a,b,c,g){var e=a.ka,h=e.Ap,f=a.Xa[b],d=f.PB,k;a:{k=e.gx;for(var l=0;l<k.length;l+=2)if(c==k[l]){k=k[l+1];break a}k=null}if(k)f.PB=k;else{for(f=0;f<h.length;f++){k=h[f].Oi;for(var l=[],n=[],m=g.trans,p=g.tc,w=0;w<m.length;w++){var A=Z(m[w],p[w],k);l.push(A.trans);n.push(A.tc)}d.push({trans:l,tc:n})}e.gx.push(c,d)}e.Ej&&(c=e.Mi,b>
c[1]?(g=c[1],c[1]=b,c[0]=g):b>c[0]&&b<c[1]&&(c[0]=b),z(a))}function z(a){var b=a.ka.Mi;if(-1!=b[0]&&-1!=b[1]){var c=a.Xa;a=c[b[1]].Pg;var g=Math.floor(a),e=a-g,b=c[b[0]];a=b.Pg;g=Math.floor(a);b.Pg=g+e}}function w(a,b){var c=a.ka.Mi,g=c[1];c[0]=-1;c[1]=-1;if(-1!=b)for(var e=a.Xa;0<=g;g--){var h=e[g];if(h&&10==h.type)if(g>c[1])c[1]=g;else{g>c[0]&&(c[1]=g);break}}}function W(a,b){for(var c=a.sa.YA,g=[],e=[],h=0;h<c;h++)g.push(b.subarray(8*h,8*h+4)),e.push(b.subarray(8*h+4,8*h+8));return{trans:g,tc:e}}
function A(a,b,g,h){if((g=a.Xa[g])&&null!=g.type&&(g.play||h)){var f=a.ka,d=g.Pg,k=g.start,p=g.length,d=d+g.speed*b*ra.he(),w=g.type,z=g.speed;if(0<=z&&d>=k+p||0>z&&d<k)switch(h||(g.ur=!0),g.behavior){case 10:0<=z?d=(d-k)%p+k:d=k+p-1E-6;break;case 20:0<=z?d=k:d=k+p-1E-6;g.play=!1;break;case 30:0<=z?d=k+p-1E-6:d=k,g.play=!1}g.Pg=d;switch(w){case 10:if(!f.Ej){h=n(g);b=h[0];var A=h[1];h=h[2];f.we=g.tc[b];f.pf=g.tc[A];f.Be=g.trans[b];f.uf=g.trans[A];f.ig=h;h=f.Ap;g=g.PB;for(var u=0;u<h.length;u++){var v=
h[u],q=g[u];v.we=q.tc[b];v.pf=q.tc[A];v.Be=q.trans[b];v.uf=q.trans[A];v.ig=f.ig}Fa.Ea(a)}break;case 20:h=n(g);var f=Ga,A=h[0],u=h[1],v=h[2],q=g.trans,C=q[A][1],d=q[A][2],k=q[u][1],p=q[u][2];f[0]=(1-v)*q[A][0]+v*q[u][0];f[1]=(1-v)*C+v*k;f[2]=(1-v)*d+v*p;A=Ua;d=h[0];u=h[1];v=h[2];q=g.tc;C=ya;C[0]=q[d][0];C[1]=q[d][1];C[2]=q[d][2];C[3]=q[d][3];d=bb;d[0]=q[u][0];d[1]=q[u][1];d[2]=q[u][2];d[3]=q[u][3];m.slerp(C,d,v,A);u=h[2];v=g.trans;h=(1-u)*v[h[0]][3]+u*v[h[1]][3];a.parent&&a.Kw&&(u=sa,l.s(f,h,A,u),
l.p(a.Kw,u,u),l.i(u,f),l.f(u,A),h=l.h(u));g.nC&&(u=Sa,Fa.get_translation(a,u),e._53(f,u,b,g.nC,f));g.qB&&(u=ya,Fa.get_rotation(a,u),e._51(A,u,b,g.qB,A));d=g.Nj;d[0]&&Fa.set_translation_rel(a,f);d[1]&&Fa.set_rotation_rel(a,A);d[2]&&Fa.set_scale_rel(a,h);Fa.Ea(a);P.sync_transform(a);break;case 30:h=g.Pg-g.start;0>h&&(h=0);h>=g.length&&(h=g.length);a=Math.floor(h);b=a+1;h-=a;10!=g.behavior&&b==g.length&&(b=--a,h=1);g=g.bJ;Da[0]=a+g;Da[1]=b+g;Da[2]=h;h=Da;f.fy=h[0];f.gy=h[2];break;case 40:h=n(g);b=h[0];
f=h[1];h=h[2];g.volume&&ia.set_volume(a,(1-h)*g.volume[b]+h*g.volume[f]);g.pitch&&ia.playrate(a,(1-h)*g.pitch[b]+h*g.pitch[f]);break;case 50:b=10==g.behavior?(d-k)/ra.he():d/ra.he();ga.rT(a,g.Fj,b);break;case 60:h=n(g);b=h[0];f=h[1];h=h[2];C=g.TG;d=g.pi;A=g.SG;u=g.oi;v=g.ip;for(g=0;g<d.length;g++)for(k=C[g],q=d[g],p=(1-h)*k[b]+h*k[f],k=0;k<v.length;k++)v[k].ri[q]=p;for(g=0;g<u.length;g++)for(C=A[g],q=u[g],C=c.lerp(C.subarray(3*b,3*b+3),C.subarray(3*f,3*f+3),h,Ga),k=0;k<v.length;k++)v[k].Me[3*q]=C[0],
v[k].Me[3*q+1]=C[1],v[k].Me[3*q+2]=C[2];ha.is_world(a)&&pa.Zx(a);break;case 70:h=n(g);b=h[0];f=h[1];h=h[2];d=g.Nj;(p=g.Rg)&&d[0]&&r.d(a.lc,(1-h)*p[b]+h*p[f]);(g=g.color)&&d[1]&&(Ga[0]=(1-h)*g[3*b]+h*g[3*f],Ga[1]=(1-h)*g[3*b+1]+h*g[3*f+1],Ga[2]=(1-h)*g[3*b+2]+h*g[3*f+2],r.b(a.lc,Ga));k=a.Ba;for(g=0;g<k.length;g++)pa.wU(a,k[g].Kb);break;case 80:h=n(g);b=h[0];f=h[1];h=h[2];d=g.Nj;k=a.Ba;z=pa.xc(k[0].Kb,na.ic);p=g.Rg;p=d[0]?(1-h)*p[b]+h*p[f]:z.Rg;w=g.te;d[1]?(Ga[0]=(1-h)*w[3*b]+h*w[3*f],Ga[1]=(1-h)*w[3*
b+1]+h*w[3*f+1],Ga[2]=(1-h)*w[3*b+2]+h*w[3*f+2],w=Ga):w=z.te;var B=g.Ce;d[2]?(Sa[0]=(1-h)*B[3*b]+h*B[3*f],Sa[1]=(1-h)*B[3*b+1]+h*B[3*f+1],Sa[2]=(1-h)*B[3*b+2]+h*B[3*f+2],z=Sa):z=z.Ce;B=g.fog_intensity;d[3]&&(A=(1-h)*B[b]+h*B[f]);B=g.fog_depth;d[4]&&(u=(1-h)*B[b]+h*B[f]);B=g.fog_start;d[5]&&(v=(1-h)*B[b]+h*B[f]);B=g.fog_height;d[6]&&(q=(1-h)*B[b]+h*B[f]);g=g.Qm;d[7]&&(Ua[0]=(1-h)*g[3*b]+h*g[3*f],Ua[1]=(1-h)*g[3*b+1]+h*g[3*f+1],Ua[2]=(1-h)*g[3*b+2]+h*g[3*f+2],C=Ua);for(g=0;g<k.length;g++)b=a.Ba[g].Kb,
(d[0]||d[1]||d[2])&&pa.set_environment_colors(b,p,w,z),d[3]&&pa.GH(b,A),d[4]&&pa.EH(b,u),d[5]&&pa.HH(b,v),d[6]&&pa.FH(b,q),d[7]&&pa.set_fog_color_density(b,C);break;default:Ra.va("Unknown animation type:"+w)}}}function n(a){var b=a.Ny[0],c=a.Ny[1]-b,b=a.Pg-b;0>b&&(b=0);b>=c&&(b=c);b/=a.wD;c=Math.floor(b);a=a.uD[c]?b-c:0;b=Math.ceil(c+a);Da[0]=c;Da[1]=b;Da[2]=a;return Da}function g(a,b){var c=a.ka,g=c.Wf,e=c.Mi,h=e[0],e=e[1];if(-1!=e){if(-1!=h){var f=a.Xa[h];if(f.play||0==b||c.ni){var d=n(f),k=d[0],
l=d[1];c.ig=d[2];var d=f.tc[k],m=f.tc[l],p=f.trans[k],w=f.trans[l]}else g=1}else g=1;e=a.Xa[e];if(e.play||0==b||c.ni){var h=n(e),z=h[0],u=h[1];c.ig=h[2]}else if(-1!=h&&f.play)g=0;else return;var h=e.tc[z],A=e.tc[u],v=e.trans[z],q=e.trans[u];if(1!=g||c.ni)if(0!=g||c.ni){g=c.Mg;if(c.ni&&!c.am&&!c.Ll){c.am=new Float32Array(c.Be.length);c.Ll=new Float32Array(c.we.length);for(var C in g)d=g[C],d.un||ka(c,d)}for(C in g)d=g[C],d.un||ea(c,d,f,e,k,l,z,u)}else c.we.set(d),c.pf.set(m),c.Be.set(p),c.uf.set(w);
else c.we.set(h),c.pf.set(A),c.Be.set(v),c.uf.set(q);Fa.Ea(a);O.f(a)}}function ea(a,b,c,g,h,f,d,k){var n=b.un,p=a.Wf,w=Ua,z=ya,u=Pa,A=La,v=bb,q=Xa,C=za,B=S,x=4*b.Ni,y=g.Ij[d],ca=g.Jj[d],r=g.Ij[k],K=g.Jj[k];if(!a.ni)var F=c.Ij[h],L=c.Jj[h],D=c.Ij[f],H=c.Jj[f];for(var P=0;4>P;P++)z[P]=y[x+P],A[P]=ca[x+P],q[P]=r[x+P],B[P]=K[x+P],a.ni?(w[P]=a.Ll[x+P],u[P]=a.am[x+P],v[P]=a.Ll[x+P],C[P]=a.am[x+P]):(w[P]=F[x+P],u[P]=L[x+P],v[P]=D[x+P],C[P]=H[x+P]);m.slerp(w,z,p,w);e.G(u,A,p,u);l.u(u,sa);l.q(w,sa);n&&l.p(n.Xx,
sa,sa);l.a(sa,b.Xx);l.p(sa,b.qC,sa);l.k(sa,u);l.f(sa,w);m.slerp(v,q,p,v);e.G(C,B,p,C);l.u(C,sa);l.q(v,sa);n&&l.p(n.Wx,sa,sa);l.a(sa,b.Wx);l.p(sa,b.qC,sa);l.k(sa,C);l.f(sa,v);for(P=0;4>P;P++)a.we[x+P]=w[P],a.Be[x+P]=u[P],a.pf[x+P]=v[P],a.uf[x+P]=C[P];b=b.Fu;for(P=0;P<b.length;P++)ea(a,b[P],c,g,h,f,d,k)}function ka(a,b){for(var c=4*b.Ni,g=b.un,h=a.Wf,f=Pa,d=Ua,k=La,n=ya,p=0;4>p;p++)f[p]=a.Be[c+p],d[p]=a.we[c+p],k[p]=a.uf[c+p],n[p]=a.pf[c+p];l.u(f,sa);l.q(d,sa);l.p(sa,b.Ci,sa);l.a(sa,b.Xx);g&&(l.o(g.Xx,
ba),l.p(ba,sa,sa));l.k(sa,f);l.f(sa,d);l.u(k,sa);l.q(n,sa);l.p(sa,b.Ci,sa);l.a(sa,b.Wx);g&&(l.o(g.Wx,ba),l.p(ba,sa,sa));l.k(sa,k);l.f(sa,n);m.slerp(d,n,h,d);e.G(f,k,h,f);for(p=0;4>p;p++)a.Ll[c+p]=d[p],a.am[c+p]=f[p];c=b.Fu;for(p=0;p<c.length;p++)ka(a,c[p])}function wa(a,b){var c=a.ka,g=c.Wf,h=c.jo;if(0!=h){!c.ni||c.am||c.Ll||(g=c.Wf=0);var g=c.io-g,f=h*b;e._49(g)==e._49(h)&&Math.abs(f)<Math.abs(g)?c.Wf+=f:(c.Wf=c.io,c.jo=0,c.Dj&&(c.Dj(),c.Dj=null),c.ni&&(c.am=null,c.Ll=null,c.ni=!1))}}function M(a,
b){for(var c=[],g=[],e=[],h=[],f=a.sa.YA,d=0;d<f;d++){for(var k in b){var n=b[k],m=n.bt,p=a.sa.az[k];p?l.a(p.subarray(8*d,8*d+8),m):l.l(m);n.Vx=!1}n=E(b);c.push(n.trans);g.push(n.tc);e.push(n.Jj);h.push(n.Ij)}return{trans:c,tc:g,Jj:e,Ij:h}}function E(a){var b=[],c=[],g=[],e=[],h=new Float32Array(4),f=new Float32Array(4),d;for(d in a){var k=a[d],n=h,p=f,w=k.lu,z=w[w.length-1],u=z.pC;z.Vx||l.l(u);for(z=w.length-1;0<=z;z--){var A=w[z],v=A.pC;if(A.Vx)u=v;else{var q=A.Ci,C=A.bt;l.o(q,sa);l.p(C,sa,sa);
l.p(q,sa,sa);l.p(u,sa,v);u=v;A.Vx=!0}}w=A.pC;n[0]=w[0];n[1]=w[1];n[2]=w[2];n[3]=w[3];p[0]=w[4];p[1]=w[5];p[2]=w[6];p[3]=w[7];m.normalize(p,p);n=k.Ni;l.p(k.Tp,k.bt,sa);for(k=0;4>k;k++)p=4*n+k,b[p]=h[k],c[p]=f[k],g[p]=sa[k],e[p]=sa[k+4]}return{trans:b,tc:c,Jj:g,Ij:e}}function Z(a,b,c){var g=[],e=[],h;for(h in c)for(var f=c[h],d=f.Ni,f=f.Az,k=0;4>k;k++){var l=4*f+k,n=4*d+k;g[l]=a[n];e[l]=b[n]}g=new Float32Array(g);e=new Float32Array(e);return{trans:g,tc:e}}function aa(a){var b=a.sa,c;if(b.az)c=10;else if(b.Ma)if("volume"in
b.Ma||"pitch"in b.Ma)c=40;else{var g;a:{if(g=a.sa.Ma)for(var e in g)if(-1!=e.indexOf("nodes")){g=!0;break a}g=!1}if(g)c=60;else{var h;a:{if(a.sa.Ma){g=a.fcurves;for(h in g)if("color"==h&&!g[h][3]){h=!0;break a}if("energy"==h){h=!0;break a}}h=!1}if(h)c=70;else if(h=a.sa.Ma,"light_settings.environment_energy"in h||"horizon_color"in h||"zenith_color"in h||"mist_settings.intensity"in h||"mist_settings.depth"in h||"mist_settings.start"in h||"mist_settings.height"in h||"b4w_fog_color"in h)c=80;else{a:{if(a.sa.Ma)for(c in a=
a.fcurves,a)if("location"==c||"rotation_quaternion"==c||"scale"==c){c=!0;break a}c=!1}c=c?20:0}}}else c=0;b.type=c}function oa(a,b){b[0]=b[1]=b[2]=0;for(var c in a)"location"==c?b[0]=1:"rotation_quaternion"==c?b[1]=1:"scale"==c&&(b[2]=1)}function ja(a,b){b[0]=b[1]=0;for(var c in a)"energy"==c?b[0]=1:"color"==c&&(b[1]=1)}function Ia(a,b){b[0]=b[1]=b[2]=0;b[3]=b[4]=b[5]=0;b[6]=b[7]=0;for(var c in a)"light_settings.environment_energy"==c?b[0]=1:"horizon_color"==c?b[1]=1:"zenith_color"==c?b[2]=1:"mist_settings.intensity"==
c?b[3]=1:"mist_settings.depth"==c?b[4]=1:"mist_settings.start"==c?b[5]=1:"mist_settings.height"==c?b[6]=1:"b4w_fog_color"==c&&(b[7]=1)}function Ca(a,b,c,g,e,h,f){var d=a+(b-a)/2,k=Ja(d,g,e,h,f)-c;return.02>Math.abs(k)?d:0<k?Ca(a,d,c,g,e,h,f):Ca(d,b,c,g,e,h,f)}function Ja(a,b,c,g,e){var h=1-a;return b*h*h*h+3*c*h*h*a+3*g*h*a*a+e*a*a*a}function Ma(a,b){C(a,b);-1==va.indexOf(a)&&va.push(a)}function X(a,b){Fa.Ea(a);P.sync_transform(a);K(a,0,b,!0)}function Q(a,b,c,g){g=g||0;if(ha.is_mesh(a)){var h=Aa(a,
c);if(h)return Ma(a,g),v(a,h,g),X(a,g),!0;if((h=Ba(a,c))&&"EMITTER"==h.Fw){Ma(a,g);b=h.name;c=g;for(var h=a.Ba,f=0;f<h.length;f++)for(var d=h[f].Ia,k=0;k<d.length;k++){var l=d[k].sb;l&&l.name==b&&B(a.Xa[c],l)}X(a,g);return!0}}if(h=e._18("name",c,Ha)||e._18("name",c+"_B4W_BAKED",Ha)){Ma(a,g);if(D(a,b,h,g))return X(a,g),!0;a.Xa[g]=null}xa.error('Unsupported object: "'+a.name+'" or animation name: "'+c+'"');return!1}function Aa(a,b){for(var c=0;c<a.Jd.length;c++){var g=a.Jd[c];if(g.name===b)return g}return null}
function Ba(a,b){for(var c=a.Ba,g=0;g<c.length;g++)for(var e=c[g].Ia,h=0;h<e.length;h++){var f=e[h].sb;if(f&&f.name===b)return f}return null}function Va(a){a=a.modifiers;for(var b=0;b<a.length;b++){var c=a[b];if("ARMATURE"==c.type)return c.object}return null}var Ra=Object(T.a)(a),ta=Object(G.a)(a),ha=Object(f.a)(a),ga=Object(k.a)(a),P=Object(y.a)(a),xa=Object(x.a)(a),pa=Object(p.a)(a),ia=Object(q.a)(a),na=Object(b.a)(a),ra=Object(u.a)(a),Fa=Object(h.a)(a),fa=ta.Xk,Za=ta.di;d.NJ=1E-6;d.OBJ_ANIM_TYPE_NONE=
0;d.OBJ_ANIM_TYPE_ARMATURE=10;d.OBJ_ANIM_TYPE_OBJECT=20;d.OBJ_ANIM_TYPE_VERTEX=30;d.OBJ_ANIM_TYPE_SOUND=40;d.OBJ_ANIM_TYPE_PARTICLES=50;d.OBJ_ANIM_TYPE_MATERIAL=60;d.wK=70;d.vK=80;d.SLOT_0=0;d.SLOT_1=1;d.SLOT_2=2;d.SLOT_3=3;d.SLOT_4=4;d.SLOT_5=5;d.SLOT_6=6;d.SLOT_7=7;d.SLOT_ALL=-1;d.AB_CYCLIC=10;d.AB_FINISH_RESET=20;d.AB_FINISH_STOP=30;var Da=Array(3),Ga=new Float32Array(3),Sa=new Float32Array(3),Pa=new Float32Array(4),La=new Float32Array(4),za=new Float32Array(4),S=new Float32Array(4),Ua=new Float32Array(4),
ya=new Float32Array(4),bb=new Float32Array(4),Xa=new Float32Array(4),sa=l.b(),ba=l.b(),va=[],Ha=[];d.BF=function(){return e._63((Za.lw-50)/4)};d.frame_to_sec=function(a){return a/ra.he()};d.update=function(a){for(var b=0;b<va.length;b++){for(var c=va[b],e=0;8>e;e++)A(c,a,e);c.ka.Ej&&(wa(c,a),g(c,a))}for(b=0;b<va.length;b++)for(c=va[b],e=0;8>e&&c.Xa.length;e++)ca(c,e)};d.uP=function(){return Ha};d.get_anim_names=function(a){var b=[];if(t(a))for(var c=0;c<a.Jd.length;c++)b.push(a.Jd[c].name);for(var g=
[],c=0;c<Ha.length;c++){var e=Ha[c],h=e.sa;20==h.type?g.push(e):60!=e.sa.type||"MESH"!=a.type&&"WORLD"!=a.type?10==h.type&&"ARMATURE"==a.type?g.push(e):40==h.type&&"SPEAKER"==a.type?g.push(e):80==h.type&&"WORLD"==a.type&&g.push(e):g.push(e)}for(c=0;c<g.length;c++)b.push(L(g[c].name));if(ga.ZA(a)&&ga.YG(a))for(a=a.Ba,c=0;c<a.length;c++)for(g=a[c].Ia,e=0;e<g.length;e++)(h=g[e].sb)&&b.push(h.name);return b};d.nI=L;d.get_anim_type=function(a,b){var c=a.Xa[b];return c?c.type:0};d.apply_def=function(a){for(var b=
0,c=a.Ba,g=0;g<c.length;g++)for(var e=c[g].Ia,h=0;h<e.length;h++){var f=e[h].sb;f&&"EMITTER"==f.Fw&&!e[h].yh&&(Ma(a,b),B(a.Xa[b],f),X(a,b),f.cyclic?a.Xa[b].behavior=10:a.Xa[b].behavior=a.vm,b++)}c=a.Lm.slice();for(g=0;g<c.length;g++)h=c[g],e=h.qn,h=h.action,Ma(a,b),D(a,e,h,b)?(X(a,b),a.Xa[b].behavior=a.vm,b++):a.Xa[b]=null;t(a)&&(Ma(a,b),v(a,a.Jd[0],b),X(a,b),a.Xa[b].behavior=a.vm)};d.Sy=function(a){switch(a){case "CYCLIC":return 10;case "FINISH_RESET":return 20;case "FINISH_STOP":return 30;default:Ra.va("Wrong animation behavior")}};
d.yP=function(a){var b=[];a=a.data.materials;for(var c=0;c<a.length;c++){var g=a[c],e=g.ke;e&&I(e,b,[g.name])}return b};d.zP=function(a){var b=[],c=a.node_tree;c&&I(c,b,[a.name]);return b};d.VF=H;d.play=function(a,b,c){U(a.Xa,c,function(a){a.play=!0;b?a.Yu=b:a.Yu=null;a.ur=!1});a.ka.Ej&&z(a)};d.stop=function(a,b){U(a.Xa,b,function(a){a.play=!1;a.Yu=null;a.ur=!1})};d.is_play=function(a,b){var c=a.Xa;if(-1==b)for(var g=0;8>g;g++){if(c[g]&&c[g].play)return!0}else if(c=c[b])return c.play;return!1};d.set_frame=
N;d.set_first_frame=function(a,b){b=b||0;U(a.Xa,b,function(c){N(a,c.start,b)})};d.Tz=function(a,b){var c=a.Xa[b];return c&&c.Pg?c.Pg:0};d.is_cyclic=function(a,b){var c=a.Xa[b];return c&&10==c.behavior};d.set_behavior=function(a,b,c){U(a.Xa,c,function(a){a.behavior=b})};d.get_behavior=function(a,b){var c=a.Xa[b];return c&&c.behavior};d.apply_smoothing=function(a,b,c,g){U(a.Xa,g,function(a){a.nC=b||0;a.qB=c||0})};d.remove_slot_animation=function(a,b){if(-1==b)for(var c=0;8>c;c++)a.Xa[c]=null;else a.Xa[b]=
null;a.ka.Ej&&w(a,b)};d.BU=K;d.$G=function(a){if("ARMATURE"==a.type||a.Vt||"WORLD"==a.type)return!0;for(var b=0;b<a.Lm.length;b++){var c=a.Lm[b].action.sa.type;if(20==c||10==c||40==c&&"SPEAKER"==a.type||70==c&&"LAMP"==a.type||60==c&&"MESH"==a.type)return!0}return ga.ZA(a)&&ga.YG(a)||"MESH"==a.type&&a.Jd.length?!0:!1};d.RD=function(a){if(Va(a))return!0;if(a.fo)for(var b=0;b<a.fo.length;b++){var c=a.fo[b].action.sa.type;if(20==c||60==c&&"MESH"==a.type)return!0}return ga.tM(a)&&ga.sM(a)||"MESH"==a.type&&
a.data.b4w_vertex_anim.length?!0:!1};d.is_animated=function(a){return!!a.Xa.length};d.BQ=function(a,b,c,g,h){if(c=c?e._18("uuid",c,Ha):e._18("name",g,Ha)||e._18("name",g+"_B4W_BAKED",Ha))if(C(a,h),-1==va.indexOf(a)&&va.push(a),g=c.frame_range,g[0]>g[1])xa.warn('Incompatible action "'+c.name+'" has been applied to object "'+a.name+'"');else switch(g=c.sa,g.type){case 10:ha.is_armature(a)&&(g=R(a,b,c),g||(g=M(c,a.ka.Mg),V(a,b,c,g)),F(a,h,c,g));break;case 20:(h=g.Ma.tsr)?(g=R(a,b,c),g||(g=W(c,h),V(a,
b,c,g))):xa.warn('Incompatible action "'+c.name+'" has been applied to object "'+a.name+'"')}};d.zO=function(a,b){for(var c=a.ho,g=[],e=0;e<c.length;e+=3)(60!=c[e].sa.type||null!==c[e+1]&&c[e+1].split("%join%")[0]!=b)&&g.push(c[e],c[e+1],c[e+2]);a.ho=g};d.AM=E;d.UO=Z;d.IL=function(a){function b(a,b){for(var c=0;c<b;c++){var g=a.subarray(8*c+4,8*c+8);m.normalize(g,g)}}function c(a,b){if(-1<a.indexOf("location"))var c=0,g=b;else-1<a.indexOf("rotation_quaternion")?(c=4,g=0==b?3:b-1):-1<a.indexOf("scale")?
(c=3,g=0):(c=0,g=b);return c+g}function g(a,b,c,g,e){if(-1<c.search(h)){a=b;c=c.split('"')[1];var d=f}else 8==e?(c="tsr",d=f):1<e?d=new Float32Array(e):d=0;if(!a[c]){e=a;b=c;if("object"==typeof d&&d.length)for(var k=d.length,l=new Float32Array(g*k),n=0;n<g;n++)for(var m=0;m<k;m++)l[n*k+m]=d[m];else if("number"==typeof d)for(l=new Float32Array(g),n=0;n<g;n++)l[n]=d;else Ra.va("Wrong storage default value");e[b]=l}return a[c]}var h=new RegExp(/pose.bones\[\".+\"\]/g),f=l.b(),d=a.sa={type:0,YA:0,gH:0,
Ma:null,az:null,LD:null,Nj:new Int8Array(8)};d.gH=1/fa.Sm;var k=a.fcurves,n={},p={},w=0,z;for(z in k){var u=k[z],A;for(A in u){var v=u[A],q=v.Fg,v=v.num_channels;w||(w=q.length);for(var v=g(n,p,z,w,v),C=v.length/w,B=c(z,A|0),x=0;x<w;x++)v[x*C+B]=q[x]}}if(e._8(n)){for(var y in n)"tsr"==y&&b(n[y],w);d.Ma=n}if(e._8(p)){for(var ca in p)b(p[ca],w);d.az=p}d.YA=w;d.LD=a.zL;"tsr"in n&&oa(k,d.Nj);("color"in n||"energy"in n)&&ja(k,d.Nj);("light_settings.environment_energy"in n||"horizon_color"in n||"zenith_color"in
n||"mist_settings.intensity"in n||"mist_settings.depth"in n||"mist_settings.start"in n||"mist_settings.height"in n||"b4w_fog_color"in n)&&Ia(k,d.Nj);aa(a);Ha.push(a)};d.xP=function(a,b){return(b-a)*fa.Sm+1};d.aM=function(a,b,c,g,e,h){var f=new Float32Array(2),d=new Float32Array(2),k=new Float32Array(2),l=new Float32Array(2),n=b[1],m=b[2],p=b[a.last_frame_offset+1];a=b[a.last_frame_offset+2];for(var w=0,z=0,u=null;e<=h;e++)if(e<n)for(var A=0;A<fa.Sm;A++)c[w++]=m;else if(e>p)for(A=0;A<fa.Sm;A++)c[w++]=
a;else{var v=b[z],q=3;0===v&&(q+=2);0===u&&(q+=2);var C=2===v?0:1;if(b[z+1]==b[z+q+1])u=v,z+=q;else{A=0;e==b[z+1]&&(C&&(g[w]=1),c[w]=b[z+2],w++,A++);if(e==p)for(;A<fa.Sm;A++)c[w++]=a;else for(f[0]=b[z+1],f[1]=b[z+2],0!==v?(d[0]=0,d[1]=0):0===u?(d[0]=b[z+5],d[1]=b[z+6]):(d[0]=b[z+3],d[1]=b[z+4]),0!==v?(k[0]=0,k[1]=0):(k[0]=b[z+q+3],k[1]=b[z+q+4]),l[0]=b[z+q+1],l[1]=b[z+q+2];A<fa.Sm;A++){var B=e+A/fa.Sm;switch(v){case 0:var x,y,ca,r=f,K=d,F=k,L=l,D=[],H=[];D[0]=r[0]-K[0];D[1]=r[1]-K[1];H[0]=L[0]-F[0];
H[1]=L[1]-F[1];x=L[0]-r[0];ca=Math.abs(D[0]);y=Math.abs(H[0]);ca+y&&ca+y>x&&(x/=ca+y,K[0]=r[0]-x*D[0],K[1]=r[1]-x*D[1],F[0]=L[0]-x*H[0],F[1]=L[1]-x*H[1]);C&&(g[w]=1);c[w]=Ja(Ca(0,1,B,f[0],d[0],k[0],l[0]),f[1],d[1],k[1],l[1]);w++;break;case 1:C&&(g[w]=1);r=f[0];K=f[1];F=(l[1]-K)/(l[0]-r);c[w]=F*B+(K-F*r);w++;break;case 2:C&&(g[w]=1);c[w]=b[z+2];w++;break;default:Ra.va("Unknown keyframe interpolation mode: "+v)}}e+1==b[z+q+1]&&(u=v,z+=q)}}};d.apply=Q;d.YL=function(a,b,c,g){g=g||0;var h=e._18("uuid",
c,Ha);if(h){Ma(a,g);if(D(a,b,h,g)){X(a,g);return}a.Xa[g]=null}xa.error('Unsupported object: "'+a.name+'" or animation uuid: "'+c+'"')};d.cJ=function(a,b){var c=e._18("name",b,Ha)||e._18("name",b+"_B4W_BAKED",Ha);if(c){if(0==c.sa.type)return!1}else if(!(Ba(a,b)||ha.is_mesh(a)&&Aa(a,b)))return!1;return!0};d.get_slot_num_by_anim=function(a,b){for(var c=a.Xa,g=0;g<c.length;g++){var e=c[g];if(e&&L(e.Fj)==L(b))return g}return-1};d.wP=function(a,b){var c=a.Xa[b];return c&&c.Fj?L(c.Fj):null};d.remove=function(a){a.Xa.length=
0;a=va.indexOf(a);-1!=a&&va.splice(a,1)};d.sS=function(a){for(var b=Ha.length-1;0<=b;b--)Ha[b].AL==a&&Ha.splice(b,1)};d.apply_to_first_empty_slot=function(a,b){if(!a.Xa.length)return Q(a,null,b,0)?0:-1;for(var c=0;c<a.Xa.length;c++)if(!a.Xa[c])return Q(a,null,b,c)?c:-1};d.set_skel_mix_factor=function(a,b,c,g){a=a.ka;a.jo=(b-a.Wf)/c;a.io=b;a.Dj&&a.Dj();a.Dj=g};d.mix_from_cur_pos=function(a,b,c,g){a=a.ka;a.Mi[1]=b;a.jo=1/c;a.io=1;a.Dj&&a.Dj();a.Dj=g;a.am=null;a.Ll=null;a.ni=!0};d.set_speed=function(a,
b,c){U(a.Xa,c,function(a){a.speed=b})};d.get_speed=function(a,b){return a.Xa[b].speed};d.get_anim_start_frame=function(a,b){return a.Xa[b].start};d.get_anim_length=function(a,b){return a.Xa[b].length};d.cleanup=function(){va.length=0;Ha.length=0};d.XO=function(a){var b=(a[0]||a[1]||a[2]).Fg.length,c=Ua,g=Ga,h=!!a[0];h||(a[0]={Fg:new Float32Array(b),num_channels:8});var f=!!a[1];f||(a[1]={Fg:new Float32Array(b),num_channels:8});var d=!!a[2];d||(a[2]={Fg:new Float32Array(b),num_channels:8});a[3]={Fg:new Float32Array(b),
num_channels:8};for(var k=0;k<b;k++)g[0]=h?a[0].Fg[k]:0,g[1]=f?a[1].Fg[k]:0,g[2]=d?a[2].Fg[k]:0,e.Y(g,c),a[0].Fg[k]=c[3],a[1].Fg[k]=c[0],a[2].Fg[k]=c[1],a[3].Fg[k]=c[2]};d.wF=Va;d.ET=function(a,b){for(var c=7,g=0,e=0;e<Ha.length;e++){var h=Ha[e];if(h.name==b){g=h.sa.type;break}}0==g&&(Aa(a,b)?g=30:(e=Ba(a,b))&&"EMITTER"==e.Fw&&(g=50));for(e=0;8>e;e++)if(h=a.Xa[e]){if(h.type==g)return e}else e<c&&(c=e);return c}});t.a=d},function(E,t,d){E=d(0);var O=d(35),T=d(15),G=d(4),r=d(21),f=d(1),k=d(6),y=d(9),
x=d(2),m=d(3),p=d(7);d=Object(E.a)("__input",function(d,b){function u(a){var b=Z.detect_mobile();return(20!=a||navigator.getVRDevices||navigator.getVRDisplays||b&&E())&&(10!=a||b&&window.DeviceOrientationEvent)?!0:!1}function h(a,b){if(!u(a))return null;var c={type:a,eh:!1,Lh:[],si:[],kk:[],Ke:[],lk:[],mk:[],Rr:[],nG:[],ek:[],Kk:[],Ik:[],Hk:[],element:b,oj:!0,Oc:[],sw:new Float32Array(2),HR:0,distortion_coefs:new Float32Array(2),chromatic_aberration_coefs:new Float32Array(4),As:null,Vn:null,wj:null,
$d:null,orientation:y.create(),position:m.create(),hi:window.VRFrameData?new VRFrameData:null,SB:k.b(),Yj:new Float32Array(4),Zj:new Float32Array(4),ki:0,Ki:0,Gs:0,lm:0,$i:0,Li:0,Vm:[],ll:[0,0,0,0,0,0,0,0,0,0,0,0],kF:[0,0,0,0,0,0,0,0,0,0,0,0],gv:[]};c.Yj[0]=c.Yj[1]=c.Yj[2]=c.Yj[3]=Math.PI/4;c.Zj[0]=c.Zj[1]=c.Zj[2]=c.Zj[3]=Math.PI/4;30==a||40==a||50==a?(c.eh=!!b,50==a?document.addEventListener("touchstart",function(){}):40==a&&(c.oj=!1)):10==a?c.eh=!0:20==a&&e(c);return c}function l(a,c){10==a||20==
a?c=window:c||(40==a?c=document:c=aa.get_container());for(var g=0;g<ga.length;g++)if(ga[g].type==a&&ga[g].element==c)return ga[g];g=h(a,c);60!=a&&70!=a&&80!=a&&90!=a||g.gv.push(b.GMPD_BUTTON_0,b.GMPD_BUTTON_1,b.GMPD_BUTTON_2,b.GMPD_BUTTON_3,b.GMPD_BUTTON_4,b.GMPD_BUTTON_5,b.GMPD_BUTTON_6,b.GMPD_BUTTON_7,b.GMPD_BUTTON_8,b.GMPD_BUTTON_9,b.GMPD_BUTTON_10,b.GMPD_BUTTON_11,b.GMPD_BUTTON_12,b.GMPD_BUTTON_13,b.GMPD_BUTTON_14,b.GMPD_BUTTON_15,b.GMPD_BUTTON_16,b.GMPD_BUTTON_17,b.GMPD_BUTTON_18,b.GMPD_BUTTON_19,
b.GMPD_BUTTON_20,b.GMPD_BUTTON_21,b.GMPD_BUTTON_22,b.GMPD_BUTTON_23,b.GMPD_BUTTON_24,b.GMPD_BUTTON_25,b.GMPD_AXIS_0,b.GMPD_AXIS_1,b.GMPD_AXIS_2,b.GMPD_AXIS_3,b.GMPD_AXIS_4,b.GMPD_AXIS_5,b.GMPD_AXIS_6,b.GMPD_AXIS_7,b.GMPD_AXIS_8,b.GMPD_AXIS_9,b.GMPD_AXIS_10,b.GMPD_AXIS_11);g&&ga.push(g);return g}function e(b){20==b.type&&(navigator.getVRDisplays?navigator.getVRDisplays().then(function(a){0<a.length&&(b.$d=a[0],b.eh=!0,b.$d.getFrameData(b.hi),b.As&&b.As())},function(){ja.Pa("WebVR displays are not found.");
b.eh=!1}):navigator.getVRDevices?(navigator.getVRDevices().then(function(a){t(b,a);a.length&&(b.eh=!0);b.As&&b.As()},function(){ja.Pa("WebVR devices are not found.");b.eh=!1}),a(b,Ca.webvr)):(c(b),b.eh=!0))}function c(b){var c=Ca.nonwebvr;b.lm=c.lm;b.$i=c.$i;b.Li=c.Li;a(b,c);b.ki=c.ki;b.Ki=c.Ki;b.Gs=c.Gs;q(b)}function a(a,b){a.distortion_coefs[0]=b.distortion_coefs[0];a.distortion_coefs[1]=b.distortion_coefs[1];a.chromatic_aberration_coefs[0]=b.chromatic_aberration_coefs[0];a.chromatic_aberration_coefs[1]=
b.chromatic_aberration_coefs[1];a.chromatic_aberration_coefs[2]=b.chromatic_aberration_coefs[2];a.chromatic_aberration_coefs[3]=b.chromatic_aberration_coefs[3]}function q(a){var b=Math.atan(a.ki/2/a.Gs*Ca.nonwebvr.YE);b&&(a.Yj[0]=a.Zj[0]=Math.min(b,Math.PI/3));b&&(a.Yj[1]=a.Zj[3]=Math.min(b,Math.PI/3));b&&(a.Yj[2]=a.Zj[2]=Math.min(b,Math.PI/3));b&&(a.Yj[3]=a.Zj[1]=Math.min(b,Math.PI/3))}function t(a,b){var c=b.filter(function(a){return a instanceof HMDVRDevice}),g=null;c.length&&(g=c[0]);c=null;g&&
(c=b.filter(function(a){return-1!==a.deviceName.toLowerCase().indexOf("oculus")&&a.hardwareUnitId==g.hardwareUnitId&&a instanceof PositionSensorVRDevice}));a.Vn=g;a.wj=c}function v(a,b,c){switch(a.type){case 20:var g=C(a,0);if(g&1){var e="left"==b?a.Yj:a.Zj;p.copy(e,c)}else if(e=a.$d||a.Vn)e=e.getEyeParameters(b),(e=e.fieldOfView||e.currentFieldOfView)?(c[0]=x.T(e.upDegrees),c[1]=x.T(e.rightDegrees),c[2]=x.T(e.downDegrees),c[3]=x.T(e.leftDegrees)):g&16&&(g=X,"left"==b?r.copy(a.hi.leftProjectionMatrix,
g):r.copy(a.hi.rightProjectionMatrix,g),c[0]=Math.atan(-Ba[1]/Ba[2]),c[1]=Math.atan(-Ba[0]/Ba[2]),c[2]=Math.atan(Ba[1]/Ba[2]),c[3]=Math.atan(Ba[0]/Ba[2]));break;default:ja.error("fov is undefined for device: ",a.type)}return c}function B(a,b,c){switch(a.type){case 20:a.$d&&("left"==b?r.copy(a.hi.leftProjectionMatrix,c):"right"==b?r.copy(a.hi.rightProjectionMatrix,c):ja.error("Unknown type of eye: ",b));break;default:ja.error("Projection matrix is undefined for device: ",a.type)}return c}function C(a,
b){switch(b){case 0:var c=0;navigator.getVRDisplays&&(c|=8,a.hi&&(c|=16));navigator.getVRDevices&&(c=Ia.is_mobile_device?c|4:c|2);return c||1;case 23:var g=a.$d||a.Vn;return g?(c=g.getEyeParameters("left"),g=g.getEyeParameters("right"),a.$d?g.offset[0]-c.offset[0]:g.eyeTranslation.x-c.eyeTranslation.x):a.ki}}function L(a,b){if(a){for(var c=0;c<a.buttons.length;c++)b.Vm[c]=a.buttons[c].value||+a.buttons[c].pressed;if(a.axes)for(c=0;c<a.axes.length;c++)b.ll[c]=a.axes[c];if(c=a.pose){var g=l(20).SB;
c.position&&k.B(c.position,g,b.position);c.orientation&&k.y(c.orientation,g,b.orientation)}}}function H(a){for(var b=0;b<a.Vm;b++)a.Vm[b]=0;for(b=0;b<a.ll.length;b++)a.kF[b]=a.ll[b],a.ll[b]=0;a.position.set(x.m);a.orientation.set(x.k)}function I(a,b){var c=a.indexOf(b);0<=c&&(a[c]=null)}function da(a){return null===a}function N(a,b,c,e){switch(b){case 130:c&&I(a.Lh,c);if(e||a.si.every(da)&&a.Lh.every(da))a.Lh.length=0,a.si.length=0,b=a.Oc.indexOf(141),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("deviceorientation",
K,!1));break;case 140:c&&I(a.si,c);if(e||a.si.every(da)&&a.Lh.every(da))a.Lh.length=0,a.si.length=0,b=a.Oc.indexOf(141),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("deviceorientation",K,!1));break;case 50:c&&I(a.kk,c);if(e||a.kk.every(da))a.kk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("mousedown",F,!1));break;case 40:c&&I(a.Ke,c);if(e||a.Ke.every(da))a.Ke.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("mousemove",R,
!1));break;case 41:c&&I(a.Ke,c);if(e||a.Ke.every(da))a.Ke.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("mousemove",V,!1));break;case 60:c&&I(a.lk,c);if(e||a.lk.every(da))a.lk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("mouseout",z,!1),a.element.removeEventListener("mouseup",w,!1));break;case 70:c&&I(a.mk,c);if(e||a.mk.every(da))a.mk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("wheel",W,!1));
break;case 90:c&&I(a.Rr,c);if(e||a.Rr.every(da))a.Rr.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("keydown",A,!1));break;case 80:c&&I(a.ek,c);if(e||a.ek.every(da))a.ek.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("keyup",n,!1));break;case 100:c&&I(a.Kk,c);if(e||a.Kk.every(da))a.Kk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("touchstart",g,!1));break;case 110:c&&I(a.Ik,c);if(e||a.Ik.every(da))a.Ik.length=
0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("touchmove",ea,!1));break;case 120:if(c&&I(a.Hk,c),e||a.Hk.every(da))a.Hk.length=0,b=a.Oc.indexOf(b),0<=b&&(a.Oc.splice(b,1),a.element.removeEventListener("touchend",ka,!1))}}function U(a,b){x._26(a,x.w,b);if("orientation"in window)var c=x.T(window.orientation);else"orientation"in window.screen?c=x.T(window.screen.orientation.angle):c=0;c=y.setAxisAngle(x.c,c,Aa);y.multiply(b,c,b);return b}function K(a){var b=Ba;null===a.alpha||
null===a.beta||null===a.gamma?b[0]=b[1]=b[2]=0:(b[0]=x.T(a.alpha),b[1]=x.T(a.beta),b[2]=x.T(a.gamma));a=l(10,a.currentTarget);for(var c=0;c<a.si.length;c++){var g=a.si[c];g&&(m.copy(b,Ra),g(Ra))}if(a.Lh.length)for(b=U(b,Q),c=0;c<a.Lh.length;c++)if(g=a.Lh[c])y.copy(b,ta),g(ta);for(c=0;c<a.Lh.length;c++)a.Lh[c]||a.Lh.splice(c,1);for(c=0;c<a.si.length;c++)a.si[c]||a.si.splice(c,1)}function D(a,b){switch(a.type){case 30:a.sw[0]=b.clientX,a.sw[1]=b.clientY,a.HR=b.which}}function R(a){if(!ha||!(a.sourceCapabilities&&
a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var b=l(30,a.currentTarget);D(b,a);for(var c=0;c<b.Ke.length;c++){var g=b.Ke[c];g&&(Va[0]=a.clientX,Va[1]=a.clientY,g(Va))}b.oj&&a.preventDefault();for(c=0;c<b.Ke.length;c++)b.Ke[c]||b.Ke.splice(c,1)}}function V(a){if(!ha||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var b=l(30,a.currentTarget);D(b,a);for(var c=0;c<b.Ke.length;c++){var g=b.Ke[c];if(g){if("number"==typeof a.movementX)var e=a.movementX,
h=a.movementY;else"number"==typeof a.webkitMovementX?(e=a.webkitMovementX,h=a.webkitMovementY):"number"==typeof a.mozMovementX?(e=a.mozMovementX,h=a.mozMovementY):h=e=0;Va[0]=e;Va[1]=h;g(Va)}}b.oj&&a.preventDefault();for(c=0;c<b.Ke.length;c++)b.Ke[c]||b.Ke.splice(c,1)}}function F(a){if(!ha||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var b=l(30,a.currentTarget);D(b,a);for(var c=0;c<b.kk.length;c++){var g=b.kk[c];g&&g(a.which)}b.oj&&(window.frameElement&&window.frameElement.focus(),
a.preventDefault());for(c=0;c<b.kk.length;c++)b.kk[c]||b.kk.splice(c,1)}}function z(a){!aa.bG(a.relatedTarget)&&a.which&&w(a)}function w(a){if(!ha||!(a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents||5==a.mozInputSource)){var b=l(30,a.currentTarget);D(b,a);for(var c=0;c<b.lk.length;c++){var g=b.lk[c];g&&g(a.which)}b.oj&&a.preventDefault();for(c=0;c<b.lk.length;c++)b.lk[c]||b.lk.splice(c,1)}}function W(a){for(var b=l(30,a.currentTarget),c=0;c<b.mk.length;c++){var g=b.mk[c];if(g){var e;e=
a;var h=0;e.wheelDelta?e.wheelDelta%120?h=x._49(e.wheelDelta):h=e.wheelDelta/120:e.deltaY&&(h=e.deltaY%3?-x._49(e.deltaY):-e.deltaY/3);e=x.M(100*h,-2E3,2E3);g(e)}}b.oj&&a.preventDefault();for(c=0;c<b.mk.length;c++)b.mk[c]||b.mk.splice(c,1)}function A(a){for(var b=l(40,a.currentTarget),c=a.ctrlKey||a.altKey||a.metaKey?b.nG:b.Rr,g=0;g<c.length;g++){var e=c[g];e?e(a.keyCode):c.splice(g--,1)}b.oj&&a.preventDefault()}function n(a){for(var b=l(40,a.currentTarget),c=0;c<b.ek.length;c++){var g=b.ek[c];g&&
g(a.keyCode)}b.oj&&a.preventDefault();for(c=0;c<b.ek.length;c++)b.ek[c]||b.ek.splice(c,1)}function g(a){for(var b=l(50,a.currentTarget),c=0;c<b.Kk.length;c++){var g=b.Kk[c];g&&g(a.targetTouches)}for(c=0;c<b.Kk.length;c++)b.Kk[c]||b.Kk.splice(c,1)}function ea(a){for(var b=l(50,a.currentTarget),c=0;c<b.Ik.length;c++){var g=b.Ik[c];g&&g(a.targetTouches)}b.oj&&a.preventDefault();for(c=0;c<b.Ik.length;c++)b.Ik[c]||b.Ik.splice(c,1)}function ka(a){for(var b=l(50,a.currentTarget),c=0;c<b.Hk.length;c++){var g=
b.Hk[c];g&&g(a.targetTouches)}for(c=0;c<b.Hk.length;c++)b.Hk[c]||b.Hk.splice(c,1)}function wa(a){switch(a){case 0:a=60;break;case 1:a=70;break;case 2:a=80;break;case 3:a=90;break;default:a=60}return a}function M(a){function b(){document.pointerLockElement===c||document.webkitPointerLockElement===c||document.mozPointerLockElement===c?a.value=1:(a.value=0,document.removeEventListener("pointerlockchange",b,!1),document.removeEventListener("webkitpointerlockchange",b,!1),document.removeEventListener("mozpointerlockchange",
b,!1))}var c=a.element;document.addEventListener("pointerlockchange",b,!1);document.addEventListener("webkitpointerlockchange",b,!1);document.addEventListener("mozpointerlockchange",b,!1);var g=c.requestPointerLock||c.webkitRequestPointerLock||c.mozRequestPointerLock;"function"===typeof g&&g.apply(c)}function E(){return window.document.fullscreenEnabled||window.document.mozFullScreenEnabled||window.document.msFullscreenEnabled||window.document.webkitFullscreenEnabled?!0:!1}var Z=Object(O.a)(d),aa=
Object(T.a)(d),oa=Object(G.a)(d),ja=Object(f.a)(d),Ia=oa.wa,Ca=oa.RF,Ja=k.b(),Ma=k.b(),X=r.create();b.DEVICE_GYRO=10;b.DEVICE_HMD=20;b.DEVICE_MOUSE=30;b.DEVICE_KEYBOARD=40;b.DEVICE_TOUCH=50;b.zt=60;b.By=70;b.Cy=80;b.Dy=90;b.HMD_WEBVR_DESKTOP=2;b.HMD_WEBVR_MOBILE=4;b.HMD_NON_WEBVR=1;b.HMD_WEBVR1=8;b.HMD_WEBVR1_1=16;b.HMD_WEBVR_TYPE=0;b.HMD_ORIENTATION_QUAT=10;b.HMD_POSITION=20;b.LC=21;b.MC=22;b.HMD_EYE_DISTANCE=23;b.HMD_DISTORTION=24;b.HMD_BASELINE_DIST=25;b.HMD_SCREEN_LENS_DIST=26;b.HMD_SCREEN_WIDTH=
27;b.HMD_SCREEN_HEIGHT=28;b.HMD_BEVEL_SIZE=29;b.DV=30;b.EV=31;b.MOUSE_LOCATION=40;b.TC=41;b.MOUSE_DOWN_WHICH=50;b.MOUSE_UP_WHICH=60;b.MOUSE_WHEEL=70;b.KEYBOARD_UP=80;b.KEYBOARD_DOWN=90;b.SC=91;b.TOUCH_START=100;b.TOUCH_MOVE=110;b.TOUCH_END=120;b.GYRO_ORIENTATION_QUAT=130;b.GYRO_ORIENTATION_ANGLES=140;b.GMPD_BUTTON_0=300;b.GMPD_BUTTON_1=301;b.GMPD_BUTTON_2=302;b.GMPD_BUTTON_3=303;b.GMPD_BUTTON_4=304;b.GMPD_BUTTON_5=305;b.GMPD_BUTTON_6=306;b.GMPD_BUTTON_7=307;b.GMPD_BUTTON_8=308;b.GMPD_BUTTON_9=309;
b.GMPD_BUTTON_10=310;b.GMPD_BUTTON_11=311;b.GMPD_BUTTON_12=312;b.GMPD_BUTTON_13=313;b.GMPD_BUTTON_14=314;b.GMPD_BUTTON_15=315;b.GMPD_BUTTON_16=316;b.GMPD_BUTTON_17=317;b.GMPD_BUTTON_18=318;b.GMPD_BUTTON_19=319;b.GMPD_BUTTON_20=320;b.GMPD_BUTTON_21=321;b.GMPD_BUTTON_22=322;b.GMPD_BUTTON_23=323;b.GMPD_BUTTON_24=324;b.GMPD_BUTTON_25=325;b.GMPD_TRACKPAD_BUTTON=300;b.GMPD_TRIGGER_BUTTON=301;b.GMPD_GRIPS_BUTTON=302;b.GMPD_MENU_BUTTON=303;b.GMPD_AXIS_0=326;b.GMPD_AXIS_1=327;b.GMPD_AXIS_2=328;b.GMPD_AXIS_3=
329;b.GMPD_AXIS_4=330;b.GMPD_AXIS_5=331;b.GMPD_AXIS_6=332;b.GMPD_AXIS_7=333;b.GMPD_AXIS_8=334;b.GMPD_AXIS_9=335;b.GMPD_AXIS_10=336;b.GMPD_AXIS_11=337;var Q=y.create(),Aa=y.create(),Ba=m.create(),Va=new Float32Array(2),Ra=m.create(),ta=y.create(),ha="ontouchstart"in document.documentElement,ga=[];b.can_use_device=u;b.init=function(){if("HMD"==Ia.stereo||"NONE"==Ia.stereo&&Ia.is_mobile_device){var a=l(20);a&&document.addEventListener("onvrdisplayconnect",function(b){a.$d=b.display;a.eh=!0;a.$d.getFrameData(a.hi)})}};
b.get_device_by_type_element=l;b.CS=e;b.switch_prevent_default=function(a,b){a.oj=b};b.reset_device=function(a){switch(a.type){case 20:if(a.eh)if(a.$d)a.$d.resetPose();else if(a.wj)for(var b=0;b<a.wj.length;b++)a.wj[b].resetSensor();break;default:ja.error("reset_device() is undefined for device: ",a.type)}};b.get_vector_param=function(a,b,c){switch(b){case 10:a:switch(a.type){case 20:m.copy(x.k,c);if(a.$d)c[0]=a.orientation[0],c[1]=a.orientation[1],c[2]=a.orientation[2],c[3]=a.orientation[3];else if(a.wj)for(b=
0;b<a.wj.length;b++){var g=a.wj[b],g=g.getState&&g.getState()||g.getImmediateState&&g.getImmediateState();g.orientation&&(c[0]=g.orientation.x,c[1]=g.orientation.y,c[2]=g.orientation.z,c[3]=g.orientation.w)}a=c;break a;default:ja.error("orientation_quat is undefined for device: ",a.type),a=c}return a;case 20:a:switch(a.type){case 20:m.copy(x.n,c);if(a.$d)c[0]=a.position[0],c[1]=a.position[1],c[2]=a.position[2];else if(a.wj)for(b=0;b<a.wj.length;b++)g=a.wj[b],g=g.getState&&g.getState()||g.getImmediateState&&
g.getImmediateState(),g.position&&(c[0]=g.position.x,c[1]=-g.position.z,c[2]=g.position.y);a=c;break a;default:ja.error("position is undefined for device: ",a.type),a=c}return a;case 21:return v(a,"left",c);case 22:return v(a,"right",c);case 30:return B(a,"left",c);case 31:return B(a,"right",c);case 40:case 41:return c[0]=a.sw[0],c[1]=a.sw[1],c}};b.get_value_param=C;b.set_config=function(a,b,c){switch(a.type){case 20:if(C(a,0)&8)break;switch(b){case 24:a.distortion_coefs[0]=c[0];a.distortion_coefs[1]=
c[1];break;case 23:a.ki=c;q(a);break;case 25:a.Ki=c;q(a);break;case 26:a.Gs=c;q(a);break;case 27:a.lm=c;q(a);break;case 28:a.$i=c;q(a);break;case 29:a.Li=c,q(a)}break;case 60:case 70:case 80:case 90:a.gv[b]=c}};b.VP=function(a,b){var c=b-300;return c<a.Vm.length?a.Vm[a.gv[c]-300]:!1};b.UP=function(a,b){return b-326<a.ll.length?a.ll[a.gv[b-300]-326]:0};b.get_gamepad_position=function(a,b){b.set(a.position);return b};b.get_gamepad_orientation=function(a,b){b.set(a.orientation);return b};b.update=function(){for(var a=
navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<ga.length;b++){var c=ga[b];switch(c.type){case 60:H(c);L(a[0],c);break;case 70:H(c);L(a[1],c);break;case 80:H(c);L(a[2],c);break;case 90:H(c);L(a[3],c);break;case 20:if(c.$d){var g=c.$d;if(c.hi&&g.getFrameData(c.hi)){var e=c.hi.pose,h=x._25(c.hi.leftViewMatrix,Ba);c.ki=2*m.length(h)}else e=g.getPose();e&&(h=y.setAxisAngle(x.d,Math.PI/2,Q),g.stageParameters&&g.stageParameters.sittingToStandingTransform?
(g=k.d(g.stageParameters.sittingToStandingTransform,Ja),k.l(Ma),h=k.q(h,Ma),g=k.p(h,g,c.SB)):(k.l(Ja),g=k.q(h,c.SB)),e.orientation&&k.y(e.orientation,g,c.orientation),e.position&&k.B(e.position,g,c.position))}}}};b.attach_param_cb=function(a,b,c){switch(b){case 130:a.Lh.push(c);b=141;break;case 140:a.si.push(c);b=141;break;case 50:a.kk.push(c);break;case 40:case 41:a.Ke.push(c);break;case 60:a.lk.push(c);break;case 70:a.mk.push(c);break;case 90:a.Rr.push(c);break;case 91:a.nG.push(c);b=90;break;case 80:a.ek.push(c);
break;case 100:a.Kk.push(c);break;case 110:a.Ik.push(c);break;case 120:a.Hk.push(c)}if(-1==a.Oc.indexOf(b)&&(a.Oc.push(b),a.eh))switch(b){case 50:/iPad|iPhone|iPod/.test(navigator.platform)||a.element.addEventListener("mousedown",F,!1);break;case 40:a.element.addEventListener("mousemove",R,!1);break;case 41:a.element.addEventListener("mousemove",V,!1);break;case 60:/iPad|iPhone|iPod/.test(navigator.platform)||(a.element!=window&&a.element.addEventListener("mouseout",z,!1),a.element.addEventListener("mouseup",
w,!1));break;case 70:a.element.addEventListener("wheel",W,!1);break;case 90:a.element.addEventListener("keydown",A,!1);break;case 80:a.element.addEventListener("keyup",n,!1);break;case 100:a.element.addEventListener("touchstart",g,!1);break;case 110:a.element.addEventListener("touchmove",ea,!1);break;case 120:a.element.addEventListener("touchend",ka,!1);break;case 141:a.element.addEventListener("deviceorientation",K,!1)}};b.detach_param_cb=function(a,b,c){N(a,b,c,!1)};b.oQ=U;b.cleanup=function(){for(var a=
0;a<ga.length;a++)for(var b=ga[a],c=0;c<b.Oc.length;c++)N(b,b.Oc[c],null,!0);ga.length=0};b.get_pressed_gmpd_btn=function(a){a=l(wa(a));for(var b=0;b<a.Vm.length;b++)if(a.Vm[b])return b+300;return-1};b.get_moved_gmpd_axis=function(a){a=l(wa(a));for(var b=0;b<a.ll.length;b++)if(a.kF[b]-a.ll[b])return b+326;return-1};b.lv=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<a.length;b++)if(a[b])return b;return 0};b.lQ=function(){var a=
l(20);return a&&a.$d};b.DL=function(a){a.element.addEventListener("mousedown",function(){a.value||M(a)},!1)};b.add_click_listener=function(a,b){Ia.is_mobile_device?a.addEventListener("touchend",b):a.addEventListener("mouseup",b)};b.remove_click_listener=function(a,b){Ia.is_mobile_device?a.removeEventListener("touchend",b):a.removeEventListener("mouseup",b)};b.check_fullscreen=E});t.a=d},function(E,t,d){E=d(0);var O=d(15),T=d(1);d=Object(E.a)("container",function(d,r){var f=Object(O.a)(d),k=Object(T.a)(d);
r.get_canvas=f.get_canvas;r.get_canvas_hud=f.get_canvas_hud;r.get_container=f.get_container;r.insert_to_container=function(d,x){2!=arguments.length?k.error("insert_to_container(): two arguments required"):d&&x&&f.insert_to_container(d,x)};r.set_canvas_offsets=function(d,x){k.Pa("container.set_canvas_offsets() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");return f.set_canvas_offsets(d,x)};r.update_canvas_offsets=function(){k.Pa("container.update_canvas_offsets() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");
f.update_canvas_offsets()};r.client_to_canvas_coords=function(d,k,m){m||(m=new Float32Array(2));return f.client_to_canvas_coords(d,k,m)};r.client_to_element_coords=function(d,k,m,p){p||(p=new Float32Array(2));return f.client_to_element_coords(d,k,m,p)};r.get_coords_target_space=function(d,k,m){m||(m=new Float32Array(2));return f.get_coords_target_space(d,k,m)};r.force_offsets_updating=function(){k.Pa("container.force_offsets_updating() deprecated. Not needed anymore. Use the container.client_to_canvas_coords method.");
f.force_offsets_updating()};r.resize=function(d,k,m){f.resize(d,k,m)};r.resize_to_container=function(d){f.resize_to_container(d||!1)}});t.a=d},function(E,t,d){E=d(0);var O=d(25),T=d(8),G=d(19),r=d(1),f=d(9),k=d(13),y=d(6),x=d(2);d=Object(E.a)("transform",function(d,p){var m=Object(T.a)(d),b=Object(G.a)(d),u=Object(r.a)(d),h=Object(k.a)(d),l=y.b(),e=new Float32Array(3),c=new Float32Array(4);p.set_translation=function(a,c,f,d){m.is_dynamic(a)?(e[0]=c,e[1]=f,e[2]=d,h.set_translation(a,e),h.Ea(a),b.sync_transform(a)):
u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.set_translation_rel=function(a,c,f,d){m.is_dynamic(a)?(e[0]=c,e[1]=f,e[2]=d,h.set_translation_rel(a,e),h.Ea(a),b.sync_transform(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.set_translation_v=function(a,c){m.is_dynamic(a)?(h.set_translation(a,c),h.Ea(a),b.sync_transform(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.set_translation_rel_v=function(a,c){m.is_dynamic(a)?(h.set_translation_rel(a,c),h.Ea(a),b.sync_transform(a)):
u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.set_translation_obj_rel=function(a,c,f,d,k){m.is_dynamic(a)?(e[0]=c,e[1]=f,e[2]=d,c=y.j(k.ka.na),k=y.g(k.ka.na),x._62(e,1,k,c,e),h.set_translation(a,e),h.Ea(a),b.sync_transform(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.get_translation=function(a,b){b||(b=new Float32Array(3));h.get_translation(a,b);return b};p.get_translation_rel=function(a,b){b||(b=new Float32Array(3));h.get_translation_rel(a,b);return b};p.set_rotation=function(a,
e,f,d,k){m.is_dynamic(a)?(c[0]=e,c[1]=f,c[2]=d,c[3]=k,h.set_rotation(a,c),h.Ea(a),b.sync_transform(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.set_rotation_rel=function(a,e,f,d,k){m.is_dynamic(a)?(c[0]=e,c[1]=f,c[2]=d,c[3]=k,h.set_rotation_rel(a,c),h.Ea(a),b.sync_transform(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.set_rotation_v=function(a,c){m.is_dynamic(a)?(h.set_rotation(a,c),h.Ea(a),b.sync_transform(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};
p.set_rotation_rel_v=function(a,c){m.is_dynamic(a)?(h.set_rotation_rel(a,c),h.Ea(a),b.sync_transform(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.get_rotation_rel_v=function(a,b){if(m.is_dynamic(a))return h.get_rotation_rel(a,b),b;u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.get_rotation=function(a,b){b||(b=new Float32Array(4));h.get_rotation(a,b);return b};p.get_rotation_rel=function(a,b){b||(b=new Float32Array(4));h.get_rotation_rel(a,b);return b};p.set_rotation_euler=
function(a,c,f,d){m.is_dynamic(a)?(e[0]=c,e[1]=f,e[2]=d,h.set_rotation_euler(a,e),h.Ea(a),b.sync_transform(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.get_rotation_euler=function(a,b){b||(b=new Float32Array(3));h.get_rotation_euler(a,b);return b};p.get_rotation_euler_rel=function(a,b){b||(b=new Float32Array(3));h.get_rotation_euler_rel(a,b);return b};p.set_rotation_euler_rel=function(a,c,f,d){m.is_dynamic(a)?(e[0]=c,e[1]=f,e[2]=d,h.set_rotation_euler_rel(a,e),h.Ea(a),b.sync_transform(a)):
u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.set_rotation_euler_v=function(a,c){m.is_dynamic(a)?(h.set_rotation_euler(a,c),h.Ea(a),b.sync_transform(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.set_rotation_euler_rel_v=function(a,c){m.is_dynamic(a)?(h.set_rotation_euler_rel(a,c),h.Ea(a),b.sync_transform(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.set_scale=function(a,b){m.is_dynamic(a)?(h.set_scale(a,b),h.Ea(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};
p.set_scale_rel=function(a,b){m.is_dynamic(a)?(h.set_scale_rel(a,b),h.Ea(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.get_scale=function(a){return h.get_scale(a)};p.get_scale_rel=function(a){return h.get_scale_rel(a)};p.empty_reset_transform=function(a){if("EMPTY"!=a.type)u.error("Wrong object: "+a.name);else{for(var c=0;c<a.af.length;c++)if(!m.is_dynamic(a.af[c])){u.error('Wrong object: "'+a.af[c].name+'" is not dynamic.');return}h.set_translation(a,[0,0,0]);h.set_rotation(a,[0,0,
0,1]);h.set_scale(a,1);h.Ea(a);b.sync_transform(a)}};p.get_object_size=function(a){return m.is_mesh(a)?h.get_object_size(a):(u.error("Wrong object: "+a.name),0)};p.get_object_center=function(a,b,c){if(!m.is_mesh(a))return u.error("Wrong object: "+a.name),null;c||(c=new Float32Array(3));return h.get_object_center(a,b,c)};p.move_local=function(a,c,e,f){m.is_dynamic(a)?(h.move_local(a,c,e,f),h.Ea(a),b.sync_transform(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.rotate_x_local=function(a,
e){if(m.is_dynamic(a)){var d=f.setAxisAngle(x.d,e,c);h.AB(a,d);h.Ea(a);b.sync_transform(a)}else u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.rotate_y_local=function(a,e){if(m.is_dynamic(a)){var d=f.setAxisAngle(x.b,e,c);h.AB(a,d);h.Ea(a);b.sync_transform(a)}else u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.rotate_z_local=function(a,e){if(m.is_dynamic(a)){var d=f.setAxisAngle(x.f,e,c);h.AB(a,d);h.Ea(a);b.sync_transform(a)}else u.error('Wrong object: "'+a.name+'" is not dynamic.')};
p.get_object_bounding_box=function(a){return O.n(a.ka.ai)};p.set_tsr=function(a,c){m.is_dynamic(a)?(h.set_tsr(a,c),h.Ea(a),b.sync_transform(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.set_tsr_rel=function(a,c){m.is_dynamic(a)?(h.set_tsr_rel(a,c),h.Ea(a),b.sync_transform(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.get_tsr=function(a,b){b||(b=new Float32Array(8));h.get_tsr(a,b);return b};p.get_tsr_rel=function(a,b){b||(b=new Float32Array(8));h.get_tsr_rel(a,b);return b};
p.distance=function(a,b){return h.distance(a,b)};p.set_matrix=function(a,c){m.is_dynamic(a)?(y.d(c,l),h.set_tsr(a,l),h.Ea(a),b.sync_transform(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.set_matrix_rel=function(a,c){m.is_dynamic(a)?(y.d(c,l),h.set_tsr_rel(a,l),h.Ea(a),b.sync_transform(a)):u.error('Wrong object: "'+a.name+'" is not dynamic.')};p.get_matrix=function(a,b){b||(b=new Float32Array(16));h.get_tsr(a,l);y.v(l,b);return b};p.get_matrix_rel=function(a,b){b||(b=new Float32Array(16));
h.get_tsr_rel(a,l);y.v(l,b);return b}});t.a=d},function(E,t,d){function O(b,f){for(var e=b[1],c=1,a=2;a<b.length;a++)4!=a&&8!=a&&Math.abs(b[a])>Math.abs(e)&&(e=b[a],c=a);for(var h=Math.floor(c/3),c=c%3,e=.5*Math.atan(2*e/(b[3*h+h]-b[3*c+c])),a=0;a<f.length;a++)f[a]=a&&4!=a&&8!=a?0:1;f[c+3*h]=-Math.sin(e);f[h+3*c]=Math.sin(e);f[h+3*h]=Math.cos(e);f[c+3*c]=Math.cos(e);return f}function T(b){return Math.sqrt(b[1]*b[1]+b[2]*b[2]+b[5]*b[5])}function G(b,f){for(var e=b.content[f];0<f;){var c=(f+1>>1)-1,
a=b.content[c];if(b.Fs(e)<b.Fs(a))b.content[c]=e,b.content[f]=a,f=c;else break}}function r(b,d,e,c){return e-f(c-b,0,e,c)+d}function f(b,f,e,c){return(b/=c)<1/2.75?7.5625*e*b*b+f:b<2/2.75?e*(7.5625*(b-=1.5/2.75)*b+.75)+f:b<2.5/2.75?e*(7.5625*(b-=2.25/2.75)*b+.9375)+f:e*(7.5625*(b-=2.625/2.75)*b+.984375)+f}t.M=function(b,f){f=f||new Float32Array(3);f[0]=b[3];f[1]=b[4];f[2]=b[5];return f};t.N=function(b,f){f=f||new Float32Array(3);return y.copy(b,f)};t.R=function(b,f){y.copy(f,b)};t.Q=function(b,f){y.normalize(f,
x);b[3]=x[0];b[4]=x[1];b[5]=x[2]};t.f=function(b,f,e){e=e||new Float32Array(3);e[0]=b[0]+b[3]*f;e[1]=b[1]+b[4]*f;e[2]=b[2]+b[5]*f;return e};t.g=function(b,f){f[0]=0;f[1]=0;for(var e=f[2]=0;e<b.length;e+=3)f[0]+=b[e],f[1]+=b[e+1],f[2]+=b[e+2];return y.scale(f,3/b.length,f)};t.e=function(b,f,e){for(var c=0;c<e.length;c++)e[c]=0;for(c=0;c<b.length;c+=3){var a=b[c]-f[0],h=b[c+1]-f[1],d=b[c+2]-f[2];e[0]+=a*a;e[1]+=a*h;e[2]+=a*d;e[4]+=h*h;e[5]+=h*d;e[8]+=d*d}e[3]=e[1];e[6]=e[2];e[7]=e[5];for(c=0;c<e.length;c++)e[c]*=
3/b.length;return e};t.L=function(h,f,e){h=k.copy(h,m);if(T(h)<f)return k.identity(e);var c=O(h,p),a=k.transpose(c,q);k.multiply(h,a,b);k.multiply(c,b,h);e=k.copy(c,e);for(var d=1;f<=T(h)&&d<u;)c=O(h,p),a=k.transpose(c,q),k.multiply(h,a,b),k.multiply(c,b,h),k.multiply(c,e,e),d++;return e};t.P=function(b,f){return f[0]*b[0]+f[1]*b[1]+f[2]*b[2]+f[3]};t.a=function(b){return{content:[],Fs:b}};t.c=function(b,f){b.content.push(f);G(b,b.content.length-1)};t.b=function(b){var h=b.content[0],e=b.content.pop();
if(0<b.content.length){b.content[0]=e;for(var e=0,c=b.content.length,a=b.content[e],f=b.Fs(a);;){var d=e+1<<1,k=d-1,m=null;if(k<c){var p=b.Fs(b.content[k]);p<f&&(m=k)}d<c&&b.Fs(b.content[d])<(null===m?f:p)&&(m=d);if(null!==m)b.content[e]=b.content[m],b.content[m]=a,e=m;else break}}return h};t.d=function(b,f){G(b,b.content.indexOf(f))};t.O=function(b,f,e,c){return e*b/c+f};t.x=function(b,f,e,c){return e*(b/=c)*b+f};t.H=function(b,f,e,c){return-e*(b/=c)*(b-2)+f};t.t=function(b,f,e,c){return 1>(b/=c/
2)?e/2*b*b+f:-e/2*(--b*(b-2)-1)+f};t.k=function(b,f,e,c){return e*(b/=c)*b*b+f};t.E=function(b,f,e,c){return e*((b=b/c-1)*b*b+1)+f};t.q=function(b,f,e,c){return 1>(b/=c/2)?e/2*b*b*b+f:e/2*((b-=2)*b*b+2)+f};t.y=function(b,f,e,c){return e*(b/=c)*b*b*b+f};t.I=function(b,f,e,c){return-e*((b=b/c-1)*b*b*b-1)+f};t.u=function(b,f,e,c){return 1>(b/=c/2)?e/2*b*b*b*b+f:-e/2*((b-=2)*b*b*b-2)+f};t.z=function(b,f,e,c){return e*(b/=c)*b*b*b*b+f};t.J=function(b,f,e,c){return e*((b=b/c-1)*b*b*b*b+1)+f};t.v=function(b,
f,e,c){return 1>(b/=c/2)?e/2*b*b*b*b*b+f:e/2*((b-=2)*b*b*b*b+2)+f};t.A=function(b,f,e,c){return-e*Math.cos(b/c*(Math.PI/2))+e+f};t.K=function(b,f,e,c){return e*Math.sin(b/c*(Math.PI/2))+f};t.w=function(b,f,e,c){return-e/2*(Math.cos(Math.PI*b/c)-1)+f};t.m=function(b,f,e,c){return 0==b?f:e*Math.pow(2,10*(b/c-1))+f};t.G=function(b,f,e,c){return b==c?f+e:e*(-Math.pow(2,-10*b/c)+1)+f};t.s=function(b,f,e,c){return 0==b?f:b==c?f+e:1>(b/=c/2)?e/2*Math.pow(2,10*(b-1))+f:e/2*(-Math.pow(2,-10*--b)+2)+f};t.j=
function(b,f,e,c){return-e*(Math.sqrt(1-(b/=c)*b)-1)+f};t.D=function(b,f,e,c){return e*Math.sqrt(1-(b=b/c-1)*b)+f};t.p=function(b,f,e,c){return 1>(b/=c/2)?-e/2*(Math.sqrt(1-b*b)-1)+f:e/2*(Math.sqrt(1-(b-=2)*b)+1)+f};t.l=function(b,f,e,c){var a=0,h=e;if(0==b)return f;if(1==(b/=c))return f+e;a||(a=.3*c);h<Math.abs(e)?(h=e,e=a/4):e=a/(2*Math.PI)*Math.asin(e/h);return-(h*Math.pow(2,10*--b)*Math.sin(2*(b*c-e)*Math.PI/a))+f};t.F=function(b,f,e,c){var a,h=0,d=e;if(0==b)return f;if(1==(b/=c))return f+e;h||
(h=.3*c);d<Math.abs(e)?(d=e,a=h/4):a=h/(2*Math.PI)*Math.asin(e/d);return d*Math.pow(2,-10*b)*Math.sin(2*(b*c-a)*Math.PI/h)+e+f};t.r=function(b,f,e,c){var a,h=0,d=e;if(0==b)return f;if(2==(b/=c/2))return f+e;h||(h=.3*c*1.5);d<Math.abs(e)?(d=e,a=h/4):a=h/(2*Math.PI)*Math.asin(e/d);return 1>b?-.5*d*Math.pow(2,10*--b)*Math.sin(2*(b*c-a)*Math.PI/h)+f:d*Math.pow(2,-10*--b)*Math.sin(2*(b*c-a)*Math.PI/h)*.5+e+f};t.h=function(b,f,e,c,a){void 0==a&&(a=1.70158);return e*(b/=c)*b*((a+1)*b-a)+f};t.B=function(b,
f,e,c,a){void 0==a&&(a=1.70158);return e*((b=b/c-1)*b*((a+1)*b+a)+1)+f};t.n=function(b,f,e,c,a){void 0==a&&(a=1.70158);return 1>(b/=c/2)?e/2*b*b*(((a*=1.525)+1)*b-a)+f:e/2*((b-=2)*b*(((a*=1.525)+1)*b+a)+2)+f};t.i=r;t.C=f;t.o=function(b,d,e,c){return b<c/2?.5*r(2*b,0,e,c)+d:.5*f(2*b-c,0,e,c)+.5*e+d};var k=d(27),y=d(3),x=new Float32Array(3),m=new Float32Array(9),p=new Float32Array(9),q=new Float32Array(9),b=new Float32Array(9),u=100},function(E,t,d){E=d(0);var O=d(55),T=d(37),G=d(5),r=d(43),f=d(16),
k=d(4),y=d(58),x=d(53),m=d(70),p=d(45),q=d(28),b=d(30),u=d(38),h=d(65),l=d(74),e=d(91),c=d(52),a=d(59),ca=d(47),la=d(61),v=d(12),B=d(8),C=d(19),L=d(1),H=d(9),I=d(92),da=d(22),N=d(10),U=d(23),K=d(34),D=d(11),R=d(36),V=d(17),F=d(18),z=d(13),w=d(6),W=d(2),A=d(3),n=d(7),g=d(48);d=Object(E.a)("__data",function(d,t){function ea(a,b){Gb[b.id]=null;ac[b.id]=null}function M(a,b,c,g){a instanceof ArrayBuffer?(a=nc.KF(a,g),g=a.width,a=a.height):(g=a.width,a=a.height);Y.log("%cLOAD IMAGE "+g+"x"+a,"color: #"+
(2048<g||2048<a?"a00":1024<g||1024<a?"aa0":"0a0"),b);-1==b.indexOf(tb)&&c&&Y.warn("image",b,"is not from app root.")}function ka(a,b,c,g,e,h){function f(a){h(b,c,a)}function d(g,h,n,l){if(g){Y.log("%cLOAD METADATA","color: #616",l);h=W._57(g.b4w_format_version);switch(W._69(h,cb.mn)){case -1:h[0]<cb.mn[0]?J.va("JSON version is too old relative to B4W engine: "+W._70(h)+", required: "+W._70(cb.mn)+". Reexport scene with the latest B4W addon to fix it."):Y.warn("JSON version is a bit old relative to B4W engine: "+
W._70(h)+", required: "+W._70(cb.mn)+". Some compatibility issues can occur. Reexport scene with the latest B4W addon to fix it.");break;case 1:h[0]>cb.mn[0]?J.va("B4W engine version is too old relative to JSON. Can't load the scene. Update your engine version to fix it."):Y.error("B4W engine version is a bit old relative to JSON. Some compatibility issues can occur. Update your engine version to fix it.")}cb.DA=h;for(var m in g)a[m]=g[m];b.rc&&(pb=Ta.Xu(a.scenes));(g=a.binaries[0].binfile)?b.MD=
g:(Ka.ix(b,"load_binaries"),Ka.ix(b,"prepare_bindata"));cb.is_mobile_device||Ka.ix(b,"mobile_media_start");cb.antialiasing&&cb.smaa||Ka.ix(b,"load_smaa_textures");if(a.b4w_export_errors)for(g=0;g<a.b4w_export_errors.length;g++)m=a.b4w_export_errors[g],(b.rc&&"PRIMARY"==m.type||"ALL"==m.type)&&Y.PO(m.text+" See more details in https://www.blend4web.com/doc/en/addon.html#non-critical-export-errors");if(a.b4w_export_warnings)for(g=0;g<a.b4w_export_warnings.length;g++)m=a.b4w_export_warnings[g],(b.rc&&
"PRIMARY"==m.type||"ALL"==m.type)&&Y.QO(m.text+" See more details in https://www.blend4web.com/doc/en/addon.html#other-messages");b.Vg&&ta(a);e(b,c)}else n==Oa.AT_JSON_ZIP?(Y.warn("Compressed file ",l,"not found or invalid. Trying to load non-compressed",k),Oa.enqueue([{id:k,type:Oa.AT_JSON,url:k,hf:b.Vg}],d,null,f)):Ka.tD(b)}var k=b.Yi;k||J.va("Nothing requested");if(cb.assets_gzip_available){g=k+".gz";var n=Oa.AT_JSON_ZIP}else g=k,n=Oa.AT_JSON;Oa.enqueue([{id:g,type:n,url:g,hf:b.Vg}],d,null,f)}
function Z(a,b,c,g,e,h){function f(a){h(b,c,a)}function d(g,h,n,l){g?(Y.log("%cLOAD BINARY","color: #616",l),a.bin_data=g,h=(new Uint32Array(g,4,1))[0],g=(new Uint32Array(g,8,1))[0],g=[h,g],h=W._57(a.b4w_format_version),g[0]!=h[0]&&J.va("BIN version does not match to JSON version: "+W._70(g)+", required: "+W._70(cb.mn)+". Couldn't load the scene. Reexport scene to fix it."),g[1]!=h[1]&&Y.warn("BIN version does not match to JSON version: "+ +W._70(g)+", required: "+W._70(cb.mn)+". Some compatibility issues can occur. Reexport scene to fix it."),
e(b,c)):n==Oa.AT_ARRAYBUFFER_ZIP?(Y.warn("Compressed file ",l,"not found or invalid. Trying to load non-compressed",k),Oa.enqueue([{id:k,type:Oa.AT_ARRAYBUFFER,url:k,hf:b.Vg}],d,null,f)):Ka.tD(b)}var k=Ya(b.Yi)+b.MD;k||J.va("Binary data is missing");if(cb.assets_gzip_available){g=k+".gz";var n=Oa.AT_ARRAYBUFFER_ZIP}else g=k,n=Oa.AT_ARRAYBUFFER;Oa.enqueue([{id:g,type:n,url:g,hf:b.Vg}],d,null,f)}function aa(a,b,c,g,e){Ac.fE()&&e(b,c)}function oa(a,b,c,g,e){g=a.bin_data;var h=a.binaries[0],f=a.objects,
d=a.meshes;a=a.actions;for(var k=W.K(),l=["indices"],m=["position","texcoord","texcoord2","shade_tangs"],p=["normal","tangent"],w=["group"],z=["color"],u=0;u<d.length;u++)for(var v=d[u].submeshes,q=0;q<v.length;q++){for(var C in v[q]){var x=v[q][C][1];if(-1!=l.indexOf(C)){var B=v[q][C][0]*W.i+h["int"]+12,y=v[q],r=C,K=g;if(k)var F=new Uint32Array(K,B,x);else for(var F=new Uint32Array(x),K=new DataView(K),L=0;L<x;L++)F[L]=K.getUint32(B+L*W.i,!0);y[r]=F}else if(-1!=m.indexOf(C))B=v[q][C][0]*W.h+h["float"]+
12,v[q][C]=ja(g,B,x,k);else if(-1!=p.indexOf(C)){B=v[q][C][0]*W.l+h["short"]+12;y=v[q];r=C;K=g;F=new Float32Array(x);K=new DataView(K);for(L=0;L<x;L++)F[L]=K.getInt16(B+L*W.l,!0)/32767;y[r]=F}else if(-1!=w.indexOf(C)){B=v[q][C][0]*W.l+h.ushort+12;y=v[q];r=C;K=g;F=new Float32Array(x);K=new DataView(K);for(L=0;L<x;L++)F[L]=K.getUint16(B+L*W.l,!0)/65535;y[r]=F}else if(-1!=z.indexOf(C)){B=v[q][C][0]*W.g+h.uchar+12;y=v[q];r=C;K=g;F=new Float32Array(x);K=new DataView(K);for(L=0;L<x;L++)F[L]=K.getUint8(B+
L*W.g)/255;y[r]=F}}x=v[q];if(d[u].b4w_shape_keys.length)for(B=x.base_length,y=x.normal.length/B/3,x.tbn=R.d(x.normal.subarray(0,3*B),x.tangent.subarray(0,4*B),R.c(x.normal.length/3)),r=1;r<y;r++)for(K=r*B,F=0;F<B;F++){var D=x.normal.subarray(3*F,3*(F+1)),J=A.add(x.normal.subarray(3*(K+F),3*(K+F+1)),D,Fc),L=R.i(Gc);if(x.tangent.length){var M=x.tangent.subarray(4*F,4*(F+1)),ca=n.add(x.tangent.subarray(4*(K+F),4*(K+F+1)),M,dc),D=R.d(D,M),J=R.d(J,ca);R.l(J,D,L)}else J=H.rotationTo(D,J,pc),R.o(L,J,0);
R.n(x.tbn,L,K+F)}else x.tbn=R.d(x.normal,x.tangent);delete v[q].normal;delete v[q].tangent;"texcoord2"in v[q]&&(x=new Float32Array(v[q].texcoord.length+v[q].texcoord2.length),x.set(v[q].texcoord),x.set(v[q].texcoord2,v[q].texcoord.length),v[q].texcoord=x,delete v[q].texcoord2)}for(C=0;C<f.length;C++)for(d=f[C].particle_systems,l=0;l<d.length;l++)m=d[l],m.transforms=ja(g,m.transforms[0]*W.h+h["float"]+12,m.transforms[1],k);for(f=0;f<a.length;f++){C=a[f];d=C.fcurves;l=C.frame_range;p=l[0];w=l[1];z=
qa.xP(p,w);l=null;0>z&&(z=0);var v=u=!1,fa;for(fa in d)u|=-1<fa.indexOf("rotation_euler"),v|=-1<fa.indexOf("rotation_quaternion");m=[];for(fa in d)if(u&&v&&-1<fa.indexOf("rotation_euler"))delete d[fa];else{var q=d[fa],G;for(G in q)x=q[G],B=ja(g,h["float"]+x.bin_data_pos[0]*W.h+12,x.bin_data_pos[1],k),y=new Float32Array(z),l||(l=new Int8Array(z)),qa.aM(x,B,y,l,p,w),x.Fg=y;-1<fa.indexOf("rotation_euler")&&(qa.XO(d[fa]),m.push(fa))}for(p=0;p<m.length;p++)w=m[p],z=w.replace("euler","quaternion"),d[z]=
d[w],delete d[w];C.zL=l}e(b,c)}function ja(a,b,c,g){if(g)g=new Float32Array(a,b,c);else{g=new Float32Array(c);a=new DataView(a);for(var e=0;e<c;e++)g[e]=a.getFloat32(b+e*W.h,!0)}return g}function Ia(a,b,c,g,e){var h=a.cameras,f=a.groups,d=a.materials,k=a.meshes,n=a.node_groups,m=a.objects,p=a.particles,w=a.scenes,z=a.speakers,u=a.lamps,A=a.textures,v=a.worlds;n||(Y.warn('"node_groups" datablock undefined. reexport main scene.'),n=a.node_groups=[]);for(var q="actions armatures cameras curves groups images lamps materials meshes node_groups objects particles scenes sounds speakers textures worlds".split(" "),
C={},x=0;x<q.length;x++)for(var B=a[q[x]],y=0;y<B.length;y++){var r=B[y];C[r.uuid]=r}for(var F=0;F<w.length;F++){for(var K=w[F],L=K.objects,D=0;D<L.length;D++)na(L,D,C);K.camera&&na(K,"camera",C);K.world&&na(K,"world",C)}for(F=0;F<f.length;F++)for(var H=f[F].objects,D=0;D<H.length;D++)na(H,D,C);for(F=0;F<m.length;F++){var M=m[F];M.dupli_group&&na(M,"dupli_group",C);M.parent&&na(M,"parent",C);M.dg_parent&&na(M,"dg_parent",C);var R=M.animation_data;R&&pa(R,C);switch(M.type){case "MESH":M.data||J.va("mesh not found for object "+
M.name);na(M,"data",C);for(var ca=!1,fa=M.modifiers,D=0;D<fa.length;D++){var G=fa[D];"ARMATURE"==G.type?(ca&&Y.warn('Object "'+M.name+'" has more than one armature modifiers. Only the first one will be used.'),ca=!0,na(G,"object",C)):"CURVE"==G.type&&na(G,"object",C)}var I=M.particle_systems;if(I)for(D=0;D<I.length;D++)na(I[D],"settings",C);break;case "ARMATURE":na(M,"data",C);for(var ea=M.pose.bones,t=M.data.bones,D=0;D<ea.length;D++){var ka=ea[D];ka.bone=t[ka.bone];var V=ka.constraints;if(V)for(var aa=
0;aa<V.length;aa++){var X=V[aa];X.target&&na(X,"target",C)}for(var N=ka.parent_recursive,aa=0;aa<N.length;aa++)N[aa]=ea[N[aa]]}break;case "LAMP":case "CAMERA":case "SPEAKER":case "CURVE":na(M,"data",C)}if(V=M.constraints)for(D=0;D<V.length;D++)X=V[D],X.target&&na(X,"target",C);var yb=M.lod_levels;if(yb)for(D=0;D<yb.length;D++){var la=yb[D];la.object&&na(la,"object",C)}}for(F=0;F<k.length;F++)for(var Ia=k[F].materials,D=0;D<Ia.length;D++)na(Ia,D,C);for(F=0;F<d.length;F++){for(var S=d[F],wa=S.texture_slots,
D=0;D<wa.length;D++)na(wa[D],"texture",C);var U=S.node_tree;U&&ia(U,C)}for(F=0;F<n.length;F++)(U=n[F].node_tree)&&ia(U,C);for(F=0;F<A.length;F++){var da=A[F],Ca=da.type;"IMAGE"!=Ca&&"ENVIRONMENT_MAP"!=Ca||na(da,"image",C)}for(F=0;F<h.length;F++){var Z=h[F];Z.dof_object&&na(Z,"dof_object",C)}for(F=0;F<z.length;F++){var Ba=z[F];Ba.sound&&na(Ba,"sound",C);(R=Ba.animation_data)&&pa(R,C)}for(F=0;F<p.length;F++){for(var P=p[F],wa=P.texture_slots,D=0;D<wa.length;D++)na(wa[D],"texture",C);P.dupli_group&&
na(P,"dupli_group",C);P.dupli_object&&na(P,"dupli_object",C)}for(F=0;F<u.length;F++)(R=u[F].animation_data)&&pa(R,C);for(F=0;F<v.length;F++){var O=v[F];if(wa=O.texture_slots)for(D=0;D<wa.length;D++)na(wa[D],"texture",C);(R=O.animation_data)&&pa(R,C);(U=O.node_tree)&&ia(U,C)}Fb.LM(a);ta(a);for(var Da=Ya(b.Yi),Za=a.textures,ja=b.rc?a.scenes[0].b4w_anisotropic_filtering:pb.b4w_anisotropic_filtering,oa=0;oa<Za.length;oa++){var ba=Za[oa];b.rc||"SCENE"!=ba.b4w_source_type||(ba.b4w_source_id="");var Wa=
Cb.nO(ba,ja,a.scenes,b.id,Da);ba.sa=Wa}for(var nb={},T=a.objects,Pa=0;Pa<T.length;Pa++){var ua=T[Pa];if("MESH"===ua.type&&!ua.particle_systems.length)for(var Ga=ua.data,Ea=Ga.name,ab=Ga.submeshes,La=Ga.materials,Oa=0;Oa<ab.length;Oa++)0!==ab[Oa].base_length||nb[Ea]||(La[Oa]&&Y.warn('material "'+La[Oa].name+'" is not assigned to any face (object "'+ua.name+'").'),nb[Ea]=!0)}var Sa=[];a.materials=[];for(var Zc=a.meshes,Aa=0;Aa<Zc.length;Aa++){var eb=Zc[Aa];if(0==eb.materials.length){var hb=l.b();eb.materials.push(hb);
-1==Sa.indexOf(hb.nd)&&(Sa.push(hb.nd),a.materials.push(hb))}else for(var ra=0;ra<eb.materials.length;ra++){var za=eb.materials[ra],Qa=l.c();l.d(za,Qa);eb.materials[ra]=Qa;-1==Sa.indexOf(Qa.nd)&&(Sa.push(Qa.nd),a.materials.push(Qa))}}for(var Va=a.actions,xa=b.id,id=0;id<Va.length;id++){var sb=Va[id];sb.AL=xa;qa.IL(sb)}for(var Ra={BG:[],ew:[]},Fa=a.scenes,Ua=0;Ua<Fa.length;Ua++)for(var $a=Fa[Ua],ha=Fa[Ua].objects,hc=0;hc<ha.length;hc++)ya($a,ha,ha[hc],null,Ra);for(Ua=0;Ua<Ra.ew.length;Ua++)for(var va=
Ra.ew[Ua],hc=0;hc<va.zw.length;hc++){var Ha=va.zw[hc],gb=va.RG[hc],Ib=va.DB[hc],ga=va.aB[hc];va.AG[hc].object=gb;for(var Uc=0;Uc<ga.length;Uc++)W.C(ga[Uc],gb);for(var Id=Ha,sa=Ib,rb=0;rb<sa.length;rb++){for(var Sb=sa[rb].objects,wb=0;wb<Sb.length;wb++){var lb=Sb[wb].dupli_group;lb&&bb(Id,lb)}var nc=Sb.indexOf(Id);-1<nc&&Sb.splice(nc,1)}}!b.rc&&1<a.scenes.length&&(a.scenes=[Ta.Xu(a.scenes)],Y.warn("loading data contains multiple scenes.","Only the first one will be loaded."));var Xa=b.rc?pb:Ta.Xu(a.scenes);
Mc.cT(pb.fps);1<a.scenes.length&&(a.scenes.splice(a.scenes.indexOf(pb),1),a.scenes.unshift(pb));for(var ic=0;ic<a.scenes.length;ic++){var Ka=a.scenes[ic];Ka.sa={};Ka.rD=Ka==Xa;Ka.BL=b.rc;var zb;if(zb=gc.enabled){var db;if(db="OFF"!=Ka.b4w_enable_physics){var Rb;if(!(Rb="AUTO"!=Ka.b4w_enable_physics))a:{for(var vb=Ma(Ka),Ec=0;Ec<vb.length;Ec++){if(vb[Ec].b4w_collision){Rb=!0;break a}var Xb=vb[Ec].data;if(Xb.materials)for(var cb=0;cb<Xb.materials.length;cb++)if(Xb.materials[cb].Ed.Vp){Rb=!0;break a}}Rb=
!1}db=Rb}zb=db}zb&&(b.rc||!Na.wp(pb)&&Ka==Ta.Xu(a))&&Na.EQ(Ka)}for(var qb=0;qb<a.scenes.length;qb++){var kb=a.scenes[qb];if(kb.b4w_use_logic_editor){var Hc=Ma(kb);Fb.cM(Hc,kb)}}for(var jb=0;jb<a.scenes.length;jb++){for(var xb=a.scenes[jb],pc=Ma(xb),ob=0;ob<pc.length;ob++){var mb=pc[ob];ma.MM(mb,xb,a)&&(mb.oe||(mb.oe=[]),mb.oe.push(b.rc?xb:pb))}for(var Gb=pc,je=0;je<Gb.length;je++){var Hb=Gb[je];if(Hb.oe&&"WORLD"!=Hb.type)for(var dc=Hb.particle_systems,Ic=0;Ic<dc.length;Ic++){var lc=dc[Ic].settings;
if("HAIR"==lc.type)if("OBJECT"==lc.render_type){var Wb=lc.dupli_object;Wb.oe||(Wb.oe=Hb.oe.slice())}else if("GROUP"==lc.render_type)for(var Fc=lc.dupli_group,Ob=0;Ob<Fc.objects.length;Ob++)Wb=Fc.objects[Ob],Wb.oe||(Wb.oe=Hb.oe.slice())}}}for(var mc=a.scenes,Ac=[],tb=0;tb<mc.length;tb++)Q(mc[tb].objects,0,b.rc,Ac);ac[b.id]=[];for(tb=0;tb<Ac.length;tb++)for(var oc=Ac[tb],$b=0;$b<oc.length;$b++)for(var Cc=oc[$b],Gc=0;Gc<Cc.length;Gc++)ac[b.id].push(Cc[Gc]);for(var ke=a.particles,tb=0;tb<ke.length;tb++){var Gd=
ke[tb].dupli_object;Gd&&(Gd.qD=!0,ac[b.id].push(Gd));var ye=ke[tb].dupli_group;if(ye)for(var ze=ye.objects,$b=0;$b<ze.length;$b++)Gd=ze[$b],Gd.qD=!0,ac[b.id].push(Gd)}for(var le=ac[b.id],tb=le.length-1;0<=tb;tb--)le[tb].oe||le.splice(tb,1);for(var $d=ac[b.id],jb=0;jb<$d.length;jb++){mb=$d[jb];!b.rc&&mb.parent&&-1<bc.indexOf(mb.parent.type)&&(mb.parent="");if("MESH"==mb.type){var me=Fb.$L(mb);me&&(a.meshes.push(me),mb.data=me)}mb.fo=ma.xF(mb,!1);mb.Bj=ma.TD(mb)}for(jb=0;jb<$d.length;jb++){for(var mb=
$d[jb],ne=mb.Bj,ob=0;ob<mb.lod_levels.length;ob++){var ae=mb.lod_levels[ob].object;ae&&(ne=ne||ae.Bj)}if(ne)for(mb.Bj=!0,ob=0;ob<mb.lod_levels.length;ob++)if(ae=mb.lod_levels[ob].object)ae.Bj=!0}for(var Nc=0;Nc<a.scenes.length;Nc++){var Ae=a.scenes[Nc],Lc=Ae.world;Lc.oe||(Lc.oe=[]);Lc.oe.push(b.rc?Ae:pb)}for(var oe=[],Nc=0;Nc<a.worlds.length;Nc++)Lc=a.worlds[Nc],Lc.oe?(Lc.fo=ma.xF(Lc,!0),Lc.Bj=ma.TD(Lc)):oe.push(Lc);for(Nc=0;Nc<oe.length;Nc++)Lc=oe[Nc],a.worlds.splice(a.worlds.indexOf(Lc),1);for(var Be=
a.node_groups,Ce=a.materials,ud=0;ud<Be.length;ud++){var Hd=Be[ud].node_tree;if(Hd){var Sd=[];Ja(Hd,Sd,!0);Hd.wq=Sd}}for(ud=0;ud<Ce.length;ud++)if(Hd=Ce[ud].ke)Sd=[],Ja(Hd,Sd,!1),Hd.wq=Sd;for(var pe=0;pe<a.scenes.length;pe++){var Ge=a.scenes[pe],qe=b.rc?Ge:pb;E(b.id,qe,"SPEAKER").length&&!qe.wd&&ub.gM(qe)}e(b,c)}function Ca(a,b,c,e,h){e=Ya(b.Yi);for(var f=[],d=[],k=0;k<a.speakers.length;k++){var n=a.speakers[k],l=n.sound.uuid;if(-1==d.indexOf(l)){d.push(l);switch(n.b4w_behavior){case "POSITIONAL":case "BACKGROUND_SOUND":var m=
Oa.AT_AUDIOBUFFER;break;case "BACKGROUND_MUSIC":m=Oa.AT_AUDIO_ELEMENT}n=Object(g.b)(e+n.sound.filepath);Sa(f,l,m,n,b.Vg)}}f.length?Oa.enqueue(f,function(){},function(){h(b,c)}):h(b,c)}function Ja(a,b,c){a=a.nodes;for(var g=0;g<a.length;g++){var e=a[g],h=e.type;if("GROUP"==h&&e.node_group){if(e=e.node_group.node_tree)if(c)Ja(e,b,!0);else for(e=e.wq,h=0;h<e.length;h++){var f=e[h];-1==b.indexOf(f)&&b.push(f)}}else-1!=Ec.indexOf(h)&&-1==b.indexOf(h)&&b.push(h)}}function Ma(a){var b=[];-1==a.objects.indexOf(a.camera)&&
a.objects.push(a.camera);X(a.objects,"ALL",b);return b}function X(a,b,c){for(var g=0;g<a.length;g++){var e=a[g];"ALL"!=b&&b!=e.type||c.push(e);(e=e.dupli_group)&&X(e.objects,b,c)}}function Q(a,b,c,g){g[b]=g[b]||[];for(var e=g[b],h=0;h<a.length;h++){var f=a[h],d=nb(f);e[d]=e[d]||[];(c||-1==bc.indexOf(f.type))&&-1==e[d].indexOf(f)&&e[d].push(f);(f=f.dupli_group)&&Q(f.objects,b+1,c,g)}}function E(a,b,c){var g=[];a=ac[a];for(var e=0;e<a.length;e++){var h=a[e];if(h.type==c||"ALL"==c)for(var f=0;f<h.oe.length;f++)b==
h.oe[f]&&g.push(h)}return g}function Ba(a,b,c,g,e){for(var h=ac[b.id],f=0;f<h.length;f++){var d=ma.FE(h[f]);d.ka.He=b.id}for(var k=a.worlds,f=0;f<k.length;f++)ma.FE(k[f],!0);g=ma.get_all_objects("ALL",b.id);for(f=0;f<h.length;f++){var n=h[f],d=n.qb;Xb.Yx(n,d)}for(f=0;f<k.length;f++)d=k[f],Xb.Yx(d,d.qb);b.rc&&Va(a,b.id);for(f=0;f<h.length;f++)n=h[f],d=n.qb,d.Or||(eb.mS(n,d),ma.CU(n,d),mc.Ea(d)),"MESH"==d.type&&ma.rP(n,d);for(a=0;a<h.length;a++){var l=h[a],k=l.qb,f=k.ka;if(zb.is_mesh(k)||zb.is_empty(k)){var m=
l.lod_levels.length;if(m){for(var k=[l],d=[0],p=Infinity,n=0;n<m;n++){var z=l.lod_levels[n].object,u=l.lod_levels[n].distance;if(!z){p=u;break}k.push(z);d.push(u)}d.push(p);for(n=0;n<k.length;n++)z=k[n],l=z.qb.ka,l.ck=!0,"DYNAMIC"==f.type&&0<n&&A.subtract(f.Xe.Da,l.Xe.Da,l.iw),l.Xg=d[n],l.Wg=d[n+1],m=d[n+1]-d[n],p=n==k.length-1?Infinity:d[n+2]-d[n+1],l.hk=Math.min(n?d[n]-d[n-1]:0,m),l.ik=Math.min(m,p)}}}for(h=0;h<g.length;h++)if(a=g[h],"MESH"==a.type&&(f=a.Vt)){var f=f.ka,k=a.ka.Oi,d=[],v;for(v in k)n=
k[v],d.push(4*n.Az,4*n.Ni);f.mw.push(d);f.Ap.push(a.ka)}h=v=-1;a=qa.BF();for(f=0;f<g.length;f++)k=g[f],d=k.ka,zb.is_mesh(k)&&d.wl&&(k=d.mi,k>v&&(v=k),a>=k&&k>h&&(h=k));for(f=0;f<g.length;f++)k=g[f],d=k.ka,zb.is_mesh(k)&&d.wl&&(d.Tm=!0,v<a?d.mi=v:d.mi<=a?d.mi=h:(Y.warn('too many bones for "'+k.name+'" / '+d.mi+" bones (max "+a+" with blending, "+2*a+" without blending). Blending between frames will be disabled."),d.mi=v,d.Tm=!1),d.Tm=d.Tm&&!ob.jF);for(v=0;v<g.length;v++)if(h=g[v],h.jg)if(a=h.ug,"CHASSIS"==
a.mg){h.Aa={};h.Aa.yr=a.yr;h.Aa.Nq=a.Nq;h.Aa.ZB=a.ZB;h.Aa.aC=a.aC;h.Aa.$B=a.$B;h.Aa.EC=a.EC;h.Aa.zB=a.zB;h.Aa.JA=a.JA;h.Aa.Ao=0;h.Aa.Mq=1;h.Aa.Kp=0;h.Aa.speed=0;h.Aa.xn=[];h.Aa.ss=[];h.Aa.Mp=null;k=(f=zb.get_dg_parent(h))?zb.Uz(f,g):g;for(f=0;f<k.length;f++)d=k[f],d.jg&&(n=d.ug,Na.JQ(d)&&a.name==n.name?(n=Na.nV(d.ug.mg),h.Aa.xn[n]=d,h.Aa.ss[n]=new Float32Array(8)):Na.jG(d)&&a.name==n.name?(h.Aa.Mp=d,h.Aa.Lp=n.Lp,h.Aa.Us=n.Us,h.Aa.Nr=n.Nr,n=w.o(h.ka.na,w.b()),d=w.p(n,d.ka.na,n),h.Aa.kI=d,n=new Float32Array([1,
0,0]),w.w(n,d,n),h.Aa.jI=n):Na.iG(d)&&a.name==n.name?(h.Aa.QB=d,h.Aa.Ss=n.Ss,h.Aa.Zo=n.Zo,n=w.o(h.ka.na,w.b()),d=w.p(n,d.ka.na,n),h.Aa.gI=d,n=new Float32Array([1,0,0]),w.w(n,d,n),h.Aa.fI=n):Na.kG(d)&&a.name==n.name&&(h.Aa.bC=d,h.Aa.kr=n.kr,n=w.o(h.ka.na,w.b()),d=w.p(n,d.ka.na,n),h.Aa.tI=d,n=new Float32Array([1,0,0]),w.w(n,d,n),h.Aa.sI=n));4!=h.Aa.xn.length&&J.va("Not enough wheels for chassis "+h.name)}else if("HULL"==a.mg)for(h.Aa={},h.Aa.xn=[],h.Aa.ss=[],h.Aa.yr=a.yr,h.Aa.Nq=a.Nq,h.Aa.Pm=a.Pm,h.Aa.Sn=
a.Sn,h.Aa.Tn=a.Tn,h.Aa.Ao=0,h.Aa.Mq=1,h.Aa.Kp=0,h.Aa.speed=0,h.Aa.Mp=null,k=(f=zb.get_dg_parent(h))?zb.Uz(f,g):g,f=0;f<k.length;f++)d=k[f],d.jg&&(n=d.ug,Na.IQ(d)&&a.name==n.name?(h.Aa.xn.push(d),h.Aa.ss.push(new Float32Array(8))):Na.jG(d)&&a.name==n.name?(h.Aa.Mp=d,h.Aa.Lp=n.Lp,h.Aa.Us=n.Us,h.Aa.Nr=n.Nr,n=w.o(h.ka.na,w.b()),d=w.p(n,d.ka.na,n),h.Aa.kI=d,n=new Float32Array([1,0,0]),w.w(n,d,n),h.Aa.jI=n):Na.iG(d)&&a.name==n.name?(h.Aa.QB=d,h.Aa.Ss=n.Ss,h.Aa.Zo=n.Zo,n=w.o(h.ka.na,w.b()),d=w.p(n,d.ka.na,
n),h.Aa.gI=d,n=new Float32Array([1,0,0]),w.w(n,d,n),h.Aa.fI=n):Na.kG(d)&&a.name==n.name&&(h.Aa.bC=d,h.Aa.kr=n.kr,n=w.o(h.ka.na,w.b()),d=w.p(n,d.ka.na,n),h.Aa.tI=d,n=new Float32Array([1,0,0]),w.w(n,d,n),h.Aa.sI=n));for(v=0;v<g.length;v++)if(h=g[v],h.dn&&(a=h.Do,"MAIN_BODY"==a.mg))for(h.xh={},h.xh.Pm=a.Pm,h.xh.Sn=a.Sn,h.xh.Tn=a.Tn,h.xh.du=[],f=(f=zb.get_dg_parent(h))?zb.Uz(f,g):g,k=0;k<f.length;k++)d=f[k],d.dn&&(n=d.Do,Na.LQ(d)&&a.name==n.name&&(h.xh.du.push(d),d.Zy=d.Do.rI));e(b,c)}function Va(a,b){for(var c=
0;c<a.scenes.length;c++){for(var g=a.scenes[c],e=ma.Fc(g,"LAMP",b),h=Array(e.length),f=0;f<e.length;f++)h[f]=f;h.sort(function(a,b){var c=e[a].lc,g=e[b].lc;return g.In&&g.Nn&&(!c.In||!c.Nn)||!c.In&&(g.In||!c.Nn&&g.Nn)?1:0});for(f=0;f<h.length;f++)zb.lb(e[h[f]],g).Yr=f}}function Ra(a,b,c,g,e){for(g=0;g<a.scenes.length;g++){var h=a.scenes[g];h.Aj=h.camera.qb}for(g=0;g<a.scenes.length;g++){var h=b.rc?a.scenes[g]:pb,f=b.rc?ma.Fc(h,"LAMP",b.id):ma.Fc(h,"LAMP",0),d=ma.Fc(h,"ALL",b.id),k=E(b.id,h,"MESH"),
n=E(b.id,h,"EMPTY");b.rc&&Ta.PL(h,d,f,k,n);for(var d=!1,l=0;l<n.length;l++)for(var m=n[l].qb,p=m.Ba,w=0;w<p.length;w++){var z=p[w].Kb,u=Ta.JI(z,m);h.name==z.name&&(d=d||u)}b.rc&&h.sa.Zd&&!d&&Y.warn('Scene "'+h.name+'" has water but has no wind. Using default settings.');n=[];Ta.set_active(h);ab.rF(h,k,f,n);l=ma.Fc(h,"LINE",b.id);ab.qF(h,l);m=Ta.nv(h);if(b.rc){d=h.sa.mx;l=h.world;if(d.uB||d.procedural_skydome)p=l.qb,ab.TL(h,d,p),ab.uu(p,m,h);Ta.oF(h,m);(d=h.sa.mm)&&(d.kt||d.Le)&&ab.ML(h,l.qb)}for(l=
0;l<k.length;l++)ab.uu(k[l].qb,m,h);for(l=0;l<n.length;l++)ab.uu(n[l],m,h),ma.QR(n[l]);d=ma.Fc(h,"ALL",b.id);Ta.ED(h,d,f);for(l=0;l<d.length;l++)m=d[l],m.ka.Of&&!m.$F&&ma.update_boundings(m),zb.PM(m)&&(m.PG=!0),ma.yU(m,h)}Ta.QL(pb,a.textures,b.id);b.rc&&pb.sa.iq.length&&(b.jA=!0);e(b,c)}function ta(a){var b=a.materials;a=a.images;for(var c=0;c<a.length;c++){var g=a[c];g.oh="FILE"==g.source&&-1<g.filepath.indexOf(".dds")&&"dds"==cb.Gm?"dds":""}if((oc.zz&&"dds"==cb.Gm||oc.Pw&&"pvr"==cb.Gm)&&cb.TI)for(a=
0;a<b.length;a++){for(var g=b[a],e=g.texture_slots,c=0;c<e.length;c++){var h=e[c],f=h.texture;if("IMAGE"==f.type||"ENVIRONMENT_MAP"==f.type){var d=f.image;d&&!d.oh&&(h=!f.b4w_disable_compression&&!h.use_map_normal&&"ENVIRONMENT_MAP"!=f.type&&!f.b4w_shore_dist_map&&"MOVIE"!=d.source,ha(d,h))}}if(c=g.node_tree)for(g=c.nodes,c=0;c<g.length;c++){e=g[c];h=!1;if("TEXTURE"==e.type){if((f=e.texture)&&(d=f.image)&&!d.oh&&(h=!f.b4w_disable_compression&&"MOVIE"!=f.image.source&&"ENVIRONMENT_MAP"!=f.type)){a:{h=
e.outputs;for(e=0;e<h.length;e++)if(f=h[e],f.is_linked&&"Normal"==f.identifier){h=!0;break a}h=!1}h=!h}}else"TEX_IMAGE"==e.type?(d=e.image)&&!d.oh&&(h="MOVIE"!=d.source):"TEX_ENVIRONMENT"==e.type&&(h=!1);d&&!d.oh&&ha(d,h)}}}function ha(a,b){-1<a.filepath.indexOf(".dds")?a.oh="dds":b?(a.oh=cb.Gm,a.filepath="dds"==cb.Gm?a.filepath+".dds":a.filepath+".pvr"):a.oh=""}function ga(a,b,c,g,e){g=a.groups;for(var h=a.objects,f={},d={},k={},n={},l=0;l<g.length;l++){var m=g[l];f[m.uuid]=m;k[m.uuid]=m}for(l=0;l<
h.length;l++)m=h[l],d[m.uuid]=m,n[m.uuid]=m;a=a.scenes;for(l=0;l<a.length;l++)P(a[l].objects,null,n,k,null);for(var p in k)p in f||g.push(k[p]);for(p in n)p in d||h.push(n[p]);e(b,c)}function P(a,b,c,g,h){for(var f=[],d=0;d<a.length;d++){var k=a[d],n=c[k.uuid];if(k=n.proxy){b&&-1==f.indexOf(k.uuid)&&f.push(k.uuid);for(var l=c[k.uuid],m=l.constraints,k=0;k<m.length;k++){var p=W.O(m[k]);p.name=p.name+"_CLONE";n.constraints.push(p)}"b4w_proxy_inherit_anim"in n&&!n.b4w_proxy_inherit_anim||(n.animation_data&&
(l.animation_data=W.O(n.animation_data)),l.b4w_use_default_animation=n.b4w_use_default_animation,l.b4w_auto_skel_anim=n.b4w_auto_skel_anim,l.b4w_anim_behavior=n.b4w_anim_behavior,l.b4w_cyclic_animation=n.b4w_cyclic_animation)}}for(d=0;d<f.length;d++)n=W._9(a,"uuid",f[d]),-1<n&&a.splice(n,1);f={};if(b)for(d=0;d<a.length;d++)k=a[d],n=c[k.uuid],m=W.O(n),l="origin_name"in n?n.origin_name:n.name,m.name=zb.nF(b.name,l),m.origin_name=l,m.dg_parent={uuid:b.uuid},xa(m),c[m.uuid]=m,f[k.uuid]=m.uuid,k.uuid=
m.uuid,h&&h[n.uuid]&&(m.b4w_cluster_data=h[n.uuid]);for(d=0;d<a.length;d++)k=a[d],n=c[k.uuid],n.dupli_group&&(k=n.dupli_group,h=g[k.uuid],m=W.O(h),m.name=Ib.et(h.name+"_CLONE"),m.uuid=e.a("Group"+m.name),g[m.uuid]=m,k.uuid=m.uuid,P(m.objects,n,c,g,n.b4w_cluster_data));if(b)for(d=0;d<a.length;d++){k=a[d];n=c[k.uuid];n.parent&&n.parent.uuid in f?n.parent.uuid=f[n.parent.uuid]:n.parent&&(Y.warn("Object's \""+n.name+'" parent is not in dupli group. Disabling parenting.'),n.parent=null);m=n.constraints;
for(k=0;k<m.length;k++)b=m[k],b.target&&b.target.uuid in f&&(b.target.uuid=f[b.target.uuid]);if(b=n.pose)for(g=b.bones,k=0;k<g.length;k++)if(h=g[k].constraints)for(m=0;m<h.length;m++)b=h[m],b.target&&b.target.uuid in f&&(b.target.uuid=f[b.target.uuid]);b=n.modifiers;for(k=0;k<b.length;k++)g=b[k],g.object&&g.object.uuid in f&&(g.object.uuid=f[g.object.uuid]);if((n=n.lod_levels)&&n.length)for(k=0;k<n.length;k++)b=n[k],b.object&&b.object.uuid in f&&(b.object.uuid=f[b.object.uuid])}for(var w in f)$b[w]=
f[w]}function xa(a){a.uuid=e.a("Object"+a.name)}function pa(a,b){a.action&&na(a,"action",b);if(a.nla_tracks)for(var c=0;c<a.nla_tracks.length;c++)for(var g=a.nla_tracks[c],e=0;e<g.strips.length;e++)g.strips[e].action&&na(g.strips[e],"action",b)}function ia(a,b){for(var c=a.nodes,g=0;g<c.length;g++){var e=c[g];"TEXTURE"==e.type&&e.texture&&na(e,"texture",b);"LAMP"==e.type&&e.lamp&&(e.lamp.uuid in $b&&(e.lamp.uuid=$b[e.lamp.uuid]),b[e.lamp.uuid]||(e.lamp=null));"GROUP"==e.type&&e.node_group&&na(e,"node_group",
b);"TEX_IMAGE"!=e.type&&"TEX_ENVIRONMENT"!=e.type||!e.image||na(e,"image",b)}e=a.links;for(g=0;g<e.length;g++){var h=e[g];ra(h,"from_node",c);ra(h,"to_node",c);Fa(h,"from_socket",h.from_node.outputs);Fa(h,"to_socket",h.to_node.inputs)}(c=a.animation_data)&&pa(c,b)}function na(a,b,c){a[b]&&((c=c[a[b].uuid])||Y.error("Dangling link found:",b,a),a[b]=c)}function ra(a,b,c){c=W._18("name",a[b].name,c);a[b]=c}function Fa(a,b,c){c=W._18("identifier",a[b].identifier,c);a[b]=c}function fa(a,b,c,e,h,f){var d=
[],k=[],n={};e=a.images;for(var l=Cb.AF(),m=Ya(b.Yi),p=0;p<e.length;p++){var w=e[p],z=w.uuid;if(z){var u=Object(g.b)(m+w.filepath),A=Oa.yx(u),v=A[1].toLowerCase(),q=w.source;if("FILE"===q){q=w.oh?Oa.AT_ARRAYBUFFER:Oa.AT_IMAGE_ELEMENT;if(!Oa.OM(v)){Y.error('image "'+w.name+'" has unsupported format or broken path.');continue}oc.NA&&cb.use_min50&&(u=Za(A))}else if("MOVIE"===q)if(cb.Js)u=A[0]+".altconv.seq",q=Oa.AT_SEQ_VIDEO_ELEMENT;else{q=ub.detect_video_container(v);if(""==q){Y.error("failed to load video file (unsupported format)",
u);continue}u=q!=v?A[0]+".altconv."+q:A[0]+"."+A[1];q=Oa.AT_VIDEO_ELEMENT}else{Y.error('Image "'+w.name+'" has unsupported format "'+q+'".');continue}z in n||(n[z]=[]);for(A=0;A<l.length;A++)v=l[A],(!Cb.AP(v)&&v.ol==w.oh&&v.Ym==z||b.Vg)&&n[z].push(v);w.oh&&cb.assets_gzip_available&&(q=Oa.AT_ARRAYBUFFER_ZIP,u+=".gz");n[z].length&&d.push({id:z,type:q,url:u,hf:b.Vg})}}if(d.length){var C=0,x=function(g,e,h,l){if(g){if(b.Vg)e=h;else{e=n[e];for(var m=0;m<e.length;m++){var p=e[m];if(h==Oa.AT_SEQ_VIDEO_ELEMENT)p.Hs=
g.zh,Cb.ht(p,g.images,b.id);else if(Cb.ht(p,g,b.id),"ENVIRONMENT_MAP"==p.source&&b.rc)for(var w=0;w<a.scenes.length;w++)Ta.$x(a.scenes[w]);Cb.TS(p)}e=e[0].ol}h==Oa.AT_VIDEO_ELEMENT||h==Oa.AT_SEQ_VIDEO_ELEMENT?(h==Oa.AT_VIDEO_ELEMENT?(e=g.videoWidth,g=g.videoHeight):(e=g.images[0].width,g=g.images[0].height),Y.log("%cLOAD VIDEO "+e+"x"+g,"color: #"+(2048<e||2048<g?"a00":1024<e||1024<g?"aa0":"0a0"),l),-1==l.indexOf(tb)&&Y.warn("video",l,"is not from app root.")):M(g,l,!0,e)}else{a:{g=b.Vg;l=l.split("?v")[0];
h=Oa.yx(l);if("gz"==h[1])l=h[0],h=Oa.AT_ARRAYBUFFER;else if("dds"==h[1]||"pvr"==h[1])for(l=h[0],h=Oa.AT_IMAGE_ELEMENT,m=n[e],p=0;p<m.length;p++)m[p].ol="";else if(-1!=l.indexOf(".min50"))l=l.split(".min50"),l=l[0]+l[1],h=Oa.AT_IMAGE_ELEMENT;else{e=null;break a}e={id:e,type:h,url:l,hf:g}}e&&(Y.warn("Trying to load fallback image",e.url),k.push(e))}e=++C/(d.length+k.length);f(b,c,e)},B=function(){k.length?(Oa.enqueue(k,x,B),k.length=0):(Y.log("%cLOADED ALL IMAGES","color: #0a0"),h(b,c))};Oa.enqueue(d,
x,B)}else h(b,c)}function Za(a){return"dds"==a[1]?(a=Oa.yx(a[0]),a[0]+".min50."+a[1]+".dds"):a[0]+".min50."+a[1]}function Da(a,b,c,g,e){a=Ta.qv();for(g=0;g<a.length;g++){var h=a[g];if(h.b4w_use_nla){var f=h.b4w_nla_cyclic;h.b4w_use_logic_editor&&(f=!1);Xb.JU(h,f,b.id)}}e(b,c)}function Ga(a,b,c,e,h,f){a=Ya(b.Yi);var d=[],k={};e=ma.get_all_objects("ALL",b.id);for(var n=0;n<e.length;n++){var l=e[n];if(Pa(l)){var m=l.Qa.nd;"BACKGROUND_MUSIC"==ub.Xz(l)?(m=W._4(),b.gA=!0):"NONE"!=ub.Xz(l)&&cb.pA&&(b.oA=
!0);if(!(m in k)){k[m]=[];var p=Object(g.b)(a+l.Qa.Yi);switch(ub.eI(l)){case ub.wy:var w=Oa.AT_AUDIOBUFFER;break;case ub.GC:w=Oa.AT_AUDIO_ELEMENT}Sa(d,m,w,p,b.Vg)}k[m].push(l)}}if(d.length){var z=0;Oa.enqueue(d,function(a,g,e,h){if(a)for(Y.log("%cLOAD SOUND","color: #0aa",h),-1==h.indexOf(tb)&&Y.warn("sound",h,"is not from app root."),g=k[g],e=0;e<g.length;e++)ub.NU(g[e],a);a=++z/d.length;f(b,c,a)},function(){Y.log("%cLOADED ALL SOUNDS","color: #0aa");h(b,c)})}else h(b,c)}function Sa(a,b,c,g,e){var h=
Oa.yx(g),f=h[1].toLowerCase(),d=ub.detect_audio_container(f);""!=d?(g=d!=f?h[0]+".altconv."+d:h[0]+"."+h[1],a.push({id:b,type:c,url:g,hf:e})):Y.error("failed to load audio file (unsupported format)",g)}function Pa(a){return zb.is_speaker(a)&&ub.eI(a)!=ub.HC}function La(a,b,c){a=ma.Fc(a,"SPEAKER",b);for(b=0;b<a.length;b++){var g=a[b];zb.is_speaker(g)&&(ub.HQ(g)||c)&&ub.play_def(g)}}function za(a,b){for(var c=a.sa.iq,g=0;g<c.length;g++){var e=c[g].sa;a.b4w_use_nla&&c[g].b4w_nla_video||!c[g].use_auto_refresh||
b!=e.kq||(Cb.reset_video(e),Cb.play_video(e))}}function S(a,b,c,g,e){Xb.lS();e(b,c)}function Ua(a,b,c,g,e){Xb.start();Y.log("%cSTART NLA","color: #0a0");e(b,c)}function ya(a,b,c,g,e){for(var h=c.lod_levels.length,f=0;f<h;f++){var d=c.lod_levels[f],k=d.object;if(k){var n=e.BG.indexOf(c);if(-1==n){e.BG.push(c);var l={zw:[],RG:[],AG:[],DB:[],aB:[]};e.ew.push(l)}else l=e.ew[n];var m=l.zw.indexOf(k);-1!=n&&-1!=m?(l.DB[m].push(a),l.aB[m].push(b)):(n=W.N(k),n.name=c.name+"_LOD_"+String(f+1),n.b4w_cluster_data=
c.b4w_cluster_data,xa(n),n.lod_levels=[],g&&(n.dg_parent=g),l.zw.push(k),l.RG.push(n),l.AG.push(d),l.DB.push([a]),l.aB.push([b]))}}if(b=c.dupli_group)for(b=b.objects,g=0;g<b.length;g++)ya(a,b,b[g],c,e)}function bb(a,b){var c=b.objects,g=c.indexOf(a);-1<g&&c.splice(g,1);for(g=0;g<c.length;g++)(b=c[g].dupli_group)&&bb(a,b)}function Xa(a,b,c,g,e){g=!0;for(var h=0;h<a.scenes.length;h++)if(!Na.RM(a.scenes[h])){g=!1;break}g&&(e(b,c),Y.log("%cPHYSICS READY","color: #0a0"))}function sa(a,b,c,g,e){for(g=0;g<
a.scenes.length;g++){var h=a.scenes[g];if(b.rc)var f=Na.wp(h);else f=Na.wp(pb)||Na.wp(h),h=pb;if(gc.enabled&&f)for(f=0;f<Cc.length;f++)for(var d=ma.Fc(h,Cc[f],b.id),k=0;k<d.length;k++){var n=d[k];n.ka.He==b.id&&(Na.append_object(n,h),b.wG&&Na.ab(n)&&Na.disable_simulation(n))}}e(b,c)}function ba(a,b,c,e,h){var f={};e=[];for(var d=a.scenes,k=0;k<a.scenes.length;k++){var n=d[k];if(n.sa.Zd){var l=n.sa.Zd.Rl;if(l&&"FILE"===l.source){var n=l.uuid,m=Object(g.b)(Ya(b.Yi)+l.filepath);e.push({id:n,type:l.oh?
Oa.AT_ARRAYBUFFER:Oa.AT_IMAGE_ELEMENT,url:m});f[n]=l}}}e.length?Oa.enqueue(e,function(a,c,g,e){if(a){M(a,e,!0);g=[];e=Cb.AF();for(var h=0;h<e.length;h++){var k=e[h];k.uri===c&&g.push(k)}for(c=0;c<g.length;c++)Cb.ht(g[c],a,b.id);for(c=0;c<d.length;c++)if(g=d[c],g.sa.Zd&&(e=g.sa.Zd.Rl,e===l)){var k=a,n=document.createElement("canvas");e=l.size[0];h=l.size[1];n.width=e;n.height=h;n=n.getContext("2d");n.drawImage(k,0,0);k=n.getImageData(0,0,e,h).data;n=new Float32Array(4);n[0]=1/16581375;n[1]=1/65025;
n[2]=1/255;n[3]=1;e*=h;for(var h=new Float32Array(e),m=0;m<e;m++)h[m]=n[1]*k[4*m+2]+n[2]*k[4*m+3];g.sa.NB=h}}else for(a=f[c],c=0;c<d.length;c++)g=d[c],e=g.sa.Zd.Rl,e===a&&(g.sa.Zd.Rl=null,Y.warn("image",e.filepath," was not found. Disabling water shore effects."))},function(){h(b,c)}):h(b,c)}function va(a,b,c,g,e){g=a.scenes[0];a=[];for(var h=[mb.Et,mb.uq,mb.Ft,mb.Ky],f=0;f<h.length;f++){var d=Ta.xc(g,h[f]);d&&a.push(d)}if(a.length){g=[];f=Oa.AT_IMAGE_ELEMENT;g.push({id:"SEARCH_TEXTURE",type:f,url:sb.Kf.smaa_search_texture_path,
hf:b.Vg});g.push({id:"AREA_TEXTURE",type:f,url:sb.Kf.smaa_area_texture_path,hf:b.Vg});for(f=0;f<a.length;f++)if(h=a[f],h.type==mb.uq){a=h.Mb;for(f=0;f<a.length;f++)if(h=a[f],"u_search_tex"==h.to)var k=h.wb;else if("u_area_tex"==h.to)var n=h.wb;break}g.length?Oa.enqueue(g,function(a,c,g,e){a&&(M(a,e,!1),c="SEARCH_TEXTURE"==c?k:n,c.source="IMAGE",Cb.ht(c,a,b.id),Cb.HB(c,Cb.Ca,Cb.Ca))},function(){e(b,c)}):e(b,c)}else e(b,c)}function Ha(a,b,c,g){for(c=0;c<a.scenes.length;c++){var e=a.scenes[c];b.rc||
(e=pb);for(var h=ma.Fc(e,"LAMP",b.id),f=0;f<h.length;f++){var d=h[f];d.ka.He==b.id&&g.Py.push({Kb:e,obj:d})}h=ma.Fc(e,"ALL",b.id);for(f=0;f<h.length;f++)d=h[f],"LAMP"!=d.type&&d.ka.He==b.id&&(b.wG&&zb.is_mesh(d)&&Ta.Dm(d,!0),g.Py.push({Kb:e,obj:d}))}}function db(a,b,c,g,e,h){var f=g.Py;e=g.XG;if(f.length){a=f[e].obj;var d=f[e].Kb;e=zb.lb(a,d);Ta.append_object(d,a);!a.anchor||d.sa.anaglyph_use||d.sa.Ms||ua.append(a);g=++g.XG/f.length;a.ka.QF&&Ta.Tq(a,!0);f=e.Rj;if(-1!=a.ka.Ge&&f){var k=A.copy(a.ka.Xe.Da,
Fc);Ta.II(f,k)}f=a.zs;if(f.length&&d.sa.wi)for(d=w.j(a.ka.na),a=w.g(a.ka.na),e=e.nj,k=0;k<e.length;k++)Ta.KI(e[k],d,a),zb.LI(f,e[k].qa.ad)}else g=1;h(b,c,g)}function vb(a,b,c,g,e){if(b.rc){a=Ta.ji();Ta.$x(a);g=Ta.qv();for(var h=0;h<g.length;h++){var f=g[h];Ta.$x(f);Ta.nS(f,a)}Ta.set_active(a)}else Ta.NI(pb);a=ma.get_all_objects("ALL",b.id);ma.DU(a);e(b,c)}function Qa(a,b,c,g,e){if(b.rc)for(a=Ta.qv(),g=0;g<a.length;g++)for(var h=a[g],f=ma.Fc(h,"WORLD",0),d=0;d<f.length;d++)Ta.CQ(h,f[d]),Ta.$x(h);e(b,
c)}function $a(a,b,c,g,e){if(b.rc)for(a=Ta.qv(),g=0;g<a.length;g++){var h=a[g];h.b4w_use_logic_editor&&Hc.DQ(h,b.id)}e(b,c)}function gb(a,b,c,g,e){if(b.rc)for(g=0;g<a.scenes.length;g++)za(a.scenes[g],b.id),La(a.scenes[g],b.id,!1);else za(pb,b.id),La(pb,b.id,!1);e(b,c)}function wb(a,b,c,g,e){for(g=0;g<a.scenes.length;g++)a.scenes[g].camera=null;cb.media_auto_activation&&(b.jA||b.gA||b.oA)?kb||lb(a,e,b,c):e(b,c)}function lb(a,b,c,g){var e=lc.parentElement;xb=e.style.zIndex;e.style.zIndex="999";kb=document.createElement("div");
kb.style.position="relative";kb.style.height="88px";kb.style.width="88px";var h=Math.round(lc.offsetWidth/2-44);kb.style.top=Math.round(lc.offsetHeight/2-44).toString()+"px";kb.style.left=h.toString()+"px";kb.style.backgroundImage="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALAAAACwCAYAAACvt+ReAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAbrwAAG68BXhqRHAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAABVDSURBVHic7Z15kF1Vncc/v05Ys7JIQJZ0GLaAgCzCQARGFMIwZKTiqCPBAbTEEodBhYKALJKSVWYsCpTBcgCLAdQBHWZACCCyhCElIRiWEMOSBZAkCglJOoTQyW/++J3Xfe95971+273v3fvOp6qr+5573+vT3d8+93vP+Z3fTwjUhKoKsC0wLvKxDTA68rEVMNK9ZDiwpft6PdDvvl4LvA+sBt5zn1cCy4EVwDJgpYhouj9RMZB2d6ATUdWtgD2BXvcxARgPbJ5RFzYAS4BFwGL38YqIvJ/R988NQcCAqm4LHADsA+yLibannX1KYBMm6JeBBcA8EVnZ3i61n64UsKoOAyYCh7iPCeTvd6HA68BcYA6wQEQ2trdL2ZO3P1rDqGoPsD9wNHAkMKqBt1nNoFctfV7j2ldj/rbPXdsvIuvd994S88QAIzCfHPXOHyHurRvt21PALOAFEdnUwHvkjsILWFV7gcnAUcDYWl8GvAEsZNCDLhKR91rfw4RvrjoWuyv0us97ALtS+99rFfAEMFNElqTRx06hkAJ2I94ngRMwXzsUmzCxzsP85csisja9HtaPqo7CbM9EzK/vRW1/vwXATODJ0h2hSBRKwO5hbAom3KFuw2uAZzD/+JyIrEm5ey1FVUcDB2Ee/hPU9vM+ANwnIu+m3L3MKISAVXU3YCrwNwx6zSTWArOBJ7Gn+P4q1+YGVR0OfByzSX+N+exKfAg8DtwtIm9m0L1UybWAVfWjwJcw4Vb6WRT4A3YbnV0U0VZCVTfDRDwZOJDKv5dNwGPAXSLydja9az25FLCqbg9MA44FhlW4bDXwIPYgszyrvnUSqrojJuRqlqof+C1wp4i8k1XfWkWuBKyqmwN/D3wRW7ZN4m3gfzHhfpBV3zoZNyofBXwem81I4gPgHsxabMiqb82SGwGr6lHAV7A50yQWA3cCT4c4gmRcPMeRwCnY0ngSK4BbRGRWZh1rgo4XsJtZOAvzdUm8CfwSeKxbJu+bxQl5EnAqsEuFy+YAPxKRP2fWsQboWAG7X/JJwGkMRnVFWQXcDjwchNsYbnVyMibkMQmXvA/8DLi/U+9qHSlg95B2HvCxhNP9wG+AO0SkL+F8oE7cws9UzCNvlnDJAuA6EVmWacdqoOMErKpHA98keS7zReAGEXkr2151B6q6C3A2sF/C6bWYpXgy215Vp2MErKpbYMI9NuF0H3ArNrPQkbeyouCs2wnA6SQPIo8AN3XKDE9HCFhVdwK+iwWv+DwLXF+k5c88oKrbAecAByecfh24shMsRdsFrKqHYn53pHdqAzYtdk8YdduDG40nA18DtvBOrwP+TURmZ96xCG0VsKp+DrtV+f1YDFwrIkuz7lOgHBeSej6wm38KmzP+deadcrRFwG765kxsmszncexBrXChf3nGzVScg63o+cwEftyOHSGZC9htmLwAONQ71Y/9N/9P1n0K1I6qngycQXkMyjPANVkPPJkKWFVHApcDe3un1mIPBc9n2Z9AY6jqgcBFlM9SLAAuy3J+PjMBu20yM4DdvVPLge+JyBtZ9SXQPC4G+zJsD1+U14BLs9p+lYmAXTzDFZRHQi0EZojIqiz6EWgtqroNcCmWQyPKUuDiLKY+Uxewqo4BrqL8CfZF4PKQrCPfuIe7S7Dg+ShvARekPTilKmBVHYGNvHt4p54FrshT3GmgMm4V9SJsf16URcBFae43TE3Abrbh+5Q/sM0Gri761p5uwwXNTwcO904twOxEKrMTqaRPcvO851Eu3uewqZYg3oIhIh9iVnGOd2ofYLrLhtRy0sr/dSbl/4nzMdvwYUrfM9Bm3MB0JfCCd+pQbFNCy2m5gN3ysL/CthCbWgmrawXHPdfMAF7xTk12iyAtpaUCVtXDsNiGKMuxqbIg3i7BzSzNwPbXRfmqC95qGS0TsKqOA75N/MGwjzDP25W41K+XYausA83AeS58tiW0RMCRucBo7oF+zPMWOrlcoDJudfUqIBrkMxK40KVIaJpWjcBnUR6MfkuIbQiIyDzgNq95d+AbrXj/pgWsqpMo3wb0eIgqC5Rw8cL+Xrrj3P7HpmhKwKr6EeBfvOYlwA3NvG+gkFyPxUhEOcvtQG+YhgXstpucSzykbgO2kyLMOARiOE1ci2XHLDES+I7TUkM0MwJPoTxvw63hoS1QCRFZjCVKiXIAcGKj79mQgJ11+LLX/BxwX6MdCXQN92K7N6Kc1qiVaHQE/ibx7JB9wA/D7uHAUDiN3MhgMRyArWlwqbluAbsskf5qyq0hb0OgVlwe4tu85sPcjFZd1CVgN/l8htf8IrYrNRCohwexAK8oX3OxxTVT7wg8FdghctyPbYEP1iFQF04zNzBYQxpge+Cz9bxPzQJ2qYb+wWu+NyTaCzSKW2q+32v+gttDWRP1jMDTiOfpXYUllg4EmuFOrJ5JiS2xDPI1UZOAXTWgT3vNt4f8vIFmcRq63Wv+jCtQMyS1jsCnEM/E8haWZjO3qOrDqrp/u/sRAGwSIFqzbjjwj7W8cEgBuwQWftDFfxagMvpngLmqerNbmAm0CVci4ude87GquvNQr61lBP6cd90SrCJ6ERiO7d/7o6pe0KoY1UBDPI5lJS3Rg2mvKlUF7J4Gj/Ga7yjgtNk2wNXAC6r6+XZ3phtxmvqF1/wpl/2nIkONwFOI1x7+E/B0/d3LDXsBvwz+uG08hRWqLLEZySl4B6goYLdN6ASv+b8LOPomEfxxG3Be+F6v+cRqq3PVRuCjie9xWwM82nj3ckfwx+3hYeLzwqNITqoNVBfw8d7xg10aqB78cYa46kd+bM3kStcnCtjVRNgn2gQ81Gznck7wx9kxE9NciYluOreMSiOwr/g/iMjbiVd2H8Efp4wr3+XvaPcdAZAgYJeYz/ccIVwyTvDH6ePf8Y9x2oyRNALvD4yNHPdhKVED5QR/nB5PY7XoSmwD7OtflCRgf9n4/0I61CEJ/rjFuCSB/sBZNhsRE7DL4XqEd01Rlo2zIPjj1uJrb5JvI/wReCIwOnK8GpiXQseKTPDHrWMutv5QYix2txvAF7Bf42BOsA8NE/xxkzjtzfWaYxr1BezvNvbTxQfqJ/jj5njWO45pdEDALuqnN3JuE5asJNAagj9ujGeJL2rs4YpmAvER+EDiyakXplkeqUsJ/rhOXMXP16JNRFKaRQU80XtteHhLj+CP68PX4sB8cE9So+Pl1LoTKBH8cW34WowL2BUlHB+5QIE/pt+vgCP44+rMJ+6DJ7h49YEReE/io/Ebwf9mTvDHFRCR1dhO+BLDcOWLS6Lt9V7j1/gKZEfwx8ks9I4nwKCAd/dOLkq9O4GhCP44jp84vRcqj8BBwJ1D8MeGr8legB5Xn8CPdg9lAjqL4I/jOSMAxquq9ADbAtFfyJpQWbNj6Vp/7BKoR3PxbQmM7QHGedcuy6xXgUbpVn+83DselyRg/6JA59Jt/tjX5g5BwPmnm/xx4gjs5576S0adCbSWbvDHK7zj7XqI78AAy7weyC9F9serveNRSQIOS8jFoIj+2Bfw6CDgYlM0f+xrc3QPVnC52kWB/FMUf+yPwCN7sBysUT7IqDOB7Mm7P97gHW+eJOCwC7n45NUff+gdb5YkYP+iQDHJoz9OFPBwrzGMwN1FnvxxooADgRLvt7sD9dJD+Yjrj8iBYrMSmA7sLyL3tbszQ1Bmd4djw/Lm3kX+016gePQDtwAXi8if292ZGqko4ChhBC4+jwDfFpEX292ROqlJwBVLGgVyz0Lg3BxYhUr4MyUbeihfeRtFoGjkyedWoyzsYTgJ68sZdSaQPnn0udVIFHBZhE9GnQmkS159bjV8bb4XBFw88u5zq+Hb27XDMX8UZfuMOhNoLSuBa4AfugIpRWQH7/id4ZTvM9oxo84EWkPRfG41fG0uTxKwr/JA51JEn1sNX5uJAg4jcOdTZJ9bjbId9D3Au8SD2EdFaxAEOoqizOfWjapuC4yINL0PvNcjIgos9a7vzapjgZroB34C7C0i1xT4Ia0aE7zjJSIyUPUwMfNfoCN4BDhIRL7eBQ9p1ej1jhfBYODOYu+kr/ZA9nSrz63EeO94CQwK2B+B90y9O4FKdMN8biPs5R0vhkEBvwJsxGoPAOyqqqNCnYxM6ab53LpQ1dHAzpGmjcCr4DK0i8h64jZCgH0y6l8g+Nyh2Jd4Ec7XnWZjlYkq1uIKpMZCYIqIHNdFixGN4GvxpdIX1QScx8QXeaFr53Mb5EDveECr0e1Dz2PF5EpD9d6qOsbVqg20huBz60RVxxCvoqUkjcAishJ4PXKhAB9Pu4NdRPC5jXEIcf/7SrSGi58XYm7CiwPNEXxuc/ganBM98AU8xzs+TFXDLuXGCD63SZz2fAHHBllfwAuI79AYSbAR9RLiFlrHwcTT/67CKzkbE7CIbASe8t7kk6l0rZgEn9tajvaOZ4nIpmhDUm60Wd7xEarqJ5QIxAk+t8W4bJmHec2+NhMF/DwWI1xiBHB467pWKILPTY8jga0jx+8SmT4rUSZgFx/sK/2ElnYt/wSfmz7HecdPOG3GqJRedaZ3fKCq7tSSbuWf4HNTRlV3BA7wmh9KujZRwCKyBJuRGGgCjm9J7/JL8LnZMZn44sV8EfF3DQGVR2AoH4VPUNUtm+1ZDgk+N0NUdQvKLauvxQGqCfgJ4nnTRgHHNt613BF8bns4jngGnjUkzD6UqChgEfkA+I3XPFVVu6EsQfC5bcBp67Ne831Oi4kMJcb7iecP3hE4orHu5YLgc9vLJCA6WbAB02BFqgpYRN4FHveap6mqJF2fY4LPbTNu9D3Fa340GnmWRC124G4guny3G+VLfHkl+NzO4Rhg18jxRuBXQ71oSAGLyJvAY17zNFUdlnB5nngAOCD43PbjRt8ves2/E5E/DfXaWh/I7iJejuuj5HxeWEROFBF/G1WgPZwI7BI57gd+XssLaxKwiLwN/NZrPlVVRyRdHwjUiqqOBKZ5zQ+LyLJaXl/PlNidwPrI8RjgS3W8PhBIYhrxed/12B2/JmoWsIi8gz3QRTlJVXdJuj4QGApV3Q34W6/5F272qybqXZT4FfF8wsOBbxVwWi2QMk4z/0x8Z/wy4N563qcuAbtpplu95n0I4ZaB+jmR8oQlP613KrPuZWERmQX83ms+XVW3q/e9At2Jqm4PnOY1zxaR2fW+V6NxDTcCfZHjEQQrEaiBiHWI7rZYB/x7I+/XkICdyb7daz4ImNLI+wW6ipOBQ72220TkL428WTORZfcDL3htp6tqbxPvGSgwqro78E9e8zxsVbQhGhaw25/0r8DaSPPmwPldGvgeqIKqbgWcD0R3uK/BEnmX7XWrlaZie92wf4PXvBtwbvDDgRJOC+cQXy4G+HGj1qFE08HpIvIUFgAe5QjKA5MD3ctUyhPkzBSRJ5t941btrriJeGZLgDNU1c/rGugyVPUgyn3vq8DNrXj/lgjYbfn4PvG8asOA74aHuu7FLRVPZ7D2CpjvvapVsdct298mIiuAHxAPft8auERVt2nV9wnkA1dZ83vEq2sqcJ2I+OWNG6alGzRF5DnKl5rHAZe6p9BAF6CqWwOXUV6c+6ci8mwrv1fLdxiLyK8Bf1/ZnsCMML1WfFxeh0uBv/JOPSgidQXq1EJaW+R/Avjr2hOBi13WwUABcQmpLwQ+5p2agz3ot5xUBOxyuF5HPD0VWLLsC0K61uLh/qYXUb5MPB+42uWebjmpLja4LUdXAHt4p54HZpSK1QXyjbMNF2PxMFEWAReKyNryV7WG1FfLXJnQq7EVuigvAZeLyLq0+xBID/dccwnltdzeBKYPldehWVJPEyUiq7H/Tj+74H7AFWGKLb+4qbJrKBfvUuCitMULGYzAJdzu0xmUVx1/BxuJ/ZW8QAfjFim+R/lU2WvApVkVyMw04MZ54sspLyTeB1wpIvOy7E+gMdzy8HTiixRgD2yXi0hf+avSIfOIMeeZLgA+4Z3aiC2C3NtMeF0gPVxU2VQstsHPzPR74NqsH8zbEvLoUgmdCZyUcHo2FiOa2X9xYGjcwPMtksuuPQjclNZUWTXaGrOrqicDX03ox1Lsv3lx5p0KlOF2UpxPeTzvJuA/0lhhq5W2B52r6gHYL2esd+pD4A7gnmAp2oOzDFOAM4jvpACLKvuBiPj1tTOl7QIGUNVx2CqOv34OVhv3epcZKJARbuv7OZQvToDNNFzZyqiyRukIAcNAZcZvUF4fDGyW4mfAA2E0Thc36v4d9qC2dcIlM4GbOyWXcscIuISqTgLOJl7kucR84AYReSPbXnUHbm73bCzwymcNcKPbQtYxdJyAYeD29R3Ki92B5Y69D7grzFS0BrfIdAqW7ml4wiXzsJmhpjZgpkFHChhqupWtxpKrPNSO6Zsi4LLsnwCcSjzFaYl1wG10sHXrWAGXcOvtX8cq2CSxHPgvTMibKlwTiOAGh0nAl4GdK1z2DPCjThx1o3S8gEs4b/wVbItSEkuxxMizOnW0aDduAWkSZhd2rXDZMmxu9+nMOtYEuREwDET8n4jd8pJsBdiIfC82Iod4YwaCzY8CvkD5YkSJ9Vj+57s7ZYahFnIl4BLOVkwDPk3yQwfYU/ODmJDfzqpvnYSq7oQVzp5MsscFeyh+GHsorjkzeqeQSwGXUNUdsTodn6JybLNiO0BmYjloczO6NIKbTz8SqyK1P5X/xhuB32HCbfuCRKPkWsAlXJ2OqZiQq+23W4cFC80C5opIf5Vrc4OzCAdhNuFwKtsrsCX6R7El+iHrsHU6hRBwCbe74yTMJ1e6ZZbow56052JiTn33QCtR1bHAwcAh2EbKoUqercFS4t6Xt5+1GoUScAm3yfAo7Dbq12FIfAmWr+t5bLXvZbcVqmNQ1THYCtm+2Bae3ant7zcfeAh4slrV97xSSAFHccujx2P1nbet9WXAW1j1+iVY4sIlWT3kuHoj44EJQC+WGKaecmbvAk9gGSALvexeeAGXcJP3+2Ej8yTKwzdroQ+bJ12BTdetwFYE10Q+r8PiZPtL03guGHw49qC5NWZvRkc+74DNb5c+GqmAugrz9rOAl7plLrxrBBzFTejvhXnHQ7C8FXn7XSjwCvCs+1jYjSuRefujpYLzl/tj/nIi5i/9PV/tZiNmZV7Gcmq8mNXO304mCDgBd8vfA/OfvZgXHQ9klZxwPbAY89+L3NevhpXFcoKA68BN05V86g7Adgz62NGYd90KG72Hua8B3sdG0H5MnH2YZy755ncY9NTLijTNlTb/Dz+sKh/f1rAbAAAAAElFTkSuQmCC')";
kb.style.backgroundSize="88px";Hb=document.createElement("div");Hb.style.position="relative";Hb.style.height=lc.offsetHeight.toString()+"px";Hb.style.width=lc.offsetWidth.toString()+"px";Hb.style.background="rgba(0, 0, 0, 0.5)";Hb.style.zIndex="999";e.appendChild(Hb);Hb.appendChild(kb);Wb=function(){c.jA&&(Cb.play(),Cb.pause(),Cb.reset());if(c.gA){if(c.rc)for(var e=0;e<a.scenes.length;e++)La(a.scenes[e],c.id,!0);else La(pb,c.id,!0);ub.pause()}c.oA&&ub.iH();yb();b(c,g)};ic.add_click_listener(kb,Wb)}
function yb(){if(kb){var a=lc.parentElement;a.style.zIndex=xb;ic.remove_click_listener(kb,Wb);Hb.removeChild(kb);a.removeChild(Hb);kb=Hb=null;xb=0}}function Ya(a){(a=a.split("/").slice(0,-1).join("/"))&&(a+="/");return a}function Wa(a){qa.is_animated(a)&&qa.remove(a);qb.uS(a);ma.clear_outline_anim(a);hb.check_sensor_manifold(a)&&hb.remove_sensor_manifold(a);Na.ab(a)&&Na.remove_object(a);Ta.uH(a);zb.is_speaker(a)&&ub.KT(a);ua.is_anchor(a)&&ua.remove(a)}function nb(a){var b=qa.wF(a);return(a=b&&b.parent==
a?null:a.parent||b)?1+nb(a):0}var J=Object(G.a)(d),ua=Object(O.a)(d),qa=Object(T.a)(d),Oa=Object(r.a)(d),ab=Object(f.a)(d),sb=Object(k.a)(d),eb=Object(y.a)(d),hb=Object(x.a)(d),nc=Object(m.a)(d),Ib=Object(b.a)(d),rb=Object(p.a)(d),Rb=Object(q.a)(d),ic=Object(u.a)(d),Ka=Object(h.a)(d),Xb=Object(c.a)(d),Hc=Object(a.a)(d),qb=Object(ca.a)(d),Sb=Object(la.a)(d),ma=Object(v.a)(d),zb=Object(B.a)(d),Na=Object(C.a)(d),Y=Object(L.a)(d),Fb=Object(I.a)(d),Ic=Object(da.a)(d),Ta=Object(N.a)(d),ub=Object(U.a)(d),
Ac=Object(K.a)(d),mb=Object(D.a)(d),Cb=Object(V.a)(d),Mc=Object(F.a)(d),mc=Object(z.a)(d),ob=sb.Xk,cb=sb.wa,oc=sb.pe,gc=sb.xa,jb=sb.Qa,Gb=null,ac=null,tb="",pb=null,$b={},Fc=new Float32Array(3),dc=new Float32Array(4),pc=new Float32Array(4),Gc=R.c(),kb=null,Hb=null,xb=0,Ob=!1,Wb=null,bc=["LAMP"],Cc=["MESH","CAMERA","EMPTY"],Ec=["BSDF_PRINCIPLED","BSDF_GLOSSY","BSDF_DIFFUSE","BSDF_TRANSPARENT"],lc=null;t.is_primary_loaded=function(a){return Ka.is_primary_loaded(a)};t.update=function(){Ka.KU(Gb)};t.wT=
function(a){lc=a};t.AU=function(a,b){if(kb){Hb.style.height=b.toString()+"px";Hb.style.width=a.toString()+"px";var c=Math.round(a/2-44);kb.style.top=Math.round(b/2-44).toString()+"px";kb.style.left=c.toString()+"px"}};t.load=function(a,b,c,g,e){var h={load_main:{oc:Ka.lh,uc:!1,inputs:[],Ac:!1,Bc:500,Nc:!1,Dc:ka},duplicate_objects:{oc:Ka.Fe,uc:!1,inputs:["load_main"],Ac:!1,Bc:50,Nc:!1,Dc:ga},load_binaries:{oc:Ka.lh,uc:!1,inputs:["load_main"],Ac:!1,Bc:500,Nc:!1,Dc:Z},wait_for_shaders:{oc:Ka.Fe,uc:!1,
inputs:[],Ac:!1,Bc:50,Nc:!0,$k:aa},prepare_bindata:{oc:Ka.Fe,uc:!1,inputs:["duplicate_objects","load_binaries"],Ac:!1,Bc:100,Nc:!1,Dc:oa},prepare_bpy_data:{oc:Ka.Fe,uc:!1,inputs:["duplicate_objects","prepare_bindata"],Ac:!1,Bc:100,Nc:!1,Dc:Ia},process_objects:{oc:Ka.Fe,uc:!1,inputs:["prepare_bpy_data"],Ac:!1,Bc:150,Nc:!1,Dc:Ba},process_scenes:{oc:Ka.Fe,uc:!1,inputs:["process_objects","wait_for_shaders"],Ac:!1,Bc:300,Nc:!1,Dc:Ra},load_smaa_textures:{oc:Ka.lh,uc:!1,inputs:["process_scenes"],Ac:!1,Bc:30,
Nc:!0,Dc:va},load_shoremap:{oc:Ka.lh,uc:!1,inputs:["process_scenes"],Ac:!1,Bc:30,Nc:!0,Dc:ba},load_images:{oc:Ka.lh,uc:!0,inputs:["process_scenes"],Ac:!0,Bc:500,Nc:!1,Dc:fa},update_scenes_nla:{oc:Ka.Fe,uc:!1,inputs:["process_scenes","load_images"],Ac:!1,Bc:50,Nc:!1,Dc:Da},wait_physics_workers:{oc:Ka.Fe,uc:!1,inputs:["load_shoremap"],Ac:!1,Bc:20,Nc:!1,$k:Xa},add_physics_objects:{oc:Ka.Fe,uc:!1,inputs:["wait_physics_workers"],Ac:!1,Bc:50,Nc:!1,Dc:sa},add_objects:{oc:Ka.Fe,uc:!1,inputs:["add_physics_objects"],
Ac:!1,Bc:600,Nc:!1,Dc:Ha,$k:db,Rq:vb,Sq:{Py:[],XG:0}},init_cube_sky_dynamic_props:{oc:Ka.Fe,uc:!1,inputs:["add_objects","load_images"],Ac:!1,Bc:50,Nc:!1,Dc:Qa},init_logic_nodes:{oc:Ka.Fe,uc:!1,inputs:["update_scenes_nla","add_objects"],Ac:!1,Bc:50,Nc:!1,Dc:$a},load_speakers:{oc:Ka.lh,uc:!0,inputs:["add_objects"],Ac:!0,Bc:100,Nc:!1,Dc:Ga},mobile_media_start:{oc:Ka.Fe,uc:!1,inputs:["load_images","update_scenes_nla","load_speakers","init_logic_nodes"],Ac:!0,Bc:5,Nc:!1,Dc:wb,$k:wb},synchronize_media:{oc:Ka.Fe,
uc:!0,inputs:["mobile_media_start"],Ac:!0,Bc:50,Nc:!1,Dc:gb},prepare_nla:{oc:Ka.Fe,uc:!1,inputs:["mobile_media_start"],Ac:!1,Bc:5,Nc:!0,Dc:S},start_nla:{oc:Ka.Fe,uc:!0,inputs:["prepare_nla"],Ac:!1,Bc:5,Nc:!0,Dc:Ua}},f=Ka.Wz();f||(f=Ka.GE(),Gb={},ac={},$b={});Gb[f.tg.length]={};return Ka.KE(h,a,b,c,ea,g||jb.HD,cb.do_not_load_resources,e,!1)};t.unload=function(a){var b=Ka.Wz();if(!b||!b.tg.length||a&&!Ka.gU(b.tg[a]))Y.error("Unable to unload data!");else{if(0==a)Y.log("%cUNLOAD ALL","color: #00a"),
ua.cleanup(),qa.cleanup(),ub.cleanup(),ab.cleanup(),Ta.cleanup(),Ka.cleanup(),hb.cleanup(),Na.cleanup(),ma.cleanup(),Ib.cleanup(),Ic.cleanup(),Sb.cleanup(),Ac.cleanup(),Rb.cleanup(),Oa.cleanup(),Cb.cleanup(),Hc.cleanup(),qb.cleanup(),ic.cleanup(),rb.cleanup(),ac=null,$b={},Gb=pb=null,Ob=!1;else{Y.log("%cUNLOAD DATA "+a,"color: #00a");qa.sS(a);for(var b=ma.get_all_objects("ALL",ma.DATA_ID_ALL),c=0;c<b.length;c++){var g=b[c];zb.get_object_data_id(g)!=a&&ma.mp(g,!1,!1,!1)}b=ma.get_all_objects("ALL",
a);for(c=b.length-1;0<=c;c--)g=b[c],Wa(g),ma.remove_object(g);b=ma.get_all_objects("ALL",ma.DATA_ID_ALL);for(c=0;c<b.length;c++)ma.mp(b[c],!0,!0,!0)}Xb.cleanup(a);yb()}};t.kH=Wa;t.set_debug_resources_root=function(a){tb=a};t.activate_media=function(){Ob||cb.media_auto_activation||(Cb.play(),Cb.pause(),Cb.reset(),La(pb,ma.DATA_ID_ALL,!0),ub.pause(),cb.pA&&ub.iH(),Ob=!0)};t.reset=function(){lc=null};t.prefetch=function(a,b,c){var g={load_main:{oc:Ka.lh,uc:!1,inputs:[],Ac:!1,Bc:500,Nc:!1,Dc:ka},load_binaries:{oc:Ka.lh,
uc:!1,inputs:["load_main"],Ac:!1,Bc:500,Nc:!1,Dc:Z},load_images:{oc:Ka.lh,uc:!1,inputs:["load_main"],Ac:!1,Bc:500,Nc:!1,Dc:fa},preload_sounds:{oc:Ka.lh,uc:!1,inputs:["load_main"],Ac:!1,Bc:500,Nc:!1,Dc:Ca}},e=Ka.Wz();e||(e=Ka.GE(),Gb={},ac={},$b={});Gb[e.tg.length]={};return Ka.KE(g,a,b,c,ea,!1,cb.do_not_load_resources,!1,!0)};t.unfetch=function(){Oa.XM()}});t.a=d},function(E,t,d){E=d(0);var O=d(5),T=d(4),G=d(35),r=d(89),f=d(1),k=d(23),y=d(2),x=d(48),m=d(46);d=Object(E.a)("__assets",function(d,q){function b(){return I.aG()?
b4w.require(I.Kf.hu).data:null}function p(){var a={Ot:null,CL:function(b){switch(a.responseType){case "json":case "text":return b;case "arraybuffer":b=atob(b);for(var c=b.length,g=new Int8Array(c),e=0;e<c;e++)g[e]=b.charCodeAt(e);return g.buffer;default:return b}},status:0,readyState:0,response:"",responseType:"",onreadystatechange:null,overrideMimeType:function(){},addEventListener:function(){},open:function(b,c){a.Ot=c;a.readyState=1},send:function(){a.status=404;a.readyState=4;var c=b();c&&a.Ot in
c&&(a.status=200,c[a.Ot]&&(a.response=a.CL(c[a.Ot])));if("[object Function]"==={}.toString.call(a.onreadystatechange))a.onreadystatechange()}};return a}function h(b){for(var g=0,h=0;h<b.length;h++){var f=b[h];20===f.state&&g++;if(g>=D.AR)break;if(10===f.state)switch(f.state=20,g++,f.type){case q.AT_JSON_ZIP:case q.AT_ARRAYBUFFER:case q.AT_ARRAYBUFFER_ZIP:l(f,"arraybuffer");break;case q.AT_JSON:l(f,"json");break;case q.AT_TEXT:l(f,"text");break;case q.AT_AUDIOBUFFER:e(f);break;case q.AT_IMAGE_ELEMENT:c(f);
break;case q.AT_AUDIO_ELEMENT:a(f);break;case q.AT_VIDEO_ELEMENT:ca(f);break;case q.AT_SEQ_VIDEO_ELEMENT:t(f);break;default:H.va("Wrong asset type: "+f.type)}}}function l(a,c){var g=a.url.split("?v=")[0];if(g in z)"json"==c?a.Cc(y.O(z[g]),a.id,a.type,a.url,a.param):a.Cc(z[g],a.id,a.type,a.url,a.param);else{var e=b(),h=e&&a.url in e?new p:new XMLHttpRequest,e=null;if("GET"==a.request_method)h.open("GET",a.url,!0);else if("POST"==a.request_method)switch(h.open("POST",a.url,!0),a.type){case q.AT_TEXT:e=
"text/plain";break;case q.AT_JSON:e="application/json"}if(a.overwrite_header)for(var f in a.overwrite_header)"Content-Type"==f?e=a.overwrite_header[f]:h.setRequestHeader(f,a.overwrite_header[f]);e&&h.setRequestHeader("Content-Type",e);"text"==c?(h.overrideMimeType("text/plain"),h.responseType="text"):"json"==c?(h.overrideMimeType("application/json"),h.responseType="text"):h.responseType=c;h.onreadystatechange=function(){if(40!=a.state&&4==h.readyState){if(200==h.status||0==h.status){var b=h.response;
if(!b||"arraybuffer"==c&&0==b.byteLength)N.error("empty responce when trying to get "+a.url),a.Cc(null,a.id,a.type,a.url,a.param);else{switch(a.type){case q.AT_JSON_ZIP:try{b=r.a(b,{to:"string"})}catch(Z){N.error(Z+" (parsing gzipped file "+a.url+")");a.Cc(null,a.id,a.type,a.url,a.param);return}case q.AT_JSON:try{b=JSON.parse(b,a.SQ)}catch(Z){N.error(Z+" (parsing JSON "+a.url+")");a.Cc(null,a.id,a.type,a.url,a.param);return}break;case q.AT_ARRAYBUFFER_ZIP:try{b=r.a(b).buffer}catch(Z){N.error(Z+" (parsing gzipped file "+
a.url+")");a.Cc(null,a.id,a.type,a.url,a.param);return}}a.hf&&(z[g]=a.type==q.AT_JSON||a.type==q.AT_JSON_ZIP?y.O(b):b);a.Cc(b,a.id,a.type,a.url,a.param)}}else N.error(h.status+" when trying to get "+a.url),a.Cc(null,a.id,a.type,a.url,a.param);a.state=30}};h.addEventListener("progress",function(b){b.lengthComputable&&a.mH(b.loaded/b.total)},!1);h.send(a.post_data)}}function e(a){var c=a.url.split("?v=")[0];if(c in A)a.Cc(A[c],a.id,a.type,a.url,a.param),a.state=30;else{"GET"!=a.request_method&&H.va("Unsupported request type for audio buffer");
var e=(c=b())&&a.url in c?new p:new XMLHttpRequest;e.open("GET",a.url,!0);e.responseType="arraybuffer";e.onreadystatechange=function(){if(40!=a.state&&4==e.readyState)if(200==e.status||0==e.status){var b=e.response;b?U.yO(b,function(b){a.Cc(b,a.id,a.type,a.url,a.param);a.state=30;a.hf&&(A[a.url.split("?v=")[0]]=b)},function(){N.error("failed to decode "+a.url);a.Cc(null,a.id,a.type,a.url,a.param);a.state=30}):(N.error("empty responce when trying to get "+a.url),a.Cc(null,a.id,a.type,a.url,a.param),
a.state=30)}else N.error(e.status+" when trying to get "+a.url),a.Cc(null,a.id,a.type,a.url,a.param),a.state=30};e.send()}}function c(a){var c=a.url.split("?v=")[0];if(c in w)a.Cc(w[c],a.id,a.type,a.url,a.param),a.state=30;else{"GET"!=a.request_method&&H.va("Unsupported request type for image element");var e=document.createElement("img");K.allow_cors&&(e.crossOrigin="Anonymous");e.onload=function(){40!=a.state&&(a.Cc(e,a.id,a.type,a.url,a.param),a.state=30,a.hf&&(w[a.url.split("?v=")[0]]=e))};e.addEventListener("error",
function(){40!=a.state&&(N.error("could not load image: "+a.url),a.Cc(null,a.id,a.type,a.url,a.param),a.state=30)},!1);if((c=b())&&a.url in c)if(c[a.url]){var h=B(a.url);e.src="data:"+h+";base64,"+c[a.url]}else da.is_ie11()?(c=document.createEvent("CustomEvent"),c.initCustomEvent("error",!1,!1,null)):c=new CustomEvent("error"),e.dispatchEvent(c);else e.src=a.url}}function a(a){var c=a.url.split("?v=")[0];if(c in W)a.Cc(W[c],a.id,a.type,a.url,a.param),a.state=30;else{"GET"!=a.request_method&&H.va("Unsupported request type for audio element");
var e=document.createElement("audio");K.allow_cors&&(e.crossOrigin="Anonymous");e.addEventListener("loadeddata",function(){40!=a.state&&(a.Cc(e,a.id,a.type,a.url,a.param),a.state=30,a.hf&&(W[a.url.split("?v=")[0]]=e))},!1);e.addEventListener("error",function(){40!=a.state&&(N.error("could not load sound: "+a.url),a.Cc(null,a.id,a.type,a.url,a.param),a.state=30)},!1);e.addEventListener("stalled",function(){40!=a.state&&(N.error("could not load sound: "+a.url),a.Cc(null,a.id,a.type,a.url,a.param),a.state=
30)},!1);if((c=b())&&a.url in c)if(c[a.url]){var h=C(a.url);e.src="data:"+h+";base64,"+c[a.url];40!=a.state&&(a.Cc(e,a.id,a.type,a.url,a.param),a.state=30)}else da.is_ie11()?(c=document.createEvent("CustomEvent"),c.initCustomEvent("error",!1,!1,null)):c=new CustomEvent("error"),e.dispatchEvent(c);else e.src=a.url,K.is_mobile_device&&e.load();K.OA&&(e.autoplay=!0,e.pause());setTimeout(function(){e.vy=1},5E3)}}function ca(a){function c(){40!=a.state&&(N.error("could not load video: "+a.url,a.param),
a.Cc(null,a.id,a.type,a.url),a.state=30)}var e=a.url.split("?v=")[0];if(e in w)a.Cc(w[e],a.id,a.type,a.url,a.param),a.state=30;else{"GET"!=a.request_method&&H.va("Unsupported request type for video element");var h=document.createElement("video");h.muted=!0;K.allow_cors&&(h.crossOrigin="Anonymous");h.addEventListener("loadeddata",function(){h.removeEventListener("error",c,!1);40!=a.state&&(a.Cc(h,a.id,a.type,a.url,a.param),a.state=30,a.hf&&(w[a.url.split("?v=")[0]]=h))},!1);h.addEventListener("error",
c,!1);if((e=b())&&a.url in e)if(e[a.url]){var f=L(a.url);h.src="data:"+f+";base64,"+e[a.url];40!=a.state&&h.addEventListener("loadeddata",function(){a.Cc(h,a.id,a.type,a.url,a.param);a.state=30},!1)}else da.is_ie11()?(e=document.createEvent("CustomEvent"),e.initCustomEvent("error",!1,!1,null)):e=new CustomEvent("error"),h.dispatchEvent(e);else h.src=a.url,K.is_mobile_device&&h.load();if(K.OA||K.YF)h.autoplay=!0,h.pause();setTimeout(function(){h.vy=1},1E4)}}function t(a){function c(b){a.Cc(b,a.id,
a.type,a.url,a.param);a.state=30;a.hf&&(w[a.url.split("?v=")[0]]=b)}var e=a.url.split("?v=")[0];if(e in w)a.Cc(w[e],a.id,a.type,a.url,a.param),a.state=30;else{"GET"!=a.request_method&&H.va("Unsupported request type for seq video element");var h=(e=b())&&a.url in e?new p:new XMLHttpRequest;h.open("GET",a.url,!0);h.responseType="arraybuffer";h.onreadystatechange=function(){if(40!=a.state&&4==h.readyState)if(200==h.status||0==h.status){var b=h.response;b?v(b,c):(N.error("empty responce when trying to get "+
a.url),a.Cc(null,a.id,a.type,a.url,a.param),a.state=30)}else N.error(h.status+" when trying to get "+a.url),a.Cc(null,a.id,a.type,a.url,a.param),a.state=30};h.addEventListener("progress",function(b){b.lengthComputable&&a.mH(b.loaded/b.total)},!1);h.send()}}function v(a,b){for(var c=new Int32Array(a),g=new Int8Array(a),e=c[3],h={images:[],PD:[],zh:c[4]},f=20,d=0;d<e;d++){var k=c[f/4],l=new Blob([g.subarray(f+4,f+4+k)],{type:"image/jpg"}),n=document.createElement("img");n.src=window.URL.createObjectURL(l);
h.images.push(n);h.PD.push(l);f+=k+8-k%4}n.onload=function(){for(var a=0;a<h.images.length;a++)window.URL.revokeObjectURL(h.images[a].src);delete h.PD;b(h)}}function B(a){var b="image";switch(x.a(a).toLowerCase()){case "jpeg":case "jpg":b+="/jpeg";break;case "png":b+="/png"}return b}function C(a){var b="audio";switch(x.a(a).toLowerCase()){case "ogv":case "ogg":b+="/ogg";break;case "mp3":b+="/mpeg";break;case "m4v":case "mp4":b+="/mp4";break;case "webm":b+="/webm"}return b}function L(a){var b="video";
switch(x.a(a).toLowerCase()){case "ogv":b+="/ogg";break;case "webm":b+="/webm";break;case "m4v":case "mp4":b+="/mp4"}return b}var H=Object(O.a)(d),I=Object(T.a)(d),da=Object(G.a)(d),N=Object(f.a)(d),U=Object(k.a)(d),K=I.wa,D=I.pe;q.AT_ARRAYBUFFER=10;q.AT_ARRAYBUFFER_ZIP=20;q.AT_JSON=30;q.AT_JSON_ZIP=40;q.AT_TEXT=50;q.AT_AUDIOBUFFER=60;q.AT_IMAGE_ELEMENT=70;q.AT_AUDIO_ELEMENT=80;q.AT_VIDEO_ELEMENT=90;q.AT_SEQ_VIDEO_ELEMENT=100;var R=[],V=0,F={},z={},w={},W={},A={};q.yx=function(a){a=a.split(".");var b=
Array(2);b[0]=a.slice(0,-1).join(".");b[1]=String(a.slice(-1));return b};q.eX=function(a){if(F[a])return F[a];var b=D.prevent_caching?a+"?v="+Object(m.c)():a,c=new XMLHttpRequest;c.overrideMimeType("text/plain");c.open("GET",b,!1);c.send(null);if(200!=c.status&&c.status)H.va("Error XHR: "+c.status+", GET "+a);else{b=c.responseText;if(b.length)return F[a]=b;H.va("Error XHR: responce is empty, GET "+a)}};q.cleanup=function(){for(var a=0;a<R.length;a++)R[a].state=40;R=[];V=0;F={}};q.enqueue=function(a,
c,e,f,d){for(var g=0;g<a.length;g++){var k=a[g],k={id:k.id,type:k.type,url:k.url,hf:k.hf,request_method:k.request_method?k.request_method:"GET",overwrite_header:k.overwrite_header?k.overwrite_header:null,post_data:k.post_data?k.post_data:null,param:k.param?k.param:null,state:10,Cc:c||function(){},dH:e||function(){},mH:f||function(){},SQ:d||null,eH:V};if(D.prevent_caching){var l=b();l&&k.url in l||(k.url+="?v="+Object(m.c)())}R.push(k)}h(R);V++};q.update=function(){h(R);for(var a=R,b=0,c=!0,e=0;e<
a.length;e++){var f=a[e];f.eH===a[b].eH?30!==f.state&&(c=!1):(c&&(a[e-1].dH(),c=e-b,a.splice(b,c),e-=c),b=e,c=30===a[e].state?!0:!1);e===a.length-1&&c&&(f=a[e],a.splice(b),f.dH())}};q.OM=function(a){return"png"==a||"jpg"==a||"jpeg"==a||"gif"==a||"bmp"==a||"dds"==a||"pvr"==a?!0:!1};q.XM=function(){z={};w={};W={};A={}}});t.a=d},function(E,t,d){E=d(0);var O=d(5),T=d(4),G=d(1),r=d(17),f=d(2);d=Object(E.a)("__debug_check",function(d,y){function k(a){return-1<navigator.userAgent.toLowerCase().indexOf(a)?
!0:!1}var m=Object(O.a)(d),p=Object(T.a)(d),q=Object(G.a)(d),b=Object(r.a)(d),u=p.wa,h=-1,l=-1,e=null,c=[];y.fh=function(a){for(var b="INVALID_ENUM INVALID_VALUE INVALID_OPERATION OUT_OF_MEMORY INVALID_FRAMEBUFFER_OPERATION CONTEXT_LOST_WEBGL".split(" "),h=0;h<b.length;h++){var f=b[h];f in a&&(c[a[f]]=f)}e=a};y.uW=function(a){switch(a.toLowerCase()){case "chrome":return k("mozilla")&&k("applewebkit")&&k("chrome");case "firefox":return k("mozilla")&&k("gecko")&&k("firefox");case "msie":return k("mozilla")&&
k("trident")&&k("msie");case "opera":return k("opera")&&k("presto");case "safari":return k("mozilla")&&k("applewebkit")&&k("safari")&&!k("chrome");default:return!1}};y.bP=function(a){if(f._15(a)){for(var b=0;b<a.length;b++)if(!isFinite(a[b]))return!1;return!!a.length}return isFinite(a)?!0:!1};y.bA=function(a){if(u.gl_debug){var b=e.getError();b!=e.NO_ERROR&&(b in c?m.va("GL Error: "+b+", gl."+c[b]+" ("+a+")"):m.va("Unknown GL error: "+b+" ("+a+")"))}};y.qM=function(){if(u.gl_debug||u.cE)switch(e.checkFramebufferStatus(e.FRAMEBUFFER)){case e.FRAMEBUFFER_COMPLETE:break;
case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:q.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT");break;case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:q.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");break;case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:q.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS");break;case e.FRAMEBUFFER_UNSUPPORTED:q.error("Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED");break;case e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:q.error("Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MULTISAMPLE");
break;default:q.error("FRAMEBUFFER CHECK FAILED")}};y.AO=function(){if(-1!=l)return l;var a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a);var c=b.Qj(b.om,!1);b.resize(c,1,1);e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,c.Wb,c.hc,0);e.checkFramebufferStatus(e.FRAMEBUFFER)!=e.FRAMEBUFFER_COMPLETE?(l=!0,q.warn("depth-only issue was found")):l=!1;e.bindFramebuffer(e.FRAMEBUFFER,null);e.deleteFramebuffer(a);return l};y.JR=function(){if(1==u.Jc)return!1;if(-1!=h)return h;e.bindRenderbuffer(e.RENDERBUFFER,
e.createRenderbuffer());e.renderbufferStorageMultisample(e.RENDERBUFFER,u.Jc,e.RGBA8,1,1);var a=e.getRenderbufferParameter(e.RENDERBUFFER,e.RENDERBUFFER_SAMPLES);a!=u.Jc?(h=!0,q.warn("multisample issue was found: requested "+u.Jc+", got "+a),e.getError()==e.INVALID_OPERATION&&q.warn("the error from multisample issue detected, ignoring")):h=!1;e.bindRenderbuffer(e.RENDERBUFFER,null);return h};y.YO=function(){return k("firefox")&&e.getError()==e.OUT_OF_MEMORY?(q.warn("Firefox/old GPUs cubemap issue was found."),
!0):!1};y.reset=function(){e=null}});t.a=d},function(E,t,d){E=d(0);E=Object(E.a)("__debug_subscene",function(d,t){t.DV_NONE=0;t.DV_OPAQUE_WIREFRAME=1;t.DV_TRANSPARENT_WIREFRAME=2;t.DV_FRONT_BACK_VIEW=3;t.DV_BOUNDINGS=4;t.DV_CLUSTERS_VIEW=5;t.DV_BATCHES_VIEW=6;t.DV_RENDER_TIME=7;var G=null;t.YS=function(d){G=d};t.JP=function(){return G};t.cleanup=function(){G=null}});t.a=E},function(E,t){function d(){if("DEBUG"==G){var d=O();return[parseInt(String(d.getFullYear()).slice(-2),10),d.getMonth()+1]}return f}
function O(){return"DEBUG"==G?new Date:r}function T(){var f=O(),d=f.getDate(),d=10>d?"0"+String(d):String(d),k=f.getMonth()+1,k=10>k?"0"+String(k):String(k),p=String(f.getFullYear()),q=f.getHours(),q=10>q?"0"+String(q):String(q),b=f.getMinutes(),b=10>b?"0"+String(b):String(b),f=f.getSeconds(),f=10>f?"0"+String(f):String(f);return d+"."+k+"."+p+" "+q+":"+b+":"+f}t.e=d;t.f=function(){for(var f="",k=d(),m=0;m<k.length;m++)f=1==m?f+(10>k[m]?"0"+k[m]:k[m]):f+k[m],m!=k.length-1&&(f+=".");return f};t.d=
function(){return G};t.a=O;t.b=T;t.c=function(){if("DEBUG"!=G)return k;var f=T();return f=f.split(" ").join("").split(":").join("").split(".").join("")};var G="RELEASE",r=new Date(2017,11,29,19,18,21),f=[17,12,0],k="_b4w_ver_17_12_0_"},function(E,t,d){E=d(0);var O=d(5),T=d(4),G=d(16),r=d(30),f=d(20),k=d(36),y=d(17),x=d(18),m=d(6),p=d(2),q=d(3);d=Object(E.a)("__particles",function(b,d){function h(){a.va("_rand() undefined")}function l(a,b){return{name:a,Fw:b,time:0,Nw:-1,Zp:!1,po:1,jb:0,Sb:0,Qx:0,
Wr:0,Yv:0,cyclic:0,lf:0,fp:0,wv:0,Xj:0,Ef:0,ty:0,size:0,Rt:0,Qt:0,ru:0,qu:new Float32Array(16),uw:!1,positions:null,qs:null,Lx:null,Ws:null,vo:null,jr:null,Qg:null,Ew:null,Ox:0,Px:0}}function e(a,b,c,e,h,f){var d=a.vo,l=a.Qg,p=a.time;a=a.Nw;for(var n=0;n<d.length;n+=4){var g=d[n];if(p>a&&p>=g&&g>a||p<a&&(g>a||p>=g))for(g=0;8>g;g++)l[8*n+g]=e[g],da[g]=e[g];else for(g=0;8>g;g++)da[g]=l[8*n+g];g=N;g[0]=b[3*n];g[1]=b[3*n+1];g[2]=b[3*n+2];m.B(g,da,g);h[3*n]=g[0];h[3*n+1]=g[1];h[3*n+2]=g[2];var z=k.e(c,
n,I);k.m(z,da,z);k.n(f,z,n);for(g=1;4>g;g++)h[3*(n+g)]=h[3*n],h[3*(n+g)+1]=h[3*n+1],h[3*(n+g)+2]=h[3*n+2],k.n(f,z,n+g)}}function c(a){a?(v.ST(a),h=function(){return v.qS()}):h=function(){return Math.random()}}var a=Object(O.a)(b),u=Object(T.a)(b),t=Object(G.a)(b),v=Object(r.a)(b),B=Object(f.a)(b),C=Object(y.a)(b),L=Object(x.a)(b),H=u.wa,I=k.c(),da=new Float32Array(8),N=new Float32Array(3),U=[];d.sE=function(a){var b=l(a.name,a.type);b.time=a.time;b.Nw=a.Nw;b.Zp=a.Zp;b.po=a.po;b.jb=a.jb;b.Sb=a.Sb;
b.Qx=a.Qx;b.Wr=a.Wr;b.Yv=a.Yv;b.cyclic=a.cyclic;b.lf=a.lf;b.fp=a.fp;b.wv=a.wv;b.Xj=a.Xj;b.Ef=a.Ef;b.ty=a.ty;b.size=a.size;b.Rt=a.Rt;b.Qt=a.Qt;b.ru=a.ru;b.qu.set(a.qu);b.uw=a.uw;b.positions=p.O(a.positions);b.qs=p.O(a.qs);b.Lx=p.O(a.Lx);b.Ws=p.O(a.Ws);b.vo=p.O(a.vo);b.jr=p.O(a.jr);b.Qg=p.O(a.Qg);b.Ew=p.O(a.Ew);b.Ox=a.Ox;b.Px=a.Px;return b};d.update=function(){for(var a=0;a<U.length;a++)for(var b=U[a],c=b.Ba,h=0;h<c.length;h++)for(var f=b,d=c[h].Ia,k=0;k<d.length;k++){var l=d[k],m=l.sb;m&&m.Zp&&!l.yh&&
(e(m,m.positions,m.Lx,f.ka.na,m.qs,m.Ws),m.uw=!0)}};d.ZA=function(a){a=a.Ba;for(var b=0;b<a.length;b++)for(var c=a[b].Ia,e=0;e<c.length;e++)if(c[e].sb)return!0;return!1};d.$A=function(a,b){for(var c=a.Ba,e=0;e<c.length;e++)for(var h=c[e].Ia,f=0;f<h.length;f++){var d=h[f].sb;if(d&&d.name==b)return!0}return!1};d.YG=function(a){a=a.Ba;for(var b=0;b<a.length;b++)for(var c=a[b].Ia,e=0;e<c.length;e++){var h=c[e].sb;if(h&&"EMITTER"==h.Fw)return!0}return!1};d.tM=function(a){return 0<a.particle_systems.length};
d.sM=function(a){for(var b=0;b<a.particle_systems.length;b++)if("EMITTER"==a.particle_systems[b].settings.type)return!0;return!1};d.rQ=function(a){for(var b=0;b<a.particle_systems.length;b++){var c=a.particle_systems[b].settings;if("HAIR"==c.type&&c.b4w_dynamic_grass)return!0}return!1};d.CN=function(a,b,c){var e=a.sb=l(b.name,b.settings.type);e.jb=b.settings.frame_start;e.Sb=b.settings.frame_end;e.Qx=(e.Sb-e.jb)/L.he();e.Wr=b.settings.lifetime;e.Yv=e.Wr/L.he();e.cyclic=b.settings.b4w_cyclic?1:0;e.lf=
b.settings.mass;e.fp=b.settings.normal_factor;e.wv=9.81*b.settings.effector_weights.gravity;e.Xj=b.settings.b4w_fade_in/L.he();e.Ef=b.settings.b4w_fade_out/L.he();e.ty=b.settings.effector_weights.wind;e.Zp="WORLD"==b.settings.b4w_coordinate_system?!0:!1;var h,f,d;a.Jr?(h=c.Ko.size,f=c.Ko.Kr,30>f?(f=.5,d=.9):40>f?(f=.1,d=1):50>f?(f=0,d=.8):(f=0,d=.5)):(h=b.settings.particle_size,d=f=1);e.size=h;e.Rt=f;e.Qt=d;c.kh&&"BILLBOARD"==b.settings.render_type&&(t.dc(a,"NODES",1),t.dc(a,"PARTICLE_BATCH",1),a.bc=
!0);b=b.settings.texture_slots;b[0]&&b[0].use_map_size&&b[0].texture&&"BLEND"==b[0].texture.type&&b[0].texture.use_color_ramp&&H.Pt&&(b=b[0].texture,h=[],C.zM(b.color_ramp,C.fD,h),h=new Uint8Array(h.map(function(a){return p.M(255*a,0,255)})),h=C.EE(h,C.fD),t.$h(a,h,"u_color_ramp_tex",b.name),t.dc(a,"USE_COLOR_RAMP",1));c=c.ih;a=[-1,0,0,0,-1,0,0,0,-1,0,0,0,-1,0,0,0];if(c[0]&&"STRAND"==c[0].texture_coords&&c[0].texture&&"BLEND"==c[0].texture.type&&c[0].texture.use_color_ramp){c=c[0].texture.color_ramp.elements;
b=Math.min(4*c.length,a.length);for(h=0;h<b;h+=4)f=c[h/4],a[h]=f.position,a[h+1]=f.color[0],a[h+2]=f.color[1],a[h+3]=f.color[2];e.ru=c.length}e.qu.set(a)};d.mP=function(b,f,d,l){var m=b.sb,z=l.na;l=d.settings.count;var w=d.settings.frame_start/L.he(),u=d.settings.frame_end/L.he(),A=d.settings.lifetime/L.he(),n=d.settings.lifetime_random,g=d.settings.emit_from,v=d.settings.factor_random;if(d.settings.use_rotations)var C=d.settings.angular_velocity_mode,x=d.settings.angular_velocity_factor;else C="NONE",
x=0;var r=d.settings.b4w_randomize_emission,y=d.settings.b4w_cyclic;m.Ox=d.settings.billboard_tilt;m.Px=d.settings.billboard_tilt_random;c(d.seed);var H;f=B.eF(f,["a_position","a_tbn"],null);switch(g){case "VERT":var K=f.Va[0].a_position;H=f.Va[0].a_tbn;d=K.length/3;f=[];for(g=0;g<l;g++){var D=Math.round((d-1)*h());f.push(D);f.push(D);f.push(D);f.push(D)}d=[];for(g=0;g<f.length;g++)d.push(K[3*f[g]]),d.push(K[3*f[g]+1]),d.push(K[3*f[g]+2]);K=new Float32Array(d);d=k.c(f.length);for(g=0;g<f.length;g++)D=
k.e(H,f[g],I),k.n(d,D,g);H=d;break;case "FACE":K=[];H=[];p._13(0,H);d=B.Pz(f,l,!1,H);p._13(0,H);f=B.Pz(f,l,!0,H);H=k.c(4*d.length);for(g=0;g<d.length;g++)K.push(d[g][0],d[g][1],d[g][2]),K.push(d[g][0],d[g][1],d[g][2]),K.push(d[g][0],d[g][1],d[g][2]),K.push(d[g][0],d[g][1],d[g][2]),k.n(H,f[g],4*g),k.n(H,f[g],4*g+1),k.n(H,f[g],4*g+2),k.n(H,f[g],4*g+3);K=new Float32Array(K);break;case "VOLUME":a.va("Particle emission from volume is not supported");break;default:a.va("Wrong emit from option")}H=[K,H];
K=H[0];H=H[1];m.positions=new Float32Array(K);m.Lx=new Float32Array(H);m.qs=new Float32Array(K.length);m.Ws=new Float32Array(H.length);f=[];u=(u-w)/l;for(d=0;d<l;d++)g=r?u*d+10*u*(.5-h()):u*d,y||(g+=w),f.push(g),f.push(g),f.push(g),f.push(g);w=new Float32Array(f);m.vo=new Float32Array(w);m.jr=new Float32Array(w);if(m.Zp){m.Qg=new Float32Array(8*w.length);for(r=0;r<8*w.length;r++)for(y=0;8>y;y++)m.Qg[8*r+y]=z[y];e(m,K,H,z,K,H)}z=B.Gh("EMITTER_PARTICLES");r=B.Si();r.a_position=K;r.a_tbn=H;z.Va[0]=r;
b.fi=B.At;b=[];for(r=0;r<l;r++)b.push(4*r,4*r+2,4*r+1,4*r,4*r+3,4*r+2);b=new Uint16Array(b);z.$a=b;z.gb.a_p_bb_vertex=B.lF(l);z.Eb=K.length/3;b=[];n=A*n;for(r=0;r<l;r++)y=n*h(),b.push(A-y),b.push(A-y),b.push(A-y),b.push(A-y);A=z.gb;n=[];for(r=0;r<l;r++)y=Math.random(),n.push(b[4*r],w[4*r],y),n.push(b[4*r+1],w[4*r+1],y),n.push(b[4*r+2],w[4*r+2],y),n.push(b[4*r+3],w[4*r+3],y);n=new Float32Array(n);A.a_p_data=n;A=z.gb;n=[];for(b=0;b<l;b++){w=[h()-.5,h()-.5,h()-.5];q.normalize(w,w);n.push(v*w[0]);n.push(v*
w[1]);n.push(v*w[2]);switch(C){case "NONE":n.push(0);break;case "SPIN":case "VELOCITY":n.push(x);break;case "RAND":n.push(2*x*(h()-.5));break;default:a.va("Undefined velocity factor")}w=n.slice(-4);for(r=0;12>r;r++)n.push(w[r%4])}l=new Float32Array(n);A.a_p_vels=l;m.Ew=new Float32Array(z.gb.a_p_data);return z};d.rT=function(a,b,c){a=a.Ba;for(var e=0;e<a.length;e++)for(var h=a[e].Ia,f=0;f<h.length;f++){var d=h[f].sb;d&&d.name==b&&!h[f].yh&&(d.Nw=d.time,d.time=c)}};d.set_size=function(a,b,c){a=a.Ba;
for(var e=0;e<a.length;e++)for(var h=a[e].Ia,f=0;f<h.length;f++){var d=h[f].sb;d&&d.name==b&&(d.size=c)}};d.set_normal_factor=function(a,b,c){a=a.Ba;for(var e=0;e<a.length;e++)for(var h=a[e].Ia,f=0;f<h.length;f++){var d=h[f].sb;d&&d.name==b&&(d.fp=c)}};d.cX=function(a,b){for(var c=a.Ba,e=0;e<c.length;e++)for(var h=c[e].Ia,f=0;f<h.length;f++){var d=h[f].sb;if(d&&d.name==b)return d.fp}return 0};d.set_factor=function(a,b,c){a=a.Ba;for(var e=0;e<a.length;e++)for(var h=a[e].Ia,f=0;f<h.length;f++){var d=
h[f],k=d.sb;if(k&&k.name==b){k.po=c;var l=k.vo;if(1==c)var n=l;else if(0==c)for(var n=k.jr,g=0;g<n.length;g+=4)n[g]=1E4,n[g+1]=n[g],n[g+2]=n[g],n[g+3]=n[g];else for(var m=4/c,n=k.jr,p=0,g=0;g<n.length;g+=4)g>=p?(n[g]=l[g],p+=m):n[g]=1E4,n[g+1]=n[g],n[g+2]=n[g],n[g+3]=n[g];d=d.Za;if(d.mc.a_p_data){k=k.Ew;for(g=0;g<k.length;g+=3)k[g+1]=n[Math.round(g/3)];B.GI(d,"a_p_data",3,k)}}}};d.OU=function(a,b,c){a=a.Ba;for(var e=0;e<a.length;e++)for(var h=a[e].Ia,f=0;f<h.length;f++){var d=h[f].sb;if(d&&d.Zp)for(var k=
0;k<8*d.vo.length;k++)d.Qg[8*k]=b[0],d.Qg[8*k+1]=b[1],d.Qg[8*k+2]=b[2],d.Qg[8*k+3]=b[3],d.Qg[8*k+4]=c[0],d.Qg[8*k+5]=c[1],d.Qg[8*k+6]=c[2],d.Qg[8*k+7]=c[3]}};d.GU=function(a,b,c){a.gb.a_tbn=k.c(4*c);k.i(a.gb.a_tbn);if(b.ks){for(var e=[],h=0;h<c;h++)e.push(h,h,h,h);a.gb[b.ks.name]=new Float32Array(e)}};d.FU=function(a){-1==U.indexOf(a)&&U.push(a)};d.uS=function(a){a=U.indexOf(a);-1!=a&&U.splice(a,1)};d.cleanup=function(){U.length=0}});t.a=d},function(E,t){function d(d){if(""==d)return".";var t=0==
d.indexOf("/")|0;t&&0==d.indexOf("//")&&0!=d.indexOf("///")&&(t=2);d=d.split("/");for(var G=[],r=0;r<d.length;r++){var f=d[r];""!=f&&"."!=f&&(".."!=f||!t&&!G.length||G.length&&".."==G[G.length-1]?G.push(f):G.length&&G.pop())}d=G.join("/");for(r=0;r<t;r++)d="/"+d;return d||"."}t.b=function(t){var O=t.split("://",2);return 1<O.length?(O[1]=d(O[1]),O.join("://")):d(t)};t.a=function(d){return/(?:\.([^.]+))?$/.exec(d)[1]}},function(E,t,d){E=d(0);var O=d(38),T=d(14),G=d(4),r=d(15),f=d(8),k=d(1),y=d(10),
x=d(7);d=Object(E.a)("input",function(d,p){function m(h){c.df("enable_split_screen","screen.request_split_screen");var f=b.get_device_by_type_element(b.DEVICE_HMD);if(!f)return!1;if(v)return!0;var d=b.get_vector_param(f,b.LC,ca),k=b.get_vector_param(f,b.MC,t);u.set_hmd_fov(h,d,k);if(d=b.get_value_param(f,L))k=a.get_active(),h=e.lb(h,k).Sa,u.set_eye_distance(h,d);h={base_line_factor:.5,inter_lens_factor:.5,enable_hmd_stereo:!0};b.get_value_param(f,b.HMD_WEBVR_TYPE)&(b.HMD_NON_WEBVR|b.HMD_WEBVR_MOBILE|
b.HMD_WEBVR_DESKTOP)&&(h.distortion_coefs=[f.distortion_coefs[0],f.distortion_coefs[1]],h.chromatic_aberration_coefs=[f.chromatic_aberration_coefs[0],f.chromatic_aberration_coefs[1],f.chromatic_aberration_coefs[2],f.chromatic_aberration_coefs[3]],f.Vn||(f.Ki&&f.$i&&f.Li?h.base_line_factor=(f.Ki-f.Li)/f.$i:f.Li||(h.base_line_factor=f.Ki/f.$i)),f.ki&&f.lm&&!f.Vn&&(h.inter_lens_factor=f.ki/f.lm),B.enabled||(d=1+f.distortion_coefs[0]+f.distortion_coefs[1],a.tw(d,d)));a.set_hmd_params(h);l.resize_to_container(!0);
b.reset_device(f);return v=!0}var b=Object(O.a)(d),u=Object(T.a)(d),h=Object(G.a)(d),l=Object(r.a)(d),e=Object(f.a)(d),c=Object(k.a)(d),a=Object(y.a)(d),ca=x.create(),t=x.create(),v=!1,B=h.Km,C=h.wa;p.GMPD_BUTTON_12=b.GMPD_BUTTON_12;p.GMPD_BUTTON_13=b.GMPD_BUTTON_13;p.GMPD_BUTTON_15=b.GMPD_BUTTON_15;p.GMPD_BUTTON_14=b.GMPD_BUTTON_14;p.GMPD_BUTTON_3=b.GMPD_BUTTON_3;p.GMPD_BUTTON_0=b.GMPD_BUTTON_0;p.GMPD_BUTTON_1=b.GMPD_BUTTON_1;p.GMPD_BUTTON_2=b.GMPD_BUTTON_2;p.GMPD_BUTTON_5=b.GMPD_BUTTON_5;p.GMPD_BUTTON_7=
b.GMPD_BUTTON_7;p.GMPD_BUTTON_4=b.GMPD_BUTTON_4;p.GMPD_BUTTON_6=b.GMPD_BUTTON_6;p.GMPD_BUTTON_8=b.GMPD_BUTTON_8;p.GMPD_BUTTON_9=b.GMPD_BUTTON_9;p.GMPD_BUTTON_10=b.GMPD_BUTTON_10;p.GMPD_BUTTON_11=b.GMPD_BUTTON_11;p.GMPD_BUTTON_16=b.GMPD_BUTTON_16;p.GMPD_BUTTON_17=b.GMPD_BUTTON_17;p.GMPD_BUTTON_18=b.GMPD_BUTTON_18;p.GMPD_BUTTON_19=b.GMPD_BUTTON_19;p.GMPD_BUTTON_20=b.GMPD_BUTTON_20;p.GMPD_BUTTON_21=b.GMPD_BUTTON_21;p.GMPD_BUTTON_22=b.GMPD_BUTTON_22;p.GMPD_BUTTON_23=b.GMPD_BUTTON_23;p.GMPD_BUTTON_24=
b.GMPD_BUTTON_24;p.GMPD_BUTTON_25=b.GMPD_BUTTON_25;p.GMPD_TRACKPAD_BUTTON=b.GMPD_TRACKPAD_BUTTON;p.GMPD_TRIGGER_BUTTON=b.GMPD_TRIGGER_BUTTON;p.GMPD_GRIPS_BUTTON=b.GMPD_GRIPS_BUTTON;p.GMPD_MENU_BUTTON=b.GMPD_MENU_BUTTON;p.GMPD_AXIS_0=b.GMPD_AXIS_0;p.GMPD_AXIS_1=b.GMPD_AXIS_1;p.GMPD_AXIS_2=b.GMPD_AXIS_2;p.GMPD_AXIS_3=b.GMPD_AXIS_3;p.GMPD_AXIS_4=b.GMPD_AXIS_4;p.GMPD_AXIS_5=b.GMPD_AXIS_5;p.GMPD_AXIS_6=b.GMPD_AXIS_6;p.GMPD_AXIS_7=b.GMPD_AXIS_7;p.GMPD_AXIS_8=b.GMPD_AXIS_8;p.GMPD_AXIS_9=b.GMPD_AXIS_9;p.GMPD_AXIS_10=
b.GMPD_AXIS_10;p.GMPD_AXIS_11=b.GMPD_AXIS_11;p.HMD_ORIENTATION_QUAT=b.HMD_ORIENTATION_QUAT;p.HMD_POSITION=b.HMD_POSITION;p.HMD_WEBVR_TYPE=b.HMD_WEBVR_TYPE;p.HMD_WEBVR_DESKTOP=b.HMD_WEBVR_DESKTOP;p.HMD_WEBVR_MOBILE=b.HMD_WEBVR_MOBILE;p.HMD_NON_WEBVR=b.HMD_NON_WEBVR;p.HMD_WEBVR1=b.HMD_WEBVR1;p.HMD_WEBVR1_1=b.HMD_WEBVR1_1;var L=b.HMD_EYE_DISTANCE;p.HMD_EYE_DISTANCE=L;p.HMD_DISTORTION=b.HMD_DISTORTION;p.HMD_BASELINE_DIST=b.HMD_BASELINE_DIST;p.HMD_SCREEN_LENS_DIST=b.HMD_SCREEN_LENS_DIST;p.HMD_SCREEN_WIDTH=
b.HMD_SCREEN_WIDTH;p.HMD_SCREEN_HEIGHT=b.HMD_SCREEN_HEIGHT;p.HMD_BEVEL_SIZE=b.HMD_BEVEL_SIZE;p.MOUSE_LOCATION=b.MOUSE_LOCATION;p.MOUSE_DOWN_WHICH=b.MOUSE_DOWN_WHICH;p.MOUSE_UP_WHICH=b.MOUSE_UP_WHICH;p.MOUSE_WHEEL=b.MOUSE_WHEEL;p.KEYBOARD_UP=b.KEYBOARD_UP;p.KEYBOARD_DOWN=b.KEYBOARD_DOWN;p.TOUCH_START=b.TOUCH_START;p.TOUCH_MOVE=b.TOUCH_MOVE;p.TOUCH_END=b.TOUCH_END;p.GYRO_ORIENTATION_QUAT=b.GYRO_ORIENTATION_QUAT;p.GYRO_ORIENTATION_ANGLES=b.GYRO_ORIENTATION_ANGLES;var H={};H[b.DEVICE_HMD]=[b.HMD_ORIENTATION_QUAT,
b.HMD_POSITION];H[b.DEVICE_MOUSE]=[b.MOUSE_LOCATION];var I={};I[b.DEVICE_HMD]=[b.HMD_WEBVR_TYPE];var da={};da[b.DEVICE_MOUSE]=[b.MOUSE_LOCATION,b.MOUSE_DOWN_WHICH,b.MOUSE_UP_WHICH,b.MOUSE_WHEEL];da[b.DEVICE_KEYBOARD]=[b.KEYBOARD_UP,b.KEYBOARD_DOWN];da[b.DEVICE_TOUCH]=[b.TOUCH_START,b.TOUCH_MOVE,b.TOUCH_END];da[b.DEVICE_GYRO]=[b.GYRO_ORIENTATION_QUAT,b.GYRO_ORIENTATION_ANGLES];var N={};N[b.DEVICE_HMD]=[b.HMD_DISTORTION,b.HMD_EYE_DISTANCE,b.HMD_BASELINE_DIST,b.HMD_SCREEN_LENS_DIST,b.HMD_SCREEN_WIDTH,
b.HMD_SCREEN_HEIGHT,b.HMD_BEVEL_SIZE];p.DEVICE_GYRO=b.DEVICE_GYRO;p.DEVICE_HMD=b.DEVICE_HMD;p.DEVICE_MOUSE=b.DEVICE_MOUSE;p.DEVICE_KEYBOARD=b.DEVICE_KEYBOARD;p.DEVICE_TOUCH=b.DEVICE_TOUCH;p.can_use_device=b.can_use_device;p.get_device_by_type_element=b.get_device_by_type_element;p.switch_prevent_default=function(a,c){a&&b.switch_prevent_default(a,c)};p.register_device=function(){c.Pa("input.register_device() deprecated")};p.reset_device=function(a){a&&a.type==b.DEVICE_HMD?b.reset_device(a):c.error("reset_device is undefined for device.")};
p.get_vector_param=function(a,e,h){if(a&&a.type in H&&0<=H[a.type].indexOf(e))return b.get_vector_param(a,e,h);c.error("device hasn't param: ",e);return null};p.get_value_param=function(a,e){if(a&&a.type in I&&0<=I[a.type].indexOf(e))return b.get_value_param(a,e);c.error("device hasn't param: ",e);return null};p.attach_param_cb=function(a,e,h){h=h||null;if(a&&a.type in da&&0<=da[a.type].indexOf(e))return b.attach_param_cb(a,e,h);c.error("device hasn't param: ",e)};p.detach_param_cb=function(a,e,h){h=
h||null;if(a&&a.type in da&&0<=da[a.type].indexOf(e))return b.detach_param_cb(a,e,h);c.error("device hasn't param: ",e)};p.set_config=function(a,e,h){if(a&&a.type in N&&0<=N[a.type].indexOf(e))return b.set_config(a,e,h);c.error("device hasn't config: ",e)};p.request_fullscreen_hmd=function(){c.df("request_fullscreen_hmd","screen.request_fullscreen_hmd");if(a.xb()){var e=a.ml(a.get_active());if(e&&(m(e),e=b.get_device_by_type_element(b.DEVICE_HMD))){var h=e.$d;h&&!h.isPresenting&&(h.capabilities.canPresent?
(e=l.get_canvas(),h.requestPresent([{source:e}]).then(function(){if(!C.is_mobile_device){var a=h.getEyeParameters("left"),b=h.getEyeParameters("right");l.resize(2*Math.max(a.renderWidth,b.renderWidth),Math.max(a.renderHeight,b.renderHeight),!1)}},function(){c.error("HMD fullscreen request failed.")})):c.error("HMD fullscreen request failed."))}}};p.enable_split_screen=m;p.disable_split_screen=function(){c.df("disable_split_screen","screen.exit_split_screen");var e=b.get_device_by_type_element(b.DEVICE_HMD);
if(!v||!e||!e.eh)return!1;a.set_hmd_params({enable_hmd_stereo:!1});e=1/(1+e.distortion_coefs[0]+e.distortion_coefs[1]);a.tw(e,e);l.resize_to_container(!0);return!0};p.set_gamepad_key=function(a,c,e){switch(a){case 0:a=b.zt;break;case 1:a=b.By;break;case 2:a=b.Cy;break;case 3:a=b.Dy;break;default:a=b.zt}a=b.get_device_by_type_element(a);b.set_config(a,c,e)};p.get_pressed_gmpd_btn=b.get_pressed_gmpd_btn;p.get_moved_gmpd_axis=b.get_moved_gmpd_axis;p.get_gamepad_position=b.get_gamepad_position;p.get_gamepad_orientation=
b.get_gamepad_orientation;p.check_enable_gamepad_indices=function(){for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=[],c=0;c<a.length;c++)a[c]&&b.push(c);return b};p.get_vr_controller_id=function(a){for(var b=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],c=0,e=0;4>c;c++){var h=b[c];if(h&&(""==h.id||"OpenVR Gamepad"==h.id||"Oculus Touch (Left)"==h.id||"Oculus Touch (Right)"==
h.id)){if(e==a)return e;e++}}return a};p.add_click_listener=function(a,c){a&&c&&b.add_click_listener(a,c)};p.remove_click_listener=function(a,c){a&&c&&b.remove_click_listener(a,c)}});t.a=d},function(E,t,d){E=d(0);var O=d(14),T=d(15),G=d(4),r=d(51),f=d(38),k=d(79),y=d(8),x=d(1),m=d(10),p=d(7);d=Object(E.a)("screen",function(d,b){function u(){}function h(){}function l(a,b,c){function e(){document.fullscreenElement===a||document.webkitFullscreenElement===a||document.mozFullScreenElement===a||document.webkitIsFullScreen||
document.msFullscreenElement===a?b():(document.removeEventListener("fullscreenchange",e,!1),document.removeEventListener("webkitfullscreenchange",e,!1),document.removeEventListener("mozfullscreenchange",e,!1),document.removeEventListener("MSFullscreenChange",e,!1),c())}a=a||q.get_container();b=b||function(){};c=c||function(){};document.addEventListener("fullscreenchange",e,!1);document.addEventListener("webkitfullscreenchange",e,!1);document.addEventListener("mozfullscreenchange",e,!1);document.addEventListener("MSFullscreenChange",
e,!1);a.wB=a.wB||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullscreen;a.wB?a.wB():H.error("B4W App: request fullscreen method is not supported")}function e(){var a=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;"function"!=typeof a&&H.error("B4W App: exit fullscreen method is not supported");a.apply(document)}function c(b){var c=B.get_device_by_type_element(B.DEVICE_HMD);if(c&&!U){var e=B.get_value_param(c,B.HMD_WEBVR_TYPE);
if(e&B.HMD_WEBVR1_1){var h=c.$d,f=h.getEyeParameters("left"),h=h.getEyeParameters("right");q.resize(2*Math.max(f.renderWidth,h.renderWidth),Math.max(f.renderHeight,h.renderHeight),!1)}else f=q.get_canvas(),f=Math.max(2*f.height,f.width),q.resize(f,f/2,!1);f=B.get_vector_param(c,B.LC,da);h=B.get_vector_param(c,B.MC,N);a.set_hmd_fov(b,f,h,!(e&B.HMD_WEBVR1_1));f={base_line_factor:.5,inter_lens_factor:.5,enable_hmd_stereo:!0};e&(B.HMD_NON_WEBVR|B.HMD_WEBVR_MOBILE|B.HMD_WEBVR_DESKTOP)&&(f.distortion_coefs=
[c.distortion_coefs[0],c.distortion_coefs[1]],f.chromatic_aberration_coefs=[c.chromatic_aberration_coefs[0],c.chromatic_aberration_coefs[1],c.chromatic_aberration_coefs[2],c.chromatic_aberration_coefs[3]],c.Vn||(c.Ki&&c.$i&&c.Li?f.base_line_factor=(c.Ki-c.Li)/c.$i:c.Li||(f.base_line_factor=c.Ki/c.$i)),c.ki&&c.lm&&!c.Vn&&(f.inter_lens_factor=c.ki/c.lm));K.enabled||I.tw(.5,1);I.set_hmd_params(f);if(c=B.get_value_param(c,B.HMD_EYE_DISTANCE))e=I.get_active(),b=L.lb(b,e).Sa,a.set_eye_distance(b,c);I.vS();
U=!0}}var a=Object(O.a)(d),q=Object(T.a)(d),t=Object(G.a)(d),v=Object(r.a)(d),B=Object(f.a)(d),C=Object(k.a)(d),L=Object(y.a)(d),H=Object(x.a)(d),I=Object(m.a)(d),da=p.create(),N=p.create(),U=!1,K=t.Km;b.draw_mixer_strip=v.draw_mixer_strip;b.plot_array=v.plot_array;b.request_fullscreen=l;b.exit_fullscreen=e;b.check_fullscreen=B.check_fullscreen;b.request_fullscreen_hmd=function(a,b,c){if("HMD"!=!t.get("stereo")||"NONE"==t.get("stereo")&&t.get("is_mobile_device")){var e=B.get_device_by_type_element(B.DEVICE_HMD);
if(e&&B.get_value_param(e,B.HMD_WEBVR_TYPE)&B.HMD_WEBVR1){var h=e.$d;h&&!h.isPresenting&&(b=b||function(){},c=c||function(){},u=function(){h.isPresenting?b():(window.removeEventListener("vrdisplaypresentchange",u),c())},window.addEventListener("vrdisplaypresentchange",u,!1),h.capabilities.canPresent?(a=q.get_canvas(),h.requestPresent([{source:a}]).then(function(){},function(){H.error("HMD fullscreen request failed.")})):H.error("HMD fullscreen request failed."))}else l(a,b,c)}};b.exit_fullscreen_hmd=
function(){if("HMD"!=!t.get("stereo")||"NONE"==t.get("stereo")&&t.get("is_mobile_device")){var a=B.get_device_by_type_element(B.DEVICE_HMD);a&&B.get_value_param(a,B.HMD_WEBVR_TYPE)&B.HMD_WEBVR1?(a=a.$d)&&a.isPresenting&&(a.exitPresent(),q.resize_to_container(!0)):e()}};b.check_fullscreen_hmd=function(){var a=B.get_device_by_type_element(B.DEVICE_HMD),b=B.get_value_param(a,B.HMD_WEBVR_TYPE)&B.HMD_WEBVR1;return a&&(b&&a.$d||!b&&B.check_fullscreen())?!0:!1};b.request_split_screen=function(a,b){var e=
B.get_device_by_type_element(B.DEVICE_HMD);if(!e)return!1;if(U)return!0;h=b;if(I.xb()){var f=I.ml(I.get_active());f&&(e.eh?(c(f),a&&a()):(B.CS(e),e.As=function(){c(f);a&&a()}))}};b.exit_split_screen=function(){var a=B.get_device_by_type_element(B.DEVICE_HMD);if(!U||!a||!a.eh)return!1;I.set_hmd_params({enable_hmd_stereo:!1});U=!1;h&&h();I.wS();K.enabled||I.tw(2,1);q.resize_to_container(!0);return!0};b.shot=function(a,b){a=a||"image/png";C.canvas_data_url(function(b){var c="screenshot."+a.split("/")[1];
navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(b,c):(c=window.document.createElement("a"),document.body.appendChild(c),c.style.display="none",c.href=b,c.download="screenshot."+a.split("/")[1],c.click(),document.body.removeChild(c))},a,b||1,!0)}});t.a=d},function(E,t,d){E=d(0);var O=d(31),T=d(11);d=Object(E.a)("__hud",function(d,r){function f(b){b.font="bold 15px Courier New";b.textBaseline="middle";b.shadowBlur=0;b.shadowColor=null}function k(e){y(' SCENE "'+e.name+'"');y(" Active                 Subscene   Lamps   Size   RenderCalls   Time");
if(e.sa){var c=0,a=0,h=0;q.Oa(e.sa.fb,function(e,f){if(f.type!=b.Uk){for(var d=Math.round(f.qa.width)+"x"+Math.round(f.qa.height),k=0,l=0;l<f.Hb.length;l++)k+=f.Hb[l].ub.length;l=f.el;if(f.type==b.ae||f.type==b.Sf)k*=6;var m=f.Ec&&!f.Rm,p=m?f.cg:0;f.enqueue||(f.cg=0);var u=m?" (\u2713)":" (\u2715)",v=b.Gx(f);y(u,v,f.kp,d,l,"of",k,"  ",p.toFixed(3));f.el=0;c+=k;m&&(a+=l,h+=p)}});return[c,a,h]}y("No INFO")}function y(){for(var b=80+20*l[0],c=arguments[0],a=1;a<arguments.length;a++){for(var f="",d=0;d<
u[a]-String(arguments[a]).length;d++)f+=" ";c+=f+arguments[a]}l[0]++;h.fillText(c,30,b)}function x(b,c,a){c=b.cd*c;a.x=b.x+c;a.y=b.y;a.cd=b.cd-2*c;a.yc=b.yc}function m(b){return b.x+b.cd/2}function p(b){var c=h,a={x:0,y:0,cd:0,yc:0},e=c.canvas.width,c=c.canvas.height;a.x=0;a.y=0;a.cd=e;a.yc=c;x(a,.01,a);e=.02*a.yc;a.x=a.x;a.y+=e;a.cd=a.cd;a.yc=a.yc-2*e;e=a.cd/8;a.x+=e*b;a.y=a.y;a.cd=e;a.yc=a.yc;x(a,.02,a);return a}var q=Object(O.a)(d),b=Object(T.a)(d),u=[5,30,4,10,5,3,5],h=null,l=[0,0];r.init=function(b){b=
b.getContext("2d");f(b);return h=b};r.Hn=function(){h&&f(h)};r.reset=function(){var b=h;b&&(b.clearRect(0,0,b.canvas.width,b.canvas.height),b.fillStyle="rgba(0,0,0,0.5)",b.fillRect(0,0,b.canvas.width,b.canvas.height),l[0]=0,l[1]=0)};r.CT=function(b,c){var a=h;if(a){a.textAlign="left";a.fillStyle="rgba(0,255,0,255)";y(" FPS",(1/c).toFixed(2));l[0]++;for(var e=a=0,f=0,d=0;d<b.length;d++){var m=k(b[d]),a=a+m[0],e=e+m[1],f=f+m[2];l[0]++}y(" ----------------------------------------------------------------");
y("    ","TOTAL ACTIVE","","",e,"of",a,"  ",f.toFixed(3))}};r.print=function(){var b=h;b&&(b.textAlign="left",b.fillStyle="rgba(0,255,0,255)",y.apply(Math,arguments))};r.plot_array=function(b,c,a,f,d,k,l){var e=h;if(e){c=p(c);var u=c.yc/5;c.x=c.x;c.y+=4*u;c.cd=c.cd;c.yc=u;e.textAlign="center";e.fillStyle="#00FF00";h.fillText(b,m(c),c.y-10);e.strokeStyle="#00FF00";e.lineWidth=.5;e.beginPath();e.moveTo(c.x,c.y);e.lineTo(c.x+c.cd,c.y);e.lineTo(c.x+c.cd,c.y+c.yc);e.lineTo(c.x,c.y+c.yc);e.closePath();
e.stroke();if(!k&&!l)for(k=1E6,l=-1E6,b=0;b<a.length;b++)k=Math.min(k,a[b]),l=Math.max(l,a[b]);e.textAlign="right";h.fillText(String(k),c.x-10,c.y+c.yc);h.fillText(String(l),c.x-10,c.y);e.textAlign="center";h.fillText(String(f),c.x,c.y+c.yc+15);h.fillText(String(d),c.x+c.cd,c.y+c.yc+15);e.strokeStyle="#FF0000";e.lineWidth=1.5;e.beginPath();f=c.cd/(a.length-1);l=c.yc/(l-k);for(b=0;b<a.length;b++)d=c.x+f*b,u=c.y+c.yc-(a[b]-k)*l,b?e.lineTo(d,u):e.moveTo(d,u);e.stroke()}};r.draw_mixer_strip=function(b,
c,a,f,d,k,l){var e=h;if(e)for(e.textAlign="center",e.fillStyle="#00FF00",e.font="bold 12px Courier",a=p(a),h.fillText(c?"["+b+"]":b,m(a),a.y),0<=k&&h.fillText(k?"[M]":"[ ]",m(a)-15,a.y+30),0<=l&&h.fillText(l?"[S]":"[ ]",m(a)+15,a.y+30),b={x:0,y:0,cd:0,yc:0},c=0;c<f.length;c++){k=f[c];var u="VOLUME"==k[0];if(u){l=a.y+350;var v=a.cd,q=b;q.x=a.x;q.y=l;q.cd=v;q.yc=250}else{l=a.y+50+50*c;var v=a.cd,q=a.yc,x=b;x.x=a.x;x.y=l;x.cd=v;x.yc=q}l=e;var v=b,x=c==d,B=k[0],q=k[1],r=k[2],y=k[3],G=(y-r)/k[4],G=1>G?
Math.floor(1/G-1E-5).toFixed(0).length:0;k=k[5]?Math.log(q/r)/Math.log(y/r):(q-r)/(y-r);l.textAlign="center";x?l.fillText("["+B+"]",m(v),v.y):l.fillText(B,m(v),v.y);l.strokeStyle="#00FF00";l.lineWidth=u?3:1;u?(l.textAlign="right",l.fillText(y.toFixed(G),m(v)-10,v.y+15),l.textAlign="right",l.fillText(r.toFixed(G),m(v)-10,v.y+v.yc-15)):(l.textAlign="right",l.fillText(r.toFixed(G),v.x+28,v.y+15),l.textAlign="left",l.fillText(y.toFixed(G),v.x+v.cd-28,v.y+15));l.beginPath();if(u){var t=v.y+15+(v.yc-30)*
(1-k);l.moveTo(m(v),v.y+15);l.lineTo(m(v),v.y+v.yc-15);l.moveTo(m(v)-5,v.y+15);l.lineTo(m(v)+5,v.y+15);l.moveTo(m(v)-5,v.y+v.yc-15);l.lineTo(m(v)+5,v.y+v.yc-15);l.moveTo(m(v)-5,t);l.lineTo(m(v)+5,t)}else{var ca=v.x+30+(v.cd-60)*k;l.moveTo(v.x+30,v.y+15);l.lineTo(v.x+v.cd-30,v.y+15);l.moveTo(v.x+30,v.y+15-5);l.lineTo(v.x+30,v.y+15+5);l.moveTo(v.x+v.cd-30,v.y+15-5);l.lineTo(v.x+v.cd-30,v.y+15+5);l.moveTo(ca,v.y+15-5);l.lineTo(ca,v.y+15+5)}l.stroke();"EQ_Q"==B?(k=Math.log(1+1/(2*q*q)+Math.sqrt((2+1/
(q*q))*(2+1/(q*q))/4-1))/Math.log(2),u?(l.textAlign="left",l.fillText(q.toFixed(G),m(v)+10,t),l.textAlign="left",l.fillText("("+k.toFixed(G+1)+")",m(v)+10,t+10)):(l.textAlign="right",l.fillText(q.toFixed(G),ca,v.y+30),l.textAlign="left",l.fillText("("+k.toFixed(G+1)+")",ca,v.y+30))):u?(l.textAlign="left",l.fillText(q.toFixed(G),m(v)+10,t)):(l.textAlign="center",l.fillText(q.toFixed(G),ca,v.y+30))}}});t.a=d},function(E,t,d){E=d(0);var O=d(37),T=d(12),G=d(8),r=d(1),f=d(10),k=d(23),y=d(17),x=d(18),m=
d(2);d=Object(E.a)("__nla",function(d,q){function b(a,b){for(var c=B.uP(),e=[],h=0,f=0;f<a.length;f++){var d=a[f];""!=d.yq?d=m._18("uuid",d.yq,c):(d=d.Hg,d=m._18("name",d,c)||m._18("name",d+"_B4W_BAKED",c));if(d){var d=d.fcurves,k=[],g;for(g in d)k.push(g);e.push(k)}}for(f=0;f<e.length;f++){c=!1;for(g=0;g<f;g++)if(m.E(e[f],e[g])){a[f].ed=a[g].ed;c=!0;break}c||(a[f].ed=b+h++)}return h}function p(){return{type:"CLIP",jb:0,Sb:0,wk:!1,paused:!1,Hg:"",yq:"",ed:0,qn:null,Wk:0,qm:0,dF:0,cF:0,YI:!1,scale:1,
repeat:1,vD:0}}function h(a,b,c){if(a.animation_data){var e=a.animation_data.nla_tracks;if(e)for(var f=0;f<e.length;f++)e[f].qn=c,b.push(e[f])}a=a.nodes;for(f=0;f<a.length;f++)if(e=a[f],e.node_group){var d=e.node_group.node_tree;if(d){var k=c.slice();k.push(e.name);h(d,b,k)}}}function l(a,b){var c=Math.round(a)-b.jb;b.Mk&&(c%=b.kl,0>c&&(c+=b.kl));return b.Mc+c}function e(a,b){var c=(b-D)*U.he()+a.Mc;c>a.jb?(c-=a.jb,a.cyclic&&(c%=a.Sb-a.jb+1),c+=a.jb):c=a.jb;return c}function c(a,b){a=m.M(a,b.jb,b.Sb);
var c=a==b.Sb?b.vD:b.Wk+(a-b.jb)/b.scale%(b.qm-b.Wk);b.YI&&(c=b.qm-c+b.Wk);return c}function a(a,b){for(var c=[],e=0;e<a.length;e++){var h=a[e],f=h.strips;if(f)for(var d=0;d<f.length;d++){var k=f[d],g=p();g.type=k.type;g.jb=k.frame_start;g.Sb=k.frame_end;g.ed=b;g.Wk=k.action_frame_start;g.qm=k.action_frame_end;g.YI=k.use_reverse;g.scale=k.scale;g.repeat=k.repeat;k.action&&(g.Hg=k.action.name,g.yq=k.action.uuid,g.qn=h.qn);c.push(g)}}return c}function t(a){return("SPEAKER"==a.type||"LAMP"==a.type)&&
a.data.animation_data&&a.data.animation_data.nla_tracks.length?!0:!1}function la(a){if("MESH"!=a.type||!a.data)return!1;a=a.data.materials;if(!a)return!1;for(var b=0;b<a.length;b++){var c=a[b],e=c.ke;if(c=c.kh&&e)a:{if(e.animation_data&&(c=e.animation_data.nla_tracks)&&c.length){c=!0;break a}e=e.nodes;for(c=0;c<e.length;c++);c=!1}if(c)return!0}return!1}function v(a,b){var c=I.get_active();if(c.pb){var h=e(c.pb,b);c.pb.Mc-=h-a;c.pb.Fo=!0}}var B=Object(O.a)(d),C=Object(T.a)(d),L=Object(G.a)(d),H=Object(r.a)(d),
I=Object(f.a)(d),da=Object(k.a)(d),N=Object(y.a)(d),U=Object(x.a)(d),K=[],D=-1;q.Yx=function(c,e){for(var f,d=null,k=e.Ba.length-1;0<=k&&(f=e.Ba[k],!f.Kb.b4w_use_nla||(d=f,!f.Kb.rD));k--);if(f=d){f.ZG=!0;d=0;if((k=c.animation_data)&&k.nla_tracks.length){var l=k.nla_tracks;if(L.is_armature(e)||L.is_camera(e)||L.is_mesh(e)||L.is_empty(e)||L.is_line(e)||L.is_lamp(e)||L.is_speaker(e)||L.is_world(e))l=a(l,d),l.length&&(e.If=e.If.concat(l),d++)}t(c)&&(l=c.data.animation_data.nla_tracks,l=a(l,d),l.length&&
(e.If=e.If.concat(l),d++));if(L.is_mesh(e))for(var m=e.Sc,k=0;k<m.length;k++){var n=m[k];n.kh&&n.ke&&(l=[],h(n.ke,l,[n.name]),l=a(l,d),l.length&&(d+=b(l,d),e.If=e.If.concat(l)))}if(L.is_world(e))c.use_nodes&&c.node_tree&&(l=[],h(c.node_tree,l,[c.name]),l=a(l,d),l.length&&(b(l,d),e.If=e.If.concat(l)));else{for(k=0;k<c.particle_systems.length;k++)l=c.particle_systems[k],m=l.settings,"EMITTER"==m.type&&m.b4w_allow_nla&&(m=p(),m.type="CLIP",m.jb=f.Kb.frame_start,m.Sb=f.Kb.frame_end+1,m.Hg=l.name,m.ed=
d,m.Wk=m.jb,m.qm=m.Sb,e.If.push(m),d++);f=d+1;for(k=0;k<e.Jd.length;k++)l=e.Jd[k],l.FL&&(d=f,m=p(),m.type="CLIP",m.jb=l.jb,m.Sb=l.Sb,m.Hg=l.name,m.ed=d,m.Wk=m.jb,m.qm=m.Sb,e.If.push(m))}}};q.JU=function(a,b,c){a.pb||(a.pb={jb:a.frame_start,Sb:a.frame_end,Mc:0,Ur:-1,ts:a.frame_end,us:a.frame_start,Pn:null,cyclic:b,Tb:[],Ua:[],BH:a.name,xl:!1,Fo:!1,yB:!0},K.push(a.pb));b=a.pb;for(var e=C.FF(a,"ALL",c),h=0;h<e.length;h++){var f=e[h];if(f.If.length){b.Tb[c]||(b.Tb[c]=[]);for(var d=0;d<f.Ba.length;d++){var k=
f.Ba[d];k.Kb==a&&k.ZG&&b.Tb[c].push(f)}for(var d=f.If,k=b,g=f.name,l=0;l<d.length;l++){var u=d[l];k.jb>u.Sb||k.Sb<u.jb?(H.warn("NLA: Strip is out of scene range: "+(g+" ["+u.jb+":"+u.Sb+"]")),d.splice(l,1),l--):u.Hg||"CLIP"!=u.type||(H.warn('NLA: no action in strip for object "'+g+'".'),d.splice(l,1),l--)}f=f.If;d=b;for(k=0;k<f.length;k++){for(var g=f[k],l=d.jb,u=d.Sb+1,v=0;v<f.length;v++){var q=f[v];g.ed==q.ed&&(q.Sb<=g.jb&&(l=g.jb),q.jb>=g.Sb&&(u=Math.min(u,q.jb)))}g.dF=l;g.cF=u;g.vD=g.repeat%1?
g.Wk+g.repeat%1*(g.qm-g.Wk):g.qm}}}a=a.sa.iq;for(h=0;h<a.length;h++)e=a[h].sa,e.hm&&(e.Pb||e.me)&&e.kq==c&&(f=p(),f.type="VIDEO",e.Mk?(f.jb=0,f.Sb=b.Sb):(f.jb=m.M(e.jb,0,b.Sb),f.Sb=m.M(e.jb+e.kl,0,b.Sb)),f.Hg=a[h].name,b.Ua.push(e))};q.lS=function(){for(var a=0;a<K.length;a++)for(var b=K[a],c=0;c<b.Tb.length;c++){var e=b.Tb[c];if(e)for(a=0;a<e.length;a++)for(var h=e[a],f=h.If,d=0;d<f.length;d++){var k=f[d];B.BQ(h,k.qn,k.nd,k.Hg,k.ed)}}};q.start=function(){D=0};q.dQ=function(){return D};q.bX=function(a){return a.pb?
a.pb.Mc:null};q.gY=function(a,b){return a.pb?(a.pb.Mc=b,!0):!1};q.update=function(a,b){if(!(0>D)){0==D&&(D=a);for(var h=0;h<K.length;h++){var f=K[h];f.xl&&(f.Mc-=U.he()*b);var d=e(f,a);if((!f.xl||f.Fo)&&d>=f.ts)if(f.cyclic){var d=f,k=a;d.Pn&&d.Pn();v(d.us,k);d.yB=!0;d=e(d,k)}else{var k=f,p=d;k.xl=!0;k.Mc-=p-k.ts;k.Pn&&k.Pn()}if(!f.xl||f.Fo){for(var k=f,p=d,n=0;n<k.Tb.length;n++){var g=k.Tb[n];if(g)for(var u=0;u<g.length;u++){for(var q=g[u],C=q.If,x=0;x<C.length;x++){var r=C[x];"SOUND"==r.type&&p<
k.Ur-1E-6&&(r.wk=!1)}for(x=0;x<C.length;x++)switch(r=C[x],r.type){case "CLIP":if(r.dF<=p&&p<r.cF&&!r.wk){var n=q,y=r,L=y.qn;""!=y.yq?B.YL(n,L,y.yq,y.ed):B.apply(n,L,y.Hg,y.ed);B.set_behavior(n,B.AB_FINISH_STOP,y.ed);L=c(y.jb,y);B.set_frame(n,L,y.ed);for(n=0;n<C.length;n++)C[n]!=r&&C[n].ed==r.ed&&(C[n].wk=!1);r.wk=!0}r.wk&&(y=q,L=c(p,r),1E-6<Math.abs(L-B.Tz(y,r.ed))&&B.set_frame(y,L,r.ed));break;case "SOUND":if((p<k.Ur-1E-6||k.Ur<r.jb)&&r.jb<=p&&p<r.Sb&&!r.wk){var y=q,H=r,L=(H.jb-p)/U.he(),H=(H.Sb-
H.jb)/U.he();da.play(y,L,H);r.wk=!0}k.Ur<r.Sb&&r.Sb<=p&&r.wk&&(r.wk=!1)}}}k=a;p=f;g=d;for(u=0;u<p.Ua.length;u++)if(q=p.Ua[u],q.Pb||q.me){C=N.fJ(q);x=q;r=m.M(l(g,x),x.Mc,x.Mc+N.gJ(x)-1);x.me&&(r=N.bV(x,r),r==x.Is&&r--);x=r;r=N.hJ(q);y=n=!1;if(p.Fo||p.yB)y=!0;p.xl||(L=l(g,q),L=q.Mc<=L&&L<=q.Mc+N.gJ(q),H=N.iJ(q),q.Mk&&x==r&&(y=!0),H||C==x||(y=!0),L&&!H?N.play_video(q):L&&H?n=!0:!L&&H&&(q.Pb&&C<x?n=!0:N.pause_video(q)));y?(N.bT(q.st,x,q.kq),q.me&&(q.Ql=N.Xw(q,k))):n&&N.jJ(q)&&(q.Pb?N.QI(q):(C=N.Xw(q,
k),C!=q.Ql&&(q.yk=x,N.OI(q)),q.Ql=C))}f.Ur=d}f.Fo=!1;f.yB=!1}}};q.cleanup=function(a){if(0==a)K.length=0,D=-1;else for(var b=0;b<K.length;b++)K[b].Tb[a]=null};q.SD=function(a){var b=a.animation_data;return b&&b.nla_tracks.length||t(a)||la(a)?!0:!1};q.set_frame=v;q.get_frame=function(a){var b=I.get_active();return b.pb?e(b.pb,a):-1};q.WB=function(){var a=I.get_active();if(a.pb){a.pb.xl=!0;for(var a=a.pb.Ua,b=0;b<a.length;b++)N.pause_video(a[b])}};q.jH=function(a){var b=I.get_active();b.pb&&(b.pb.xl=
!1,a?b.pb.Pn=a:b.pb.Pn=null)};q.get_frame_start=function(){var a=I.get_active();return a.pb?a.pb.jb:-1};q.get_frame_end=function(){var a=I.get_active();return a.pb?a.pb.Sb:-1};q.is_play=function(){var a=I.get_active();return a.pb?!a.pb.xl:!1};q.check_nla=function(){var a=I.get_active();return a.pb?a.b4w_use_nla:!1};q.check_logic_nodes=function(){var a=I.get_active();return a.pb?0<a.b4w_logic_nodes.length:!1};q.set_range=function(a,b){var c=I.get_active();if(c.pb)c.pb.us=a,c.pb.ts=b;else return!1};
q.IB=function(a){var b=I.get_active();b.pb&&(b.pb.ts=a)};q.kT=function(a){var b=I.get_active();b.pb&&(b.pb.us=a)};q.reset_range=function(){var a=I.get_active();if(a.pb)a=a.pb,a.us=a.jb,a.ts=a.Sb;else return!1};q.set_cyclic=function(a){var b=I.get_active();if(b.pb)b.pb.cyclic=a;else return!1};q.clear_callback=function(){var a=I.get_active();a.pb&&(a.pb.Pn=null)};q.OH=function(a){var b=I.get_active().pb;b&&(b.Mc=-(a-D)*U.he()+b.us,b.Fo=!0)};q.get_frame_end=function(){var a=I.get_active().pb;return a?
a.Sb:null}});t.a=d},function(E,t,d){E=d(0);var O=d(5),T=d(4),G=d(15),r=d(38),f=d(12),k=d(1),y=d(19),x=d(9),m=d(18),p=d(6),q=d(2),b=d(3);d=Object(E.a)("__controls",function(d,h){function l(a,c){c||(c=da.get_container());return{type:a,value:0,Na:null,element:c,Db:!1,key:0,Rb:"",Qi:!1,lz:null,kz:function(){},jz:null,tE:function(){},qj:null,from:new Float32Array(3),to:new Float32Array(3),ZF:!1,Kv:!1,ws:0,qH:function(){},axis:"",jh:0,Rp:new Float32Array(3),Qw:new Float32Array(4),threshold:0,oH:new Float32Array(4),
Zt:0,Yt:0,xH:0,$t:0,dh:0,repeat:!1,bF:!1,gamepad_id:0,position:b.create(),orientation:x.create(),callback:function(){}}}function e(a){function c(){return{bl:new Float32Array(2),Vo:!0,obj:null,identifier:-1,sj:0}}a||(a=da.get_container());for(var e=0;e<n.length;e++){var h=n[e];if(a==h.element)return h}h={element:a,Pr:!0,lg:0,uA:!0,qw:0,rw:0,on:0,pn:0,ns:0,os:0,Ai:new Float32Array(2),tf:new Float32Array(2),Bi:new Float32Array(2),Nf:new Float32Array(2),Ux:0,mC:0,yI:0,gg:new Uint8Array(256),sy:0,cA:null,
jj:c(),Jk:Array(10),vA:!1,LF:x.create(),Av:0,zv:0,yv:0,fA:0,eA:0,xv:Infinity,dB:null,cB:null,TA:null,PA:null,RA:null,kC:null,jC:null,SA:null,QA:null,mB:null,HX:null,lC:null,iC:null,hC:null,uk:{}};for(e=0;10>e;++e)h.Jk[e]=c();h.dB=function(a){h.vA||(N.oQ(a,h.LF),h.vA=!0)};h.cB=function(a){a=b.copy(a,ka);h.yv=a[0];h.zv=a[1];h.Av=a[2];Infinity==h.xv&&(h.xv=a[0],h.eA=a[1],h.fA=a[2])};h.TA=function(a){h.sy+=a*V.GR};h.PA=function(a){var b=N.get_device_by_type_element(N.DEVICE_MOUSE,h.element),b=N.get_vector_param(b,
N.MOUSE_LOCATION,g);h.qw=b[0];h.rw=b[1];h.on=b[0];h.pn=b[1];if(3==h.lg||0==h.lg)h.lg=1;h.which=a};h.RA=function(){var a=N.get_device_by_type_element(N.DEVICE_MOUSE,h.element),a=N.get_vector_param(a,N.MOUSE_LOCATION,g),a=da.client_to_canvas_coords(a[0],a[1],g);h.jj.Vo=!1;h.jj.bl[0]=a[0];h.jj.bl[1]=a[1]};h.kC=function(a){for(var b=0;b<a.length;++b){for(var c=a[b],e=null,f=null,d=0;d<h.Jk.length;d++){var k=h.Jk[d],l=3==k.sj||0==k.sj;if(k.identifier==c.identifier){l&&(f=k);break}else!e&&l&&(e=k,e.identifier=
c.identifier)}if(c=f||e)e=da.client_to_canvas_coords(a[b].clientX,a[b].clientY,g),c.Vo=!1,c.sj=1,c.bl[0]=e[0],c.bl[1]=e[1]}};h.jC=function(a){for(var b=0;b<h.Jk.length;++b){for(var c=h.Jk[b],g=!1,e=0;e<a.length;++e)if(a[e].identifier==c.identifier){g=!0;break}g||(0!=c.sj&&(c.sj=3),c.obj=null)}};h.SA=function(a){var b=N.get_device_by_type_element(N.DEVICE_MOUSE,h.element),b=N.get_vector_param(b,N.MOUSE_LOCATION,g);h.qw=b[0];h.rw=b[1];h.on=b[0];h.pn=b[1];0!=h.lg&&(h.lg=3);h.which=a};h.QA=function(a){F.Jv&&
0==h.lg||(h.on=a[0],h.pn=a[1])};h.mB=function(a){h.ns+=a[0];h.os+=a[1]};h.mG=function(a){2!=h.gg[a]&&(h.gg[a]=1,h.Pr=!1)};h.oG=function(){for(var a=0;a<h.gg.length;a++)0!=h.gg[a]&&(h.gg[a]=3,h.Pr=!1)};h.pG=function(a){h.Pr=!1;h.gg[a]=3};h.lC=function(a){h.uA=!1;if(1==a.length)h.Ai[0]=a[0].clientX,h.Ai[1]=-1,h.Bi[0]=a[0].clientY,h.Bi[1]=-1;else if(1<a.length){h.Ux=h.mC=C(a);h.Ai[0]=a[0].clientX;h.Ai[1]=a[1].clientX;h.Bi[0]=a[0].clientY;h.Bi[1]=a[1].clientY;var b=a[0];a=a[1];h.yI=Math.atan2(b.clientY-
a.clientY,b.clientX-a.clientX)}h.tf.set(h.Ai);h.Nf.set(h.Bi)};h.iC=function(a){1===a.length?(h.tf[0]=a[0].clientX,h.tf[1]=-1,h.Nf[0]=a[0].clientY,h.Nf[1]=-1):1<a.length&&(h.tf[0]=a[0].clientX,h.tf[1]=a[1].clientX,h.Nf[0]=a[0].clientY,h.Nf[1]=a[1].clientY,h.Ux=C(a))};h.hC=function(a){0==a.length&&(h.uA=!0)};n.push(h);return h}function c(a,b){if(b in a.uk&&0<a.uk[b])a.uk[b]+=1;else switch(a.uk[b]=1,b){case "orientation_quat":var c=N.get_device_by_type_element(N.DEVICE_GYRO);c&&N.attach_param_cb(c,N.GYRO_ORIENTATION_ANGLES,
a.dB);break;case "orientation_angles":(c=N.get_device_by_type_element(N.DEVICE_GYRO))&&N.attach_param_cb(c,N.GYRO_ORIENTATION_ANGLES,a.cB);break;case "mouse_wheel":(c=N.get_device_by_type_element(N.DEVICE_MOUSE,a.element))&&N.attach_param_cb(c,N.MOUSE_WHEEL,a.TA);break;case "mouse_down_which":(c=N.get_device_by_type_element(N.DEVICE_MOUSE,a.element))&&N.attach_param_cb(c,N.MOUSE_DOWN_WHICH,a.PA);break;case "mouse_select":(c=N.get_device_by_type_element(N.DEVICE_MOUSE,a.element))&&N.attach_param_cb(c,
N.MOUSE_DOWN_WHICH,a.RA);break;case "touch_select":if(c=N.get_device_by_type_element(N.DEVICE_TOUCH,a.element))N.attach_param_cb(c,N.TOUCH_START,a.kC),N.attach_param_cb(c,N.TOUCH_END,a.jC);break;case "mouse_up_which":(c=N.get_device_by_type_element(N.DEVICE_MOUSE,a.element))&&N.attach_param_cb(c,N.MOUSE_UP_WHICH,a.SA);break;case "mouse_location":(c=N.get_device_by_type_element(N.DEVICE_MOUSE,a.element))&&N.attach_param_cb(c,N.MOUSE_LOCATION,a.QA);break;case "mouse_pointerlock":(c=N.get_device_by_type_element(N.DEVICE_MOUSE,
a.element))&&N.attach_param_cb(c,N.TC,a.mB);break;case "keyboard_downed_keys":if(c=N.get_device_by_type_element(N.DEVICE_KEYBOARD,a.element))N.attach_param_cb(c,N.KEYBOARD_DOWN,a.mG),N.attach_param_cb(c,N.SC,a.oG),N.attach_param_cb(c,N.KEYBOARD_UP,a.pG);break;case "touch_start":(c=N.get_device_by_type_element(N.DEVICE_TOUCH,a.element))&&N.attach_param_cb(c,N.TOUCH_START,a.lC);break;case "touch_move":(c=N.get_device_by_type_element(N.DEVICE_TOUCH,a.element))&&N.attach_param_cb(c,N.TOUCH_MOVE,a.iC);
break;case "touch_end":(c=N.get_device_by_type_element(N.DEVICE_TOUCH,a.element))&&N.attach_param_cb(c,N.TOUCH_END,a.hC)}}function a(a,b){if(b in a.uk&&0<a.uk[b]&&(--a.uk[b],!a.uk[b]))switch(b){case "orientation_quat":var c=N.get_device_by_type_element(N.DEVICE_GYRO);c&&N.detach_param_cb(c,N.GYRO_ORIENTATION_QUAT,a.dB);break;case "orientation_angles":(c=N.get_device_by_type_element(N.DEVICE_GYRO))&&N.detach_param_cb(c,N.GYRO_ORIENTATION_ANGLES,a.cB);break;case "mouse_wheel":(c=N.get_device_by_type_element(N.DEVICE_MOUSE,
a.element))&&N.detach_param_cb(c,N.MOUSE_WHEEL,a.TA);break;case "mouse_down_which":(c=N.get_device_by_type_element(N.DEVICE_MOUSE,a.element))&&N.detach_param_cb(c,N.MOUSE_DOWN_WHICH,a.PA);break;case "mouse_select":(c=N.get_device_by_type_element(N.DEVICE_MOUSE,a.element))&&N.detach_param_cb(c,N.MOUSE_DOWN_WHICH,a.RA);break;case "touch_select":if(c=N.get_device_by_type_element(N.DEVICE_TOUCH,a.element))N.detach_param_cb(c,N.TOUCH_START,a.kC),N.detach_param_cb(c,N.TOUCH_END,a.jC);break;case "mouse_up_which":(c=
N.get_device_by_type_element(N.DEVICE_MOUSE,a.element))&&N.detach_param_cb(c,N.MOUSE_UP_WHICH,a.SA);break;case "mouse_location":(c=N.get_device_by_type_element(N.DEVICE_MOUSE,a.element))&&N.detach_param_cb(c,N.MOUSE_LOCATION,a.QA);break;case "mouse_pointerlock":(c=N.get_device_by_type_element(N.DEVICE_MOUSE,a.element))&&N.detach_param_cb(c,N.TC,a.mB);break;case "keyboard_downed_keys":if(c=N.get_device_by_type_element(N.DEVICE_KEYBOARD,a.element))N.detach_param_cb(c,N.KEYBOARD_DOWN,a.mG),N.detach_param_cb(c,
N.SC,a.oG),N.detach_param_cb(c,N.KEYBOARD_UP,a.pG);break;case "touch_start":(c=N.get_device_by_type_element(N.DEVICE_TOUCH,a.element))&&N.detach_param_cb(c,N.TOUCH_START,a.lC);break;case "touch_move":(c=N.get_device_by_type_element(N.DEVICE_TOUCH,a.element))&&N.detach_param_cb(c,N.TOUCH_MOVE,a.iC);break;case "touch_end":(c=N.get_device_by_type_element(N.DEVICE_TOUCH,a.element))&&N.detach_param_cb(c,N.TOUCH_END,a.hC)}}function u(a,b){a.value=Number(b)}function t(a){for(var b=a.xk,c=a.PS,g=0;g<b.length;g++)c[g]=
b[g].value;return a.uR(c)}function v(a,b){a=a||w;var c=a.zi;if(c){var g=a.Bn;if(b){var e=c[b];if(e){for(var h=e.xk,f=0;f<h.length;f++){var d=h[f],k;k=W.indexOf(d);k=-1<k?A[k]:[];1==k.length?(B(d),d=W.indexOf(d),-1<d?(W.splice(d,1),A.splice(d,1)):H.va("Sensors cache is corrupted")):1<k.length&&k.splice(k.indexOf(e),1)}delete c[b];f=g.indexOf(e);-1<f?g.splice(f,1):H.va("Incorrect manifolds array");Object.getOwnPropertyNames(c).length||(c=z.indexOf(a),-1<c?z.splice(c,1):K.error("Wrong object"))}}else{g=
[];for(f in c)g.push(f);for(f=0;f<g.length;f++)v(a,g[f])}M=!0}}function B(b){switch(b.type){case 90:D.remove_collision_test(b.lz,b.Rb,b.kz);b.Db=!0;break;case 100:D.clear_collision_impulse_test(b.jz);b.Db=!0;break;case 110:D.remove_ray_test(b.ws);b.Db=!0;break;case 140:b.Db=!0;break;case 20:var c=e(b.element);a(c,"keyboard_downed_keys");b.Db=!0;break;case 30:c=e(b.element);a(c,"mouse_wheel");b.Db=!0;break;case 40:c=e(b.element);a(c,"mouse_down_which");a(c,"mouse_up_which");a(c,"mouse_location");b.Db=
!0;break;case 280:c=e(b.element);a(c,"mouse_pointerlock");b.Db=!0;break;case 50:c=e(b.element);a(c,"mouse_down_which");a(c,"mouse_up_which");b.Db=!0;break;case 60:c=e(b.element);a(c,"touch_start");a(c,"touch_move");a(c,"touch_end");b.Db=!0;break;case 70:c=e(b.element);a(c,"touch_start");a(c,"touch_move");b.Db=!0;break;case 75:c=e(b.element);a(c,"touch_start");a(c,"touch_move");b.Db=!0;break;case 80:c=e(b.element);a(c,"touch_start");a(c,"touch_end");b.Db=!0;break;case 170:c=e(b.element);a(c,"mouse_select");
a(c,"touch_select");a(c,"touch_start");a(c,"touch_end");a(c,"mouse_down_which");a(c,"mouse_up_which");b.Db=!0;break;case 180:case 190:c=e(b.element);a(c,"orientation_angles");b.Db=!0;break;case 200:c=e(b.element);a(c,"orientation_quat");b.Db=!0;break;case 210:case 220:b.Db=!0}}function C(a){var b=a[0],c=a[1];a=b.clientX-c.clientX;b=b.clientY-c.clientY;return Math.sqrt(a*a+b*b)}function L(a){return 0==a?N.get_device_by_type_element(N.zt):1==a?N.get_device_by_type_element(N.By):2==a?N.get_device_by_type_element(N.Cy):
N.get_device_by_type_element(N.Dy)}var H=Object(O.a)(d),I=Object(T.a)(d),da=Object(G.a)(d),N=Object(r.a)(d),U=Object(f.a)(d),K=Object(k.a)(d),D=Object(y.a)(d),R=Object(m.a)(d),V=I.controls,F=I.wa,z=[],w={},W=[],A=[],n=[],g=new Float32Array(2),ea=new Float32Array(2),ka=b.create(),wa=x.create(),M=!1,E=0;h.CT_POSITIVE=10;h.CT_CONTINUOUS=20;h.CT_TRIGGER=30;h.CT_SHOT=40;h.CT_LEVEL=50;h.CT_CHANGE=60;h.PL_SINGLE_TOUCH_MOVE=0;h.PL_MULTITOUCH_MOVE_ZOOM=1;h.PL_MULTITOUCH_MOVE_PAN=2;h.PL_MULTITOUCH_MOVE_ROTATE=
3;var Z=1;h.update=function(a,c){for(var f=0;f<n.length;f++){var d=n[f];d.jj.Vo||(d.jj.obj=U.pick_object(d.jj.bl[0],d.jj.bl[1]),d.jj.Vo=!0,d.cA=d.jj.obj);for(var k=0;10>k;++k){var l=d.Jk[k];l.Vo||(l.obj=U.pick_object(l.bl[0],l.bl[1]),l.Vo=!0,d.cA=l.obj)}}for(f=0;f<W.length;f++)if(d=W[f],l=a,k=c)switch(d.type){case 120:var m=d.qj,v=p.i(m.ka.na,ka),m=p.f(m.ka.na,wa),A=b.dist(d.Rp,v),C=d.oH;x.invert(d.Qw,C);x.multiply(m,C,C);x.normalize(C,C);C=Math.abs(2*Math.acos(C[3]));A/=k;d.Zt=q._50(A,d.Zt,k,.3);
d.Na[0]=A;A=C/k;d.Yt=q._50(A,d.Yt,k,.3);d.Na[1]=A;d.Zt>=d.threshold||d.Yt>=d.xH?u(d,1):u(d,0);b.copy(v,d.Rp);x.copy(m,d.Qw);d.jh=l;break;case 130:m=d.qj;v=p.i(m.ka.na,ka);m=Math.abs(v[1]-d.Rp[1])/k;d.$t=q._50(m,d.$t,k,.3);d.Na=m;d.$t>=d.threshold?u(d,1):u(d,0);b.copy(v,d.Rp);d.jh=l;break;case 140:!d.Db&&0<=d.dh&&l-d.jh>=d.dh&&(u(d,1),d.repeat?d.jh=l:d.dh=-d.dh);break;case 150:d.jh||(d.jh=l);u(d,l-d.jh);d.jh=l;break;case 160:u(d,l);break;case 180:l=e(d.element);d.Na[0]=l.Av-l.fA;d.Na[1]=l.zv-l.eA;
d.Na[2]=l.yv-l.xv;break;case 190:l=e(d.element);d.Na[0]=l.Av;d.Na[1]=l.zv;d.Na[2]=l.yv;break;case 200:l=e(d.element);x.copy(l.LF,d.Na);break;case 210:k=N.get_device_by_type_element(N.DEVICE_HMD);N.get_vector_param(k,N.HMD_ORIENTATION_QUAT,d.Na);break;case 220:k=N.get_device_by_type_element(N.DEVICE_HMD);N.get_vector_param(k,N.HMD_POSITION,d.Na);break;case 240:k=L(d.gamepad_id);d.value=N.VP(k,d.key);break;case 250:k=L(d.gamepad_id);d.value=N.UP(k,d.key);break;case 260:k=L(d.gamepad_id);N.get_gamepad_position(k,
d.Na);u(d,1);break;case 270:k=L(d.gamepad_id);N.get_gamepad_orientation(k,d.Na);u(d,1);break;case 230:u(d,d.callback());break;case 30:l=e(d.element);u(d,l.sy);break;case 40:l=e(d.element);if(!F.Jv||1==l.lg||2==l.lg)switch(v=l.on-l.qw,m=l.pn-l.rw,d.Na.coords[0]=l.on,d.Na.coords[1]=l.pn,d.axis){case "X":u(d,v);break;case "Y":u(d,m);break;case "XY":k=Math.sqrt(v*v+m*m),u(d,k)}break;case 280:l=e(d.element);v=l.ns;m=l.os;A=q._50(v,0,k,.1*Z);k=q._50(m,0,k,.1*Z);.01<Math.abs(v)||.01<Math.abs(m)?(l.ns-=A,
l.os-=k,d.Na.coords[0]=A,d.Na.coords[1]=k):(d.Na.coords[0]=0,d.Na.coords[1]=0);u(d,Math.sqrt(v*v+m*m));break;case 50:l=e(d.element);u(d,0!=l.lg|0);d.Na.which=l.which;d.Na.coords[0]=l.on;d.Na.coords[1]=l.pn;break;case 170:l=e(d.element);u(d,0);if(d.bF)l.cA==d.qj&&u(d,1);else if(0!=l.lg&&l.jj.obj==d.qj)u(d,1);else for(k=0;10>k;++k)if(v=l.Jk[k],0!=v.sj&&v.obj==d.qj){u(d,1);break}break;case 20:l=e(d.element);d.Na=l.gg[d.key];1==d.Na||l.gg[0]&&16==d.key?u(d,1):d.Na||u(d,0);break;case 60:l=e(d.element);
if(-1==l.tf[1]&&-1==l.Nf[1]){v=l.tf[0]-l.Ai[0];m=l.Nf[0]-l.Bi[0];k=Math.sqrt(v*v+m*m);if(-1!=l.Ai[1]&&-1!=l.Bi[1]){var A=l.tf[0]-l.Ai[1],C=l.Nf[0]-l.Bi[1],r=Math.sqrt(A*A+C*C);r<k&&(v=A,m=C,k=r)}d.Na.gesture=h.PL_SINGLE_TOUCH_MOVE}else k=g,k[0]=(l.tf[0]+l.tf[1])/2,k[1]=(l.Nf[0]+l.Nf[1])/2,m=ea,m[0]=(l.Ai[0]+l.Ai[1])/2,m[1]=(l.Bi[0]+l.Bi[1])/2,v=k[0]-m[0],m=k[1]-m[1],k=Math.sqrt(v*v+m*m),d.Na.gesture=h.PL_MULTITOUCH_MOVE_PAN;d.Na.coords[0]=l.tf[0];d.Na.coords[1]=l.Nf[0];switch(d.axis){case "X":u(d,
v);break;case "Y":u(d,m);break;case "XY":u(d,k)}break;case 70:l=e(d.element);k=l.Ux-l.mC;d.Na=h.PL_MULTITOUCH_MOVE_ZOOM;u(d,k);break;case 75:l=e(d.element);-1!=l.tf[1]&&(k=Math.atan2(l.Nf[0]-l.Nf[1],l.tf[0]-l.tf[1]),d.Na=h.PL_MULTITOUCH_MOVE_ROTATE,u(d,k-l.yI));break;case 80:l=e(d.element),d.Na.coords[0]=l.tf[0],d.Na.coords[1]=l.Nf[0],l.uA?u(d,0):u(d,1)}for(f=0;f<z.length;f++)for(l=z[f],d=l.Bn,k=0;k<d.length;k++)if(v=d[k],v.fm!=E){v.fm=E;C=v;m=0;switch(C.type){case h.CT_POSITIVE:m=(A=t(C))?1:0;break;
case h.CT_CONTINUOUS:m=C.fk;(A=t(C))?(m=1,C.fk=1):1==m?(m=-1,C.fk=-1):m=0;break;case h.CT_TRIGGER:m=C.fk;(A=t(C))&&-1==m?(m=1,C.fk=1):A||1!=m?m=0:(m=-1,C.fk=-1);break;case h.CT_SHOT:m=C.fk;(A=t(C))&&-1==m?(m=1,C.fk=1):A||1!=m?m=0:(m=0,C.fk=-1);break;case h.CT_LEVEL:A=t(C);C.rG!=A?(m=1,C.rG=A):m=0;break;case h.CT_CHANGE:A=C.xk;C=C.XQ;for(r=0;r<A.length;r++){var B=A[r].value;m||B==C[r]||(m=1);C[r]=B}break;default:H.va("Wrong sensor manifold type: "+C.type)}if(m&&(A=l==w?null:l,M=!1,v.callback(A,v.id,
m,v.CM),M)){f=-1;break}}for(f=0;f<z.length;f++)for(l=z[f],d=l.Bn,k=0;k<d.length;k++)for(v=d[k],l=v.xk,v=0;v<l.length;v++)switch(m=l[v],m.type){case 30:u(m,0);break;case 40:u(m,0);break;case 60:u(m,0);break;case 70:u(m,0);break;case 75:u(m,0);break;case 80:u(m,0);break;case 140:u(m,0)}for(f=0;f<n.length;f++){d=n[f];if(!d.Pr){for(k=0;k<d.gg.length;k++)1==d.gg[k]?d.gg[k]=2:3==d.gg[k]&&(d.gg[k]=0);d.Pr=!0}1==d.lg?d.lg=2:3==d.lg&&(d.lg=0);for(k=0;k<d.Jk.length;k++)l=d.Jk[k],1==l.sj?l.sj=2:3==l.sj&&(l.sj=
0);d.sy=0;d.qw=d.on;d.rw=d.pn;d.gg[0]=0;d.Ai.set(d.tf);d.Bi.set(d.Nf);d.mC=d.Ux;d.fA=d.Av;d.eA=d.zv;d.xv=d.yv;d.vA=!1}E++};h.create_custom_sensor=function(a){var b=l(10);u(b,a);return b};h.create_keyboard_sensor=function(a){var b=l(20,document);b.key=a;b.Db=!0;return b};h.create_gamepad_btn_sensor=function(a,b){var c=l(240,document);b=b||N.lv();c.gamepad_id=b;c.key=a;c.Db=!0;return c};h.create_gamepad_axis_sensor=function(a,b){var c=l(250,document);b=void 0==b?N.lv():b;c.gamepad_id=b;c.key=a;c.Db=
!0;return c};h.create_gamepad_position_sensor=function(a){var c=l(260,document);a=void 0===a?N.lv():a;c.gamepad_id=a;c.Db=!0;c.Na=b.create();return c};h.create_gamepad_orientation_sensor=function(a){var b=l(270,document);a=void 0===a?N.lv():a;b.gamepad_id=a;b.Db=!0;b.Na=x.create();return b};h.create_collision_sensor=function(a,b,c){if(!a||!D.ab(a))return K.error("Wrong collision object"),null;var g=l(90);g.lz=a;g.Rb=b;g.Qi=c;g.Na={coll_obj:null,coll_pos:c?new Float32Array(3):null,coll_norm:c?new Float32Array(3):
null,coll_dist:0};g.kz=function(a,b,c,e,h){u(g,a);a=g.Na;a.coll_obj=b;g.Qi&&(a.coll_pos.set(c),a.coll_norm.set(e),a.coll_dist=h)};g.Db=!0;return g};h.create_collision_impulse_sensor=function(a){if(!a||!a.xa)return K.error("Wrong collision impulse object"),null;var b=l(100);b.jz=a;b.tE=function(a){u(b,a)};b.Db=!0;return b};h.create_ray_sensor=function(a,b,c,g,e,h,f){var d=l(110);d.qj=a;d.from=b;d.to=c;d.Rb=g;d.ZF=e;d.Qi=h;d.Kv=f;d.Na={hit_fract:0,obj_hit:null,hit_time:0,hit_pos:new Float32Array(3),
hit_norm:new Float32Array(3),ws:0};d.qH=function(a,b,c,g,e,h){d.ZF?u(d,-1==b?0:1):u(d,b);d.Na.hit_fract=b;d.Na.obj_hit=c;d.Na.hit_time=g;d.Qi&&(d.Na.hit_pos.set(e),d.Na.hit_norm.set(h))};d.Db=!0;return d};h.create_mouse_click_sensor=function(a){a=l(50,a);a.Db=!0;a.Na={coords:new Float32Array(2),which:null};return a};h.create_mouse_wheel_sensor=function(a){a=l(30,a);a.Db=!0;return a};h.create_mouse_move_sensor=function(a,b){var c=l(40,b);c.axis=a||"XY";c.Na={coords:new Float32Array(2)};c.Db=!0;return c};
h.create_touch_move_sensor=function(a,b){var c=l(60,b);c.axis=a||"XY";c.Na={coords:new Float32Array(2),gesture:0};c.Db=!0;return c};h.create_touch_zoom_sensor=function(a){a=l(70,a);a.Na=0;a.Db=!0;return a};h.create_touch_rotate_sensor=function(a){a=l(75,a);a.Na=0;a.Db=!0;return a};h.create_touch_click_sensor=function(a){a=l(80,a);a.Na={coords:new Float32Array(2)};a.Db=!0;return a};h.create_motion_sensor=function(a,b,c){if(!a)return K.error("Wrong collision object"),null;var g=l(120);g.qj=a;var e=
p.j(a.ka.na);a=p.g(a.ka.na);g.oH=new Float32Array(4);g.Rp=new Float32Array(e);g.Qw=new Float32Array(a);g.Zt=0;g.Yt=0;g.threshold=b||.1;g.xH=c||.1;g.jh=0;g.Na=new Float32Array([0,0]);return g};h.create_vertical_velocity_sensor=function(a,b){if(!a)return K.error("Wrong collision object"),null;var c=l(130);c.qj=a;var g=p.j(a.ka.na),e=p.g(a.ka.na);c.Rp=new Float32Array(g);c.Qw=new Float32Array(e);c.$t=0;c.threshold=b||1;c.jh=0;c.Na=0;return c};h.create_timer_sensor=function(a,b){var c=l(140);c.dh=a;c.repeat=
b;c.Db=!0;return c};h.reset_timer_sensor=function(a,b,c,g){a=a||w;a=a.zi;if(!a||!a[b])return K.error("reset_timer_sensor(): wrong object"),null;b=a[b].xk[c];if(!b)return K.error("reset_timer_sensor(): sensor not found"),null;b.jh=R.get_timeline();b.dh=g};h.create_elapsed_sensor=function(){var a=l(150);a.jh=0;return a};h.create_gyro_delta_sensor=function(){var a=l(180,window);a.Na=new Float32Array(3);N.get_device_by_type_element(N.DEVICE_GYRO)?u(a,1):u(a,0);a.Db=!0;return a};h.create_gyro_angles_sensor=
function(){var a=l(190,window);a.Na=new Float32Array(3);N.get_device_by_type_element(N.DEVICE_GYRO)?u(a,1):u(a,0);a.Db=!0;return a};h.create_gyro_quat_sensor=function(){var a=l(200,window);a.Na=x.create();N.get_device_by_type_element(N.DEVICE_GYRO)?u(a,1):u(a,0);a.Db=!0;return a};h.create_hmd_quat_sensor=function(){var a=l(210,window);a.Na=x.create();N.get_device_by_type_element(N.DEVICE_HMD)?u(a,1):u(a,0);a.Db=!0;return a};h.create_hmd_position_sensor=function(){var a=l(220,window);a.Na=b.create();
N.get_device_by_type_element(N.DEVICE_HMD)?u(a,1):u(a,0);a.Db=!0;return a};h.create_timeline_sensor=function(){return l(160)};h.create_selection_sensor=function(a,b){var c=l(170);c.qj=a;c.bF=b;c.Db=!0;return c};h.create_callback_sensor=function(a,b){var c=l(230);c.callback=a;u(c,b);return c};h.create_plock_mouse_sensor=function(a){a=l(280,a);a.Na={coords:new Float32Array(2)};a.Db=!0;return a};h.create_plock_sensor=function(a){a=l(290,a);a.Db=!0;return a};h.OS=u;h.get_sensor_value=function(a,b,c){a=
a||w;a=a.zi;if(!a||!a[b])return K.error("get_sensor_value(): wrong object"),null;b=a[b].xk[c];return b?b.value:(K.error("get_sensor_value(): sensor not found"),null)};h.get_sensor_payload=function(a,b,c){a=a||w;a=a.zi;if(!a||!a[b])return K.error("get_sensor_payload(): wrong object"),null;b=a[b].xk[c];return b?b.Na:(K.error("get_sensor_payload(): sensor not found"),null)};h.cleanup=function(){z=[];w={};for(var a=0;a<W.length;a++)B(W[a]);W.length=0;A.length=0};h.check_sensor_manifold=function(a,b){a=
a||w;if(!a.zi)return!1;if(b&&a.zi[b])return!0;if(!b)for(var c in a.zi)return!0;return!1};h.create_sensor_manifold=function(a,b,g,h,f,d,k){a=a||w;a.Bn=a.Bn||[];a.zi=a.zi||{};var l=a.zi,n=a.Bn;l[b]&&v(a,b);g={id:b,type:g,xk:h.slice(0),uR:f,PS:Array(h.length),callback:d,CM:k,fk:-1,rG:0,XQ:Array(h.length),fm:-1};l[b]=g;n.push(g);-1==z.indexOf(a)&&z.push(a);for(a=0;a<g.xk.length;a++){l=b=g.xk[a];if(l.Db){switch(l.type){case 90:D.append_collision_test(l.lz,l.Rb,l.kz,l.Qi);break;case 100:D.apply_collision_impulse_test(l.jz,
l.tE);break;case 110:l.ws=D.append_ray_test(l.qj,l.from,l.to,l.Rb,l.qH,!1,!1,l.Qi,l.Kv);l.Na.ws=l.ws;break;case 140:l.jh=R.get_timeline();0>l.dh&&(l.dh=-l.dh);break;case 20:n=e(l.element);c(n,"keyboard_downed_keys");break;case 30:n=e(l.element);c(n,"mouse_wheel");break;case 40:n=e(l.element);c(n,"mouse_down_which");c(n,"mouse_up_which");c(n,"mouse_location");break;case 280:n=e(l.element);c(n,"mouse_pointerlock");break;case 290:N.DL(l);break;case 50:n=e(l.element);c(n,"mouse_down_which");c(n,"mouse_up_which");
break;case 60:n=e(l.element);c(n,"touch_start");c(n,"touch_move");c(n,"touch_end");break;case 70:n=e(l.element);c(n,"touch_start");c(n,"touch_move");break;case 75:n=e(l.element);c(n,"touch_start");c(n,"touch_move");break;case 80:n=e(l.element);c(n,"touch_start");c(n,"touch_end");break;case 170:n=e(l.element);c(n,"mouse_select");c(n,"touch_select");c(n,"touch_start");c(n,"touch_end");c(n,"mouse_down_which");c(n,"mouse_up_which");break;case 180:case 190:n=e(l.element);c(n,"orientation_angles");break;
case 200:n=e(l.element);c(n,"orientation_quat");break;case 240:case 260:case 270:0==l.gamepad_id?N.get_device_by_type_element(N.zt):1==l.gamepad_id?N.get_device_by_type_element(N.By):2==l.gamepad_id?N.get_device_by_type_element(N.Cy):N.get_device_by_type_element(N.Dy)}l.Db=!1}l=W.indexOf(b);-1==l?(W.push(b),A.push([g])):A[l].push(g)}M=!0};h.default_AND_logic_fun=function(a){for(var b=0;b<a.length;b++)if(!a[b])return a[b];return a[a.length-1]};h.default_OR_logic_fun=function(a){for(var b=0;b<a.length;b++)if(a[b])return a[b];
return a[a.length-1]};h.remove_sensor_manifold=v;h.reset=function(){for(var a=0;a<z.length;a++){var b=z[a],c=b.zi,b=b.Bn,g;for(g in c)delete c[g];b.length=0}for(a=0;a<W.length;a++)B(W[a]);z.length=0;W.length=0;A.length=0};h.debug=function(){K.log(String(z.length)+" objects with manifolds",z);K.log(String(W.length)+" sensors",W);for(var a=[],b=[],c=0;c<W.length;c++){var g=W[c];90==g.type&&a.push(g);110==g.type&&b.push(g)}K.log(String(a.length)+" collision sensors",a);K.log(String(b.length)+" ray sensors",
b)};h.set_plock_smooth_factor=function(a){Z=a}});t.a=d},function(E,t,d){E=d(0);var O=d(19),T=d(1),G=d(2),r=d(73);d=Object(E.a)("physics",function(f,d){function k(b,f,h,d){return G.V(b,d[h[0]],d[h[1]],d[h[2]])}function x(b,f,h,d,e){f=Math.abs(b[2]-f[2]);return f<e&&q.QQ(b,h,d)?f:Number.MAX_VALUE}var m=Object(O.a)(f),p=Object(T.a)(f),q=Object(r.a)(f);d.CM_WALK=0;d.CM_RUN=1;d.CM_CLIMB=2;d.CM_FLY=3;d.enable_simulation=function(b){m.ab(b)?m.enable_simulation(b):p.Pa("No physics for object "+b.name)};d.disable_simulation=
function(b){m.ab(b)?m.disable_simulation(b):p.Pa("No physics for object "+b.name)};d.has_physics=function(b){return m.ab(b)};d.has_simulated_physics=function(b){return m.has_simulated_physics(b)};d.has_dynamic_physics=function(b){return m.has_dynamic_physics(b)};d.set_gravity=function(b,f){p.df("set_gravity","set_object_gravity");m.ab(b)?m.set_gravity(b,0,0,-f):p.Pa("No physics for object "+b.name)};d.set_object_gravity=function(b,f){m.ab(b)?m.set_gravity(b,f[0],f[1],f[2]):p.Pa("No physics for object "+
b.name)};d.set_transform=function(b,f,h){m.ab(b)?m.set_transform(b,f,h):p.Pa("No physics for object "+b.name)};d.sync_transform=function(b){m.ab(b)?m.sync_transform(b):p.Pa("No physics for object "+b.name)};d.apply_velocity=function(b,f,h,d){m.ab(b)?m.apply_velocity(b,f,h,d):p.Pa("No physics for object "+b.name)};d.apply_velocity_world=function(b,f,h,d){m.ab(b)?m.apply_velocity_world(b,f,h,d):p.Pa("No physics for object "+b.name)};d.apply_force=function(b,f,h,d){m.ab(b)?m.apply_force(b,f,h,d,!1):
p.Pa("No physics for object "+b.name)};d.apply_force_world=function(b,f,h,d){m.ab(b)?m.apply_force(b,f,h,d,!0):p.Pa("No physics for object "+b.name)};d.apply_torque=function(b,f,h,d){m.ab(b)?m.apply_torque(b,f,h,d):p.Pa("No physics for object "+b.name)};d.set_angular_velocity=function(b,f,h,d){m.ab(b)?m.set_angular_velocity(b,f,h,d):p.Pa("No physics for object "+b.name)};d.vehicle_throttle=function(b,f){m.ab(b)?(m.is_vehicle_chassis(b)||m.is_vehicle_hull(b)||p.error("Wrong object"),m.vehicle_throttle(b,
G.M(f,-1,1))):p.Pa("No physics for object "+b.name)};d.vehicle_throttle_inc=function(b,f,h){if(m.ab(b)){m.is_vehicle_chassis(b)||m.is_vehicle_hull(b)||p.error("Wrong object");f=G.M(f,0,1);var d=b.Aa.Ao;-1==h||1==h?d=Math.max(-1,Math.min(d+h*f,1)):!h&&0<=d?d=Math.max(0,d-f):!h&&0>d?d=Math.min(0,d+f):p.error("Wrong steering direction");m.vehicle_throttle(b,G.M(d,-1,1))}else p.Pa("No physics for object "+b.name)};d.vehicle_steer=function(b,f){m.ab(b)?(m.is_vehicle_chassis(b)||m.is_vehicle_hull(b)||p.error("Wrong object"),
m.vehicle_steer(b,G.M(f,-1,1))):p.Pa("No physics for object "+b.name)};d.vehicle_steer_inc=function(b,f,h){if(m.ab(b)){m.is_vehicle_chassis(b)||m.is_vehicle_hull(b)||p.error("Wrong object");f=G.M(f,0,1);var d=b.Aa.Kp;-1==h||1==h?d=Math.max(-1,Math.min(d+h*f,1)):!h&&0<=d?d=Math.max(0,d-f):!h&&0>d?d=Math.min(0,d+f):p.error("Wrong steering direction");m.vehicle_steer(b,G.M(d,-1,1))}else p.Pa("No physics for object "+b.name)};d.vehicle_brake=function(b,f){m.ab(b)?(m.is_vehicle_chassis(b)||m.is_vehicle_hull(b)||
p.error("Wrong object"),m.vehicle_brake(b,G.M(f,0,1))):p.Pa("No physics for object "+b.name)};d.vehicle_brake_inc=function(b,f){if(m.ab(b)){m.is_vehicle_chassis(b)||m.is_vehicle_hull(b)||p.error("Wrong object");f=G.M(f,-1,1);var h=b.Aa.Mq;m.vehicle_brake(b,G.M(h+h*f,0,1))}else p.Pa("No physics for object "+b.name)};d.is_vehicle_chassis=function(b){return m.is_vehicle_chassis(b)};d.is_vehicle_hull=function(b){return m.is_vehicle_hull(b)};d.get_vehicle_name=function(b){if(!m.ab(b))return p.Pa("No physics for object "+
b.name),null;if(m.is_vehicle_chassis(b)||m.is_vehicle_hull(b))return b.ug.name;p.error("Wrong object");return null};d.get_vehicle_throttle=function(b){if(!m.ab(b))return p.Pa("No physics for object "+b.name),null;if(m.is_vehicle_chassis(b)||m.is_vehicle_hull(b))return b.Aa.Ao;p.error("Wrong object");return null};d.get_vehicle_steering=function(b){if(!m.ab(b))return p.Pa("No physics for object "+b.name),0;if(m.is_vehicle_chassis(b)||m.is_vehicle_hull(b))return b.Aa.Kp;p.error("Wrong object");return 0};
d.get_vehicle_brake=function(b){if(!m.ab(b))return p.Pa("No physics for object "+b.name),0;if(m.is_vehicle_chassis(b)||m.is_vehicle_hull(b))return b.Aa.Mq;p.error("Wrong object");return 0};d.get_vehicle_speed=function(b){if(!m.ab(b))return p.Pa("No physics for object "+b.name),0;if(m.is_vehicle_chassis(b)||m.is_vehicle_hull(b))return m.get_vehicle_speed(b);p.error("Wrong object");return 0};d.is_character=function(b){return m.NF(b)};d.set_character_move_dir=function(b,f,h){m.ab(b)?m.set_character_move_dir(b,
f,h):p.Pa("No physics for object "+b.name)};d.set_character_move_type=function(b,f){m.ab(b)?m.set_character_move_type(b,f):p.Pa("No physics for object "+b.name)};d.set_character_walk_velocity=function(b,f){m.ab(b)?m.set_character_walk_velocity(b,f):p.Pa("No physics for object "+b.name)};d.set_character_run_velocity=function(b,f){m.ab(b)?m.set_character_run_velocity(b,f):p.Pa("No physics for object "+b.name)};d.set_character_fly_velocity=function(b,f){m.ab(b)?m.set_character_fly_velocity(b,f):p.Pa("No physics for object "+
b.name)};d.character_jump=function(b){m.ab(b)?m.character_jump(b):p.Pa("No physics for object "+b.name)};d.character_rotation_inc=function(b,f,h){m.ab(b)?m.character_rotation_inc(b,f,h):p.Pa("No physics for object "+b.name)};d.set_character_rotation=function(b,f,h){m.ab(b)?m.set_character_rotation(b,f,h):p.Pa("No physics for object "+b.name)};d.set_character_rotation_v=function(b,f){m.ab(b)?m.set_character_rotation_v(b,f):p.Pa("No physics for object "+b.name)};d.set_character_rotation_h=function(b,
f){m.ab(b)?m.set_character_rotation_h(b,f):p.Pa("No physics for object "+b.name)};d.set_character_vert_move_dir_angle=function(b,f){m.ab(b)?m.set_character_vert_move_dir_angle(b,f):p.Pa("No physics for object "+b.name)};d.append_collision_test=function(b,f,h,d){m.ab(b)?m.append_collision_test(b,f||"ANY",h,d||!1):p.Pa("No physics for object "+b.name)};d.remove_collision_test=function(b,f,h){m.ab(b)?m.remove_collision_test(b,f||"ANY",h):p.Pa("No physics for object "+b.name)};d.apply_collision_impulse_test=
function(b,f){m.ab(b)?m.apply_collision_impulse_test(b,f):p.Pa("No physics for object "+b.name)};d.clear_collision_impulse_test=function(b){m.ab(b)?m.clear_collision_impulse_test(b):p.Pa("No physics for object "+b.name)};d.append_ray_test=function(b,f,h,d,e,c){b=b||null;return null==b||m.ab(b)?m.append_ray_test(b,f,h,d||"ANY",e,c||!1,!1,!1,!1):(p.Pa("No physics for object "+b.name),0)};d.append_ray_test_ext=function(b,f,h,d,e,c,a,k,q){b=b||null;return null==b||m.ab(b)?m.append_ray_test(b,f,h,d||"ANY",
e,c||!1,a||!1,k||!1,q||!1):(p.Pa("No physics for object "+b.name),0)};d.remove_ray_test=function(b){m.hG(b)?m.remove_ray_test(b):p.error("Wrong ray test ID")};d.change_ray_test_from_to=function(b,f,h){m.hG(b)?m.change_ray_test_from_to(b,f,h):p.error("Wrong ray test ID")};d.apply_constraint=function(b,f,h,d,e,c,a,k,q,v){m.ab(f)&&m.ab(e)?m.apply_constraint(b,f,h,d,e,c,a,k,q,v):p.error("Wrong objects")};d.clear_constraint=function(b){m.ab(b)&&m.qQ(b)?m.clear_constraint(b):p.error("Wrong object")};d.pull_to_constraint_pivot=
function(b,f,h,d,e,c){m.ab(b)&&m.ab(d)?m.pull_to_constraint_pivot(b,f,h,d,e,c):p.error("Wrong objects")};d.navmesh_get_island=function(b,f,h){h||(h=k);if(m.ab(b)){var d=b.xa.bs;return d?q.navmesh_get_island(d,f,h):(p.error(b.name+" is not a navigation mesh object"),null)}p.Pa("No physics for object "+b.name)};d.navmesh_find_path=function(b,f,h,d){if(m.ab(b)){var e=b.xa.bs;if(!e)return p.error(b.name+" is not a navigation mesh object"),null;d=d||{};b={};b.do_not_pull_string=!!d.do_not_pull_string;
b.distance_to_closest=d.distance_to_closest||k;b.distance_to_farthest=d.distance_to_farthest||x;b.island=d.island||0;b.allowed_distance=d.allowed_distance||Number.MAX_VALUE;b.return_normals=d.return_normals||!1;return q.navmesh_find_path(e,f,h,b)}p.Pa("No physics for object "+b.name)};d.sync_bounding=function(b,f){f||(f=b.Ba[0].Kb);m.wp(f)&&m.sync_bounding(b,f)};d.sync_mesh=function(b,f){f||(f=b.Ba[0].Kb);m.wp(f)&&m.sync_mesh(b,f)}});t.a=d},function(E,t,d){E=d(0);var O=d(16),T=d(14),G=d(4),r=d(15),
f=d(38),k=d(12),y=d(8),x=d(1),m=d(22),p=d(10),q=d(11),b=d(18),u=d(13),h=d(6),l=d(3);d=Object(E.a)("__anchors",function(e,c){function a(){if(!M&&!ea){var a=ka;if(a)if("visible"==a.lastElementChild.style.visibility)d(),ka=null;else if(1==a.style.opacity){var b=a.lastElementChild,a=a.firstElementChild,c=b.firstElementChild,g=Math.ceil(b.getBoundingClientRect().width),e=Math.ceil(b.getBoundingClientRect().height),h=Math.ceil(a.getBoundingClientRect().width),f=Math.ceil(a.getBoundingClientRect().height);
b.style.position="absolute";b.style.visibility="visible";var k=!0,l=!0;a.style.display="none";M=!0;h!=g?W.animate(h,g,200,function(a){a==g&&(k=!1,l||(M=!1,c.style.visibility="visible"));b.style.width=a+"px"}):(k=!1,l||(M=!1));f!=e?W.animate(f,e,200,function(a){a==e&&(l=!1,k||(M=!1,c.style.visibility="visible"));b.style.height=a+"px"}):(l=!1,k||(M=!1))}}}function d(){var a=ka.lastElementChild;ka.firstElementChild.style.display="";a.style.visibility="hidden";a.style.position="relative";a.firstElementChild.style.visibility=
"hidden"}function t(a){a.style.cssText+="color:       #fff;font-family: Arial;font-size:   12px;font-weight: bold;line-height: 1.25;"}function v(a,b,c){var g=document.createElement("div"),e=document.createElement("span");c&&(g.style.maxWidth=c+"px");g.style.cssText+="background-color:   #000;border-radius:      20px 20px 20px 0px;bottom:             0;box-shadow:         0px 0px 10px rgb(180, 180, 200);-webkit-box-shadow: 0px 0px 10px rgb(180, 180, 200);left:               0;box-sizing:         border-box;opacity:            1.0;padding:            6px 12px 6px 12px;position:           relative;z-index:            2;";
t(e);e.innerHTML=a;g.style.visibility="hidden";e.style.visibility="hidden";g.appendChild(e);b.appendChild(g);K.add_click_listener(b,function(){M||b==ka||1!=b.style.opacity||ea||(ka&&"visible"==ka.lastElementChild.style.visibility&&d(),ka=b)})}function B(){for(var a=0,b=0;b<g.length;b++)g[b].xo&&a++;E=new Float32Array(3*a)}function C(a,b){return b.depth-a.depth}function L(a,b,c){a=a.element;n.UF&&(b=Math.floor(b),c=Math.floor(c));"transform"in a.style?a.style.transform="translate3d("+b+"px, "+c+"px, 0px)":
"webkitTransform"in a.style?a.style.webkitTransform="translate3d("+b+"px, "+c+"px, 0px)":(a.style.left=b+"px",a.style.top=c+"px")}function H(a){for(var b=0;b<g.length;b++)if(g[b].obj==a)return!0;return!1}var I=Object(O.a)(e),da=Object(T.a)(e),N=Object(G.a)(e),U=Object(r.a)(e),K=Object(f.a)(e),D=Object(k.a)(e),R=Object(y.a)(e),V=Object(x.a)(e),F=Object(m.a)(e),z=Object(p.a)(e),w=Object(q.a)(e),W=Object(b.a)(e),A=Object(u.a)(e),n=N.wa,g=[],ea=!1,ka=null,wa=!1,M=!1,E=new Float32Array(0),Z=new Uint8Array(16),
aa=new Float32Array(2),oa=new Float32Array(3),ja=new Float32Array(3);c.append=function(b){if(!H(b)){var c=b.anchor.xo&&!!z.xc(z.ji(),w.Xn),c={type:b.anchor.type,obj:b,x:0,y:0,depth:0,wm:"out",xo:c,element:null,ap:null,HL:b.anchor.BR,hl:b.anchor.hl};switch(c.type){case "ANNOTATION":var e=c.obj;b=U.get_container();var h=D.get_meta_tags(e),e=e.name,f="",d=document.createElement("div"),k=d.cloneNode(!1),l=document.createElement("span");d.style.cssText+="position:        absolute;height:          0;top:             0;left:            0;transform-style: preserve-3d;";
k.style.cssText+="background-color:   #000;border-radius:      20px 20px 20px 0px;box-shadow:         0px 0px 10px rgb(180, 180, 200);-webkit-box-shadow: 0px 0px 10px rgb(180, 180, 200);opacity:            1.0;box-sizing:         border-box;bottom:             0;left:               0;padding:            6px 12px 6px 12px;position:           absolute;";d.style.visibility="hidden";h&&(f=h.description||f,e=h.title||e);l.innerHTML=e;l.style.cssText+="-webkit-touch-callout: none;-webkit-user-select:   none;-khtml-user-select:    none;-moz-user-select:      none;-ms-user-select:       none;user-select:           none;cursor:                default;";
t(l);l.style.whiteSpace="nowrap";k.appendChild(l);d.appendChild(k);f&&v(f,d,c.HL);b.appendChild(d);c.element=d;break;case "ELEMENT":if(c.element=document.getElementById(b.anchor.hl),c.element)for(h=0;h<g.length;h++)"ELEMENT"==g[h].type&&g[h].hl==b.anchor.hl&&(V.warn("Anchor with the id '"+b.anchor.hl+"' already exists, making the new anchor generic."),c.type="GENERIC");else V.warn("Anchor HTML element with the id '"+b.anchor.hl+"' was not found, making it generic."),c.type="GENERIC"}g.push(c);B();
wa||(wa=!0,U.get_container().addEventListener("mouseup",a))}};c.remove=function(a){for(var b=0;b<g.length;b++){var c=g[b];if(c.obj==a){"ANNOTATION"==c.type&&(a=c,U.get_container().removeChild(a.element));g.splice(b,1);B();break}}};c.update=function(a){for(var b=0,c=g.length;c--;){var e=g[c];if(e.xo){var f=h.j(e.obj.ka.na);E.set(f,3*b++)}var d;d=e;var f=oa,k=z.ml(z.ji());d=h.j(d.obj.ka.na);da.project_point(k,d,f);d=f;f=d[0];k=d[1];d=d[2];if(a||f!=e.x||k!=e.y||d!=e.depth){switch(e.type){case "ANNOTATION":var l=
f,n=k;L(e,l,n);break;case "ELEMENT":n=e.element.getBoundingClientRect(),l=f-n.width/2,n=k-n.height/2,L(e,l,n)}e.x=f;e.y=k;e.depth=d;e.ap&&e.ap(f,k,e.wm,e.obj,e.element)}}g.sort(C);for(c=0;c<g.length;c++)e=g[c],"GENERIC"!=e.type&&(e.element.style.zIndex=ka==e.element?g.length:c);0<b&&(a=z.xc(z.ji(),w.Xn),b=a.Hb[0].ub[0],I.kU(b.hb,E),w.xd(a,b))};c.QU=function(){for(var a=U.get_container(),b=z.get_active(),b=z.xc(b,w.nh),b=!(!b||!b.enable_hmd_stereo),c=g.length;c--;){var e=g[c],h=e.obj,f=h.ka,k=e.x,
n=e.y,m=e.depth,p=z.ml(z.ji()),v=A.get_translation(h,oa),p=A.get_translation(p,ja),v=l.dist(v,p);(m=0>k||0>n||0>m||1<m||z.is_hidden(h)||k>=a.clientWidth||n>=a.clientHeight)||(f.ck?(m=f.Wg,f=v<f.Xg?!1:m==R.Hy||v<m?!0:!1):f=!0,m=!f);f=m?"out":"visible";e.xo&&"out"!=f&&(f=e,m=z.xc(z.ji(),w.Xn).qa,v=U.Qq(f.x,f.y,aa,m),F.Rw(m.Ff,v[0],m.height-v[1],2,2,Z),f=255<=Z[0]+Z[4]+Z[8]+Z[12]?"visible":"out"!=f.wm&&Z[0]+Z[4]+Z[8]+Z[12]?f.wm:"covered");b&&(f="out");if(f!=e.wm){switch(e.type){case "ANNOTATION":case "ELEMENT":var q=
e.element;q&&("out"==f?(q.style.visibility="hidden",q.children.length&&(q.children[0].style.visibility="hidden")):"visible"==f?(q.style.visibility="visible",q.children.length&&(q.children[0].style.visibility="visible"),q.style.opacity=1):(q.style.visibility="visible",q.style.opacity=.1,q.children.length&&(q.children[0].style.visibility="visible"),"ANNOTATION"==e.type&&1<q.children.length&&"visible"==q.lastElementChild.style.visibility&&(d(),q==ka&&(ka=null))))}e.wm=f;e.ap&&e.ap(k,n,e.wm,h,q)}}};c.attach_move_cb=
function(a,b){for(var c=0;c<g.length;c++)g[c].obj==a&&(g[c].ap=b)};c.detach_move_cb=function(a){for(var b=0;b<g.length;b++)g[b].obj==a&&(g[b].ap=null)};c.cleanup=function(){for(var a=0;a<g.length;a++){var b=g[a];"ANNOTATION"==b.type&&U.get_container().removeChild(b.element)}g.length=0};c.is_anchor=H;c.get_element_id=function(a){for(var b=0;b<g.length;b++)if(g[b].obj==a)return g[b].hl;return!1};c.pause=function(){ea=!0};c.resume=function(){ea=!1};c.aS=function(a,b){for(var c=-1,e=0;e<g.length;e++){var h;
if(h="visible"==g[e].wm){var f=g[e];if(f.element){h=Math.round(f.element.offsetWidth)||0;var d=Math.round(f.element.offsetHeight)||0}else d=h=0;var k=f.x,f=f.y;h=a>=k&&a<=k+h&&b<f&&b>=f-d?!0:!1}if(h)if(0>c)var l=g[e].depth,c=e;else g[e].depth<l&&(c=e,l=g[e].depth)}return 0>c?null:g[c].obj}});t.a=d},function(E,t,d){function O(b){b=b.ka;for(var h=b.Ap,f=b.mw,e=0;e<h.length;e++){for(var c=h[e],a=f[e],d=0;d<a.length;d+=2)for(var k=a[d],m=a[d+1],p=0;4>p;p++)c.we[k+p]=b.we[m+p],c.pf[k+p]=b.pf[m+p],c.Be[k+
p]=b.Be[m+p],c.uf[k+p]=b.uf[m+p];c.ig=b.ig}}function T(b,h,f,e){var c=b.oC,a=b.Ci,d=b.dt,k=b.un;k?(k=k.dt,h?r.p(k,c,d):(h=m,r.o(k,h),r.p(h,d,c))):h?r.a(c,d):r.a(d,c);c=x;r.o(a,c);r.p(d,c,c);a=b.Ni;f[4*a]=c[0];f[4*a+1]=c[1];f[4*a+2]=c[2];f[4*a+3]=c[3];e[4*a]=c[4];e[4*a+1]=c[5];e[4*a+2]=c[6];e[4*a+3]=c[7];b=b.Fu;for(a=0;a<b.length;a++)d=b[a],d.Yc||T(d,!0,f,e)}t.e=function(b,h){for(var f=b.data.bones,e=b.pose.bones,c={},a=0;a<e.length;a++){var d=e[a],m=d.bone,p=m.name,q=c[p]={Ni:0,eJ:-1,un:null,Fu:[],
lu:[],Yc:null,Tp:r.b(),oC:r.b(),Ci:r.b(),qC:r.b(),dt:r.b(),Xx:r.b(),Wx:r.b(),bt:r.b(),pC:r.b(),Vx:!1,uI:new Float32Array(3)},p=new Float32Array(m.matrix_local),u=new Float32Array(16);k.invert(p,u);var d=new Float32Array(d.matrix_basis),L=q.uI;y.subtract(G._1(m.tail_local),G._1(m.head_local),L);G._67(L,u,L);r.d(p,q.Ci);r.d(d,q.bt);r.a(q.Ci,q.dt);r.o(q.Ci,q.qC)}for(a=0;a<f.length;a++){p=f[a].name;d=G._18("name",p,e);q=c[p];m=d.parent_recursive;q.lu.push(q);for(u=0;u<m.length;u++)d=m[u],d=d.name,d=c[d],
q.lu.push(d);m.length?(d=m[0],d=d.name,d=c[d],q.un=d,r.o(d.Ci,x),r.p(x,q.Ci,q.Tp),d.Fu.push(q)):r.a(q.Ci,q.Tp);q.Ni=a;q.name=p;r.p(q.Tp,q.bt,q.oC)}h.ka.Mg=c};t.b=function(d,h,k,e,c){var a=d.ka,l=a.ig;h=a.Mg[h];var u=h.Ni;d=h.Ci;var v=p,y=a.Be,C=a.uf,L=a.we,a=a.pf,H=y[4*u+1],G=y[4*u+2],t=y[4*u+3],N=C[4*u+1],O=C[4*u+2],K=C[4*u+3];v[0]=(1-l)*y[4*u]+l*C[4*u];v[1]=(1-l)*H+l*N;v[2]=(1-l)*G+l*O;v[3]=(1-l)*t+l*K;y=q;C=b;y[0]=L[4*u];y[1]=L[4*u+1];y[2]=L[4*u+2];y[3]=L[4*u+3];C[0]=a[4*u];C[1]=a[4*u+1];C[2]=
a[4*u+2];C[3]=a[4*u+3];f.slerp(y,C,l,y);l=x;r.u(v,l);r.q(y,l);k?(k=m,r.E(d,h.uI,k),r.p(l,k,l)):r.p(l,d,l);if(e){if(e=h.un)k=m,r.o(e.dt,k),r.p(k,l,l);e=m;r.o(h.Tp,e);r.p(e,l,l)}r.a(l,c)};t.c=function(b,h,f,e){var c=b.ka;h=c.Mg[h];var a=c.Be,d=c.we;e?r.p(h.Tp,f,h.oC):r.a(f,h.dt);T(h,e,a,d);c.ig=0;O(b)};t.f=O;t.d=T;t.a=function(b,h){return h in b.ka.Mg};var G=d(2),r=d(6),f=d(9),k=d(21),y=d(3),x=r.b(),m=r.b(),p=new Float32Array(4),q=new Float32Array(4),b=new Float32Array(4)},function(E,t,d){function O(f){r.scale(f.color,
f.Rg,f.Xq)}t.a=function(d,y){var k=d.data,m=y.lc={name:"",type:k.type,lH:new Float32Array(3),direction:new Float32Array(3),color:new Float32Array(3),Xq:new Float32Array(3),RE:0,wC:!1,En:0,Ts:0,Vq:.1,Uq:30,sF:!1,QG:!1,aF:!1,In:!0,Nn:!0,Rg:1,distance:25,SW:"INVERSE_SQUARE"};m.name=y.name;m.In=k.use_diffuse;m.Nn=k.use_specular;var p=T.g(y.ka.na),p=G._33(p,G.f,f);r.normalize(p,p);m.direction.set(p);m.color[0]=k.color[0];m.color[1]=k.color[1];m.color[2]=k.color[2];m.Rg=m.RE=k.energy;O(m);m.distance=k.distance;
m.wC=k.use_sphere;m.Vq=k.clip_start;m.Uq=k.clip_end;if("POINT"===m.type||"SPOT"===m.type)m.distance=k.distance;"SPOT"===m.type?(m.Ts=k.spot_blend,m.En=k.spot_size):"POINT"===m.type&&(m.En=Math.PI/2);m.sF=k.b4w_generate_shadows;m.aF=k.b4w_dynamic_intensity};t.b=function(f,d){f.color[0]=d[0];f.color[1]=d[1];f.color[2]=d[2];O(f)};t.e=function(f,d){f.Ts=d};t.c=function(f,d){f.distance=d};t.f=function(f,d){f.En=d};t.d=function(f,d){f.Rg=d;O(f)};t.g=function(f){var d=f.lc;if(d){f=T.g(f.ka.na);G._33(f,G.f,
d.direction);r.normalize(d.direction,d.direction);if("SUN"==d.type){f=Math.acos(r.dot(d.lH,G.n));var k=Math.acos(r.dot(d.direction,G.n));d.QG=Math.floor(f/.025)!=Math.floor(k/.025)?!0:!1}r.copy(d.direction,d.lH)}};var T=d(6),G=d(2),r=d(3),f=new Float32Array(3)},function(E,t,d){E=d(0);var O=d(5),T=d(19),G=d(56),r=d(14),f=d(6),k=d(2),y=d(9),x=d(3);d=Object(E.a)("__constraints",function(d,p){function m(a){return{type:a,zb:null,target:null,Yp:!1,Xd:null,nb:null,Xi:null,axes:null,zI:null,od:null,aJ:!1,
influence:0,Zk:"",dI:0,lE:0,nE:0,oE:0,kE:0,Dz:0,dist_max:0,Xv:!1,Vr:0,Tx:!1,Zs:0,distance:0,hor_units:"",vert_units:""}}function b(a,b){a.Yc&&a.Yc.zb&&u(a.Yc.zb,a);if(b.zb){var c=b.zb;-1==c.af.indexOf(a)?c.af.push(a):L.va("Descendant object override is forbidden")}a.Yc=b}function u(a,b){var c=a.af.indexOf(b);-1!=c?a.af.splice(c,1):L.va("No descendant object")}function h(a,c,e,h,f,g){var d=m(3);d.zb=c;d.zI=new Float32Array(e);d.od=new Float32Array(h);d.aJ=f;d.Xd=new Float32Array(a.ka.na);d.influence=
g;b(a,d);v(a,d,0)}function l(a,c,e,h,d,g){var k=m(8);k.zb=c;k.nb=f.b();f.t(e,k.nb);k.axes=new Float32Array(h);k.influence=g;k.Yp=d;k.Xd=new Float32Array(a.ka.na);b(a,k);v(a,k,0)}function e(a,c,e,h,d){var g=m(9);g.zb=c;c=f.f(a.ka.na,R);g.Xi=k._35(c,new Float32Array(3));g.axes=new Float32Array(e);g.influence=d;g.Yp=h;g.Xd=new Float32Array(a.ka.na);b(a,g);v(a,g,0)}function c(a,c,e){var h=m(11);h.zb=c;h.nb=f.b();f.a(a.ka.na,h.nb);h.Xd=new Float32Array(a.ka.na);h.influence=e;b(a,h);v(a,h,0)}function a(a,
c,e){var h=m(13);h.zb=c;h.nb=new Float32Array(e);b(a,h);v(a,h,0)}function t(a,c,e,h){var f=m(14);f.zb=c;f.Zk=e;f.nb=new Float32Array(h);b(a,f);v(a,f,0)}function la(a,c,e){var h=m(17);h.zb=c;h.Xd=new Float32Array(a.ka.na);h.nb=f.b();k._16(e.right)?(h.Xv=!1,h.Vr=e.right):k._16(e.left)?(h.Xv=!0,h.Vr=e.left):(h.Xv=!0,h.Vr=0);k._16(e.bottom)?(h.Tx=!1,h.Zs=e.bottom):k._16(e.top)?(h.Tx=!0,h.Zs=e.top):(h.Tx=!0,h.Zs=0);k._16(e.distance)?h.distance=e.distance:h.distance=0;c=k._16(e.rotation)?new Float32Array(e.rotation):
y.create();f.q(c,h.nb);k._16(e.hor_units)?h.hor_units=e.hor_units:h.hor_units="widths";k._16(e.vert_units)?h.vert_units=e.vert_units:h.vert_units="heights";b(a,h);v(a,h,0)}function v(a,b,c){switch(b.type){case 1:f.p(b.zb.ka.na,b.nb,a.ka.na);break;case 12:var e=f.j(a.ka.na),h=f.g(a.ka.na),g=f.i(b.nb,U),d=b.zb.ka.na;c=f.g(b.zb.ka.na);y.multiply(y.invert(b.hB,b.hB),h,h);y.multiply(c,h,h);f.B(g,d,e);y.copy(c,b.hB);e=f.g(a.ka.na);h=f.g(b.zb.ka.na);d=f.f(b.nb,R);h=y.multiply(h,d,D);d=I.Sz(h,a.ka.od,da);
g=I.Sz(e,a.ka.od,N);h=k.H(g[0],d[0]+b.nE,d[0]+b.lE);d=k.H(g[1],d[1]+b.kE,d[1]+b.oE);k._46(e,a.ka.od,h,d,e);break;case 15:var e=f.j(a.ka.na),h=f.g(a.ka.na),d=b.zb.ka.na,l=f.j(d),m=b.dI,p=U,w=y.copy(h,D),g=f.i(b.nb,K);f.B(g,d,p);k._53(p,e,c,m,e);k._30(e,w,l,k.c);k._51(w,h,c,.16*m,h);break;case 2:h=f.g(a.ka.na);d=V;g=f.i(b.nb,K);l=f.h(b.nb);e=f.f(b.nb,D);G.b(b.zb,b.Zk,!0,!1,d);f.p(b.zb.ka.na,d,d);h[0]=d[4];h[1]=d[5];h[2]=d[6];h[3]=d[7];y.multiply(h,e,h);f.r(l*d[3],a.ka.na);e=f.j(a.ka.na);f.B(g,d,e);
break;case 3:e=f.j(a.ka.na);h=f.g(a.ka.na);g=f.j(b.zb.ka.na);d=b.influence;b.aJ?(l=f.f(b.zb.ka.na,D),l=x.transformQuat(k.f,l,U)):l=k.f;k._30(e,h,g,b.zI);g=x.subtract(g,e,K);x.normalize(g,g);k._31(h,b.od,l,g);g=f.f(b.Xd,D);y.slerp(g,h,d,h);f.t(e,b.Xd);break;case 5:e=f.j(a.ka.na);h=f.g(a.ka.na);g=f.j(b.zb.ka.na);k._30(e,h,g,k.c);h=x.dist(e,g);if(h=h>b.dist_max?h-b.dist_max:h<b.Dz?h-b.Dz:0)x.sub(g,e,U),x.normalize(U,U),x.scale(U,h,U),x.add(e,U,e);break;case 7:d=b.zb.ka.na;e=f.j(a.ka.na);g=f.i(b.nb,U);
f.B(g,d,e);f.q(f.g(a.ka.na),b.Xd);break;case 8:l=f.j(b.zb.ka.na);e=f.j(a.ka.na);h=b.axes;c=f.i(b.nb,U);g=x.set(0,0,0,K);b.Yp&&x.add(g,c,g);d=b.influence;h[0]&&(e[0]=(1-d)*c[0]+d*(k._49(h[0])*l[0]+g[0]));h[1]&&(e[1]=(1-d)*c[1]+d*(k._49(h[1])*l[1]+g[1]));h[2]&&(e[2]=(1-d)*c[2]+d*(k._49(h[2])*l[2]+g[2]));f.q(f.g(a.ka.na),b.Xd);break;case 9:h=b.axes;c=f.f(b.zb.ka.na,D);e=k._34(c,b.Xi,K);k.Q(e,b.Xi);h[0]?(b.Yp&&(d=x.set(b.Xi[0],0,0,U),k._44(e,d,e)),e[0]*=k._49(h[0])):e[0]=b.Xi[0];h[1]?(b.Yp&&(d=x.set(0,
b.Xi[1],0,U),k._44(e,d,e)),e[1]*=k._49(h[1])):e[1]=b.Xi[1];h[2]?(b.Yp&&(d=x.set(0,0,b.Xi[2],U),k._44(e,d,e)),e[2]*=k._49(h[2])):e[2]=b.Xi[2];k.Q(e,b.Xi);d=b.influence;e=k.Y(e,D);g=f.f(b.Xd,R);y.slerp(g,e,d,f.g(a.ka.na));f.t(f.j(a.ka.na),b.Xd);break;case 11:d=b.influence;l=f.i(b.zb.ka.na,U);c=f.f(b.zb.ka.na,D);e=f.i(b.nb,K);g=f.f(b.nb,R);k.G(e,l,d,f.j(a.ka.na));y.slerp(g,c,d,f.g(a.ka.na));f.t(f.j(a.ka.na),b.Xd);break;case 16:h=f.g(a.ka.na);d=b.zb.ka.na;c=f.g(b.zb.ka.na);g=f.i(b.nb,K);e=f.f(b.nb,D);
y.multiply(c,e,h);e=f.j(a.ka.na);f.B(g,d,e);break;case 13:f.p(b.zb.ka.na,b.nb,a.ka.na);break;case 14:e=b.nb;d=V;G.b(b.zb,b.Zk,!0,!1,d);f.p(b.zb.ka.na,d,d);f.p(d,e,a.ka.na);break;case 17:h=b.zb,d=I.OP(h),e=f.j(a.ka.na),c=I.jv(d,"LEFT"),m=I.jv(d,"RIGHT"),g=I.jv(d,"TOP"),l=I.jv(d,"BOTTOM"),p="heights"==b.hor_units?g-l:m-c,e[0]=b.Xv?c+p*b.Vr:m-p*b.Vr,c="heights"==b.vert_units?g-l:m-c,e[1]=b.Tx?g-c*b.Zs:l+c*b.Zs,I.PQ(d)?e[2]=-b.distance:(e[2]=-1,x.normalize(e,e),x.scale(e,b.distance/Math.abs(e[2]),e)),
f.w(e,h.ka.na,e),d=f.j(h.ka.na),x.add(d,e,e),g=f.g(a.ka.na),h=f.g(h.ka.na),e=f.f(b.nb,R),y.multiply(h,e,g)}"CAMERA"==a.ka.type&&a.ka.cc!=I.MS_STATIC&&(e=a.ka.od,12==b.type&&(c=f.g(b.zb.ka.na),e=x.transformQuat(e,c,F)),I.correct_up(a,e))}function B(a,b){switch(b.type){case 18:var c=b.target.ka.na,e=V;f.o(a.ka.na,e);f.p(e,c,e);G.c(a,b.Zk,e,!1)}a.WA=!0}function C(a,b){for(var c=0;c<a.length;c++){var e=a[c];if(!C(e.af,b)||e.name==b.name)return!1}return!0}var L=Object(O.a)(d),H=Object(T.a)(d),I=Object(r.a)(d);
p.xV=1;p.wV=2;p.BV=3;p.tV=5;p.yV=7;p.sV=8;p.vV=12;p.qV=13;p.rV=14;p.uV=15;p.zV=16;p.AV=17;p.pV=18;var da=new Float32Array(2),N=new Float32Array(2),U=new Float32Array(3),K=new Float32Array(3),D=new Float32Array(4),R=new Float32Array(4),V=f.b(),F=new Float32Array(3);p.AD=function(a,c,e,h,d){var g=m(1);g.zb=c;g.nb=f.b();h=h?h:y.create();f.t(e,g.nb);f.r(d,g.nb);f.q(h,g.nb);g.Xd=new Float32Array(a.ka.na);b(a,g);v(a,g,0)};p.UL=function(a,c,e,h,d,g){var k=m(2);k.zb=c;k.Zk=e;k.Xd=new Float32Array(a.ka.na);
k.nb=f.b();f.t(new Float32Array(h),k.nb);f.q(new Float32Array(d),k.nb);f.r(g,k.nb);b(a,k);v(a,k,0)};p.SL=function(a,c,e,h,d,g,l,p){var n=m(12),w=f.g(a.ka.na),q=f.g(c.ka.na);h?(y.copy(h,w),y.multiply(q,w,w)):h=y.create();n.zb=c;n.nb=f.b();f.t(e,n.nb);f.q(h,n.nb);n.hB=new Float32Array(q);n.lE=k.A(d);n.nE=k.A(g);n.oE=k.B(l,-Math.PI,Math.PI);n.kE=k.B(p,-Math.PI,Math.PI);n.Xd=new Float32Array(a.ka.na);b(a,n);v(a,n,0)};p.RL=function(a,c,e,h){var d=m(15);d.zb=c;d.dI=h;d.Xd=new Float32Array(a.ka.na);d.nb=
f.b();f.t(new Float32Array(e),d.nb);b(a,d);v(a,d,0)};p.WL=function(a,c,e,h){var d=m(16);d.zb=c;d.Xd=new Float32Array(a.ka.na);d.nb=f.b();f.t(new Float32Array(e),d.nb);f.q(new Float32Array(h),d.nb);f.r(1,d.nb);b(a,d);v(a,d,0)};p.YX=u;p.XL=h;p.OL=function(a,c,e,h){var f=m(5);f.zb=c;f.Dz=e;f.dist_max=h;f.Xd=new Float32Array(a.ka.na);b(a,f);v(a,f,0)};p.VL=function(a,c,e){var h=m(7);h.zb=c;h.nb=f.b();h.Xd=new Float32Array(a.ka.na);f.t(new Float32Array(e),h.nb);b(a,h);v(a,h,0)};p.JL=l;p.KL=e;p.LL=c;p.mW=
a;p.nW=t;p.append_stiff_viewport=la;p.tU=function(a,b){a.Yc&&v(a,a.Yc,b)};p.pU=function(a,b){var c=a.ka.Mg[b];c.Yc&&B(a,c.Yc)};p.NM=function(a){return a.Yc?!0:!1};p.remove=function(a,b){a.Yc.zb&&u(a.Yc.zb,a);b&&f.a(a.Yc.Xd,a.ka.na);a.Yc=null};p.fX=function(a){return a.Yc?a.Yc.type:null};p.Ch=function(a){a=a.Yc;return!a||13!=a.type&&14!=a.type?!1:!0};p.iv=function(a){if((a=a.Yc)&&13==a.type)return a.zb.ka.na;if(a&&14==a.type){var b=V;G.b(a.zb,a.Zk,!0,!1,b);f.p(a.zb.ka.na,b,b);return b}return null};
p.Ah=function(a){a=a.Yc;return!a||13!=a.type&&14!=a.type?null:a.nb};p.mS=function(b,d){for(var p=d.ka,w=0;w<b.constraints.length;w++){var n=b.constraints[w],g=n.type;if(n.target){var v=n.target.qb;if("COPY_LOCATION"==g){var g=new Float32Array(f.j(d.ka.na)),q=new Float32Array(n.axes);l(d,v,g,q,n.use_offset,n.influence)}else if("COPY_ROTATION"==g)q=new Float32Array(n.axes),e(d,v,q,n.use_offset,n.influence);else if("COPY_TRANSFORMS"==g)c(d,v,n.influence);else if("TRACK_TO"==g){g=n.track_axis;if("TRACK_Y"==
g)var u=k.e;else"TRACK_NEGATIVE_Y"==g?u=k.b:"TRACK_X"==g?u=k.d:"TRACK_NEGATIVE_X"==g?u=k.a:"TRACK_Z"==g?u=k.f:"TRACK_NEGATIVE_Z"==g&&(u=k.c);g=n.up_axis;if("UP_X"==g)var C=k.d;else"UP_Y"==g?C=k.e:"UP_Z"==g&&(C=k.f);h(d,v,u,C,n.use_target_z,n.influence)}}}if(d.parent){!d.Kl&&d.Ed.Wp&&d.parent.Ed.Wp&&(d.Jn=!1);n=!1;for(w=0;w<d.Ba.length;w++)if(d.Ba[w].Kb.dd){n=!0;break}if(n&&H.sQ(d))w=d.Kl?f.a(p.na,f.b()):p.na,f.p(d.parent.ka.na,w,p.na);else if(d.Kl||!d.hs)if(w=f.a(p.na,f.b()),d.my&&"CAMERA"==d.parent.type){w=
{distance:d.my.distance,rotation:f.g(w)};switch(d.my.EL){case "TOP_LEFT":w.top=0;w.left=0;break;case "TOP":w.top=0;w.left=.5;break;case "TOP_RIGHT":w.top=0;w.right=0;break;case "LEFT":w.top=.5;w.left=0;break;case "CENTER":w.top=.5;w.left=.5;break;case "RIGHT":w.top=.5;w.right=0;break;case "BOTTOM_LEFT":w.bottom=0;w.left=0;break;case "BOTTOM":w.bottom=0;w.left=.5;break;case "BOTTOM_RIGHT":w.bottom=0,w.right=0}la(d,d.parent,w)}else a(d,d.parent,w);else w=f.a(p.na,f.b()),t(d,d.parent,d.hs,w)}if("ARMATURE"==
d.type)for(p=b.pose.bones,w=0;w<p.length;w++)if(n=p[w],u=n.constraints)for(C=0;C<u.length;C++)if(g=u[C],"COPY_TRANSFORMS"==g.type&&!g.subtarget&&!g.mute){var v=g.target.qb,g=d,q=v,z=k.m,x=k.k,v=m(18);v.Zk=n.name;v.target=q;v.nb=f.b();f.t(new Float32Array(z),v.nb);f.q(new Float32Array(x),v.nb);f.r(1,v.nb);for(var q=g,z=v,x=z.target,r=z.Zk,y=q.ka.Mg[r],L=x.nz,F=0;F<L;F++){var G=L[F];if(G[0]==q&&G[1]==r){L.splice(F,1);break}}x.nz.push([q,r]);y.Yc=z;B(g,v)}};p.bi=function(a,b){return C(a.af,b)};p.ci=
function(a,b){return a.name!=b.name}});t.a=d},function(E,t,d){E=d(0);var O=d(37),T=d(5),G=d(43),r=d(14),f=d(52),k=d(12),y=d(1),x=d(10),m=d(4),p=d(53),q=d(16),b=d(20),u=d(27),h=d(21),l=d(19),e=d(9),c=d(23),a=d(18),ca=d(13),la=d(6),v=d(2),B=d(3),C=d(8);d=Object(E.a)("__logic_nodes",function(d,H){function L(){return function(a,b,c,e){c=e[1];var g=e[2];e=N(e[0],g.pc);if(-1==e.state){for(var h=0;h<e.NS;h++)if(Ja.get_sensor_value(a,b,h)){for(var f=0;f<e.Ww.length;f++)if(e.Ww[f]==h){c.gp==e.fU?(aa.is_play(c.pb)&&
(e.state=-3),g.pc.Fh||(e.state=1,e.Os=e.CA[f])):(e.state=1,e.Os=e.CA[f]);e.GB=h;return}e.GB=h}e.state=0}}}function t(a,b){return{name:a.name,type:a.type,label:a.label,tb:a.slot_idx_order,Os:a.slot_idx_jump,jb:a.frame_range[0],Sb:a.frame_range[1],hP:a.frame_range_mask?a.frame_range_mask[0]:!0,gP:a.frame_range_mask?a.frame_range_mask[1]:!0,XR:a.param_name,RR:a.operation,mute:a.mute,ZE:a.object,Hg:a.anim_name,ZR:a.parse_json_vars,YR:a.parse_json_paths,Td:a.objects_paths,UG:a.nodes_paths,ib:a.floats,
za:a.bools,ya:a.variables,Fk:a.strings,zl:a.logic_functions,CG:a.logic_node_trees,FA:a.materials_names,YH:a.shader_nd_type,jd:a.common_usage_names,NO:a.encode_json_vars,MO:a.encode_json_paths,fU:b,oB:ia[a.type]?ia[a.type]:R,Ow:!1,vG:a.links,Qo:[],Nz:-1,cw:null,GB:-1}}function N(a,b,c){var e=b.$l+1-a.Qo.length;if(0<e)for(var g=0;g<e;g++)a.Qo.push(0);a.Qo[b.$l]||(a.Qo[b.$l]={Tb:{},Os:-1,state:-1,Ww:[],Sx:-1,fd:{},ed:wa.SLOT_ALL,Zc:null},c&&c(a,a.Qo[b.$l],b));return a.Qo[b.$l]}function U(a,b,c){return a[0]?
b[a[1]]:c[a[1]]}function K(a,b,c,e){a[0]?b[a[1]]=e:c[a[1]]=e}function D(a,b,c){switch(b.state){case 2:c.Ya=a.tb}}function R(a,b,c){switch(b.state){case 1:ja.error("Unknown node type: "+a.type);break;case 2:c.Ya=a.tb}}function V(a,b){for(var c=a.Ha,e=0;e<c.length;e++){var g=c[e];"SWITCH_SELECT"==g.type&&g!=b&&(N(g,a.pc).state=-3)}}function F(a,b,c){var e=oa.get_selectable_objects(),g=N(a,c.pc);g.Ww=[];g.CA=[];for(var h in a.Td){var f=a.za[h]?U(a.ya[h],b.pa,c.pc.pa):oa.Bd(oa.ne,a.Td[h],0),f=e.indexOf(f);
if(-1==f){ja.error("logic script error: non-selectable object:",a.Td[h][a.Td[h].length-1]);return}g.Ww.push(f);g.CA.push(a.vG[h])}g.NS=e.length;g=[];for(h=0;h<e.length;h++)g.push(Ja.create_selection_sensor(e[h],!1));e=L();Ja.create_sensor_manifold(null,"LOGIC_NODES_SWITCH_SELECT_"+ea(a.label),Ja.CT_SHOT,g,Ja.default_OR_logic_fun,e,[a,b,c])}function z(a,b,c,e,g){return c?U(a.ya[b],e,g):oa.Bd(oa.ne,a.Td[b],0)}function w(a){var b=a.pc.Cm;return 1>=b.length?a.Ha:b[b.length-1].fw.Br.Ha}function W(a,b,
c,e,g,h){a.pc.tC=!1;var f=a.pc.Cm,d=1>=f.length?a.Ha:f[f.length-1].fw.Br.Ha;if(d.length){if(!h)for(h=0;h<d.length;h++)d[h].Ow=!1;for(h=0;h<d.length;h++){if(0<=a.pc.Ya)var k=d[a.pc.Ya];else{if(1<a.pc.Cm.length){d=a.pc.Cm.pop().$D;f=f[f.length-1];a.pc.Ya=d.tb;d=a.pc.pa;a.pc.pa=f.pa;for(var l in a.pc.hy)f=a.pc.hy[l],void 0===a.pc.pa[l]?b.pa[l]=d[f]:a.pc.pa[l]=d[f];W(a,b,c,e,g,!0)}return}if(k.Ow)return;if(k.mute){if("ENTRYPOINT"==k.type)return;a.pc.Ya=k.tb;k.Ow=!0}else if(k.oB(k,b,a.pc,c,e,g),k.Ow=!0,
a.pc.tC)return}f.splice(0,f.length)}}function A(a,b){var c=a.b4w_logic_nodes,e=b.kg,g=b.zl;b.state=1;for(var h=-1,f=0;f<c.length;f++){for(var d={Ha:[],pc:{Kb:a,Ya:0,Fh:!1,tC:!1,$l:f,Cm:[],pa:{R1:0,R2:0,R3:0,R4:0,R5:0,R6:0,R7:0,R8:0}}},k=c[f],l=0;l<k.length;l++){var n=t(k[l],d);d.Ha.push(n)}switch(d.Ha[0].type){case "ENTRYPOINT":h++;d.pc.$l=h;e.push(d);break;case "DEF_FUNC":n=d.Ha[0],d.pc=null,g.push({id:[n.CG.id0,n.zl.id0],Br:d})}}for(f=0;f<e.length;f++)for(d=e[f],c=0;c<d.Ha.length;c++)n=d.Ha[c],
n.mute||n.oB(n,b,d.pc,0,0);for(f=0;f<g.length;f++)for(e=g[f].Br,c=0;c<e.Ha.length;c++)n=e.Ha[c],n.mute||n.oB(n,b,0,0,0);var g=a.timeline_markers,m;for(m in g)b.Ps.push(g[m]);b.Ps.sort(function(a,b){return a-b});b.state=2;na.push(b)}function n(a,b){switch(b){case 0:return Number(a)?Number(a):0;case 1:return String(a);case 2:return a;default:return null}}function g(a){switch(typeof a){case "string":return n(a,1);case "number":return n(a,0);default:return n(a,1)}}function ea(a){Fa[a]||(Fa[a]=0);var b=
a+"_"+Fa[a],b=b.replace(/ /g,"_").replace(/\//g,"_");Fa[a]++;return b}function ka(a,b){switch(b){case 0:return a.ib;case 1:return a.Fk;case 2:return a.Td}}var wa=Object(O.a)(d),M=Object(T.a)(d),E=Object(G.a)(d),Z=Object(r.a)(d),aa=Object(f.a)(d),oa=Object(k.a)(d),ja=Object(y.a)(d),Ia=Object(x.a)(d),Ca=Object(m.a)(d),Ja=Object(p.a)(d),Ma=Object(q.a)(d),X=Object(b.a)(d),Q=Object(l.a)(d),Aa=Object(c.a)(d),Ba=Object(a.a)(d),Va=Object(ca.a)(d),Ra=Object(C.a)(d),ta=new Float32Array(4),ha=new Float32Array(3),
ga=new Float32Array(3),P=new Float32Array(2),xa=new Float32Array(9),pa=new Float32Array(16);H.Iy=0;H.aD=1;H.$C=2;H.$J=0;H.iK=1;H.eK=2;H.VJ=3;H.fK=4;H.hK=5;H.ZJ=6;H.jK=7;H.XJ=8;H.WJ=9;H.YJ=10;H.aK=11;H.cK=12;H.bK=13;H.gK=14;H.dK=15;H.UJ=16;H.pK=0;H.oK=1;H.qK=2;H.rK=3;H.nK=4;H.VC=0;H.XC=1;H.WC=2;H.YC=3;H.ZC=4;H.UC=5;H.uK=0;H.tK=1;H.sK=2;H.QJ=0;H.RJ=1;H.OJ=2;H.PJ=3;H.SJ=0;H.TJ=1;var ia={ENTRYPOINT:function(a,b,c){switch(b.state){case 2:c.Cm.push({$D:null,pa:c.pa,fw:null}),c.Ya=a.tb}},HIDE:function(a,
b,c){function e(a,b){g||(b.obj=oa.Bd(oa.ne,a.Td.id0,0),b.obj||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0))}var g=a.za.id0;switch(b.state){case 2:var h=N(a,c,e);b=g?U(a.ya.id0,b.pa,c.pa):h.obj;a.za.ch?Ia.Tq(b,!0):Ia.Dm(b,!0);c.Ya=a.tb}},SHOW:function(a,b,c){function e(a,b){g||(b.obj=oa.Bd(oa.ne,a.Td.id0,0),b.obj||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0))}var g=a.za.id0;switch(b.state){case 2:var h=N(a,c,e);b=g?U(a.ya.id0,b.pa,c.pa):
h.obj;a.za.ch?Ia.Tq(b,!1):Ia.Dm(b,!1);c.Ya=a.tb}},PAGEPARAM:function(a,b,c){switch(b.state){case 2:var e=a.ya.vd;b=b.pa;var g=c.pa,h;a:{h=a.XR;var f=a.ib.ptp,d=a.za.hsh,k=Ca.get("url_params");if(k&&h in k)h=Number(k[h]);else{if(d=d?location.hash:location.search)for(d=d.slice(1).split("&"),k=0;k<d.length;k++){var l=d[k].split("=");if(1<l.length&&l[0]==h){h=n(l[1],f);break a}}h=0}}K(e,b,g,h);c.Ya=a.tb}},SWITCH_SELECT:function(a,b,c){function e(a,b){b.state=-3}switch(b.state){case 2:var g=N(a,c,e);if(-3==
g.state)g.state=-2,V(b.kg[c.$l],a),F(a,b,b.kg[c.$l]);else if(-2==g.state)g.state=-1;else if(0==g.state||1==g.state){if(a.ya.vd&&a.ya.vd[1]){var h=oa.get_selectable_objects();K(a.ya.vd,b.pa,c.pa,h[g.GB])}c.Ya=g.state?g.Os:a.tb;g.state=-3;Ja.remove_sensor_manifold(null,"LOGIC_NODES_SWITCH_SELECT_"+ea(a.label))}}},SELECT:function(a,b){switch(b.state){case 1:ja.error("Logic script error: node is deprecated. Node: ",a.name),a.mute=!0}},PLAY:function(a,b,c,e){switch(b.state){case 1:aa.WB();a.za.not_wait||
(a.za.not_wait=!1);break;case 2:var g=N(a,c);switch(g.state){case -1:if(aa.is_play(b.pb))if(b.wz==b.gp&&c.Fh)break;else{var h=b.gp;if(h){h.pc.Ya=w(h)[h.pc.Ya].tb;var h=b.gp,f=h.pc.Cm,d=f.length,k=[];1>=d&&k.push(h.Ha);for(var l=1;l<d;l++)k.push(f[l].fw.Br.Ha);for(l=0;l<k.length;l++)for(f=0;f<k[l].length;f++)d=k[l][f],"PLAY"==d.type&&(N(d,h.pc).state=-1)}}c.Fh=!a.za.not_wait;b.gp=b.wz;g.state=0;a.hP&&(aa.kT(a.jb),aa.OH(e));if(a.gP)aa.IB(a.Sb);else{e=aa.get_frame(e);var h=-1,n;for(n in b.Ps)if(e<b.Ps[n]){h=
n;break}0<=h?aa.IB(b.Ps[h]):aa.IB(aa.get_frame_end())}aa.jH(null);a.za.not_wait&&(c.Ya=a.tb,g.state=-1,c.Fh=!1);break;case 0:aa.is_play()||(c.Ya=a.tb,g.state=-1,c.Fh=!1);break;case 1:c.Ya=a.tb;g.state=-1;b.gp=null;c.Fh=!1;break;default:M.va("Unknown state of "+a.name),g.state=-1}}},REDIRECT:function(a,b,c){switch(b.state){case 2:window.location.href=a.za.url?n(U(a.ya.url,b.pa,c.pa),1):a.Fk.url,b.state=3}},MATH:function(a,b,c){switch(b.state){case 2:var e=-1==a.ya.id0[1]?a.ib.inp1:n(U(a.ya.id0,b.pa,
c.pa),0),g=-1==a.ya.id1[1]?a.ib.inp2:n(U(a.ya.id1,b.pa,c.pa),0),h=0;switch(a.RR){case 3:h=e+g;break;case 2:h=e*g;break;case 1:h=e-g;break;case 0:0==g&&M.va("Division by zero in Logic script");h=e/g;break;case 4:h=Math.random()*(g-e)+e;break;case 5:h=Math.sin(e);break;case 6:h=Math.cos(e);break;case 7:h=Math.tan(e);break;case 8:h=Math.asin(e);break;case 9:h=Math.acos(e);break;case 10:h=Math.atan(e);break;case 11:h=Math.log(e);break;case 12:h=Math.min(e,g);break;case 13:h=Math.max(e,g);break;case 14:h=
Math.round(e);break;case 15:h=e%g;break;case 16:h=Math.abs(e)}K(a.ya.vd,b.pa,c.pa,h);c.Ya=a.tb}},CONDJUMP:function(a,b,c){switch(b.state){case 2:var e=a.jd.variable_type,g=ka(a,e),h=!1;if(2==e){var f=a.za.id0?U(a.ya.id0,b.pa,c.pa):oa.Bd(oa.ne,a.Td.id0,0);b=a.za.id1?U(a.ya.id1,b.pa,c.pa):oa.Bd(oa.ne,a.Td.id1,0);switch(a.jd.condition){case 5:f==b&&(h=!0);break;case 4:f!=b&&(h=!0)}}else switch(f=-1==a.ya.id0[1]?g.inp1:n(U(a.ya.id0,b.pa,c.pa),e),b=-1==a.ya.id1[1]?g.inp2:n(U(a.ya.id1,b.pa,c.pa),e),a.jd.condition){case 5:f==
b&&(h=!0);break;case 4:f!=b&&(h=!0);break;case 3:f<b&&(h=!0);break;case 2:f>b&&(h=!0);break;case 1:f<=b&&(h=!0);break;case 0:f>=b&&(h=!0)}c.Ya=h?a.Os:a.tb}},REGSTORE:function(a,b,c){switch(b.state){case 2:if(a.za.vs)var e=U(a.ya.vs,b.pa,c.pa);else var e=a.jd.variable_type,g=ka(a,e),e=2==e?oa.Bd(oa.ne,g.id0,0):g.inp1;K([a.za["new"]&&a.za.gl||a.ya.vd[0],a.ya.vd[1]],b.pa,c.pa,e);c.Ya=a.tb}},PLAY_ANIM:function(a,b,c){function e(a,b){for(var c=-1,e=0;8>e;e++){var g=a.Xa[e];if(g&&g.Fj&&wa.nI(g.Fj)==wa.nI(b))if(-1!=
c)c=e;else return-1}return c}function g(a,c,e){c.obj=f?oa.get_world_by_name(a.ZE[0],0):z(a,"id0",h,b.pa,e.pa);c.obj||h||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}var h=a.za.id0,f=a.za.env;switch(b.state){case 2:var d=N(a,c,g);f||(d.obj=h?U(a.ya.id0,b.pa,c.pa):d.obj);0!=d.state||wa.is_play(d.obj,d.ed)||(d.state=1);switch(d.state){case -1:for(var k in b.kg){var l=b.kg[k],n=w(l),m=l.pc.Ya;-1!=m&&(n=n[m],l=N(n,l.pc),"PLAY_ANIM"==n.type&&n!=a&&0==l.state&&l.obj==d.obj&&
(l.state=1))}k=a.jd.param_anim_behavior;""==a.Hg?(wa.apply_def(d.obj),wa.set_behavior(d.obj,k,wa.SLOT_ALL)):(l=e(d.obj,a.Hg),-1==l?(d.ed=wa.ET(d.obj,a.Hg),wa.apply(d.obj,null,a.Hg,d.ed)):d.ed=l,wa.set_behavior(d.obj,k,d.ed));a.za.not_wait||(c.Fh=!0);wa.play(d.obj,null,d.ed);d.state=0;a.za.not_wait&&(c.Ya=a.tb,d.state=-1);break;case 0:break;case 1:a.za.not_wait||(c.Fh=!1);c.Ya=a.tb;d.state=-1;break;default:M.va("Unknown state of "+a.name),d.state=-1}}},SELECT_PLAY:D,SEND_REQ:function(a,b,c){function e(a,
c,e,g,h){a=JSON.stringify(a);c=h[1];e=N(h[0],c);K(h[0].ya.dst,b.pa,c.pa,a);e.state=1}var g=N(a,c);switch(b.state){case 2:switch(g.state){case -1:g.state=0;var g=a.za.url?n(U(a.ya.url,b.pa,c.pa),1):a.Fk.url,h={};a.za.ct&&(h["Content-Type"]=a.Fk.ct);"GET"==a.jd.request_type?E.enqueue([{id:g,type:E.AT_JSON,url:g,overwrite_header:h,param:[a,c]}],e,null,null,null):"POST"==a.jd.request_type&&E.enqueue([{id:g,type:E.AT_JSON,url:g,overwrite_header:h,request_method:"POST",post_data:n(U(a.ya.dst1,b.pa,c.pa),
1),param:[a,c]}],e,null,null,null);break;case 1:g.state=-1,c.Ya=a.tb}}},INHERIT_MAT:function(a,b,c){function e(a,b){for(var c=0;2>c;c++)b.Tb["id"+c]=oa.Bd(oa.ne,a.Td["id"+c],0),b.Tb["id"+c]||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}switch(b.state){case 2:b=N(a,c,e),oa.inherit_material(b.Tb.id0,a.FA.id0,b.Tb.id1,a.FA.id1),c.Ya=a.tb}},SET_SHADER_NODE_PARAM:function(a,b,c){function e(a,b){a.Td.id0&&(b.Tb.id0=oa.Bd(oa.ne,a.Td.id0,0),a.Td.id0||(ja.error("Logic script error: object not found. Node: ",
a.name),a.mute=!0),a.UG.id0.unshift(a.FA.id0))}switch(b.state){case 2:var g=N(a,c,e).Tb.id0,h=a.UG.id0,f=h[0],h=Ma.as(h,1),d=Ma.$b(g,f,"MAIN");c.Ya=a.tb;null===d?ja.error('Material "'+f+'" was not found in the object "'+g.name+'".'):("ShaderNodeRGB"==a.YH&&oa.set_nodemat_rgb(g,f,h,a.za.id0?n(U(a.ya.id0,b.pa,c.pa),0):a.ib.id0,a.za.id1?n(U(a.ya.id1,b.pa,c.pa),0):a.ib.id1,a.za.id2?n(U(a.ya.id2,b.pa,c.pa),0):a.ib.id2),"ShaderNodeValue"==a.YH&&oa.set_nodemat_value(g,f,h,a.za.id0?n(U(a.ya.id0,b.pa,c.pa),
0):a.ib.id0))}},DELAY:function(a,b,c,e,g){e=N(a,c);switch(b.state){case 2:-1==e.state?(e.state=0,e.Sx=0,c.Fh=!0):0==e.state&&(e.Sx+=g,(a.za.dl?n(U(a.ya.dl,b.pa,c.pa),0):a.ib.dl)<e.Sx&&(e.state=-1,c.Ya=a.tb,c.Fh=!1))}},APPLY_SHAPE_KEY:function(a,b,c){function e(a,b){var c=b.Tb.id0=oa.Bd(oa.ne,a.Td.id0,0);c||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);var e=a.jd.sk;X.check_shape_keys(c)?X.iA(c,e)||(ja.error("Wrong key name:",e),a.mute=!0):(ja.error("No shape keys in object:",
c.name),a.mute=!0)}switch(b.state){case 2:var g=N(a,c,e);X.Uy(g.Tb.id0,a.jd.sk,a.za.skv?n(U(a.ya.skv,b.pa,c.pa),0):a.ib.skv);c.Ya=a.tb}},OUTLINE:function(a,b,c){function e(a,b){g||(b.obj=oa.Bd(oa.ne,a.Td.id0,0),b.obj||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0),b.obj&&b.obj.ka&&b.obj.ka.Dd||(ja.error("Can't evaluate 'Outline' logic node: wrong object"),a.mute=!0))}var g=a.za.id0;switch(b.state){case 2:var h=N(a,c,e),h=g?U(a.ya.id0,b.pa,c.pa):h.obj;switch(a.jd.outline_operation){case "PLAY":b=
h.ka.kj;oa.apply_outline_anim(h,b.Gl,b.Hl,b.Il);break;case "STOP":oa.clear_outline_anim(h);break;case "INTENSITY":oa.set_outline_intensity(h,a.za["in"]?n(U(a.ya["in"],b.pa,c.pa),0):a.ib["in"])}c.Ya=a.tb}},MOVE_CAMERA:function(a,b,c){function g(a,b,c,e){switch(Z.get_move_style(a)){case Z.MS_TARGET_CONTROLS:Z.JB(a,b,c);break;case Z.MS_EYE_CONTROLS:case Z.MS_STATIC:Va.set_tsr(a,e);break;case Z.MS_HOVER_CONTROLS:B.sub(c,b,ha),B.normalize(ha,ha),Z.MH(a,c),ga[0]=ha[0],ga[1]=0,ga[2]=ha[2],b=B.dot(ga,ha),
c=Math.acos(b/(B.length(ga)*B.length(ha))),b=ha[2]?Math.atan(ha[0]/ha[2]):0<ha[0]?0:Math.PI,0<ha[2]&&0<ha[0]?P[1]=-(Math.PI+P[1]):0<ha[2]&&0>ha[0]?P[1]=-(Math.PI+P[1]):0>ha[2]&&0>ha[0]?(P[0]+=Math.PI,b=-(Math.PI-b)):0>ha[2]&&0<ha[0]&&(P[0]+=Math.PI,b-=Math.PI),Z.nT(a,b+Math.PI,-c)}Va.Ea(a);Q.sync_transform(a)}function f(a,b,c,g){h.lookAt(b,c,v.f,pa);h.invert(pa,pa);u.fromMat4(pa,xa);e.fromMat3(xa,ta);e.normalize(ta,ta);a=la.h(a.ka.na);la.s(b,a,ta,g)}function d(a,c,e){(c.Tb.ca=z(a,"id0",k,b.pa,e.pa))||
k||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);c.Tb.tr=z(a,"id1",l,b.pa,e.pa);c.Tb.tr||l||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);c.Tb.ta=z(a,"id2",m,b.pa,e.pa);c.Tb.ta||m||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);c.state=-1;c.fd={BI:new Float32Array(3),AI:new Float32Array(3),sA:new Float32Array(3),cC:new Float32Array(3),vI:new Float32Array(3),rA:new Float32Array(3),cm:new Float32Array(8),tj:new Float32Array(8),
Mr:new Float32Array(8)}}var k=a.za.id0,l=a.za.id1,m=a.za.id2;switch(b.state){case 2:var p=N(a,c,d),w=k?U(a.ya.id0,b.pa,c.pa):p.Tb.ca,q=m?U(a.ya.id2,b.pa,c.pa):p.Tb.ta,C=la.j((l?U(a.ya.id1,b.pa,c.pa):p.Tb.tr).ka.na),q=la.j(q.ka.na);switch(p.state){case -1:var A=a.za.dur?n(U(a.ya.dur,b.pa,c.pa),0):a.ib.dur;if(0==A){f(w,C,q,p.fd.tj);g(w,C,q,p.fd.tj);c.Ya=a.tb;break}a=la.j(w.ka.na);B.copy(a,p.fd.BI);var x=Z.get_move_style(w);x==Z.MS_HOVER_CONTROLS?B.copy(w.ka.$c,p.fd.cC):x==Z.MS_STATIC||x==Z.MS_EYE_CONTROLS?
(la.a(w.ka.na,p.fd.cm),f(w,C,q,p.fd.tj)):B.copy(w.ka.pivot,p.fd.cC);B.copy(C,p.fd.AI);B.copy(q,p.fd.vI);p.state=0;A=Ba.animate(0,1,1E3*A,function(a){Ia.xb()&&(x==Z.MS_STATIC||x==Z.MS_EYE_CONTROLS?la.n(p.fd.cm,p.fd.tj,v._52(a),p.fd.Mr):(p.fd.rA=B.lerp(p.fd.cC,p.fd.vI,v._52(a),p.fd.rA),p.fd.sA=B.lerp(p.fd.BI,p.fd.AI,v._52(a),p.fd.sA)),g(w,p.fd.sA,p.fd.rA,p.fd.Mr),1==a&&(p.state=1))});break;case 1:Ba.clear_animation(A),p.state=-1,c.Ya=a.tb}}},SET_CAMERA_MOVE_STYLE:function(a,b,c){function e(a,b){g.id0||
(b.Tb.id0=oa.Bd(oa.ne,a.Td.id0,0))||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);g.pvo&&!g.id1&&(b.Tb.id1=oa.Bd(oa.ne,a.Td.id1,0))}var g=a.za;switch(b.state){case 2:var h=N(a,c,e),f=g.id0?U(a.ya.id0,b.pa,c.pa):h.Tb.id0,d=f.ka;h.DM={Kx:d.Kx,use_panning:d.use_panning,zc:d.zc,Fb:d.Fb,qc:d.qc,ie:d.ie,je:d.je,Ne:d.Ne,Wi:d.Wi};if(Ra.is_camera(f)){var d=f.ka,k=h.DM;Z.wt(f);switch(a.jd.camera_move_style){case 0:d.cc=Z.MS_STATIC;break;case 2:d.cc=Z.MS_EYE_CONTROLS;var l=la.j(d.na);
Z.UH(f,l,null,k.zc,k.Fb);break;case 3:d.cc=Z.MS_HOVER_CONTROLS;var l=la.j(d.na),m=ha;a.za.pvo?(h=g.id1?U(a.ya.id1,b.pa,c.pa):h.Tb.id1,m=la.j(h.ka.na)):(m[0]=a.za.pvx?n(U(a.ya.pvx,b.pa,c.pa),0):a.ib.pvx,m[1]=a.za.pvy?n(U(a.ya.pvy,b.pa,c.pa),0):a.ib.pvy,m[2]=a.za.pvz?n(U(a.ya.pvz,b.pa,c.pa),0):a.ib.pvz);Z.VH(f,l,m,k.qc,k.Fb,k.ie,k.je,k.Wi);break;case 1:d.cc=Z.MS_TARGET_CONTROLS,l=la.j(d.na),m=ha,a.za.pvo?(h=g.id1?U(a.ya.id1,b.pa,c.pa):h.Tb.id1,m=la.j(h.ka.na)):(m[0]=a.za.pvx?n(U(a.ya.pvx,b.pa,c.pa),
0):a.ib.pvx,m[1]=a.za.pvy?n(U(a.ya.pvy,b.pa,c.pa),0):a.ib.pvy,m[2]=a.za.pvz?n(U(a.ya.pvz,b.pa,c.pa),0):a.ib.pvz),Z.WH(f,l,m,k.zc,k.Fb,k.qc,k.Ne,k.use_panning)}ga[0]=a.za.vtr?n(U(a.ya.vtr,b.pa,c.pa),0):a.ib.vtr;ga[1]=a.za.vro?n(U(a.ya.vro,b.pa,c.pa),0):a.ib.vro;ga[2]=a.za.vzo?n(U(a.ya.vzo,b.pa,c.pa),0):a.ib.vzo;ga[0]=v.M(ga[0],0,Infinity);ga[1]=v.M(ga[1],0,Infinity);ga[2]=v.M(ga[2],0,.99);d.cq=ga[0];d.bq=ga[1];d.fq=ga[2];Va.Ea(f);Q.sync_transform(f);Z.Po(f)}else ja.error("Logic script error: object is not a Camera. Node: ",
a.name);c.Ya=a.tb}},SET_CAMERA_LIMITS:function(a,b,c){function e(a,b){var c;g.id0||(c=b.Tb.id0=oa.Bd(oa.ne,a.Td.id0,0),c||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0))}var g=a.za;switch(b.state){case 2:var h=N(a,c,e),h=g.id0?U(a.ya.id0,b.pa,c.pa):h.Tb.id0;if(Ra.is_camera(h)){switch(h.ka.cc){case Z.MS_TARGET_CONTROLS:if(a.za.dsl){var f=a.za.dslmin?n(U(a.ya.dslmin,b.pa,c.pa),0):a.ib.dslmin,d=a.za.dslmax?n(U(a.ya.dslmax,b.pa,c.pa),0):a.ib.dslmax,k={};k.min=Math.max(f,0);
k.max=Math.max(d,0);Z.DH(h,k)}a.za.vrl&&(f=a.za.vrldown?n(U(a.ya.vrldown,b.pa,c.pa),0):a.ib.vrldown,d=a.za.vrlup?n(U(a.ya.vrlup,b.pa,c.pa),0):a.ib.vrlup,k={},k.down=f,k.up=d,k.camera_space="CAMERA"==a.jd.cam_lim_vert_rot_space_type,Z.ax(h,k));a.za.hrl&&(f=a.za.hrlleft?n(U(a.ya.hrlleft,b.pa,c.pa),0):a.ib.hrlleft,d=a.za.hrlright?n(U(a.ya.hrlright,b.pa,c.pa),0):a.ib.hrlright,k={},k.left=f,k.right=d,k.camera_space="CAMERA"==a.jd.cam_lim_hor_rot_space_type,Z.$w(h,k));a.za.pvl&&(f=a.za.pvlmin?n(U(a.ya.pvlmin,
b.pa,c.pa),0):a.ib.pvlmin,b=a.za.pvlmax?n(U(a.ya.pvlmax,b.pa,c.pa),0):a.ib.pvlmax,k={},k.min_z=f,k.max_z=b,Z.PH(h,k));break;case Z.MS_HOVER_CONTROLS:a.za.htl&&(f=a.za.htlmin?n(U(a.ya.htlmin,b.pa,c.pa),0):a.ib.htlmin,d=a.za.htlmax?n(U(a.ya.htlmax,b.pa,c.pa),0):a.ib.htlmax,k={},k.min=f,k.max=d,Z.LH(h,k));a.za.vtl&&(f=a.za.vtlmin?n(U(a.ya.vtlmin,b.pa,c.pa),0):a.ib.vtlmin,d=a.za.vtlmax?n(U(a.ya.vtlmax,b.pa,c.pa),0):a.ib.vtlmax,k={},k.min=f,k.max=d,Z.SH(h,k));a.za.vrl&&(f=a.za.vrldown?n(U(a.ya.vrldown,
b.pa,c.pa),0):a.ib.vrldown,d=a.za.vrlup?n(U(a.ya.vrlup,b.pa,c.pa),0):a.ib.vrlup,k={},k.down=f,k.up=d,k.camera_space="CAMERA"==a.jd.cam_lim_vert_rot_space_type,Z.hover_set_vertical_limits(h,k));a.za.dsl&&(f=a.za.dslmin?n(U(a.ya.dslmin,b.pa,c.pa),0):a.ib.dslmin,d=a.za.dslmax?n(U(a.ya.dslmax,b.pa,c.pa),0):a.ib.dslmax,k={},k.min=Math.max(f,0),k.max=Math.max(d,0),Z.hover_set_distance_limits(h,k));break;case Z.MS_EYE_CONTROLS:a.za.vrl&&(f=a.za.vrldown?n(U(a.ya.vrldown,b.pa,c.pa),0):a.ib.vrldown,d=a.za.vrlup?
n(U(a.ya.vrlup,b.pa,c.pa),0):a.ib.vrlup,k={},k.down=f,k.up=d,k.camera_space="CAMERA"==a.jd.cam_lim_vert_rot_space_type,Z.ax(h,k)),a.za.hrl&&(f=a.za.hrlleft?n(U(a.ya.hrlleft,b.pa,c.pa),0):a.ib.hrlleft,d=a.za.hrlright?n(U(a.ya.hrlright,b.pa,c.pa),0):a.ib.hrlright,k={},k.left=f,k.right=d,k.camera_space="CAMERA"==a.jd.cam_lim_hor_rot_space_type,Z.$w(h,k))}Va.Ea(h);Q.sync_transform(h)}else ja.error("Logic script error: object is not a Camera. Node: ",a.name);c.Ya=a.tb}},MOVE_TO:function(a,b,c){function e(a,
b){Va.set_tsr(a,b);Va.Ea(a);Q.sync_transform(a)}function g(a,c,e){c.Tb.id0=z(a,"id0",f,b.pa,e.pa);c.Tb.id0||f||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);c.Tb.id1=z(a,"id1",d,b.pa,e.pa);c.Tb.id1||d||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);c.state=-1;c.Zc={UE:new Float32Array(8),Bz:new Float32Array(8),XF:new Float32Array(8)}}var h=a.za,f=h.id0,d=h.id1;switch(b.state){case 2:var k=N(a,c,g),l=h.id0?U(a.ya.id0,b.pa,c.pa):k.Tb.id0;if(l.is_dynamic)switch(la.a(l.ka.na,
k.Zc.UE),la.a((h.id1?U(a.ya.id1,b.pa,c.pa):k.Tb.id1).ka.na,k.Zc.Bz),k.state){case -1:h=a.za.dur?n(U(a.ya.dur,b.pa,c.pa),0):a.ib.dur;if(0==h){e(l,k.Zc.Bz);c.Ya=a.tb;break}k.state=0;var m=Ba.animate(0,1,1E3*h,function(a){Ia.xb()&&(k.Zc.AX=la.n(k.Zc.UE,k.Zc.Bz,v._52(a),k.Zc.XF),e(l,k.Zc.XF),1==a&&(k.state=1))});break;case 1:Ba.clear_animation(m),k.state=-1,c.Ya=a.tb}else ja.error("Logic script error: object '"+l.name+"' must be dynamic. Node: ",a.name),c.Ya=a.tb}},TRANSFORM_OBJECT:function(a,b,c){function e(a,
b,c){0==c?Va.set_tsr(a,b):Va.set_tsr_rel(a,b);Va.Ea(a);Q.sync_transform(a)}var g=a.za.id0,h=N(a,c,function(a,c,e){c.obj=z(a,"id0",g,b.pa,e.pa);c.obj||g||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0);c.state=-1;c.Zc={tx:0,cm:new Float32Array(8),tj:new Float32Array(8),Mr:new Float32Array(8)}});switch(b.state){case 2:var f=g?U(a.ya.id0,b.pa,c.pa):h.obj;switch(h.state){case -1:ga[0]=a.za.trx?n(U(a.ya.trx,b.pa,c.pa),0):a.ib.trx;ga[1]=a.za["try"]?n(U(a.ya["try"],b.pa,c.pa),
0):a.ib["try"];ga[2]=a.za.trz?n(U(a.ya.trz,b.pa,c.pa),0):a.ib.trz;ha[0]=a.za.rox?n(U(a.ya.rox,b.pa,c.pa),0)*Math.PI/180:a.ib.rox;ha[1]=a.za.roy?n(U(a.ya.roy,b.pa,c.pa),0)*Math.PI/180:a.ib.roy;ha[2]=a.za.roz?n(U(a.ya.roz,b.pa,c.pa),0)*Math.PI/180:a.ib.roz;var d=a.za.sc?U(a.ya.sc,b.pa,c.pa):a.ib.sc;v.Y(ha,ta);la.s(ga,d,ta,h.Zc.tj);h.Zc.tx=a.jd.space_type;switch(h.Zc.tx){case 0:Va.get_tsr(f,h.Zc.cm);break;case 1:Va.get_tsr_rel(f,h.Zc.cm);break;case 2:Va.get_tsr_rel(f,h.Zc.cm),la.p(h.Zc.cm,h.Zc.tj,h.Zc.tj)}d=
a.za.dur?n(U(a.ya.dur,b.pa,c.pa),0):a.ib.dur;if(0==d){e(f,h.Zc.tj,h.Zc.tx);c.Ya=a.tb;break}h.state=0;d=Ba.animate(0,1,1E3*d,function(a){Ia.xb()&&(la.n(h.Zc.cm,h.Zc.tj,v._52(a),h.Zc.Mr),e(f,h.Zc.Mr,h.Zc.tx),1==a&&(h.state=1))});break;case 1:Ba.clear_animation(d),h.state=-1,c.Ya=a.tb}}},SPEAKER_PLAY:function(a,b,c){function e(a,c,e){c.obj=z(a,"id0",g,b.pa,e.pa);c.obj||g||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}var g=a.za.id0;switch(b.state){case 1:void 0==a.za.not_wait&&
(a.za.not_wait=!0);break;case 2:var h=N(a,c,e);h.obj=g?U(a.ya.id0,b.pa,c.pa):h.obj;Aa.is_playing(h.obj)||0!=h.state||(h.state=1);switch(h.state){case -1:for(var f in b.kg){var d=b.kg[f].pc.Ya;-1!=d&&(d=b.kg[f].Ha[d],"SPEAKER_PLAY"==d.type&&d!=a&&0==h.state&&d.obj==a.obj&&(d.state=1))}a.za.not_wait||(c.Fh=!0);Aa.play_def(h.obj);h.state=0;break;case 0:a.za.not_wait&&(c.Ya=a.tb,h.state=-1);break;case 1:a.za.not_wait||(c.Fh=!1);c.Ya=a.tb;h.state=-1;break;default:M.va("Unknown state of "+a.name),h.state=
-1}}},SPEAKER_STOP:function(a,b,c){function e(a,c,e){c.obj=z(a,"id0",g,b.pa,e.pa);c.obj||g||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}var g=a.za.id0;switch(b.state){case 2:var h=N(a,c,e);Aa.stop(g?U(a.ya.id0,b.pa,c.pa):h.obj);c.Ya=a.tb}},STOP_ANIM:function(a,b,c){function e(a,c,e){c.obj=h?oa.get_world_by_name(a.ZE[0],0):z(a,"id0",g,b.pa,e.pa);c.obj||g||(ja.error("Logic script error: object not found. Node: ",a.name),a.mute=!0)}var g=a.za.id0,h=a.za.env;switch(b.state){case 2:var f=
N(a,c,e);f.obj=g?U(a.ya.id0,b.pa,c.pa):f.obj;wa.stop(f.obj,wa.SLOT_ALL);a.za.rst&&wa.set_first_frame(f.obj,wa.SLOT_ALL);c.Ya=a.tb}},STOP_TIMELINE:function(a,b,c,e){switch(b.state){case 2:a.za.rst&&aa.OH(e),aa.WB(),c.Ya=a.tb}},CONSOLE_PRINT:function(a,b,c){switch(b.state){case 2:var e=0,g="{",h;for(h in a.ya){0<e&&(g+=", ");var f=U(a.ya[h],b.pa,c.pa),g=g+('"'+a.ya[h][1]+'": ');try{g+=JSON.stringify(f)}catch(za){g=f?g+('{"name": "'+f.name+'", "type": "'+f.type+'"}'):g+"Object"}++e}ja.log(a.jd.msg,g+
"}");c.Ya=a.tb}},STRING:function(a,b,c){switch(b.state){case 2:var e=a.za.id0?n(U(a.ya.id0,b.pa,c.pa),1):a.Fk.id0,g=a.za.id1?n(U(a.ya.id1,b.pa,c.pa),1):a.Fk.id1,h=0;switch(a.jd.string_operation){case 0:h=e+g;break;case 1:h=e.indexOf(g);break;case 2:h=e.replace(g,a.za.id2?n(U(a.ya.id2,b.pa,c.pa),1):a.Fk.id2);break;case 3:var f=a.ya,h=e.substring(0,e.indexOf(g));K(f.dst1,b.pa,c.pa,e.substring(e.indexOf(g)+1,e.length));""==U(f.dst,b.pa,c.pa)&&(h=U(f.dst1,b.pa,c.pa),K(f.dst1,b.pa,c.pa,""));break;case 4:switch(a.jd.condition){case 5:h=
e==g?1:0;break;case 4:h=e!=g?1:0;break;case 3:h=e<g?1:0;break;case 2:h=e>g?1:0;break;case 1:h=e<=g?1:0;break;case 0:h=e>=g?1:0}}K(a.ya.dst,b.pa,c.pa,h);c.Ya=a.tb}},GET_TIMELINE:function(a,b,c,e){switch(b.state){case 2:e=a.za.nla?n(aa.get_frame(e),0):n(Ba.get_frame(e),0),K(a.ya.vd,b.pa,c.pa,e),c.Ya=a.tb}},JSON:function(a,b,c){function e(a,b,c,e){for(var h=0;h<b.length;h++){for(var f=b[h].split("."),d=a,k=c[h],l=0;l<f.length&&(d=d[f[l]],void 0!==d&&null!==d);l++);d=g(d);e[k]=d}}function h(a,b,c,e){e||
(e={});for(var h=0;h<b.length;h++){var f=b[h].split("."),d=e,k=c[h];if(k in a){for(var l=0;l<f.length-1;l++)void 0===d[f[l]]&&(d[f[l]]=isNaN(f[l+1])?{}:[]),d=d[f[l]];d[f[f.length-1]]=g(a[k])}}}switch(b.state){case 2:switch(a.jd.json_operation){case "PARSE":try{var f=JSON.parse(n(U(a.ya.jsn,b.pa,c.pa),1));e(f,a.YR,a.ZR,c.pa)}catch(La){ja.error("logic script error: non valid JSON string")}break;case "ENCODE":f={},h(c.pa,a.MO,a.NO,f),f=n(JSON.stringify(f),1),K(a.ya.jsn,b.pa,c.pa,f)}c.Ya=a.tb}},JS_CALLBACK:function(a,
b,c){switch(b.state){case 2:for(var e=a.za.cb?n(U(a.ya.cb,b.pa,c.pa),1):a.Fk.cb,h=[],f=0,d="id"+f,k=a.jd.js_cb_params;d in k;)d=0==k[d]?oa.Bd(oa.ne,a.Td[d],0):U(a.ya[d],b.pa,c.pa),h.push(d),f++,d="id"+f;k=[];f=0;for(d="out"+f;d in a.ya;)d=U(a.ya[d],b.pa,c.pa),k.push(d),f++,d="out"+f;f=1;if(e in ra){if(f=!ra[e](h,k))for(e=0;e<k.length;e++)d="out"+e,d in a.ya&&K(a.ya[d],b.pa,c.pa,g(k[e]))}else ja.error("logic script error: no custom callback with id "+e);f&&(c.Ya=a.tb)}},EMPTY:D,DATE_TIME:function(a,
b,c){switch(b.state){case 2:var e=new Date,g,h,f,d,k;"L"==a.jd.time_type?(g=e.getFullYear(),h=e.getMonth(),f=e.getDate(),d=e.getHours(),k=e.getMinutes(),e=e.getSeconds()):(g=e.getUTCFullYear(),h=e.getUTCMonth(),f=e.getUTCDate(),d=e.getUTCHours(),k=e.getUTCMinutes(),e=e.getUTCSeconds());a.za.y&&K(a.ya.y,b.pa,c.pa,g);a.za.M&&K(a.ya.M,b.pa,c.pa,h);a.za.d&&K(a.ya.d,b.pa,c.pa,f);a.za.h&&K(a.ya.h,b.pa,c.pa,d);a.za.m&&K(a.ya.m,b.pa,c.pa,k);a.za.s&&K(a.ya.s,b.pa,c.pa,e);c.Ya=a.tb}},ELAPSED:function(a,b,c,
e,g){switch(b.state){case 2:K(a.ya.s,b.pa,c.pa,g),c.Ya=a.tb}},CALL_FUNC:function(a,b,c){switch(b.state){case 1:c=a.CG.id0;for(var e=a.zl.id0,g=0;g<b.zl.length;g++){var h=b.zl[g];if(h.id[0][0]==c[0]&&h.id[0][1]==c[1]&&h.id[1]==e){a.Nz=g;break}}break;case 2:e={};c.hy={};for(g in a.ya){var h=a.ya[g][1],f=a.Fk[g];e[f]=a.ya[g][0]?b.pa[h]:c.pa[h];g.startsWith("out")&&(c.hy[h]=f)}c.Cm.push({$D:a,pa:e,fw:b.zl[a.Nz]});c.pa=e;c.tC=!0;c.Ya=b.zl[a.Nz].Br.Ha[0].tb}},DEF_FUNC:D,SWITCH:function(a,b,c){switch(b.state){case 1:b=
Object.keys(a.ya);for(var e in b)b[e].startsWith("id")||b.splice(e,1);a.cw=b;break;case 2:var g=U(a.ya.v,b.pa,c.pa);for(e in a.cw)if(g==U(a.ya[a.cw[e]],b.pa,c.pa)){c.Ya=a.vG[a.cw[e]];return}c.Ya=a.tb}}},na=[],ra={},Fa={};H.DQ=function(a,b){var c={He:b,BH:a.name,state:0,gp:null,Kb:a,wz:null,kg:[],zl:[],Ps:[],pa:{},hy:{}};a.kW=c;A(a,c)};H.update=function(a,b){var c=aa.dQ();if(!(0>=c))for(var e=0;e<na.length;e++)for(var g=e,h=a,f=b,d=c,k=na[g],l=0;l<na[g].kg.length;l++)k.wz=na[g].kg[l],W(na[g].kg[l],
k,h,f,d)};H.NL=function(a,b){ra[a]=b};H.tS=function(a){delete ra[a]};H.GS=function(a,b){for(var c=0;c<na.length;c++)if(na[c].BH==a){for(var c=na[c],e=0;e<c.kg.length;e++){var g=c.kg[e].Ha[0];if(g.name==b){g.za.js&&(g.mute=!1);c.kg[e].pc.Ya=0;break}}break}};H.cleanup=function(){na.length=0;ra={};Fa={}}});t.a=d},function(E,t,d){E=d(0);var O=d(55),T=d(37),G=d(43),r=d(4),f=d(35),k=d(15),y=d(66),x=d(53),m=d(42),p=d(44),q=d(62),b=d(28),u=d(20),h=d(38),l=d(51),e=d(52),c=d(79),a=d(59),ca=d(12),la=d(19),v=
d(1),B=d(22),C=d(10),L=d(23),H=d(34),I=d(17),da=d(18),N=d(13),U=d(2),K=d(46),D=d(47);d=Object(E.a)("main",function(d,t){function F(){}function z(){}function w(){}function W(){window.performance||(pa.log("Apply performance workaround"),window.performance={});var a=Date.now();window.performance.now||(pa.log("Apply performance.now() workaround"),window.performance.now=function(){return Date.now()-a});Za.RH(0)}function A(a,b){for(var c=null,e=b?bb:ya,g=0;g<e.length;g++){var h=e[g];try{c=a.getContext(h,
Sa)}catch($a){}if(c)break}c&&ja.CO(c);return c}function n(a,b,c){a.addEventListener("webglcontextlost",function(a){a.preventDefault();pa.error("WebGL context lost");ea()},!1);Aa.fh(c);var e=Aa.get_renderer_info();e&&pa.log("%cRENDERER INFO:","color: #00a",c.getParameter(e.UNMASKED_VENDOR_WEBGL)+", "+c.getParameter(e.UNMASKED_RENDERER_WEBGL));ia.fh(c);Ba.fh(c);fa.fh(c);Fa.fh(c);Ia.fh(c);Ca.vT(c);X.fh(c);Ma.wT(a);Ia.init(a,b);na.TH(a.width,a.height,1);ra.init();Va.init();z=M();R()}function g(){F=function(){}}
function ea(){ka()||(za=performance.now()/1E3,ra.pause(),xa.pause(),fa.pause(),V.pause())}function ka(){return S<za}function R(){var a="HMD"===Pa.stereo&&Va.lQ();a?a.requestAnimationFrame(R):sa(R);var b=performance.now()/1E3;La||(La=b);var c=b-La;if(!(c<1/Pa.max_fps)){for(var e=Za.get_timeline(),g=0;g<Ua.length;g++)Ua[g](e,c);ka()||(S>La&&(c-=S-Math.max(za,La)),Za.$S(c),e+=c,Za.RH(e),Q.update(),aa.update(),Ma.update(),g=c,Ma.is_primary_loaded()&&(Ra.reset(),Da.update(g),ga.update(e,g),ta.update(e,
g),ra.update(e,g),g&&E.update(g),Ma.is_primary_loaded()&&(xa.update(e,g),Ma.is_primary_loaded()&&(Va.update(e),Ja.update(e,g),Ma.is_primary_loaded()&&(V.update(!1),P.update(e,g),Ga.update(),F(g,e),Ma.is_primary_loaded()&&(na.update(e,g),V.QU(),ha.frame()))))),z(c));La=b;a&&a.isPresenting&&a.submitFrame()}}function M(){var a=60,b=0,c=Pa.iF,e=Pa.fP;return function(g){g<1/Pa.max_fps||(a=U._50(1/g,a,g,c),g=xa.TP(),(b=(b+1)%e)||w(Math.round(a),g))}}var V=Object(O.a)(d),E=Object(T.a)(d),aa=Object(G.a)(d),
oa=Object(r.a)(d),ja=Object(f.a)(d),Ia=Object(k.a)(d),Ca=Object(y.a)(d),Ja=Object(x.a)(d),Ma=Object(m.a)(d),X=Object(p.a)(d),Q=Object(q.a)(d),Aa=Object(b.a)(d),Ba=Object(u.a)(d),Va=Object(h.a)(d),Ra=Object(l.a)(d),ta=Object(e.a)(d),ha=Object(c.a)(d),ga=Object(a.a)(d),P=Object(ca.a)(d),xa=Object(la.a)(d),pa=Object(v.a)(d),ia=Object(B.a)(d),na=Object(C.a)(d),ra=Object(L.a)(d),Fa=Object(H.a)(d),fa=Object(I.a)(d),Za=Object(da.a)(d),Da=Object(N.a)(d),Ga=Object(D.a)(d),Sa=oa.context,Pa=oa.wa,La=0,za=0,
S=0,Ua=[],ya=["webgl","experimental-webgl"],bb=["webgl2","experimental-webgl2"],Xa=null,sa=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1E3/Pa.max_fps)}}();t.init=function(a,b){pa.sT(Pa.console_verbose);var c=Object(K.f)()+" "+Object(K.d)()+" ("+Object(K.b)()+")";pa.log("%cINIT ENGINE","color: #00a",c);pa.log("%cUSER AGENT:",
"color: #00a",navigator.userAgent);if(!window.WebGLRenderingContext)return null;W();b?Ra.init(b):(oa.wa.show_hud_debug_info=!1,oa.Qa.ow=!1);ja.ZL();ja.hE("Chrome")||ja.hE("Firefox")||(Pa.Nb=!1);c=A(a,Pa.Nb);!c&&Pa.Nb&&(Pa.Nb=!1,c=A(a,!1));if(!c)return null;pa.log("%cINIT WEBGL "+(Pa.Nb?"2":"1"),"color: #00a");Xa=c;n(a,b,c);oa.apply_quality();ja.KH(c,!0);oa.iT();Fa.mR();Pa.Jv&&(a.style["touch-action"]="none");pa.log("%cSET PRECISION:","color: #00a",Pa.precision);return c};t.set_fps_callback=function(a){w=
a};t.clear_fps_callback=function(){w=function(){}};t.set_render_callback=function(a){F=a};t.clear_render_callback=function(){g()};t.pause=ea;t.resume=function(){ka()&&(S=performance.now()/1E3,ra.resume(),xa.resume(),fa.play(!0),V.resume())};t.is_paused=ka;t.reset=function(){Ma.unload(0);Ca.reset();Ma.reset();Aa.reset();ia.reset();Ba.reset();fa.DS();Fa.reset();X.reset();Ia.reset();Ma.reset();Ia.reset();Za.reset();ra.reset();S=za=La=0;w=function(){};z=function(){};F=function(){};Ua.length=0;Xa=null};
t.canvas_data_url=function(a,b,c,e){ha.canvas_data_url(a,b,c,e)};t.detect_mobile=function(){return ja.detect_mobile()};t.append_loop_cb=function(a){for(var b=0;b<Ua.length;b++)if(Ua[b]==a)return;Ua.push(a)};t.remove_loop_cb=function(a){for(var b=0;b<Ua.length;b++)if(Ua[b]==a){Ua.splice(b,1);break}};t.get_renderer_info=function(){var a=Aa.get_renderer_info();return a?{vendor:Xa.getParameter(a.UNMASKED_VENDOR_WEBGL),renderer:Xa.getParameter(a.UNMASKED_RENDERER_WEBGL)}:null}});t.a=d},function(E,t,d){E=
d(0);var O=d(5),T=d(4),G=d(86),r=d(31),f=d(27),k=d(21),y=d(1),x=d(34),m=d(2),p=d(3),q=d(17);d=Object(E.a)("__nodemat",function(b,d){function h(b,c,e,g,f,d){if(c in Qa)return Qa[c];var k={fb:null,id:c,pE:!0};e||(gb={},wb=0);if("SHADOW"!=g&&"COLOR_ID"!=g){for(var n=ba.create(),p=b.nodes,w=0;w<p.length;w++)if(null==Ca(n,p[w],0,g,f,d))return Qa[c]=null,k;if(e&&-1==oa(b,n,"GROUP_OUTPUT","group"))return k;w=Da(n);f=e?b.links:b.links.slice();if(!Ga(n,f,w))return k;if(e)return k.fb=n,k;for(w=0;w<f.length;w++){e=
f[w];for(var p=F(e.from_node,n),v=F(e.to_node,n),q=0;q<p.length;q++)for(var u=0;u<v.length;u++){var C=p[q],A=v[u],x=ba.Ib(n,C),r=ba.Ib(n,A);if(!fa(n,C,A,x,r,e))return Qa[c]=null,k}}V(n);w=!1;f=-1;"GLOW"==g?f=oa(b,n,"B4W_GLOW_OUTPUT","material",!0):(f=oa(b,n,"OUTPUT","material",!1,!0),-1==f&&(f=oa(b,n,"OUTPUT_MATERIAL","material",!1,!0)),-1==f&&(f=oa(b,n,"OUTPUT_WORLD","material",!1,!0),w=!0));-1==f&&(n=U(),f=0);z(n);b=ba.Wl(n,f,ba.Sk);w?(L(b),H(b,g),I(b),da(b)):(l(b,d),a(b,d));K(b);W(b);E(b);R(b,
g);Ua(b)}else g=h(b,c,e,"MAIN",f,d),g=ba.clone(g.fb,function(a){var b=m.N(a);b.inputs=m.O(a.inputs);b.outputs=m.O(a.outputs);return b}),f=oa(b,g,"OUTPUT","material",!1,!0),-1==f&&(f=oa(b,g,"OUTPUT_MATERIAL","material",!1,!0)),N(g,f),b=ba.Wl(g,f,ba.Sk),K(b);k.fb=b;return Qa[c]=k}function l(a,b){var c=[];ba.Oa(a,function(a,b){"MATERIAL"!=b.type&&"MATERIAL_EXT"!=b.type||c.push({nf:a,node:b})});for(var g=0;g<c.length;++g){var h=c[g].nf,f=c[g].node,d=ba.$j(a);ba.Zh(a,d,f.data.xR);var k=ba.$j(a);ba.Zh(a,
k,f.data.yR);ba.hd(a,d,k,[4,2]);for(var l={5:["LIGHTING_APPLY",10],6:["LIGHTING_APPLY",6],7:["MATERIAL_END",3],8:["MATERIAL_END",4],9:["MATERIAL_END",5]},n=ba.aj(a,h),m=[],p=[],w=[],v={},q=0;q<n;q++){var u=ba.Ug(a,h,q);u in v||(v[u]=0);var C=ba.td(a,u,h,v[u]++);m.push([u,h,C]);var z=l[C[1]];if(z)switch(z[0]){case "MATERIAL_END":p.push([u,k,[C[0],z[1]]]);break;case "LIGHTING_APPLY":w.push([u,[C[0],z[1]]])}else p.push([u,d,C])}e(a,f.data.value,d,k,w,b);for(q=0;q<m.length;q++)ba.xi(a,m[q][0],m[q][1],
m[q][2]);for(q=0;q<p.length;q++)ba.hd(a,p[q][0],p[q][1],p[q][2]);f=ba.bh(a,h);d=[];l=[];n={};for(q=0;q<f;q++)m=ba.Bh(a,h,q),m in n||(n[m]=0),C=ba.td(a,h,m,n[m]++),d.push([h,m,C]),l.push([k,m,C]);for(q=0;q<d.length;q++)ba.xi(a,d[q][0],d[q][1],d[q][2]);for(q=0;q<l.length;q++)ba.hd(a,l[q][0],l[q][1],l[q][2]);ba.ng(a,h)}}function e(a,b,e,g,h,f){var d={name:"LIGHTING_AMBIENT",type:"LIGHTING_AMBIENT"},k=Ca(a,d,0,null,null,[]),l=k;c(a,e,k,"E");c(a,e,k,"A");c(a,e,k,"D");if(!b.bd)for(var n,m=0;m<f.length;m++){var p=
f[m],d={name:"LIGHTING_LAMP",type:"LIGHTING_LAMP"};n=Ca(a,d,0,null,null,[]);d={name:"LIGHTING_APPLY",type:"LIGHTING_APPLY"};k=Ca(a,d,0,null,null,[]);c(a,l,k,"color");c(a,l,k,"specular");c(a,n,k,"ldir");c(a,e,k,"normal");c(a,e,k,"D");c(a,e,k,"S");c(a,n,k,"lcolorint");c(a,e,n,"shadow_factor");d="SPECULAR_"+b.Mf;d={name:d,type:d,use_tangent_shading:b.Se};d=Ca(a,d,0,null,null,[]);c(a,n,d,"ldir");c(a,n,d,"lfac");c(a,e,d,"normal");c(a,d,k,"sfactor");c(a,n,d,"norm_fac");c(a,e,d,"sp_params");p="HEMI"==p.type?
"DIFFUSE_LAMBERT":"DIFFUSE_"+b.Df;d={name:p,type:p,use_tangent_shading:b.Se};d=Ca(a,d,0,null,null,[]);c(a,n,d,"ldir");c(a,n,d,"lfac");c(a,e,d,"normal");c(a,n,d,"norm_fac");c(a,d,k,"lfactor");"DIFFUSE_LAMBERT"!=p&&c(a,e,d,"dif_params");for(n=0;n<h.length;n++)ba.hd(a,h[n][0],k,h[n][1]);l=k}c(a,l,g,"color");c(a,l,g,"specular")}function c(a,b,c,e){for(var g=ba.Ib(a,b),h=-1,f=ba.Ib(a,c).inputs,d=0;d<f.length;d++)if(e==f[d].identifier){h=d;break}if(-1!=h){for(var k=-1,g=g.outputs,d=0;d<g.length;d++)if(e==
g[d].identifier){k=d;break}-1!=k&&(ba.hd(a,b,c,[k,h]),g[k].mb=!0,f[h].mb=!0)}}function a(a,b){var c=[];ba.Oa(a,function(a,b){"OUTPUT_MATERIAL"==b.type&&c.push({nf:a,node:b})});for(var e=0;e<c.length;++e){var g=c[e].nf,h=c[e].node,f=!1,d=!1,k=ba.$j(a);ba.Zh(a,k,h.data.UR);for(var l=ba.aj(a,g),n=[],m=[],p={},w=0;w<l;w++){var v=ba.Ug(a,g,w);v in p||(p[v]=0);var q=ba.td(a,v,g,p[v]++);n.push([v,g,q]);switch(q[1]){case 0:f=!0;m.push([v,k,q]);break;case 2:var d=!0,C=ba.$j(a);ba.Zh(a,C,h.data.DO);m.push([v,
C,[q[0],0]])}}for(w=0;w<n.length;w++)ba.xi(a,n[w][0],n[w][1],n[w][2]);for(w=0;w<m.length;w++)ba.hd(a,m[w][0],m[w][1],m[w][2]);ba.ng(a,g);f?(d&&u(a,k,C),B(a,b)):(g=ba.Ib(a,k),a.Ha=[0,g],a.kb=[])}}function u(a,b,e){b=ba.Wl(a,b,ba.Sk);var g=v(b);if(g.length){e=ba.Wl(a,e,ba.Sk);e=ba.clone(e,Ia,Fa);ba.Oa(e,function(a,b){b.name="displacement%join%"+b.name});ba.BD(e,b,[],[]);var h=-1;ba.Oa(b,function(a,b){if("DISPLACEMENT_BUMP"==b.type)return h=a,1});for(e=0;e<g.length;e++){var f=g[e],d=ba.Ib(b,f);c(b,h,
f,"Normal");t(d)}}a.Ha=b.Ha;a.kb=b.kb}function t(a){a=a.Gb;for(var b=0;b<a.length;b++){var c=a[b];"USE_NORMAL_IN"==c[0]&&(c[1]=1)}}function v(a){var b=[];ba.Oa(a,function(a,c){for(var e=!1,g=c.inputs,h=0;h<g.length;h++)if("Normal"==g[h].identifier){e=!g[h].mb;break}e&&b.push(a)});return b}function B(a,b){var c=[];ba.Oa(a,function(a,b){"OUTPUT_SURFACE"==b.type&&c.push({nf:a,node:b})});var e=[];c.length&&ba.Oa(a,function(a,b){"MIX_SHADER"==b.type&&e.push({nf:a,node:b})});for(var g=0;g<c.length;++g){var h=
c[g].nf,f=c[g].node,d=ba.$j(a);ba.Zh(a,d,f.data.uM);var k=ba.$j(a);ba.Zh(a,k,f.data.vM);ba.hd(a,d,k,[4,2]);for(var l=ba.aj(a,h),n=[],m=[],p={},w=0;w<l;w++){var v=ba.Ug(a,h,w),q=ba.Ib(a,v);v in p||(p[v]=0);var u=ba.td(a,v,h,p[v]++);n.push([v,h,u]);m.push([v,d,u]);if("BSDF_GLOSSY"==q.type||"BSDF_DIFFUSE"==q.type||"MIX_SHADER"==q.type||"EMISSION"==q.type||"BSDF_TRANSPARENT"==q.type||"BSDF_PRINCIPLED"==q.type)for(m.push([v,d,[1,1]]),m.push([v,d,[2,2]]),m.push([v,d,[3,3]]),m.push([v,d,[4,4]]),m.push([v,
d,[5,5]]),m.push([v,d,[6,6]]),m.push([v,d,[7,7]]),m.push([v,d,[8,8]]),m.push([v,d,[9,9]]),m.push([v,d,[10,10]]),v=0;v<e.length;++v)for(var q=e[v].nf,u=ba.aj(a,q),z=0;z<u;z++){var A=ba.Ug(a,q,z),x=ba.Ib(a,A),r=ba.td(a,A,q,0);0==r[1]||"BSDF_GLOSSY"!=x.type&&"BSDF_DIFFUSE"!=x.type&&"MIX_SHADER"!=x.type&&"EMISSION"!=x.type&&"BSDF_TRANSPARENT"!=x.type&&"BSDF_PRINCIPLED"!=x.type||(x=1==r[1]?3:13,m.push([A,q,[1,x]]),m.push([A,q,[2,x+1]]),m.push([A,q,[3,x+2]]),m.push([A,q,[4,x+3]]),m.push([A,q,[5,x+4]]),
m.push([A,q,[6,x+5]]),m.push([A,q,[7,x+6]]),m.push([A,q,[8,x+7]]),m.push([A,q,[9,x+8]]),m.push([A,q,[10,x+9]]))}}C(a,f.data.value,d,k,b);m.push([k,h,[0,0]]);m.push([k,h,[1,1]]);for(w=0;w<n.length;w++)ba.xi(a,n[w][0],n[w][1],n[w][2]);for(w=0;w<m.length;w++)ba.hd(a,m[w][0],m[w][1],m[w][2])}}function C(a,b,e,g,h){var f=[],d={name:"LIGHTING_AMBIENT",type:"LIGHTING_AMBIENT"},k=Ca(a,d,0,null,null,[]),l=k;c(a,e,k,"E");c(a,e,k,"A");c(a,e,k,"D");for(var n,m=0;m<h.length;m++){d={name:"LIGHTING_LAMP",type:"LIGHTING_LAMP"};
n=Ca(a,d,0,null,null,[]);d={name:"LIGHTING_APPLY",type:"LIGHTING_APPLY"};k=Ca(a,d,0,null,null,[]);c(a,l,k,"color");c(a,l,k,"specular");c(a,n,k,"ldir");c(a,e,k,"normal");c(a,e,k,"D");c(a,e,k,"S");c(a,n,k,"lcolorint");c(a,e,n,"shadow_factor");l=b.wM;d={name:l,type:l};l=Ca(a,d,0,null,null,[]);c(a,n,l,"ldir");c(a,n,l,"lfac");c(a,e,l,"normal");c(a,n,l,"norm_fac");c(a,e,l,"bsdf_params");c(a,l,k,"lfactor");c(a,l,k,"sfactor");for(n=0;n<f.length;n++)ba.hd(a,f[n][0],k,f[n][1]);l=k}c(a,e,g,"bsdf_params");c(a,
e,g,"d_color");c(a,e,g,"s_color");c(a,e,g,"e_color");c(a,e,g,"emission");c(a,e,g,"a_color");c(a,e,g,"alpha");c(a,l,g,"color");c(a,l,g,"specular")}function L(a){var b=[];ba.Oa(a,function(a,c){"OUTPUT_WORLD"==c.type&&b.push({nf:a,node:c})});for(var c=0;c<b.length;++c){var e=b[c].nf,g=b[c].node,h=ba.$j(a);ba.Zh(a,h,g.data.VR);for(var g=ba.aj(a,e),f=[],d=[],k={},l=0;l<g;l++){var n=ba.Ug(a,e,l);n in k||(k[n]=0);var m=ba.td(a,n,e,k[n]++);f.push([n,e,m]);switch(m[1]){case 0:d.push([n,h,m])}}for(l=0;l<f.length;l++)ba.xi(a,
f[l][0],f[l][1],f[l][2]);for(l=0;l<d.length;l++)ba.hd(a,d[l][0],d[l][1],d[l][2]);ba.ng(a,e)}}function H(a,b){var c=[];ba.Oa(a,function(a,b){"MIX_SHADER"!=b.type&&"ADD_SHADER"!=b.type||c.push({nf:a,node:b})});if(c.length)for(var e={name:"RGB_WORLD_NODE",type:"RGB_WORLD_NODE",factor:.5},g=0;g<c.length;g++){var h=c[g].nf,f=c[g].node;e.name=f.name;e.fac=f.inputs[0].rb;e.fac_is_linked=f.inputs[0].mb;e.color1_is_linked=f.inputs[1].mb;e.color2_is_linked=f.inputs[2].mb;switch(f.type){case "ADD_SHADER":e.type=
"ADD_WORLD_RGB";break;case "MIX_SHADER":e.type="MIX_WORLD_RGB"}for(var f=Ca(a,e,0,b,null,[]),d=ba.aj(a,h),k=[],l=[],n={},m=0;m<d;m++){var p=ba.Ug(a,h,m);p in n||(n[p]=0);var w=ba.td(a,p,h,n[p]++);k.push([p,h,w]);l.push([p,f,w])}for(m=0;m<k.length;m++)ba.xi(a,k[m][0],k[m][1],k[m][2]);for(m=0;m<l.length;m++)ba.hd(a,l[m][0],l[m][1],l[m][2]);d=ba.bh(a,h);k=[];l=[];n={};for(m=0;m<d;m++)p=ba.Bh(a,h,m),p in n||(n[p]=0),w=ba.td(a,h,p,n[p]++),k.push([h,p,w]),l.push([f,p,w]);for(m=0;m<k.length;m++)ba.xi(a,
k[m][0],k[m][1],k[m][2]);for(m=0;m<l.length;m++)ba.hd(a,l[m][0],l[m][1],l[m][2]);ba.ng(a,h)}}function I(a){var b=-1,c=[],e=[],g="OUTPUT_WORLD_SURFACE BACKGROUND RGB VALUE ADD_WORLD_RGB MIX_WORLD_RGB TEXTURE_ENVIRONMENT_EQUIRECTANGULAR TEXTURE_ENVIRONMENT_MIRROR_BALL GEOMETRY_NO GEOMETRY_TRN GEOMETRY_GL GEOMETRY_IN TEXTURE_COLOR TEX_COORD_GE TEX_COORD_OB TEX_COORD_NO COMBRGB COMBHSV CURVE_RGB CURVE_VEC B4W_LINEAR_TO_SRGB B4W_NORMAL_VIEW B4W_VECTOR_VIEW B4W_SRGB_TO_LINEAR B4W_REFLECT B4W_CLAMP B4W_TIME B4W_SMOOTHSTEP NORMAL MAPPING MATH_ADD MATH_SUBTRACT MATH_MULTIPLY MATH_DIVIDE MATH_SINE MATH_COSINE MATH_TANGENT MATH_ARCSINE MATH_ARCCOSINE MATH_ARCTANGENT MATH_POWER MATH_LOGARITHM MATH_MINIMUM MATH_MAXIMUM MATH_ROUND MATH_LESS_THAN MATH_GREATER_THAN MATH_MODULO MATH_ABSOLUTE MIX_RGB_MIX MIX_RGB_ADD MIX_RGB_MULTIPLY MIX_RGB_SUBTRACT MIX_RGB_SCREEN MIX_RGB_DIVIDE MIX_RGB_DIFFERENCE MIX_RGB_DARKEN MIX_RGB_LIGHTEN MIX_RGB_OVERLAY MIX_RGB_DODGE MIX_RGB_BURN MIX_RGB_HUE MIX_RGB_SATURATION MIX_RGB_VALUE MIX_RGB_COLOR MIX_RGB_SOFT_LIGHT MIX_RGB_LINEAR_LIGHT SEPRGB SEPHSV VALTORGB VECT_TRANSFORM VECT_MATH_ADD VECT_MATH_SUBTRACT VECT_MATH_AVERAGE VECT_MATH_DOT_PRODUCT VECT_MATH_CROSS_PRODUCT VECT_MATH_NORMALIZE".split(" ");
ba.Oa(a,function(a,e){switch(g.indexOf(e.type)){case -1:c.push({nf:a,node:e});break;case 0:b=a}});for(var h=0;h<c.length;h++)for(var f=c[h].nf,d=ba.bh(a,f),k={},l=0;l<d;l++){var n=ba.Bh(a,f,l);n in k||(k[n]=0);var m=ba.td(a,f,n,k[n]++);e.push([f,n,m])}for(h=0;h<e.length;h++)ba.xi(a,e[h][0],e[h][1],e[h][2]);e.length&&(e=ba.Wl(a,b,ba.Sk),a.Ha=e.Ha,a.kb=e.kb)}function da(a){var b=-1,c=[],e=[];ba.Oa(a,function(a,e){switch(e.type){case "ADD_WORLD_RGB":case "MIX_WORLD_RGB":var g={nf:a,node:e};c.push(g);
break;case "OUTPUT_WORLD_SURFACE":b=a,g={nf:a,node:e},c.push(g)}});for(var g=0;g<c.length;g++)for(var h=c[g].nf,f=c[g].node,d=ba.aj(a,h),k={},l=0;l<d;l++){var n=ba.Ug(a,h,l),m=ba.Ib(a,n);n in k||(k[n]=0);var p=ba.td(a,n,h,k[n]++);"OUTPUT_WORLD_SURFACE"!=f.type&&0==p[1]||"ADD_WORLD_RGB"==m.type||"MIX_WORLD_RGB"==m.type||"BACKGROUND"==m.type||e.push([n,h,p])}for(g=0;g<e.length;g++)ba.xi(a,e[g][0],e[g][1],e[g][2]);e.length&&(e=ba.Wl(a,b,ba.Sk),a.Ha=e.Ha,a.kb=e.kb)}function N(a,b){ba.Th(a,function(c,
e,g){var h=ba.Ib(a,e);e==b&&"Color"==h.inputs[g[1]].identifier&&ba.xi(a,c,e,g)})}function U(){var a=ba.create();ba.Zh(a,0,{data:null,Gb:[],Ma:[],inputs:[{rb:new Float32Array([0,0,0]),identifier:"Color",mb:!1,name:"Color"},{rb:1,identifier:"Alpha",mb:!1,name:"Alpha"}],outputs:[],type:"OUTPUT",vf:[]});return a}function K(a){ba.Oa(a,function(b,c){for(var e=c.inputs,g=c.outputs,h=0;h<e.length;h++)D(a,e[h],b,h,1);for(h=0;h<g.length;h++)D(a,g[h],b,h,0)})}function D(a,b,c,e,g){if(b.mb){var h=!0;ba.Th(a,
function(a,b,f){if(!g&&a==c&&f[0]==e||g&&b==c&&f[1]==e)h=!1});h&&(b.mb=!1)}}function R(a,b){var c=[];ba.Th(a,function(e,g,h){var f=ba.Ib(a,e),d=ba.Ib(a,g),f=m._15(f.outputs[h[0]].rb),d=m._15(d.inputs[h[1]].rb);if(f!=d){var k,l={default_value:[0,0,0],identifier:"Vector",is_linked:!0,name:"Vector"},n={default_value:0,identifier:"Value",is_linked:!0,name:"Value"};f&&!d?k=ja("vector_to_scalar","B4W_VECTOSCAL",[l],[n]):!f&&d&&(k=ja("scalar_to_vector","B4W_SCALTOVEC",[n],[l]));Ca(a,k,0,b,null,[]);c.push([e,
g,a.Ha[a.Ha.length-2],h])}});for(var e=0;e<c.length;++e)ba.xi(a,c[e][0],c[e][1],c[e][3]),ba.hd(a,c[e][0],c[e][2],[c[e][3][0],0]),ba.hd(a,c[e][2],c[e][1],[0,c[e][3][1]])}function V(a){var b=[];ba.Oa(a,function(c,e){switch(e.type){case "B4W_TRANSLUCENCY":ba.Th(a,function(g,h,f){var d=ba.Ib(a,h);g==c&&"MATERIAL_EXT"==d.type&&"Translucency"==e.outputs[f[0]].name&&b.push(g,h,[f[0]+1,f[1]+1])})}});for(var c=0;c<b.length;c+=3)ba.hd(a,b[c],b[c+1],b[c+2])}function F(a,b){var c=[];ba.Oa(b,function(b,e){e.name==
a.name&&c.push(b)});if(c.length)return c;bb.va("Node not found")}function z(a){var b=[];ba.Oa(a,function(a,c){"B4W_PARALLAX"!=c.type&&"REROUTE"!=c.type||b.push(a,c)});for(var c=0;c<b.length;c+=2){var e=b[c],g=b[c+1];if("B4W_PARALLAX"==g.type)w(a,e,g);else if("REROUTE"==g.type){for(var h=ba.Ug(a,e,0),f=ba.bh(a,e),d=[],k=[],l=[],n=0;n<f;n++){var m=ba.Bh(a,e,n),p=k.indexOf(m),v=ba.td(a,e,m,0<=p?l[p]:0);if(v){var v=v[1],q=g.inputs[0].rb,v=ba.Ib(a,m).inputs[v];switch(typeof q){case "number":if("object"==
typeof v.rb)for(var u=v.rb,v=0;v<u.length;v++)u[v]=q;else"number"==typeof v.rb&&(v.rb=q);break;case "object":if("object"==typeof v.rb)for(u=v.rb,v=0;v<u.length;v++)u[v]=q[v];else"number"==typeof v.rb&&(v.rb=.35*q[0]+.45*q[1]+.2*q[2])}}q=g.outputs;for(v=0;v<q.length;v++)q[v].rb=g.inputs[0].rb;-1!=p?l[p]+=1:(k.push(m),l.push(1),d.push(e,m))}if(-1!=h)for(g=ba.td(a,h,e,0)[0],n=0;n<k.length;n++)for(v=0;v<l[n];v++)f=ba.td(a,e,k[n],v)[1],ba.hd(a,h,k[n],[g,f]);for(n=0;n<d.length;n+=2)ba.Ol(a,d[n],d[n+1],
-1)}}}function w(a,b,c){var e;a:{e=a.kb;for(var g=0;g<e.length;g+=3)if(e[g+1]==b&&1==e[g+2][1]){e=e[g];break a}e=-1}-1!=e&&(g=ba.Ib(a,e),c.data=g.data,ba.Ol(a,e,b,-1),0==ba.bh(a,e)&&(b=ba.Ug(a,e,0),-1!=b&&ba.Ol(a,b,e,-1),ba.ng(a,e)));c.inputs.splice(1,1)}function W(a){g(a);wa(a);A(a)}function A(a){var b={};ba.Oa(a,function(a,c){if("GEOMETRY_UV"==c.type||"UVMAP"==c.type||"TEX_COORD_UV"==c.type){var e=c.data.value;e in b||(b[e]=[]);b[e].push(a,c)}});for(var c in b){var e=b[c];if(2<e.length)for(var g=
n(c),g=Ca(a,g,0,void 0,null,[]),h=ba.Ib(a,g),f=0;f<e.length;f+=2){for(var d=e[f],k=e[f+1],l=[],m={},p=ba.bh(a,d),w=0;w<p;w++){var v=ba.Bh(a,d,w);v in m||(m[v]=0);var q=ba.td(a,d,v,m[v]);m[v]++;l.push(d,v,q);q=q.splice(0,q.length);switch(k.type){case "GEOMETRY_UV":q[0]=0;h.outputs[0].mb=!0;break;case "UVMAP":case "TEX_COORD_UV":q[0]=1,h.outputs[1].mb=!0}ba.hd(a,g,v,q)}for(w=0;w<l.length;w+=3)ba.Ol(a,l[w],l[w+1],0);ba.ng(a,d)}}}function n(a){var b=ja("merged_uv","UV_MERGED",[],[{default_value:[0,0,
0],identifier:"UV_geom",is_linked:!1,name:"UV_geom"},{default_value:[0,0,0],identifier:"UV_cycles",is_linked:!1,name:"UV_cycles"}]);b.uv_layer=a;return b}function g(a){var b=[];ba.Oa(a,function(a,c){"GEOMETRY_VC"!=c.type&&"GEOMETRY_NO"!=c.type&&"GEOMETRY_FB"!=c.type&&"GEOMETRY_VW"!=c.type&&"GEOMETRY_GL"!=c.type&&"GEOMETRY_LO"!=c.type&&"GEOMETRY_OR"!=c.type&&"GEOMETRY_BF"!=c.type&&"GEOMETRY_IN"!=c.type||b.push(a,c)});for(var c=[],e=0;e<b.length;e+=2){for(var g=b[e],h=b[e+1],f=!0,d=0;d<c.length;d++){var k=
c[d];if(M(h,k.Jg)){for(var f=[],d=ba.bh(a,g),l=0;l<d;l++){var n=ba.Bh(a,g,l),m=ba.td(a,g,n,0);f.push(g,n,m);ba.hd(a,k.id,n,m)}for(l=0;l<f.length;l+=3)ba.Ol(a,f[l],f[l+1],0);ba.ng(a,g);f=!1;break}}f&&(k={id:g,Jg:h},c.push(k))}}function ea(a){for(var b={},c=0;c<a.Ha.length;c+=2){var e=a.Ha[c];b[e]={Bq:{},cG:!1}}for(c=0;c<a.kb.length;c+=3)b[a.kb[c+1]].Bq[a.kb[c]]=!0;for(e in b)ka(e,b);for(e in b)b[e]=Object.keys(b[e].Bq).map(function(a){return parseInt(a,10)});return b}function ka(a,b){var c=b[a];if(!c.cG){var e=
m.O(c),g;for(g in c.Bq){ka(g,b);var c=b[g],h;for(h in c.Bq)e.Bq[h]=!0}e.cG=!0;b[a]=e}}function wa(a){var b=[];ba.Oa(a,function(a,c){"TEXTURE_COLOR"!=c.type&&"TEXTURE_NORMAL"!=c.type||b.push(a,c)});if(b.length){for(var c=ea(a),e=[],g=0;g<b.length;g+=2){for(var h=b[g],f=b[g+1],d=!0,k=0;k<e.length;k++){var l=e[k];if(!(3<=l.$o.length||!M(f,l.Jg)||-1<c[h].indexOf(l.id)||-1<c[l.id].indexOf(h))){for(var n=!1,m=0;m<l.$o.length;m++){var p=l.$o[m].id;if(-1<c[h].indexOf(p)||-1<c[p].indexOf(h)){n=!0;break}}if(!n){for(var k=
[],p=ba.aj(a,h),w={},m=0;m<p;m++)n=ba.Ug(a,h,m),n in w||(w[n]=0),d=ba.td(a,n,h,w[n]++),k.push(n,h,d);for(var p=[],w=ba.bh(a,h),v={},m=0;m<w;m++)n=ba.Bh(a,h,m),n in v||(v[n]=0),d=ba.td(a,h,n,v[n]++),p.push(h,n,d);d=k.concat(p);for(m=0;m<d.length;m+=3)ba.Ol(a,d[m],d[m+1],0);ba.ng(a,h);m={id:h,Jg:f,KO:k,LO:p};l.$o.push(m);d=!1;break}}}d&&(l={id:h,Jg:f,$o:[]},e.push(l))}for(g=0;g<e.length;g++){l=e[g];c=l.$o.length;for(k=0;k<c;k++){f=l.$o[k];m=f.Jg;h=f.KO;f=f.LO;l.Jg.inputs[k+1].mb=m.inputs[0].mb;l.Jg.inputs[k+
1].rb=m.inputs[0].rb;l.Jg.outputs[2*(k+1)].mb=m.outputs[0].mb;l.Jg.outputs[2*(k+1)].rb=m.outputs[0].rb;l.Jg.outputs[2*(k+1)+1].mb=m.outputs[1].mb;l.Jg.outputs[2*(k+1)+1].rb=m.outputs[1].rb;for(m=0;m<h.length;m+=3)n=h[m],d=h[m+2],d[1]+=k+1,ba.hd(a,n,l.id,d);for(m=0;m<f.length;m+=3)n=f[m+1],d=f[m+2],d[0]+=2*(k+1),ba.hd(a,l.id,n,d);l.Jg.Gb.push(["USE_uv"+(k+2),1])}ba.ng(a,l.id);ba.Zh(a,l.id,l.Jg)}}}function M(a,b){if(a.type!==b.type)return!1;switch(a.type){case "GEOMETRY_VC":return a.data.value==b.data.value;
case "GEOMETRY_NO":for(var c=a.Gb,e=-1,g=0;g<c.length;g++){var h=c[g];if("USE_NORMAL_IN"==h[0]){e=h[1];break}}c=b.Gb;h=-1;for(g=0;g<c.length;g++){var f=c[g];if("USE_NORMAL_IN"==f[0]){h=f[1];break}}return e===h;case "GEOMETRY_FB":case "GEOMETRY_VW":case "GEOMETRY_GL":case "GEOMETRY_LO":case "GEOMETRY_OR":case "GEOMETRY_BF":case "GEOMETRY_IN":return!0;case "TEXTURE_COLOR":case "TEXTURE_NORMAL":return a.data.eu==b.data.eu&&a.data.value.Ym==b.data.value.Ym;case "VALUE":case "RGB":return a.le==b.le;default:return!1}}
function E(a){var b=[],c=[];ba.Oa(a,function(a,e){"GEOMETRY_VC"==e.type&&b.push(a,e);"GEOMETRY_VW"==e.type&&c.push(a,e)});Z(a,b);aa(a,c)}function Z(a,b){for(var c=0;c<b.length;c+=2){for(var e=b[c],g=b[c+1],h=!1,f=[],d=[],k=[[],[],[]],l=ba.bh(a,e),n=0;n<l;n++){var p=ba.Bh(a,e,n);if("SEPRGB"!=ba.Ib(a,p).type){h=!1;break}f.push(e,p);for(var w={},v=ba.bh(a,p),h=0;h<v;h++){var q=ba.Bh(a,p,h);q in w||(w[q]=0);var u=ba.td(a,p,q,w[q]++);f.push(p,q);k[u[0]].push(e,q,u)}d.push(p);h=!0}if(h){for(n=e=l=0;n<k.length;n++)k[n].length&&
(l++,e|=1<<2-n);if(l){g.type+=l;g.outputs=[];for(n=0;n<k.length;n++)if(k[n].length)for(g.outputs.push({rb:0,identifier:"RGB"[n],mb:!0,name:"RGB"[n]}),h=0;h<k[n].length;h+=3)k[n][h+2][0]=m._41(e,n);for(n=0;n<f.length;n+=2)ba.Ol(a,f[n],f[n+1],0);for(n=0;n<d.length;n++)ba.ng(a,d[n]);for(n=0;n<k.length;n++)for(h=0;h<k[n].length;h+=3)ba.hd(a,k[n][h],k[n][h+1],k[n][h+2])}}}}function aa(a,b){for(var c=0;c<b.length;c+=2){for(var e=b[c],g=!0,h=[],f=ba.bh(a,e),d=0;d<f;d++){var k=ba.Bh(a,e,d);if("B4W_REFLECT"==
ba.Ib(a,k).type){var l=ba.td(a,e,k,0),n=ba.td(a,e,k,1);l&&1==l[1]||n&&1==n[1]?g=!1:h.push(e,k)}else g=!1}for(d=0;d<h.length;d+=2)f=a,l=h[d],k=h[d+1],n=ba.Ib(f,k),n.type+="_WORLD",ba.Ol(f,l,k,0),n.inputs.splice(0,1),l=ba.Ug(f,k,0),l!=ba.Jy&&(ba.td(f,l,k,0)[1]=0);g&&ba.ng(a,e)}}function oa(a,b,c,e,g,h){a=a.nodes;for(var f=null,d=0;d<a.length;d++){var k=a[d];g?"GROUP"==k.type&&k.node_tree_name==c&&(f=k):k.type==c&&(f=k)}return f?F(f,b)[0]:(h||va.error('No "'+c+'" node in node '+e),-1)}function ja(a,
b,c,e){return{name:a,type:b,inputs:c,outputs:e}}function Ia(a){var b={name:"",le:"",type:"",vf:[],inputs:[],outputs:[],Ma:[],data:null,Gb:[]};b.name=a.name;b.le=a.le;b.type=a.type;for(var c=b.vf,e=a.vf,g=0;g<e.length;g++)c.push(ra(e[g]));c=b.Ma;e=a.Ma;for(g=0;g<e.length;g++)c.push(ra(e[g]));c=b.inputs;e=a.inputs;for(g=0;g<e.length;g++)c.push(xa(e[g]));c=b.outputs;e=a.outputs;for(g=0;g<e.length;g++)c.push(xa(e[g]));c=b.Gb;e=a.Gb;for(g=0;g<e.length;g++)c.push(e[g].slice());b.data=a.data;return b}function Ca(a,
b,c,e,g,h){var d=b.name,l=b.name,n=b.type,w=[],v=[],q=[],u=[],C=null,z="uv_layer"in b?b.uv_layer||g&&g.xC||"":"",x="color_layer"in b?b.color_layer||g&&g.yC||"":"",A=[];switch(n){case "BSDF_ANISOTROPIC":case "BSDF_GLASS":case "BSDF_HAIR":case "BSDF_TRANSLUCENT":case "BSDF_REFRACTION":case "BSDF_TOON":case "BSDF_VELVET":case "SUBSURFACE_SCATTERING":case "AMBIENT_OCCLUSION":case "VOLUME_ABSORPTION":case "VOLUME_SCATTER":case "BLACKBODY":case "WAVELENGTH":case "SEPXYZ":case "COMBXYZ":case "LIGHT_FALLOFF":case "TEX_SKY":case "TEX_NOISE":case "TEX_WAVE":case "TEX_MUSGRAVE":case "TEX_GRADIENT":case "TEX_MAGIC":case "TEX_CHECKER":case "TEX_BRICK":case "WIREFRAME":case "TANGENT":case "LIGHT_PATH":case "HOLDOUT":case "HAIR_INFO":case "SCRIPT":v=
pa(b);q=ia(b);va.warn(n+" node is not fully supported.");break;case "BRIGHTCONTRAST":case "ADD_SHADER":v=pa(b);q=ia(b);break;case "MIX_SHADER":v.push(ta(b,"Fac"));var r=ta(b,"Shader"),y=r.mb;v.push(r);var B=ta(b,"Shader_001");B||(B=ta(b,"Shader.001"));var L=B.mb;v.push(B);v.push(P("d_color1","d_color1",[0,0,0],y));v.push(P("d_roughness1","d_roughness1",0,y));v.push(P("s_color1","s_color1",[0,0,0],y));v.push(P("s_roughness1","s_roughness1",0,y));v.push(P("metalness1","metalness1",0,y));v.push(P("normal1",
"normal1",[0,0,0],y));v.push(P("e_color1","e_color1",[0,0,0],y));v.push(P("emission1","emission1",0,y));v.push(P("a_color1","a_color1",[0,0,0],y));v.push(P("alpha1","alpha1",1,y));v.push(P("d_color2","d_color2",[0,0,0],L));v.push(P("d_roughness2","d_roughness2",0,L));v.push(P("s_color2","s_color2",[0,0,0],L));v.push(P("s_roughness2","s_roughness2",0,L));v.push(P("metalness2","metalness2",0,L));v.push(P("normal2","normal2",[0,0,0],L));v.push(P("e_color2","e_color2",[0,0,0],L));v.push(P("emission2",
"emission2",0,L));v.push(P("a_color2","a_color2",[0,0,0],L));v.push(P("alpha2","alpha2",1,L));var H=ha(b,"Shader"),t=H.mb,q=[H,P("d_color","d_color",[0,0,0],t),P("d_roughness","d_roughness",0,t),P("s_color","s_color",[0,0,0],t),P("s_roughness","s_roughness",0,t),P("metalness","metalness",0,t),P("normal","normal",[0,0,0],t),P("e_color","e_color",[0,0,0],t),P("emission","emission",0,t),P("a_color","a_color",[0,0,0],t),P("alpha","alpha",1,t)];break;case "OBJECT_INFO":var v=pa(b),q=[],F=ha(b,"Location"),
G=ha(b,"Object Index"),I=ha(b,"Material Index"),K=ha(b,"Random");q.push(F);q.push(G);q.push(I);q.push(K);A.push(["USE_LOCATION_OUT",F.mb|0]);A.push(["USE_OBJ_IND_OUT",G.mb|0]);A.push(["USE_MAT_IND_OUT",I.mb|0]);A.push(["USE_RANDOM_OUT",K.mb|0]);break;case "UVMAP":z||(n="EMPTY_UV");if("EMPTY_UV"!=n){var M=Q("param_"+n+"_a"),D=Q("param_"+n+"_v");w.push(na(M));w.push(na(D));u.push(na(D));C={name:M,value:z}}q=ia(b);break;case "UV_MERGED":M=Q("param_UV_MERGED_a");D=Q("param_UV_MERGED_v");w.push(na(M));
w.push(na(D));q.push(ha(b,"UV_geom"));q.push(ha(b,"UV_cycles"));u.push(na(D));C={name:M,value:z};break;case "CAMERA":v=[];q=ia(b);break;case "COMBRGB":case "COMBHSV":v=pa(b);q=ia(b);break;case "CURVE_RGB":case "CURVE_VEC":"CURVE_RGB"==n?(ya(b,0,0)&&A.push(["READ_R",1]),ya(b,1,0)&&A.push(["READ_G",1]),ya(b,2,0)&&A.push(["READ_B",1]),ya(b,3,0)&&A.push(["READ_A",1])):(ya(b,0,-1)&&A.push(["READ_R",1]),ya(b,1,-1)&&A.push(["READ_G",1]),ya(b,2,-1)&&A.push(["READ_B",1]));v=pa(b);q=ia(b);C={value:b};break;
case "PARTICLE_INFO":for(var v=pa(b),q=ia(b),ca=0;ca<b.outputs.length;ca++){var J=b.outputs[ca],N=J.identifier,W=na("v_param_PART_INFO_"+N.replace(" ",""));if(J.is_linked)switch(N){case "Size":A.push(["PART_INFO_SIZE",Ha.Fa(1)]);break;case "Age":A.push(["PART_INFO_AGE",Ha.Fa(1)]);break;case "Lifetime":A.push(["PART_INFO_LT",Ha.Fa(1)]);break;case "Location":A.push(["PART_INFO_LOC",Ha.Fa(1)]);break;case "Index":var ea=na("a_param_PART_INFO_"+J.identifier.replace(" ","")),C=ea;A.push(["PART_INFO_IND",
Ha.Fa(1)]);break;case "Velocity":A.push(["PART_INFO_VEL",Ha.Fa(1)]);break;case "Angular Velocity":A.push(["PART_INFO_A_VEL",Ha.Fa(1)])}"Age"!=N&&"Lifetime"!=N&&"Size"!=N&&(w.push(W),u.push(W))}ea&&w.push(ea);break;case "NEW_GEOMETRY":case "GEOMETRY":if(!Aa(b))return!0;n=Ba(b,c);if(!n)return va.error("Geometry output is not supported"),null;switch(n){case "GEOMETRY_UV":z||(n="EMPTY_UV");"EMPTY_UV"!=n&&(M=Q("param_GEOMETRY_UV_a"),D=Q("param_GEOMETRY_UV_v"),w.push(na(M)),w.push(na(D)),u.push(na(D)),
C={name:M,value:z});q.push(ha(b,"UV"));break;case "GEOMETRY_VC":x||(n="EMPTY_VC");if("EMPTY_VC"!=n){var ka=Q("param_GEOMETRY_VC_a"),X=Q("param_GEOMETRY_VC_v");w.push(na(ka));w.push(na(X));u.push(na(X));C={name:ka,value:x}}q.push(ha(b,"Vertex Color"));break;case "GEOMETRY_NO":v.push(P("Normal","Normal",[0,0,0],!1));A.push(["USE_NORMAL_IN",0]);q.push(ha(b,"Normal"));break;case "GEOMETRY_TRN":n="GEOMETRY_NO";v.push(P("Normal","Normal",[0,0,0],!1));q.push(ha(b,"True Normal"));A.push(["USE_NORMAL_IN",
0]);va.warn("Geometry True Normal output is not fully supported.");break;case "GEOMETRY_FB":q.push(ha(b,"Front/Back"));break;case "GEOMETRY_VW":q.push(ha(b,"View"));break;case "GEOMETRY_GL":q.push(ha(b,"Global")||ha(b,"Position"));break;case "GEOMETRY_LO":q.push(ha(b,"Local"));break;case "GEOMETRY_OR":var R=Q("param_GEOMETRY_OR_v");w.push(na(R));q.push(ha(b,"Orco"));u.push(na(R));break;case "GEOMETRY_IN":q.push(ha(b,"Incoming"));break;case "GEOMETRY_BF":q.push(ha(b,"Backfacing"))}break;case "ATTRIBUTE":if(!Aa(b))return!0;
n=x?"GEOMETRY_VC":"EMPTY_VC";"EMPTY_VC"!=n&&(ka=Q("param_GEOMETRY_VC_a"),X=Q("param_GEOMETRY_VC_v"),w.push(na(ka)),w.push(na(X)),u.push(na(X)),C={name:ka,value:x});q.push(ha(b,"Color"));break;case "TEX_COORD":if(!Aa(b))return!0;n=Va(b,c);switch(n){case "TEX_COORD_UV":z||(n="EMPTY_UV");"EMPTY_UV"!=n&&(M=Q("param_TEX_COORD_UV_a"),D=Q("param_TEX_COORD_UV_v"),w.push(na(M)),w.push(na(D)),u.push(na(D)),C={name:M,value:z});q.push(ha(b,"UV"));break;case "TEX_COORD_NO":q.push(ha(b,"Normal"));break;case "TEX_COORD_GE":var la=
Q("param_TEX_COORD_GE_v");w.push(na(la));q.push(ha(b,"Generated"));u.push(na(la));break;case "TEX_COORD_OB":q.push(ha(b,"Object"));break;case "TEX_COORD_CA":q.push(ha(b,"Camera"));break;case "TEX_COORD_WI":q.push(ha(b,"Window"));break;case "TEX_COORD_RE":q.push(ha(b,"Reflection"))}break;case "GROUP":var da=b.node_tree_name;switch(da){case "B4W_LINEAR_TO_SRGB":if(!Ja(b,[1],[1])){C=Ma(b,e,g,[]);break}n="B4W_LINEAR_TO_SRGB";break;case "B4W_NORMAL_VIEW":case "B4W_VECTOR_VIEW":if(!Ja(b,[1],[1])){C=Ma(b,
e,g,[]);break}n="B4W_VECTOR_VIEW";break;case "B4W_SRGB_TO_LINEAR":if(!Ja(b,[1],[1])){C=Ma(b,e,g,[]);break}n="B4W_SRGB_TO_LINEAR";break;case "B4W_REFLECT":if(!Ja(b,[1,1],[1])){C=Ma(b,e,g,[]);break}n="B4W_REFLECT";break;case "B4W_REFRACTION":if(!Ja(b,[1,0],[1])){C=Ma(b,e,g,[]);break}n="B4W_REFRACTION";break;case "B4W_PARALLAX":if(!Ja(b,[1,1,0,0,0],[1])){C=Ma(b,e,g,[]);break}var V=Q("param_B4W_PARALLAX_texture");u.push(na(V));n="B4W_PARALLAX";break;case "B4W_CLAMP":if(!Ja(b,[1],[1])){C=Ma(b,e,g,[]);
break}n="B4W_CLAMP";break;case "B4W_TRANSLUCENCY":if(!Ja(b,[0,0,0,0,0],[0])){C=Ma(b,e,g,[]);break}n="B4W_TRANSLUCENCY";break;case "B4W_TIME":if(!Ja(b,[],[0])){C=Ma(b,e,g,[]);break}n="B4W_TIME";break;case "B4W_SMOOTHSTEP":if(!Ja(b,[0,0,0],[0])){C=Ma(b,e,g,[]);break}n="B4W_SMOOTHSTEP";break;case "B4W_GLOW_OUTPUT":n="B4W_GLOW_OUTPUT";break;default:C=Ma(b,e,g,h)}v=pa(b);q=ia(b);if("B4W_TRANSLUCENCY"==da){var O=P("TranslucencyParams","TranslucencyParams",[0,0,0,0]);O.mb=q[0].mb;q.push(O)}break;case "LAMP":var U=
b.lamp;U?(U.uuid in gb?A.push(["LAMP_INDEX",String(gb[U.uuid])]):(gb[U.uuid]=wb,A.push(["LAMP_INDEX",String(wb++)])),C=gb):(va.error("There is no lamp in node: "+b.name),A.push(["LAMP_INDEX",-1]));q.push(ha(b,"Color"));q.push(ha(b,"Light Vector"));q.push(ha(b,"Distance"));q.push(ha(b,"Visibility Factor"));break;case "LIGHTING_AMBIENT":v=[P("E","E",[0,0,0],!0),P("A","A",[0,0,0],!0),P("D","D",[0,0,0],!0)];q=[P("color","color",[0,0,0],!0),P("specular","specular",[0,0,0],!0)];break;case "LIGHTING_BEGIN":q=
[P("E","E",[0,0,0],!0),P("A","A",[0,0,0],!0),P("D","D",[0,0,0],!0),P("S","S",[0,0,0],!0),P("normal","normal",[0,0,0],!0),P("dif_params","dif_params",[0,0],!0),P("sp_params","sp_params",[0,0],!0),P("shadow_factor","shadow_factor",0,!0),P("translucency_color","translucency_color",0,!0),P("translucency_params","translucency_params",[0,0,0,0],!0)];break;case "LIGHTING_END":v=[P("color","color",[0,0,0],!0),P("specular","specular",[0,0,0],!0)];break;case "LIGHTING_LAMP":v=[P("shadow_factor","shadow_factor",
0,!0)];q=[P("ldir","ldir",[0,0,0],!0),P("lfac","lfac",[0,0],!0),P("lcolorint","lcolorint",[0,0,0],!0),P("norm_fac","norm_fac",0,!0)];break;case "DIFFUSE_LAMBERT":v=[P("ldir","ldir",[0,0,0],!0),P("lfac","lfac",[0,0],!0),P("normal","normal",[0,0,0],!0),P("norm_fac","norm_fac",0,!0)];q=[P("lfactor","lfactor",0,!0)];A.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "DIFFUSE_FRESNEL":case "DIFFUSE_MINNAERT":case "DIFFUSE_OREN_NAYAR":case "DIFFUSE_TOON":v=[P("ldir","ldir",[0,0,0],!0),P("lfac",
"lfac",[0,0],!0),P("normal","normal",[0,0,0],!0),P("norm_fac","norm_fac",0,!0),P("dif_params","dif_params",[0,0],!0)];q=[P("lfactor","lfactor",0,!0)];A.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "SPECULAR_BLINN":case "SPECULAR_PHONG":case "SPECULAR_COOKTORR":v=[P("ldir","ldir",[0,0,0],!0),P("lfac","lfac",[0,0],!0),P("normal","normal",[0,0,0],!0),P("norm_fac","norm_fac",0,!0),P("sp_params","sp_params",[0,0],!0)];q=[P("sfactor","sfactor",0,!0)];A.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|
0]);break;case "SPECULAR_TOON":case "SPECULAR_WARDISO":v=[P("ldir","ldir",[0,0,0],!0),P("lfac","lfac",[0,0],!0),P("normal","normal",[0,0,0],!0),P("norm_fac","norm_fac",0,!0),P("sp_params","sp_params",[0,0],!0)];q=[P("sfactor","sfactor",0,!0)];A.push(["MAT_USE_TBN_SHADING",b.use_tangent_shading|0]);break;case "BSDF_COMPUTE":v=[P("ldir","ldir",[0,0,0],!0),P("lfac","lfac",[0,0],!0),P("normal","normal",[0,0,0],!0),P("norm_fac","norm_fac",0,!0),P("bsdf_params","bsdf_params",[0,0,0,0],!0)];q=[P("lfactor",
"lfactor",0,!0),P("sfactor","sfactor",0,!0)];break;case "LIGHTING_APPLY":v=[P("color","color",[0,0,0,0],!0),P("specular","specular",[0,0,0],!0),P("lfactor","lfactor",0,!0),P("sfactor","sfactor",0,!0),P("ldir","ldir",[0,0,0],!0),P("normal","normal",[0,0,0],!0),P("translucency_params","translucency_params",[0,0,0,0],!0),P("D","D",[0,0,0],!0),P("S","S",[0,0,0],!0),P("lcolorint","lcolorint",[0,0,0],!0),P("translucency_color","translucency_color",0,!0)];q=[P("color","color",[0,0,0,0],!0),P("specular",
"specular",[0,0,0],!0)];break;case "NORMAL":var v=pa(b),q=ia(b),wa=ha(b,"Normal");u.push(na(Q("param_NORMAL_Normal"),wa.rb,3));break;case "MAPPING":var E=b.vector_type,n="MAPPING";v.push(ta(b,"Vector"));q.push(ha(b,"Vector"));var Z=m._1(b.rotation),S=m._1(b.scale),T=m._1(b.translation),aa=f.create(),ra=m.Z(Z,f.create());if("TEXTURE"==E||"NORMAL"==E)S[0]=S[0]||1,S[1]=S[1]||1,S[2]=S[2]||1;f.multiply(ra,new Float32Array([S[0],0,0,0,S[1],0,0,0,S[2]]),aa);aa=m._22(aa,k.create());switch(E){case "POINT":aa[12]=
T[0];aa[13]=T[1];aa[14]=T[2];break;case "TEXTURE":aa[12]=T[0];aa[13]=T[1];aa[14]=T[2];aa=k.invert(aa,aa);break;case "NORMAL":k.invert(aa,aa),k.transpose(aa,aa)}switch(E){case "NORMAL":A.push(["MAPPING_IS_NORMAL",1]);case "TEXTURE":A.push(["MAPPING_TRS_MATRIX_DEF",1]);A.push(["MAPPING_TRS_MATRIX",Ha.Fa(aa,16)]);break;case "POINT":0!==p.length(Z)?(A.push(["MAPPING_TRS_MATRIX_DEF",1]),A.push(["MAPPING_TRS_MATRIX",Ha.Fa(aa,16)])):(0!==p.sqrDist(S,m.n)&&(A.push(["MAPPING_SCALE_DEF",1]),A.push(["MAPPING_SCALE",
Ha.Fa(S,3)])),0!==p.length(T)&&(A.push(["MAPPING_TRANS_DEF",1]),A.push(["MAPPING_TRANS",Ha.Fa(T,3)])));break;case "VECTOR":0!==p.length(Z)?(A.push(["MAPPING_TRS_MATRIX_DEF",1]),A.push(["MAPPING_TRS_MATRIX",Ha.Fa(aa,16)])):0!==p.sqrDist(S,m.n)&&(A.push(["MAPPING_SCALE_DEF",1]),A.push(["MAPPING_SCALE",Ha.Fa(S,3)]))}b.use_min&&(A.push(["MAPPING_MIN_CLIP_DEF",1]),A.push(["MAPPING_MIN_CLIP",Ha.Fa(b.min,3)]));b.use_max&&(A.push(["MAPPING_MAX_CLIP_DEF",1]),A.push(["MAPPING_MAX_CLIP",Ha.Fa(b.max,3)]));break;
case "MATERIAL":case "MATERIAL_EXT":var fa=[],yb=[],Qa=[],ja=[P("E","E",[0,0,0],!0),P("A","A",[0,0,0],!0),P("D","D",[0,0,0],!0),P("S","S",[0,0,0],!0),P("normal","normal",[0,0,0],!0),P("dif_params","dif_params",[0,0],!0),P("sp_params","sp_params",[0,0],!0),P("shadow_factor","shadow_factor",0,!0)],xa=[P("color","color",[0,0,0],!0),P("specular","specular",[0,0,0],!0),P("normal","normal",[0,0,0],!0)],Ya=[ha(b,"Color"),ha(b,"Alpha"),ha(b,"Normal")],oa=[],Ea=ta(b,"Color");Ea.rb.splice(3);Qa.push(Ea);v.push(Ea);
Ea=ta(b,"Spec");Ea.rb.splice(3);Qa.push(Ea);v.push(Ea);(Ea=ta(b,"DiffuseIntensity"))||(Ea=ta(b,"Refl"));Ea.rb=b.diffuse_intensity;Qa.push(Ea);v.push(Ea);var ua=ta(b,"Normal");ua.rb.splice(3);Qa.push(ua);v.push(ua);if("MATERIAL_EXT"==n){(Ea=ta(b,"Emit"))||(Ea=P("Emit","Emit",0));Qa.push(Ea);v.push(Ea);(Ea=ta(b,"Translucency"))?(Ea.rb=0,Ea.name="Translucency",Ea.identifier="Translucency"):Ea=P("Translucency","Translucency",0);v.push(Ea);(Ea=ta(b,"Translucency"))?(Ea.rb=[0,0,0,0],Ea.name="TranslucencyParams",
Ea.identifier="TranslucencyParams"):Ea=P("TranslucencyParams","TranslucencyParams",[0,0,0,0]);v.push(Ea);var Wa=ta(b,"Reflectivity"),Fa=ta(b,"Ray Mirror");if(Wa)var Ea=Wa,$a="Reflectivity";else Fa?(Ea=Fa,$a="Ray Mirror"):(Ea=Wa,$a="Reflectivity");Ea||(Ea=P($a,$a,0));v.push(Ea);xa.push(Ea);(Ea=ta(b,"SpecTra"))||(Ea=P("SpecTra","SpecTra",0));v.push(Ea);xa.push(Ea);(Ea=ta(b,"Alpha"))||(Ea=P("Alpha","Alpha",b.alpha));v.push(Ea);xa.push(Ea);Ya.push(ha(b,"Diffuse"));Ya.push(ha(b,"Spec"));fa.push(["MATERIAL_EXT",
1]);yb.push(["MATERIAL_EXT",1])}else Qa.push(P("emit_intensity","emit_intensity",0)),xa.push(P("reflect_factor","reflect_factor",0)),xa.push(P("specular_alpha","specular_alpha",0)),xa.push(P("alpha_in","alpha_in",0)),Ya.push(P("diffuse_out","diffuse_out",0)),Ya.push(P("spec_out","spec_out",0)),fa.push(["MATERIAL_EXT",0]),yb.push(["MATERIAL_EXT",0]);oa.push(na(Q("param_MATERIAL_alpha"),b.alpha));oa.push(na(Q("param_MATERIAL_spec_alpha"),b.specular_alpha));q=Ya;fa.push(["USE_MATERIAL_NORMAL",ua.mb|
0]);b.use_diffuse&&(fa.push(["USE_MATERIAL_DIFFUSE",1]),yb.push(["USE_MATERIAL_DIFFUSE",1]));b.use_specular&&yb.push(["USE_MATERIAL_SPECULAR",1]);var nb=[],ga,Da=0;switch(b.specular_shader){case "COOKTORR":case "PHONG":ga=b.specular_hardness;break;case "WARDISO":ga=b.specular_slope;break;case "TOON":ga=b.specular_toon_size;Da=b.specular_toon_smooth;break;case "BLINN":ga=b.specular_ior;Da=b.specular_hardness;break;default:va.error("unsupported specular shader: "+b.specular_shader+' (material "'+b.material_name+
'")'),ga=b.specular_hardness}var Ia,Ga;switch(b.diffuse_shader){case "LAMBERT":Ga=Ia=0;break;case "OREN_NAYAR":Ia=b.roughness;Ga=0;break;case "FRESNEL":Ia=b.diffuse_fresnel;Ga=b.diffuse_fresnel_factor;break;case "MINNAERT":Ia=b.darkness;Ga=0;break;case "TOON":Ia=b.diffuse_toon_size;Ga=b.diffuse_toon_smooth;break;default:va.error("unsupported diffuse shader: "+b.diffuse_shader+' (material "'+b.material_name+'")'),Ga=Ia=0}nb.push(na(Q("param_MATERIAL_diffuse"),[Ia,Ga],2));nb.push(na(Q("param_MATERIAL_spec"),
[b.specular_intensity,ga,Da],3));fa.push(["SHADELESS_MAT",b.use_shadeless?1:0]);var Pa={name:b.name,value:{Mf:b.specular_shader,Df:b.diffuse_shader,bd:b.use_shadeless,Se:b.use_tangent_shading}},C={name:b.name,value:{Mf:b.specular_shader,Df:b.diffuse_shader,bd:b.use_shadeless,Se:b.use_tangent_shading},xR:{name:"material_begin",type:"MATERIAL_BEGIN",inputs:Qa,outputs:ja,Ma:nb,data:Pa,Gb:fa,vf:[]},yR:{name:"material_end",type:"MATERIAL_END",inputs:xa,outputs:Ya,Ma:oa,data:Pa,Gb:yb,vf:[]}};break;case "BSDF_PRINCIPLED":var v=
pa(b),Za=ta(b,"Base Color"),sa=ta(b,"Metallic"),La=ta(b,"Roughness"),Sa=ta(b,"Normal"),v=[Za,sa,La,Sa];A.push(["USE_NORMAL_IN",Sa.mb|0]);var Ua=ha(b,"BSDF"),za=Ua.mb,q=[Ua,P("d_color","d_color",[0,0,0],za),P("d_roughness","d_roughness",0,za),P("s_color","s_color",[0,0,0],za),P("s_roughness","s_roughness",0,za),P("metalness","metalness",1,za),P("normal","normal",[0,0,0],za),P("e_color","e_color",[0,0,0],za),P("emisson","emisson",0,za),P("a_color","a_color",[0,0,0],za),P("alpha","alpha",1,za)];break;
case "BSDF_DIFFUSE":v=pa(b);A.push(["USE_NORMAL_IN",v[2].mb|0]);Ua=ha(b,"BSDF");za=Ua.mb;q=[Ua,P("d_color","d_color",[0,0,0],za),P("d_roughness","d_roughness",0,za),P("s_color","s_color",[0,0,0],za),P("s_roughness","s_roughness",0,za),P("metalness","metalness",0,za),P("normal","normal",[0,0,0],za),P("e_color","e_color",[0,0,0],za),P("emisson","emisson",0,za),P("a_color","a_color",[0,0,0],za),P("alpha","alpha",1,za)];break;case "BSDF_GLOSSY":v=pa(b);A.push(["USE_NORMAL_IN",v[2].mb|0]);Ua=ha(b,"BSDF");
za=Ua.mb;q=[Ua,P("d_color","d_color",[0,0,0],za),P("d_roughness","d_roughness",0,za),P("s_color","s_color",[0,0,0],za),P("s_roughness","s_roughness",0,za),P("metalness","metalness",1,za),P("normal","normal",[0,0,0],za),P("e_color","e_color",[0,0,0],za),P("emisson","emisson",0,za),P("a_color","a_color",[0,0,0],za),P("alpha","alpha",1,za)];break;case "BSDF_TRANSPARENT":var Xa=b.b4w_use_alpha,v=pa(b),Ua=ha(b,"BSDF"),za=Ua.mb,q=[Ua,P("d_color","d_color",[0,0,0],za),P("d_roughness","d_roughness",0,za),
P("s_color","s_color",[0,0,0],za),P("s_roughness","s_roughness",0,za),P("metalness","metalness",0,za),P("normal","normal",[0,0,0],za),P("e_color","e_color",[0,0,0],za),P("emisson","emisson",0,za),P("a_color","a_color",[0,0,0],za),P("alpha","alpha",Xa?0:1,za)],C={value:{TU:Xa}};A.push(["USE_ALPHA",Xa|0]);break;case "EMISSION":var v=pa(b),bb=ha(b,"Emission"),vb=bb.mb,q=[bb,P("d_color","d_color",[0,0,0],vb),P("d_roughness","d_roughness",0,vb),P("s_color","s_color",[0,0,0],vb),P("s_roughness","s_roughness",
0,vb),P("metalness","metalness",1,vb),P("normal","normal",[0,0,0],vb),P("e_color","e_color",[0,0,0],vb),P("emisson","emisson",1,vb),P("a_color","a_color",[0,0,0],za),P("alpha","alpha",1,za)];break;case "MATH":switch(b.operation){case "ADD":n="MATH_ADD";break;case "SUBTRACT":n="MATH_SUBTRACT";break;case "MULTIPLY":n="MATH_MULTIPLY";break;case "DIVIDE":n="MATH_DIVIDE";break;case "SINE":n="MATH_SINE";break;case "COSINE":n="MATH_COSINE";break;case "TANGENT":n="MATH_TANGENT";break;case "ARCSINE":n="MATH_ARCSINE";
break;case "ARCCOSINE":n="MATH_ARCCOSINE";break;case "ARCTANGENT":n="MATH_ARCTANGENT";break;case "POWER":n="MATH_POWER";break;case "LOGARITHM":n="MATH_LOGARITHM";break;case "MINIMUM":n="MATH_MINIMUM";break;case "MAXIMUM":n="MATH_MAXIMUM";break;case "ROUND":n="MATH_ROUND";break;case "LESS_THAN":n="MATH_LESS_THAN";break;case "GREATER_THAN":n="MATH_GREATER_THAN";break;case "MODULO":n="MATH_MODULO";break;case "ABSOLUTE":n="MATH_ABSOLUTE";break;default:return va.error("Unsupported MATH operation: "+b.operation),
null}A.push(["MATH_USE_CLAMP",Number(b.use_clamp)]);v=pa(b);q=ia(b);break;case "MIX_RGB":switch(b.blend_type){case "MIX":n="MIX_RGB_MIX";break;case "ADD":n="MIX_RGB_ADD";break;case "MULTIPLY":n="MIX_RGB_MULTIPLY";break;case "SUBTRACT":n="MIX_RGB_SUBTRACT";break;case "SCREEN":n="MIX_RGB_SCREEN";break;case "DIVIDE":n="MIX_RGB_DIVIDE";break;case "DIFFERENCE":n="MIX_RGB_DIFFERENCE";break;case "DARKEN":n="MIX_RGB_DARKEN";break;case "LIGHTEN":n="MIX_RGB_LIGHTEN";break;case "OVERLAY":n="MIX_RGB_OVERLAY";
break;case "DODGE":n="MIX_RGB_DODGE";break;case "BURN":n="MIX_RGB_BURN";break;case "HUE":n="MIX_RGB_HUE";break;case "SATURATION":n="MIX_RGB_SATURATION";break;case "VALUE":n="MIX_RGB_VALUE";break;case "COLOR":n="MIX_RGB_COLOR";break;case "SOFT_LIGHT":n="MIX_RGB_SOFT_LIGHT";break;case "LINEAR_LIGHT":n="MIX_RGB_LINEAR_LIGHT";break;default:return va.error("Unsupported MIX_RGB blend type: "+b.blend_type),null}A.push(["MIX_RGB_USE_CLAMP",Number(b.use_clamp)]);v=pa(b);q=ia(b);break;case "MIX_WORLD_RGB":case "ADD_WORLD_RGB":v=
[P("Factor","Factor",b.fac,b.fac_is_linked),P("Color1","Color1",[0,0,0],b.color1_is_linked),P("Color2","Color1",[0,0,0],b.color2_is_linked)];q=[P("Color","Color",[0,0,0],!0)];break;case "OUTPUT":v=pa(b);q=[];break;case "OUTPUT_MATERIAL":var v=pa(b),q=[],Oc=ta(b,"Surface"),jc=Oc.mb,xd={name:"output_surface",type:"OUTPUT_SURFACE",inputs:[Oc,P("alpha","alpha",1,jc)],outputs:[],Ma:[],data:{value:{wM:"BSDF_COMPUTE"},uM:{name:"bsdf_begin",type:"BSDF_BEGIN",inputs:[Oc,P("d_color","d_color",[0,0,0],jc),P("d_roughness",
"d_roughness",0,jc),P("s_color","s_color",[0,0,0],jc),P("s_roughness","s_roughness",0,jc),P("metalness","metalness",0,jc),P("normal","normal",[0,0,0],jc),P("e_color","e_color",[0,0,0],jc),P("emission","emission",0,jc),P("a_color","a_color",[0,0,0],jc),P("alpha","alpha",0,jc)],outputs:[P("E","E",[0,0,0],!0),P("A","A",[0,0,0],!0),P("D","D",[0,0,0],!0),P("S","S",[0,0,0],!0),P("normal","normal",[0,0,0],!0),P("bsdf_params","bsdf_params",[0,0,0,0],!0),P("shadow_factor","shadow_factor",0,!0),P("d_color",
"d_color",[0,0,0],!0),P("s_color","s_color",[0,0,0],!0),P("e_color","e_color",[0,0,0],!0),P("emission","emission",0,!0),P("a_color","a_color",[0,0,0],!0),P("alpha","alpha",0,!0)],Ma:[],data:null,Gb:[],vf:[]},vM:{name:"bsdf_end",type:"BSDF_END",inputs:[P("color","color",[0,0,0],!0),P("specular","specular",[0,0,0],!0),P("normal","normal",[0,0,0],!0),P("bsdf_params","bsdf_params",[0,0,0,0],!0),P("d_color","d_color",[0,0,0],!0),P("s_color","s_color",[0,0,0],!0),P("e_color","e_color",[0,0,0],!0),P("emission",
"emission",0,!0),P("a_color","a_color",[0,0,0],!0),P("alpha","alpha",0,!0)],outputs:[P("color","color",[0,0,0],jc),P("alpha","alpha",1,jc)],Ma:[],data:null,Gb:[],vf:[]}},Gb:[],vf:[]},C={name:b.name,UR:xd,DO:{name:"displacement_bump",type:"DISPLACEMENT_BUMP",inputs:[P("Height","Height",0,!0)],outputs:[P("Normal","Normal",[0,0,0],!1)],Ma:[],data:null,Gb:[],vf:[]}};break;case "OUTPUT_WORLD":v=pa(b);q=ia(b);Oc=ta(b,"Surface");xd={name:"output_world_surface",type:"OUTPUT_WORLD_SURFACE",inputs:[Oc],outputs:[],
Ma:[],data:null,Gb:[],vf:[]};C={name:b.name,VR:xd};break;case "RGB":var ld=b.name,yd={name:"-1",value:ld};u.push(yd);q.push(ha(b,"Color"));break;case "SEPRGB":case "SEPHSV":v=pa(b);q=ia(b);break;case "TEX_ENVIRONMENT":var $c=b.image;if($c){n="TEXTURE_ENVIRONMENT_"+b.projection;"NONE"==b.color_space?A.push(["NON_COLOR",1]):A.push(["NON_COLOR",0]);v.push(ta(b,"Vector"));A.push(["USE_VECTOR_IN",v[0].mb|0]);q.push(ha(b,"Color"));V=Q("param_TEXTURE_texture");u.push(na(V));var wc=db.Qj(db.Xh,!1);wc.repeat=
!0;wc.source="IMAGE";lb.Ty&&(wc.anisotropic_filtering=16);db.zD(wc,$c);C={Lq:b.name,eu:"",name:V,value:wc}}else n="TEXTURE_EMPTY";break;case "TEX_IMAGE":if($c=b.image){n="TEXTURE_COLOR";"NONE"==b.color_space?A.push(["NON_COLOR",1]):A.push(["NON_COLOR",0]);A.push(["CONVERT_UV",0]);for(var Kb=0;4>Kb;++Kb){var Tb,Yb;Kb?(Ea=P("Vector"+Kb,"Vector"+Kb,[0,0,0],!1),Tb=P("Color"+Kb,"Color"+Kb,[0,0,0],!1),Yb=P("Alpha"+Kb,"Alpha"+Kb,0,!1)):(Ea=ta(b,"Vector"),Tb=ha(b,"Color"),Yb=ha(b,"Alpha"));v.push(Ea);q.push(Tb);
q.push(Yb)}V=Q("param_TEXTURE_texture");u.push(na(V));wc=db.Qj(db.Xh,!1);wc.repeat="REPEAT"==b.extension;wc.source="IMAGE";db.zD(wc,$c);C={Lq:b.name,eu:"",name:V,value:wc}}else n="TEXTURE_EMPTY";break;case "TEXTURE":n=Ra(b);if("TEXTURE_EMPTY"==n)q.push(ha(b,"Color")),q.push(ha(b,"Normal")),q.push(ha(b,"Value"));else if("TEXTURE_ENVIRONMENT_CUBE"==n)v.push(ta(b,"Vector")),q.push(ha(b,"Color")),q.push(ha(b,"Value"));else{if("TEXTURE_NORMAL"==n&&"ENVIRONMENT_MAP"==b.texture.type)return va.error("Wrong output for ENVIRONMENT_MAP texture: "+
b.name),null;if("TEXTURE_COLOR"==n){var Lb=!1,Pb=b.texture.image;!Pb||"Non-Color"!=Pb.colorspace_settings_name&&"Non-Colour Data"!=Pb.colorspace_settings_name||(Lb=!0);A.push(["NON_COLOR",Number(Lb)]);A.push(["CONVERT_UV",1])}for(Kb=0;4>Kb;++Kb){var Pc="TEXTURE_COLOR"==n?"Color":"Normal";Kb?(Ea=P("Vector"+Kb,"Vector"+Kb,[0,0,0],!1),Tb=P(Pc+Kb,Pc+Kb,[0,0,0],!1),Yb=P("Value"+Kb,"Value"+Kb,0,!1)):(Ea=ta(b,"Vector"),Tb=ha(b,Pc),Yb=ha(b,"Value"));v.push(Ea);q.push(Tb);q.push(Yb)}}"TEXTURE_EMPTY"!=n&&(V=
Q("param_TEXTURE_texture"),u.push(na(V)),wc=b.texture.sa,C={Lq:b.texture.name,eu:b.texture.uuid,name:V,value:wc});break;case "VALTORGB":var v=pa(b),q=ia(b),C={value:b},zd=b.color_ramp.interpolation;"CONSTANT"!=zd&&"LINEAR"!=zd&&va.warn("Color Ramp node is not fully supported.");break;case "VALUE":n="VALUE";ld=b.name;yd={name:"-1",value:ld};u.push(yd);q.push(ha(b,"Value"));break;case "VECT_MATH":switch(b.operation){case "ADD":n="VECT_MATH_ADD";break;case "SUBTRACT":n="VECT_MATH_SUBTRACT";break;case "AVERAGE":n=
"VECT_MATH_AVERAGE";break;case "DOT_PRODUCT":n="VECT_MATH_DOT_PRODUCT";break;case "CROSS_PRODUCT":n="VECT_MATH_CROSS_PRODUCT";break;case "NORMALIZE":n="VECT_MATH_NORMALIZE";break;default:return va.error("Unsupported VECT_MATH operation: "+b.operation),null}v=pa(b);q=ia(b);break;case "VECT_TRANSFORM":switch(b.vector_type){case "POINT":A.push(["VECTOR_TYPE",Ha.Fa(0)]);break;case "VECTOR":A.push(["VECTOR_TYPE",Ha.Fa(1)]);break;case "NORMAL":A.push(["VECTOR_TYPE",Ha.Fa(2)]);break;default:return va.error("Unsupported VECT_TRANSFORM vector_type: "+
b.vector_type),null}var ad=b.convert_from,Qb=b.convert_to,ec=0;if("WORLD"==ad)if("WORLD"==Qb)ec=0;else if("OBJECT"==Qb)ec=1;else if("CAMERA"==Qb)ec=2;else return va.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else if("OBJECT"==ad)if("WORLD"==Qb)ec=3;else if("OBJECT"==Qb)ec=4;else if("CAMERA"==Qb)ec=5;else return va.error("Unsupported VECT_TRANSFORM convert_to: "+b.convert_to),null;else if("CAMERA"==ad)if("WORLD"==Qb)ec=6;else if("OBJECT"==Qb)ec=7;else if("CAMERA"==Qb)ec=8;else return va.error("Unsupported VECT_TRANSFORM convert_to: "+
b.convert_to),null;else return va.error("Unsupported VECT_TRANSFORM convert_from: "+b.convert_from),null;A.push(["CONVERT_TYPE",Ha.Fa(ec)]);v=pa(b);q=ia(b);break;case "NORMAL_MAP":var Ub=0;switch(b.space){case "TANGENT":Ub=0;break;case "OBJECT":Ub=1;break;case "WORLD":Ub=2;break;case "BLENDER_OBJECT":Ub=3;break;case "BLENDER_WORLD":Ub=4;break;default:return va.error("Unsupported NORMAL_MAP space: "+b.space),null}A.push(["SPACE",Ha.Fa(Ub)]);v.push(ta(b,"Strength"));v.push(ta(b,"Color"));v.push(P("Normal",
"Normal",[0,0,0],!1));A.push(["USE_NORMAL_IN",0]);q.push(ha(b,"Normal"));break;case "FRESNEL":ua=ta(b,"Normal");v.push(ta(b,"IOR"));v.push(ua);q.push(ha(b,"Fac"));A.push(["USE_FRESNEL_NORMAL",ua.mb|0]);break;case "LAYER_WEIGHT":ua=ta(b,"Normal");v.push(ta(b,"Blend"));v.push(ua);q=ia(b);A.push(["USE_NORMAL_IN",ua.mb|0]);break;case "BUMP":ua=ta(b,"Normal");A.push(["INVERT",b.invert?1:0]);A.push(["USE_NORMAL_IN",ua.mb|0]);v=pa(b);q=ia(b);break;case "BACKGROUND":v=pa(b);q=ia(b);break;default:v=pa(b),
q=ia(b)}var Qc={name:d,le:l,type:n,vf:w,inputs:v,outputs:q,Ma:u,data:C,Gb:A},Rc=ba.$j(a);ba.Zh(a,Rc,Qc);var md;if(!(md="GEOMETRY"!=b.type&&"TEX_COORD"!=b.type&&"NEW_GEOMETRY"!=b.type)){var bd;a:{for(var uc=b.outputs,Db=0,qc=0;qc<uc.length;qc++)if(uc[qc].is_linked&&Db++>c){bd=!0;break a}bd=!1}md=!bd}return md||null!=Ca(a,b,++c,e,g,h)?Rc:null}function Ja(a,b,c){for(var e=a.inputs,g=a.outputs,h=a.node_tree_name,f=0;f<b.length;f++){var d=e[f],k=b[f];if(!d||d.default_value instanceof Array!=k)return va.warn('Wrong inputs for custom node group "'+
a.name+'" of type: "',h,'".Processing as general node group.'),!1}for(f=0;f<c.length;f++)if(b=g[f],e=c[f],!b||b.default_value instanceof Array!=e)return va.warn('Wrong outputs for custom node group "'+a.name+'" of type: "',h,'".Processing as general node group.'),!1;return!0}function Ma(a,b,c,e){var g=a.node_group.node_tree,f={},d;for(d in g)if("links"==d||"nodes"==d){f[d]=[];for(var k=0;k<g[d].length;k++){f[d][k]={};for(var l in g[d][k])if("links"==d){f[d][k][l]={};for(var n in g[d][k][l])f[d][k][l][n]=
X(g[d][k][l][n])}else f[d][k][l]=X(g[d][k][l])}}else f[d]=X(g[d]);k=a.node_tree_name;if("B4W_REPLACE"==k||"B4W_LEVELS_OF_QUALITY"==k)g=ja("Group input","GROUP_INPUT",[],a.inputs),d=ja("Group output","GROUP_OUTPUT",a.outputs,[]),k="B4W_REPLACE"==k||"B4W_LEVELS_OF_QUALITY"==k&&(lb.quality==Xa.P_LOW||lb.hF)?{from_node:g,from_socket:g.outputs[1],to_node:d,to_socket:d.inputs[0]}:{from_node:g,from_socket:g.outputs[0],to_node:d,to_socket:d.inputs[0]},f.nodes=[g,d],f.links=[k];g=a.name;d=f.nodes;k=f.links;
for(l=0;l<d.length;l++)d[l].name=Za(d[l].type,g,d[l].name);for(l=0;l<k.length;l++)k[l].from_node.name=Za(k[l].from_node.type,g,k[l].from_node.name),k[l].to_node.name=Za(k[l].to_node.type,g,k[l].to_node.name);return{NR:h(f,a.node_group.uuid,!0,b,c,e).fb,OR:f.links}}function X(a){var b=typeof a;return"string"!=b&&"number"!=b&&"boolean"!=b&&a?m.N(a):a}function Q(a){vb[a]||(vb[a]=0);var b=a+"_"+vb[a],b=b.replace(/ /g,"_").replace(/\//g,"_");vb[a]++;return b}function Aa(a){a=a.outputs;for(var b=0;b<a.length;b++)if(a[b].is_linked)return!0;
return!1}function Ba(a,b){for(var c=a.outputs,e=0,g=0;g<c.length;g++){var h=c[g];if(h.is_linked&&!(e++<b))switch(h.identifier){case "UV":return"GEOMETRY_UV";case "Vertex Color":return"GEOMETRY_VC";case "Normal":return"GEOMETRY_NO";case "True Normal":return"GEOMETRY_TRN";case "Front/Back":return"GEOMETRY_FB";case "View":return"GEOMETRY_VW";case "Global":case "Position":return"GEOMETRY_GL";case "Local":return"GEOMETRY_LO";case "Orco":return"GEOMETRY_OR";case "Incoming":return"GEOMETRY_IN";case "Backfacing":return"GEOMETRY_BF";
default:return null}}}function Va(a,b){for(var c=a.outputs,e=0,g=0;g<c.length;g++){var h=c[g];if(h.is_linked&&!(e++<b))switch(h.identifier){case "Camera":return"TEX_COORD_CA";case "Generated":return"TEX_COORD_GE";case "Normal":return"TEX_COORD_NO";case "Object":return"TEX_COORD_OB";case "Reflection":return"TEX_COORD_RE";case "UV":return"TEX_COORD_UV";case "Window":return"TEX_COORD_WI";default:return null}}}function Ra(a){if(!a.texture||!a.texture.sa)return"TEXTURE_EMPTY";for(var b=a.outputs,c=!1,
e=!1,g=!1,h=0;h<b.length;h++){var f=b[h];if(f.is_linked)switch(f.identifier){case "Color":c=!0;break;case "Normal":e=!0;break;case "Value":g=!0;break;default:bb.va("Unknown texture output")}}if(c)return e&&va.warn('Node "'+a.name+'" has both Color and Normal outputs. Normal will be omitted.'),"ENVIRONMENT_MAP"==a.texture.type?"TEXTURE_ENVIRONMENT_CUBE":"TEXTURE_COLOR";if(e)return"TEXTURE_NORMAL";if(g)return"ENVIRONMENT_MAP"==a.texture.type?"TEXTURE_ENVIRONMENT_CUBE":"TEXTURE_COLOR"}function ta(a,
b){for(var c=a.inputs,e=0;e<c.length;e++){var g=c[e];if(g.identifier==b)return ga(g)}return null}function ha(a,b){for(var c=a.outputs,e=0;e<c.length;e++){var g=c[e];if(g.identifier==b)return ga(g)}return null}function ga(a){var b=a.name,c=a.identifier,e=a.is_linked;a=a.default_value;a=m._15(a)?a.slice(0):a;return{name:b,identifier:c,mb:e,rb:a}}function P(a,b,c,e){return{name:a,identifier:b,mb:e,rb:c}}function xa(a){return P(a.name,a.identifier,a.rb,a.mb)}function pa(a){for(var b=[],c=0;c<a.inputs.length;c++){var e=
ga(a.inputs[c]);e.rb.length&&e.rb.splice(3);b.push(e)}return b}function ia(a){for(var b=[],c=0;c<a.outputs.length;c++){var e=ga(a.outputs[c]);b.push(e)}return b}function na(a,b,c){b=null===b||void 0===b?null:Ha.Fa(b,c);return{name:a,value:b}}function ra(a){return{name:a.name,value:a.value}}function Fa(a){return a.slice()}function fa(a,b,c,e,g,h){var f=[],d=h.from_socket.identifier;h=h.to_socket.identifier;var k=e.outputs;for(e=0;e<k.length;e++)if(k[e].identifier==d){f.push(e);break}g=g.inputs;for(e=
0;e<g.length;e++)if(g[e].identifier==h){f.push(e);break}2==f.length&&ba.hd(a,b,c,f);return!0}function Za(a,b,c){return"GROUP_INPUT"==a?b+"*GI*"+c:"GROUP_OUTPUT"==a?b+"*GO*"+c:b+"%join%"+c}function Da(a){var b=[];ba.Oa(a,function(a,c){"GROUP"==c.type&&b.push(c)});return b}function Ga(a,b,c){for(var e=0;e<c.length;e++){var g=c[e].data.NR,h=c[e].data.OR;if(!g)return!1;ba.Oa(g,function(b,c){ba.Zh(a,ba.$j(a),c)});for(g=0;g<h.length;g++)b.push(h[g]);S(c[e],b,a)}return!0}function Sa(a,b,c,e,g,h){switch(a.type){case "GROUP":a.name==
b&&e.push(c);break;case "GROUP_INPUT":a.name.indexOf(b+"*GI*")||g.push(c);break;case "GROUP_OUTPUT":a.name.indexOf(b+"*GO*")||h.push(c)}}function Pa(a,b,c){for(var e=[],g=0;g<c.length;g++){for(var h=c[g],f=null,d=0;d<b.length;d++)if(h.from_socket.identifier==b[d].to_socket.identifier){f=b[d];break}f?(h.from_node=f.from_node,h.from_socket=f.from_socket):e.push(h)}for(g=0;g<b.length;g++)a.splice(a.indexOf(b[g]),1);return e}function La(a,b){if(b.length)for(var c=b[0].from_node.name,e=0;e<a.length;e++)a[e].from_node.name==
c&&b.push(a[e])}function za(a,b,c,e){for(var g=0;g<e.length;g++){for(var h=e[g],f,d=0;d<c.inputs.length;d++)if(h.from_socket.identifier==c.inputs[d].identifier){f=c.inputs[d].rb;break}for(var d=h,k=b,l=f,n=F(d.to_node,k),m=0;m<n.length;m++)for(var p=ba.Ib(k,n[m]),v=0;v<p.inputs.length;v++){var q=p.inputs[v];if(q.identifier==d.to_socket.identifier){p=q.rb instanceof Object?0:1;if((l instanceof Object?0:1)==p)q.rb=l;else switch(p){case 0:q=q.rb;q[0]=q[1]=q[2]=l;break;case 1:q.rb=(l[0]+l[1]+l[2])/3}break}}h=
a.indexOf(h);-1!=h&&a.splice(h,1)}}function S(a,b,c){for(var e=a.name,g=[],h=[],f=[],d=[],k=0;k<b.length;k++){var l=b[k];Sa(l.from_node,e,l,g,f,d);Sa(l.to_node,e,l,h,f,d)}h=Pa(b,h,f);g=Pa(b,d,g);La(b,h);za(b,c,a,h);if(g.length){var n;ba.Oa(c,function(a,b){"GROUP_OUTPUT"!=b.type||b.name.indexOf(e+"*GO*")||(n=b)});za(b,c,n,g)}}function Ua(a){var b=[],c=[];ba.Oa(a,function(a,e){switch(e.type){case "VALTORGB":b.push(e);break;case "CURVE_VEC":case "CURVE_RGB":c.push(e)}});var e=0,g=a=null,h=b.length+c.length;
if(b.length){a=db.RO(b,db.uJ);for(var f=0;f<b.length;f++)b[f].Gb.push(["NODE_TEX_ROW",Ha.Fa((e+.5)/h)]),e++}if(c.length)for(g=db.VO(c,db.JC),f=0;f<c.length;f++)c[f].Gb.push(["NODE_TEX_ROW",Ha.Fa((e+.5)/h)]),e++;f=null;a&&g?(f=new Uint8Array(a.length+g.length),f.set(a),f.set(g,a.length)):a?f=a:f=g;a=f?db.EE(f,db.JC):null;for(f=0;f<b.length;f++)b[f].data.wb=a;for(f=0;f<c.length;f++)c[f].data.wb=a}function ya(a,b,c){a=a.curve_mapping.curves_data[b];return 2==a.length&&a[0][0]<c+.01&&a[0][1]<c+.01&&.99<
a[1][0]&&.99<a[1][1]?!1:!0}var bb=Object(O.a)(b),Xa=Object(T.a)(b),sa=Object(G.a)(b),ba=Object(r.a)(b),va=Object(y.a)(b),Ha=Object(x.a)(b),db=Object(q.a)(b),vb={},Qa={},$a={},gb={},wb=0,lb=Xa.wa;d.PV=0;d.nD=1;d.mD=2;d.lD=3;d.OV=4;d.kD=5;d.jD=6;d.iD=7;d.NV=8;d.mK=0;d.lK=1;d.HV=2;d.kK=3;d.GV=4;d.pv=function(a){return Qa[a]};d.UM=function(a){delete Qa[a]};d.xE=function(a,b,c,e,g){return h(a,b,!1,c,e,g)};d.pz=function(a,b,c){if(a in $a)return $a[a];var g=ba.create(),h={name:"LIGHTING_BEGIN",type:"LIGHTING_BEGIN"},
f=Ca(g,h,0,null,null,c),h={name:"LIGHTING_END",type:"LIGHTING_END"},h=Ca(g,h,0,null,null,c);e(g,b,f,h,[[f,[8,10]],[f,[9,6]]],c);K(g);return $a[a]=g};d.pP=function(a,b,c,e){a+=c;switch(b){case "GLOW":a+="11";case "COLOR_ID":case "SHADOW":a+="00";default:a+="10"}e&&e.yC&&(a+=e.yC);e&&e.xC&&(a+=e.xC);return a};d.Zq=function(a){var b=[],c={};vb={};var e=ba.eC(a);ba.Oa(e,function(a,e){var g;g=[];for(var h=[],f=[],d=[],k=[],l=[],n=0;n<e.inputs.length;n++){var m=e.inputs[n];if(m.mb)g.push(null),h.push(null);
else{g.push(Q("in_"+e.type+"_"+m.identifier.replace(/\./g,"")));var p=Ha.Fa(m.rb,0);lb.LB&&(0<=e.type.indexOf("MIX_RGB_")&&("Color1"==m.identifier||"Color2"==m.identifier||"Fac"==m.identifier)||0<=e.type.indexOf("MATH_")&&("Value"==m.identifier||"Value_001"==m.identifier||"Value.001"==m.identifier)||0<=e.type.indexOf("VECT_MATH_")&&("Vector_001"==m.identifier||"Vector.001"==m.identifier)||0<=e.type.indexOf("LIGHTING_APPLY")||0<=e.type.indexOf("MATERIAL_END")||0<=e.type.indexOf("MATERIAL_BEGIN"))&&
(m=p,m=m.replace(/(,)/g,"$1 "),m=m.replace(/(^|[^0-9]|\s)(0\.0)($|[^0-9]|\s)/g,"$1_0_0$3"),m=m.replace(/(^|[^0-9]|\s)(1\.0)($|[^0-9]|\s)/g,"$1_1_0$3"),p=m=m.replace(/\s+/g,""));h.push(p)}}for(n=0;n<e.outputs.length;n++)m=e.outputs[n],m.mb?f.push(null):f.push(Q("out_"+e.type+"_"+m.identifier.replace(/\./g,"")));for(n=0;n<e.Ma.length;n++)m=e.Ma[n],d.push(m.name),k.push(m.value);for(n=0;n<e.vf.length;n++)l.push(e.vf[n].name);g={id:e.type,inputs:g,qA:h,outputs:f,Ma:d,np:k,vf:l,Gb:JSON.parse(JSON.stringify(e.Gb))};
b.push(g);c[a]=g});ba.Th(e,function(a,b,g){var h=ba.Ib(e,a),f=h.outputs[g[0]];a=c[a].outputs;b=c[b].inputs;h=a[g[0]]||Q("out_"+h.type+"_"+f.identifier.replace(/\./g,""));a[g[0]]=h;b[g[1]]=h});return b};d.dE=function(a){if(a.ke)for(var b=0;b<a.ke.nodes.length;b++){var c=a.ke.nodes[b];if("GROUP"==c.type&&"B4W_GLOW_OUTPUT"==c.node_tree_name)return!0}return!1};d.XX=function(a,b,c){va.log("\n====== USER: "+b+", MATERIAL: "+c+" ======\n"+sa.PR(a)+"\n=============================================================")};
d.cleanup=function(){for(var a in Qa)delete Qa[a];for(a in $a)delete $a[a];for(var b in gb)delete gb[b];wb=0};d.$P=function(a){var b=-1;ba.Oa(a,function(a,c){if("TEXTURE_ENVIRONMENT_EQUIRECTANGULAR"==c.type||"TEXTURE_ENVIRONMENT_MIRROR_BALL"==c.type)b=Math.max(b,c.data.value.height)});return b}});t.a=d},function(E,t,d){E=d(0);var O=d(1),T=d(2);d=Object(E.a)("__debug_telemetry",function(d,r){var f=Object(O.a)(d),k=[],y={},x=["color: #3366FF","color: #CC33FF","color: #FF3366","color: #33FF66","color: #FFCC33"];
r.fbmsg=function(){for(var f=[performance.now()],d=0;d<arguments.length;d++){var q=arguments[d];if(T._15(q))for(var b=0;b<q.length;b++)f.push(q[b]);else f.push(arguments[d])}k.push(f)};r.msg=function(){for(var f=1,d=0;d<k.length;d++){var q=k[d];q[1]==arguments[0]&&f++}q=[f];for(d=0;d<arguments.length;d++)if(f=arguments[d],T._15(f))for(var b=0;b<f.length;b++)q.push(f[b]);else q.push(arguments[d]);k.push(q)};r.print_telemetry=function(d){d||(d=1);for(var m=0,q={},b=Math.max(0,performance.now()-1E3*
d),u=0;u<k.length;u++){var h=k[u];d=h[0];if(!(d<b)){var l=String(h[1]);q[l]||(q[l]=x[m++%x.length]);d=["%c"+(d/1E3).toFixed(6),q[l],l];for(l=2;l<h.length;l++)d.push(h[l]);f.log.apply(this,d)}}k.splice(0)};r.plot_telemetry=function(d){d||(d=1);for(var m={},q=Math.max(0,performance.now()-1E3*d),b=0;b<k.length;b++){var u=k[b];d=u[0];if(!(d<q))for(var h=2;h<u.length;h++){var l=String(u[1]);3<u.length&&(l+="_"+String(h-2));m[l]||(m[l]=l+"\n");m[l]+=String(d)+" "+u[h]+"\n"}}d="";for(l in m)d+=m[l]+"\n\n";
f.log(d);k.splice(0)};r.QW=function(f){y[f]=f in y?y[f]+1:1};r.update=function(){for(var d in y)f.log(d,y[d]),y[d]=0}});t.a=d},function(E,t,d){E=d(0);var O=d(5),T=d(4),G=d(20),r=d(36),f=d(2);d=Object(E.a)("__primitives",function(d,y){function k(b,c,a,f){for(var e=[],d=[],k=[],l=b*c,m=2*a/(b-1),p=2*f/(c-1),q=0;q<b;q++)for(var u=-a+q*m,x=0;x<c;x++)if(d.push(u,-f+x*p,0),k.push(q/(b-1),x/(c-1)),q&&x){var y=q*c+x,t=y-1,G=(q-1)*c+x,ca=G-1;e.push(y,t,G);e.push(t,ca,G)}b=h.Si();b.a_position=new Float32Array(d);
b.a_tbn=r.c(l);l=h.Gh("GRID_PLANE");l.Va[0]=b;l.gb.a_texcoord=new Float32Array(k);l.$a=new Uint32Array(e);l.Eb=d.length/3;return l}function m(e){var c=e.length;c%4&&b.va("Wrong array");for(var a=[],f=[],d=0;d<c;d+=4){var k=e[d+1],l=e[d+2],m=e[d+3];q(e[d],f);q(k,f);q(l,f);q(m,f);a.push(d,d+1,d+2);a.push(d,d+2,d+3)}e=h.Si();e.a_position=new Float32Array(f);e.a_tbn=r.c(c/4);c=h.Gh("FROM_QUADS");c.Va[0]=e;c.$a=new Uint32Array(a);c.Eb=f.length/3;return c}function p(b,c){var a=3*c;return[b[a],b[a+1],b[a+
2]]}function q(b,c){c.push(b[0],b[1],b[2])}var b=Object(O.a)(d),u=Object(T.a)(d),h=Object(G.a)(d),l=u.wa;y.qP=function(){var b=h.Gh("LINE"),c=h.Si();c.a_position=new Float32Array(3);c.a_direction=new Float32Array(3);b.Va[0]=c;b.$a=new Uint32Array(1);b.Eb=1;return b};y.hv=function(){var b=k(2,2,1,1);b.name="PLANE";return b};y.VW=k;y.lP=function(b,c,a){function e(a,b){return 1==a%2&&(0==b||b==m-1)||1==b%2&&(0==a||a==k-1)?!0:!1}var f=a/=Math.pow(2,b-1),d=a,k=c+1,m=c+1;c=[];a=[];for(var p=0,q=0,u=0,x=
-1,y=[],t=0;t<b;t++){for(var G=2*f/(k-1),D=2*d/(m-1),R=[],V=[],F=0,z=0;z<k;z++){for(var w=-f+z*G,W=[],A=0;A<m;A++){var n=-d+A*D;if(w>-q&&w<q&&n>-u&&n<u)W.push(-1),F++;else{for(var g=null,ea=0;ea<y.length;ea+=3)if(w==y[ea]&&n==y[ea+1]){g=y[ea+2];break}ea=null!==g?g:x+1;e(z,A)?(W.push(-2),F++):(null==g&&(A&&A!=m-1&&z&&z!=k-1?g=G:(g=t==b-1?G:2*G,R.push(w,n,ea)),a.push(w,n,g),p++,x++),W.push(ea));if(z&&A)if(1==z)if(e(z-1,A)){if(1<A){var n=ea-1,g=V[z-1][A+1],ka=g-1;c.push(ka,n,ea)}else g=V[z-1][A+1],ka=
g-1;c.push(g,ka,ea)}else e(z,A)||(n=ea-1,g=V[z-1][A],c.push(g,n,ea));else if(z==k-1){if(!e(z,A))if(A==m-1)n=ea-1,g=V[z-1][A-1],ka=V[z-2][A],c.push(g,n,ea),c.push(ka,g,ea);else{var n=ea-1,g=V[z-1][A],ka=g-1,O=g+1;c.push(ka,n,ea);c.push(g,ka,ea);c.push(O,g,ea);2==A&&(O=V[z-2][A-2],c.push(ka,O,n))}}else 1==A?e(z,A-1)?(n=V[z-1][A],g=V[z-1][A-1],c.push(n,g,ea)):(n=W[A-1],g=V[z-1][A],ka=V[z-2][A-1],c.push(g,n,ea),c.push(g,ka,n)):A==m-1?e(z,A)||(n=W[A-1],g=V[z-1][A-1],ka=V[z-2][A],c.push(g,n,ea),c.push(ka,
g,ea)):-1!=V[z-1][A]&&-1!=V[z-1][A-1]&&-1!=W[A-1]?(n=W[A-1],g=V[z-1][A],ka=V[z-1][A-1],c.push(g,n,ea),c.push(g,ka,n),A==m-2&&e(z,A+1)&&(O=V[z-1][A+1],c.push(O,g,ea))):A==m-2&&e(z,A+1)&&(g=V[z-1][A],O=V[z-1][A+1],c.push(O,g,ea))}}V.push(W)}y=R;q=f;u=d;f*=2;d*=2}2E4>q&&(b=-(2*q)/(k-1),a.push(-2E4,-2E4,b),a.push(-2E4,2E4,b),a.push(-q,-u,b),a.push(-q,u,b),a.push(2E4,-2E4,b),a.push(2E4,2E4,b),a.push(q,-u,b),a.push(q,u,b),ea=x+1,c.push(ea+1,ea+2,ea+3,ea+1,ea+0,ea+2,ea+2,ea+4,ea+6,ea+2,ea+0,ea+4,ea+1,ea+
7,ea+5,ea+1,ea+3,ea+7,ea+7,ea+4,ea+5,ea+6,ea+4,ea+7),p+=8);b=h.Si();b.a_position=new Float32Array(a);b.a_tbn=r.c(p);r.j(b.a_tbn,[.707,0,0,.707],b.a_tbn);f=h.Gh("MULTIGRID_PLANE");f.Va[0]=b;f.$a=new Uint32Array(c);f.Eb=a.length/3;l.mJ&&(h.Ex(f,1,!0),b.a_polyindex=h.Vu(f));return f};y.UW=function(e){var c=e.length;c%3&&b.va("Wrong array");for(var a=[],f=[],d=0;d<c;d+=3){var k=e[d+1],l=e[d+2];q(e[d],f);q(k,f);q(l,f);a.push(d,d+1,d+2)}e=h.Si();e.a_position=new Float32Array(f);c=h.Gh("FROM_TRIANGLES");
c.Va[0]=e;c.$a=new Uint32Array(a);c.Eb=f.length/3;return c};y.TW=m;y.nP=function(b){b=f._68(b,[]);var c=[];c.push(b[0],b[1],b[2],b[3]);c.push(b[0],b[3],b[5],b[4]);c.push(b[3],b[2],b[6],b[5]);c.push(b[1],b[7],b[6],b[2]);c.push(b[0],b[4],b[7],b[1]);c.push(b[4],b[5],b[6],b[7]);b=m(c);b.name="FRUSTUM";return b};y.Od=function(){var b=h.Gh("FULLSCREEN_TRI"),c=h.Si();c.a_position=new Float32Array([0,0,1,0,0,1]);b.Va[0]=c;b.$a=new Uint32Array([0,1,2]);b.Eb=3;return b};y.oP=function(){var b=h.Gh("FULLSCREEN_QUAD"),
c=h.Si();c.a_position=new Float32Array([-1,1,1,1,-1,-1,1,-1]);b.Va[0]=c;b.$a=new Uint32Array([0,2,1,1,2,3]);b.Eb=4;return b};y.kP=function(){var b=h.Gh("BILLBOARD"),c=h.Si();c.a_bb_vertex=h.lF(1);b.Va[0]=c;b.$a=new Uint32Array([0,2,1,0,3,2]);b.Eb=4;return b};y.Oz=function(b,c){var a=h.Gh("UV_SPHERE"),e,f,d=[],k=[],l=[];for(f=0;8>=f;f++)for(e=0;16>=e;e++){var m=e/16,u=f/8;k.push(-b*Math.cos(2*m*Math.PI)*Math.sin(u*Math.PI)+c[0],b*Math.cos(u*Math.PI)+c[1],b*Math.sin(2*m*Math.PI)*Math.sin(u*Math.PI)+
c[2])}for(f=m=0;8>f;f++)for(e=0;16>e;e++){var u=p(k,17*f+e+1),x=p(k,17*f+e),y=p(k,17*(f+1)+e),t=p(k,17*(f+1)+e+1);Math.abs(u[1])==b+c[1]?(q(u,d),q(y,d),q(t,d),l.push(m,m+1,m+2),m+=3):Math.abs(y[1])==b+c[1]?(q(u,d),q(x,d),q(y,d),l.push(m,m+1,m+2),m+=3):(q(u,d),q(x,d),q(y,d),q(t,d),l.push(m,m+1,m+2),l.push(m,m+2,m+3),m+=4)}e={};e.a_position=d;k=h.VD(l,k,d);k=h.UD(l,d,k);e.a_tbn=r.d(k);a.Va[0]=e;a.$a=l;a.Eb=d.length/3;return a};y.pF=function(b){var c=h.Gh("INDEX"),a=h.Si();a.a_index=new Float32Array(3*
b);for(var e=new Uint16Array(3*b),f=0;f<3*b;f++)a.a_index[f]=f,e[f]=f;c.Va[0]=a;c.$a=e;c.Eb=3*b;return c}});t.a=d},function(E,t,d){E=d(0);var O=d(5),T=d(14),G=d(4),r=d(44),f=d(45),k=d(30),y=d(31),x=d(22),m=d(11),p=d(17),q=d(2);d=Object(E.a)("__scenegraph",function(b,d){function h(a,b){var c=[];M.Th(a,function(b,e,g){-1<c.indexOf(g)?M.AS(a,b,e,g,D(g)):c.push(g)});M.Oa(a,function(a,e){for(var g=0;g<e.Mb.length;g++){var h=e.Mb[g];b||e.type!=Z.Ee&&e.type!=Z.ae&&e.type!=Z.mh||(h.Id=!0);-1<c.indexOf(h)?
e.Mb[g]=D(h):c.push(h)}})}function l(a,b){M.Oa(a,function(c,e){e.type==Z.FC&&M.Lk(a,c,function(a,b){if(b.type==Z.Ii)for(var c=0;c<b.Mb.length;c++){var e=b.Mb[c];e.Ka=aa.Ca;e.La=aa.Ca}});b||M.Lk(a,c,function(a,b,c){"DEPTH"==c.from&&(c.Id=!0)})});M.Oa(a,function(b){var c={};e(a,b,c);for(var g in c){b=c[g];for(var h=b[0],f=0;f<b.length;f++)if(b[f].Ka==aa.Ca){h=b[f];break}for(var d=b[0],f=0;f<b.length;f++)if(b[f].La==aa.Ca){d=b[f];break}for(var k=b[0],f=0;f<b.length;f++)if(!b[f].Id){k=b[f];break}for(f=
0;f<b.length;f++)b[f].Ka=h.Ka,b[f].La=d.La,b[f].Id=k.Id}})}function e(a,b,c){M.Lk(a,b,function(b,g,h){h.active&&h.from==h.to&&(c[h.from]=c[h.from]||[],-1==c[h.from].indexOf(h)&&c[h.from].push(h),e(a,b,c))});M.bm(a,b,function(a,b,e){e.active&&(c[e.from]=c[e.from]||[],-1==c[e.from].indexOf(e)&&c[e.from].push(e))});b=M.Ib(a,b);if(b.type==Z.Ii)for(var g=0;g<b.Mb.length;g++){var h=b.Mb[g];c[h.from].push(h)}}function c(b){var c=[Z.Ii,Z.Ky,Z.Ft,Z.Ee,Z.ae,Z.tq];ja.Nb||c.push(Z.IC);var e=M.eC(b),g=[];M.Oa(e,
function(b,h){for(var f=0;f<h.Mb.length;f++){var d=h.Mb[f];-1<c.indexOf(h.type)&&(d.em=!0);var k=B(g,d,a(d));d.wb=k;h.Sh[f]=k}for(f=0;f<h.Sh.length;f++)k=h.Sh[f],v(g,k);M.bm(e,b,function(f,d,k){if(!k.wb){if(-1<c.indexOf(h.type))k.em=!0;else if((f=u(e,b,k.from))&&k.active&&!k.wb){t(g,f);k.wb=f;return}f=B(g,k,a(k));k.wb=f}});M.Lk(e,b,function(a,b,c){v(g,c.wb)});M.bm(e,b,function(a,b,c){c.wb&&"NONE"==c.to&&v(g,c.wb)})})}function a(a){var b=a.to,c=a.active,e=a.wb;a.to="";a.active=!1;a.wb=null;var g=E.XD(a);
a.to=b;a.active=c;a.wb=e;return g}function u(a,b,c){var e=null;M.Lk(a,b,function(a,b,g){if(g.active&&g.from==g.to&&g.from==c&&g.wb)return e=g.wb,!0});M.bm(a,b,function(a,b,g){if(g.active&&g.from==c&&g.wb)return e=g.wb,!0});return e}function t(a,b){for(var c=0;c<a.length;c++){var e=a[c];e.dC===b&&e.ys++}}function v(a,b){for(var c=0;c<a.length;c++){var e=a[c];e.dC===b&&e.ys&&e.ys--}}function B(a,b,c){if(b.vn)return t(a,b.vn.wb),b.vn.wb;if(b.em)return C(b);for(var e=null,g=0;g<a.length;g++){var h=a[g];
if(h.id==c&&0===h.ys){e=h;break}}if(e&&!ja.fF)return e.ys++,e.dC;b=C(b);a.push({id:c,ys:1,dC:b});return b}function C(a){var b=a.zk*a.size,c=a.Ak*a.size,e=a.cy,g=a.Re;switch(a.from){case "COLOR":return a.Id?(e=aa.Qj(a.$g?aa.Kt:aa.Jt,e,g),aa.resize(e,b,c)):(e=a.wr?aa.Qj(aa.pm,e,g):aa.Qj(aa.Xh,e,g),aa.resize(e,b,c),aa.HB(e,a.Ka,a.La)),e;case "DEPTH":return a.Id?(e=aa.Qj(a.$g?aa.It:aa.Ht,e,g),aa.resize(e,b,c)):(e=aa.Qj(aa.om,e,g),aa.resize(e,b,c),aa.HB(e,a.Ka,a.La)),e;case "CUBEMAP":return e=aa.rN(b,
g);case "SCREEN":case "NONE":return null;default:A.va("Wrong slink param: "+a.from)}}function L(a,b){var c=!1;M.Th(a,function(e,g,h){if(h&&(e=M.Ib(a,e),g=M.Ib(a,g),b(h,!1,e,g)))return c=!0});c||M.Oa(a,function(a,c){for(var e=0;e<c.Mb.length;e++)if(b(c.Mb[e],!0,c,null))return!0})}function H(a){M.Oa(a,function(b,c){if(c.type!=Z.Uk){var e=c.qa;M.bm(a,b,function(a,b,c){c.wb&&c.active&&c.wb&&(n.Yw(e,c.from,c.wb),c.from==c.to&&b.qa&&n.Yw(b.qa,c.from,c.wb))});for(var g=0;g<c.Mb.length;g++){var h=c.Mb[g];
h.active&&h.from==h.to&&n.Yw(e,h.from,c.Sh[g])}!e.vc&&!e.dg||e.Ff||(e.Ff=Ea.yS(e.vc,e.dg))}});M.Oa(a,function(b,c){if(c.type==Z.Dt||c.type==Z.Ay){var e=F(a,c);c.qa.Ar=e[0].qa.Ff}})}function I(a){var b=null,c=0;M.Oa(a,function(a,e){if(e.type==oa.Vs){if(c==oa.aU)return b=e,!0;c++}});return b}function da(a,b){var c=M.nk(a,b),e=Z.ld("NONE"),g=M.Ga(a,e),h=M.Hr(a)[0];M.Th(a,function(b,c){c==h&&M.rS(a,b,h,b,g)});var f=N(b,a);M.Th(a,function(g,h,d){if(g==c){if(f){g=Z.er();M.Ga(a,g);h=K("COLOR","RESOLVE",
1,1,1,!0,!0);h.$g=!0;h.Id=!0;var k=K("DEPTH","RESOLVE",1,1,1,!0,!0);k.$g=!0;k.Id=!0;M.ra(a,b,g,h);M.ra(a,b,g,k);b=g}M.ra(a,b,e,K(oa.DT,"u_color",d.size,d.zk,d.Ak,d.Hn,d.Tt));return!0}});M.hd(a,g,h,K("SCREEN","NONE",.5,.5,.5,!0,!0))}function N(a,b){var c=!1,e=M.nk(b,a);M.bh(b,e)&&(c=M.Bh(b,e,0),e=M.td(b,e,c,0),"COLOR"==e.from&&"COLOR"==e.to||"DEPTH"==e.from&&"DEPTH"==e.to?(e=M.Ib(b,c),c=N(e,b)):c="RESOLVE"==e.to);return c}function U(a,b,c,e){var g=c.Sa,h=b.Iv,f=b.anaglyph_use,d=b.wi.nj,k=b.wi.Lw;b=
M.Wl(a,M.aQ(a,e),M.Sk);var l=[],m=[],p=[];b=M.clone(b,function(b){var e;if(-1<Ca.indexOf(b.type))m.push(b),e=b;else{e=Z.cN(b);if(e.type==Z.Ee)for(var f=0;f<d.length;f++)if(d[f][0]==b){d[f]=[b,e];e.qa.ad=b.qa.ad;c.Sa.push(e.qa);break}if(b.type==Z.Dg)for(f=0;f<d.length;f++){if(k[f][0]==b){k[f]=[b,e];e.qa=d[f][1].qa;break}}else-1<g.indexOf(b.qa)&&(h?(n.jw(b.qa,n.Tf),n.jw(e.qa,n.yf),e.Rm=!0):(n.jw(b.qa,n.gd),n.jw(e.qa,n.qd)),g.push(e.qa));var q=M.nk(a,b);M.Lk(a,q,function(a,b,c){-1<Ca.indexOf(b.type)&&
l.push([b,e,c])});if(b.type!==Z.Ii)for(f=0;f<b.Mb.length;f++)e.Mb[f].vn=b.Mb[f];b=!0;for(f=0;f<M.aj(a,q);f++){var v=M.Ug(a,q,f),v=M.Ib(a,v);-1==Ca.indexOf(v.type)&&(b=!1)}b&&p.push(e)}return e},function(a){var b=D(a,!0);b.vn=a;return b});for(var q=0;q<m.length;q++)M.ng(b,M.nk(b,m[q]));M.gz(b);f=Z.mO(h,f);q=M.Ga(a,f);if(ja.Mv)var v=Z.ld("NONE"),w=K("COLOR","u_color",1,1,1,!0,!0);else v=Z.rz(),w=K("COLOR","COPY",1,1,1,!0,!0);w.Ka=aa.Ca;w.La=aa.Ca;M.Ga(a,v);M.ra(a,e,v,w);var u=K("COLOR","u_sampler_left",
1,1,1,!0,!0);u.em=!0;u.Ka=aa.Ca;u.La=aa.Ca;M.ra(a,v,f,u);if(!e.Gc){if(ja.Mv)var u=Z.ld("NONE"),C=K("COLOR","u_color",1,1,1,!0,!0);else u=Z.rz(),C=K("COLOR","COPY",1,1,1,!0,!0);M.Ga(b,u);C.vn=w;var z=M.Hr(b)[0],z=M.Ib(b,z);M.ra(b,z,u,C)}u=K("COLOR","u_sampler_right",1,1,1,!0,!0);e.Gc&&(u.vn=w);u.Ka=aa.Ca;u.La=aa.Ca;M.BD(b,a,[M.Hr(b)[0],q,u]);for(q=0;q<l.length;q++)M.ra(a,l[q][0],l[q][1],l[q][2]);e=K("SCREEN","NONE",0,0,0,!1,!1);for(q=0;q<p.length;q++)M.ra(a,v,p[q],e);M.Th(a,function(b,c,e){M.Ib(a,
b).type===Z.Ii&&(e.vn=null)});return f}function K(a,b,c,e,g,h,f){return{from:a,to:b,size:c,zk:e,Ak:g,Hn:h,Tt:f,active:!0,wb:null,$g:!1,wr:!1,Id:!1,Ka:aa.Ve,La:aa.Ve,em:!1,cy:!1,Re:!1}}function D(a,b){var c=K(a.from,a.to,a.size,a.zk,a.Ak,a.Hn,a.Tt);c.active=a.active;!b&&a.wb&&A.va("Failed to clone slink with attached texture");c.wb=a.wb;c.$g=a.$g;c.Id=a.Id;c.Ka=a.Ka;c.La=a.La;c.em=a.em;c.cy=a.cy;c.Re=a.Re;return c}function R(a,b,c){if(b.type==c)return!0;b=z(a,b);for(var e=0;e<b.length;e++)if(R(a,b[e],
c))return!0;return!1}function V(a,b,c){if(b.type==c)return!0;b=F(a,b);for(var e=0;e<b.length;e++)if(V(a,b[e],c))return!0;return!1}function F(a,b){var c=M.nk(a,b);c==M.Jy&&A.va("Subscene not in graph");for(var e=[],g=M.aj(a,c),h=0;h<g;h++){var f=M.Ug(a,c,h);f!=c&&e.push(M.Ib(a,f))}return e}function z(a,b){var c=M.nk(a,b);c==M.Jy&&A.va("Subscene not in graph");for(var e=[],g=M.bh(a,c),h=0;h<g;h++){var f=M.Bh(a,c,h);f!=c&&e.push(M.Ib(a,f))}return e}function w(a){var b=[],c=[];L(a,function(a){a.wb&&-1==
b.indexOf(a.wb)&&(b.push(a.wb),c.push(a.wb,b.length-1))});return c}function W(a,b){var c;c=""+(a.from+"\\n");c+="NONE"!=a.to?a.to+"\\n":"";c+="(";if(a.Hn){var e=a.zk,g=a.Ak;Math.round(e)!=e&&(e=e.toFixed(2));Math.round(g)!=g&&(g=g.toFixed(2));c=c+((1==e?"":e)+"Sx"+((1==g?"":g)+"S"))+(a.Tt?" FACT":" VIEW")}else e=a.zk,g=a.Ak,c+=a.size*e+"x"+a.size*g;if("SCREEN"!=a.from){c+=" ";if(a.Id)c+="RR";else{var e=a.Ka,g=a.La,h="";e==aa.Ca?h+="L":e==aa.Ve&&(h+="N");g==aa.Ca?h+="L":g==aa.Ve&&(h+="N");c+=h}for(e=
0;e<b.length;e+=2)b[e]==a.wb&&(c+=" "+b[e+1])}return c+")\\n"}var A=Object(O.a)(b),n=Object(T.a)(b),g=Object(G.a)(b),ea=Object(r.a)(b),ka=Object(f.a)(b),E=Object(k.a)(b),M=Object(y.a)(b),Ea=Object(x.a)(b),Z=Object(m.a)(b),aa=Object(p.a)(b),oa=g.Km,ja=g.wa,Ia=g.An,Ca=[Z.xj,Z.be,Z.ae,Z.Sf];d.QM=function(a){switch(a.to){case "COLOR":case "CUBEMAP":case "DEPTH":case "SCREEN":case "OFFSCREEN":case "RESOLVE":case "COPY":case "NONE":return!1;default:return!0}};d.Sp=L;d.FN=function(a,b,e,g){function f(c){var e=
n.rd(Ya,!0);b.Sa.push(e);e=Z.Im(c,e,!1,y,r,Q,la,E,a.Xl);M.Ga(d,e);c==Z.mh?(M.ra(d,k[0],e,K("COLOR","COLOR",1,1,1,!0,!0)),e.Mb.push(K("DEPTH","DEPTH",1,1,1,!0,!0))):(c=$a&&k[0].type==Z.Dt?ob:k[0],M.ra(d,ob,e,lb),M.ra(d,c,e,wb));Wa&&(M.ra(d,Wa,e,J),M.ra(d,Wa,e,ua));for(c=0;c<p.length;c++)M.ra(d,p[c],e,v[c]);pc&&M.ra(d,pc,e,Gc);if(w.length){var g=w.length;for(c=0;c<g;c++)M.ra(d,w[c],e,u[c])}if(C.length)for(c=0;c<C.length;c++)M.ra(d,C[c],e,A[c]);pb&&M.ra(d,pb,e,Fc);return e}var d=M.create(),k=[],m=[],
p=[],v=[],w=[],u=[],C=[],A=[],x=[],r=a.WQ,y=a.Zd,B=a.shore_smoothing,L=a.FT,t=a.ssao,G=a.god_rays,ca=a.wi,W=a.HG,N=a.oM,R=a.motion_blur,V=a.compositing,O=a.antialiasing,la=a.mm,Q=a.qJ,E=a.Gd,wa=a.CR,T=a.JM,X=a.mQ,Ea=a.TR,Ca=a.dof,Ja=a.BO,Ma=a.refractions,Qa=!!g.length,$a=1<ja.Jc;ja.tp=ja.tp&&!!E&&!($a&&t);var gb=ja.tp,wb=K("COLOR","COLOR",1,1,1,!0,!0),lb=K("DEPTH","DEPTH",1,1,1,!0,!0);if($a){var yb=D(lb);wb.$g=!0;wb.Id=!0;lb.$g=!0;lb.Id=!0}var Ya=b.Sa[0];if(a.sd){var Wa=Z.ZN();M.Ga(d,Wa);var nb=Ia.Ir;
Wa.qa.width=nb;Wa.qa.height=nb;var J=K("DEPTH","u_grass_map_depth",nb,1,1,!1,!1);ja.Nb||(J.Ka=aa.Ca,J.La=aa.Ca);var ua=K("COLOR","u_grass_map_color",nb,1,1,!1,!1);ua.Ka=aa.Ca;ua.La=aa.Ca}else ua=J=Wa=null;if(E){n.rC(Ya,E);for(var qa=0;qa<E.li.length;qa++)for(var Oa=E.csm_num,ab=0;ab<Oa;ab++){var sb=Z.hO(ab,qa,E,r);M.Ga(d,sb);p.push(sb);var nb=E.csm_resolution,eb=sb.qa;b.$H.push(eb);eb.width=nb;eb.height=nb;sb.Vb=!0;var hb=0<qa?qa:ab;if(ja.Ds){v.push(K("COLOR","u_shadow_map"+hb,nb,1,1,!1,!1));var nc=
K("DEPTH","DEPTH",nb,1,1,!1,!1);nc.Id=!0;sb.Mb.push(nc)}else{var Ib=K("DEPTH","u_shadow_map"+hb,nb,1,1,!1,!1);ja.Yq&&(Ib.Ka=aa.Ca,Ib.La=aa.Ca,Ib.cy=!0);v.push(Ib);(ea.AO()||ja.aI)&&sb.Mb.push(K("COLOR","COLOR",nb,1,1,!1,!1))}Wa&&(M.ra(d,Wa,sb,J),M.ra(d,Wa,sb,ua))}}if(ca&&ca.VG&&!Qa)for(ab=0;ab<ca.VG;ab++){eb=n.kd(n.pd);eb.width=a.Sj;eb.height=a.Sj;n.IH(eb,Math.PI/2,.1,100);n.set_projection(eb,!1);var rb=Z.Im(Z.ae,eb,!1,y,r,Q,la,null,a.Xl);rb.th=q._6();for(qa=0;6>qa;qa++)rb.Jm.push(n.uN());M.Ga(d,
rb);var Rb=K("CUBEMAP","u_cube_reflection",a.Sj,1,1,!1,!1);Rb.Ka=aa.Ca;Rb.La=aa.Ca;A.push(Rb);if(!ca.hA){var ic=K("CUBEMAP","u_sky_reflection",1,1,1,!1);ic.Re=!0;ic.Ka=aa.yj;ic.La=aa.Ca;x.push(ic)}Wa&&(M.ra(d,Wa,rb,J),M.ra(d,Wa,rb,ua));if(ca.MF){var Ka=Z.Im(Z.Sf,eb,!1,y,r,Q,la,null,a.Xl);Ka.th=rb.th;Ka.Jm=rb.Jm;M.Ga(d,Ka);var Xb=K("DEPTH","DEPTH",a.Sj,1,1,!1,!1),Hc=K("COLOR","COLOR",a.Sj,1,1,!1,!1);M.ra(d,rb,Ka,Xb);M.ra(d,rb,Ka,Hc);C.push(Ka);ca.vz.push(Ka);Wa&&(M.ra(d,Wa,Ka,J),M.ra(d,Wa,Ka,ua))}else{var qb=
K("DEPTH","DEPTH",a.Sj,1,1,!1,!1);rb.Mb.push(qb);C.push(rb)}ca.Rj.push(rb)}if(ca&&0<ca.sH.length&&!Qa)for(qa=0;qa<ca.sH.length;qa++)eb=n.rd(Ya,!0),eb.ad=new Float32Array(4),b.Sa.push(eb),rb=Z.Im(Z.Ee,eb,!1,y,r,Q,la,null,a.Xl),M.Ga(d,rb),Rb=K("COLOR","u_plane_reflection",1,a.vi,a.vi,!0,!0),Rb.Ka=aa.Ca,Rb.La=aa.Ca,u.push(Rb),Wa&&(M.ra(d,Wa,rb,J),M.ra(d,Wa,rb,ua)),ca.MF?(Ka=Z.Im(Z.Dg,eb,!1,y,r,Q,la,null,a.Xl),M.Ga(d,Ka),Xb=K("DEPTH","DEPTH",1,a.vi,a.vi,!0,!0),Hc=K("COLOR","COLOR",1,a.vi,a.vi,!0,!0),
Hc.Ka=aa.Ve,Hc.La=aa.Ve,M.ra(d,rb,Ka,Xb),M.ra(d,rb,Ka,Hc),ca.Lw.push([Ka]),w.push(Ka),Wa&&(M.ra(d,Wa,Ka,J),M.ra(d,Wa,Ka,ua))):(qb=K("DEPTH","DEPTH",1,a.vi,a.vi,!0,!0),rb.Mb.push(qb),w.push(rb)),ca.nj.push([rb]);if(E){var Sb=n.rd(Ya,!0);b.Sa.push(Sb);var ma=Z.iO(Sb,r);M.Ga(d,ma);ma.self_shadow_normal_offset=E.self_shadow_normal_offset;for(ab=0;ab<p.length;ab++)sb=p[ab],M.ra(d,sb,ma,v[ab]);if(gb){if(Ib=K("DEPTH","DEPTH",1,1,1,!0,!0),$a){Ib.$g=!0;Ib.Id=!0;var zb=Z.er();M.Ga(d,zb);var Na=K("COLOR","RESOLVE",
1,1,1,!0,!0);Na.$g=!0;Na.Id=!0;var Y=K("DEPTH","RESOLVE",1,1,1,!0,!0);Y.$g=!0;Y.Id=!0;M.ra(d,ma,zb,Na);M.ra(d,ma,zb,Y)}}else $a?Ib=K("DEPTH","DEPTH",1,1,1,!0,!0):ja.Ds?(Ib=K("DEPTH","DEPTH",1,1,1,!0,!0),Ib.Id=!0):Ib=lb;if(t){var Fb=K("COLOR","u_color",1,1,1,!0,!0),Ic=K("DEPTH","u_depth",1,1,1,!0,!0),Ta=n.rd(Ya,!0);b.Sa.push(Ta);var ub=a.TT,Ac=Z.kO(Ta,Q,ub);M.Ga(d,Ac);var mb=K("COLOR","u_ssao_mask",1,1,1,!0,!0);M.ra(d,ma,Ac,Fb);M.ra(d,ma,Ac,Ic);var Cb=n.rd(Ya,!0);b.Sa.push(Cb);var Mc=Z.lO(Cb,ub);M.Ga(d,
Mc);var mc=K("COLOR","u_shadow_mask",1,1,1,!0,!0);M.ra(d,Ac,Mc,mb);M.ra(d,ma,Mc,Ic)}Wa&&(M.ra(d,Wa,ma,J),M.ra(d,Wa,ma,ua))}else ma=null;var ob=Z.Im(Z.ic,Ya,!gb,y,r,Q,la,null,a.Xl);M.Ga(d,ob);E&&(gb?M.ra(d,ma,ob,Ib):ma.Mb.push(Ib));if($a){var cb=Z.er();M.Ga(d,cb);m.push(cb);var oc=K("COLOR","RESOLVE",1,1,1,!0,!0);oc.$g=!0;oc.Id=!0;var gc=K("DEPTH","RESOLVE",1,1,1,!0,!0);gc.$g=!0;gc.Id=!0;M.ra(d,ob,cb,oc);M.ra(d,ob,cb,gc)}else m.push(ob);ma&&(mb?M.ra(d,Mc,ob,mc):M.ra(d,gb&&$a?zb:ma,ob,K("COLOR","u_shadow_mask",
1,1,1,!0,!0)));Wa&&(M.ra(d,Wa,ob,J),M.ra(d,Wa,ob,ua));if(w.length)for(var jb=w.length,qa=0;qa<jb;qa++)M.ra(d,w[qa],ob,u[qa]);if(C.length)for(qa=0;qa<C.length;qa++)M.ra(d,C[qa],ob,A[qa]);k=m;m=[];if(!Qa&&a.dN){var Gb=oa.enabled&&(oa.Vs===Z.xf||oa.Vs===Z.Uh),eb=n.rd(Ya,!0);Gb||(eb.width=eb.height=1);b.Sa.push(eb);var ac=Z.HE(eb,!1,r);M.Ga(d,ac);if(a.Hi){eb=n.rd(Ya,!0);Gb||(eb.width=eb.height=1);b.Sa.push(eb);var tb=Z.HE(eb,!0,r);M.Ga(d,tb);M.ra(d,ac,tb,K("COLOR","COLOR",1,1,1,Gb,!0));M.ra(d,ac,tb,K("DEPTH",
"DEPTH",1,1,1,Gb,!0))}}else ac=null;if(!W.refractions&&!Ma||Qa)pb=null;else{if($a)pb=cb;else{if(ja.Mv)var pb=Z.ld("NONE"),$b=K("COLOR","u_color",1,1,1,!0,!0);else pb=Z.rz(),$b=K("COLOR","COPY",1,1,1,!0,!0);M.Ga(d,pb);M.ra(d,k[0],pb,$b)}var Fc=K("COLOR","u_refractmap",1,1,1,!0,!0)}if(Ja&&(Ma||B||L)){var dc=n.rd(Ya,!0);b.Sa.push(dc);var pc=Z.WN(dc);M.Ga(d,pc);M.ra(d,$a?cb:ob,pc,K("DEPTH","u_depth",1,1,1,!0,!0));var Gc=K("COLOR","u_scene_depth",1,1,1,!0,!0);Gc.Ka=aa.Ve;Gc.La=aa.Ve}else pc=null;if(a.uv){var kb=
f(Z.Kd);m.push(kb);k=m;m=[]}if(a.glow_materials){var Hb=n.rd(Ya,!0);b.Sa.push(Hb);var xb=Z.Im(Z.De,Hb,!1,y,r,Q,la);M.Ga(d,xb);pc&&M.ra(d,pc,xb,Gc);pb&&M.ra(d,pb,xb,Fc);Wa&&(M.ra(d,Wa,xb,J),M.ra(d,Wa,xb,ua));if(w.length)for(jb=w.length,qa=0;qa<jb;qa++)M.ra(d,w[qa],xb,u[qa]);if(C.length)for(qa=0;qa<C.length;qa++)M.ra(d,C[qa],xb,A[qa]);a.uv&&M.ra(d,xb,kb,K("SCREEN","NONE",0,0,0,!1,!1));M.ra(d,$a?cb:ob,xb,$a?yb:lb);var Ob=Z.ld("X_GLOW_BLUR");Ob.fc="GLOW_MASK_SMALL";Ob.sf=a.Zi.small_glow_mask_width;var Wb=
K("COLOR","u_color",1,1,1,!0,!0);Wb.Ka=aa.Ca;Wb.La=aa.Ca;M.Ga(d,Ob);M.ra(d,xb,Ob,Wb);var bc=Z.ld("Y_GLOW_BLUR");bc.fc="GLOW_MASK_SMALL";bc.sf=a.Zi.small_glow_mask_width;var Cc=K("COLOR","u_color",1,.5,.5,!0,!0);Cc.Ka=aa.Ca;Cc.La=aa.Ca;M.Ga(d,bc);M.ra(d,Ob,bc,Cc);var Ec=Z.ld("X_GLOW_BLUR");Ec.fc="GLOW_MASK_LARGE";Ec.sf=a.Zi.large_glow_mask_width;var lc=K("COLOR","u_color",1,.5,.5,!0,!0);lc.Ka=aa.Ca;lc.La=aa.Ca;M.Ga(d,Ec);M.ra(d,bc,Ec,lc);var Zc=Z.ld("Y_GLOW_BLUR");Zc.fc="GLOW_MASK_LARGE";Zc.sf=a.Zi.large_glow_mask_width;
var id=K("COLOR","u_color",1,.25,.25,!0,!0);id.Ka=aa.Ca;id.La=aa.Ca;M.Ga(d,Zc);M.ra(d,Ec,Zc,id);var Id=n.rd(Ya,!0);b.Sa.push(Id);var hc=Z.XN(Id,a);M.Ga(d,hc);var Uc=K("COLOR","u_src_color",1,1,1,!0,!0);Uc.Ka=aa.Ca;Uc.La=aa.Ca;if(a.uv)if($a){var Td=Z.er();M.Ga(d,Td);M.ra(d,kb,Td,oc);M.ra(d,kb,Td,gc);M.ra(d,Td,hc,Uc)}else M.ra(d,kb,hc,Uc);else M.ra(d,$a?cb:ob,hc,Uc);var jd=K("COLOR","u_glow_mask_small",1,.5,.5,!0,!0);jd.Ka=aa.Ca;jd.La=aa.Ca;M.ra(d,bc,hc,jd);var be=K("COLOR","u_glow_mask_large",1,.25,
.25,!0,!0);be.Ka=aa.Ca;be.La=aa.Ca;M.ra(d,Zc,hc,be);k=[hc];m=[]}a.uv||(kb=f(Z.Kd),m.push(kb),k=m,m=[]);if(ja.debug_view){eb=n.rd(Ya,!0);b.Sa.push(eb);var kd=Z.VN(eb);m.push(kd);M.Ga(d,kd);M.ra(d,k[0],kd,wb);M.ra(d,k[0],kd,lb);Wa&&(M.ra(d,Wa,kd,J),M.ra(d,Wa,kd,ua));ka.YS(kd);k=m;m=[]}if($a){var Ud=Z.er();M.Ga(d,Ud);m.push(Ud);M.ra(d,k[0],Ud,oc);M.ra(d,k[0],Ud,gc);k=m;m=[]}var re=k.slice(0);if(!Qa&&a.GL){eb=n.rd(Ya,!0);b.Sa.push(eb);var Vd=Z.QN(eb);M.Ga(d,Vd);M.ra(d,k[0],Vd,$a?yb:lb)}if(G&&Ja&&!Qa){var vd=
X.Al,De=X.intensity,wd=X.Ul,cc=k[0],ce=y?!0:!1,Ee=K("DEPTH","u_input",1,1,1,!0,!0),Oc=K("COLOR","u_input",1,.25,.25,!0,!0);Oc.Ka=aa.Ca;Oc.La=aa.Ca;var jc=vd/wd,xd=n.rd(Ya,!0);b.Sa.push(xd);var ld=Z.sz(xd,ce,vd,!0,jc,r,wd);M.Ga(d,ld);M.ra(d,cc,ld,Ee);var jc=vd/wd*.5,yd=n.rd(Ya,!0);b.Sa.push(yd);var $c=Z.sz(yd,ce,vd,!1,jc,r,wd);M.Ga(d,$c);M.ra(d,ld,$c,Oc);var jc=vd/wd*.25,wc=n.rd(Ya,!0);b.Sa.push(wc);var Kb=Z.sz(wc,ce,vd,!1,jc,r,wd);M.Ga(d,Kb);M.ra(d,$c,Kb,Oc);var Tb=Z.YN(De,r);m.push(Tb);M.Ga(d,Tb);
var Yb=K("COLOR","u_main",1,1,1,!0,!0);Yb.Ka=aa.Ca;Yb.La=aa.Ca;M.ra(d,cc,Tb,Yb);var Lb=K("COLOR","u_god_rays",1,1,1,!0,!0);Lb.Ka=aa.Ca;Lb.La=aa.Ca;M.ra(d,Kb,Tb,Lb);k=m;m=[]}if(N&&!Qa){var cc=k[0],Pb=Z.aO();M.Ga(d,Pb);Yb=K("COLOR","u_input",1,1,1,!0,!0);Yb.Ka=aa.Ca;Yb.La=aa.Ca;M.ra(d,cc,Pb,Yb);var Pc=N.key,zd=N.edge_lum,ad=n.rd(Ya,!0);b.Sa.push(ad);var Qb=Z.bO(Pc,zd,r,ad);M.Ga(d,Qb);var ec=K("COLOR","u_luminance",1,.25,.25,!0,!0);ec.Ka=aa.Ca;ec.La=aa.Ca;if(N.adaptive){var Ub=Z.RN();M.Ga(d,Ub);Ub.qa.width=
1;Ub.qa.height=1;var Qc=K("COLOR","u_input",1,.25,.25,!0,!0);Qc.Re=!0;Qc.Ka=aa.yj;Qc.La=aa.Ca;if(ja.Nb)ec.Re=!0,ec.Ka=aa.yj,M.ra(d,Pb,Ub,Qc);else{var Rc=Z.HN(),md=K("COLOR","u_color",1,.25,.25,!0,!0);M.Ga(d,Rc);M.ra(d,Pb,Rc,md);M.ra(d,Rc,Ub,Qc)}M.ra(d,Ub,Qb,K("COLOR","u_average_lum",1,1,1,!1,!1));Qb.sm=!0}else Qb.sm=!1,Qb.average_luminance=N.average_luminance;M.ra(d,cc,Qb,K("COLOR","u_main",1,1,1,!0,!0));M.ra(d,Pb,Qb,ec);for(var bd=Qb,uc=1,Db=[],ab=0;5>ab;ab++)Ob=Z.ld("X_BLOOM_BLUR"),Ob.sf=a.Zi.small_glow_mask_width,
Wb=K("COLOR","u_color",1,uc,uc,!0,!0),Wb.Ka=aa.Ca,Wb.La=aa.Ca,M.Ga(d,Ob),M.ra(d,bd,Ob,Wb),uc/=2,bc=Z.ld("Y_BLOOM_BLUR"),bc.sf=a.Zi.small_glow_mask_width,Cc=K("COLOR","u_color",1,uc,uc,!0,!0),Cc.Ka=aa.Ca,Cc.La=aa.Ca,M.Ga(d,bc),M.ra(d,Ob,bc,Cc),bd=bc,bc.lo=uc,Ob.lo=uc,Db.push(bc,uc);var qc=Z.SN(N.blur);M.Ga(d,qc);for(ab=0;ab<Db.length;ab+=2){var bc=Db[ab],Mb=Db[ab+1],jd=K("COLOR","u_bloom_level_"+(ab/2).toString(),1,Mb,Mb,!0,!0);jd.Ka=aa.Ca;jd.La=aa.Ca;M.ra(d,bc,qc,jd)}M.ra(d,cc,qc,K("COLOR","u_main",
1,1,1,!0,!0));m.push(qc);k=m;m=[]}if(Ca&&Ja&&!Qa){var cc=k[0],Ab=n.rd(Ya,!0);b.Sa.push(Ab);var nd=ja.wI&&ja.aE,rc=e.dof_bokeh&&nd;if(rc){var Vb=aa.Ve,fc=K("COLOR","u_color",1,1,1,!0,!0);fc.Ka=Vb;fc.La=Vb;var fb=K("DEPTH","u_depth",1,1,1,!0,!0),Zb=K("COLOR","u_color",1,.5,.5,!0,!0);Zb.wr=!0;Zb.Ka=aa.Ve;Zb.La=aa.Ve;var Bb=K("COLOR","u_color",1,.5,.5,!0,!0);Bb.wr=!0;Bb.Ka=aa.Ve;Bb.La=aa.Ve;var Sc=K("COLOR","u_blurred1",1,.5,.5,!0,!0);Sc.wr=!0;Sc.Ka=Vb;Sc.La=Vb;var Jb=K("COLOR","u_blurred2",1,.5,.5,!0,
!0);Jb.wr=!0;Jb.Ka=Vb;Jb.La=Vb;var xc=re[0];if(e.qe){var sc=n.rd(Ya,!0);b.Sa.push(sc);var Tc=Z.qz(sc,"COC_FOREGROUND");sc.dof_distance=e.dof_distance;sc.dof_object=e.dof_object;sc.dof_front_start=e.dof_front_start;sc.dof_front_end=e.dof_front_end;sc.dof_rear_start=e.dof_rear_start;sc.dof_rear_end=e.dof_rear_end;sc.dof_power=e.dof_power;sc.dof_bokeh=e.dof_bokeh;sc.dof_bokeh_intensity=e.dof_bokeh_intensity;sc.qe=e.qe;sc.dof_on=!0;M.Ga(d,Tc);M.ra(d,cc,Tc,fc);M.ra(d,xc,Tc,fb);var Vc=Z.ld("X_ALPHA_BLUR");
M.Ga(d,Vc);M.ra(d,Tc,Vc,Zb);var Wc=Z.ld("Y_ALPHA_BLUR");M.Ga(d,Wc);M.ra(d,Vc,Wc,Bb);var ib=n.rd(Ya,!0),Nb=Z.qz(ib,"COC_COMBINE");b.Sa.push(ib);ib.dof_distance=e.dof_distance;ib.dof_object=e.dof_object;ib.dof_front_start=e.dof_front_start;ib.dof_front_end=e.dof_front_end;ib.dof_rear_start=e.dof_rear_start;ib.dof_rear_end=e.dof_rear_end;ib.dof_power=e.dof_power;ib.dof_bokeh=e.dof_bokeh;ib.dof_bokeh_intensity=e.dof_bokeh_intensity;ib.qe=e.qe;ib.dof_on=!0;M.Ga(d,Nb);M.ra(d,cc,Nb,fc);M.ra(d,xc,Nb,fb);
M.ra(d,Wc,Nb,K("COLOR","u_coc_fg",1,.5,.5,!0,!0))}else ib=n.rd(Ya,!0),b.Sa.push(ib),Nb=Z.qz(ib,"COC_ALL"),ib.dof_distance=e.dof_distance,ib.dof_object=e.dof_object,ib.dof_front_start=e.dof_front_start,ib.dof_front_end=e.dof_front_end,ib.dof_rear_start=e.dof_rear_start,ib.dof_rear_end=e.dof_rear_end,ib.dof_power=e.dof_power,ib.dof_bokeh=e.dof_bokeh,ib.dof_bokeh_intensity=e.dof_bokeh_intensity,ib.qe=e.qe,ib.dof_on=!0,M.Ga(d,Nb),M.ra(d,cc,Nb,fc),M.ra(d,xc,Nb,fb);var Eb=Z.ld("X_DOF_BLUR");Eb.qa.dof_bokeh_intensity=
e.dof_bokeh_intensity;M.Ga(d,Eb);M.ra(d,Nb,Eb,Zb);var cd=Z.ld("Y_DOF_BLUR");cd.qa.dof_bokeh_intensity=e.dof_bokeh_intensity;M.Ga(d,cd);M.ra(d,Eb,cd,Bb);var dd=Z.ld("Y_DOF_BLUR");dd.qa.dof_bokeh_intensity=e.dof_bokeh_intensity;M.Ga(d,dd);M.ra(d,Eb,dd,Bb);var yc=Z.IE(Ab,rc);Ab.dof_distance=e.dof_distance;Ab.dof_object=e.dof_object;Ab.dof_front_start=e.dof_front_start;Ab.dof_front_end=e.dof_front_end;Ab.dof_rear_start=e.dof_rear_start;Ab.dof_rear_end=e.dof_rear_end;Ab.dof_power=e.dof_power;Ab.dof_bokeh=
e.dof_bokeh;Ab.dof_bokeh_intensity=e.dof_bokeh_intensity;Ab.qe=e.qe;Ab.dof_on=!0;m.push(yc);M.Ga(d,yc);M.ra(d,cc,yc,K("COLOR","u_sharp",1,1,1,!0,!0));M.ra(d,cd,yc,Sc);M.ra(d,dd,yc,Jb)}else{var od=K("COLOR","u_color",1,1,1,!0,!0);od.Ka=aa.Ca;od.La=aa.Ca;var Jd=K("COLOR","u_color",1,1,1,!0,!0);Jd.Ka=aa.Ca;Jd.La=aa.Ca;Eb=Z.ld("X_BLUR");M.Ga(d,Eb);M.ra(d,cc,Eb,od);var kc=Z.ld("Y_BLUR");M.Ga(d,kc);M.ra(d,Eb,kc,Jd);var Ad=re[0],yc=Z.IE(Ab,rc);Ab.dof_distance=e.dof_distance;Ab.dof_object=e.dof_object;Ab.dof_front_start=
e.dof_front_start;Ab.dof_front_end=e.dof_front_end;Ab.dof_rear_start=e.dof_rear_start;Ab.dof_rear_end=e.dof_rear_end;Ab.dof_power=e.dof_power;Ab.dof_bokeh=e.dof_bokeh;Ab.dof_bokeh_intensity=e.dof_bokeh_intensity;Ab.qe=e.qe;Ab.dof_on=!0;m.push(yc);M.Ga(d,yc);M.ra(d,cc,yc,K("COLOR","u_sharp",1,1,1,!0,!0));M.ra(d,kc,yc,K("COLOR","u_blurred",1,1,1,!0,!0));M.ra(d,Ad,yc,K("DEPTH","u_depth",1,1,1,!0,!0))}k=m;m=[]}if(a.Hi){var tc=f(Z.mh);m.push(tc);k=m;m=[]}if(R&&!Qa){var Wd=k[0],vc=Z.cO(wa.mb_decay_threshold,
wa.mb_factor);m.push(vc);M.Ga(d,vc);M.ra(d,Wd,vc,K("COLOR","u_mb_tex_curr",1,1,1,!0,!0));vc.Mb.push(K("COLOR","u_mb_tex_accum",1,1,1,!0,!0));k=m;m=[]}if(!Qa&&a.outline){var cc=k[0],pd=n.rd(Ya,!0);b.Sa.push(pd);var ed=Z.eO(pd,r);M.Ga(d,ed);var Jc=Z.ld("X_EXTEND"),Bc=K("COLOR","u_color",1,1,1,!0,!0),Bd=K("COLOR","u_outline_mask",1,1,1,!0,!0);Bd.Ka=aa.Ca;Bd.La=aa.Ca;Jc.en=!0;M.Ga(d,Jc);M.ra(d,ed,Jc,Bc);var Cd=K("COLOR","u_color",1,.5,.5,!0,!0);Cd.Ka=aa.Ca;Cd.La=aa.Ca;var qd=Z.ld("Y_EXTEND");qd.en=!0;
M.Ga(d,qd);M.ra(d,Jc,qd,Cd);Eb=Z.ld("X_BLUR");Eb.en=!0;M.Ga(d,Eb);M.ra(d,qd,Eb,Cd);var fd=K("COLOR","u_color",1,.25,.25,!0,!0);fd.Ka=aa.Ca;fd.La=aa.Ca;var gd=K("COLOR","u_outline_mask_blurred",1,.25,.25,!0,!0);gd.Ka=aa.Ca;gd.La=aa.Ca;kc=Z.ld("Y_BLUR");kc.en=!0;M.Ga(d,kc);M.ra(d,Eb,kc,fd);var Xc=Z.dO(Ea);M.Ga(d,Xc);var Kd=K("COLOR","u_outline_src",1,1,1,!0,!0);Kd.Ka=aa.Ca;Kd.La=aa.Ca;M.ra(d,cc,Xc,Kd);M.ra(d,ed,Xc,Bd);M.ra(d,kc,Xc,gd);m.push(Xc);k=m;m=[]}h(d,Ja);if((a.anaglyph_use||a.Iv||a.Ms)&&!Qa){var Ld=
U(d,a,b,k[0]);m.push(Ld);k=m;m=[]}if(V&&!Qa){var cc=k[0],Md=Z.UN(T.brightness,T.contrast,T.exposure,T.saturation),zc=K("COLOR","u_color",1,1,1,!0,!0);zc.Ka=aa.Ca;zc.La=aa.Ca;(a.anaglyph_use||a.Iv||a.Ms)&&!Qa&&(zc.em=!0);M.Ga(d,Md);M.ra(d,cc,Md,zc);m.push(Md);k=m;m=[]}if(!k[0].Gc||k[0].type==Z.Ii||k[0].type==Z.Dt){var rd=Z.ld("NONE");M.Ga(d,rd);var Nd=K("COLOR","u_color",1,1,1,!0,!0);Nd.Ka=aa.Ca;Nd.La=aa.Ca;M.ra(d,k[0],rd,Nd);m.push(rd);k=m;m=[]}if(O){cc=k[0];if(ja.smaa){var Od=K("COLOR","u_color",
1,1,1,!0,!1);Od.Ka=aa.Ca;Od.La=aa.Ca;var de=Z.uz(Z.Et,a);M.Ga(d,de);M.ra(d,cc,de,Od);var Pd=Z.uz(Z.uq,a);M.Ga(d,Pd);M.ra(d,de,Pd,Od);var ee=K("COLOR","u_search_tex",1,1,1,!1,!1),fe=K("COLOR","u_area_tex",1,1,1,!1,!1);ee.Ka=aa.Ca;ee.La=aa.Ca;fe.Ka=aa.Ca;fe.La=aa.Ca;Pd.Mb.push(ee);Pd.Mb.push(fe);var Xd=Z.uz(Z.Ft,a);M.Ga(d,Xd);M.ra(d,cc,Xd,Od);var ge=K("COLOR","u_blend",1,1,1,!0,!1);ge.Ka=aa.Ca;ge.La=aa.Ca;M.ra(d,Pd,Xd,ge);m.push(Xd)}else{var he=Z.PN(a);M.Ga(d,he);var Yd=K("COLOR","u_color",1,1,1,!0,
!1);Yd.Ka=aa.Ca;Yd.La=aa.Ca;(a.anaglyph_use||a.Iv||a.Ms)&&!Qa&&(Yd.em=!0);M.ra(d,cc,he,Yd);m.push(he)}k=m;m=[]}m.push(k[0]);ac&&(tb?m.push(tb):m.push(ac));Vd&&m.push(Vd);nb=1;if(a.mx.uB){var Fe=a.mx,se=a.mm,te=se.Cn,nb=te?te.xI:nb,Kc=Z.jO(se,r,Fe,nb);M.Ga(d,Kc);m.push(Kc);x.length&&(M.ra(d,Kc,ob,x[0]),kb&&M.ra(d,Kc,kb,x[0]),xb&&M.ra(d,Kc,xb,x[0]),tc&&M.ra(d,Kc,tc,x[0]));if(ca.tQ)if(ja.Nb&&!ja.is_mobile_device){var hd=Z.$N(r,nb);M.Ga(d,hd);var Dc=K("CUBEMAP","u_sky_reflection",nb,1,1,!1);Dc.Re=!0;
Dc.Ka=aa.yj;Dc.La=aa.Ca;M.ra(d,Kc,hd,Dc);var sd=K("CUBEMAP","u_irradiance",32,1,1,!1);sd.Re=!1;sd.Ka=aa.Ca;sd.La=aa.Ca;M.ra(d,hd,ob,sd);kb&&M.ra(d,hd,kb,sd);xb&&M.ra(d,hd,xb,sd);tc&&M.ra(d,hd,tc,sd);m.push(hd);var Dd=Z.gO(r);M.Ga(d,Dd);M.ra(d,Kc,Dd,Dc);var td=K("CUBEMAP","u_cube_r_convolution",128,1,1,!1);td.Re=!1;td.Ka=aa.yj;td.La=aa.Ca;M.ra(d,Dd,ob,td);kb&&M.ra(d,Dd,kb,td);xb&&M.ra(d,Dd,xb,td);tc&&M.ra(d,Dd,tc,td);var Qd=Z.TN();M.Ga(d,Qd);var Ed=K("COLOR","u_brdf",512,1,1,!1);Ed.Ka=aa.Ca;Ed.La=
aa.Ca;M.ra(d,Qd,ob,Ed);kb&&M.ra(d,Qd,kb,Ed);xb&&M.ra(d,Qd,xb,Ed);tc&&M.ra(d,Qd,tc,Ed)}else Dc=K("CUBEMAP","u_sky_reflection",nb,1,1,!1),Dc.Re=!0,Dc.Ka=aa.yj,Dc.La=aa.Ca,M.ra(d,Kc,ob,Dc),kb&&M.ra(d,Kc,kb,Dc),xb&&M.ra(d,Kc,xb,Dc),tc&&M.ra(d,Kc,tc,Dc)}var Yc=Z.JE();M.Ga(d,Yc);for(ab=0;ab<m.length;ab++){var Fd=m[ab];Fd.Qb=!0;switch(Fd.type){case Z.xf:case Z.Uh:M.ra(d,Fd,Yc,K("COLOR","NONE",1,1,1,Gb,!1));M.ra(d,Fd,Yc,K("DEPTH","NONE",1,1,1,Gb,!1));break;case Z.Ue:M.ra(d,Fd,Yc,K("CUBEMAP","u_sky",nb,1,
1,!1));break;case Z.Tk:var Zd=K("CUBEMAP","u_irradiance",nb,1,1,!1);Zd.Re=!0;Zd.Ka=aa.Ve;Zd.La=aa.Ve;M.ra(d,hd,Yc,Zd);break;case Z.Xn:M.ra(d,Fd,Yc,K("COLOR","NONE",1,1,1,!0,!1));break;default:if(Qa){var ue=g[0],Rd=K("COLOR","OFFSCREEN",1,1,1,!0,!0);Rd.wb=ue;M.ra(d,m[ab],Yc,Rd);for(qa=1;qa<g.length;qa++){var ve=g[qa],ie=Z.ld("NONE");M.Ga(d,ie);M.ra(d,m[ab],ie,K("COLOR","SCALE",1,1,1,!0,!0));var we=ve.Bk/ue.Bk,Rd=K("COLOR","OFFSCREEN",1,we,we,!0,!0);Rd.wb=ve;M.ra(d,ie,Yc,Rd)}}else M.ra(d,m[ab],Yc,K("SCREEN",
"NONE",1,1,1,!0,!1))}}cb&&!z(d,cb).length&&(M.ng(d,M.nk(d,cb)),M.gz(d));h(d,Ja);l(d,Ja);if(oa.enabled){var xe=I(d);xe&&da(d,xe)}c(d);H(d);E&&M.Oa(d,function(a,b){if(b.type==Z.Eg||b.type==Z.Kd||b.type==Z.mh){for(var c=0,e=F(d,b),g=0,h=0;h<e.length;h++){var f=e[h];f.type==Z.be&&(g++,b.qk=b.qk||[],b.qk[0<f.gh?f.gh:c]=f.qa.gc,c++)}b.aq&&b.$p||(ja.hw?b.ot=new Float32Array(9*g):(b.aq=new Float32Array(4*g),b.$p=new Float32Array(4*g)))}});if(!ca.hA)for(ab=0;ab<A.length;ab++)A[ab].active=!1;return d};d.IR=
function(a,b,c){var e=[];M.Oa(a,function(b,c){if(-1==Ca.indexOf(c.type)&&c.Mb.length&&R(a,c,Z.nh))for(var g=0;g<c.Mb.length;g++){var h=c.Mb[g];-1==e.indexOf(h)&&e.push(h)}});M.Th(a,function(b,c,g){b=M.Ib(a,b);c=M.Ib(a,c);-1==Ca.indexOf(b.type)&&R(a,c,Z.nh)&&-1==e.indexOf(g)&&e.push(g)});for(var g=0;g<e.length;g++)e[g].zk*=b,e[g].Ak*=c};d.ye=function(a,b,c){var e=a.sf;a.Xs[0]=b*a.nc[0]*e;a.Xs[1]=c*a.nc[1]*e};d.Vd=function(a,b){a.sf=b};d.EN=function(){var a=M.create(),b=Z.fO(),e=n.kd(n.Wc);e.width=
512;e.height=512;b.qa=e;M.Ga(a,b);b.Mb.push(K("COLOR","u_color",512,1,1,!1,!1));e=Z.JE();M.Ga(a,e);M.ra(a,b,e,K("COLOR","NONE",512,1,1,!1,!1));c(a);H(a);return a};d.aP=function(a){var b=null;M.Oa(a,function(a,c){return c.qa&&null===c.qa.Ff?(b=c,!0):!1});return b};d.zd=function(a,b,c){a=F(a,b);for(b=0;b<a.length;b++)if(a[b].type==c)return a[b];return null};d.ov=function(a,b,c){a=F(a,b);b=[];for(var e=0;e<a.length;e++)a[e].type==c&&b.push(a[e]);return b};d.lX=R;d.nX=V;d.XP=F;d.bQ=z;d.wc=function(a,
b){var c=null;M.Oa(a,function(a,e){return e.type==b?(c=e,!0):!1});return c};d.vO=function(a){var b="digraph scenegraph {\n",b=b+"    ",b=b+'size="11.7,16.5";\n',b=b+"    ",b=b+'ratio="fill";\n',b=b+"    ",b=b+'node [shape=box margin="0.25,0.055"];\n',c=w(a);M.Oa(a,function(a,e){var g=b+="    ",h=Z.Gx(e);if(e.qa){for(var h=h+"\\n",f=0;f<c.length;f+=2){var d=e.qa.vc;c[f]==d&&(h=aa.So(d)?h+("CR"+c[f+1]+" "):h+("C"+c[f+1]+" "))}for(f=0;f<c.length;f+=2)d=e.qa.dg,c[f]==d&&(h=aa.So(d)?h+("DR"+c[f+1]):h+
("D"+c[f+1]))}e.Mb.length&&(h+="\\n-----\\n");for(f=0;f<e.Mb.length;f++)h+=W(e.Mb[f],c);b=g+(String(a)+' [label="'+h+'" color="black" style="'+((e.type==Z.Uk?"dotted":e.enqueue?"solid":"dashed")+",bold")+'"];\n')});M.Th(a,function(a,e,g){b+="    ";b+=String(a)+" -> "+String(e)+' [label="'+W(g,c)+'" style="'+(g.active?"solid":"dotted")+'"];\n'});return b+="}"};d.GN=function(a){a=M.hU(a);for(var b=[],c=0;c<a.length;c++){var e=a[c];e.enqueue&&b.push(e)}return b}});t.a=d},function(E,t,d){E=d(0);var O=
d(31),T=d(1),G=d(2),r=d(4);d=Object(E.a)("__loader",function(f,d){function k(a,b,c,e){var h=C,f=la.create(),k;for(k in b){var l=x(b[k]);if(e&&l.Ac||!a&&l.Nc)l.Ns=!0;la.Ga(f,l)}for(k in b)for(l=b[k],l.name=k,a=0;a<l.inputs.length;a++)la.ra(f,b[l.inputs[a]],l,null);b=x({name:"out",oc:d.wJ,Dc:function(a,b,c,e,f){b.rc&&(h.TB=!0);t(b)||(b.status=2);b.yG(b.id,!0);f(b,c);v.log("%cTHREAD "+b.id+": LOADED CALLBACK","color: #f0f;")},Bc:5});if(c)c=la.Hr(f);else{k=la.clone(f);do{c=la.Hr(k);l=[];for(a=0;a<c.length;a++){e=
c[a];var m=la.Ib(k,e);m.uc&&l.push(e)}for(a=0;a<l.length;a++)la.ng(k,l[a]);l.length&&la.gz(k)}while(l.length)}la.Ga(f,b);for(a=0;a<c.length;a++)e=c[a],m=la.Ib(f,e),b.inputs.push(m.name),la.ra(f,m,b,null);return f}function x(a){a.uc=a.uc||!1;a.oc||0===a.oc||(a.oc=a.Fe);a.inputs=a.inputs||[];a.cn=a.cn||!1;a.Ns=a.Ns||!1;a.Bc=a.Bc||0;a.Ac=a.Ac||!1;a.Nc=a.Nc||!1;a.status=0;a.KX=0;a.xG=0;a.Sq=a.Sq||null;return a}function m(a,b,c){b.vE(c,b);b.status=3;a.Oy--;B.debug_loading&&v.log("%cTHREAD "+b.id+": 100% LOADING END "+
Math.round(performance.now()-b.Ys)+"ms","color: #f0f;");b.RB=null;b.vE=null;B.debug_loading||(b.Qh=null);b.Ek=null}function p(a,b){for(var c=[],e=[],h=0;h<b.length;h++){var f=b[h];la.Ib(a.Qh,f).cn&&(la.bm(a.Qh,f,function(e){var h=!0;la.Lk(a.Qh,e,function(a,b){if(!b.cn)return h=!1,1});h&&-1==c.indexOf(e)&&-1==b.indexOf(e)&&c.push(e)}),e.push(h))}for(h=e.length-1;0<=h;h--)b.splice(e[h],1);return c}function q(a){function b(b,c){var e=la.Ib(a.Qh,b),h=la.Ib(a.Qh,c),f=h.oc-e.oc;f||(f=e.uc-h.uc);return f}
var c=[],e=a.Ek,h=!1;do{var f=p(a,e);c.push.apply(c,e);0<f.length&&(h=!0);e=f}while(0<f.length);h&&c.sort(b);a.Ek=c;return a.Ek.length}function b(a,b,c){if(b.Ns)return b.cn=!0,B.debug_loading&&v.log("%cTHREAD "+a.id+": SKIP STAGE "+b.name,"color: #f0f;"),h(a,b),!1;if(B.debug_loading&&0==b.status){var e=u(a);v.log("%cTHREAD "+a.id+": "+e+"% "+("LOADING START "+b.name)+" "+Math.round(performance.now()-a.Ys)+"ms ","color: #f0f;")}if(!b.Dc&&!b.$k&&!b.Rq)return h(a,b),!1;if(0==b.status&&(b.status++,b.Dc))return b.Dc(c,
a,b,b.Sq,h,l),!0;if(1==b.status){if(b.$k)return b.$k(c,a,b,b.Sq,h,l),!0;b.status++}return 2==b.status&&(b.status++,b.Rq)?(b.Rq(c,a,b,b.Sq,h,l),!0):!1}function u(a){if(0==a.zx)return 100;var b=0;la.Oa(a.Qh,function(c,e){a.do_not_load_resources&&e.Ac||(b+=e.xG*e.Bc)});return G._63(100*b/a.zx)}function h(a,b){b.cn=!0;b.status=3;e(a,b,1);if(B.debug_loading){var c=u(a);v.log("%cTHREAD "+a.id+": "+c+"% "+("LOADING END "+b.name)+" "+Math.round(performance.now()-a.Ys)+"ms ","color: #f0f;")}}function l(a,
b,c){1>c?e(a,b,c):b.status++}function e(a,b,c){var e=C;if(b.Dc||b.$k||b.Rq)if(b.xG=c,b=u(a),a.NE!=b||1==c)a.RB(b,performance.now()-a.Ys,a.id),a.NE=b,e.EA=!0}function c(a,b){var c=null;la.Oa(a.Qh,function(a,e){if(e.name==b)return c=e,1});return c}function a(){return 0==C.Oy}function t(a){return a&&(3==a.status||4==a.status)}var la=Object(O.a)(f),v=Object(T.a)(f),B=Object(r.a)(f).wa;d.Fe=0;d.lh=1;d.wJ=2;var C=null;d.Wz=function(){return C};d.GE=function(){var a={tg:[],yz:0,Oy:0,TB:!1,EA:!1};return C=
a};d.KE=function(a,b,c,e,h,f,d,l,m){var p=C,q=p.tg.length,v={id:q,rc:0==q,status:0,Yi:b,MD:"",yG:c||function(){},wG:l||!1,yY:f,Ys:0,NE:0,zx:0,xB:!1,RB:e||function(){},vE:h||function(){},Qh:null,Ek:null,jA:!1,gA:!1,oA:!1,Vg:m};a=k(v.rc,a,f,d);v.Qh=a;b=[];c=la.cQ(a);for(e=0;e<c.length;e++)b.push(c[e]);v.Ek=b;la.Oa(a,function(a,b){!(b.Dc||b.$k||b.Rq)||v.do_not_load_resources&&b.Ac||(v.zx+=b.Bc)});p.tg.push(v);p.Oy++;return v.id};d.KU=function(c){var e=C;if(e&&!a())if(e.EA)e.EA=!1;else{var h=performance.now();
do{var f=e.tg[e.yz],k=c[f.id];if(!t(f))if(0==f.status&&(f.status=1,f.Ys=performance.now(),f.RB(0,0,f.id),B.debug_loading&&v.log("%cTHREAD "+f.id+": 0% LOADING START 0ms","color: #f0f;")),q(f)){var l=f,p=l.Ek.length;do{var u=la.Ib(l.Qh,l.Ek[0]),x=b(l,u,k);u.oc==d.lh&&(l.xB=!0);u=l.Ek.shift();l.Ek.push(u);p--}while(!x&&0!=p)}else m(e,f,k);e.TB&&(e.yz=(e.yz+1)%e.tg.length);if(f.xB){f.xB=!1;break}}while(16>performance.now()-h)}};d.tD=function(a){var b=C;m(b,a,null);a.status=4;a.rc&&(b.TB=!0);a.yG(a.id,
!1)};d.pY=l;d.ix=function(a,b){var e=c(a,b);null!==e&&(e.Ns=!0)};d.cn=a;d.gU=t;d.is_primary_loaded=function(a){var b=C;if(!b)return!1;a|=0;return b.tg[a]&&(3==b.tg[a].status||2==b.tg[a].status)};d.nQ=function(a){if(B.debug_loading){var b=C;return b&&b.tg[a]&&b.tg[a].Qh?la.PE(b.tg[a].Qh,function(a,b){if(b.Ns)return"SKIPPED\n("+b.name+")";var c=b.name+"\n",e=[];e.push(b.oc==d.lh?"ASYNC":"SYNC");b.uc&&e.push("BKG");b.Ac&&e.push("RES");return c+e.join(" | ")},null):null}v.error("Debug mode isn't enabled. Can not retrieve the graph.")};
d.cleanup=function(){C=null}});t.a=d},function(E,t,d){E=d(0);E=Object(E.a)("__context",function(d,t){var G=null;t.vT=function(d){G=d};t.mv=function(){return G};t.reset=function(){G=null}});t.a=E},function(E,t,d){E=d(0);var O=d(14),T=d(58),G=d(8),r=d(19),f=d(1),k=d(13),y=d(2),x=d(3);d=Object(E.a)("constraints",function(d,p){var m=Object(O.a)(d),b=Object(T.a)(d),u=Object(G.a)(d),h=Object(r.a)(d),l=Object(f.a)(d),e=Object(k.a)(d);p.append_stiff=function(c,a,f,d,k){u.is_dynamic(c)?b.ci(c,a)?b.bi(c,a)?
(f=f||new Float32Array(3),k=k||1,d=d?d:[0,0,0,1],a instanceof Array&&2==a.length?b.UL(c,a[0],a[1],f,d,k):b.AD(c,a,f,d,k),e.Ea(c),h.sync_transform(c)):l.error("Constraint recursion is forbidden."):l.error("Can not apply constraint. Object and target must be different."):l.error('Wrong object: "'+c.name+'" is not dynamic.')};p.append_semi_stiff=function(c,a,f,d,k,m,p,q){u.is_dynamic(c)?b.ci(c,a)?b.bi(c,a)?(k=y._16(k)?k:Math.PI/2,m=y._16(m)?m:-Math.PI/2,p=y._16(p)?p:Math.PI/2,q=y._16(q)?q:-Math.PI/2,
f=f||new Float32Array(3),d=d?new Float32Array(d):null,b.SL(c,a,f,d,k,m,p,q),e.Ea(c),h.sync_transform(c)):l.error("Constraint recursion is forbidden."):l.error("Can not apply constraint. Object and target must be different."):l.error('Wrong object: "'+c.name+'" is not dynamic.')};p.append_semi_stiff_cam=function(b,a,e,h,f,d,k,q){l.df("append_semi_stiff_cam","append_semi_stiff");m.is_eye_camera(b)?p.append_semi_stiff(b,a,e,h,f,d,k,q):l.error("append_semi_stiff_cam(): wrong object type, only EYE camera objects can be parented.")};
p.append_semi_soft_cam=function(b,a,e,h){l.df("append_semi_soft_cam","append_semi_soft");m.is_eye_camera(b)?p.append_semi_soft(b,a,e,h):l.error("append_semi_soft_cam(): wrong object type, only EYE camera objects can be parented.")};p.append_semi_soft=function(c,a,f,d){if(u.is_dynamic(c))if(b.ci(c,a))if(b.bi(c,a)){if(!y._16(d)||0>d)d=.25;f=f||new Float32Array(3);b.RL(c,a,f,d);e.Ea(c);h.sync_transform(c)}else l.error("Constraint recursion is forbidden.");else l.error("Can not apply constraint. Object and target must be different.");
else l.error('Wrong object: "'+c.name+'" is not dynamic.')};p.append_stiff_trans=function(c,a,f){u.is_dynamic(c)?b.ci(c,a)?b.bi(c,a)?(f=f||new Float32Array(3),b.VL(c,a,f),e.Ea(c),h.sync_transform(c)):l.error("Constraint recursion is forbidden."):l.error("Can not apply constraint. Object and target must be different."):l.error('Wrong object: "'+c.name+'" is not dynamic.')};p.append_copy_loc=function(c,a,f,d,k){if(u.is_dynamic(c))if(b.ci(c,a))if(b.bi(c,a)){d=d||!1;f=f||"XYZ";k=k||1;var m=e.get_translation(c,
new Float32Array(3)),p=new Float32Array(3);p[0]=-1!=f.indexOf("-X")?-1:-1!=f.indexOf("X")?1:0;p[1]=-1!=f.indexOf("-Y")?-1:-1!=f.indexOf("Y")?1:0;p[2]=-1!=f.indexOf("-Z")?-1:-1!=f.indexOf("Z")?1:0;b.JL(c,a,m,p,d,k);e.Ea(c);h.sync_transform(c)}else l.error("Constraint recursion is forbidden.");else l.error("Can not apply constraint. Object and target must be different.");else l.error('Wrong object: "'+c.name+'" is not dynamic.')};p.append_copy_trans=function(c,a,f){u.is_dynamic(c)?b.ci(c,a)?b.bi(c,
a)?(b.LL(c,a,f||1),e.Ea(c),h.sync_transform(c)):l.error("Constraint recursion is forbidden."):l.error("Can not apply constraint. Object and target must be different."):l.error('Wrong object: "'+c.name+'" is not dynamic.')};p.append_copy_rot=function(c,a,f,d,k){if(u.is_dynamic(c))if(b.ci(c,a))if(b.bi(c,a)){f=f||"XYZ";var m=new Float32Array(3);m[0]=-1!=f.indexOf("-X")?-1:-1!=f.indexOf("X")?1:0;m[1]=-1!=f.indexOf("-Y")?-1:-1!=f.indexOf("Y")?1:0;m[2]=-1!=f.indexOf("-Z")?-1:-1!=f.indexOf("Z")?1:0;b.KL(c,
a,m,d||!1,k||1);e.Ea(c);h.sync_transform(c)}else l.error("Constraint recursion is forbidden.");else l.error("Can not apply constraint. Object and target must be different.");else l.error('Wrong object: "'+c.name+'" is not dynamic.')};p.append_stiff_trans_rot=function(c,a,f,d){u.is_dynamic(c)?b.ci(c,a)?b.bi(c,a)?(f=f||new Float32Array(3),d=d?new Float32Array(d):[0,0,0,1],b.WL(c,a,f,d),e.Ea(c),h.sync_transform(c)):l.error("Constraint recursion is forbidden."):l.error("Can not apply constraint. Object and target must be different."):
l.error('Wrong object: "'+c.name+'" is not dynamic.')};p.append_track=function(c,a,f,d,k,m){if(u.is_dynamic(c))if(b.ci(c,a))if(b.bi(c,a)){var p=y.e;"-Y"==f?p=y.b:"Y"==f?p=y.e:"-X"==f?p=y.a:"X"==f?p=y.d:"-Z"==f?p=y.c:"Z"==f&&(p=y.f);f=y.f;"X"==d?f=y.d:"Y"==d&&(f=y.e);1==Math.abs(x.dot(p,f))?l.error("Can not use parallel vectors for track and up axes."):(b.XL(c,a,p,f,k||!1,m||1),e.Ea(c),h.sync_transform(c))}else l.error("Constraint recursion is forbidden.");else l.error("Can not apply constraint. Object and target must be different.");
else l.error('Wrong object: "'+c.name+'" is not dynamic.')};p.append_follow=function(c,a,f,d){u.is_dynamic(c)?b.ci(c,a)?b.bi(c,a)?(b.OL(c,a,f,d),e.Ea(c),h.sync_transform(c)):l.error("Constraint recursion is forbidden."):l.error("Can not apply constraint. Object and target must be different."):l.error('Wrong object: "'+c.name+'" is not dynamic.')};p.append_stiff_viewport=function(c,a,f){u.is_dynamic(c)?b.ci(c,a)?b.bi(c,a)?(f=f||{},b.append_stiff_viewport(c,a,f),e.Ea(c),h.sync_transform(c)):l.error("Constraint recursion is forbidden."):
l.error("Can not apply constraint. Object and target must be different."):l.error('Wrong object: "'+c.name+'" is not dynamic.')};p.remove=function(c,a){a=a||!1;c.Yc&&b.remove(c,a);a&&e.Ea(c)}});t.a=d},function(E,t,d){E=d(0);var O=d(18);d=Object(E.a)("time",function(d,t){var r=Object(O.a)(d);t.set_timeout=r.set_timeout;t.clear_timeout=r.clear_timeout;t.get_timeline=r.get_timeline;t.animate=r.animate;t.clear_animation=r.clear_animation});t.a=d},function(E,t,d){E=d(0);var O=d(1);d=Object(E.a)("storage",
function(d,t){function r(f){return y[f?f:k]?JSON.parse(y[f?f:k]):{}}var f=Object(O.a)(d),k="b4w",y=null;t.init=function(d){d?"b4w"!==d?k=d:f.error("b4w prefix denied"):f.warn("Prefix should be a string. Last declared storage prefix will be used.")};t.set=function(f,d,p){var m=r(p);m[f]=String(d);y[p?p:k]=JSON.stringify(m)};t.cleanup=function(f){delete y[f?f:k]};t.get=function(f,d){var k=r(d);return k[f]?k[f]:""};t.debug=function(d){f.log(r(d?d:k))};try{y=window.localStorage;try{y.tmp=null,delete y.tmp}catch(x){f.warn("localStorage quota is limited. Disabling localStorage"),
y=null}}catch(x){f.warn("Applying chrome localStorage bug workaround"),y=null}y||(f.warn("localStorage is not available, initializing temporary storage"),y={})});t.a=d},function(E,t,d){E=d(0);var O=d(5),T=d(1);d(2);d=Object(E.a)("__texcomp",function(d,r){function f(h,f,e,c){var a=new Int32Array(e,0,31),d,k,l,m,C,r;if(542327876!=a[0])return p.error("Invalid magic number in DDS header"),0;if(!a[20]&4)return p.error("Unsupported format, must contain a FourCC code"),0;d=a[21];switch(d){case q:k=8;l=f?
f.COMPRESSED_RGB_S3TC_DXT1_EXT:null;break;case b:k=16;l=f?f.COMPRESSED_RGBA_S3TC_DXT3_EXT:null;break;case u:k=16;l=f?f.COMPRESSED_RGBA_S3TC_DXT5_EXT:null;break;default:return p.error("Unsupported FourCC code:",x(d)),null}r=1;a[2]&131072&&!1!==c&&(r=Math.max(1,a[7]));m=a[4];C=a[3];a=a[1]+4;if(f)for(d=0;d<r;++d)c=Math.max(4,m)/4*Math.max(4,C)/4*k,f=new Uint8Array(e,a,c),h.compressedTexImage2D(h.TEXTURE_2D,d,l,m,C,0,f),a+=c,m=Math.max(.5*m,1),C=Math.max(.5*C,1);else if(d==q){e=f=new Uint16Array(e);k=
a/2;l=m;a=new Uint16Array(4);f=new Uint16Array(l*C);for(var y,t,G,N,O,K,D=l/4,R=C/4,V=0;V<R;V++)for(var F=0;F<D;F++)d=k+4*(V*D+F),a[0]=e[d],a[1]=e[d+1],y=a[0]&31,t=a[0]&2016,G=a[0]&63488,N=a[1]&31,O=a[1]&2016,K=a[1]&63488,a[2]=5*y+3*N>>3|5*t+3*O>>3&2016|5*G+3*K>>3&63488,a[3]=5*N+3*y>>3|5*O+3*t>>3&2016|5*K+3*G>>3&63488,y=e[d+2],t=4*V*l+4*F,f[t]=a[y&3],f[t+1]=a[y>>2&3],f[t+2]=a[y>>4&3],f[t+3]=a[y>>6&3],t+=l,f[t]=a[y>>8&3],f[t+1]=a[y>>10&3],f[t+2]=a[y>>12&3],f[t+3]=a[y>>14],y=e[d+3],t+=l,f[t]=a[y&3],
f[t+1]=a[y>>2&3],f[t+2]=a[y>>4&3],f[t+3]=a[y>>6&3],t+=l,f[t]=a[y>>8&3],f[t+1]=a[y>>10&3],f[t+2]=a[y>>12&3],f[t+3]=a[y>>14];h.texImage2D(h.TEXTURE_2D,0,h.RGB,m,C,0,h.RGB,h.UNSIGNED_SHORT_5_6_5,f);c&&h.generateMipmap(h.TEXTURE_2D)}else return p.error("No manual decoder for",x(d),"and no native support"),0;return r}function k(b,d,e,c,a){var h=new XMLHttpRequest;h.open("GET",e,!0);h.responseType="arraybuffer";h.onload=function(){if(200==h.status){b.bindTexture(b.TEXTURE_2D,c);var e=f(b,d,h.response,!0);
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,1<e?b.LINEAR_MIPMAP_LINEAR:b.LINEAR)}a&&a(c)};h.send(null)}function y(b){return b.charCodeAt(0)+(b.charCodeAt(1)<<8)+(b.charCodeAt(2)<<16)+(b.charCodeAt(3)<<24)}function x(b){return String.fromCharCode(b&255,b>>8&255,b>>16&255,b>>24&255)}var m=Object(O.a)(d),p=Object(T.a)(d),q=y("DXT1"),b=y("DXT3"),u=y("DXT5");r.RU=f;r.SU=function(b,f,e){var c=new Uint32Array(e,0,13);if(55727696==c[0]){var a=
c[7],h=c[6],d=c[11],k=52+c[12];switch(c[2]){case 0:var l=2,p=1;break;case 1:l=2;p=3;break;case 2:l=4;p=0;break;case 3:l=4;p=2;break;default:m.va("Unsupported PVR V3 format.")}}else if(559044176==c[11]){a=c[2];h=c[1];d=c[3];k=c[0];d++;var q=c[4]&255,c=0<c[10];25==q?(l=4,p=c?2:0):24==q?(l=2,p=c?3:1):m.va("Unsupported PVR V2 format.")}else m.va("Unsupported PVR version.");q=2==l?8:4;c=4;switch(p){case 0:var u=f.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;break;case 1:u=f.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;break;case 2:u=
f.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;break;case 3:u=f.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}f=q*c*l/8;for(l=0;l<d;l++){var p=Math.max(a>>l,1),x=Math.max(h>>l,1),r=p/q,y=x/c;2>r&&(r=2);2>y&&(y=2);r=r*y*f;y=new Uint8Array(e,k,r);b.compressedTexImage2D(b.TEXTURE_2D,l,u,p,x,0,y);k+=r}};r.KF=function(b,f){switch(f){case "dds":var e=new Int32Array(b,0,31);return{width:e[4],height:e[3]};case "pvr":e=new Uint32Array(b,0,13);if(55727696==e[0])var c=e[7],e=e[6];else c=e[2],e=e[1];return{width:c,height:e}}};r.FP=function(h,
f){var e=1;if("dds"==f){var c=new Int32Array(h,0,31),a=c[21];switch(a){case q:e=6;break;case b:case u:e=4;break;default:p.error("Unsupported FourCC code:",x(a))}}else if("pvr"==f)if(c=new Uint32Array(h,0,13),55727696==c[0])switch(c[2]){case 0:e=12;break;case 1:e=16;break;case 2:e=6;break;case 3:e=8}else a=c[4]&255,c=0<c[10],25==a?e=c?8:6:24==a&&(e=c?16:12);return e};r.IX=function(b,f,e,c){var a=b.createTexture();k(b,f,e,a,c);return a}});t.a=d},function(E,t,d){E=d(0);var O=d(1);d=Object(E.a)("__debug",
function(d,t){var r=Object(O.a)(d),f={};t.ZO=function(d,r,x,m,p){f[d]||(f[d]={zT:r,Xf:{}});x in f[d].Xf||(f[d].Xf[x]=m);p&&(f[d].Xf[x]=0)};t.calc_vbo_garbage_byte_size=function(){var d=0,r;for(r in f)for(var x in f[r].Xf)d+=f[r].Xf[x];return d};t.show_vbo_garbage_info=function(){var d={},y;for(y in f)for(var x in f[y].Xf){var m=f[y].Xf[x];if(m){var p=f[y].zT;p in d||(d[p]={gC:0,Xf:{}});x in d[p].Xf||(d[p].Xf[x]=0);d[p].Xf[x]+=m;d[p].gC+=m}}for(p in d){r.groupCollapsed(p,d[p].gC);for(x in d[p].Xf)r.Sd(x,
d[p].Xf[x]);r.groupEnd()}};t.cleanup=function(){f={}}});t.a=d},function(E,t,d){E=d(0);var O=d(4),T=d(45),G=d(28),r=d(11),f=d(2);d=Object(E.a)("__debug_rendertime",function(d,y){function k(){var b=u.Vz();if(b){var c=b.createQuery();b.beginQuery(c)}else c=performance.now();return c}function m(){var e=b.JP();return e&&e.debug_view_mode==b.DV_RENDER_TIME}function p(b,c,a){var e=u.Vz(),h=0;if(e)for(a&&e.endQuery(),a=0;a<b.length;a++){var d=b[a],k=e.uF(d),l=e.tF();k&&!l&&(h=e.vF(d)/1E6,c&&(h=f._50(h,c,
1,10)),b.splice(a,1),a--)}else h=performance.now()-b.pop(),c&&(h=f._50(h,c,1,10));return h}var q=Object(O.a)(d),b=Object(T.a)(d),u=Object(G.a)(d),h=Object(r.a)(d),l=q.wa;y.UB=function(b){if(l.show_hud_debug_info||b.type==h.tq)b.nr||b.fl.push(k())};y.UT=function(b){"MAIN"==b.type&&m()&&b.fl.push(k())};y.XB=function(b){if((l.show_hud_debug_info||b.type==h.tq)&&!b.nr){var c=p(b.fl,b.cg,!0);c&&(b.cg=c)}};y.WT=function(b){if("MAIN"==b.type&&m()){var c=p(b.fl,b.cg,!0);c&&(b.cg=c)}};y.eG=m;y.oS=function(b){var c=
p(b.fl,b.cg,!1);c&&(b.cg=c)}});t.a=d},function(E,t,d){E=d(0);var O=d(20),T=d(41),G=d(21),r=d(2),f=d(3),k=d(7);d=Object(E.a)("__navmesh",function(d,x){function m(a,b){function c(a){var b=a[0];a[0]=a[1];a[1]=a[2];a[2]=b}for(var e=a.jm,g=b.jm,h=[],f=0;f<e.length;f++)0<=q(g,e[f])&&h.push(e[f]);if(2>h.length)return[];0<=q(h,e[0])&&0<=q(h,e[e.length-1])&&c(e);0<=q(h,g[0])&&0<=q(h,g[g.length-1])&&c(g);h=[];for(f=0;f<e.length;f++)0<=q(g,e[f])&&h.push(e[f]);return h}function p(a){function b(a){for(var c=a.Kh,
e=0;e<c.length;e++){var g=c[e];void 0==g.island&&(g.island=a.island,b(g))}}a=a.iS;for(var c=[],e=0,g=0;g<a.length;g++){var h=a[g];void 0==h.island&&(h.island=e++,b(h));c[h.island]||(c[h.island]=[]);c[h.island].push(a[g])}return c}function q(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]==b)return c;return-1}function b(a){function b(a,b){for(var c=0;c<a.length;c++)if(b===a[c])return c}for(var c={},e=a.hq,g=0;g<e.length;g++)e[g][0]=parseFloat(e[g][0].toFixed(2)),e[g][1]=parseFloat(e[g][1].toFixed(2)),
e[g][2]=parseFloat(e[g][2].toFixed(2));c.hq=a.hq;a=p(a);c.wA=[];for(g=0;g<a.length;g++){for(var e=[],h=a[g],f=0;f<h.length;f++){for(var d=[],k=h[f],l=0;l<k.Kh.length;l++)d.push(b(h,k.Kh[l]));for(var q=[],l=0;l<k.Kh.length;l++)q.push(m(k,k.Kh[l]));k.Nd[0]=parseFloat(k.Nd[0].toFixed(2));k.Nd[1]=parseFloat(k.Nd[1].toFixed(2));k.Nd[2]=parseFloat(k.Nd[2].toFixed(2));e.push({id:b(h,k),Kh:d,jm:k.jm,Nd:k.Nd,Cd:k.Cd,jS:q,Lz:0,Cr:0,yc:0,gN:1,BC:!1,closed:!1,parent:null})}c.wA.push(e)}return c}function u(a,
b,c,e,g){function h(a,b){f.subtract(a,b,C);return f.dot(C,C)}function d(a,b){for(var c=[],e=0;e<b.Kh.length;e++)c.push(a[b.Kh[e]]);return c}(function(a){for(var b=0;b<a.length;b++){var c=a[b];c.Lz=0;c.Cr=0;c.yc=0;c.gN=1;c.BC=!1;c.closed=!1;c.parent=null}})(a);var k=T.a(function(a){return a.Lz});for(T.c(k,b);0<k.content.length;){var l=T.b(k);if(l===c){a=l;for(c=[];a.parent;)c.push(a),a=a.parent;c.push(b);return c.reverse()}l.closed=!0;for(var n=d(a,l),m=0,p=n.length;m<p;m++){var q=n[m];if(!q.closed){var v=
l.Cr+f.dist(q.Nd,l.Nd),w=q.BC;if(!w||v<q.Cr)q.BC=!0,q.parent=l,q.yc=q.yc||h(q.Nd,g)+h(q.Nd,e),q.Cr=v,q.Lz=q.Cr+q.yc,w?T.d(k,q):T.c(k,q)}}}return[]}function h(a,b){a.push(b[0]);a.push(b[1]);a.push(b[2])}function l(a,b,c,e){b=f.subtract(b,a,C);a=f.subtract(c,a,L);a=f.cross(b,a,C);return r._49(f.dot(e,a))}function e(a,b){f.subtract(a,b,C);return 1E-5>f.dot(C,C)}function c(a,b,c){var e=f.subtract(b.right,b.left,C),g=c.Cd,h=b.Cd;c=Math.acos(f.dot(g,h));g=r._49(f.dot(e,f.cross(g,h,L)));c*=-g;g=G.identity(K);
G.translate(g,b.left,g);G.rotate(g,c,e,g);G.translate(g,f.scale(b.left,-1,L),g);G.multiply(a,g,a)}function a(a,b,e,d,g,l,m,p,q){for(var n=G.identity(N),v=g;v<e;v++)if(a[v].dG&&(v>g||!v)){var w,u=b,z=d;w=a[v].left;var A=a[v].right,x=l,r=n,y=f.create(),B=f.transformMat4(w,r,H);B[3]=1;r=f.transformMat4(A,r,C);r=f.subtract(r,B,I);u=f.subtract(z,u,C);x=f.cross(x,u,E);.01>Math.abs(f.dot(x,r))?z=.5:(f.normalize(x,x),x[3]=-f.dot(x,z),z=-k.dot(x,B)/k.dot(x,r));A=f.subtract(A,w,C);w=f.scaleAndAdd(w,A,z,y);
h(m,w);p&&h(q,a[v].Cd);v&&c(n,a[v],a[v-1])}}function y(b,d){function k(a,c){r=x=C=c;q=p=m=a;f.copy(a,v);f.copy(a,w);f.copy(b[C].Cd,u)}var n=[],g=[],m,p,q,v,w,u,C=0,x=0,r=0;m=b[0].right;p=b[0].left;q=b[0].right;v=f.copy(p,D);w=f.copy(q,R);u=f.copy(b[0].Cd,z);h(n,m);d&&h(g,b[0].Cd);for(var y=G.identity(U),B=1;B<b.length;B++){var t=b[B].left,L=b[B].right,K=f.transformMat4(t,y,V),H=f.transformMat4(L,y,F);b[B].dG&&c(y,b[B],b[B-1]);if(0>=l(m,w,H,u)){var I=e(m,q);if(I||0<l(m,v,H,u))q=L,f.copy(H,w),r=B;else{(t=
e(v,m))||a(b,v,x,m,C,u,n,d,g);y=G.identity(y);k(p,x);B=C;t||(h(n,m),d&&h(g,b[B].Cd));continue}}0<=l(m,v,K,u)&&((I=e(m,p))||0>l(m,w,K,u)?(p=t,f.copy(K,v),x=B):((t=e(w,m))||a(b,w,r,m,C,u,n,d,g),y=G.identity(y),k(q,r),B=C,t||(h(n,m),d&&h(g,b[B].Cd))))}y=b.length-1;B=b[y].left;(t=e(m,B))||a(b,v,y,m,C,u,n,d,g);t&&C||h(n,B);return d?(h(g,b[y].Cd),{positions:new Float32Array(n),normals:new Float32Array(g)}):{positions:new Float32Array(n),normals:null}}function t(a,b,c,e,g){for(var h=null,f=Number.MAX_VALUE,
d=0;d<a.length;d++){var k=a[d],l=g(c,k.Nd,k.jm,b,f);l<f&&(h=k,f=l)}return 0<e&&f>e?null:h}function v(a,b,c,e,g){a.push({left:b,right:c,dG:e,Cd:g})}var B=Object(O.a)(d),C=f.create(),L=f.create(),H=k.create(),I=k.create(),E=k.create(),N=G.create(),U=G.create(),K=G.create(),D=f.create(),R=f.create(),V=f.create(),F=f.create(),z=f.create();x.LR=function(a){var c=B.Zz(a.Pc,B.bo),e=a.Je;a=[];for(var h=0;h<e.length;h+=3)a.push({$a:new Uint32Array([e[h],e[h+1],e[h+2]]),Nd:new Float32Array(3),Cd:new Float32Array(3)});
e=[];for(h=0;h<c.length;h+=3){var g=new Float32Array(3);g[0]=c[h];g[1]=c[h+1];g[2]=c[h+2];e.push(g)}for(c=0;c<a.length;c++)h=a[c],f.add(e[h.$a[0]],e[h.$a[1]],C),f.add(C,e[h.$a[2]],C),f.scale(C,1/3,h.Nd);for(c=0;c<a.length;c++){var h=a[c],g=f.subtract(e[h.$a[1]],e[h.$a[0]],C),d=f.subtract(e[h.$a[2]],e[h.$a[0]],L),g=f.cross(g,d,C);f.normalize(g,g);f.copy(g,h.Cd)}for(var k={},c=[],h=[],l,m,p=Math.pow(10,4),g=0,d=e.length;g<d;g++)l=e[g],m=Math.round(l[0]*p)+"_"+Math.round(l[1]*p)+"_"+Math.round(l[2]*
p),void 0===k[m]?(k[m]=g,c.push(l),h[g]=c.length-1):h[g]=h[k[m]];k=[];g=0;for(d=a.length;g<d;g++)for(l=a[g],l.$a[0]=h[l.$a[0]],l.$a[1]=h[l.$a[1]],l.$a[2]=h[l.$a[2]],l=[l.$a[0],l.$a[1],l.$a[2]],m=0;3>m;m++)if(l[m]==l[(m+1)%3]){k.push(g);break}for(g=k.length-1;0<=g;g--)a.splice(k[g],1);for(g=e.length=0;g<c.length;g++)e.push(c[g]);h=[];for(c=g=0;c<a.length;c++)d=a[c],h.push({id:g++,jm:d.$a,Nd:d.Nd,Cd:d.Cd,Kh:[]});a={iS:h,hq:e};e={};for(c=0;c<h.length;c++)for(g=0;3>g;g++)d=h[c].jm[g],k=h[c].jm[(g+1)%
3],d=d>k?k+"-"+d:d+"-"+k,d in e||(e[d]=[]),e[d].push(h[c]);h=Object.keys(e);c=0;for(k=h.length;c<k;c++)for(d=h[c],g=0;g<e[d].length;g++)for(l=g+1;l<e[d].length;l++)e[d][g].Kh.push(e[d][l]),e[d][l].Kh.push(e[d][g]);return b(a)};x.navmesh_get_island=function(a,b,c){for(var e=null,g=Number.MAX_VALUE,h=a.wA,d=0;d<h.length;d++)for(var k=0;k<h[d].length;k++){var l=h[d][k];f.subtract(l.Nd,b,C);l=c(b,l.Nd,l.jm,a.hq,g);l<g&&(e=d,g=l)}return e};x.QQ=function(a,b,c){for(var e=[],g=0;g<b.length;g++)e.push(c[b[g]]);
b=!1;c=-1;for(var g=e.length,h=g-1;++c<g;h=c)(e[c][1]<=a[1]&&a[1]<e[h][1]||e[h][1]<=a[1]&&a[1]<e[c][1])&&a[0]<(e[h][0]-e[c][0])*(a[1]-e[c][1])/(e[h][1]-e[c][1])+e[c][0]&&(b=!b);return b?!0:!1};x.navmesh_find_path=function(a,b,c,e){var g;g=a.wA[e.island];var h=a.hq,d=t(g,h,b,e.allowed_distance,e.distance_to_closest);g=d?(h=t(g,h,c,e.allowed_distance,e.distance_to_farthest))?u(g,d,h,b,c):null:null;if(g&&g.length)if(e.do_not_pull_string)if(c=g,e.return_normals){b=new Float32Array(3*c.length);for(g=0;g<
c.length;g++)b.set(c[g].Nd,3*g);c={positions:b,normals:null}}else{b=new Float32Array(3*c.length);a=new Float32Array(3*c.length);for(g=0;g<c.length;g++)b.set(c[g].Nd,3*g),a.set(c[g].Cd,3*g);c={positions:b,normals:a}}else{a=a.hq;e=e.return_normals;d=[];v(d,b,b,!1,g[0]&&g[0].Cd||r.f);for(b=0;b<g.length;b++){var k=g[b];if(h=g[b+1]){var l=.999>Math.abs(f.dot(k.Cd,h.Cd));a:{for(var m=0;m<k.Kh.length;m++)if(k.Kh[m]===h.id){k=k.jS[m];break a}k=void 0}v(d,a[k[0]],a[k[1]],l,h.Cd)}}v(d,c,c,!1,d[d.length-1].Cd);
c=y(d,e)}else c=null;return c}});t.a=d},function(E,t,d){function O(){return{name:"",type:"",nd:"",kh:!1,ke:null,ih:[],Ob:"",bd:!1,ey:!1,ob:!1,Se:!1,dy:!1,mt:!1,Xp:!1,bf:!1,vk:!1,cj:!1,Qr:!1,fn:!1,Nh:0,mj:0,Ud:0,Df:"",Qc:new Float32Array(3),Ie:0,Ju:0,Ku:0,Vw:0,Hu:0,Iu:0,Au:0,alpha:0,Mf:"",Qe:new Float32Array(3),Rs:0,wx:0,xx:0,Dn:0,ux:0,vx:0,pg:0,fe:0,ce:0,Ra:{ej:!1,shore_smoothing:!1,absorb_factor:0,foam_factor:0,bx:new Float32Array(3),ex:new Float32Array(3),cx:0,fx:0,Qm:new Float32Array(3),bv:0,sss_strength:0,
sss_width:0,norm_uv_velocity:0,is_dynamic:!1,waves_height:0,waves_length:0,dst_noise_scale0:0,dst_noise_scale1:0,dst_noise_freq0:0,dst_noise_freq1:0,dir_min_shore_fac:0,dir_freq:0,dir_noise_scale:0,dir_noise_freq:0,dir_min_noise_fac:0,dst_min_fac:0,waves_hor_fac:0,Pv:!1,xw:0,yw:0,Gu:0,Ru:!1,Lj:0,Kj:0},rj:{To:!1,rr:"",qr:""},zn:{reflect_factor:0,fresnel:0,fresnel_factor:0},Ko:{size:0,Kr:0,Uw:new Float32Array(3),aw:new Float32Array(3),Tw:0,Zv:0,Ax:0,Rv:!1,Bx:0,Cx:0},Ed:{Vp:!1,Di:!1,se:0,uh:0,Rb:"",
Ze:0,Ye:0,$e:0}}}t.c=O;t.b=function(){var d=O();d.name="DEFAULT";d.type="SURFACE";d.nd=T._4();d.kh=!1;d.ke=null;d.ih=[];d.Ob="OPAQUE";d.bd=!1;d.ey=!1;d.ob=!0;d.mt=!1;d.Xp=!1;d.vk=!1;d.fn=!1;d.Nh=0;d.mj=0;d.Ud=0;d.Df="LAMBERT";d.Qc.set([.8,.8,.8]);d.Ie=.8;d.alpha=1;d.Mf="COOKTORR";d.Qe.set([1,1,1]);d.Rs=.5;d.Dn=50;d.pg=1;d.fe=0;d.ce=1;d.Ra.ej=!1;d.rj.To=!1;d.zn.reflect_factor=0;d.zn.fresnel=0;d.zn.fresnel_factor=1.25;d.Ed.Vp=!1;return d};t.d=function(d,r){r.name=d.name;r.type=d.type;r.nd=d.uuid;r.kh=
d.use_nodes;r.ke=d.node_tree;r.ih=d.texture_slots;r.Ob=d.game_settings.alpha_blend;r.bd=d.use_shadeless;r.ey=d.use_transparency;r.ob=d.game_settings.use_backface_culling;r.Se=d.use_tangent_shading;r.dy=d.use_orco_tex_coord;r.mt=d.use_vertex_color_paint;r.Xp=d.b4w_double_sided_lighting;r.bf=d.b4w_do_not_render;r.vk=d.b4w_render_above_all;r.cj=d.b4w_lens_flares;r.Qr=d.b4w_wettable;r.fn=d.b4w_refractive;r.Nh=d.b4w_refr_bump;r.mj=d.pass_index;r.Ud=d.offset_z;r.Df=d.diffuse_shader;r.Qc.set(d.diffuse_color);
r.Ie=d.diffuse_intensity;r.Ju=d.diffuse_toon_size;r.Ku=d.diffuse_toon_smooth;r.Vw=d.roughness;r.Hu=d.diffuse_fresnel;r.Iu=d.diffuse_fresnel_factor;r.Au=d.darkness;r.alpha=d.alpha;r.Mf=d.specular_shader;r.Qe.set(d.specular_color);r.Rs=d.specular_intensity;r.wx=d.specular_toon_size;r.xx=d.specular_toon_smooth;r.Dn=d.specular_hardness;r.ux=d.specular_ior;r.vx=d.specular_slope;r.pg=d.specular_alpha;r.fe=d.emit;r.ce=d.ambient;var f=r.Ra;f.ej=d.b4w_water;f.shore_smoothing=d.b4w_water_shore_smoothing;f.absorb_factor=
d.b4w_water_absorb_factor;f.foam_factor=d.b4w_foam_factor;f.bx.set(d.b4w_shallow_water_col);f.ex.set(d.b4w_shore_water_col);f.cx=d.b4w_shallow_water_col_fac;f.fx=d.b4w_shore_water_col_fac;f.Qm.set(d.b4w_water_fog_color);f.bv=d.b4w_water_fog_density;f.sss_strength=d.b4w_water_sss_strength;f.sss_width=d.b4w_water_sss_width;f.norm_uv_velocity=d.b4w_water_norm_uv_velocity;f.is_dynamic=d.b4w_water_dynamic;f.waves_height=d.b4w_waves_height;f.waves_length=d.b4w_waves_length;f.dst_noise_scale0=d.b4w_water_dst_noise_scale0;
f.dst_noise_scale1=d.b4w_water_dst_noise_scale1;f.dst_noise_freq0=d.b4w_water_dst_noise_freq0;f.dst_noise_freq1=d.b4w_water_dst_noise_freq1;f.dir_min_shore_fac=d.b4w_water_dir_min_shore_fac;f.dir_freq=d.b4w_water_dir_freq;f.dir_noise_scale=d.b4w_water_dir_noise_scale;f.dir_noise_freq=d.b4w_water_dir_noise_freq;f.dir_min_noise_fac=d.b4w_water_dir_min_noise_fac;f.dst_min_fac=d.b4w_water_dst_min_fac;f.waves_hor_fac=d.b4w_water_waves_hor_fac;f.Pv=d.b4w_generated_mesh;f.xw=d.b4w_water_num_cascads;f.yw=
d.b4w_water_subdivs;f.Gu=d.b4w_water_detailed_dist;f.Ru=d.b4w_water_enable_caust;f.Lj=d.b4w_water_caust_scale;f.Kj=d.b4w_water_caust_brightness;f=r.rj;f.To=d.b4w_terrain;f.rr=d.b4w_dynamic_grass_size;f.qr=d.b4w_dynamic_grass_color;f=r.zn;f.reflect_factor=d.raytrace_mirror.reflect_factor;f.fresnel=d.raytrace_mirror.fresnel;f.fresnel_factor=d.raytrace_mirror.fresnel_factor;f=r.Ko;f.size=d.halo.size;f.Kr=d.halo.hardness;f.Uw.set(d.halo.b4w_halo_rings_color);f.aw.set(d.halo.b4w_halo_lines_color);f.Tw=
d.halo.ring_count;f.Zv=d.halo.line_count;f.Ax=d.halo.star_tip_count;f.Rv=d.b4w_halo_sky_stars;f.Bx=d.b4w_halo_stars_blend_height;f.Cx=d.b4w_halo_stars_min_height;f=r.Ed;f.Vp=d.b4w_collision;f.Di=d.b4w_use_ghost;f.se=d.physics.friction;f.uh=d.physics.elasticity;f.Rb=d.b4w_collision_id;f.Ze=d.b4w_collision_margin;f.Ye=d.b4w_collision_group;f.$e=d.b4w_collision_mask};t.a=function(d){d.name=d.name;d.type=d.type;d.nd=d.nd;d.kh=d.kh;d.ke=d.ke;d.ih=d.ih.slice();d.Ob=d.Ob;d.bd=d.bd;d.ey=d.ey;d.ob=d.ob;d.Se=
d.Se;d.dy=d.dy;d.mt=d.mt;d.Xp=d.Xp;d.bf=d.bf;d.vk=d.vk;d.cj=d.cj;d.Qr=d.Qr;d.fn=d.fn;d.Nh=d.Nh;d.mj=d.mj;d.Ud=d.Ud;d.Df=d.Df;d.Qc.set(d.Qc);d.Ie=d.Ie;d.Ju=d.Ju;d.Ku=d.Ku;d.Vw=d.Vw;d.Hu=d.Hu;d.Iu=d.Iu;d.Au=d.Au;d.alpha=d.alpha;d.Mf=d.Mf;d.Qe.set(d.Qe);d.Rs=d.Rs;d.wx=d.wx;d.xx=d.xx;d.Dn=d.Dn;d.ux=d.ux;d.vx=d.vx;d.pg=d.pg;d.fe=d.fe;d.ce=d.ce;var r=d.Ra,f=d.Ra;f.ej=r.ej;f.shore_smoothing=r.shore_smoothing;f.absorb_factor=r.absorb_factor;f.foam_factor=r.foam_factor;f.bx.set(r.bx);f.ex.set(r.ex);f.cx=r.cx;
f.fx=r.fx;f.Qm=r.Qm;f.bv=r.bv;f.sss_strength=r.sss_strength;f.sss_width=r.sss_width;f.norm_uv_velocity=r.norm_uv_velocity;f.is_dynamic=r.is_dynamic;f.waves_height=r.waves_height;f.waves_length=r.waves_length;f.dst_noise_scale0=r.dst_noise_scale0;f.dst_noise_scale1=r.dst_noise_scale1;f.dst_noise_freq0=r.dst_noise_freq0;f.dst_noise_freq1=r.dst_noise_freq1;f.dir_min_shore_fac=r.dir_min_shore_fac;f.dir_freq=r.dir_freq;f.dir_noise_scale=r.dir_noise_scale;f.dir_noise_freq=r.dir_noise_freq;f.dir_min_noise_fac=
r.dir_min_noise_fac;f.dst_min_fac=r.dst_min_fac;f.waves_hor_fac=r.waves_hor_fac;f.Pv=r.Pv;f.xw=r.xw;f.yw=r.yw;f.Gu=r.Gu;f.Ru=r.Ru;f.Lj=r.Lj;f.Kj=r.Kj;f=r=d.rj;f.To=r.To;f.rr=r.rr;f.qr=r.qr;f=r=d.zn;f.reflect_factor=r.reflect_factor;f.fresnel=r.fresnel;f.fresnel_factor=r.fresnel_factor;f=r=d.Ko;f.size=r.size;f.Kr=r.Kr;f.Uw.set(r.Uw);f.aw.set(r.aw);f.Tw=r.Tw;f.Zv=r.Zv;f.Ax=r.Ax;f.Rv=r.Rv;f.Bx=r.Bx;f.Cx=r.Cx;f=r=d.Ed;f.Vp=r.Vp;f.Di=r.Di;f.se=r.se;f.uh=r.uh;f.Rb=r.Rb;f.Ze=r.Ze;f.Ye=r.Ye;f.$e=r.$e;return d};
var T=d(2)},function(E,t,d){E=d(0);var O=d(5),T=d(2),G=d(3);d=Object(E.a)("__curve",function(d,f){function k(b,d,h,f,e){var c=f.length;e||(e=new Float32Array(c));for(var a=c+b,k=new Float32Array(a),l=1;l<=a-1;l++)k[l-1]=d>=h[l-1]&&d<h[l+1-1]?1:0;for(var m=2;m<=b;m++)for(l=1;l<=a-m;l++)k[l-1]=(k[l-1]?(d-h[l-1])*k[l-1]/(h[l+m-1-1]-h[l-1]):0)+(k[l+1-1]?(h[l+m-1]-d)*k[l+1-1]/(h[l+m-1]-h[l+1-1]):0);d==h[a-1]&&(k[c-1]=1);b=0;for(l=1;l<=c;l++)b+=k[l-1]*f[l-1];for(l=1;l<=c;l++)e[l-1]=b?k[l-1]*f[l-1]/b:0;
return e}function r(b){b=b.Uv;return b[b.length-1]}function x(b){b=b.ME;return b[b.length-1]}function m(b,d,h,f,e,c,a,k){var l=b+(d-b)/2,q=p(l,f,e,c,a)-h;k=k?k:.01;return Math.abs(q)<k?l:0<q?m(b,l,h,f,e,c,a,k):m(l,d,h,f,e,c,a,k)}function p(b,d,h,f,e){var c=1-b;return d*c*c*c+3*h*c*c*b+3*f*c*b*b+e*b*b*b}var q=Object(O.a)(d);f.LN=function(b){var d={},h=b.data;b=h.splines[0];if(!b||"NURBS"!=b.type||!b.use_endpoint_u)return null;var f=b.order_u;d.order=f;b=b.points;var e=b.length/5,c=[],a=e+f,e=e+2;c[0]=
0;for(var m=2;m<=a;m++)c[m-1]=m>f&&m<e?c[m-2]+1:c[m-2];d.Uv=c;"2D"==h.dimensions?d.sl=!1:"3D"==h.dimensions?d.sl=!0:q.va("Wrong curve dimensions");f=[];c=[];for(h=0;h<b.length;h+=5)f.push(b[h]),f.push(b[h+1]),f.push(b[h+2]),d.sl&&f.push(b[h+3]),c.push(b[h+4]);d.oz=f;d.DC=c;b=[];for(var h=d.oz,f=d.sl?4:3,c=d.DC,a=d.Uv,e=d.order,m=h.length/f,p=m+e,v=0,x=a[p-1]/999,C=0;1E3>C;C++){5E-6>a[p-1]-v&&(v=a[p-1]);for(var r=k(e,v,a,c),y=0;y<f;y++)for(var t=b[f*C+y]=0;t<m;t++)b[f*C+y]+=r[t]*h[f*t+y];v+=x}f=d.sl?
4:3;c=new Float32Array(1E3);c[0]=0;for(h=1;1E3>h;h+=1)a=b[(h-1)*f],e=b[(h-1)*f+1],m=b[(h-1)*f+2],p=b[h*f],v=b[h*f+1],x=b[h*f+2],c[h]=c[h-1]+Math.sqrt((p-a)*(p-a)+(v-e)*(v-e)+(x-m)*(x-m));d.ME=c;return d};f.RT=function(b,d,h){h||(h=[]);d=Math.min(d,r(b));var f=b.oz,e=b.sl?4:3,c=b.DC,a=b.Uv,m=b.order;b=f.length/e;var p=b+m;5E-6>a[p-1]-d&&(d=a[p-1]);p=new Float32Array(b);k(m,d,a,c,p);for(d=0;d<e;d++)for(c=h[d]=0;c<b;c++)h[d]+=p[c]*f[e*c+d]};f.OT=function(b,d,h){h||(h=[]);var f=b.oz,e=b.sl?4:3,c=b.DC,
a=b.Uv,k=b.order;b=f.length/e;var m=b+k;5E-6>a[m-1]-d&&(d=a[m-1]);var m=new Float32Array(b),p=d;d=m;var q=c.length;d||(d=new Float32Array(q));var u=new Float32Array(q),x=new Float32Array(q),r=u,y=x;r||(r=new Float32Array(q));y||(y=new Float32Array(q));for(var t=q+k,G=new Float32Array(t),O=new Float32Array(t),K=1;K<=t-1;K++)G[K-1]=p>=a[K-1]&&p<a[K+1-1]?1:0;p==a[t-1]&&(G[q-1]=1);for(var D=2;D<=k;D++)for(K=1;K<=t-D;K++){var R=G[K-1]?G[K-1]/(a[K+D-1-1]-a[K-1]):0,V=G[K+1-1]?-G[K+1-1]/(a[K+D-1]-a[K+1-1]):
0,F=O[K-1]?(p-a[K-1])*O[K-1]/(a[K+D-1-1]-a[K-1]):0,z=O[K+1-1]?(a[K+D-1]-p)*O[K+1-1]/(a[K+D-1]-a[K+1-1]):0;G[K-1]=(G[K-1]?(p-a[K-1])*G[K-1]/(a[K+D-1-1]-a[K-1]):0)+(G[K+1-1]?(a[K+D-1]-p)*G[K+1-1]/(a[K+D-1]-a[K+1-1]):0);O[K-1]=R+V+F+z}for(K=1;K<=q;K++)r[K-1]=G[K-1],y[K-1]=O[K-1];a=0;for(k=1;k<=q;k++)a+=u[k-1]*c[k-1];p=0;for(k=1;k<=q;k++)p+=x[k-1]*c[k-1];for(k=1;k<=q;k++)d[k-1]=a?x[k-1]*c[k-1]/a+u[k-1]*c[k-1]*p/(a*a):0;for(c=0;c<e;c++)for(a=h[c]=0;a<b;a++)h[c]+=m[a]*f[e*a+c]};f.oY=r;f.QT=x;f.PT=function(b,
d){if(0>=d)return 0;var h=r(b);if(d>=x(b))return h;var f=b.ME,e=T.F(f,d,0,f.length-1);return h*(e+(d-f[e])/(f[e+1]-f[e]))/1E3};f.$v=function(b,d,h,f,e){return h+(e-f)*(b-h)/(d-f)};f.uG=function(b,d,h){var f=d[0];d=d[1];h=(h[1]-d)/(h[0]-f);return h*b+(d-h*f)};f.mM=function(b,d,h,f,e){return p(m(0,1,b,d[0],h[0],f[0],e[0],.001),d[1],h[1],f[1],e[1])};f.dz=function(b,d,h,f,e){var c=new Float32Array(3),a=new Float32Array(3),k=new Float32Array(3),l=new Float32Array(3),m=new Float32Array(3),p=new Float32Array(3);
G.copy(b[1],a);null==d?(G.copy(h[1],k),c[0]=2*a[0]-k[0],c[1]=2*a[1]-k[1]):G.copy(d[1],c);null==h?(G.copy(d[1],c),k[0]=2*a[0]-c[0],k[1]=2*a[1]-c[1]):G.copy(h[1],k);G.subtract(a,c,l);G.subtract(k,a,m);d=G.length(l);h=G.length(m);0==d&&(d=1);0==h&&(h=1);if("AUTO"==f||"AUTO"==e)if(p[0]=m[0]/h+l[0]/d,p[1]=m[1]/h+l[1]/d,c=2.5614*G.length(p))"AUTO"==f&&G.scaleAndAdd(a,p,-(d/c),b[0]),"AUTO"==e&&G.scaleAndAdd(a,p,h/c,b[2]);"VECTOR"==f&&G.scaleAndAdd(a,l,-1/3,b[0]);"VECTOR"==e&&G.scaleAndAdd(a,m,1/3,b[2])};
f.fN=function(b,d,h,f){var e=[],c=[],a,k,l;e[0]=b[0]-d[0];e[1]=b[1]-d[1];c[0]=f[0]-h[0];c[1]=f[1]-h[1];l=f[0]-b[0];a=Math.abs(e[0]);k=Math.abs(c[0]);a+k&&a+k>l&&(a=l/(a+k),d[0]=b[0]-a*e[0],d[1]=b[1]-a*e[1],h[0]=f[0]-a*c[0],h[1]=f[1]-a*c[1])}});t.a=d},function(E,t,d){E=d(0);var O=d(4),T=d(66),G=d(35),r=d(42),f=d(1);d=Object(E.a)("config",function(d,y){var k=Object(O.a)(d),m=Object(G.a)(d),p=Object(T.a)(d),q=Object(r.a)(d),b=Object(f.a)(d);y.P_LOW=k.P_LOW;y.P_HIGH=k.P_HIGH;y.P_ULTRA=k.P_ULTRA;y.P_CUSTOM=
k.P_CUSTOM;y.P_AUTO=k.P_AUTO;y.set=k.set;y.get=k.get;y.reset=k.reset;y.reset_limits=k.reset_limits;y.get_std_assets_path=k.get_assets_path;y.get_assets_path=k.get_assets_path;y.apply_quality=function(d){q.is_primary_loaded()?b.error("Cannot change quality profile after a scene is loaded."):(k.set("quality",d),p.mv()&&(k.apply_quality(),m.KH(p.mv(),!1)))}});t.a=d},function(E,t,d){E=d(0);var O=d(42),T=d(65);d=Object(E.a)("data",function(d,r){var f=Object(O.a)(d),k=Object(T.a)(d);r.load=f.load;r.unload=
function(d){f.unload(d|0)};r.set_debug_resources_root=f.set_debug_resources_root;r.is_primary_loaded=f.is_primary_loaded;r.is_idle=k.cn;r.load_and_add_new=f.load;r.cleanup=r.unload;r.activate_media=f.activate_media;r.prefetch=f.prefetch;r.unfetch=f.unfetch});t.a=d},function(E,t,d){var O=d(32);E=d(0);var T=d(5),G=d(16),r=d(4),f=d(66),k=d(35),y=d(53),x=d(15),m=d(42),p=d(71),q=d(93),b=d(44),u=d(45),h=d(62),l=d(72),e=d(28),c=d(20),a=d(65),ca=d(12),la=d(8),v=d(19),B=d(1),C=d(22),L=d(10),H=d(64),I=d(23),
da=d(34),N=d(11),U=d(17),K=d(18),D=d(13),R=d(6),V=d(2),F=d(3);d=Object(E.a)("debug",function(d,w){function z(a,b,c,e){ia.group(Da.Gx(a),e);for(a=0;a<c.length;a++){var g=c[a],h=g.ka;if(h.type==e)for(var d=!1,f=0;f<b.length;f++){for(var k=b[f].ub,l=0;l<k.length;l++){var m=k[l];if(m.Ec&&m.ah==h){"STATIC"==e?ia.Sd(g.le,g):ia.Sd(g.name,g);d=!0;break}}if(d)break}}ia.groupEnd()}function A(a){var b={};if(!a)return b;a=a.split("\n");for(var c=0;c<a.length;c++){var e=a[c];if(-1!=e.search(new RegExp(/^[A-Z.]+ ?/))){var g=
e.split(" ")[0];g in b||(b[g]=0);b[g]++}}e=c=a=0;for(g in b)switch(g){case "KIL":case "TEX":case "TXB":case "TXP":case "KIL.F":case "TEX.F":case "TXB.F":case "TXD.F":case "TXL.F":case "TXQ.F":case "TXP.F":c+=b[g];a+=b[g];break;case "ATTRIB":e+=b[g];break;case "ADDRESS":case "PARAM":case "TEMP":case "ALIAS":case "OUTPUT":break;case "END":break;default:a+=b[g]}b.ALL_OPS=a;b.TEX_OPS=c;b.ATTRIBS=e;return b}function n(a,b){var c=new XMLHttpRequest;c.open("POST",a,!1);c.send(b);if(200==c.status)return c.responseText;
ia.error(c.responseText);throw"Error POST XHR: "+c.status;}function g(a){a.sort(function(a,b){return b.Mz.ALL_OPS-a.Mz.ALL_OPS});for(var b=0;b<a.length;b++){var c=a[b],e=c.Mz,g=c.hV,h=t(c.qO),h=h.length?"\t\t("+h.join(", ")+")":"\t\t(NA)";ia.groupCollapsed("VERT ->","OPS",g.ALL_OPS,"ATT",g.ATTRIBS,"TEX",g.TEX_OPS,"\t\tFRAG ->","OPS",e.ALL_OPS,"TEX",e.TEX_OPS,h);ia.groupCollapsed("directives");for(var d=c.Lb.ei.slice().sort(),h=0;h<d.length;h++){var f=d[h];ia.Sd(f[0],f[1])}ia.groupEnd();ia.groupCollapsed("node elements");
d=c.Lb.Jf;for(h=0;h<d.length;h++)ia.Sd(d[h]);ia.groupEnd();ia.groupCollapsed("vert source");ia.Sd(c.fV);ia.groupEnd();ia.groupCollapsed("vert translated source");ia.Sd(c.gV);ia.groupEnd();h=["ALL_OPS","TEX_OPS","ATTRIBS"];ia.groupCollapsed("vert ops stats");for(var k in g)-1==h.indexOf(k)&&ia.Sd(k,g[k]);ia.groupEnd();ia.groupCollapsed("vert assembly");ia.Sd(c.eV);ia.groupEnd();ia.groupCollapsed("frag source");ia.Sd(c.iP);ia.groupEnd();ia.groupCollapsed("frag translated source");ia.Sd(c.jP);ia.groupEnd();
ia.groupCollapsed("frag ops stats");for(k in e)-1==h.indexOf(k)&&ia.Sd(k,e[k]);ia.groupEnd();ia.groupCollapsed("frag assembly");ia.Sd(c.eP);ia.groupEnd();ia.groupEnd()}}function t(a){for(var b=[],c=ra.Fr(),e=0;e<c.length;e++)for(var g=c[e],h=P.Fc(g,"MESH",P.DATA_ID_ALL),d=0;d<h.length;d++){var f=xa.lb(h[d],g);if(f&&f.Ia.length)for(var f=f.Ia,k=0;k<f.length;k++){var l=f[k];if(l.ec==a)for(var m=0;m<l.Hc.length;m++){var n=l.Hc[m];-1==b.indexOf(n)&&b.push(n)}}}return b}function ka(a){function b(){Xa.push(b);
return a.apply(a,arguments)}return b}function E(a,b,c,e,g){if(typeof b!=typeof a)throw"debug.eqv: wrong expected data type";if(a.length!=b.length)throw"debug.eqv: wrong expected vector length";c=c?c:1E-6;for(var h=0;h<a.length;h++){if("number"!=typeof b[h]||isNaN(b[h]))throw"debug.eqv: wrong expected data type";if("number"!=typeof a[h]||isNaN(a[h]))throw"debug.eqv: wrong result data type";if(b[h]>a[h]+c||b[h]<a[h]-c)throw"debug.eqv: wrong result";}M(e,g,"eqv")}function M(a,b,c){a=a||"";b=b||"";if(Ha){if(""==
a)throw"debug."+c+': no error is expected, but got "'+ba+'"';if(ba!=a)throw"debug."+c+': error "'+a+'" is expected, but got "'+ba+'"';}else if(""!=a)throw"debug."+c+': error "'+a+'" is expected, but got nothing';if(va){if(""==b)throw"debug."+c+': no warning is expected, but got "'+sa+'"';if(sa!=b)throw"debug."+c+': warning "'+b+'" is expected, but got "'+sa+'"';}else if(""!=b)throw"debug."+c+': warning "'+b+'" is expected, but got nothing';Ha=va=!1}function Ea(){ya&&(P.mp(ya,!1,!1,!1),Ma.kH(ya),P.mp(ya,
!0,!0,!0),P.remove_object(ya),ya=null)}var Z=Object(T.a)(d),aa=Object(G.a)(d),oa=Object(r.a)(d),ja=Object(k.a)(d),Ia=Object(y.a)(d),Ca=Object(x.a)(d),Ja=Object(f.a)(d),Ma=Object(m.a)(d),X=Object(p.a)(d),Q=Object(q.a)(d),Aa=Object(b.a)(d),Ba=Object(u.a)(d),Va=Object(h.a)(d),Ra=Object(l.a)(d),ta=Object(e.a)(d),ha=Object(c.a)(d),ga=Object(a.a)(d),P=Object(ca.a)(d),xa=Object(la.a)(d),pa=Object(v.a)(d),ia=Object(B.a)(d),na=Object(C.a)(d),ra=Object(L.a)(d),Fa=Object(H.a)(d),fa=Object(I.a)(d),Za=Object(da.a)(d),
Da=Object(N.a)(d),Ga=Object(K.a)(d),Sa=Object(U.a)(d),Pa=Object(D.a)(d),La=R.b(),za=new Float32Array(2),S=F.create(),Ua=F.create(),ya=null,bb=oa.wa,Xa=[],sa="",ba="",va=!1,Ha=!1,db=!0,vb=new Uint8Array(4);w.DV_NONE=Ba.DV_NONE;w.DV_OPAQUE_WIREFRAME=Ba.DV_OPAQUE_WIREFRAME;w.DV_TRANSPARENT_WIREFRAME=Ba.DV_TRANSPARENT_WIREFRAME;w.DV_FRONT_BACK_VIEW=Ba.DV_FRONT_BACK_VIEW;w.DV_BOUNDINGS=Ba.DV_BOUNDINGS;w.DV_CLUSTERS_VIEW=Ba.DV_CLUSTERS_VIEW;w.DV_BATCHES_VIEW=Ba.DV_BATCHES_VIEW;w.DV_RENDER_TIME=Ba.DV_RENDER_TIME;
w.physics_stats=function(){pa.xO()};w.physics_id=function(a){ia.log("O",pa.$O(a));var b=pa.tP();if(b)for(var b=b.dd.ub,c=0;c<b.length;c++){var e=b[c];e.xa.Ja==a&&ia.log("B",e)}else ia.error("No active physics scene.")};w.visible_objects=function(){for(var a=ra.get_active(),b=P.Fc(a,"MESH",P.DATA_ID_ALL),a=ra.hh(a,[Da.ic,Da.Kd,Da.De]),c=0;c<a.length;c++){var e=a[c],g=e.Hb;g.length&&(z(e,g,b,"DYNAMIC"),z(e,g,b,"STATIC"))}};w.object_info=function(a){for(var b=ra.get_active(),c=P.Fc(b,"MESH",P.DATA_ID_ALL),
e=0;e<c.length;e++){var g=c[e];if(g.name==a){ia.log("Object",g);for(var h=ra.Qz(b),d=0;d<h.length;d++){for(var f=h[d],k=[],l=f.Hb,m=0;m<l.length;m++)for(var n=l[m].ub,p=0;p<n.length;p++)n[p].ah==g.ka&&k.push(n[p]);ia.log("Subscene "+f.type,k)}}}};w.objects_stat=function(){var a=ra.get_active();ia.log("Armatures: "+P.Fc(a,"ARMATURE",P.DATA_ID_ALL).length);ia.log("Cameras: "+P.Fc(a,"CAMERA",P.DATA_ID_ALL).length);ia.log("Curves: "+P.Fc(a,"CURVE",P.DATA_ID_ALL).length);ia.log("Empties: "+P.Fc(a,"EMPTY",
P.DATA_ID_ALL).length);ia.log("Lamps: "+P.Fc(a,"LAMP",P.DATA_ID_ALL).length);ia.log("Meshes: "+P.Fc(a,"MESH",P.DATA_ID_ALL).length);ia.log("Speakers: "+P.Fc(a,"SPEAKER",P.DATA_ID_ALL).length)};w.num_vertices=function(){for(var a=0,b=ra.get_active(),b=ra.hh(b,[Da.ic,Da.Kd,Da.De]),c=0;c<b.length;c++)for(var e=b[c].Hb,g=0;g<e.length;g++)for(var h=e[g].ub,d=0;d<h.length;d++){var f=h[d].hb;f&&(a+=f.num_vertices)}return a};w.num_triangles=function(){for(var a=0,b=ra.get_active(),b=ra.hh(b,[Da.ic,Da.Kd,
Da.De]),c=0;c<b.length;c++)for(var e=b[c].Hb,g=0;g<e.length;g++)for(var h=e[g].ub,d=0;d<h.length;d++){var f=h[d].hb;f&&(a+=f.num_triangles)}return a};w.num_draw_calls=function(){for(var a=ra.get_active(),b=ra.hh(a,[Da.ic,Da.Kd,Da.De,Da.Ee,Da.Dg]),c=0,e=0;e<b.length;e++)for(var g=b[e],g=g.Hb,h=0;h<g.length;h++)c+=g[h].ub.length;a=ra.hh(a,[Da.ae,Da.Sf]);for(e=0;e<a.length;e++)for(g=a[e],g=g.Hb,h=0;h<g.length;h++)c+=6*g[h].ub.length;return c};w.num_shaders=function(){return V._8(Za.yF())};w.geometry_stats=
function(){for(var a=ra.get_active(),b=ra.Qz(a),a={},c=0;c<b.length;c++){var e=b[c];if(e.type!=Da.Uk&&e.type!=Da.Vh)for(var g=e.Hb,h=0;h<g.length;h++)for(var d=g[h].ub,f=0;f<d.length;f++){var k=d[f].hb,l=d[f].ah;k&&(e.type!=Da.xf&&e.type!=Da.Wh||l.Cw||l.Bw)&&(a[k.id]=k)}}var c=b=0,m;for(m in a)e=a[m].Za,e.ro&&(c+=e.ro/1048576),b+=e.uo/1048576;return{vbo_memory:b,ibo_memory:c}};w.num_textures=function(){for(var a=[],b=0,c=ra.get_active(),c=ra.hh(c,[Da.ic,Da.Kd,Da.De]),e=0;e<c.length;e++)for(var g=
c[e].Hb,h=0;h<g.length;h++)for(var d=g[h].ub,f=0;f<d.length;f++){var k=d[f].hb;if(k)for(var k=k.Ua,l=0;l<k.length;l++){var m=k[l];if("IMAGE"===m.source||"ENVIRONMENT_MAP"===m.source){var n=m.hc;-1===a.indexOf(n)&&(a.push(n),m=m.width*m.height*4/1048576/m.$q,m*=1.3333,b+=m)}}}return{number:a.length,memory:b}};w.num_render_targets=function(){for(var a=[],b=0,c=ra.get_active(),c=ra.Qz(c),e=0;e<c.length;e++){var g=c[e];if(g.type!=Da.Uk){var h=g.qa,d=[h.vc,h.dg];d.push.apply(d,g.Sh);for(g=0;g<d.length;g++){var f=
d[g];Sa.Uo(f)&&-1==a.indexOf(f)&&(a.push(f),b+=h.width*h.height*Sa.iQ(f))}}}return{number:a.length,memory:b/1024/1024}};w.make_camera_frustum_shot=function(){var a=ra.get_active();(a=ra.xc(a,Da.ic))&&ra.EG(a.qa,a,[1,1,0])};w.make_light_frustum_shot=function(){var a=ra.get_active(),b=ra.xc(a,Da.ic),a=ra.hh(a,[Da.be]);if(b)for(var c=0;c<a.length;c++){var e=a[c],g;switch(c){case 0:g=[1,0,0];break;case 1:g=[0,1,0];break;case 2:g=[0,0,1];break;default:g=[1,0,1]}ra.EG(e.qa,b,g)}};w.scenegraph_to_dot=function(){for(var a=
ra.Fr(),b=0;b<a.length;b++)ia.log("\n"+Fa.vO(ra.nv(a[b])))};w.loading_graph_to_dot=function(a){ia.log("\n"+ga.nQ(a|0))};w.controls_info=Ia.debug;w.object_distance=function(a,b){var c=R.j(a.ka.na),e=R.j(b.ka.na);return F.dist(c,e)};w.msg=function(){Va.msg.apply(Va,arguments)};w.fbmsg=function(){Va.fbmsg.apply(Va,arguments)};w.print_telemetry=function(){Va.print_telemetry.apply(Va,arguments)};w.plot_telemetry=function(){Va.plot_telemetry.apply(Va,arguments)};w.fbres=function(a,b){function c(){Va.fbmsg("FBRES",
a());setTimeout(c,b)}b||(b=16);c()};w.assert_constants=function(){var a=new Float32Array([0,0,0,1]),b=new Float32Array([1,0,0]),c=new Float32Array([0,1,0]),e=new Float32Array([0,0,1]),g=new Float32Array([-1,0,0]),h=new Float32Array([0,-1,0]),d=new Float32Array([0,0,-1]);if(!V.P(new Float32Array(3),V.m))throw"Wrong VEC3_IDENT";if(!V.P(a,V.k))throw"Wrong QUAT4_IDENT";if(!V.P(b,V.d))throw"Wrong AXIS_X";if(!V.P(c,V.e))throw"Wrong AXIS_Y";if(!V.P(e,V.f))throw"Wrong AXIS_Z";if(!V.P(g,V.a))throw"Wrong AXIS_MX";
if(!V.P(h,V.b))throw"Wrong AXIS_MY";if(!V.P(d,V.c))throw"Wrong AXIS_MZ";};w.mute_music=function(){for(var a=fa.get_speaker_objects(),b=0;b<a.length;b++){var c=a[b];"BACKGROUND_MUSIC"==fa.Xz(c)&&fa.mute(c,!0)}};w.check_finite=function(a){return Aa.bP(a)};w.set_debug_params=function(a){var b=ra.get_active(),b=ra.hh(b,[Da.Vh]);if(b.length)for(var c=0;c<b.length;c++){var e=b[c];if("number"==typeof a.debug_view_mode)switch(a.debug_view_mode){case Ba.DV_NONE:case Ba.DV_OPAQUE_WIREFRAME:case Ba.DV_TRANSPARENT_WIREFRAME:case Ba.DV_FRONT_BACK_VIEW:case Ba.DV_BOUNDINGS:case Ba.DV_CLUSTERS_VIEW:case Ba.DV_BATCHES_VIEW:case Ba.DV_RENDER_TIME:ra.XS(e,
a.debug_view_mode);break;default:ia.error("set_debug_params(): Wrong debug view mode")}"number"==typeof a.debug_colors_seed&&ra.WS(e,a.debug_colors_seed);"number"==typeof a.zS&&ra.lT(e,a.zS);"object"==typeof a.wireframe_edge_color&&ra.uT(e,V._1(a.wireframe_edge_color))}else ia.error("Debugging is not available on the scene.")};w.get_error_quantity=function(){return ia.NP()};w.get_warning_quantity=function(){return ia.kQ()};w.clear_errors_warnings=function(){return ia.clear_errors_warnings()};w.analyze_shaders=
function(a){var b=Za.yF(),c=0,e;for(e in b)a&&-1===e.indexOf(a)||c++;var c="of "+c+" analyzing...",h={};for(e in b)if(!a||-1!==e.indexOf(a)){var d=b[e],f;f=d.ny;var k=d.ev,l=ta.IP();if(l){var m=l.getTranslatedShaderSource(f),l=l.getTranslatedShaderSource(k);if(ja.detect_mobile())var m=m.replace("#version","#version 300 //"),l=l.replace("#version","#version 300 //"),p=n("/analyze_shader/vert_gles",m),q=n("/analyze_shader/frag_gles",l);else m=m.replace("#version","#version 400 //"),l=l.replace("#version",
"#version 400 //"),p=n("/analyze_shader/vert",m),q=n("/analyze_shader/frag",l);var v=A(p),w=A(q);f={fV:Ja.mv().getShaderSource(f),gV:m,eV:p,hV:v,iP:Ja.mv().getShaderSource(k),jP:l,eP:q,Mz:w}}else ia.warn("WEBGL_debug_shaders extension not found"),f=void 0;if(f){var k=d.Lb,u=k.vg+" + "+k.ef;f.qO=d;f.Lb=k;d=h[u]=h[u]||[];d.push(f);ia.Sd(c)}}for(u in h)ia.group("%c"+u,"color: #800"),d=h[u],g(d),ia.groupEnd()};w.fake_load=function(a,b,c,e,g){(a=a||null)||Z.va("Stage load callback is undefined");b=b||
5E3;c=c||0;e=e||100;100<e&&Z.va("Max percentage must be less than 100");0>c&&Z.va("Min percentage must be greater than 0");c>e&&Z.va("Max percentage must be greater than min percentage");var h=Ga.animate(c,e,b,function(b){b=b.toFixed();a(b);100==b&&(Ga.clear_animation(h),g&&g())})};w.test_performance=function(a){if(Za.fE())if(ta.Vz()){var b=bb.gl_debug;bb.gl_debug=!0;var c=Fa.EN();ra.oF(null,c);for(var e=Fa.wc(c,Da.tq),g=e.qa,c=0;5>c;c++)na.Wj(e);bb.gl_debug=b;window.setTimeout(function(){Ra.oS(e);
var b=e.cg;a(b,g.width*g.height*40/(b/1E3)/Math.pow(10,9))},100)}else a(0,0);else window.setTimeout(function(){w.test_performance(a)},100)};w.calc_vbo_garbage_byte_size=X.calc_vbo_garbage_byte_size;w.show_vbo_garbage_info=X.show_vbo_garbage_info;w.print_batches_stat=function(){Q.print_batches_stat()};w.start_debug=function(a){Xa=[];db=!0;"string"===typeof a&&(a=O.a.require(a));for(var b in a)"function"===typeof a[b]&&(a[b]=ka(a[b]))};w.check_debug_result=function(){return db};w.test=function(a,b){var c=
ia.error,e=ia.Pa,g=ia.warn;ia.error=ia.Pa=function(){ba=ia.wE(arguments,"B4W ERROR").join(" ");Ha=!0};ia.warn=function(){sa=ia.wE(arguments,"B4W WARN").join(" ");va=!0};Ha=va=!1;try{b();var h=!0}catch(Ya){db=!1,console.error('Test "'+a+'" failed with exception: "'+Ya+'"'),Ha=va=h=!1}ia.error=c;ia.Pa=e;ia.warn=g;return h};w.pix=function(a){var b=Ca.JF(),c=Ca.IF(),e=b/2,g=c/2;Ca.resize(b,c,!1);b=ra.get_active().sa.fb;(c=Fa.aP(b))||Z.va("Couldn't find onscreen subscene");b=c.qa;e=Ca.Qq(e,g,za,c.qa);
e[1]=b.height-e[1];e=na.Rw(b.Ff,e[0],e[1],1,1,vb);E(a,e,1)};w.eqs=function(a,b,c,e){if(JSON.stringify(a)!=JSON.stringify(b))throw"debug.eqs: wrong result";M(c,e,"eqs")};w.eqv=E;w.eqf=function(a,b,c,e,g){if("number"!=typeof b||isNaN(b))throw"debug.eqf: wrong expected data type";if("number"!=typeof a||isNaN(a))throw"debug.eqf: wrong result data type";c=c?c:1E-6;if(b>a+c||b<a-c)throw"debug.eqf: wrong result";M(e,g,"eqf")};w.eq=function(a,b,c,e){if(a!==b)throw"debug.eq: wrong result";M(c,e,"eq")};w.ok=
function(a,b,c){if(!a)throw"debug.ok: wrong result";M(b,c,"ok")};w.stat=function(a){var b=[];"string"===typeof a&&(a=O.a.require(a));for(var c in a)-1==Xa.indexOf(a[c])&&"function"===typeof a[c]&&b.push(c);if(b.length){ia.groupCollapsed(b.length+" function(s) not tested.");for(a=0;a<b.length;a++)ia.Sd(b[a]);ia.groupEnd()}else ia.group("All functions were tested.")};w.show_normals=function(a,b,c,e){Ea();b=aa.$b(a,b,"MAIN");if(!ha.bk(a)||!b)return ia.error("Normals are not avaliable for the dynamic object:",
a.name),!1;var g=b.Za;if(!(g&&g.mc&&g.mc.a_position&&g.mc.a_tbn))return ia.error("Normals are not avaliable for the object:",a.name),!1;b=ha.Kz(g,"a_position");var g=ha.Kz(g,"a_normal"),h=Pa.get_tsr(a,La);ya=P.create_line("normal_line");a=new Float32Array(2*b.length);for(var d=0;d<b.length;d+=3){var f=S;f[0]=b[d+0];f[1]=b[d+1];f[2]=b[d+2];var k=R.B(f,h,Ua);a[2*d+0]=k[0];a[2*d+1]=k[1];a[2*d+2]=k[2];k=F.scale(g.subarray(d,d+3),c,Ua);f=F.add(f,k,Ua);f=R.B(f,h,Ua);a[2*d+3]=f[0];a[2*d+4]=f[1];a[2*d+5]=
f[2]}c=aa.kv(ya);ha.draw_line(c,a,!0);na.Wt(c);c.Qc.set([1,1,1,1]);c.kn=e};w.hide_normals=Ea});t.a=d},function(E,t,d){E=d(0);var O=d(15);d=Object(E.a)("__main",function(d,t){function r(b,d,h){var k=f.get_canvas();if(k.toBlob)k.toBlob(b,d,h);else{h=atob(k.toDataURL(d,h).split(",")[1]);for(var k=new Uint8Array(h.length),e=0;e<h.length;e++)k[e]=h.charCodeAt(e);b(new Blob([k],{type:d||"image/png"}))}}var f=Object(O.a)(d),k=null,y="image/png",x=1,m="",p=!1,q=!1;t.canvas_data_url=function(b,d,h,f){p=q=
"undefined"===typeof f?f:!0;k=b;y=d||y;x=h||x};t.frame=function(){var b=k;b&&(p&&m&&URL.revokeObjectURL(m),r(function(d){navigator.msSaveOrOpenBlob?b(d):(m=URL.createObjectURL(d),b(m))},y,x),k=null,y="image/png",x=1)}});t.a=d},function(E,t,d){E=d(0);var O=d(21),T=d(6);d=Object(E.a)("tsr",function(d,r){r.create=T.b;r.from_values=T.e;r.copy=T.a;r.identity=T.l;r.set_sep=T.s;r.set_trans=T.t;r.set_scale=T.r;r.set_transcale=T.u;r.set_quat=T.q;r.get_trans_view=T.j;r.get_scale=T.h;r.get_quat_view=T.g;r.invert=
T.o;r.to_mat4=function(d,k){k||(k=O.create());T.v(d,k);return k};r.from_mat4=T.d;r.multiply=T.p;r.transform_vec3=T.B;r.transform_vec3_inv=T.C;r.transform_vectors=T.D;r.transform_dir_vectors=T.x;r.transform_dir_vec3=T.w;r.transform_tangents=T.A;r.translate=T.E;r.interpolate=function(d,k,r,x){x||(x=T.b());T.n(d,k,r,x);return x}});t.a=d},function(E,t,d){E=d(0);var O=d(33),T=d(24),G=d(49),r=d(9),f=d(29),k=d(50),y=d(40),x=d(26),m=d(3);d=Object(E.a)("hmd",function(d,q){function b(){l.remove_sensor_manifold(null,
"VR_CONTROLLERS")}function p(b,e){function d(a,e,d){if(0<d&&(d=c.get_active_camera())&&h.is_eye_camera(d)){var g=l.get_sensor_payload(a,e,1);a=l.get_sensor_payload(a,e,2);a=m.add(a,F,I);t.set_translation_v(d,a);if(g)if(1==b){var g=r.multiply(V,g,R),f=m.transformQuat(E.AXIS_MY,g,I);h.set_vertical_axis(d,f);t.set_rotation_v(d,g)}else if(2==b||3==b){a=t.get_rotation(d,K);a=r.invert(a,K);e=r.multiply(v,a,K);a=h.get_vertical_axis(d,I);Math.abs(a[2])<Math.PI/4?f=m.cross(a,E.AXIS_MY,da):Math.abs(a[1])<Math.PI/
4&&(f=m.cross(a,E.AXIS_Z,da));m.normalize(f,f);e=m.transformQuat(f,e,N);var k=m.dot(a,e);e=m.scaleAndAdd(e,a,-k,N);m.normalize(e,e);a=m.cross(a,f,I);f=Math.acos(E.clamp(m.dot(f,e),0,1));a=E.sign(m.dot(e,a));B+=f*a;f=r.setAxisAngle(E.AXIS_Z,-B,K);3==b?g=r.multiply(f,g,U):(a=E.quat_project(g,E.AXIS_MZ,E.AXIS_Z,E.AXIS_Y,D),a=r.invert(a,D),g=r.multiply(a,g,D),g=r.multiply(f,g,U));f=m.transformQuat(E.AXIS_MY,g,I);h.set_vertical_axis(d,f);t.set_rotation_v(d,g);r.copy(g,v)}}}if(e){var f=c.get_active_camera();
f&&a.request_split_screen(function(){h.is_eye_camera(f)||(C=h.is_target_camera(f),L=h.is_hover_camera(f),H=h.is_static_camera(f),h.eye_setup(f));var a=l.create_elapsed_sensor(),b=l.create_hmd_position_sensor();v=t.get_rotation(f,v);l.create_sensor_manifold(null,"HMD_ROTATE_CAMERA",l.CT_CONTINUOUS,[a,e,b],null,d)})}}var h=Object(O.a)(d),l=Object(T.a)(d),e=Object(G.a)(d),c=Object(f.a)(d),a=Object(k.a)(d),t=Object(y.a)(d),E=Object(x.a)(d),v=r.create(),B=0,C=!1,L=!1,H=!1,I=m.create(),da=m.create(),N=
m.create(),U=r.create(),K=r.create(),D=r.create(),R=r.create(),V=r.create(),F=m.create(),z={pivot:m.create()};q.HMD_NONE_MOUSE_ALL_AXES=0;q.HMD_ALL_AXES_MOUSE_NONE=1;q.HMD_ROLL_PITCH_MOUSE_YAW=2;q.HMD_ALL_AXES_MOUSE_YAW=3;q.enable_hmd=function(a){var b;if(b=e.get_device_by_type_element(e.DEVICE_HMD))b=e.get_value_param(b,e.HMD_WEBVR_TYPE)&(e.HMD_WEBVR_MOBILE|e.HMD_WEBVR_DESKTOP|e.HMD_WEBVR1)?l.create_hmd_quat_sensor():l.create_gyro_quat_sensor(),p(a,b)};q.check_browser_support=function(){return!!e.can_use_device(e.DEVICE_HMD)};
q.enable_controllers=function(a,c){b();if(a||c){var h=e.get_vr_controller_id(0),d=l.create_gamepad_position_sensor(h),h=l.create_gamepad_orientation_sensor(h),g=e.get_vr_controller_id(1),f=l.create_gamepad_position_sensor(g),g=l.create_gamepad_orientation_sensor(g);l.create_sensor_manifold(null,"VR_CONTROLLERS",l.CT_CONTINUOUS,[d,f,h,g],null,function(b,e){if(a){var g=l.get_sensor_payload(b,e,0),h=l.get_sensor_payload(b,e,2);m.add(F,g,g);t.set_translation_v(a,g);t.set_rotation_v(a,h)}c&&(g=l.get_sensor_payload(b,
e,1),h=l.get_sensor_payload(b,e,3),m.add(F,g,g),t.set_translation_v(c,g),t.set_rotation_v(c,h))})}};q.disable_controllers=b;q.disable_hmd=function(){if(l.check_sensor_manifold(null,"HMD_ROTATE_CAMERA")){l.remove_sensor_manifold(null,"HMD_ROTATE_CAMERA");a.exit_split_screen();var b=c.get_active_camera();C?h.target_setup(b,z):L?h.hover_setup(b,z):H&&h.static_setup(b,z);h.set_vertical_axis(b,E.AXIS_Z);var e=t.get_rotation(b,U);t.set_rotation_v(b,e)}};q.set_rotate_quat=function(a){r.copy(a,V)};q.get_rotate_quat=
function(a){r.copy(V,a);return a};q.set_position=function(a){r.copy(a,F)};q.get_position=function(a){r.copy(F,a);return a}});t.a=d},function(E,t,d){E=d(0);var O=d(8),T=d(10),G=d(23),r=d(1);d=Object(E.a)("sfx",function(d,k){var f=Object(O.a)(d),x=Object(T.a)(d),m=Object(G.a)(d),p=Object(r.a)(d);k.play=function(d,b,f){m.play(d,b||0,f||0)};k.play_def=function(d){m.play_def(d)};k.is_playing=function(d){return m.is_playing(d)};k.stop=function(d){m.stop(d)};k.pause=function(d){m.JT(d)};k.resume=function(d){m.LT(d)};
k.loop_stop=function(d,b,f){m.loop_stop(d,b||0,f||!1)};k.playrate=function(d,b){m.playrate(d,b)};k.get_playrate=function(d){return m.get_playrate(d)};k.cyclic=function(d,b){m.cyclic(d,b)};k.is_cyclic=function(d){return m.is_cyclic(d)};k.listener_reset_speed=function(){m.listener_stride()};k.listener_stride=function(){m.listener_stride()};k.speaker_reset_speed=function(d){m.speaker_stride(d)};k.speaker_stride=function(d){m.speaker_stride(d)};k.get_volume=function(d){return d&&"object"===typeof d?m.get_volume(d):
m.ZP()};k.set_volume=function(d,b){d&&"object"===typeof d?m.set_volume(d,b):m.hT(b)};k.mute=function(d,b){d&&"object"===typeof d?m.mute(d,b):m.KR(b)};k.is_muted=function(d){return d&&"object"===typeof d?m.is_muted(d):m.OQ()};k.get_speaker_objects=function(){return m.get_speaker_objects().slice(0)};k.check_active_speakers=m.check_active_speakers;k.set_compressor_params=function(d){m.set_compressor_params(x.get_active(),d)};k.get_compressor_params=function(){return m.get_compressor_params(x.get_active())};
k.duck=function(d,b,f){d&&"object"===typeof d?m.duck(d,b,f):m.IO(b,f)};k.unduck=function(d){d&&"object"===typeof d?m.unduck(d):m.iU()};k.apply_playlist=m.apply_playlist;k.clear_playlist=m.clear_playlist;k.detect_audio_container=m.detect_audio_container;k.detect_video_container=m.detect_video_container;k.set_positional_params=m.set_positional_params;k.get_positional_params=m.get_positional_params;k.set_filter_params=m.set_filter_params;k.get_filter_params=m.get_filter_params;k.get_filter_freq_response=
m.get_filter_freq_response;k.get_duration=function(d){return d&&f.is_speaker(d)?m.get_duration(d):(p.error('Object "'+(d?d.name:void 0)+'" is not a valid speaker'),0)}});t.a=d},function(E,t,d){E=d(0);var O=d(37),T=d(8),G=d(1);d=Object(E.a)("animation",function(d,f){var k=Object(O.a)(d),r=Object(T.a)(d),x=Object(G.a)(d);f.SLOT_0=k.SLOT_0;f.SLOT_1=k.SLOT_1;f.SLOT_2=k.SLOT_2;f.SLOT_3=k.SLOT_3;f.SLOT_4=k.SLOT_4;f.SLOT_5=k.SLOT_5;f.SLOT_6=k.SLOT_6;f.SLOT_7=k.SLOT_7;f.SLOT_ALL=k.SLOT_ALL;f.OBJ_ANIM_TYPE_NONE=
k.OBJ_ANIM_TYPE_NONE;f.OBJ_ANIM_TYPE_ARMATURE=k.OBJ_ANIM_TYPE_ARMATURE;f.OBJ_ANIM_TYPE_OBJECT=k.OBJ_ANIM_TYPE_OBJECT;f.OBJ_ANIM_TYPE_VERTEX=k.OBJ_ANIM_TYPE_VERTEX;f.OBJ_ANIM_TYPE_SOUND=k.OBJ_ANIM_TYPE_SOUND;f.OBJ_ANIM_TYPE_PARTICLES=k.OBJ_ANIM_TYPE_PARTICLES;f.OBJ_ANIM_TYPE_MATERIAL=k.OBJ_ANIM_TYPE_MATERIAL;f.OBJ_ANIM_TYPE_STATIC=k.OBJ_ANIM_TYPE_STATIC;f.AB_CYCLIC=k.AB_CYCLIC;f.AB_FINISH_RESET=k.AB_FINISH_RESET;f.AB_FINISH_STOP=k.AB_FINISH_STOP;f.is_animated=function(d){return k.is_animated(d)};f.get_anim_names=
function(d){return k.$G(d)?k.get_anim_names(d):[]};f.get_current_anim_name=function(d,f){if(!k.is_animated(d))return null;f=f||k.SLOT_0;return k.wP(d,f)};f.apply=function(d,f,q){if(q>k.SLOT_7)x.error("Can't apply animation to slot "+q+' for object "'+d.name+'". Object can have maximum of 8 animation slots');else{q=q||k.SLOT_0;if(k.is_animated(d)){var b=k.get_slot_num_by_anim(d,f);if(-1!=b&&b!=q){x.error('Animation "'+f+'" is already applied to object "'+d.name+'" (slot "'+b+'").');return}}k.cJ(d,
f)?k.apply(d,null,f,q):x.error('No fcurves in action "'+f+'"')}};f.apply_ext=function(d,f,q){if(q>k.SLOT_7)x.error("Can't apply animation to slot "+q+' for object "'+d.name+'". Object can have maximum of 8 animation slots');else{q=q||k.SLOT_0;var b=f[0];k.cJ(d,b)?k.apply(d,f.slice(1),b,q):x.error('No fcurves in action "'+b+'"')}};f.remove=function(d){k.remove(d)};f.remove_slot_animation=function(d,f){k.is_animated(d)&&(f=f||k.SLOT_0,k.remove_slot_animation(d,f))};f.apply_def=function(d){k.apply_def(d)};
f.play=function(d,f,q){k.is_animated(d)?(q=q||k.SLOT_0,k.play(d,f,q),k.BU(d,0,q,!0)):x.error('Object "'+d.name+'" has no applied animation')};f.stop=function(d,f){k.is_animated(d)&&(f=f||k.SLOT_0,k.stop(d,f))};f.is_play=function(d,f){if(!k.is_animated(d))return!1;f=f||k.SLOT_0;return k.is_play(d,f)};f.set_frame=function(d,f,q){k.is_animated(d)&&(q=q||k.SLOT_0,k.set_frame(d,f,q))};f.set_first_frame=function(d,f){k.is_animated(d)&&k.set_first_frame(d,f)};f.set_last_frame=function(d,f){if(k.is_animated(d)){f=
f||k.SLOT_0;var m=k.get_anim_start_frame(d,f),b=k.get_anim_length(d,f);k.set_frame(d,m+b-k.NJ,f)}};f.get_frame=function(d,f){if(!k.is_animated(d))return 0;f=f||k.SLOT_0;return k.Tz(d,f)};f.set_speed=function(d,f,q){k.is_animated(d)&&(q=q||k.SLOT_0,k.set_speed(d,f||1,q))};f.get_speed=function(d,f){if(!k.is_animated(d))return 0;f=f||k.SLOT_0;return d.Xa[f]?k.get_speed(d,f):0};f.get_anim_start_frame=function(d,f){return k.is_animated(d)&&(f=f||k.SLOT_0,d.Xa[f])?k.get_anim_start_frame(d,f):-1};f.get_anim_length=
function(d,f){return k.is_animated(d)&&(f=f||k.SLOT_0,d.Xa[f])?k.get_anim_length(d,f):-1};f.set_behavior=function(d,f,q){k.is_animated(d)&&(q=q||k.SLOT_0,k.set_behavior(d,f,q))};f.get_behavior=function(d,f){if(!k.is_animated(d))return null;f=f||k.SLOT_0;return k.get_behavior(d,f)};f.apply_smoothing=function(d,f,q,b){b=b||k.SLOT_0;k.is_animated(d)&&k.apply_smoothing(d,f,q,b)};f.frame_to_sec=function(d){return k.frame_to_sec(d)};f.get_slot_num_by_anim=function(d,f){return k.is_animated(d)&&f?k.get_slot_num_by_anim(d,
f):-1};f.get_anim_type=function(d,f){return k.is_animated(d)?k.get_anim_type(d,f):null};f.apply_to_first_empty_slot=function(d,f){return k.apply_to_first_empty_slot(d,f)};f.get_skel_mix_factor=function(d){return d.ka.Wf};f.set_skel_mix_factor=function(d,f,q,b){r.is_armature(d)?(f=Math.min(Math.max(f,0),1),d.ka.Wf!=f&&k.set_skel_mix_factor(d,f,q||0,b||null)):x.error("Can't blend animation. Object \""+d.name+'" is not armature')};f.set_skeletal_slots=function(d,f,k,b){f=void 0==f?-1:f;k=void 0==f?-1:
k;var m=d.ka.Mi;0<=f&&(m[0]=f);0<=k&&(m[1]=k);d.ka.Wf=b||0};f.get_first_skeletal_slot=function(d){return d.ka.Mi[0]};f.get_second_skeletal_slot=function(d){return d.ka.Mi[1]};f.mix_from_cur_pos=function(d,f,q,b){k.mix_from_cur_pos(d,f,q||0,b||null)}});t.a=d},function(E,t,d){Object.defineProperty(t,"__esModule",{value:!0});E=d(32);var O=d(85),T=d(94),G=d(95),r=d(96),f=d(97),k=d(81),y=d(98),x=d(99),m=d(100),p=d(101),q=d(102),b=d(103),u=d(69),h=d(104),l=d(83),e=d(105),c=d(106),a=d(33),ca=d(76),la=d(67),
v=d(39),B=d(24),C=d(77),L=d(78),H=d(107),I=d(108),da=d(49),N=d(109),U=d(110),K=d(60),D=d(111),R=d(112),V=d(113),F=d(114),z=d(115),w=d(54),W=d(116),A=d(29),n=d(50),g=d(82),ea=d(117),ka=d(68),wa=d(40),M=d(80),Ea=d(26),Z=d(118),aa=d(1),oa=d(3),ja=d(7),Ia=d(27),Ca=d(21),Ja=d(9);E.a.app=O.a;E.a.wW=T.a;E.a.zh=G.a;E.a.jX=r.a;E.a.kX=f.a;E.a.oX=k.a;E.a.pX=y.a;E.a.PX=x.a;E.a.QX=m.a;E.a.TX=p.a;E.a.WX=q.a;E.a.fY=b.a;E.a.Dx=u.a;E.a.anchors=h.a;E.a.Xk=l.a;E.a.oW=e.a;E.a.pe=c.a;E.a.qa=a.a;E.a.AW=ca.a;E.a.BW=la.a;
E.a.DW=v.a;E.a.controls=B.a;E.a.data=C.a;E.a.debug=L.a;E.a.ff=H.a;E.a.qX=I.a;E.a.input=da.a;E.a.gj=N.a;E.a.JX=U.a;E.a.LX=K.a;E.a.NX=D.a;E.a.OX=R.a;E.a.SX=V.a;E.a.Tb=F.a;E.a.VX=z.a;E.a.xa=w.a;E.a.$X=W.a;E.a.An=A.a;E.a.screen=n.a;E.a.Qa=g.a;E.a.Ua=ea.a;E.a.time=ka.a;E.a.transform=wa.a;E.a.rY=M.a;E.a.vY=Ea.a;E.a.version=Z.a;E.a.print=aa.a;E.a.vec3=oa;E.a.vec4=ja;E.a.mat3=Ia;E.a.mat4=Ca;E.a.quat=Ja;E.a.register("vec3",function(a){for(var b in oa)a[b]=oa[b]});E.a.register("vec4",function(a){for(var b in ja)a[b]=
ja[b]});E.a.register("mat3",function(a){for(var b in Ia)a[b]=Ia[b]});E.a.register("mat4",function(a){for(var b in Ca)a[b]=Ca[b]});E.a.register("quat",function(a){for(var b in Ja)a[b]=Ja[b]});t["default"]=E.a},function(E,t,d){E=d(0);var O=d(33),T=d(76),G=d(67),r=d(39),f=d(24),k=d(77),y=d(78),x=d(49),m=d(60),p=d(54),q=d(1),b=d(50),u=d(29),h=d(40),l=d(26),e=d(3);d=Object(E.a)("app",function(c,a){function d(){var a=M.is_paused();document.addEventListener("visibilitychange",function(){document.hidden?
(a=M.is_paused(),M.pause()):a||M.resume()},!1)}function t(){var a=0,b=n.get_container(),c=M.is_paused(),e=!0;M.append_loop_cb(function(){if(!(a%10)){var g=b.getBoundingClientRect();g.top>window.innerHeight||0>g.bottom?(e&&(c=M.is_paused()),M.pause(),e=!1):c||e||(M.resume(),e=!0)}a++})}function v(a,b,c,e){var g=document.createElement("canvas"),d=document.getElementById(a);d||(Z.error('Warning: canvas container "'+a+'" not found, appending to body'),d=document.body);g.style.position="absolute";g.style.left=
0;g.style.top=0;g.style.width=d.offsetWidth+"px";g.style.height=d.offsetHeight+"px";g.width=d.offsetWidth*window.devicePixelRatio;g.height=d.offsetHeight*window.devicePixelRatio;b?(a=document.createElement("canvas"),a.style.position="absolute",g.style.left=0,g.style.top=0,a.style.pointerEvents="none"):a=null;d.appendChild(g);if(!M.init(g,a))return c&&F("Browser could not initialize WebGL","For more info visit","https://www.blend4web.com/doc/en/problems_and_solutions.html#problems-upon-startup",e),
!1;a&&n.insert_to_container(a,"LAST");return!0}function B(a,b){a?(b&&(document.getElementById(b).style.display="block"),Ja=document.getElementById(a)):(Ja=document.createElement("div"),Ja.innerHTML=0,Ja.style.cssText="position:absolute;font-family: Arial, sans-serif;top: 20px;right: 20px;text-shadow: 0px 0px 6px #000;font-size: 40px;line-height: 50px;font-weight: bold;color: #fff;",n.insert_to_container(Ja,"JUST_AFTER_CANVAS"))}function C(a,b){var c=String(a);b&&(c+="/"+String(b));Ja.innerHTML=c}
function L(a){a=document.getElementById(a);var b=a.cloneNode(!0);a.parentNode.replaceChild(b,a);return b}function H(a,b,c){var g=Math.max(w.hover_get_distance(a),1),d=ja.get_rotation(a,P);b=Ia.quat_to_dir(d,b,ha);b[2]=0;e.normalize(b,b);e.scale(b,g*c,b);c=ja.get_translation(a,ga);e.add(c,b,c);w.set_translation(a,c)}function I(a,b){var c=w.hover_get_vertical_limits(a,pa);if(c.up!=c.down){var e=w.get_camera_angles(a,ta)[1],c=(c.down-e)/(c.down-c.up),e=w.hover_get_distance_limits(a,pa),c=Math.max(c,
2/e.max);w.rotate_camera(a,0,c*b)}}function E(a,b,c,e){ja.move_local(a,5*b,5*c,5*e)}function N(a,b,c){var e=w.target_get_distance(a),g=Math.abs(b);c=Math.pow(g*c,1-Math.pow(g*c,.15));ja.move_local(a,0,0,0>b?.001<e?-e*c:0:c/(1-c)*e)}function U(a,b,c,e){for(var g=c*b;0<a;--a)c+=g,e+=g,g=c*b;return e}function K(a,b,c,g,d){d?(d=w.target_get_pivot(a,ha),a=w.get_translation(a),a=e.dist(d,a)+g,g=0<b?U(b,-c,a,g):U(-b,c/(1-c),a,g)):g-=2*b*c;return g}function D(a,b,c,d,h,f){function k(a,b,c,e){if(1==c){w.get_velocities(a,
y);var d=x?.003*y.trans:.003*y.rot;c=g.get_sensor_value(a,b,0);g.get_sensor_payload(a,b,0).gesture===g.PL_SINGLE_TOUCH_MOVE?(Fa+="X"==e?-c*d:0,Ja+="Y"==e?-c*d:0):g.get_sensor_payload(a,b,0).gesture===g.PL_MULTITOUCH_MOVE_PAN&&(a=x?.003*y.rot:7.5E-4*y.trans,Za+="X"==e?-c*a:0,qb+="Y"==e?-c*a:0)}}function l(a,b,c,e){if(1==c){c=g.get_sensor_value(a,b,1);w.get_velocities(a,y);if(x)d=.003*y.trans,h=7.5E-4*y.rot;else var d=.003*y.rot,h=7.5E-4*y.trans;if(1===g.get_sensor_payload(a,b,0).which)aa+="X"==e?-c*
d:0,la+="Y"==e?-c*d:0;else if(2===g.get_sensor_payload(a,b,0).which||3===g.get_sensor_payload(a,b,0).which)ia+="X"==e?-c*h:0,na+="Y"==e?-c*h:0}}function n(a){return a[0]&&(a[1]||a[2]||-.1>a[3])}function m(a){return a[0]&&(a[1]||a[2]||.1<a[3])}function p(a){return a[0]&&(a[1]||-.1>a[2])}function q(a){return a[0]&&(a[1]||.1<a[2])}function v(a){return a[0]&&(a[1]||a[2]||a[3])}function u(a,b,c){if(1==c)switch(c=g.get_sensor_value(a,b,0),w.get_velocities(a,y),b){case "FORWARD":r?F[0]=1:x?(b=w.get_camera_angles(a,
ta)[1],b=Math.abs(b)>=Math.PI/4?Ia.AXIS_Y:Ia.AXIS_MZ,H(a,b,.5*y.trans*c)):z?N(a,-y.zoom,c):E(a,0,0,-y.trans*c);break;case "BACKWARD":r?F[0]=-1:x?(b=w.get_camera_angles(a,ta)[1],b=Math.abs(b)>=Math.PI/4?Ia.AXIS_MY:Ia.AXIS_Z,H(a,b,.5*y.trans*c)):z?N(a,y.zoom,c):E(a,0,0,y.trans*c);break;case "UP":x?I(a,30*-y.zoom*c):r||E(a,0,y.trans*c,0);break;case "DOWN":x?I(a,30*y.zoom*c):r||E(a,0,-y.trans*c,0);break;case "LEFT":r?F[1]=1:x?H(a,Ia.AXIS_MX,.5*y.trans*c):E(a,-y.trans*c,0,0);break;case "RIGHT":r?F[1]=
-1:x?H(a,Ia.AXIS_X,.5*y.trans*c):E(a,y.trans*c,0,0);break;case "ROT_LEFT":z?w.rotate_camera(a,.75*-y.rot*c,0):w.rotate_camera(a,.75*y.rot*c,0);break;case "ROT_RIGHT":z?w.rotate_camera(a,.75*y.rot*c,0):w.rotate_camera(a,.75*-y.rot*c,0);break;case "ROT_UP":z?w.rotate_camera(a,0,.75*-y.rot*c):w.rotate_camera(a,0,.75*y.rot*c);break;case "ROT_DOWN":z?w.rotate_camera(a,0,.75*y.rot*c):w.rotate_camera(a,0,.75*-y.rot*c)}else switch(b){case "FORWARD":case "BACKWARD":r&&(F[0]=0);break;case "LEFT":case "RIGHT":r&&
(F[1]=0)}r&&(Ea.set_character_move_dir(r,F[0],F[1]),a=w.get_camera_angles_char(a,Ra),Ea.set_character_rotation_h(r,a[0]),Ea.set_character_vert_move_dir_angle(r,a[1]))}Ma=a;X=b;Q=c;Aa=d;Ba=h;Va=f;var C=oa.get_active_camera();R(C);var z=!1,r=null,x=!1;switch(w.get_move_style(C)){case w.MS_TARGET_CONTROLS:z=!a;break;case w.MS_EYE_CONTROLS:r=oa.get_first_character();break;case w.MS_STATIC:return;case w.MS_HOVER_CONTROLS:x=!0}var y=w.get_velocities(C,xa);a=g.create_elapsed_sensor();if(Ea.has_simulated_physics(C)){var t=
g.create_collision_sensor(C,null,!0);g.create_sensor_manifold(C,"CAMERA_COLLISION",g.CT_POSITIVE,[t],null,function(a,b){var c=g.get_sensor_payload(a,b,0).coll_dist;if(0>c){var d=g.get_sensor_payload(a,b,0).coll_norm,h=ha;e.scale(d,-.25*c,h);c=ja.get_translation(a,ga);e.add(c,h,c);ja.set_translation_v(a,c)}})}if(r){var t=ja.get_translation(C),B=ja.get_rotation(C),B=Ia.cam_quat_to_mesh_quat(B);t[2]-=.5;Ea.set_transform(r,t,B);A.append_stiff_trans(C,r,[0,0,.5]);var F=new Float32Array(2),L=!0;Ea.set_character_move_type(r,
Ea.CM_FLY);g.create_kb_sensor_manifold(C,"TOGGLE_CHAR_MOVE_TYPE",g.CT_SHOT,g.KEY_C,function(){L=!L;Ea.set_character_move_type(r,L?Ea.CM_FLY:Ea.CM_WALK)})}var D,M,G,ka,V,W,ea,ca,O;f?t=B=W=ea=ca=O=g.create_custom_sensor(0):(O=wa.check_enable_gamepad_indices(),B=O.length?O[O.length-1]:0,t=g.create_gamepad_btn_sensor(wa.GMPD_BUTTON_6,B),B=g.create_gamepad_btn_sensor(wa.GMPD_BUTTON_7,B),W=g.create_gamepad_axis_sensor(wa.GMPD_AXIS_0,O),ea=g.create_gamepad_axis_sensor(wa.GMPD_AXIS_1,O),ca=g.create_gamepad_axis_sensor(wa.GMPD_AXIS_2,
O),O=g.create_gamepad_axis_sensor(wa.GMPD_AXIS_3,O));b?b=D=M=G=ka=V=g.create_custom_sensor(0):(b=g.create_keyboard_sensor(g.KEY_W),D=g.create_keyboard_sensor(g.KEY_S),M=g.create_keyboard_sensor(g.KEY_A),G=g.create_keyboard_sensor(g.KEY_D),ka=g.create_keyboard_sensor(g.KEY_R),V=g.create_keyboard_sensor(g.KEY_F));var J=g.create_keyboard_sensor(g.KEY_UP),P=g.create_keyboard_sensor(g.KEY_DOWN),da=g.create_keyboard_sensor(g.KEY_LEFT),Z=g.create_keyboard_sensor(g.KEY_RIGHT);x||(g.create_sensor_manifold(C,
"FORWARD",g.CT_CONTINUOUS,[a,b,ea],p,u),g.create_sensor_manifold(C,"BACKWARD",g.CT_CONTINUOUS,[a,D,ea],q,u));z?(g.create_sensor_manifold(C,"ROT_UP",g.CT_CONTINUOUS,[a,J,ka,O],n,u),g.create_sensor_manifold(C,"ROT_DOWN",g.CT_CONTINUOUS,[a,P,V,O],m,u),g.create_sensor_manifold(C,"ROT_LEFT",g.CT_CONTINUOUS,[a,da,M,ca],n,u),g.create_sensor_manifold(C,"ROT_RIGHT",g.CT_CONTINUOUS,[a,Z,G,ca],m,u)):x?(g.create_sensor_manifold(C,"LEFT",g.CT_CONTINUOUS,[a,da,M,W],n,u),g.create_sensor_manifold(C,"RIGHT",g.CT_CONTINUOUS,
[a,Z,G,W],m,u),g.create_sensor_manifold(C,"FORWARD",g.CT_CONTINUOUS,[a,J,b,ea],n,u),g.create_sensor_manifold(C,"BACKWARD",g.CT_CONTINUOUS,[a,P,D,ea],m,u),g.create_sensor_manifold(C,"UP",g.CT_CONTINUOUS,[a,V,O],q,u),g.create_sensor_manifold(C,"DOWN",g.CT_CONTINUOUS,[a,ka,O],p,u)):(g.create_sensor_manifold(C,"UP",g.CT_CONTINUOUS,[a,ka,t],v,u),g.create_sensor_manifold(C,"DOWN",g.CT_CONTINUOUS,[a,V,B],v,u),g.create_sensor_manifold(C,"LEFT",g.CT_CONTINUOUS,[a,M,W],p,u),g.create_sensor_manifold(C,"RIGHT",
g.CT_CONTINUOUS,[a,G,W],q,u),g.create_sensor_manifold(C,"ROT_UP",g.CT_CONTINUOUS,[a,J,O],p,u),g.create_sensor_manifold(C,"ROT_DOWN",g.CT_CONTINUOUS,[a,P,O],q,u),g.create_sensor_manifold(C,"ROT_LEFT",g.CT_CONTINUOUS,[a,da,ca],p,u),g.create_sensor_manifold(C,"ROT_RIGHT",g.CT_CONTINUOUS,[a,Z,ca],q,u));if(!c){var U=0;c=g.create_mouse_wheel_sensor(d);var T=0;ea=g.create_touch_zoom_sensor(d);g.create_sensor_manifold(C,"MOUSE_WHEEL",g.CT_LEVEL,[c],null,function(a,b,c){1==c&&(b=g.get_sensor_value(a,b,0),
w.get_velocities(a,y),z||x?U=K(a,b,y.zoom,U,z):(y.trans*=1+b*y.zoom,w.set_velocities(a,y)))});g.create_sensor_manifold(C,"TOUCH_ZOOM",g.CT_LEVEL,[ea],null,function(a,b,c){1==c&&(c=g.get_sensor_value(a,b,0),w.get_velocities(a,y),g.get_sensor_payload(a,b,0)===g.PL_MULTITOUCH_MOVE_ZOOM&&(T=K(a,c,.03*y.zoom,T,z)))});g.create_sensor_manifold(C,"ZOOM_INTERPOL",g.CT_POSITIVE,[a],null,function(a,b){if(z||x)if(1E-5<Math.abs(U)||1E-5<Math.abs(T)){var c=g.get_sensor_value(a,b,0),e=Ia.smooth(U,0,c,.1*Ca);U-=
e;c=Ia.smooth(T,0,c,.15*Ca);T-=c;x?I(a,-(e+c)):(e=w.target_get_distance(a)+e+c,e=Math.max(e,.001),w.target_set_distance(a,e))}else T=U=0})}var aa=0,la=0,ia=0,na=0,pa=0,fa=0;f||(f=function(a){w.get_velocities(a,y);pa+=.002*y.trans},c=function(a){w.get_velocities(a,y);fa+=.05*y.zoom},ea=function(a){w.get_velocities(a,y);pa-=.002*y.trans},O=function(a){w.get_velocities(a,y);fa-=.05*y.zoom},z?(g.create_sensor_manifold(C,"GMPD_PAN_Y_POS",g.CT_CONTINUOUS,[t],null,c),g.create_sensor_manifold(C,"GMPD_PAN_Y_NEG",
g.CT_CONTINUOUS,[B],null,O),g.create_sensor_manifold(C,"GMPD_PAN_X_POS",g.CT_CONTINUOUS,[W],function(a){return-.1>a[0]},ea),g.create_sensor_manifold(C,"GMPD_PAN_X_NEG",g.CT_CONTINUOUS,[W],function(a){return.1<a[0]},f)):x&&(g.create_sensor_manifold(C,"GMPD_PAN_X_POS",g.CT_CONTINUOUS,[ca],function(a){return-.1>a[0]},ea),g.create_sensor_manifold(C,"GMPD_PAN_X_NEG",g.CT_CONTINUOUS,[ca],function(a){return.1<a[0]},f)));if(h){h=g.create_mouse_move_sensor("X",window);f=g.create_mouse_move_sensor("Y",window);
t=g.create_mouse_click_sensor(d);c=g.create_mouse_click_sensor(window);var ra=!1,B=function(a){a[2]?ra=!0:a[0]||(ra=!1);return ra&&a[0]};g.create_sensor_manifold(C,"MOUSE_X",g.CT_POSITIVE,[c,h,t],B,l,"X");g.create_sensor_manifold(C,"MOUSE_Y",g.CT_POSITIVE,[c,f,t],B,l,"Y");h=wa.get_device_by_type_element(wa.DEVICE_MOUSE,window);wa.switch_prevent_default(h,!1)}else h=g.create_mouse_move_sensor("X",d),f=g.create_mouse_move_sensor("Y",d),t=g.create_mouse_click_sensor(d),g.create_sensor_manifold(C,"MOUSE_X",
g.CT_POSITIVE,[t,h],null,l,"X"),g.create_sensor_manifold(C,"MOUSE_Y",g.CT_POSITIVE,[t,f],null,l,"Y");var Fa=0,Ja=0,Za=0,qb=0;h=g.create_touch_move_sensor("X",d);d=g.create_touch_move_sensor("Y",d);g.create_sensor_manifold(C,"TOUCH_X",g.CT_POSITIVE,[h],null,k,"X");g.create_sensor_manifold(C,"TOUCH_Y",g.CT_POSITIVE,[d],null,k,"Y");g.create_sensor_manifold(C,"ROT_TRANS_INTERPOL",g.CT_POSITIVE,[a],null,function(a,b){if(1E-5<Math.abs(aa)||1E-5<Math.abs(la)||1E-5<Math.abs(Fa)||1E-5<Math.abs(Ja)||1E-5<Math.abs(ia)||
1E-5<Math.abs(na)||1E-5<Math.abs(Za)||1E-5<Math.abs(qb)||1E-5<Math.abs(pa)||1E-5<Math.abs(fa)){var c=g.get_sensor_value(a,b,0),e=Ia.smooth(aa,0,c,.08*Ca),d=Ia.smooth(la,0,c,.08*Ca);aa-=e;la-=d;var h=Ia.smooth(Fa,0,c,.12*Ca),f=Ia.smooth(Ja,0,c,.12*Ca);Fa-=h;Ja-=f;var k=Ia.smooth(ia,0,c,.08*Ca),l=Ia.smooth(na,0,c,.08*Ca);ia-=k;na-=l;var n=Ia.smooth(Za,0,c,.12*Ca),m=Ia.smooth(qb,0,c,.12*Ca);Za-=n;qb-=m;var p=Ia.smooth(pa,0,c,.08*Ca),c=Ia.smooth(fa,0,c,.08*Ca);pa-=p;fa-=c;z?(w.rotate_camera(a,e+h,d+f),
d=w.target_get_distance(a),w.target_pan_pivot(a,d*(k+n+p),d*(l+m+c))):x?(e+h&&H(a,Ia.AXIS_X,.2*(e+h)),d+f&&(l=w.get_camera_angles(a,ta)[1],H(a,Math.abs(l)>Math.PI/4?Ia.AXIS_MY:Ia.AXIS_Z,.2*(d+f))),w.rotate_camera(a,k+n+p,0)):(w.rotate_camera(a,.5*(e+h),.5*(d+f)),r&&(k=w.get_camera_angles_char(a,Ra),Ea.set_character_rotation_h(r,k[0]),Ea.set_character_vert_move_dir_angle(r,k[1])))}});g.create_kb_sensor_manifold(C,"DEC_STEREO_DIST",g.CT_SHOT,g.KEY_LEFT_SQ_BRACKET,function(a){var b=w.get_stereo_distance(a);
w.set_stereo_distance(a,.9*b)});g.create_kb_sensor_manifold(C,"INC_STEREO_DIST",g.CT_SHOT,g.KEY_RIGHT_SQ_BRACKET,function(a){var b=w.get_stereo_distance(a);w.set_stereo_distance(a,1.1*b)})}function R(a){var b=w.get_move_style(a),c=g.create_callback_sensor(function(){var c=w.get_move_style(a),e=c!=b;b=c;return e});g.create_sensor_manifold(a,"CHANGE_MOVE_STYLE",g.CT_POSITIVE,[c],null,function(){V();D(Ma,X,Q,Aa,Ba,Va)})}function V(){var a=oa.get_active_camera();g.check_sensor_manifold(a,"TOGGLE_CHAR_MOVE_TYPE")&&
oa.get_first_character()&&A.remove(a);for(var b="FORWARD BACKWARD ROT_UP ROT_DOWN ROT_LEFT ROT_RIGHT UP DOWN LEFT RIGHT MOUSE_WHEEL TOUCH_ZOOM ZOOM_INTERPOL MOUSE_X MOUSE_Y TOUCH_X TOUCH_Y ROT_TRANS_INTERPOL CHANGE_MOVE_STYLE TOGGLE_CHAR_MOVE_TYPE".split(" "),c=0;c<b.length;c++)g.remove_sensor_manifold(a,b[c])}function F(a,b,c,e){var g=document.createElement("div"),d=document.createElement("div"),h=document.createElement("div");if(e)for(var f=0;f<e.length;f++){var k=document.getElementById(e[f]);
k&&k.parentNode.removeChild(k)}g.style.cssText="z-index:10;width:100%;height:auto;position:absolute;top:50%;margin-top:150px;text-align:center;";d.style.cssText="color:#fff;font-size:24px;";h.style.cssText="color:#fff;font-size:20px;";d.innerHTML=a;h.innerHTML=b+'   <a style="color:#fff;font-size:20px;width:100%;" href="'+c+'">'+c.replace("https://www.","")+"</a>";g.appendChild(d);g.appendChild(h);document.body.appendChild(g)}function z(a,b,c,e,g){function d(){var f=performance.now()-h;g(b+f*(c-b)/
e);(f>=e||!a.parentNode)&&M.remove_loop_cb(d)}var h=performance.now();M.append_loop_cb(d)}var w=Object(O.a)(c),W=Object(T.a)(c),A=Object(G.a)(c),n=Object(r.a)(c),g=Object(f.a)(c),ea=Object(k.a)(c),ka=Object(y.a)(c),wa=Object(x.a)(c),M=Object(m.a)(c),Ea=Object(p.a)(c),Z=Object(q.a)(c),aa=Object(b.a)(c),oa=Object(u.a)(c),ja=Object(h.a)(c),Ia=Object(l.a)(c),Ca=1,Ja=null,Ma=!1,X=!1,Q=!1,Aa=null,Ba=!1,Va=!1,Ra=new Float32Array(2),ta=new Float32Array(2),ha=new Float32Array(3),ga=new Float32Array(3),P=new Float32Array(4),
xa={},pa={};a.init=function(a){function b(){var a=v(f,K,z,k),b=n.get_canvas();if(a){var c=n.get_container();n.resize_to_container();x&&(B(l,p),M.set_fps_callback(C));u&&(d(),t());m&&M.append_loop_cb(function(){c.style.height=c.clientWidth/m+"px"});h&&M.append_loop_cb(function(){n.resize_to_container()});A&&M.append_loop_cb(function(){n.force_offsets_updating()});w&&W.reset_limits();F==W.P_AUTO?ka.test_performance(function(a,c){0==a?(Z.log("QUALITY TEST RESULT: UNSUPPORTED, using HIGH"),W.apply_quality(W.P_HIGH)):
1.5>c?(Z.log("QUALITY TEST RESULT: LOW ("+c.toFixed(1)+" GB/s)"),W.apply_quality(W.P_LOW)):(Z.log("QUALITY TEST RESULT: HIGH ("+c.toFixed(1)+" GB/s)"),W.apply_quality(W.P_HIGH));e(b,!0)}):e(b,!0)}else e(b,!1)}function c(a){a.keyCode==g.KEY_P&&(M.is_paused()?M.resume():M.pause())}function e(){}a=a||{};var h=!1,f=null,k=null,l=null,m=0,p=null,q=!0,w=!1,u=!0,z=!0,r=!1,x=!1,y=!1,A=!1,F=W.get("quality"),L;for(L in a)switch(L){case "canvas_container_id":f=a.canvas_container_id;break;case "callback":e=a.callback;
break;case "autoresize":h=a.autoresize;break;case "show_hud_debug_info":y=a.show_hud_debug_info;break;case "sfx_mix_mode":r=a.sfx_mix_mode;break;case "show_fps":x=a.show_fps;break;case "track_container_position":A=a.track_container_position;Z.Pa("track_container_position deprecated. Not needed anymore. Use the container.get_coords_target_space method.");break;case "fps_wrapper_id":p=a.fps_wrapper_id;break;case "fps_elem_id":l=a.fps_elem_id;break;case "error_purge_elements":k=a.error_purge_elements;
break;case "report_init_failure":z=a.report_init_failure;break;case "pause_invisible":u=a.pause_invisible;break;case "key_pause_enabled":q=a.key_pause_enabled;break;case "force_container_ratio":m=a.force_container_ratio;break;case "min_capabilities":w=a.min_capabilities;break;case "quality":F=a.quality;break;default:W.set(L,a[L])}F!=W.P_AUTO&&W.set("quality",F);q&&document.addEventListener("keydown",c,!1);W.set("show_hud_debug_info",y);W.set("sfx_mix_mode",r);var K=y||r||null;"complete"==document.readyState?
window.setTimeout(b,0):window.addEventListener("load",b,!1);window.addEventListener("unload",function(){ea.cleanup()},!1)};a.set_onclick=function(a,b){var c=L(a);c.addEventListener("mouseup",function(){b(c.value)},!1)};a.set_onchange=function(a,b){var c=L(a);c.addEventListener("change",function(){var a=c.checked;b(void 0!=a?a:c.value)},!1)};a.set_onkeypress=function(a,b){var c=L(a);c.addEventListener("keypress",function(a){b(a.keyCode,c.value)},!1)};a.enable_camera_controls=D;a.disable_camera_controls=
V;a.enable_object_controls=function(a){function b(a){return a[0]&&(a[1]||a[2])}function c(a,b,c){if(1==c)switch(c=g.get_sensor_value(a,b,0),b){case "FORWARD":e?Ea.vehicle_throttle(a,1):ja.move_local(a,0,-1*c,0);break;case "BACKWARD":e?Ea.vehicle_throttle(a,-1):ja.move_local(a,0,1*c,0);break;case "LEFT":e?Ea.vehicle_steer(a,-1):ja.move_local(a,1*c,0,0);break;case "RIGHT":e?Ea.vehicle_steer(a,1):ja.move_local(a,-1*c,0,0)}else switch(b){case "FORWARD":case "BACKWARD":e&&Ea.vehicle_throttle(a,0);break;
case "LEFT":case "RIGHT":e&&Ea.vehicle_steer(a,0)}}var e=Ea.is_vehicle_chassis(a)||Ea.is_vehicle_hull(a),d=g.create_elapsed_sensor(),h=g.create_keyboard_sensor(g.KEY_W),f=g.create_keyboard_sensor(g.KEY_S),k=g.create_keyboard_sensor(g.KEY_A),l=g.create_keyboard_sensor(g.KEY_D),n=g.create_keyboard_sensor(g.KEY_UP),m=g.create_keyboard_sensor(g.KEY_DOWN),p=g.create_keyboard_sensor(g.KEY_LEFT),q=g.create_keyboard_sensor(g.KEY_RIGHT);g.create_sensor_manifold(a,"FORWARD",g.CT_CONTINUOUS,[d,h,n],b,c);g.create_sensor_manifold(a,
"BACKWARD",g.CT_CONTINUOUS,[d,f,m],b,c);g.create_sensor_manifold(a,"LEFT",g.CT_CONTINUOUS,[d,k,p],b,c);g.create_sensor_manifold(a,"RIGHT",g.CT_CONTINUOUS,[d,l,q],b,c)};a.disable_object_controls=function(a){for(var b=["FORWARD","BACKWARD","LEFT","RIGHT"],c=0;c<b.length;c++)g.remove_sensor_manifold(a,b[c])};a.enable_debug_controls=function(){g.create_kb_sensor_manifold(null,"CAMERA_SHOT",g.CT_SHOT,g.KEY_K,function(){ka.make_camera_frustum_shot()});g.create_kb_sensor_manifold(null,"LIGHT_SHOT",g.CT_SHOT,
g.KEY_L,function(){ka.make_light_frustum_shot()});g.create_kb_sensor_manifold(null,"TELEMETRY",g.CT_SHOT,g.KEY_T,function(){ka.plot_telemetry()})};a.request_fullscreen=function(a,b,c){Z.df("request_fullscreen","screen.request_fullscreen");aa.request_fullscreen(a,b,c)};a.exit_fullscreen=function(){Z.df("exit_fullscreen","screen.exit_fullscreen");aa.exit_fullscreen()};a.check_fullscreen=function(){Z.df("check_fullscreen","screen.check_fullscreen");return aa.check_fullscreen()};a.report_app_error=F;
a.get_url_params=function(a){a=!!a;var b=decodeURIComponent(location.href.toString());if(-1==b.indexOf("?"))return null;for(var b=b.split("?")[1].split("&"),c={},e=0;e<b.length;e++){var g=b[e].split("="),d=g[0];1<g.length?(g=g[1],a?d in c?c[d].push(g):c[d]=[g]:c[d]=g):a?d in c||(c[d]=[]):c[d]=""}return c};a.css_animate=function(a,b,c,e,g,d,h,f){if(a&&b&&isFinite(c)&&isFinite(e)&&isFinite(g)){d=d||"";h=h||"";f=f||function(){};var k=a.style,l=b.charAt(0).toUpperCase()+b.slice(1);if(void 0==k[b])if(void 0!=
k["webkit"+l])b="webkit"+l;else if(void 0!=k["ms"+l])b="ms"+l;else if(void 0!=k["moz"+l])b="moz"+l;else return;z(a,c,e,g,function(g){a&&(k[b]=d+g+h,c>e&&g<=e||c<e&&g>=e)&&(k[b]=d+e+h,f())})}};a.attr_animate=function(a,b,c,e,g,d){a&&b&&isFinite(c)&&isFinite(e)&&isFinite(g)&&(d=d||function(){},z(a,c,e,g,function(g){a&&(0<=g&&a.setAttribute(b,g),c>e&&g<=e||c<e&&g>=e)&&(a.setAttribute(b,e),d())}))};a.queue_animate=function(b){if(b.length){var c=b.shift(),e=c.elem,g=c.prop,d=c.from,h=c.to,f=c.duration,
k=c.opt_prefix,l=c.opt_suffix,n=function(){c.cb&&c.cb();a.queue_animate(b)};"css"==c.type?a.css_animate(e,g,d,h,f,k,l,n):"attr"==c.type&&a.attr_animate(e,g,d,h,f,n)}};a.set_camera_smooth_factor=function(a){Ca=a};a.get_camera_smooth_factor=function(){return Ca}});t.a=d},function(E,t,d){E=d(0);var O=d(31);d=Object(E.a)("__debug_nodegraph",function(d,t){var r=Object(O.a)(d);t.PR=function(d){return r.PE(d,function(d,f){var k=f.type+"("+f.name+")",m=f.inputs,k=k+"\n\nINPUTS:";if(m.length)for(var p=0;p<
m.length;p++)k+="\n"+m[p].identifier+": ",k=m[p].mb?k+"linked":k+m[p].rb;else k+="\n---";m=f.outputs;k+="\n\nOUTPUTS:";if(m.length)for(p=0;p<m.length;p++)k+="\n"+m[p].identifier+": ",k=m[p].mb?k+("linked(default "+m[p].rb+")"):k+"not used";else k+="\n---";p="";switch(f.type){case "GEOMETRY_UV":p="\nuv_layer: "+f.data.value;break;case "TEXTURE_COLOR":case "TEXTURE_NORMAL":p="\ntexture: "+f.data.value.name+"\n("+f.data.value.Oo+")"}""==p&&(p="\n---");return k+"\n\nDATA:"+p},function(f,y,x){f=r.Ib(d,
f);y=r.Ib(d,y);return f.outputs[x[0]].identifier+"\n==>\n"+y.inputs[x[1]].identifier})}});t.a=d},function(E,t,d){E=d(0);var O=d(32),T=d(5),G=d(30),r=d(48);d=Object(E.a)("__ipc",function(d,k){function f(a){var b=document.getElementsByTagName("script");a=Object(r.b)(a);for(var c=0;c<b.length;c++)if(b[c].src==a)return b[c];return null}function x(a,b,c){for(var e=0;e<v.length;e+=2)v[e+1]==a&&(E[e+Number(!b)]=c)}function m(a){for(var b=0;b<a.length;b++){var c=a[b],e=0,d;for(d in c){var h=c[d];switch(h.constructor){case Float32Array:e+=
h.length;break;case Number:e+=1}}--e;c.len=e}}var p=Object(T.a)(d),q=Object(G.a)(d),b=!0;k.IJ=0;k.NC=1;k.OC=2;k.CJ=3;k.EJ=4;k.FJ=5;k.GJ=6;k.JJ=7;k.PC=8;k.Gy=9;k.QC=10;k.LJ=11;k.RC=12;k.MJ=13;k.KJ=14;k.HJ=15;k.DJ=16;var u=k.NC,h=k.OC,l=k.PC,e=k.Gy,c=k.QC,a=k.RC;k.WK=100;k.xK=101;k.yK=102;k.zK=103;k.AK=104;k.CK=105;k.BK=106;k.DK=107;k.EK=108;k.FK=109;k.GK=110;k.HK=111;k.IK=112;k.KK=113;k.LK=114;k.ZK=115;k.MK=116;k.NK=117;k.OK=118;k.QK=119;k.RK=120;k.SK=121;k.UK=122;k.VK=123;k.XK=124;k.JK=125;k.aL=126;
k.PK=127;k.dD=128;k.$K=129;k.bL=130;k.dL=131;k.eL=132;k.fL=133;k.gL=134;k.hL=135;k.iL=136;k.kL=137;k.lL=138;k.mL=139;k.eD=140;k.sq=141;k.nL=142;k.cD=143;k.oL=144;k.qL=145;k.YK=146;k.TK=147;k.sL=148;k.cL=149;k.jL=150;k.pL=151;k.rL=152;var t=k.sq,E=O.a.worker_listeners,v=O.a.worker_namespaces,B={Zg:a,Ja:0,time:0,trans:new Float32Array(3),quat:new Float32Array(4),hj:new Float32Array(3),Ji:new Float32Array(3),len:0},C={Zg:l,fz:0,pB:0,trans:new Float32Array(3),quat:new Float32Array(4),len:0},L={Zg:e,id:0,
oo:0,hit_fract:0,hit_time:0,len:0},H={Zg:c,id:0,oo:0,hit_fract:0,hit_time:0,hit_pos:new Float32Array(3),hit_norm:new Float32Array(3),len:0},I={Zg:u,Am:0,Bm:0,result:0,len:0},da={Zg:h,Am:0,Bm:0,result:0,Fm:new Float32Array(3),coll_norm:new Float32Array(3),coll_dist:0,len:0},N={Zg:t,Ja:0,trans:new Float32Array(3),quat:new Float32Array(4),len:0},U=[B,C,L,H,I,da,N];k.pO=function(a,c){var e={Qv:a?!0:!1,Pk:null,Pi:[],vh:""};if(c)if(e.Pk={addEventListener:function(a,b){"message"!=a&&p.va("Wrong web worker event");
x(e.vh,e.Qv,b)},removeEventListener:function(a){"message"!=a&&p.va("Wrong web worker event");x(e.vh,e.Qv,null)},postMessage:function(a){var b;a:{for(b=0;b<v.length;b+=2)if(v[b+1]==e.vh){b=E[b+Number(!!e.Qv)];break a}b=null}b({data:a})},terminate:function(){for(var a=0;a<v.length;a+=2)if(v[a+1]==e.vh){E.splice(a,2);v.splice(a,2);break}}},e.Qv){var h=q.et(d+"_worker");v.push(d);v.push(h);E.push(null);E.push(null);e.vh=h;(h=f(a))?b?h.addEventListener("load",function(){O.a.require("__bindings",e.vh)},
!1):(O.a.cleanup("__bindings",e.vh),O.a.cleanup("__ipc",e.vh),O.a.require("__bindings",e.vh)):(h=document.createElement("script"),h.src=a,h.defer="defer",h.async="async",h.addEventListener("load",function(){b=!1;O.a.require("__bindings",e.vh)},!1),document.head.appendChild(h))}else e.vh=d;else a?e.Pk=new Worker(a):e.Pk=self;return e};k.fM=function(b,d){function f(k){if(k.constructor==ArrayBuffer)k=new Float32Array(k);else if(k[0].constructor==ArrayBuffer){for(var m=0;m<k.length;m++)f(k[m]);return}m=
k[0]|0;switch(m){case a:var p=B;p.Ja=k[1]|0;p.time=k[2];p.trans[0]=k[3];p.trans[1]=k[4];p.trans[2]=k[5];p.quat[0]=k[6];p.quat[1]=k[7];p.quat[2]=k[8];p.quat[3]=k[9];p.hj[0]=k[10];p.hj[1]=k[11];p.hj[2]=k[12];p.Ji[0]=k[13];p.Ji[1]=k[14];p.Ji[2]=k[15];break;case l:p=C;p.fz=k[1]|0;p.pB=k[2]|0;p.trans[0]=k[3];p.trans[1]=k[4];p.trans[2]=k[5];p.quat[0]=k[6];p.quat[1]=k[7];p.quat[2]=k[8];p.quat[3]=k[9];break;case e:p=L;p.id=k[1]|0;p.oo=k[2]|0;p.hit_fract=k[3];p.hit_time=k[4];break;case c:p=H;p.id=k[1]|0;p.oo=
k[2]|0;p.hit_fract=k[3];p.hit_time=k[4];p.hit_pos[0]=k[5];p.hit_pos[1]=k[6];p.hit_pos[2]=k[7];p.hit_norm[0]=k[8];p.hit_norm[1]=k[9];p.hit_norm[2]=k[10];break;case u:p=I;p.Am=k[1]|0;p.Bm=k[2]|0;p.result=!!k[3];break;case h:p=da;p.Am=k[1]|0;p.Bm=k[2]|0;p.result=!!k[3];p.Fm[0]=k[4];p.Fm[1]=k[5];p.Fm[2]=k[6];p.coll_norm[0]=k[7];p.coll_norm[1]=k[8];p.coll_norm[2]=k[9];p.coll_dist=k[10];break;case t:p=N;p.Ja=k[1]|0;p.trans[0]=k[2];p.trans[1]=k[3];p.trans[2]=k[4];p.quat[0]=k[5];p.quat[1]=k[6];p.quat[2]=
k[7];p.quat[3]=k[8];break;default:p=k}d(b,m,p)}m(U);b.Pk.addEventListener("message",function(a){f(a.data)},!1)};k.cleanup=function(){};k.Ta=function(b,d){if(b)switch(d){case a:var f=B,k=new Float32Array(f.len);k[0]=f.Zg;k[1]=f.Ja;k[2]=f.time;k[3]=f.trans[0];k[4]=f.trans[1];k[5]=f.trans[2];k[6]=f.quat[0];k[7]=f.quat[1];k[8]=f.quat[2];k[9]=f.quat[3];k[10]=f.hj[0];k[11]=f.hj[1];k[12]=f.hj[2];k[13]=f.Ji[0];k[14]=f.Ji[1];k[15]=f.Ji[2];b.Pi.push(k.buffer);break;case l:f=C;k=new Float32Array(f.len);k[0]=
f.Zg;k[1]=f.fz;k[2]=f.pB;k[3]=f.trans[0];k[4]=f.trans[1];k[5]=f.trans[2];k[6]=f.quat[0];k[7]=f.quat[1];k[8]=f.quat[2];k[9]=f.quat[3];b.Pi.push(k.buffer);break;case e:f=L;k=new Float32Array(f.len);k[0]=f.Zg;k[1]=f.id;k[2]=f.oo;k[3]=f.hit_fract;k[4]=f.hit_time;b.Pi.push(k.buffer);break;case c:f=H;k=new Float32Array(f.len);k[0]=f.Zg;k[1]=f.id;k[2]=f.oo;k[3]=f.hit_fract;k[4]=f.hit_time;k[5]=f.hit_pos[0];k[6]=f.hit_pos[1];k[7]=f.hit_pos[2];k[8]=f.hit_norm[0];k[9]=f.hit_norm[1];k[10]=f.hit_norm[2];b.Pi.push(k.buffer);
break;case u:f=I;k=new Float32Array(f.len);k[0]=f.Zg;k[1]=f.Am;k[2]=f.Bm;k[3]=f.result;b.Pi.push(k.buffer);break;case h:f=da;k=new Float32Array(f.len);k[0]=f.Zg;k[1]=f.Am;k[2]=f.Bm;k[3]=f.result;k[4]=f.Fm[0];k[5]=f.Fm[1];k[6]=f.Fm[2];k[7]=f.coll_norm[0];k[8]=f.coll_norm[1];k[9]=f.coll_norm[2];k[10]=f.coll_dist;b.Pi.push(k.buffer);break;case t:f=N;k=new Float32Array(f.len);k[0]=f.Zg;k[1]=f.Ja;k[2]=f.trans[0];k[3]=f.trans[1];k[4]=f.trans[2];k[5]=f.quat[0];k[6]=f.quat[1];k[7]=f.quat[2];k[8]=f.quat[3];
b.Pi.push(k.buffer);break;default:k=[];for(f=1;f<arguments.length;f++)k.push(arguments[f]);b.Pk.postMessage(k)}};k.kS=function(a){a&&a.Pi.length&&(a.Pk.postMessage(a.Pi),a.Pi.length=0)};k.CF=function(b){switch(b){case a:return B;case l:return C;case e:return L;case c:return H;case u:return I;case h:return da;case t:return N;default:return null}};k.terminate=function(a){a.Pk.terminate();a.Pk=null};k.Nv=function(a){return!!a.Pk};k.fG=function(a){return!!a.vh}});t.a=d},function(E,t,d){E=d(0);var O=d(45),
T=d(20),G=d(12),r=d(22),f=d(11),k=d(6),y=d(2),x=d(3);d=Object(E.a)("__prerender",function(d,p){function m(a,b){return a.Rk-b.Rk}function b(b,c){var d=b.ah;d.is_visible=!1;if(d.hide)return!1;var f=c.qa,l=c.type==a.be?f.dw:k.i(f.na,E),m=b.hb;if(!e.zU(m,d,l))return!1;d.is_visible=!0;if(c.type==a.Vh)m=c.debug_view_mode==h.DV_BOUNDINGS?m.Tj:!m.Tj;else{if(!(d=c.type==a.Wh&&0==d.lj)&&(d=!m.Vj&&b.yt)){var f=f.Um,l=b.yt.Af,d=b.yt.Yf,p=m.gm,m=l.Da;if(y._55(m,f,l.Jb))d=!0;else if(p)var l=d.Ab,p=d.Bb,q=d.Cb,
m=d.Da,d=y.X(m,f,l,p,q);else d=!1}m=d?!1:!0}return m}function u(a){var b=a.sb;if(b&&b.uw){a=a.Za;l.vR(a);var c=a.mc;l.pt(a.Pc,"a_position",b.qs,c.a_position.offset);l.pt(a.Pc,"a_tbn",b.Ws,c.a_tbn.offset);l.sC(a)}}var h=Object(O.a)(d),l=Object(T.a)(d),e=Object(G.a)(d),c=Object(r.a)(d),a=Object(f.a)(d),t=[a.ic,a.Kd,a.Ee,a.ae,a.Dg,a.Sf,a.De,a.mh,a.be,a.Eg,a.Wh,a.Vh,a.xf,a.Uh],E=new Float32Array(3);p.wn=function(e){if(-1<t.indexOf(e.type)){for(var d=!1,h=e.type==a.ae||e.type==a.Sf,f=e.Hb,l=0;l<f.length;l++){for(var p=
f[l],q=p.ub,v=!1,r=0;r<q.length;r++){var y=q[r],D=y.hb;if(h)for(var G=0;6>G;G++)e.qa.Um=e.Jm[G],y.Ez[G]=b(y,e),y.Ez[G]&&(v=d=!0,u(D));else y.Ec=b(y,e),y.Ec&&(v=d=!0,u(D));e.vb&&(D.ec.ep=!0);y.Ec?(D=k.i(e.qa.na,E),y.yt?(G=y.yt.Af,D=x.squaredDistance(G.Da,D)+G.Jb*G.Jb):D=Infinity,y.Rk=D):y.Rk=Infinity}0<q.length&&!q[0].hb.Qb&&(q.sort(m),f.Rk=q[0].Rk);p.Ec=v}e.vb=!1;switch(e.type){case a.Vh:break;default:e.type==a.ic||e.type==a.Eg||e.type==a.De||e.type==a.Ee||e.type==a.ae||d?e.Ec=!0:(e.Ec&&c.clear(e),
e.Ec=!1)}}else if(e.vb){f=e.Hb;for(l=0;l<f.length;l++)for(q=f[l].ub,r=0;r<q.length;r++)y=q[r],D=y.hb,D.ec.ep=!0;e.vb=!1}e.ds&&a.HT(e)}});t.a=d},function(E,t,d){d.d(t,"a",function(){return O});(function(d){if("object"===typeof exports&&"undefined"!==typeof E)E.exports=d();else{var t;"undefined"!==typeof window?t=window:"undefined"!==typeof self?t=self:t=this;t.WR=d()}})(function(){return function G(d,f,k){function r(m){if(!f[m]){if(!d[m]){if(x)return x(m,!0);var p=Error("Cannot find module '"+m+"'");
throw p.code="MODULE_NOT_FOUND",p;}p=f[m]={exports:{}};d[m][0].call(p.exports,function(b){var f=d[m][1][b];return r(f?f:b)},p,p.exports,G,d,f,k)}return f[m].exports}for(var x=!1,m=0;m<k.length;m++)r(k[m]);return r}({1:[function(d,r,f){d="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;f.assign=function(d){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var k=f.shift();if(k){if("object"!==typeof k)throw new TypeError(k+"must be non-object");
for(var q in k)k.hasOwnProperty(q)&&(d[q]=k[q])}}return d};f.bI=function(d,f){if(d.length===f)return d;if(d.subarray)return d.subarray(0,f);d.length=f;return d};var k={xm:function(d,f,k,q,b){if(f.subarray&&d.subarray)d.set(f.subarray(k,k+q),b);else for(var m=0;m<q;m++)d[b+m]=f[k+m]},gF:function(d){var f,k,q,b,u;f=q=0;for(k=d.length;f<k;f++)q+=d[f].length;u=new Uint8Array(q);f=q=0;for(k=d.length;f<k;f++)b=d[f],u.set(b,q),q+=b.length;return u}},y={xm:function(d,f,k,q,b){for(var m=0;m<q;m++)d[b+m]=f[k+
m]},gF:function(d){return[].concat.apply([],d)}};f.QS=function(d){d?(f.nm=Uint8Array,f.nq=Uint16Array,f.oq=Int32Array,f.assign(f,k)):(f.nm=Array,f.nq=Array,f.oq=Array,f.assign(f,y))};f.QS(d)},{}],2:[function(d,r,f){function k(d,b){if(65537>b&&(d.subarray&&m||!d.subarray&&x))return String.fromCharCode.apply(null,y.bI(d,b));for(var f="",h=0;h<b;h++)f+=String.fromCharCode(d[h]);return f}var y=d("./common"),x=!0,m=!0,p=new y.nm(256);for(d=0;256>d;d++)p[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:
1;p[254]=p[254]=1;f.XT=function(d){var b,f,h,k,e,c=d.length,a=0;for(k=0;k<c;k++)f=d.charCodeAt(k),55296===(f&64512)&&k+1<c&&(h=d.charCodeAt(k+1),56320===(h&64512)&&(f=65536+(f-55296<<10)+(h-56320),k++)),a+=128>f?1:2048>f?2:65536>f?3:4;b=new y.nm(a);for(k=e=0;e<a;k++)f=d.charCodeAt(k),55296===(f&64512)&&k+1<c&&(h=d.charCodeAt(k+1),56320===(h&64512)&&(f=65536+(f-55296<<10)+(h-56320),k++)),128>f?b[e++]=f:(2048>f?b[e++]=192|f>>>6:(65536>f?b[e++]=224|f>>>12:(b[e++]=240|f>>>18,b[e++]=128|f>>>12&63),b[e++]=
128|f>>>6&63),b[e++]=128|f&63);return b};f.vW=function(d){return k(d,d.length)};f.nM=function(d){for(var b=new y.nm(d.length),f=0,h=b.length;f<h;f++)b[f]=d.charCodeAt(f);return b};f.xM=function(d,b){var f,h,l,e,c=b||d.length,a=Array(2*c);for(f=h=0;f<c;)if(l=d[f++],128>l)a[h++]=l;else if(e=p[l],4<e)a[h++]=65533,f+=e-1;else{for(l&=2===e?31:3===e?15:7;1<e&&f<c;)l=l<<6|d[f++]&63,e--;1<e?a[h++]=65533:65536>l?a[h++]=l:(l-=65536,a[h++]=55296|l>>10&1023,a[h++]=56320|l&1023)}return k(a,h)};f.aV=function(d,
b){var f;b=b||d.length;b>d.length&&(b=d.length);for(f=b-1;0<=f&&128===(d[f]&192);)f--;return 0>f||!f?b:f+p[d[f]]>b?f:b}},{"./common":1}],3:[function(d,r){r.exports=function(d,k,r,x){var f=d&65535|0;d=d>>>16&65535|0;for(var p;0!==r;){p=2E3<r?2E3:r;r-=p;do f=f+k[x++]|0,d=d+f|0;while(--p);f%=65521;d%=65521}return f|d<<16|0}},{}],4:[function(d,r){r.exports={oD:0,dW:1,pD:2,aW:3,Mt:4,TV:5,hW:6,co:0,Nt:1,yL:2,YV:-1,fW:-2,UV:-3,xL:-5,cW:0,RV:1,QV:9,VV:-1,ZV:1,bW:2,eW:3,$V:4,WV:0,SV:0,gW:1,iW:2,XV:8}},{}],
5:[function(d,r){var f=function(){for(var d,f=[],r=0;256>r;r++){d=r;for(var m=0;8>m;m++)d=d&1?3988292384^d>>>1:d>>>1;f[r]=d}return f}();r.exports=function(d,r,x,m){x=m+x;for(d^=-1;m<x;m++)d=d>>>8^f[(d^r[m])&255];return d^-1}},{}],6:[function(d,r){r.exports=function(){this.SR=this.oV=this.time=this.text=0;this.ge=null;this.Jz=0;this.mz=this.name="";this.uQ=0;this.done=!1}},{}],7:[function(d,r){r.exports=function(d,k){var f,r,m,p,q,b,u,h,l,e,c,a,t,G,v,B,C,L,H,I,O,N,E,K;f=d.state;r=d.Dl;E=d.input;m=
r+(d.Kg-5);p=d.mf;K=d.ui;q=p-(k-d.de);b=p+(d.de-257);u=f.Lu;h=f.Cg;l=f.Qk;e=f.Bg;c=f.window;a=f.nl;t=f.Md;G=f.gk;v=f.Mm;B=(1<<f.fj)-1;C=(1<<f.yo)-1;a:do b:for(15>t&&(a+=E[r++]<<t,t+=8,a+=E[r++]<<t,t+=8),L=G[a&B];;){H=L>>>24;a>>>=H;t-=H;if(H=L>>>16&255)if(H&16){I=L&65535;if(H&=15)t<H&&(a+=E[r++]<<t,t+=8),I+=a&(1<<H)-1,a>>>=H,t-=H;15>t&&(a+=E[r++]<<t,t+=8,a+=E[r++]<<t,t+=8);L=v[a&C];c:for(;;){H=L>>>24;a>>>=H;t-=H;H=L>>>16&255;if(H&16){L&=65535;H&=15;t<H&&(a+=E[r++]<<t,t+=8,t<H&&(a+=E[r++]<<t,t+=8));
L+=a&(1<<H)-1;if(L>u){d.msg="invalid distance too far back";f.mode=30;break a}a>>>=H;t-=H;H=p-q;if(L>H){H=L-H;if(H>l&&f.CB){d.msg="invalid distance too far back";f.mode=30;break a}O=0;N=c;if(0===e){if(O+=h-H,H<I){I-=H;do K[p++]=c[O++];while(--H);O=p-L;N=K}}else if(e<H){if(O+=h+e-H,H-=e,H<I){I-=H;do K[p++]=c[O++];while(--H);O=0;if(e<I){H=e;I-=H;do K[p++]=c[O++];while(--H);O=p-L;N=K}}}else if(O+=e-H,H<I){I-=H;do K[p++]=c[O++];while(--H);O=p-L;N=K}for(;2<I;)K[p++]=N[O++],K[p++]=N[O++],K[p++]=N[O++],
I-=3;I&&(K[p++]=N[O++],1<I&&(K[p++]=N[O++]))}else{O=p-L;do K[p++]=K[O++],K[p++]=K[O++],K[p++]=K[O++],I-=3;while(2<I);I&&(K[p++]=K[O++],1<I&&(K[p++]=K[O++]))}}else if(H&64){d.msg="invalid distance code";f.mode=30;break a}else{L=v[(L&65535)+(a&(1<<H)-1)];continue c}break}}else if(H&64){H&32?f.mode=12:(d.msg="invalid literal/length code",f.mode=30);break a}else{L=G[(L&65535)+(a&(1<<H)-1)];continue b}else K[p++]=L&65535;break}while(r<m&&p<b);I=t>>3;r-=I;t-=I<<3;d.Dl=r;d.mf=p;d.Kg=r<m?5+(m-r):5-(r-m);
d.de=p<b?257+(b-p):257-(p-b);f.nl=a&(1<<t)-1;f.Md=t}},{}],8:[function(d,r,f){function k(a){return(a>>>24&255)+(a>>>8&65280)+((a&65280)<<8)+((a&255)<<24)}function y(){this.mode=0;this.Vv=!1;this.Gi=0;this.kA=!1;this.total=this.check=this.Lu=this.Ad=0;this.head=null;this.Bg=this.Qk=this.Cg=this.lq=0;this.window=null;this.ge=this.offset=this.length=this.Md=this.nl=0;this.Mm=this.gk=null;this.Dh=this.cs=this.hp=this.OG=this.yo=this.fj=0;this.next=null;this.jf=new u.nq(320);this.xt=new u.nq(288);this.XE=
this.sG=null;this.jV=this.back=this.CB=0}function x(a){var b;if(!a||!a.state)return-2;b=a.state;a.fC=a.$s=b.total=0;a.msg="";b.Gi&&(a.tm=b.Gi&1);b.mode=1;b.Vv=0;b.kA=0;b.Lu=32768;b.head=null;b.nl=0;b.Md=0;b.gk=b.sG=new u.oq(852);b.Mm=b.XE=new u.oq(592);b.CB=1;b.back=-1;return 0}function m(a){var b;if(!a||!a.state)return-2;b=a.state;b.Cg=0;b.Qk=0;b.Bg=0;return x(a)}function p(a,b){var c,e;if(!a||!a.state)return-2;e=a.state;0>b?(c=0,b=-b):(c=(b>>4)+1,48>b&&(b&=15));if(b&&(8>b||15<b))return-2;null!==
e.window&&e.lq!==b&&(e.window=null);e.Gi=c;e.lq=b;return m(a)}function q(a,b){var c;if(!a)return-2;c=new y;a.state=c;c.window=null;c=p(a,b);0!==c&&(a.state=null);return c}function b(a,b,c,e){var d=a.state;null===d.window&&(d.Cg=1<<d.lq,d.Bg=0,d.Qk=0,d.window=new u.nm(d.Cg));e>=d.Cg?(u.xm(d.window,b,c-d.Cg,d.Cg,0),d.Bg=0,d.Qk=d.Cg):(a=d.Cg-d.Bg,a>e&&(a=e),u.xm(d.window,b,c-e,a,d.Bg),(e-=a)?(u.xm(d.window,b,c-e,e,0),d.Bg=e,d.Qk=d.Cg):(d.Bg+=a,d.Bg===d.Cg&&(d.Bg=0),d.Qk<d.Cg&&(d.Qk+=a)));return 0}var u=
d("../utils/common"),h=d("./adler32"),l=d("./crc32"),e=d("./inffast"),c=d("./inftrees"),a=!0,t,G;f.wX=m;f.xX=p;f.yX=x;f.uX=function(a){return q(a,15)};f.zQ=q;f.nA=function(d,f){var m,p,q,v,r,x,y,B,D,O,E,F,z,w,W,A,n,g,ea=new u.nm(4),ka=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!d||!d.state||!d.ui||!d.input&&0!==d.Kg)return-2;m=d.state;12===m.mode&&(m.mode=13);r=d.mf;q=d.ui;y=d.de;v=d.Dl;p=d.input;x=d.Kg;B=m.nl;D=m.Md;O=x;E=y;g=0;a:for(;;)switch(m.mode){case 1:if(0===m.Gi){m.mode=13;break}for(;16>
D;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}if(m.Gi&2&&35615===B){m.check=0;ea[0]=B&255;ea[1]=B>>>8&255;m.check=l(m.check,ea,2,0);D=B=0;m.mode=2;break}m.Ad=0;m.head&&(m.head.done=!1);if(!(m.Gi&1)||(((B&255)<<8)+(B>>8))%31){d.msg="incorrect header check";m.mode=30;break}if(8!==(B&15)){d.msg="unknown compression method";m.mode=30;break}B>>>=4;D-=4;z=(B&15)+8;if(0===m.lq)m.lq=z;else if(z>m.lq){d.msg="invalid window size";m.mode=30;break}m.Lu=1<<z;d.tm=m.check=1;m.mode=B&512?10:12;D=B=0;break;case 2:for(;16>
D;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}m.Ad=B;if(8!==(m.Ad&255)){d.msg="unknown compression method";m.mode=30;break}if(m.Ad&57344){d.msg="unknown header flags set";m.mode=30;break}m.head&&(m.head.text=B>>8&1);m.Ad&512&&(ea[0]=B&255,ea[1]=B>>>8&255,m.check=l(m.check,ea,2,0));D=B=0;m.mode=3;case 3:for(;32>D;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}m.head&&(m.head.time=B);m.Ad&512&&(ea[0]=B&255,ea[1]=B>>>8&255,ea[2]=B>>>16&255,ea[3]=B>>>24&255,m.check=l(m.check,ea,4,0));D=B=0;m.mode=4;case 4:for(;16>
D;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}m.head&&(m.head.oV=B&255,m.head.SR=B>>8);m.Ad&512&&(ea[0]=B&255,ea[1]=B>>>8&255,m.check=l(m.check,ea,2,0));D=B=0;m.mode=5;case 5:if(m.Ad&1024){for(;16>D;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}m.length=B;m.head&&(m.head.Jz=B);m.Ad&512&&(ea[0]=B&255,ea[1]=B>>>8&255,m.check=l(m.check,ea,2,0));D=B=0}else m.head&&(m.head.ge=null);m.mode=6;case 6:if(m.Ad&1024&&(F=m.length,F>x&&(F=x),F&&(m.head&&(z=m.head.Jz-m.length,m.head.ge||(m.head.ge=Array(m.head.Jz)),u.xm(m.head.ge,
p,v,F,z)),m.Ad&512&&(m.check=l(m.check,p,F,v)),x-=F,v+=F,m.length-=F),m.length))break a;m.length=0;m.mode=7;case 7:if(m.Ad&2048){if(0===x)break a;F=0;do z=p[v+F++],m.head&&z&&65536>m.length&&(m.head.name+=String.fromCharCode(z));while(z&&F<x);m.Ad&512&&(m.check=l(m.check,p,F,v));x-=F;v+=F;if(z)break a}else m.head&&(m.head.name=null);m.length=0;m.mode=8;case 8:if(m.Ad&4096){if(0===x)break a;F=0;do z=p[v+F++],m.head&&z&&65536>m.length&&(m.head.mz+=String.fromCharCode(z));while(z&&F<x);m.Ad&512&&(m.check=
l(m.check,p,F,v));x-=F;v+=F;if(z)break a}else m.head&&(m.head.mz=null);m.mode=9;case 9:if(m.Ad&512){for(;16>D;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}if(B!==(m.check&65535)){d.msg="header crc mismatch";m.mode=30;break}D=B=0}m.head&&(m.head.uQ=m.Ad>>9&1,m.head.done=!0);d.tm=m.check=0;m.mode=12;break;case 10:for(;32>D;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}d.tm=m.check=k(B);D=B=0;m.mode=11;case 11:if(0===m.kA)return d.mf=r,d.de=y,d.Dl=v,d.Kg=x,m.nl=B,m.Md=D,2;d.tm=m.check=1;m.mode=12;case 12:if(5===
f||6===f)break a;case 13:if(m.Vv){B>>>=D&7;D-=D&7;m.mode=27;break}for(;3>D;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}m.Vv=B&1;B>>>=1;--D;switch(B&3){case 0:m.mode=14;break;case 1:z=m;if(a){t=new u.oq(512);G=new u.oq(32);for(F=0;144>F;)z.jf[F++]=8;for(;256>F;)z.jf[F++]=9;for(;280>F;)z.jf[F++]=7;for(;288>F;)z.jf[F++]=8;c(1,z.jf,0,288,t,0,z.xt,{Md:9});for(F=0;32>F;)z.jf[F++]=5;c(2,z.jf,0,32,G,0,z.xt,{Md:5});a=!1}z.gk=t;z.fj=9;z.Mm=G;z.yo=5;m.mode=20;if(6===f){B>>>=2;D-=2;break a}break;case 2:m.mode=17;
break;case 3:d.msg="invalid block type",m.mode=30}B>>>=2;D-=2;break;case 14:B>>>=D&7;for(D-=D&7;32>D;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}if((B&65535)!==(B>>>16^65535)){d.msg="invalid stored block lengths";m.mode=30;break}m.length=B&65535;D=B=0;m.mode=15;if(6===f)break a;case 15:m.mode=16;case 16:if(F=m.length){F>x&&(F=x);F>y&&(F=y);if(0===F)break a;u.xm(q,p,v,F,r);x-=F;v+=F;y-=F;r+=F;m.length-=F;break}m.mode=12;break;case 17:for(;14>D;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}m.hp=(B&31)+257;
B>>>=5;D-=5;m.cs=(B&31)+1;B>>>=5;D-=5;m.OG=(B&15)+4;B>>>=4;D-=4;if(286<m.hp||30<m.cs){d.msg="too many length or distance symbols";m.mode=30;break}m.Dh=0;m.mode=18;case 18:for(;m.Dh<m.OG;){for(;3>D;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}m.jf[ka[m.Dh++]]=B&7;B>>>=3;D-=3}for(;19>m.Dh;)m.jf[ka[m.Dh++]]=0;m.gk=m.sG;m.fj=7;F={Md:m.fj};g=c(0,m.jf,0,19,m.gk,0,m.xt,F);m.fj=F.Md;if(g){d.msg="invalid code lengths set";m.mode=30;break}m.Dh=0;m.mode=19;case 19:for(;m.Dh<m.hp+m.cs;){for(;;){W=m.gk[B&(1<<m.fj)-
1];F=W>>>24;W&=65535;if(F<=D)break;if(0===x)break a;x--;B+=p[v++]<<D;D+=8}if(16>W)B>>>=F,D-=F,m.jf[m.Dh++]=W;else{if(16===W){for(z=F+2;D<z;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}B>>>=F;D-=F;if(0===m.Dh){d.msg="invalid bit length repeat";m.mode=30;break}z=m.jf[m.Dh-1];F=3+(B&3);B>>>=2;D-=2}else if(17===W){for(z=F+3;D<z;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}B>>>=F;D-=F;z=0;F=3+(B&7);B>>>=3;D-=3}else{for(z=F+7;D<z;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}B>>>=F;D-=F;z=0;F=11+(B&127);B>>>=7;D-=7}if(m.Dh+
F>m.hp+m.cs){d.msg="invalid bit length repeat";m.mode=30;break}for(;F--;)m.jf[m.Dh++]=z}}if(30===m.mode)break;if(0===m.jf[256]){d.msg="invalid code -- missing end-of-block";m.mode=30;break}m.fj=9;F={Md:m.fj};g=c(1,m.jf,0,m.hp,m.gk,0,m.xt,F);m.fj=F.Md;if(g){d.msg="invalid literal/lengths set";m.mode=30;break}m.yo=6;m.Mm=m.XE;F={Md:m.yo};g=c(2,m.jf,m.hp,m.cs,m.Mm,0,m.xt,F);m.yo=F.Md;if(g){d.msg="invalid distances set";m.mode=30;break}m.mode=20;if(6===f)break a;case 20:m.mode=21;case 21:if(6<=x&&258<=
y){d.mf=r;d.de=y;d.Dl=v;d.Kg=x;m.nl=B;m.Md=D;e(d,E);r=d.mf;q=d.ui;y=d.de;v=d.Dl;p=d.input;x=d.Kg;B=m.nl;D=m.Md;12===m.mode&&(m.back=-1);break}for(m.back=0;;){W=m.gk[B&(1<<m.fj)-1];F=W>>>24;z=W>>>16&255;W&=65535;if(F<=D)break;if(0===x)break a;x--;B+=p[v++]<<D;D+=8}if(z&&!(z&240)){w=F;A=z;for(n=W;;){W=m.gk[n+((B&(1<<w+A)-1)>>w)];F=W>>>24;z=W>>>16&255;W&=65535;if(w+F<=D)break;if(0===x)break a;x--;B+=p[v++]<<D;D+=8}B>>>=w;D-=w;m.back+=w}B>>>=F;D-=F;m.back+=F;m.length=W;if(!z){m.mode=26;break}if(z&32){m.back=
-1;m.mode=12;break}if(z&64){d.msg="invalid literal/length code";m.mode=30;break}m.ge=z&15;m.mode=22;case 22:if(m.ge){for(z=m.ge;D<z;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}m.length+=B&(1<<m.ge)-1;B>>>=m.ge;D-=m.ge;m.back+=m.ge}m.jV=m.length;m.mode=23;case 23:for(;;){W=m.Mm[B&(1<<m.yo)-1];F=W>>>24;z=W>>>16&255;W&=65535;if(F<=D)break;if(0===x)break a;x--;B+=p[v++]<<D;D+=8}if(!(z&240)){w=F;A=z;for(n=W;;){W=m.Mm[n+((B&(1<<w+A)-1)>>w)];F=W>>>24;z=W>>>16&255;W&=65535;if(w+F<=D)break;if(0===x)break a;x--;
B+=p[v++]<<D;D+=8}B>>>=w;D-=w;m.back+=w}B>>>=F;D-=F;m.back+=F;if(z&64){d.msg="invalid distance code";m.mode=30;break}m.offset=W;m.ge=z&15;m.mode=24;case 24:if(m.ge){for(z=m.ge;D<z;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}m.offset+=B&(1<<m.ge)-1;B>>>=m.ge;D-=m.ge;m.back+=m.ge}if(m.offset>m.Lu){d.msg="invalid distance too far back";m.mode=30;break}m.mode=25;case 25:if(0===y)break a;F=E-y;if(m.offset>F){F=m.offset-F;if(F>m.Qk&&m.CB){d.msg="invalid distance too far back";m.mode=30;break}F>m.Bg?(F-=m.Bg,
z=m.Cg-F):z=m.Bg-F;F>m.length&&(F=m.length);w=m.window}else w=q,z=r-m.offset,F=m.length;F>y&&(F=y);y-=F;m.length-=F;do q[r++]=w[z++];while(--F);0===m.length&&(m.mode=21);break;case 26:if(0===y)break a;q[r++]=m.length;y--;m.mode=21;break;case 27:if(m.Gi){for(;32>D;){if(0===x)break a;x--;B|=p[v++]<<D;D+=8}E-=y;d.$s+=E;m.total+=E;E&&(d.tm=m.check=m.Ad?l(m.check,q,E,r-E):h(m.check,q,E,r-E));E=y;if((m.Ad?B:k(B))!==m.check){d.msg="incorrect data check";m.mode=30;break}D=B=0}m.mode=28;case 28:if(m.Gi&&m.Ad){for(;32>
D;){if(0===x)break a;x--;B+=p[v++]<<D;D+=8}if(B!==(m.total&4294967295)){d.msg="incorrect length check";m.mode=30;break}D=B=0}m.mode=29;case 29:g=1;break a;case 30:g=-3;break a;case 31:return-4;default:return-2}d.mf=r;d.de=y;d.Dl=v;d.Kg=x;m.nl=B;m.Md=D;if((m.Cg||E!==d.de&&30>m.mode&&(27>m.mode||4!==f))&&b(d,d.ui,d.mf,E-d.de))return m.mode=31,-4;O-=d.Kg;E-=d.de;d.fC+=O;d.$s+=E;m.total+=E;m.Gi&&E&&(d.tm=m.check=m.Ad?l(m.check,q,E,d.mf-E):h(m.check,q,E,d.mf-E));d.uO=m.Md+(m.Vv?64:0)+(12===m.mode?128:
0)+(20===m.mode||15===m.mode?256:0);(0===O&&0===E||4===f)&&0===g&&(g=-5);return g};f.xQ=function(a){if(!a||!a.state)return-2;var b=a.state;b.window&&(b.window=null);a.state=null;return 0};f.yQ=function(a,b){var c;a&&a.state&&(c=a.state,c.Gi&2&&(c.head=b,b.done=!1))};f.AQ=function(a,c){var e=c.length,d,f;if(!a||!a.state)return-2;d=a.state;if(0!==d.Gi&&11!==d.mode)return-2;if(11===d.mode&&(f=h(1,c,e,0),f!==d.check))return-3;if(b(a,c,e,e))return d.mode=31,-4;d.kA=1;return 0};f.tX="pako inflate (from Nodeca project)"},
{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(d,r){var f=d("../utils/common"),k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],y=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],x=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,
26,26,27,27,28,28,29,29,64,64];r.exports=function(d,q,b,u,h,l,e,c){var a=c.Md,p,r,v,t,C,L,H,I,G,O,E,K,D,R=0,V,F=new f.nq(16);C=new f.nq(16);var z,w=0,W,A,n;for(p=0;15>=p;p++)F[p]=0;for(r=0;r<u;r++)F[q[b+r]]++;t=a;for(v=15;1<=v&&0===F[v];v--);t>v&&(t=v);if(!v)return h[l++]=20971520,h[l++]=20971520,c.Md=1,0;for(a=1;a<v&&0===F[a];a++);t<a&&(t=a);for(p=L=1;15>=p;p++)if(L<<=1,L-=F[p],0>L)return-1;if(0<L&&(0===d||1!==v))return-1;C[1]=0;for(p=1;15>p;p++)C[p+1]=C[p]+F[p];for(r=0;r<u;r++)0!==q[b+r]&&(e[C[q[b+
r]]++]=r);0===d?(D=z=e,V=19):1===d?(D=k,R-=257,z=y,w-=257,V=256):(D=x,z=m,V=-1);r=I=0;p=a;K=l;u=t;C=0;O=-1;H=1<<t;E=H-1;if(1===d&&852<H||2===d&&592<H)return 1;for(;;){W=p-C;e[r]<V?(A=0,n=e[r]):e[r]>V?(A=z[w+e[r]],n=D[R+e[r]]):(A=96,n=0);L=1<<p-C;a=G=1<<u;do G-=L,h[K+(I>>C)+G]=W<<24|A<<16|n|0;while(G);for(L=1<<p-1;I&L;)L>>=1;L?(I&=L-1,I+=L):I=0;r++;if(!--F[p]){if(p===v)break;p=q[b+e[r]]}if(p>t&&(I&E)!==O){0===C&&(C=t);K+=a;u=p-C;for(L=1<<u;u+C<v;){L-=F[u+C];if(0>=L)break;u++;L<<=1}H+=1<<u;if(1===d&&
852<H||2===d&&592<H)return 1;O=I&E;h[O]=t<<24|u<<16|K-l|0}}I&&(h[K+I]=p-C<<24|4194304);c.Md=t;return 0}},{"../utils/common":1}],10:[function(d,r){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(d,r){r.exports=function(){this.input=null;this.fC=this.Kg=this.Dl=0;this.ui=null;this.$s=this.de=this.mf=0;this.msg="";this.state=null;this.uO=2;this.tm=0}},
{}],"/lib/inflate.js":[function(d,r,f){function k(e){if(!(this instanceof k))return new k(e);var c=this.options=m.assign({SM:16384,Te:0,to:""},e||{});c.raw&&0<=c.Te&&16>c.Te&&(c.Te=-c.Te,c.Te||(c.Te=-15));!(0<=c.Te&&16>c.Te)||e&&e.Te||(c.Te+=32);15<c.Te&&48>c.Te&&!(c.Te&15)&&(c.Te|=15);this.Hz=0;this.msg="";this.ended=!1;this.mu=[];this.Gn=new u;this.Gn.de=0;e=x.zQ(this.Gn,c.Te);if(e!==q.co)throw Error(b[e]);this.vQ=new h;x.yQ(this.Gn,this.vQ)}function y(e,c){var a=new k(c);a.push(e,!0);if(a.Hz)throw a.msg||
b[a.Hz];return a.result}var x=d("./zlib/inflate"),m=d("./utils/common"),p=d("./utils/strings"),q=d("./zlib/constants"),b=d("./zlib/messages"),u=d("./zlib/zstream"),h=d("./zlib/gzheader"),l=Object.prototype.toString;k.prototype.push=function(b,c){var a=this.Gn,e=this.options.SM,d=this.options.LW,h,f,k,u,r,y,t=!1;if(this.ended)return!1;f=c===~~c?c:!0===c?q.Mt:q.oD;"string"===typeof b?a.input=p.nM(b):"[object ArrayBuffer]"===l.call(b)?a.input=new Uint8Array(b):a.input=b;a.Dl=0;a.Kg=a.input.length;do{0===
a.de&&(a.ui=new m.nm(e),a.mf=0,a.de=e);h=x.nA(a,q.oD);h===q.yL&&d&&("string"===typeof d?y=p.XT(d):"[object ArrayBuffer]"===l.call(d)?y=new Uint8Array(d):y=d,h=x.AQ(this.Gn,y));h===q.xL&&!0===t&&(h=q.co,t=!1);if(h!==q.Nt&&h!==q.co)return this.bB(h),this.ended=!0,!1;!a.mf||0!==a.de&&h!==q.Nt&&(0!==a.Kg||f!==q.Mt&&f!==q.pD)||("string"===this.options.to?(k=p.aV(a.ui,a.mf),u=a.mf-k,r=p.xM(a.ui,k),a.mf=u,a.de=e-u,u&&m.xm(a.ui,a.ui,k,u,0),this.bH(r)):this.bH(m.bI(a.ui,a.mf)));0===a.Kg&&0===a.de&&(t=!0)}while((0<
a.Kg||0===a.de)&&h!==q.Nt);h===q.Nt&&(f=q.Mt);if(f===q.Mt)return h=x.xQ(this.Gn),this.bB(h),this.ended=!0,h===q.co;f===q.pD&&(this.bB(q.co),a.de=0);return!0};k.prototype.bH=function(b){this.mu.push(b)};k.prototype.bB=function(b){b===q.co&&(this.result="string"===this.options.to?this.mu.join(""):m.gF(this.mu));this.mu=[];this.Hz=b;this.msg=this.Gn.msg};f.FV=k;f.nA=y;f.vX=function(b,c){c=c||{};c.raw=!0;return y(b,c)};f.sY=y},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,
"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")});var O=window.WR.nA},function(E,t,d){d(32).a.module.shader_texts=function(d){d["anchors.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ; }".split(" ")}]};d["anchors.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"ANCHOR_NUM",
aa:["0"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform vec3 u_position [ ANCHOR_NUM ] ; uniform mat4 u_view_proj_matrix ; uniform vec2 u_texel_size ; GLSL_IN float a_index ; void main ( ) { int c = int ( mod ( a_index , 3.0 ) ) ; int d = int ( a_index / 3.0 ) ; vec2 e ; if ( c == 0 ) { e = vec2 ( - 4.0 * u_texel_size [ 0 ] , - u_texel_size [ 1 ] ) ; } else if ( c == 1 ) { e = vec2 ( 4.0 * u_texel_size [ 0 ] , - u_texel_size [ 1 ] ) ; } else { e = vec2 ( 0.0 , 5.0 * u_texel_size [ 1 ] ) ; } vec4 f = u_view_proj_matrix * vec4 ( u_position [ d ] , 1.0 ) ; f . xy += e * f . w ; gl_Position = f ; }".split(" ")}]};
d["color_id.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"ALPHA_CLIP",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"USE_OUTLINE",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR_INVERSE",
aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"USE_REFRACTION",aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",aa:["0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"TEXTURE_BLEND_TYPE",aa:["TEXTURE_BLEND_TYPE_MIX"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"NUM_LAMP_LIGHTS",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"NUM_VALUES",
aa:["0"]},{$:"var",ba:"NUM_RGBS",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"POISSON_DISK_NUM",aa:["NO_SOFT_SHADOWS"]},{$:"var",ba:"USE_DERIVATIVES_EXT",aa:["0"]},{$:"var",ba:"USE_LOD_SMOOTHING",aa:["0"]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_DERIVATIVES_EXT",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_OES_standard_derivatives",":","enable"]}]}}]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["NODES",
"ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"math.glslv"}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"include",oa:"coverage.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_time ; uniform float u_environment_energy ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{$:"txt",aa:["uniform","vec3","u_camera_eye_frag",";"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_direction",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_VIEW_TSR",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_VIEW_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_diffuse_color",";"]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"uniform sampler2D u_sampler ; uniform float u_alpha_factor ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_OUTLINE",
{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_color_id",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"sampler2D","u_plane_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_cube_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_refractmap",";"]},{$:"cond",da:[{$:"if",ga:["USE_REFRACTION",
"USE_REFRACTION_CORRECTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{$:"txt",aa:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_mirror_factor",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:["uniform","vec4","u_refl_plane",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_LAMP"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_VALUE"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_RGB"],ha:{$:"grp",
da:[{$:"txt",aa:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{$:"txt",aa:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map1 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map2 ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map3 ; uniform sampler2D u_shadow_mask ;".split(" ")}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_OUTLINE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_outline_intensity",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_OBJECT_INFO"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_obj_info",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 h ; GLSL_IN vec4 i ; GLSL_IN vec3 j ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","USE_REFRACTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","m",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec4 n ; GLSL_IN vec4 o ; GLSL_IN vec4 u ; GLSL_IN vec4 v ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",
ia:2}],ha:{$:"grp",da:[{$:"include",oa:"nodes.glslf"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; float L = I ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"float L = ( GLSL_TEXTURE ( u_sampler , A ) ) . a ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float M = u_alpha_factor * L ; M += ( 1.0 - step ( 0.0 , M ) ) ; L = mix ( M , 1.0 , u_diffuse_color . a ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float L = u_diffuse_color . a ;".split(" ")}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["ALPHA_CLIP"],ha:{$:"grp",da:[{$:"txt",aa:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_OUTLINE"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , u_outline_intensity ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( u_color_id , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]};d["color_id.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",
aa:["highp"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"var",ba:"CALC_TBN",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"AU_QUALIFIER",aa:["GLSL_IN"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"BEND_CENTER_ONLY",
aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS",aa:["0"]},{$:"var",ba:"SKINNED",aa:["0"]},{$:"var",ba:"FRAMES_BLENDING",aa:["0"]},{$:"var",ba:"VERTEX_ANIM",aa:["0"]},{$:"var",ba:"SMAA_JITTER",aa:["0"]},{$:"var",ba:"VERTEX_ANIM_MIX_NORMALS_FACTOR",aa:["u_va_frame_factor"]},{$:"var",ba:"MAX_BONES",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},
{$:"include",oa:"to_world.glslv"},{$:"include",oa:"scale_texcoord.glslv"},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD","DYNAMIC_GRASS",{$:"logical_or_expr",ia:2}],
ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_eye",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD_JITTERED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_va_frame_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_texture_scale",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_influence",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_bending_col_main",";"]},{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_position_next",";"]},
{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",
aa:["GLSL_OUT","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT vec3 h ; GLSL_OUT vec4 i ; GLSL_OUT vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","l",";"]}]}}]},{$:"cond",
da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","m",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]}]}}]},{$:"include",oa:"skin.glslv"},{$:"include",oa:"wind_bending.glslv"},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"nodes.glslv"}]}}]},{$:"txt",aa:"void main ( ) { mat3 N = u_view_tsr ; vec3 O = a_position ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NODES","ALPHA","CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},{$:"logical_or_expr",ia:6},{$:"logical_and_expr",ia:3},"USE_TBN_SHADING","CALC_TBN",{$:"logical_and_expr",ia:2},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:7}],ha:{$:"grp",da:[{$:"txt",aa:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 U = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 U = vec3 ( 0.0 ) ; vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["mat3","Z","=","u_model_tsr",";"]},{$:"cond",
da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CALC_TBN"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ac = normalize ( _ ( u_model_tsr , U ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",
aa:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"an ( O , V , W , U ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ao","=","au_center_pos",";"]}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aq = ap ( Z , ao ) ; Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , aq , Z ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"ax ( aw . O , aw . ao , U , mat4 ( 0.0 ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ay = T ( a_tbn , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ay = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"ax ( aw . O , aw . ao , ay , mat4 ( 0.0 ) ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2},{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"h = aw . O ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:12}],ha:{$:"grp",da:[{$:"txt",aa:"j = aw . U ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",
da:[{$:"txt",aa:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:"B = aw . aB ;".split(" ")}]}}]},{$:"txt",aa:"i = vec4 ( ap ( N , aw . O ) , 1.0 ) ; vec4 f = u_proj_matrix * i ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],ha:{$:"grp",da:[{$:"txt",aa:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE",
"REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"l = aC ( f ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"m = - i . z / u_view_max_depth ;".split(" ")}]}}]},{$:"txt",aa:["J","(",")",";"]}]}}]},{$:"txt",aa:"gl_Position = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ; }".split(" ")}]};d["debug_view.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},
{$:"var",ba:"DEBUG_SPHERE",aa:["0"]},{$:"var",ba:"WIREFRAME_QUALITY",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"DEBUG_SPHERE_DYNAMIC",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"uniform int u_debug_view_mode ; uniform float u_cluster_id ; uniform float u_batch_debug_id_color ; uniform float u_batch_debug_main_render_time ; uniform float u_debug_colors_seed ; uniform float u_debug_render_time_threshold ; uniform vec3 u_wireframe_edge_color ;".split(" ")}]}}]},
{$:"txt",aa:"GLSL_IN vec3 aD ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; const float aE = 1.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE_DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"const vec3 aF = vec3 ( 1.0 , 0.05 , 0.05 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"const vec3 aF = vec3 ( 0.05 , 0.05 , 1.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"const vec3 aG = vec3 ( 0.4 , 0.4 , 1.0 ) ; const vec3 aH = vec3 ( 1.0 , 0.4 , 0.4 ) ; const vec3 aI = vec3 ( 1.0 , 1.0 , 1.0 ) ; const vec3 aJ = vec3 ( 0.0 , 133.0 / 255.0 , 66.0 / 255.0 ) ; const vec3 aK = vec3 ( 160.0 / 255.0 , 38.0 / 255.0 , 33.0 / 255.0 ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"float aP ( ) { float aL = 1.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WIREFRAME_QUALITY",0,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) aL = 0.0 ;".split(" ")}]}},{$:"elif",ga:["WIREFRAME_QUALITY",1,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["GLSL1"],ha:{$:"grp",da:[{$:"extension",
aa:["GL_OES_standard_derivatives",":","enable"]}]}}]},{$:"txt",aa:"vec3 aN = fwidth ( aD ) ; vec3 aO = smoothstep ( vec3 ( 0.0 ) , aN * aE , aD ) ; aL = min ( min ( aO . x , aO . y ) , aO . z ) ; aL = clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["return","aL",";","}"]}]}}]},{$:"txt",aa:"void main ( ) { vec3 aQ = vec3 ( 0.0 ) ; float L = 0.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) { aQ = aF ; L = 1.0 ; } else discard ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"if ( u_debug_view_mode == DV_OPAQUE_WIREFRAME ) { float aL = aP ( ) ; aQ = vec3 ( mix ( u_wireframe_edge_color , aI , aL ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_TRANSPARENT_WIREFRAME ) { float aL = aP ( ) ; aQ = u_wireframe_edge_color ; L = mix ( 1.0 , 0.0 , aL ) ; } else if ( u_debug_view_mode == DV_FRONT_BACK_VIEW ) { float aL = aP ( ) ; if ( gl_FrontFacing ) aQ = mix ( u_wireframe_edge_color , aG , aL ) ; else aQ = mix ( u_wireframe_edge_color , aH , aL ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_CLUSTERS_VIEW ) { float aR = u_cluster_id + u_debug_colors_seed + 2.0 ; aQ = vec3 ( fract ( aR * 19.73 ) , fract ( aR * 6.34 ) , fract ( aR * 1.56 ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_BATCHES_VIEW ) { float aR = u_batch_debug_id_color + u_debug_colors_seed ; aQ = vec3 ( fract ( aR * 19.73 ) , fract ( aR * 6.34 ) , fract ( aR * 1.56 ) ) ; L = 1.0 ; } else if ( u_debug_view_mode == DV_RENDER_TIME ) { float aS ; if ( u_debug_render_time_threshold > 0.0 ) aS = clamp ( u_batch_debug_main_render_time , 0.0 , u_debug_render_time_threshold ) / u_debug_render_time_threshold ; else aS = 1.0 ; float aT = clamp ( 2.0 * aS , 0.0 , 1.0 ) ; float aU = clamp ( 2.0 * aS - 1.0 , 0.0 , 1.0 ) ; float aV = aS ; aQ = mix ( aJ , aK , vec3 ( aT , aU , aV ) ) ; L = 1.0 ; }".split(" ")}]}}]},
{$:"txt",aa:["aW","(","aQ",")",";"]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};d["debug_view.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"USE_INSTANCED_PARTCLS",aa:["0"]},{$:"var",ba:"DEBUG_VIEW_SPECIAL_SKYDOME",aa:["0"]},{$:"var",ba:"DEBUG_SPHERE",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS",
aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"VERTEX_ANIM",aa:["0"]},{$:"var",ba:"SKINNED",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"AU_QUALIFIER",aa:["GLSL_IN"]},{$:"var",ba:"BEND_CENTER_ONLY",aa:["0"]},{$:"var",ba:"FRAMES_BLENDING",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"MAX_BONES",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},
{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ; GLSL_IN float a_polyindex ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_bending_col_main",
";"]},{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_position_next",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_influence",";"]}]}}]}]}}]},{$:"txt",aa:["GLSL_OUT",
"vec3","aD",";"]},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"txt",
aa:"uniform vec3 u_wind ; uniform float u_time ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_eye",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float",
"u_va_frame_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",
da:[{$:"txt",aa:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"skin.glslv"},{$:"include",oa:"wind_bending.glslv"},{$:"include",oa:"dynamic_grass.glslv"}]}}]},{$:"txt",aa:"void main ( ) { if ( a_polyindex == 0.0 ) aD = vec3 ( 1.0 , 0.0 , 0.0 ) ; else if ( a_polyindex == 1.0 ) aD = vec3 ( 0.0 , 0.0 , 1.0 ) ; else aD = vec3 ( 0.0 , 1.0 , 0.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["DEBUG_VIEW_SPECIAL_SKYDOME"],ha:{$:"grp",da:[{$:"txt",aa:"gl_Position = vec4 ( a_position . xy , 0.9999999 , 1.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH",{$:"logic_negative_expr",
ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["mat3","Z","=","u_model_tsr",";"]}]}}]},{$:"txt",aa:"mat3 N = u_view_tsr ; vec3 O = a_position ; vec4 S = R ( a_tbn ) ; vec3 U = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEBUG_SPHERE"],ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",
da:[{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ; an ( O , V , W , U ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:["vec3","ao","=","au_center_pos",";"]}]}},{$:"elif",ga:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"au aw = aZ ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aq = ap ( Z , ao ) ; Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 a_ = aq ; Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , a_ , Z ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( O - ao , ao , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ; aw . ao = aq ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( O , ao , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"ax ( aw . O , aw . ao , U , mat4 ( 0.0 ) ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"gl_Position = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]};d["error.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},
{$:"include",oa:"std.glsl"},{$:"txt",aa:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 0.0 , 1.0 , 1.0 ) ; }".split(" ")}]};d["error.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"txt",aa:"GLSL_IN vec3 a_position ; uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; void main ( ) { gl_Position = u_proj_matrix * bc ( u_view_tsr ) * vec4 ( a_position , 1.0 ) ; }".split(" ")}]};d["grass_map.glslf"]=
{$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"DYNAMIC_GRASS_SIZE",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS_COLOR",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_SIZE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","bd",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","bd",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",
ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","bd",";"]}]}}]}]}}]},{$:"txt",aa:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_SIZE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT_FRAG_COLOR","=","bd",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( bd , vec3 ( 1.0 ) ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",
da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , bd ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:["}"]}]};d["grass_map.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"DYNAMIC_GRASS_SIZE",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS_COLOR",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},
{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"txt",aa:["GLSL_IN","vec3","a_position",";"]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_SIZE"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_grass_size",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_grass_color",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_SIZE"],ha:{$:"grp",da:[{$:"cond",
da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","bd",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","bd",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","bd",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{$:"else",
ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_eye",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_wind ; uniform float u_time ; uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},
{$:"txt",aa:"void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aq = ap ( Z , vec3 ( 0.0 ) ) ; Z = as ( u_camera_eye , aq , N , u_model_tsr ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ; aw . ao = aq ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , Z ) ;".split(" ")}]}}]},{$:"txt",aa:"vec4 f = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_SIZE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"bd = vec4 ( a_grass_size , a_grass_color ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["bd","=",
"a_grass_size",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["bd","=","a_grass_color",";"]}]}}]}]}}]},{$:"txt",aa:["gl_Position","=","f",";","}"]}]};d["halo.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"SKY_STARS",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform vec4 u_diffuse_color ; uniform vec3 u_halo_rings_color ; uniform vec3 u_halo_lines_color ; uniform float u_halo_hardness ; uniform float u_halo_size ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SKY_STARS"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_sun_intensity",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_halo_stars_blend ; uniform float u_halo_stars_height ; uniform float u_cam_water_depth ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SKY_STARS","WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",
ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","be",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_IN float bf ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"halo_color.glslf"},{$:"txt",aa:"void main ( ) { vec4 bi = bh ( ) ; vec3 aQ = bi . rgb ; float aM = bi . a ; aW ( aQ ) ; aX ( aQ , aM ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , aM ) ; }".split(" ")}]};d["halo.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",
aa:["highp"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"SKY_STARS",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform PRECISION float u_halo_size ; uniform vec3 u_camera_eye ;".split(" ")},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec2 a_halo_bb_vertex ; GLSL_IN float a_random_vals ; GLSL_OUT vec2 A ; GLSL_OUT float bf ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","be",";"]}]}}]},{$:"txt",aa:"void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ; vec3 O = ap ( Z , a_position ) ; A = a_halo_bb_vertex * 2.0 - 1.0 ; bf = a_random_vals ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SKY_STARS"],ha:{$:"grp",da:[{$:"txt",aa:"mat3 bk = bj ( O , N ) ; mat3 bl = N ; bl [ 0 ] [ 0 ] = 0.0 ; bl [ 0 ] [ 1 ] = 0.0 ; bl [ 0 ] [ 2 ] = 0.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat3 bk = bj ( O , N ) ;".split(" ")}]}}]},{$:"txt",aa:"vec2 bm = ( a_halo_bb_vertex * 2.0 - 1.0 ) * u_halo_size ; vec3 bn = vec3 ( bm [ 0 ] , 0.0 , bm [ 1 ] ) ; vec3 bo = ap ( bk , bn ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SKY_STARS"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 f = u_proj_matrix * vec4 ( ap ( bl , bo ) , 1.0 ) ; f . z = 0.99999 * f . w ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"be = vec4 ( bo , 1.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 f = u_proj_matrix * vec4 ( ap ( N , bo ) , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["gl_Position","=","f",";","}"]}]};d["irradiance_skybox.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",
oa:"color_util.glslf"},{$:"txt",aa:"uniform samplerCube u_sky_reflection ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bp ; void main ( ) { vec3 bq = normalize ( bp ) ; vec3 bs ; vec3 bt = vec3 ( 0.0 ) ; vec3 bu = vec3 ( 0.0 , 0.0 , 1.0 ) ; vec3 bv = vec3 ( 1.0 , 0.0 , 0.0 ) ; const float bw = 0.025 ; float bx = 0.0 ; for ( float by = 0.0 ; by < 2.0 * M_PI ; by += bw ) { for ( float bz = 0.0 ; bz < 0.5 * M_PI ; bz += bw ) { vec3 bA = vec3 ( sin ( bz ) * cos ( by ) , sin ( bz ) * sin ( by ) , cos ( bz ) ) ; vec3 bB = bA . x * bv + bA . y * bu + bA . z * bq ; vec3 bs = GLSL_TEXTURE_CUBE ( u_sky_reflection , bB ) . rgb ; bC ( bs ) ; bt += bs * cos ( bz ) * sin ( bz ) ; bx ++ ; } } bt = M_PI * bt * ( 1.0 / float ( bx ) ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bt , 1.0 ) ; }".split(" ")}]};
d["lens_flares.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform sampler2D u_sampler ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = GLSL_TEXTURE ( u_sampler , A ) ; aW ( aQ . rgb ) ; aX ( aQ . rgb , aQ . a ) ; GLSL_OUT_FRAG_COLOR = aQ ; }".split(" ")}]};d["lens_flares.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",
ba:"NUM_LIGHTS",aa:["0"]},{$:"define",ba:"LIGHT_INDEX",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; GLSL_IN float a_lf_dist ; GLSL_IN vec2 a_lf_bb_vertex ; GLSL_IN vec2 a_texcoord ; GLSL_OUT vec2 A ; void main ( ) { A = a_texcoord ; vec3 bD = normalize ( u_light_directions [ LIGHT_INDEX ] ) ; vec4 f = u_proj_matrix * vec4 ( _ ( u_view_tsr , bD ) , 0.0 ) ; f . x /= f . w ; f . y /= f . w ; f += 99999.0 * step ( f . z , 0.0 ) ; f += 100.0 * ( step ( 1.0 , abs ( f . x ) ) + step ( 1.0 , abs ( f . y ) ) ) ; f . x = a_lf_dist * f . x ; f . y = a_lf_dist * f . y ; float bE = u_proj_matrix [ 1 ] [ 1 ] / u_proj_matrix [ 0 ] [ 0 ] ; vec2 bF = vec2 ( a_lf_bb_vertex . x / bE , a_lf_bb_vertex . y ) ; if ( a_lf_dist < 0.999 ) { const float bG = 1.9 ; bF *= ( 1.0 + bG * length ( f . xy ) ) ; } gl_Position = vec4 ( f . xy + bF , 0.999999 , 1.0 ) ; }".split(" ")}]};
d["line.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform vec4 u_diffuse_color ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec3 aQ = u_diffuse_color . xyz ; float L = u_diffuse_color . a ; aW ( aQ ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
d["line.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec3 a_direction ; uniform mat3 u_model_tsr ; uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform float u_height ; uniform float u_line_width ; void main ( ) { mat3 N = u_view_tsr ; mat3 Z = u_model_tsr ; au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , normalize ( a_direction ) , Z ) ; vec4 bH = u_proj_matrix * vec4 ( ap ( N , aw . O ) , 1.0 ) ; bH . xyz /= bH . w ; vec4 bI = u_proj_matrix * vec4 ( ap ( N , aw . O + aw . U ) , 1.0 ) ; bI . xyz /= bI . w ; float bE = u_proj_matrix [ 1 ] [ 1 ] / u_proj_matrix [ 0 ] [ 0 ] ; vec2 bJ = ( bI - bH ) . xy ; bJ . x *= bE ; float bK = M_PI / 2.0 ; mat2 bL = mat2 ( cos ( bK ) , sin ( bK ) , - sin ( bK ) , cos ( bK ) ) ; bJ = bL * bJ ; bJ = normalize ( bJ ) ; vec2 bM = ( u_line_width / u_height ) * vec2 ( 1.0 / bE , 1.0 ) ; gl_Position = vec4 ( bH . xy + bJ . xy * bM / 2.0 , bH . z , 1.0 ) ; gl_Position *= bH . w ; }".split(" ")}]};
d["main.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SHADELESS",aa:["0"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"NORMAL_TEXCOORD",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR_INVERSE",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",
aa:["0"]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"TEXTURE_NORM_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"PARALLAX",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"RGBA_SHADOWS",aa:["0"]},{$:"var",ba:"USE_BSDF_SKY_DIM",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"ALPHA_CLIP",aa:["0"]},{$:"var",ba:"WETTABLE",aa:["0"]},
{$:"var",ba:"NUM_VALUES",aa:["0"]},{$:"var",ba:"NUM_RGBS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"NUM_LAMP_LIGHTS",aa:["0"]},{$:"var",ba:"SSAO_ONLY",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"USE_REFRACTION",aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},
{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"WATER_LEVEL",aa:["0.0"]},{$:"var",ba:"POISSON_DISK_NUM",aa:["NO_SOFT_SHADOWS"]},{$:"var",ba:"USE_DERIVATIVES_EXT",aa:["0"]},{$:"var",ba:"USE_TEXTURE_LOD_EXT",aa:["0"]},{$:"var",ba:"USE_LOD_SMOOTHING",aa:["0"]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_DERIVATIVES_EXT",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_OES_standard_derivatives",":","enable"]}]}}]},
{$:"cond",da:[{$:"if",ga:["GLSL1","USE_TEXTURE_LOD_EXT",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_EXT_shader_texture_lod",":","enable"]}]}}]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"math.glslv"},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"include",oa:"coverage.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",
da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",da:[{$:"include",oa:"caustics.glslf"}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS"],ha:{$:"grp",da:[{$:"include",oa:"pack.glslf"}]}}]},{$:"txt",aa:"uniform float u_time ; uniform vec2 u_texel_size ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_BSDF_SKY_DIM",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_bsdf_cube_sky_dim",";"]}]}}]},{$:"txt",aa:["uniform","float","u_environment_energy",";"]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_sun_quaternion ; uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")}]}}]}]}}]},{$:"txt",aa:["uniform","vec3","u_camera_eye_frag",";"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",
ia:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_direction",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_VIEW_TSR",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_VIEW_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_color_density",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_cube_fog",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"sampler2D","u_plane_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_cube_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_mirrormap",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PBR_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_reflection",";"]}]}},{$:"elif",
ga:["REFLECTION_TYPE","REFL_PBR_STANDARD",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform samplerCube u_cube_irradiance ; uniform samplerCube u_cube_r_convolution ; uniform sampler2D u_brdf ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_shadow_mask",";"]}]}},{$:"elif",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM",
"NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{$:"txt",aa:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",
ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_refractmap",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","USE_REFRACTION","REFRACTIVE","USE_REFRACTION_CORRECTION",{$:"logical_and_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{$:"txt",aa:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",
da:[]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_mirror_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_refl_plane",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_LAMP","NUM_LAMP_LIGHTS",0,{$:"non_equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_VALUE"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_RGB"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_OBJECT_INFO"],
ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_obj_info",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",{$:"logic_negative_expr",ia:1},"CAUSTICS","WATER_EFFECTS",{$:"logical_and_expr",ia:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",
{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:6}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"CALC_TBN_SPACE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],
ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","n",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","o",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","u",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},"REFRACTIVE","USE_POSITION_CLIP",{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","m",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4",
"GLSL_OUT_FRAG_COLOR",";"]},{$:"include",oa:"nodes.glslf"},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"fog.glslf"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",
ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",{$:"logic_negative_expr",ia:1},"CAUSTICS","WATER_EFFECTS",{$:"logical_and_expr",ia:3},{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:"float bN = length ( i ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"float bO = h . z - WATER_LEVEL ;".split(" ")}]}}]},{$:"txt",aa:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; vec3 aQ = E ; float L = I ; vec3 U = G ; vec4 bP = H ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1},"WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WETTABLE"],ha:{$:"grp",da:[{$:"txt",aa:"aQ = max ( aQ - sqrt ( 0.01 * - min ( bO , 0.0 ) ) , 0.5 * aQ ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",da:[{$:"txt",aa:"bQ ( aQ , bO , u_time , bP , U , u_sun_direction , u_sun_intensity , u_sun_quaternion , h , bN ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],
ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["ALPHA_CLIP"],ha:{$:"grp",da:[{$:"txt",aa:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"L = min ( 1.0 , L ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["L","=","1.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"bR ( aQ , bN , D , bO ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",
da:[{$:"txt",aa:"bR ( aQ , bN , D , 1.0 ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float bS = GLSL_TEXTURE_PROJ ( u_shadow_mask , l ) . a ; aQ = vec3 ( bS ) ;".split(" ")}]}}]},{$:"txt",aa:"aQ = max ( vec3 ( 0.0 ) , aQ ) ; aW ( aQ ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["ALPHA","ALPHA_CLIP",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};d["main.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SHADELESS",aa:["0"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"var",ba:"CALC_TBN",aa:["0"]},{$:"var",ba:"USE_INSTANCED_PARTCLS",aa:["0"]},{$:"var",ba:"TEXTURE_NORM_CO",
aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"PARALLAX",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"SMAA_JITTER",aa:["0"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"AU_QUALIFIER",aa:["GLSL_IN"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"BEND_CENTER_ONLY",aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS",
aa:["0"]},{$:"var",ba:"SKINNED",aa:["0"]},{$:"var",ba:"FRAMES_BLENDING",aa:["0"]},{$:"var",ba:"VERTEX_ANIM",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"MAC_OS_SHADOW_HACK",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"NUM_CAST_LAMPS",
aa:["0"]},{$:"var",ba:"TEXCOORD",aa:["0"]},{$:"var",ba:"VERTEX_COLOR",aa:["0"]},{$:"var",ba:"VERTEX_ANIM_MIX_NORMALS_FACTOR",aa:["u_va_frame_factor"]},{$:"var",ba:"MAX_BONES",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"include",oa:"scale_texcoord.glslv"},{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_influence",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{$:"cond",da:[{$:"if",
ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_bending_col_main",";"]},{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_position_next",";"]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_TEX_COORD_RE",{$:"logical_or_expr",ia:9}],ha:{$:"grp",
da:[{$:"txt",aa:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_color",";"]}]}}]}]}}]},{$:"txt",aa:"GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES","DISABLE_FOG",{$:"logic_negative_expr",
ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",{$:"logic_negative_expr",ia:1},"CAUSTICS","WATER_EFFECTS",{$:"logical_and_expr",ia:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:6}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",
ia:2},"CALC_TBN_SPACE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","bT",";"]},{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_COLOR","DYNAMIC_GRASS",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","bU",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",
ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","n",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","o",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","u",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",
3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","v",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},"REFRACTIVE","USE_POSITION_CLIP",{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_B4W_REFRACTION",{$:"logical_or_expr",
ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","m",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS",
"REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_view_refl_matrix",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"BILLBOARD","DYNAMIC_GRASS",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_eye",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD_JITTERED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_va_frame_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_texture_scale",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_normal_offset",";"]},{$:"cond",da:[{$:"if",ga:["MAC_OS_SHADOW_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"uniform mat3 u_v_light_tsr [ NUM_CAST_LAMPS ] ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_v_light_ts [ NUM_CAST_LAMPS ] ; uniform vec4 u_v_light_r [ NUM_CAST_LAMPS ] ;".split(" ")}]}}]},{$:"txt",aa:["uniform","mat4","u_p_light_matrix0",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","USE_NODE_B4W_REFRACTION",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{$:"include",oa:"dynamic_grass.glslv"},{$:"include",oa:"shadow.glslv"},
{$:"include",oa:"skin.glslv"},{$:"include",oa:"wind_bending.glslv"},{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"include",oa:"nodes.glslv"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["mat4","bV","=","u_view_refl_matrix",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat4 bV = mat4 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["mat3","N","=","u_view_tsr",";"]},{$:"cond",da:[{$:"if",
ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["mat3","Z","=","u_model_tsr",";"]}]}}]},{$:"txt",aa:["vec3","O","=","a_position",
";"]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"NODES",{$:"logic_negative_expr",ia:1},"USE_TBN_SHADING","CALC_TBN",{$:"logical_and_expr",ia:2},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:14}],ha:{$:"grp",da:[{$:"txt",aa:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 bW = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:13}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","U","=","bW",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 U = vec3 ( 0.0 ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE","NODES",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},{$:"elif",ga:["NODES",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2},{$:"logical_and_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 bX = ap ( Z , O ) ; vec3 ac = normalize ( _ ( Z , bW ) ) ; vec3 D = bX - u_camera_eye ; vec3 W = cross ( D , ac ) ; vec3 V = cross ( ac , W ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CALC_TBN"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ac = normalize ( _ ( Z , bW ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",
{$:"non_equal_expr",ia:2},"USE_NODE_BSDF_BEGIN","USE_NODE_TEX_COORD_RE","USE_NODE_BUMP",{$:"logical_or_expr",ia:10}],ha:{$:"grp",da:[{$:"txt",aa:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_NORMAL_MAP","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_BSDF_BEGIN","USE_NODE_BUMP",{$:"logical_or_expr",ia:8}],ha:{$:"grp",
da:[{$:"txt",aa:"U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",
aa:"an ( O , V , W , U ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ao","=","au_center_pos",";"]}]}},{$:"elif",ga:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",
aa:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"au aw = aZ ( O , V , ae , W , U , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aq = ap ( Z , ao ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],
ha:{$:"grp",da:[{$:"txt",aa:"O = ( bV * vec4 ( O , 1.0 ) ) . xyz ; ao = ( bV * vec4 ( ao , 1.0 ) ) . xyz ; aq = ( bV * vec4 ( aq , 1.0 ) ) . xyz ;".split(" ")}]}}]},{$:"txt",aa:"Z = as ( u_camera_eye , aq , N , Z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 a_ = aq ; Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , a_ , Z ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"CALC_TBN_SPACE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:"B = aw . aB ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"ax ( aw . O , aw . ao , U , bV ) ;".split(" ")}]}}]},{$:"txt",aa:"h = aw . O ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT",
"USE_NODE_BUMP",{$:"logical_or_expr",ia:13}],ha:{$:"grp",da:[{$:"txt",aa:"j = aw . U ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"bT = u_camera_eye - aw . O ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"bU = aw . aQ ;".split(" ")}]}},{$:"elif",ga:["VERTEX_COLOR"],
ha:{$:"grp",da:[{$:"txt",aa:["bU","=","a_color",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 bY = bV * vec4 ( aw . O , 1.0 ) ; bY . xyz = ap ( N , bY . xyz ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 bY = vec4 ( ap ( N , aw . O ) , 1.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","DISABLE_FOG",{$:"logic_negative_expr",
ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",{$:"logic_negative_expr",ia:1},"CAUSTICS","WATER_EFFECTS",{$:"logical_and_expr",ia:3},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:6}],ha:{$:"grp",da:[{$:"txt",aa:["i","=","bY",";"]}]}}]},{$:"txt",aa:"vec4 f = u_proj_matrix * bY ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],
ha:{$:"grp",da:[{$:"txt",aa:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},"REFRACTIVE","USE_POSITION_CLIP",{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:"l = aC ( f ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"bZ ( aw . O , aw . U ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["REFRACTIVE","NODES",{$:"logic_negative_expr",ia:1},"USE_NODE_B4W_REFRACTION",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"m = - bY . z / u_view_max_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"txt",aa:["J","(",")",";"]}]}}]},{$:"txt",aa:["gl_Position","=","f",";","}"]}]};d["main_stack.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"TEXTURE_NORM_CO",
aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"TEXTURE_SPEC_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR0_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"TEXTURE_COLOR1_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"PARALLAX",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_PLANE"]},{$:"var",ba:"RGBA_SHADOWS",aa:["0"]},{$:"var",ba:"TEXTURE_SPEC",
aa:["0"]},{$:"var",ba:"ALPHA_AS_SPEC",aa:["0"]},{$:"var",ba:"TEXTURE_STENCIL_ALPHA_MASK",aa:["0"]},{$:"var",ba:"TEXTURE_STENCIL_ALPHA_MASK_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"NORMAL_TEXCOORD",aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",aa:["0"]},{$:"var",ba:"DOUBLE_SIDED_LIGHTING",aa:["0"]},{$:"var",ba:"SHADELESS",aa:["0"]},{$:"var",ba:"TEXCOORD",aa:["0"]},{$:"var",ba:"VERTEX_COLOR",aa:["0"]},{$:"var",ba:"WETTABLE",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",
aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"WATER_LEVEL",aa:["0.0"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"var",ba:"TEXTURE_BLEND_TYPE",aa:["TEXTURE_BLEND_TYPE_MIX"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"ALPHA_CLIP",aa:["0"]},{$:"var",ba:"PARALLAX_LOD_DIST",aa:["5.0"]},{$:"var",ba:"PARALLAX_STEPS",aa:["5.0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",
aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"DYNAMIC_GRASS",aa:["0"]},{$:"var",ba:"POISSON_DISK_NUM",aa:["NO_SOFT_SHADOWS"]},{$:"var",ba:"SSAO_ONLY",aa:["0"]},{$:"var",ba:"USE_LOD_SMOOTHING",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"include",
oa:"math.glslv"},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"include",oa:"coverage.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",da:[{$:"include",oa:"caustics.glslf"}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS"],ha:{$:"grp",da:[{$:"include",oa:"pack.glslf"}]}}]},{$:"txt",aa:["uniform","float","u_time",";"]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",
{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"txt",aa:["uniform","float","u_environment_energy",";"]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_sun_quaternion ; uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",
ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_color_density",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_cube_fog",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_colormap0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_SPEC","ALPHA_AS_SPEC",
{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_specmap0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_STENCIL_ALPHA_MASK"],ha:{$:"grp",da:[{$:"txt",aa:"uniform sampler2D u_colormap1 ; uniform sampler2D u_stencil0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE",
"REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_plane_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_cube_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2}],
ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_shadow_mask",";"]}]}},{$:"elif",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},{$:"txt",aa:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",
1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION",
"GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_refractmap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","USE_REFRACTION_CORRECTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{$:"txt",aa:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ; uniform float u_specular_alpha ;".split(" ")},{$:"cond",
da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_reflect_factor",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_mirror_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_refl_plane",
";"]}]}}]},{$:"txt",aa:"uniform vec4 u_diffuse_color ; uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_normal_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_diffuse_color_factor ; uniform float u_alpha_factor ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["TEXTURE_SPEC"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_specular_color_factor",";"]}]}}]},{$:"txt",aa:"uniform vec3 u_specular_color ; uniform vec3 u_specular_params ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_parallax_scale",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"float","u_refr_bump",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",{$:"logic_negative_expr",ia:1},"CAUSTICS",{$:"logical_and_expr",ia:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:5}],
ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"CALC_TBN_SPACE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","k",";"]}]}}]},{$:"txt",aa:["GLSL_IN","vec3","bT",";"]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["VERTEX_COLOR","DYNAMIC_GRASS",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","bU",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","n",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","o",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",
2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","u",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN",
"vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","m",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"shadow.glslf"}]}}]},{$:"include",oa:"mirror.glslf"},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"include",oa:"refraction.glslf"}]}}]},{$:"include",oa:"environment.glslf"},{$:"cond",da:[{$:"if",ga:["SHADELESS",
{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"lighting_nodes.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"fog.glslf"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",
{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",ia:2},"SHADELESS",{$:"logic_negative_expr",ia:1},"CAUSTICS","WATER_EFFECTS",{$:"logical_and_expr",ia:3},{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"float bN = length ( i ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"float bO = h . z - WATER_LEVEL ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:["vec2","b_","=","A",";"]}]}}]},{$:"txt",aa:"vec3 ca = normalize ( j ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( gl_FrontFacing == false )".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["if","(","gl_FrontFacing",")"]}]}}]},{$:"txt",aa:"ca = ca ; else ca = - ca ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 W = cross ( ca , k . xyz ) * k . w ; mat3 cb = mat3 ( k . xyz , W , ca ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["mat3","N","=","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 cc = normalize ( _ ( N , j ) ) . st ; cc = cc * vec2 ( 0.495 ) + vec2 ( 0.5 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"PARALLAX",{$:"logical_and_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( bN < PARALLAX_LOD_DIST ) { float cd = clamp ( 0.5 * ( PARALLAX_LOD_DIST - bN ) , 0.0 , 1.0 ) ; float ce = u_parallax_scale * cd ; vec3 cf = normalize ( bT * cb ) ; float cg = 1.0 / PARALLAX_STEPS ; vec2 ch = cf . xy * ce / ( PARALLAX_STEPS * cf . z ) ; float ci = 1.0 ; float cj ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec2","ck","=","cc",";"]}]}},{$:"else",ha:{$:"grp",
da:[{$:"txt",aa:["vec2","ck","=","b_",";"]}]}}]},{$:"txt",aa:"cj = GLSL_TEXTURE ( u_normalmap0 , ck ) . a ; for ( float cl = 1.0 ; cl <= PARALLAX_STEPS ; cl ++ ) { if ( cj < ci ) { ci -= cg ; ck -= ch ; cj = GLSL_TEXTURE ( u_normalmap0 , ck ) . a ; } } vec2 cm = ck + ch ; float cn = GLSL_TEXTURE ( u_normalmap0 , cm ) . a - ( ci + cg ) ; float co = cj - ci ; float cp = co / ( co - cn ) ; ck = cp * cm + ( 1.0 - cp ) * ck ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:"b_ += ck - cc ;".split(" ")}]}}]},{$:"txt",aa:["cc","=","ck",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:"cc += ck - b_ ;".split(" ")}]}}]},{$:"txt",aa:["b_","=","ck",";"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec4",
"cq",";"]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cq = GLSL_TEXTURE ( u_normalmap0 , cc ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"cq = GLSL_TEXTURE ( u_normalmap0 , b_ ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 cr = cq . rgb - 0.5 ; cr = mix ( vec3 ( 0.0 , 0.0 , 1.0 ) , cr , u_normal_factor ) ; vec3 U = cb * cr ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","U","=","ca",";"]}]}}]},{$:"txt",
aa:"U = normalize ( U ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD"],ha:{$:"grp",da:[{$:"txt",aa:"cc = normalize ( _ ( N , U ) ) . st ; cc = cc * vec2 ( 0.495 ) + vec2 ( 0.5 ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 D = normalize ( bT ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["VERTEX_COLOR","DYNAMIC_GRASS",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cs = bU ; bC ( cs ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_COLOR","DYNAMIC_GRASS",{$:"logical_or_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 ct = vec4 ( cs , 1.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec4","ct","=","u_diffuse_color",";"]}]}}]},{$:"txt",aa:["float","cu","=","1.0",";"]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cv = GLSL_TEXTURE ( u_colormap0 , cc ) ;".split(" ")}]}},{$:"elif",ga:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_UV_ORCO",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cv = GLSL_TEXTURE ( u_colormap0 , b_ ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR0_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"bC ( cv . rgb ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_STENCIL_ALPHA_MASK"],ha:{$:"grp",da:[{$:"txt",aa:["vec4","cw",";"]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR1_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cw = GLSL_TEXTURE ( u_colormap1 , cc ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"cw = GLSL_TEXTURE ( u_colormap1 , b_ ) ;".split(" ")}]}}]},
{$:"txt",aa:"bC ( cw . rgb ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_STENCIL_ALPHA_MASK_CO","TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cx = GLSL_TEXTURE ( u_stencil0 , cc ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 cx = GLSL_TEXTURE ( u_stencil0 , b_ ) ;".split(" ")}]}}]},{$:"txt",aa:"cv = mix ( cv , cw , cx . r ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"ct . rgb = mix ( ct . rgb , cv . rgb , u_diffuse_color_factor ) ; float M = u_alpha_factor * cv . a ; M += ( 1.0 - step ( 0.0 , M ) ) ; ct . a = mix ( M , 1.0 , u_diffuse_color . a ) ; cu = cv . a ;".split(" ")}]}},{$:"elif",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"ct . rgb *= mix ( vec3 ( 1.0 ) , cv . rgb , u_diffuse_color_factor ) ; ct . a = cv . a ; cu = cv . a ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADELESS"],
ha:{$:"grp",da:[{$:"txt",aa:"vec3 aQ = ct . rgb ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 cy = u_diffuse_intensity * ct . rgb ; vec3 cA = u_environment_energy * cz ( U ) ; vec3 cB = u_ambient * cA ; vec4 bP = cC ( cy ) ; vec3 cD = u_emit * ct . rgb ; vec3 cE = u_specular_color ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_SPEC"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["ALPHA_AS_SPEC"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cF = vec3 ( cu ) ;".split(" ")}]}},{$:"elif",ga:["TEXTURE_SPEC_CO",
"TEXTURE_COORDS_NORMAL",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cF = GLSL_TEXTURE ( u_specmap0 , cc ) . rgb ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 cF = GLSL_TEXTURE ( u_specmap0 , b_ ) . rgb ;".split(" ")}]}}]},{$:"txt",aa:"bC ( cF . rgb ) ; cE = mix ( cE , cF , u_specular_color_factor ) ;".split(" ")}]}}]},{$:"txt",aa:"float cG = u_specular_params [ 0 ] ; vec2 cH = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cI = cG * cE ; vec3 aQ ; vec3 cJ ; cK ( cD , cB , cy , cI , h , U , D , cH , u_diffuse_params , bP , 0.0 , vec4 ( 0.0 ) , aQ , cJ ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cL ( aQ , D , U , u_reflect_factor , N ) ;".split(" ")}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cL ( aQ , D , U , u_reflect_factor , mat3 ( 0.0 ) ) ;".split(" ")}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cL ( aQ , D , U , u_mirror_factor , mat3 ( 0.0 ) ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["aQ","+=","cJ",";"]}]}}]},{$:"txt",aa:"float L = ct . a ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1},"WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WETTABLE"],ha:{$:"grp",da:[{$:"txt",aa:"aQ = max ( aQ - sqrt ( 0.01 * - min ( bO , 0.0 ) ) , 0.5 * aQ ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CAUSTICS"],ha:{$:"grp",
da:[{$:"txt",aa:"bQ ( aQ , bO , u_time , bP , U , u_sun_direction , u_sun_intensity , u_sun_quaternion , h , bN ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["ALPHA_CLIP"],ha:{$:"grp",da:[{$:"txt",aa:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"float t = max ( max ( cJ . r , cJ . g ) , cJ . b ) * u_specular_alpha ; L = ct . a * ( 1.0 - t ) + t ;".split(" ")}]}}]}]}}]}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["L","=","1.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 cM = - ( _ ( N , U ) ) . xy ; aQ = mix ( cN ( l , cM * u_refr_bump ) , aQ , L ) ; L = 1.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"bR ( aQ , bN , D , bO ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"bR ( aQ , bN , D , 1.0 ) ;".split(" ")}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["SSAO_ONLY","SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float bS = GLSL_TEXTURE_PROJ ( u_shadow_mask , l ) . a ; aQ = vec3 ( bS ) ;".split(" ")}]}}]},{$:"txt",aa:["aW","(","aQ",")",";"]},{$:"cond",da:[{$:"if",ga:["ALPHA","ALPHA_CLIP",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
d["node_skybox.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"USE_VIEW_TSR",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR_INVERSE",aa:["0"]},{$:"var",ba:"NUM_VALUES",aa:["0"]},{$:"var",ba:"NUM_RGBS",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["USE_NODE_VALUE"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_RGB"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_VIEW_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_VIEW_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",
ga:["USE_MODEL_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 bp ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"include",oa:"nodes.glslf"},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR",
"USE_NODE_TEXTURE_ENVIRONMENT_MIRROR_BALL","USE_NODE_GEOMETRY_NO","USE_NODE_GEOMETRY_GL","USE_NODE_GEOMETRY_IN","USE_NODE_TEX_COORD_GE","USE_NODE_TEX_COORD_OB","USE_NODE_TEX_COORD_NO","USE_NODE_B4W_REFLECT_WORLD",{$:"logical_or_expr",ia:9}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 D = - normalize ( bp ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","D",";"]}]}}]},{$:"txt",aa:"vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; E = max ( vec3 ( 0.0 ) , E ) ; aW ( E ) ; GLSL_OUT_FRAG_COLOR = vec4 ( E , _1_0 ) ; }".split(" ")}]};
d["particle_system.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"NUM_VALUES",aa:["0"]},{$:"var",ba:"NUM_RGBS",aa:["0"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"NUM_LAMP_LIGHTS",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"NORMAL_TEXCOORD",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR_INVERSE",
aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"ALPHA_CLIP",aa:["0"]},{$:"var",ba:"SOFT_STRENGTH",aa:["0.25"]},{$:"var",ba:"SOFT_PARTICLES",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"TEXTURE_NORM_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"CALC_TBN_SPACE",
aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"USE_DERIVATIVES_EXT",aa:["0"]},{$:"var",ba:"USE_TEXTURE_LOD_EXT",aa:["0"]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_DERIVATIVES_EXT",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_OES_standard_derivatives",":","enable"]}]}}]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_TEXTURE_LOD_EXT",{$:"logical_and_expr",
ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_EXT_shader_texture_lod",":","enable"]}]}}]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","NODES",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"pack.glslf"}]}}]},{$:"txt",aa:["uniform","float","u_environment_energy",";"]},{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_color_density",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_cube_fog",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"vec4","u_fog_params",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"txt",aa:"uniform float u_emit ; uniform float u_ambient ; uniform float u_time ; uniform vec3 u_camera_eye_frag ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_direction",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_LAMP"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_VALUE"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_RGB"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NORMAL_TEXCOORD","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_VIEW_TSR",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",
ga:["USE_VIEW_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:"uniform PRECISION sampler2D u_scene_depth ; uniform float u_view_max_depth ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_OBJECT_INFO"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_obj_info",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN",
"vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",ia:7}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]},{$:"txt",aa:["GLSL_IN","vec3","h",";"]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES",
"DISABLE_FOG",{$:"logic_negative_expr",ia:1},"NODES",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","i",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 j ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"fog.glslf"}]}}]},{$:"include",oa:"math.glslv"},{$:"include",oa:"particles_nodes.glslf"},{$:"txt",aa:"void main ( ) { vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; vec3 aQ = E ; float L = I ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["ALPHA_CLIP"],ha:{$:"grp",da:[{$:"txt",aa:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"L = min ( 1.0 , L ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["L","=","1.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"bR ( aQ , length ( i ) , D , 1.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES"],
ha:{$:"grp",da:[{$:"txt",aa:"float cO = - i . z / u_view_max_depth ; vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cR = cQ ( cP ) ; float cS = cR - cO ; float cT = u_view_max_depth / SOFT_STRENGTH * cS ; L = L * min ( cT , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["aW","(","aQ",")",";"]},{$:"cond",da:[{$:"if",ga:["ALPHA","ALPHA_CLIP",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};
d["particle_system.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"BILLBOARD_ALIGN",aa:["BILLBOARD_ALIGN_VIEW"]},{$:"var",ba:"TEXTURE_NORM_CO",aa:["TEXTURE_COORDS_NONE"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"HALO_PARTICLES",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"PARTICLES_SHADELESS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",
ba:"SOFT_PARTICLES",aa:["0"]},{$:"var",ba:"COLOR_RAMP_LENGTH",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"WORLD_SPACE",aa:["0"]},{$:"var",ba:"USE_COLOR_RAMP",aa:["0"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ; GLSL_IN vec3 a_p_data ; GLSL_IN vec4 a_p_vels ; GLSL_IN vec2 a_p_bb_vertex ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","cU",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec3","bU",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",ia:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","k",";"]}]}}]},{$:"cond",da:[{$:"if",
ga:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",ia:8}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec3","h",";"]},{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},"DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","bT",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"NODES",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","bf",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec3","j",";"]},{$:"cond",
da:[{$:"if",ga:["COLOR_RAMP_LENGTH",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_p_color_ramp [ COLOR_RAMP_LENGTH ] ;".split(" ")}]}}]},{$:"txt",aa:"uniform float u_p_time ; uniform float u_p_length ; uniform int u_p_cyclic ; uniform float u_p_fade_in ; uniform float u_p_fade_out ; uniform float u_p_nfactor ; uniform float u_p_gravity ; uniform float u_p_mass ; uniform float u_p_wind_fac ; uniform float u_p_max_lifetime ; uniform float u_p_tilt ; uniform float u_p_tilt_rand ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_view_refl_matrix",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_wind ; uniform float u_p_size ; uniform vec3 u_camera_eye ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WORLD_SPACE",{$:"logic_negative_expr",ia:1},"NODES","HALO_PARTICLES",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","mat3",
"u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_COLOR_RAMP"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_color_ramp_tex",";"]}]}}]},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"include",oa:"particles.glslv"},{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"include",oa:"particles_nodes.glslv"}]}}]},{$:"txt",aa:"float cX ( vec2 cV , vec2 cW ) { return ( atan ( cW . y , cW . x ) - atan ( cV . y , cV . x ) ) ; } void main ( ) {".split(" ")},{$:"cond",da:[{$:"if",
ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["mat4","bV","=","u_view_refl_matrix",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat4 bV = mat4 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"mat3 N = u_view_tsr ; cY pp ; pp = cZ ( ) ; float c_ ; mat3 bk = da ( ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 db = ( bV * vec4 ( pp . O , 1.0 ) ) . xyz ;".split(" ")}]}},{$:"else",
ha:{$:"grp",da:[{$:"txt",aa:"vec3 db = pp . O ;".split(" ")}]}}]},{$:"txt",aa:"vec3 U = vec3 ( 0.0 , - 1.0 , 0.0 ) ; if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_VIEW ) { c_ = pp . bK ; bk = bj ( db , N ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_XY ) { c_ = cX ( vec2 ( EPSILON , 1.0 ) , vec2 ( U . x , - U . y ) ) + pp . bK ; bk [ 0 ] = db ; vec4 dc = X ( RIGHT_VECTOR , - M_PI / 2.0 ) ; bk = dd ( dc , bk ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_YZ ) { c_ = pp . bK ; bk [ 0 ] = db ; vec4 de = X ( UP_VECTOR , M_PI / 2.0 ) ; bk = dd ( de , bk ) ; } else if ( BILLBOARD_ALIGN == BILLBOARD_ALIGN_ZX ) { c_ = pp . bK ; bk [ 0 ] = db ; } vec3 bn = vec3 ( ( a_p_bb_vertex [ 0 ] * 2.0 - 1.0 ) * pp . df * u_p_size , 0.0 , ( a_p_bb_vertex [ 1 ] * 2.0 - 1.0 ) * pp . df * u_p_size ) ; float dg = a_p_data [ 2 ] ; float dh = u_p_tilt * u_p_tilt_rand * ( 2.0 * dg - 1.0 ) ; float di = ( dh + u_p_tilt ) * M_PI ; vec4 dj = X ( TOWARD_VECTOR , di + c_ ) ; vec3 bo = ap ( bk , T ( dj , bn ) ) ; vec4 bY = vec4 ( ap ( N , bo ) , 1.0 ) ; vec4 f = u_proj_matrix * bY ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:["bf","=","dg",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"mat3 dk = da ( ) ; dj = X ( TOWARD_VECTOR , c_ ) ; dk = dd ( dj , dk ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE","NODES",{$:"logic_negative_expr",ia:1},"TEXTURE_NORM_CO","TEXTURE_COORDS_UV_ORCO",
{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2},"USE_TBN_SHADING",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 W = vec3 ( 0.0 , 0.0 , 1.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , V , vec3 ( 0.0 ) , W , U , aY ( bk , dk ) ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_NORM_CO","TEXTURE_COORDS_NONE",{$:"non_equal_expr",
ia:2},"CALC_TBN_SPACE","USE_TBN_SHADING",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{$:"txt",aa:"J ( pp . O , pp . dl , pp . dm , pp . dn , pp . df , a_p_bb_vertex , a_p_data [ 0 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , U , aY ( bk , dk ) ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["A","=","a_p_bb_vertex",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:"A = a_p_bb_vertex * 2.0 - 1.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"cU = pp . L ;".split(" ")}]}}]},{$:"txt",aa:"bU = pp . aQ ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1},"PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2},"USE_NODE_MATERIAL_BEGIN",
"USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:11}],ha:{$:"grp",da:[{$:"txt",aa:"j = aw . U ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"l = aC ( f ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES",
"DISABLE_FOG",{$:"logic_negative_expr",ia:1},"NODES",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["i","=","bY",";"]}]}}]},{$:"txt",aa:"gl_Position = f ; h = bo ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},"DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"bT = u_camera_eye - bo ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]};d["particle_system_stack.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},
{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"var",ba:"TEXTURE_BLEND_TYPE",aa:["TEXTURE_BLEND_TYPE_MIX"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"ALPHA_CLIP",aa:["0"]},{$:"var",ba:"SOFT_STRENGTH",aa:["0.25"]},{$:"var",ba:"SOFT_PARTICLES",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"HALO_PARTICLES",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",
ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"SKY_STARS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"PARTICLES_SHADELESS",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","NODES",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"pack.glslf"}]}}]},{$:"cond",
da:[{$:"if",ga:["HALO_PARTICLES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_sampler",";"]}]}}]},{$:"txt",aa:["uniform","float","u_environment_energy",";"]},{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_diffuse_color_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ; uniform float u_emit ; uniform float u_ambient ; uniform vec3 u_specular_color ; uniform vec3 u_specular_params ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_halo_size ; uniform vec3 u_halo_rings_color ; uniform float u_halo_hardness ; uniform vec3 u_halo_lines_color ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SKY_STARS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_sun_intensity ; uniform float u_halo_stars_blend ; uniform float u_halo_stars_height ;".split(" ")}]}}]},{$:"txt",aa:"uniform float u_p_alpha_start ; uniform float u_p_alpha_end ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",
{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_color_density",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_underwater_fog_color_density ; uniform float u_cam_water_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_cube_fog",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},
{$:"txt",aa:["uniform","vec4","u_diffuse_color",";"]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:"uniform PRECISION sampler2D u_scene_depth ; uniform float u_view_max_depth ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR","HALO_PARTICLES","USE_NODE_TEX_COORD_UV","USE_NODE_UV_MERGED","USE_NODE_UVMAP","USE_NODE_GEOMETRY_UV","USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",
{$:"logical_or_expr",ia:8}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]},{$:"txt",aa:["GLSL_IN","vec3","h",";"]},{$:"cond",da:[{$:"if",ga:["NODES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","cU",";"]}]}}]},{$:"txt",aa:["GLSL_IN","vec3","bU",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},"DISABLE_FOG",{$:"logic_negative_expr",
ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","bT",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"NODES",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","bf",";"]},{$:"cond",da:[{$:"if",ga:["SKY_STARS"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","be",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",
ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec3 j ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"include",oa:"lighting_nodes.glslf"},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"fog.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"environment.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],
ha:{$:"grp",da:[{$:"include",oa:"halo_color.glslf"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1},"DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 D = normalize ( bT ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["HALO_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 bi = bh ( ) ; vec3 aQ = bi . rgb * bU ; float dp = 0.9 * length ( A ) ; float dq = smoothstep ( u_p_alpha_start , u_p_alpha_end , dp ) ; float L = bi . a * ( 1.0 - dq ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec4","ct","=","u_diffuse_color",";"]},{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cv = GLSL_TEXTURE ( u_sampler , A ) ; bC ( cv . rgb ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"ct . rgb = mix ( ct . rgb , cv . rgb , u_diffuse_color_factor ) ;".split(" ")}]}},{$:"elif",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MULTIPLY",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"ct . rgb *= mix ( vec3 ( 1.0 ) , cv . rgb , u_diffuse_color_factor ) ;".split(" ")}]}}]},{$:"txt",aa:"ct . a = cv . a ;".split(" ")}]}}]},{$:"txt",aa:"ct . rgb *= bU ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PARTICLES_SHADELESS",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cy = u_diffuse_intensity * ct . rgb ; vec3 cD = u_emit * ct . rgb ; vec3 U = normalize ( j ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",
{$:"logic_negative_expr",ia:1},"SKY_COLOR",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 cA = u_environment_energy * cz ( vec3 ( 0.0 ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 cA = u_environment_energy * cz ( U ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 cB = u_ambient * cA ; float cG = u_specular_params [ 0 ] ; vec2 cH = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cI = cG * u_specular_color ; vec3 aQ ; vec3 cJ ; cK ( cD , cB , cy , cI , h , U , D , cH , u_diffuse_params , vec4 ( 1.0 ) , 0.0 , vec4 ( 0.0 ) , aQ , cJ ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 aQ = ct . rgb ;".split(" ")}]}}]},{$:"txt",aa:"float L = ct . a * cU ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["ALPHA_CLIP"],ha:{$:"grp",da:[{$:"txt",aa:"if ( L < 0.5 ) discard ; L = 1.0 ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["L","=","1.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"bR ( aQ , length ( i ) , D , 1.0 ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES"],ha:{$:"grp",da:[{$:"txt",aa:"float cO = - i . z / u_view_max_depth ; vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cR = cQ ( cP ) ; float cS = cR - cO ; float cT = u_view_max_depth / SOFT_STRENGTH * cS ; L = L * min ( cT , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["aW","(","aQ",")",";"]},{$:"cond",da:[{$:"if",ga:["ALPHA","ALPHA_CLIP",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},
{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};d["proc_skybox.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform vec3 u_sky_color ; uniform vec3 u_sun_direction ; uniform float u_rayleigh_brightness ; uniform float u_mie_brightness ; uniform float u_spot_brightness ; uniform float u_scatter_strength ; uniform float u_rayleigh_strength ; uniform float u_mie_strength ; uniform float u_rayleigh_collection_power ; uniform float u_mie_collection_power ; uniform float u_mie_distribution ; GLSL_IN vec3 bp ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; const float dr = 0.99 ; const float ds = 1.8 ; const int dt = 8 ; float dy ( vec3 O , vec3 bD ) { float a = dot ( bD , bD ) ; float b = 2.0 * dot ( bD , O ) ; float du = dot ( O , O ) - 1.0 ; float dv = b * b - 4.0 * a * du ; float dw = sqrt ( dv ) ; float q = ( - b - dw ) / 2.0 ; float dx = du / q ; return dx ; } float dA ( float L , float g ) { float a = 3.0 * ( 1.0 - g * g ) ; float b = 2.0 * ( 2.0 + g * g ) ; float du = 1.0 + L * L ; float dz = pow ( 1.0 + g * g - 2.0 * g * L , 1.5 ) ; dz = max ( dz , 0.00001 ) ; return ( a / b ) * ( du / dz ) ; } float dF ( vec3 O , vec3 bD , float dB ) { float dC = dot ( bD , - O ) ; if ( dC < 0.0 ) { return 1.0 ; } vec3 dD = O + dC * bD ; if ( length ( dD ) < dB ) { return 0.0 ; } else if ( length ( dD ) >= dB ) { vec3 cW = normalize ( dD ) * dB - O ; float dE = acos ( dot ( normalize ( cW ) , bD ) ) ; return smoothstep ( 0.0 , 1.0 , pow ( dE * 2.0 , 3.0 ) ) ; } else return 1.0 ; } vec3 dG ( float aM , vec3 aQ , float aL ) { return aQ - aQ * pow ( u_sky_color , vec3 ( aL / aM ) ) ; } void main ( ) { vec3 bq = normalize ( bp ) ; vec3 dH = u_sun_direction ; float L = dot ( bq , dH ) ; float dI = dA ( L , - 0.01 ) * u_rayleigh_brightness * dH . z ; float dJ = dA ( L - 0.5 , u_mie_distribution ) * u_mie_brightness * ( 1.0 - dH . z ) ; float dK = smoothstep ( 0.0 , 100.0 , dA ( L , 0.9995 ) ) * u_spot_brightness ; vec3 dL = vec3 ( 0.0 , 0.0 , dr ) ; float dM = dy ( dL , bq ) ; float dN = dM / float ( dt ) ; float dO = dF ( dL , bq , dr - 0.3 ) ; vec3 dP = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 dQ = vec3 ( 0.0 , 0.0 , 0.0 ) ; for ( int cl = 0 ; cl < dt ; cl ++ ) { float dR = dN * float ( cl ) ; vec3 O = dL + bq * dR ; float dS = dF ( O , dH , dr - 0.2 ) ; float dT = dy ( O , dH ) ; vec3 dU = dG ( dT , vec3 ( ds ) , u_scatter_strength ) * dS ; dP += dG ( sqrt ( dR ) , u_sky_color * dU , u_rayleigh_strength ) ; dQ += dG ( dR , dU , u_mie_strength ) ; } dP = dP * dO * pow ( dM , u_rayleigh_collection_power ) / float ( dt ) ; dQ = ( dQ * dO * pow ( dM , u_mie_collection_power ) ) / float ( dt ) ; vec3 aQ = vec3 ( dK * dQ + dJ * dQ + dI * dP ) ; aW ( aQ ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , 1.0 ) ; }".split(" ")}]};
d["r_convolution_skybox.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform samplerCube u_sky_reflection ; uniform float u_roughness ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bp ; float dZ ( int cr , int dV ) { float dW = 1.0 / float ( dV ) ; float dX = 1.0 ; float dY = 0.0 ; for ( int cl = 0 ; cl < 32 ; ++ cl ) { if ( cr > 0 ) { dX = mod ( float ( cr ) , 2.0 ) ; dY += dX * dW ; dW = dW / 2.0 ; cr = int ( float ( cr ) / 2.0 ) ; } } return dY ; } vec2 ea ( int cl , int d_ ) { return vec2 ( float ( cl ) / float ( d_ ) , dZ ( cl , 2 ) ) ; } vec3 eh ( vec2 eb , vec3 d_ , float ec ) { float a = ec * ec ; float by = 2.0 * M_PI * eb . x ; float ed = sqrt ( ( 1.0 - eb . y ) / ( 1.0 + ( a * a - 1.0 ) * eb . y ) ) ; float ee = sqrt ( 1.0 - ed * ed ) ; vec3 ef ; ef . x = cos ( by ) * ee ; ef . y = sin ( by ) * ee ; ef . z = ed ; vec3 bu = abs ( d_ . z ) < 0.999 ? vec3 ( 0.0 , 0.0 , 1.0 ) : vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 V = normalize ( cross ( bu , d_ ) ) ; vec3 eg = cross ( d_ , V ) ; vec3 bB = V * ef . x + eg * ef . y + d_ * ef . z ; return normalize ( bB ) ; } void main ( ) { vec3 ei = vec3 ( 0.0 ) ; if ( u_roughness != 0.0 ) { vec3 d_ = normalize ( bp ) ; vec3 ej = d_ ; vec3 ek = ej ; const int el = 1024 ; float em = 0.0 ; for ( int cl = 0 ; cl < el ; ++ cl ) { vec2 eb = ea ( cl , el ) ; vec3 ef = eh ( eb , d_ , u_roughness ) ; vec3 en = normalize ( 2.0 * dot ( ek , ef ) * ef - ek ) ; float eo = max ( dot ( d_ , en ) , 0.0 ) ; if ( eo > 0.0 ) { vec3 bs = GLSL_TEXTURE_CUBE ( u_sky_reflection , en ) . rgb ; bC ( bs ) ; ei += bs * eo ; em += eo ; } } ei = ei / em ; } else { vec3 bs = GLSL_TEXTURE_CUBE ( u_sky_reflection , normalize ( bp ) ) . rgb ; bC ( bs ) ; ei = bs ; } GLSL_OUT_FRAG_COLOR = vec4 ( ei , 1.0 ) ; }".split(" ")}]};
d["shadow.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"SHADELESS",aa:["0"]},{$:"var",ba:"RGBA_SHADOWS",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR_INVERSE",aa:["0"]},{$:"var",ba:"USE_VIEW_TSR",aa:["0"]},{$:"var",ba:"USE_MODEL_TSR",aa:["0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},
{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"USE_REFRACTION",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"NUM_LAMP_LIGHTS",aa:["0"]},{$:"var",ba:"TEXTURE_BLEND_TYPE",
aa:["TEXTURE_BLEND_TYPE_MIX"]},{$:"var",ba:"NUM_VALUES",aa:["0"]},{$:"var",ba:"NUM_RGBS",aa:["0"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"POISSON_DISK_NUM",aa:["NO_SOFT_SHADOWS"]},{$:"var",ba:"USE_DERIVATIVES_EXT",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"USE_LOD_SMOOTHING",aa:["0"]},{$:"cond",da:[{$:"if",ga:["GLSL1","USE_DERIVATIVES_EXT",{$:"logical_and_expr",
ia:2}],ha:{$:"grp",da:[{$:"extension",aa:["GL_OES_standard_derivatives",":","enable"]}]}}]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"math.glslv"}]}}]},{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS"],ha:{$:"grp",da:[{$:"include",oa:"depth_fetch.glslf"},{$:"include",oa:"pack.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"include",oa:"coverage.glslf"}]}}]},
{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_time ; uniform float u_environment_energy ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{$:"txt",aa:["uniform","vec3","u_camera_eye_frag",";"]},{$:"cond",da:[{$:"if",
ga:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:2},"CAMERA_TYPE","CAM_TYPE_ORTHO",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_direction",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_VIEW_TSR",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_view_tsr_frag",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_VIEW_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",
aa:["uniform","mat3","u_view_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_MODEL_TSR_INVERSE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr_inverse",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT",
"SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_plane_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_cube_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{$:"txt",aa:"uniform float u_emit ; uniform float u_ambient ; uniform vec2 u_fresnel_params ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_mirror_factor",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_refl_plane",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_LAMP"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_lamp_light_positions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_directions [ NUM_LAMP_LIGHTS ] ; uniform vec3 u_lamp_light_color_intensities [ NUM_LAMP_LIGHTS ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_VALUE"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_node_values [ NUM_VALUES ] ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_RGB"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_node_rgbs [ NUM_RGBS ] ;".split(" ")}]}}]}]}},
{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"uniform sampler2D u_colormap0 ; uniform float u_alpha_factor ;".split(" ")}]}}]},{$:"txt",aa:["uniform","vec4","u_diffuse_color",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_pcf_blur_radii",";"]}]}}]},
{$:"txt",aa:"uniform vec4 u_csm_center_dists ; uniform PRECISION GLSL_SMPLR2D_SHDW u_shadow_map0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map1",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map2",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","GLSL_SMPLR2D_SHDW","u_shadow_map3",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_shadow_mask",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_refractmap",
";"]},{$:"cond",da:[{$:"if",ga:["USE_REFRACTION","USE_REFRACTION_CORRECTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_CURVE_VEC","USE_NODE_CURVE_RGB","USE_NODE_VALTORGB",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_nodes_texture",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_OBJECT_INFO"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_obj_info",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS","SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_camera_range",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_lod_coverage ; uniform float u_lod_cmp_logic ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","k",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"NODES","ALPHA",{$:"logical_and_expr",ia:2},"SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},"RGBA_SHADOWS",{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:3}],ha:{$:"grp",
da:[{$:"txt",aa:["GLSL_IN","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","n",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","o",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN",
"vec4","u",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","v",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION",
"USE_REFRACTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","m",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"cond",da:[{$:"if",ga:["SHADELESS",{$:"logic_negative_expr",ia:1},"NODES","ALPHA",{$:"logical_and_expr",ia:2},"SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"include",
oa:"shadow.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"nodes.glslf"}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_LOD_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"if ( ! C ( u_lod_coverage , u_lod_cmp_logic ) ) discard ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NODES"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 D = normalize ( u_camera_eye_frag - h ) ; vec3 E ; vec3 F ; vec3 G ; vec4 H ; float I ; J ( D , E , F , G , H , I ) ; float L = I ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"float L = ( GLSL_TEXTURE ( u_colormap0 , A ) ) . a ;".split(" ")},{$:"cond",da:[{$:"if",ga:["TEXTURE_BLEND_TYPE","TEXTURE_BLEND_TYPE_MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float M = u_alpha_factor * L ; M += ( 1.0 - step ( 0.0 , M ) ) ; L = mix ( M , 1.0 , u_diffuse_color . a ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float L = u_diffuse_color . a ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:"if ( L < 0.5 ) discard ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","NO_SHADOWS",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS"],ha:{$:"grp",da:[{$:"txt",aa:"float eq = ep ( - i . z , u_camera_range ) ; GLSL_OUT_FRAG_COLOR = er ( eq ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 ) ;".split(" ")}]}}]}]}},{$:"elif",
ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = es ( i . z ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR . a *= clamp ( k . r , 0.999999999 , 1.0 ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:["}"]}]};d["shadow.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",
aa:["highp"]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"var",ba:"CALC_TBN",aa:["0"]},{$:"var",ba:"USE_INSTANCED_PARTCLS",aa:["0"]},{$:"var",ba:"NODES",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"SMAA_JITTER",aa:["0"]},{$:"var",ba:"MAC_OS_SHADOW_HACK",aa:["0"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"RGBA_SHADOWS",
aa:["0"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"AU_QUALIFIER",aa:["GLSL_IN"]},{$:"var",ba:"BEND_CENTER_ONLY",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"HAIR_BILLBOARD",aa:["0"]},{$:"var",ba:"FRAMES_BLENDING",aa:["0"]},{$:"var",ba:"SHADOW_TEX_RES",aa:["2048.0"]},{$:"var",ba:"VERTEX_ANIM",aa:["0"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"TEXTURE_COLOR",aa:["0"]},{$:"var",ba:"ALPHA",aa:["0"]},
{$:"var",ba:"VERTEX_ANIM_MIX_NORMALS_FACTOR",aa:["u_va_frame_factor"]},{$:"var",ba:"MAX_BONES",aa:["0"]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"SKINNED",aa:["0"]},{$:"var",ba:"DYNAMIC_GRASS",aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"include",oa:"scale_texcoord.glslv"},
{$:"txt",aa:"GLSL_IN vec3 a_position ; GLSL_IN vec4 a_tbn ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec4 a_part_ts ; GLSL_IN vec4 a_part_r ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_shade_tangs",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_influence",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",
{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["AU_QUALIFIER","vec3","au_center_pos",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_bending_col_main",";"]},{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 a_bending_col_detail ; AU_QUALIFIER float au_detail_bending_amp ; AU_QUALIFIER float au_branch_bending_amp ; AU_QUALIFIER float au_detail_bending_freq ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:"AU_QUALIFIER float au_wind_bending_amp ; AU_QUALIFIER float au_wind_bending_freq ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_emitter_center",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","a_position_next",";"]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO",
"USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_tbn_next",";"]}]}}]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2},{$:"logic_negative_expr",ia:1},"TEXTURE_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","k",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"NODES","ALPHA",{$:"logical_and_expr",ia:2},"SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},"RGBA_SHADOWS",{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:3}],
ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","i",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","n",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","o",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:["GLSL_OUT","vec4","u",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","v",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",
ga:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","m",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","mat3","u_model_tsr",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_subpixel_jitter",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_camera_eye",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["BILLBOARD","SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:["uniform","mat3","u_shadow_cast_billboard_view_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform PRECISION sampler2D u_grass_map_depth ; uniform sampler2D u_grass_map_color ; uniform vec4 u_camera_quat ; uniform vec3 u_grass_map_dim ; uniform float u_grass_size ; uniform float u_scale_threshold ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsb [ MAX_BONES ] ; uniform vec4 u_transb [ MAX_BONES ] ; uniform vec4 u_arm_rel_trans ; uniform vec4 u_arm_rel_quat ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_quatsa [ MAX_BONES ] ; uniform vec4 u_transa [ MAX_BONES ] ; uniform float u_frame_factor ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD_JITTERED"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_jitter_amp ; uniform float u_jitter_freq ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec3 u_wind ; uniform PRECISION float u_time ;".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_va_frame_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2},{$:"logic_negative_expr",ia:1},"TEXTURE_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec3","u_texture_scale",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_normal_offset",";"]},{$:"cond",da:[{$:"if",
ga:["MAC_OS_SHADOW_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"uniform mat3 u_v_light_tsr [ NUM_CAST_LAMPS ] ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_v_light_ts [ NUM_CAST_LAMPS ] ; uniform vec4 u_v_light_r [ NUM_CAST_LAMPS ] ;".split(" ")}]}}]},{$:"txt",aa:["uniform","mat4","u_p_light_matrix0",";"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix1",";"]}]}}]},
{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix2",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4","u_p_light_matrix3",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","float","u_view_max_depth",
";"]}]}}]},{$:"include",oa:"dynamic_grass.glslv"},{$:"include",oa:"shadow.glslv"},{$:"include",oa:"skin.glslv"},{$:"include",oa:"wind_bending.glslv"},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"nodes.glslv"}]}}]},{$:"txt",aa:"void main ( ) { mat3 N = u_view_tsr ; vec3 O = a_position ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"CALC_TBN_SPACE","USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO",
"USE_NODE_NORMAL_MAP","CAUSTICS","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_NO","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:13}],ha:{$:"grp",da:[{$:"txt",aa:"float P , Q ; vec4 S = R ( a_tbn , P , Q ) ; vec3 bW = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; vec3 U = bW ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 U = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["NODES","ALPHA","CALC_TBN_SPACE",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 W = Q * cross ( U , V ) ; vec4 Y = X ( W , Q * P ) ; V = T ( Y , U ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 0.0 ) ; vec3 W = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["VERTEX_ANIM"],ha:{$:"grp",da:[{$:"txt",aa:"O = mix ( O , a_position_next , u_va_frame_factor ) ;".split(" ")},{$:"cond",da:[{$:"if",
ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:"float af , ah ; vec4 ai = R ( a_tbn_next , af , ah ) ; vec3 aj = T ( ai , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; U = mix ( U , aj , VERTEX_ANIM_MIX_NORMALS_FACTOR ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ak = T ( ai , vec3 ( 1.0 , 0.0 , 0.0 ) ) ; vec3 al = ah * cross ( aj , ak ) ; vec4 am = X ( al , ah * af ) ; ak = T ( am , aj ) ; V = mix ( V , ak , u_va_frame_factor ) ; W = mix ( W , al , u_va_frame_factor ) ;".split(" ")}]}}]}]}}]}]}}]},
{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"txt",aa:"an ( O , V , W , U ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_INSTANCED_PARTCLS"],ha:{$:"grp",da:[{$:"txt",aa:"mat3 Z = mat3 ( a_part_ts [ 0 ] , a_part_ts [ 1 ] , a_part_ts [ 2 ] , a_part_ts [ 3 ] , a_part_r [ 0 ] , a_part_r [ 1 ] , a_part_r [ 2 ] , a_part_r [ 3 ] , 1.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"Z = aY ( u_model_tsr , Z ) ;".split(" ")}]}}]}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["mat3","Z","=","u_model_tsr",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND","DYNAMIC_GRASS","BILLBOARD",{$:"logical_or_expr",ia:3},"USE_INSTANCED_PARTCLS",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ao","=","au_center_pos",";"]}]}},{$:"elif",ga:["DYNAMIC_GRASS","USE_INSTANCED_PARTCLS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ao = a_part_ts . xyz ; O = ap ( Z , O ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ao = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["CALC_TBN"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ac = normalize ( _ ( Z , bW ) ) ; vec3 ad = cross ( vec3 ( 0.0 , 0.0 , 1.0 ) , ac ) ; vec3 ae = cross ( ac , ad ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","ae","=","a_shade_tangs",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ae = vec3 ( 0.0 ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"txt",aa:"au aw = aZ ( O , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , U , ao , u_grass_map_depth , u_grass_map_color , u_grass_map_dim , u_grass_size , u_camera_eye , u_camera_quat , N , Z ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aq = ap ( Z , ao ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["HAIR_BILLBOARD",{$:"logic_negative_expr",ia:1},"SHADOW_USAGE","SHADOW_CASTING",
{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["mat3","et","=","u_shadow_cast_billboard_view_tsr",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["mat3","et","=","N",";"]}]}}]},{$:"txt",aa:"Z = as ( u_camera_eye , aq , et , Z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WIND_BEND","BILLBOARD_JITTERED",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"Z = at ( u_wind , u_time , u_jitter_amp , u_jitter_freq , aq , Z ) ;".split(" ")}]}}]},{$:"txt",aa:"au aw = av ( O - ao , ao , V , ae , W , U , Z ) ; aw . ao = aq ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"au aw = av ( O , ao , V , ae , W , U , Z ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ay","=","bW",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ay = vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"ax ( aw . O , aw . ao , ay , mat4 ( 0.0 ) ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",
{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"h = aw . O ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","USE_NODE_NORMAL_MAP","CAUSTICS","CALC_TBN_SPACE","WIND_BEND","MAIN_BEND_COL","DETAIL_BEND",{$:"logical_and_expr",ia:3},"USE_NODE_TEX_COORD_NO","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:12}],ha:{$:"grp",da:[{$:"txt",aa:"j = aw . U ;".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:"float aA = ( dot ( cross ( aw . U , aw . V ) , aw . W ) < 0.0 ) ? - 1.0 : 1.0 ; k = vec4 ( aw . V , aA ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:"B = aw . aB ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"vec4 bY = vec4 ( ap ( N , aw . O ) , 1.0 ) ; vec4 f = u_proj_matrix * bY ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_JITTER"],ha:{$:"grp",da:[{$:"txt",aa:"f . xy += u_subpixel_jitter * f . w ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["NODES","ALPHA",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"USE_POSITION_CLIP",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"l = aC ( f ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION","REFRACTIVE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"m = - bY . z / u_view_max_depth ;".split(" ")}]}}]},{$:"txt",aa:["J","(",")",";"]}]}},{$:"else",ha:{$:"grp",
da:[{$:"cond",da:[{$:"if",ga:["TEXTURE_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"A = az ( a_texcoord , u_texture_scale ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"bZ ( aw . O , aw . U ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"NODES","ALPHA",{$:"logical_and_expr",ia:2},"SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2},"RGBA_SHADOWS",
{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["i","=","bY",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 eu = ( u_proj_matrix * vec4 ( N [ 0 ] , 1.0 ) ) . xy ; float ev = SHADOW_TEX_RES / 2.0 ; eu = floor ( eu * ev + 0.5 ) / ev - eu ; f . xy += eu ;".split(" ")}]}}]},{$:"txt",aa:["gl_Position","=","f",";","}"]}]};d["sky.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",
ba:"WO_SKYTEX",aa:["0"]},{$:"var",ba:"WO_SKYREAL",aa:["0"]},{$:"var",ba:"WO_SKYBLEND",aa:["0"]},{$:"var",ba:"PROCEDURAL_SKYDOME",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"WO_SKYPAPER",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"WATER_LEVEL",aa:["0.0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:["uniform","samplerCube","u_sky",";"]},{$:"cond",
da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"REFLECTION_PASS","REFL_PASS_NONE",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_camera_eye_frag ; uniform vec4 u_underwater_fog_color_density ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND","WO_SKYPAPER",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_sky_tex_fac ; uniform vec3 u_sky_tex_color ; uniform float u_sky_tex_dvar ; uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND","WO_SKYPAPER","WO_SKYTEX",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"include",oa:"sky_blending.glslf"}]}}]},{$:"txt",aa:["GLSL_IN","vec3","bp",";"]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_SKYDOME",{$:"logic_negative_expr",ia:1},"WO_SKYTEX","WO_SKYBLEND",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]},{$:"txt",aa:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec3 bs ; vec3 bq = normalize ( bp ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND","WO_SKYPAPER",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["float","ew","=","0.0",";"]},{$:"cond",da:[{$:"if",ga:["WO_SKYREAL"],ha:{$:"grp",da:[{$:"txt",aa:"ew = abs ( A . y ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"ew = ( A . y + 1.0 ) * 0.5 ;".split(" ")}]}}]},{$:"txt",aa:"vec3 ex = u_horizon_color ; vec3 ey = u_zenith_color ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYTEX"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ez = vec3 ( A , 0.0 ) ; vec4 eA = GLSL_TEXTURE_CUBE ( u_sky , bq ) ; bC ( eA . rgb ) ; bs = eB ( ex , ey , eA , ew , ez ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"bs = mix ( ex , ey , ew ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"bs = GLSL_TEXTURE_CUBE ( u_sky , bq ) . rgb ; bC ( bs ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},"REFLECTION_PASS","REFL_PASS_NONE",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"float eC = WATER_LEVEL - u_camera_eye_frag . z ; vec3 eD = vec3 ( 0.0 ) ; vec3 eE = mix ( u_underwater_fog_color_density . rgb , eD , min ( - bq . z , 1.0 ) ) ; eE *= min ( 1.0 - min ( 0.03 * eC , 0.8 ) , 1.0 ) ; float aL = clamp ( sign ( 0.01 * eC - bq . z ) , 0.0 , 1.0 ) ; bs = mix ( bs , eE , aL ) ;".split(" ")}]}}]},
{$:"txt",aa:"aW ( bs ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bs , 1.0 ) ; }".split(" ")}]};d["sky.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PROCEDURAL_SKYDOME",aa:["0"]},{$:"var",ba:"WO_SKYTEX",aa:["0"]},{$:"var",ba:"WO_SKYBLEND",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform mat4 u_sky_vp_inverse ; GLSL_IN vec3 a_position ; GLSL_OUT vec3 bp ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_SKYDOME",{$:"logic_negative_expr",ia:1},"WO_SKYTEX","WO_SKYBLEND",{$:"logical_or_expr",
ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]},{$:"txt",aa:"void main ( ) { vec4 O = vec4 ( a_position . xy , 0.9999999 , 1.0 ) ; vec4 bq = u_sky_vp_inverse * O ; bp = bq . xyz ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_SKYDOME",{$:"logic_negative_expr",ia:1},"WO_SKYTEX","WO_SKYBLEND",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"A = a_position . xy ;".split(" ")}]}}]},{$:"txt",aa:["gl_Position","=",
"O",";","}"]}]};d["skybox.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PROCEDURAL_SKYDOME",aa:["0"]},{$:"var",ba:"WO_SKYTEX",aa:["0"]},{$:"var",ba:"WO_SKYBLEND",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform mat4 u_cube_view_matrix ; GLSL_IN vec3 a_position ; GLSL_OUT vec3 bp ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_SKYDOME",{$:"logic_negative_expr",ia:1},"WO_SKYTEX","WO_SKYBLEND",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:["GLSL_OUT","vec2","A",";"]}]}}]},{$:"txt",aa:"void main ( ) { vec4 O = vec4 ( a_position . xy , 0.999999 , 1.0 ) ; vec4 bq = u_cube_view_matrix * O ; bp = bq . xyz ;".split(" ")},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_SKYDOME",{$:"logic_negative_expr",ia:1},"WO_SKYTEX","WO_SKYBLEND",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"A = a_position . xy ;".split(" ")}]}}]},{$:"txt",aa:["gl_Position","=","O",";","}"]}]};d["tex_skybox.glslf"]={$:"grp",da:[{$:"version",
aa:["GLSL_VERSION"]},{$:"var",ba:"WO_SKYTEX",aa:["0"]},{$:"var",ba:"WO_SKYREAL",aa:["0"]},{$:"var",ba:"WO_SKYBLEND",aa:["0"]},{$:"var",ba:"WO_SKYPAPER",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; GLSL_IN vec3 bp ; GLSL_IN vec2 A ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYTEX"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}}]},{$:"txt",aa:"uniform vec4 u_sky_tex_fac ; uniform vec3 u_sky_tex_color ; uniform float u_sky_tex_dvar ; uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WO_SKYTEX"],ha:{$:"grp",da:[{$:"include",oa:"sky_blending.glslf"}]}}]},{$:"txt",aa:"void main ( ) { vec3 bq = normalize ( bp ) ; vec3 bs ; float ew = 0.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYPAPER"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WO_SKYTEX"],ha:{$:"grp",da:[{$:"txt",aa:"bs = GLSL_TEXTURE_CUBE ( u_sky_texture , bq ) . xyz ; bC ( bs ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"bs = vec3 ( 1.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",
da:[{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND"],ha:{$:"grp",da:[{$:"txt",aa:"float L = acos ( bq . z ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYREAL"],ha:{$:"grp",da:[{$:"txt",aa:"ew = abs ( L * INV_PI - 0.5 ) * 2.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"ew = 1.0 - L * INV_PI ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"vec3 ex = u_horizon_color ; vec3 ey = u_zenith_color ;".split(" ")},{$:"cond",da:[{$:"if",ga:["WO_SKYTEX"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 eA = GLSL_TEXTURE_CUBE ( u_sky_texture , bq ) ; bC ( eA . rgb ) ; vec3 ez = vec3 ( bp . xy , 0.0 ) ; bs = eB ( ex , ey , eA , ew , ez ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND"],ha:{$:"grp",da:[{$:"txt",aa:"bs = mix ( ex , ey , ew ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["bs","=","ex",";"]}]}}]}]}}]}]}}]},{$:"txt",aa:"aW ( bs ) ; GLSL_OUT_FRAG_COLOR = vec4 ( bs , 1.0 ) ; }".split(" ")}]};d["water.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"DEBUG_WIREFRAME",
aa:["0"]},{$:"var",ba:"NUM_NORMALMAPS",aa:["0"]},{$:"var",ba:"FOAM",aa:["0"]},{$:"var",ba:"SHORE_PARAMS",aa:["0"]},{$:"var",ba:"GENERATED_MESH",aa:["0"]},{$:"var",ba:"ABSORB",aa:["6.0"]},{$:"var",ba:"SSS_STRENGTH",aa:["1.0"]},{$:"var",ba:"SSS_WIDTH",aa:["0.45"]},{$:"var",ba:"ALPHA",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"WAVES_HEIGHT",aa:["1.0"]},{$:"var",ba:"WATER_LEVEL",aa:["0.0"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",
aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",aa:["0"]},{$:"var",ba:"SHORE_SMOOTHING",aa:["0"]},{$:"var",ba:"DYNAMIC",aa:["0"]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"pack.glslf"},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"math.glslv"},
{$:"define",ba:"REFL_BUMP",aa:["0.002"]},{$:"txt",aa:["uniform","float","u_time",";"]},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT","SKY_TEXTURE",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_sky_texture",";"]}]}},{$:"elif",ga:["USE_ENVIRONMENT_LIGHT","SKY_COLOR",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec3 u_horizon_color ; uniform vec3 u_zenith_color ;".split(" ")}]}}]},{$:"txt",aa:["uniform","float","u_environment_energy",";"]},
{$:"cond",da:[{$:"if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_light_positions [ NUM_LIGHTS ] ; uniform vec3 u_light_directions [ NUM_LIGHTS ] ; uniform vec4 u_light_color_intensities [ NUM_LIGHTS ] ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec3 u_sun_intensity ; uniform vec3 u_sun_direction ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHORE_SMOOTHING","WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},
{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_cam_water_depth",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_color_density",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_underwater_fog_color_density",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat4",
"u_cube_fog",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec4","u_fog_params",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_normalmap0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_refractmap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:["uniform","sampler2D","u_plane_reflection",";"]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","samplerCube","u_mirrormap",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","sampler2D","u_scene_depth",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["FOAM"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_foam",";"]}]}}]},{$:"txt",aa:"uniform vec4 u_diffuse_color ; uniform vec2 u_diffuse_params ; uniform float u_diffuse_intensity ; uniform float u_ambient ; uniform vec2 u_fresnel_params ; uniform vec3 u_specular_color ; uniform vec3 u_specular_params ; uniform vec3 u_shallow_water_col ; uniform vec3 u_shore_water_col ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_water_norm_uv_velocity ; uniform vec2 u_normalmap0_scale ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",1,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_normalmap1_scale",";"]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",2,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_normalmap2_scale",";"]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",3,{$:"g_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_normalmap3_scale",";"]}]}}]}]}}]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_mirror_factor",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_reflect_factor",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"float","u_view_max_depth",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_water_shallow_col_fac ; uniform float u_water_shore_col_fac ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["FOAM"],ha:{$:"grp",da:[{$:"txt",aa:"uniform float u_foam_factor ; uniform vec2 u_foam_uv_freq ; uniform vec2 u_foam_mag ; uniform vec2 u_foam_scale ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_refr_bump",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_WIREFRAME"],ha:{$:"grp",da:[{$:"txt",aa:"const float aE = 1.0 ; uniform vec3 u_wireframe_edge_color ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_IN vec3 bT ; GLSL_IN vec3 h ; GLSL_IN vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2},"GENERATED_MESH",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","A",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",
0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec3 k ; GLSL_IN vec3 eF ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2},"GENERATED_MESH","DYNAMIC",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","eG",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","eH",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",
ia:2},"REFRACTIVE",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","m",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_WIREFRAME"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","aD",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],
ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","B",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"include",oa:"environment.glslf"},{$:"cond",da:[{$:"if",ga:["REFRACTIVE","SHORE_SMOOTHING","USE_REFRACTION_CORRECTION",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"include",oa:"refraction.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"include",oa:"fog.glslf"}]}}]},{$:"txt",aa:"vec3 eP ( in vec2 eI , in vec3 U , in vec3 eJ , in vec3 eK , out float eL , in float eM ) { eL = 0.0 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 eN = eI . xy + U . xy * REFL_BUMP / m ; eL = u_reflect_factor ; vec3 eO ; if ( u_cam_water_depth < 0.0 ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_FOG",{$:"logic_negative_expr",ia:1},"WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"eO = u_underwater_fog_color_density . rgb ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"eO = u_diffuse_color . rgb ;".split(" ")}]}}]},
{$:"txt",aa:"} else { eO = GLSL_TEXTURE ( u_plane_reflection , eN ) . rgb ; bC ( eO ) ; }".split(" ")}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"eL = u_mirror_factor ; vec3 eO = eK * GLSL_TEXTURE_CUBE ( u_mirrormap , eJ ) . rgb ; bC ( eO ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"eL = u_reflect_factor ; vec3 eO = eK * vec3 ( 0.3 , 0.5 , 1.0 ) ; bC ( eO ) ;".split(" ")}]}}]},{$:"txt",aa:"eL = min ( eL * eM , 1.0 ) ; return eO ; }".split(" ")},
{$:"include",oa:"lighting_nodes.glslf"},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"mat3 cb = mat3 ( k , eF , j ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 U = normalize ( j ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DYNAMIC","FOAM",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"float bO = h . z - WATER_LEVEL ;".split(" ")}]}},{$:"else",ha:{$:"grp",
da:[{$:"txt",aa:"float bO = h . z ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["GENERATED_MESH"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 b_ = vec2 ( eG . x , - eG . y ) + 0.5 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec2 b_ = vec2 ( h . x , - h . y ) + 0.5 ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec2",
"b_","=","A",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 eQ = vec3 ( 0.0 ) ; eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap0_scale + vec2 ( 0.3 , 0.5 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",1,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap1_scale + vec2 ( - 0.3 , 0.7 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",2,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap2_scale + vec2 ( 0.0 , 1.1 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",3,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"eQ += GLSL_TEXTURE ( u_normalmap0 , b_ * u_normalmap3_scale + vec2 ( - 0.66 , - 0.3 ) * u_water_norm_uv_velocity * u_time ) . xyz - 0.5 ;".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"U = mix ( U , normalize ( cb * eQ ) , 0.3 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"U = mix ( U , normalize ( cb * eQ ) , 0.5 ) ;".split(" ")}]}}]},{$:"txt",aa:"U = normalize ( U ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 D = normalize ( bT ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 eI = l . xy / l . z ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec2 eI = vec2 ( 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 eR = eI + U . xy * u_refr_bump / m ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"float L = u_diffuse_color . a ; vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , l ) ; float cR = cQ ( cP ) ; float cS = max ( cR - m , 0.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:"float eT = eS ( cR , eR , eI ) ; float eU = max ( eT - m , 0.0 ) ; float eV = u_view_max_depth / ABSORB * eU ; float eW = min ( L * eV , 1.0 ) ; L = min ( 15.0 * L * u_view_max_depth * cS , 1.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float cT = u_view_max_depth / ABSORB * cS ; if ( u_cam_water_depth > 0.0 ) L = min ( L * cT , 1.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float L = u_diffuse_color . a ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:["float","eW","=","L",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:"if ( u_cam_water_depth < 0.0 ) eW = 0.0 ; vec3 eX = GLSL_TEXTURE ( u_refractmap , eR ) . rgb ; bC ( eX ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"float eY = pow ( min ( eH . b / u_water_shallow_col_fac , 1.0 ) , 0.3 ) ; vec3 ct = mix ( u_shallow_water_col , u_diffuse_color . rgb , eY ) ; eY = pow ( min ( eH . b / u_water_shore_col_fac , 1.0 ) , 0.3 ) ; ct = mix ( u_shore_water_col , ct , eY ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ct = u_diffuse_color . rgb ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["FOAM"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING"],ha:{$:"grp",da:[{$:"txt",aa:"float eZ = max ( 1.0 - u_view_max_depth * cS , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float eZ = 1.0 - L ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"float e_ = max ( bO / WAVES_HEIGHT + 0.1 , 0.0 ) ;".split(" ")},{$:"cond",
da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 fa = normalize ( vec3 ( eH . rg , 0.0 ) ) ; vec3 fb = normalize ( mix ( UP_VECTOR , fa , 0.8 ) ) ; float fc = 1.25 * max ( dot ( U , fb ) - 0.2 , 0.0 ) ; fc += max ( dot ( U , - UP_VECTOR ) , 0.0 ) ; eZ += fc * ( 1.0 - eH . b ) ; e_ *= ( 1.0 - 0.95 * pow ( eH . b , 0.1 ) ) ;".split(" ")}]}}]},{$:"txt",aa:"eZ += e_ ; eZ = min ( u_foam_factor * eZ , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"vec4 fd = GLSL_TEXTURE ( u_foam , u_foam_mag * sin ( u_foam_uv_freq * u_time ) + b_ * u_foam_scale ) ;".split(" ")}]}}]},
{$:"txt",aa:"float cG = u_specular_params [ 0 ] ; vec2 cH = vec2 ( u_specular_params [ 1 ] , u_specular_params [ 2 ] ) ; vec3 cI = cG * u_specular_color ; vec3 cA = u_environment_energy * cz ( U ) ; vec3 cB = u_ambient * cA ; vec3 eK = cB + u_sun_intensity ; float eL ; vec3 eJ = reflect ( - D , U ) ; vec3 fe = normalize ( eJ + D ) ; float ff = 1.0 - dot ( D , fe ) ; float d_ = u_fresnel_params [ 0 ] ; float fg = u_fresnel_params [ 1 ] ; float fh = fg + ( 1.0 - fg ) * pow ( ff , d_ ) ; vec3 eO = eP ( eI , U , eJ , eK , eL , fh ) ; vec3 cy = u_diffuse_intensity * ct ; vec3 aQ ; vec3 cJ ; cK ( vec3 ( 0.0 ) , vec3 ( 0.0 ) , cy , cI , h , U , D , cH , u_diffuse_params , vec4 ( 1.0 ) , 0.0 , vec4 ( 0.0 ) , aQ , cJ ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"float fi = max ( dot ( u_sun_direction , - j ) + SSS_WIDTH , 0.0 ) * max ( dot ( - D , u_sun_direction ) - 0.5 , 0.0 ) * max ( 0.0 , length ( u_sun_intensity ) - 0.1 ) ; fi = clamp ( SSS_STRENGTH * fi , 0.0 , 1.0 ) ; aQ = mix ( aQ , u_shallow_water_col , fi ) ; aQ = mix ( aQ , u_shore_water_col , fi ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"txt",aa:"aQ = mix ( eX , aQ , eW ) ;".split(" ")}]}}]},
{$:"txt",aa:"aQ = mix ( aQ , eO , eL ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["FOAM"],ha:{$:"grp",da:[{$:"txt",aa:"float fj = mix ( fd . g , fd . r , max ( 4.0 * ( eZ - 0.75 ) , 0.0 ) ) ; fj = mix ( fd . b , fj , max ( 2.0 * eZ - 1.0 , 0.0 ) ) ; fj = mix ( 0.0 , fj , eZ ) ; aQ = mix ( aQ , eK , fj ) ;".split(" ")}]}}]},{$:"txt",aa:["aQ","+=","cJ",";"]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float fk = m * u_view_max_depth ; float fl = 1.0 ; if ( u_cam_water_depth > 1.0 ) fl = 2.0 ; bR ( aQ , fk , D , fl ) ;".split(" ")}]}}]},
{$:"txt",aa:["aW","(","aQ",")",";"]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"L = max ( L , cJ . r ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["FOAM"],ha:{$:"grp",da:[{$:"txt",aa:["L","+=","fj",";"]}]}}]}]}},{$:"elif",ga:["SHORE_SMOOTHING",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["L","=","1.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["ALPHA"],ha:{$:"grp",da:[{$:"txt",aa:"aX ( aQ , L ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",
ga:["DEBUG_WIREFRAME",1,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["GLSL1"],ha:{$:"grp",da:[{$:"extension",aa:["GL_OES_standard_derivatives",":","enable"]}]}}]},{$:"txt",aa:"vec3 aN = fwidth ( aD ) ; vec3 aO = smoothstep ( vec3 ( 0.0 ) , aN * aE , aD ) ; float fm = min ( min ( aO . x , aO . y ) , aO . z ) ; fm = clamp ( fm , 0.0 , 1.0 ) ; aQ = mix ( u_wireframe_edge_color , aQ , fm ) ; L = mix ( 1.0 , L , fm ) ;".split(" ")}]}},{$:"elif",ga:["DEBUG_WIREFRAME",2,{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aM = sign ( aD - vec3 ( 0.02 * aE ) ) ; float fm = 1.0 ; if ( aM . x < 0.0 || aM . y < 0.0 || aM . z < 0.0 ) fm = 0.0 ; aQ = mix ( u_wireframe_edge_color , aQ , fm ) ; L = mix ( 1.0 , L , fm ) ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ , L ) ; }".split(" ")}]};d["water.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"USE_TBN_SHADING",aa:["0"]},{$:"var",ba:"DEBUG_WIREFRAME",aa:["0"]},
{$:"var",ba:"NUM_NORMALMAPS",aa:["0"]},{$:"var",ba:"FOAM",aa:["0"]},{$:"var",ba:"SHORE_PARAMS",aa:["0"]},{$:"var",ba:"MAX_SHORE_DIST",aa:["100.0"]},{$:"var",ba:"SHORE_MAP_SIZE_X",aa:["1.0"]},{$:"var",ba:"SHORE_MAP_SIZE_Y",aa:["1.0"]},{$:"var",ba:"SHORE_MAP_CENTER_X",aa:["0.0"]},{$:"var",ba:"SHORE_MAP_CENTER_Y",aa:["0.0"]},{$:"var",ba:"GENERATED_MESH",aa:["0"]},{$:"var",ba:"DST_NOISE_SCALE_0",aa:["0.05"]},{$:"var",ba:"DST_NOISE_SCALE_1",aa:["0.03"]},{$:"var",ba:"DST_NOISE_FREQ_0",aa:["1.3"]},{$:"var",
ba:"DST_NOISE_FREQ_1",aa:["1.0"]},{$:"var",ba:"DIR_MIN_SHR_FAC",aa:["0.4"]},{$:"var",ba:"DIR_FREQ",aa:["0.5"]},{$:"var",ba:"DIR_NOISE_SCALE",aa:["0.05"]},{$:"var",ba:"DIR_NOISE_FREQ",aa:["0.07"]},{$:"var",ba:"DIR_MIN_NOISE_FAC",aa:["0.5"]},{$:"var",ba:"DST_MIN_FAC",aa:["0.2"]},{$:"var",ba:"WAVES_HOR_FAC",aa:["5.0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"var",ba:"WAVES_HEIGHT",aa:["1.0"]},{$:"var",ba:"WAVES_LENGTH",aa:["10.0"]},{$:"var",ba:"WATER_LEVEL",aa:["0.0"]},{$:"var",ba:"SHORE_SMOOTHING",
aa:["0"]},{$:"var",ba:"DYNAMIC",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"include",oa:"procedural.glslf"},{$:"txt",aa:["GLSL_IN","vec3","a_position",";"]},{$:"cond",da:[{$:"if",ga:["GENERATED_MESH",{$:"logic_negative_expr",ia:1},"DYNAMIC",{$:"logic_negative_expr",ia:1},"NUM_NORMALMAPS",
0,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","a_tbn",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["GENERATED_MESH",{$:"logic_negative_expr",ia:1},"NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","a_texcoord",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_WIREFRAME"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","float","a_polyindex",";"]}]}}]},
{$:"txt",aa:"GLSL_OUT vec3 bT ; GLSL_OUT vec3 h ; GLSL_OUT vec3 j ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2},"GENERATED_MESH",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","A",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT vec3 k ; GLSL_OUT vec3 eF ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",
0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2},"GENERATED_MESH","DYNAMIC",{$:"logical_and_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","eG",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","eH",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","l",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING",
"REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","float","m",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DEBUG_WIREFRAME"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","aD",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_TBN_SHADING"],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec3","B",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["STATIC_BATCH"],ha:{$:"grp",da:[{$:"txt",aa:"const mat3 u_model_tsr = mat3 ( 0.0 , 0.0 , 0.0 , 1.0 , 0.0 , 0.0 , 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["uniform","mat3","u_model_tsr",";"]}]}}]},{$:"txt",aa:"uniform mat3 u_view_tsr ; uniform mat4 u_proj_matrix ; uniform vec3 u_camera_eye ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"uniform PRECISION float u_time ; uniform vec3 u_wind ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",
ia:4}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","PRECISION","float","u_view_max_depth",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_shore_dist_map",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ft ( in vec2 fn ) { vec2 fo = 0.5 + vec2 ( ( fn . x - SHORE_MAP_CENTER_X ) / SHORE_MAP_SIZE_X , ( fn . y - SHORE_MAP_CENTER_Y ) / SHORE_MAP_SIZE_Y ) ; vec4 fp = GLSL_TEXTURE ( u_shore_dist_map , fo ) ; const vec2 fq = vec2 ( 1.0 / 255.0 , 1.0 ) ; float fr = dot ( fp . ba , fq ) ; vec2 fs = normalize ( fp . rg * 2.0 - 1.0 ) ; return vec3 ( fs , fr ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"define",ba:"SMALL_WAVES_FAC",aa:["0.2"]},{$:"txt",aa:"void fI ( inout vec3 fn , in float fu , in vec3 fp ) { float fw = fv ( DST_NOISE_SCALE_0 * ( fn . xy + DST_NOISE_FREQ_0 * fu ) ) * fv ( DST_NOISE_SCALE_1 * ( fn . yx - DST_NOISE_FREQ_1 * fu ) ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"float fx = WAVES_LENGTH / MAX_SHORE_DIST / M_PI ; float fr = fp . b ; float fy = sqrt ( fr ) ; float fz = max ( fr , DIR_MIN_SHR_FAC ) * sin ( fy / fx + DIR_FREQ * fu ) ; float fA = max ( fv ( DIR_NOISE_SCALE * ( fn . xy + DIR_NOISE_FREQ * fu ) ) , DIR_MIN_NOISE_FAC ) ; fz *= fA ; float fB = WAVES_HEIGHT * mix ( fz , fw , max ( fy , DST_MIN_FAC ) ) ; vec2 fs = fp . rg ; float fC = WAVES_HOR_FAC * fz * max ( MAX_SHORE_DIST / 35.0 * ( 0.05 - fr ) , 0.0 ) ; vec2 fD = fC * fs ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float fB = WAVES_HEIGHT * fw ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["GENERATED_MESH"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 fE = 1.0 * ( fn . xy - 0.3 * fu ) ; vec2 fF = 0.7 * ( fn . yx + 0.07 * fu ) ; float fH = fG ( fE ) . x + fG ( fF ) . x - 1.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"fn . xy += fD ; fH *= fr ;".split(" ")}]}}]},{$:"txt",aa:"fB += SMALL_WAVES_FAC * fH ;".split(" ")}]}}]},{$:"txt",aa:"fn . z += fB ; }".split(" ")}]}}]},
{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["DEBUG_WIREFRAME"],ha:{$:"grp",da:[{$:"txt",aa:"if ( a_polyindex == 0.0 ) aD = vec3 ( 1.0 , 0.0 , 0.0 ) ; else if ( a_polyindex == 1.0 ) aD = vec3 ( 0.0 , 0.0 , 1.0 ) ; else aD = vec3 ( 0.0 , 1.0 , 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["GENERATED_MESH"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 O = a_position ; float fJ = abs ( O . z ) ; vec2 fK = u_camera_eye . xy - mod ( u_camera_eye . xy , fJ ) ;".split(" ")},{$:"cond",da:[{$:"if",
ga:["WATER_EFFECTS"],ha:{$:"grp",da:[{$:"txt",aa:"O . z = WATER_LEVEL ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"O . z = 0.0 ;".split(" ")}]}}]},{$:"txt",aa:"O . xy += fK ; vec3 bX = O ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["A","=","a_texcoord",";"]}]}}]},{$:"txt",aa:"au aw = av ( a_position , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , u_model_tsr ) ; vec3 bX = aw . O ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"eH = ft ( bX . xy ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DYNAMIC"],ha:{$:"grp",da:[{$:"txt",aa:"float fL = length ( u_wind ) ; if ( fL == 0.0 ) fL = 1.0 ; float fM = u_time ; fM *= fL ;".split(" ")},{$:"cond",da:[{$:"if",ga:["GENERATED_MESH"],ha:{$:"grp",da:[{$:"txt",aa:"float fN = fJ ; vec3 fO = bX + vec3 ( fN , 0.0 , 0.0 ) ; vec3 fP = bX + vec3 ( 0.0 , fN , 0.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",
0,{$:"g_expr",ia:2},"FOAM",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["eG","=","bX",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 fO = bX + vec3 ( 0.05 , 0.0 , 0.0 ) ; vec3 fP = bX + vec3 ( 0.0 , 0.05 , 0.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_PARAMS"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 fQ = ft ( fO . xy ) ; vec3 fR = ft ( fP . xy ) ; fI ( fO , fM , fQ ) ; fI ( fP , fM , fR ) ; fI ( bX , fM , eH ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"fI ( fO , fM , vec3 ( 0.0 ) ) ; fI ( fP , fM , vec3 ( 0.0 ) ) ; fI ( bX , fM , vec3 ( 0.0 ) ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["GENERATED_MESH","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( a_position . z < 0.0 ) { bX . z = WATER_LEVEL - 1.0 ; fO . z = bX . z ; fP . z = bX . z ; }".split(" ")}]}}]},{$:"txt",aa:"vec3 eg = normalize ( fO - bX ) ; vec3 V = normalize ( fP - bX ) ; j = normalize ( cross ( eg , V ) ) ; float fS = dot ( j , UP_VECTOR ) ; float aL = clamp ( 0.8 - fS , 0.0 , 1.0 ) ; j = mix ( j , UP_VECTOR , aL ) ;".split(" ")}]}},{$:"elif",ga:["GENERATED_MESH",
{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 S = R ( a_tbn ) ; j = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"j = vec3 ( 0.0 , 0.0 , 1.0 ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_NORMALMAPS",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DYNAMIC",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["GENERATED_MESH",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = T ( S , vec3 ( 1.0 , 0.0 , 0.0 ) ) ;".split(" ")}]}},
{$:"elif",ga:["DYNAMIC",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 V = vec3 ( 1.0 , 0.0 , 0.0 ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"k = V ; eF = cross ( j , k ) ;".split(" ")}]}}]},{$:"txt",aa:"h = bX ; bT = u_camera_eye - bX ; vec4 bY = vec4 ( ap ( u_view_tsr , bX ) , 1.0 ) ; vec4 f = u_proj_matrix * bY ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",
aa:"float fT = f . x ; float fU = f . y ; float fV = f . w ; l . x = ( fT + fV ) / 2.0 ; l . y = ( fU + fV ) / 2.0 ; l . z = fV ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SHORE_SMOOTHING","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFRACTIVE","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:"m = - bY . z / u_view_max_depth ;".split(" ")}]}}]},{$:"txt",aa:["gl_Position","=","f",";","}"]}]};d["postprocessing/antialiasing.glslf"]={$:"grp",
da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"AA_METHOD",aa:["AA_METHOD_FXAA_LIGHT"]},{$:"var",ba:"AA_QUALITY",aa:["AA_QUALITY_LOW"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform sampler2D u_color ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"cond",da:[{$:"if",ga:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_REDUCE_MIN",
aa:["(","1.0","/","128.0",")"]},{$:"define",ba:"FXAA_REDUCE_MUL",aa:["(","1.0","/","8.0",")"]},{$:"define",ba:"FXAA_SPAN_MAX",aa:["8.0"]},{$:"txt",aa:"vec4 fX ( float x , float y ) { vec2 fW = A + vec2 ( x , y ) * u_texel_size ; return GLSL_TEXTURE ( u_color , fW ) ; } vec4 gt ( ) { vec4 fY = fX ( - 1.0 , - 1.0 ) ; vec4 fZ = fX ( 1.0 , - 1.0 ) ; vec4 f_ = fX ( - 1.0 , 1.0 ) ; vec4 gc = fX ( 1.0 , 1.0 ) ; vec4 gd = fX ( 0.0 , 0.0 ) ; float gf = ge ( gd ) ; float gh = ge ( fY ) ; float gi = ge ( fZ ) ; float gj = ge ( f_ ) ; float gk = ge ( gc ) ; float gl = min ( gf , min ( min ( gh , gi ) , min ( gj , gk ) ) ) ; float gm = max ( gf , max ( max ( gh , gi ) , max ( gj , gk ) ) ) ; vec2 bD ; bD . x = - ( ( gh + gi ) - ( gj + gk ) ) ; bD . y = ( ( gh + gj ) - ( gi + gk ) ) ; float gn = max ( ( gh + gi + gj + gk ) * ( 0.25 * FXAA_REDUCE_MUL ) , FXAA_REDUCE_MIN ) ; float go = 1.0 / ( min ( abs ( bD . x ) , abs ( bD . y ) ) + gn ) ; bD = min ( vec2 ( FXAA_SPAN_MAX , FXAA_SPAN_MAX ) , max ( vec2 ( - FXAA_SPAN_MAX , - FXAA_SPAN_MAX ) , bD * go ) ) * u_texel_size ; vec4 gp = 0.5 * ( GLSL_TEXTURE ( u_color , A + bD * ( 1.0 / 3.0 - 0.5 ) ) + GLSL_TEXTURE ( u_color , A + bD * ( 2.0 / 3.0 - 0.5 ) ) ) ; vec4 gq = gp * 0.5 + 0.25 * ( GLSL_TEXTURE ( u_color , A + bD * - 0.5 ) + GLSL_TEXTURE ( u_color , A + bD * 0.5 ) ) ; float gs = ge ( gq ) ; if ( ( gs < gl ) || ( gs > gm ) ) return gp ; else return gq ; }".split(" ")}]}},
{$:"elif",ga:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_GREEN_AS_LUMA",aa:["1"]},{$:"include",oa:"fxaa.glslf"},{$:"cond",da:[{$:"if",ga:["AA_QUALITY","AA_QUALITY_HIGH",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PRESET",aa:["39"]},{$:"define",ba:"FXAA_QUALITY_SUBPIX",aa:["1.00"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD",aa:["0.063"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",aa:["0.0312"]}]}},{$:"elif",ga:["AA_QUALITY",
"AA_QUALITY_MEDIUM",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PRESET",aa:["20"]},{$:"define",ba:"FXAA_QUALITY_SUBPIX",aa:["0.65"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD",aa:["0.166"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",aa:["0.0625"]}]}},{$:"elif",ga:["AA_QUALITY","AA_QUALITY_LOW",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PRESET",aa:["12"]},{$:"define",ba:"FXAA_QUALITY_SUBPIX",aa:["0.50"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD",
aa:["0.166"]},{$:"define",ba:"FXAA_QUALITY_EDGE_THRESHOLD_MIN",aa:["0.0833"]}]}}]}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["AA_METHOD","AA_METHOD_FXAA_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = gt ( ) ;".split(" ")}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_FXAA_QUALITY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 gu = u_texel_size ; GLSL_OUT_FRAG_COLOR = gv ( A , u_color , gu , FXAA_QUALITY_SUBPIX , FXAA_QUALITY_EDGE_THRESHOLD , FXAA_QUALITY_EDGE_THRESHOLD_MIN ) ;".split(" ")}]}}]},
{$:"txt",aa:["}"]}]};d["postprocessing/bloom_combine.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"var",ba:"BLUR_PASS_NUM",aa:["BLUR_PASS_5"]},{$:"txt",aa:["uniform","sampler2D","u_main",";"]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_1",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_bloom_level_0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_2",{$:"ge_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_bloom_level_1",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_3",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_bloom_level_2",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_4",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_bloom_level_3",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_5",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform",
"sampler2D","u_bloom_level_4",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gw = GLSL_TEXTURE ( u_main , A ) ; vec4 gx = vec4 ( 0.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_1",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gx += GLSL_TEXTURE ( u_bloom_level_0 , A ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_2",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gx += GLSL_TEXTURE ( u_bloom_level_1 , A ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_3",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gx += GLSL_TEXTURE ( u_bloom_level_2 , A ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_4",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gx += GLSL_TEXTURE ( u_bloom_level_3 , A ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BLUR_PASS_NUM","BLUR_PASS_5",{$:"ge_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gx += GLSL_TEXTURE ( u_bloom_level_4 , A ) ;".split(" ")}]}}]},
{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = gw + gx ; }".split(" ")}]};d["postprocessing/coc.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"COC_TYPE",aa:["COC_ALL"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"depth_fetch.glslf"},{$:"txt",aa:"uniform sampler2D u_color ; uniform sampler2D u_depth ;".split(" ")},{$:"cond",da:[{$:"if",ga:["COC_TYPE","COC_COMBINE",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_coc_fg",";"]}]}}]},{$:"txt",aa:"uniform float u_view_max_depth ; uniform float u_dof_dist ; uniform float u_dof_front_start ; uniform float u_dof_front_end ; uniform float u_dof_rear_start ; uniform float u_dof_rear_end ; uniform vec2 u_camera_range ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = GLSL_TEXTURE ( u_color , A ) ; if ( u_dof_dist > 0.0 ) { float eq = gy ( u_depth , A , u_camera_range ) ; eq *= u_view_max_depth ; float gz = 0.0 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["COC_TYPE","COC_COMBINE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 gA = GLSL_TEXTURE ( u_coc_fg , A ) ; float gB = gA . a ;".split(" ")}]}}]},{$:"txt",aa:"if ( eq < u_dof_dist ) gz = ( u_dof_dist - eq - u_dof_front_start ) / ( u_dof_front_end - u_dof_front_start ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["COC_TYPE","COC_FOREGROUND",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"else gz = ( eq - u_dof_dist - u_dof_rear_start ) / ( u_dof_rear_end - u_dof_rear_start ) ;".split(" ")}]}}]},
{$:"txt",aa:"gz = clamp ( gz , 0.0 , 1.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["COC_TYPE","COC_COMBINE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"gz = max ( gz , gB ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["COC_TYPE","COC_FOREGROUND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( gz ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( aQ . xyz * gz , gz ) ;".split(" ")}]}}]},{$:"txt",aa:"} else GLSL_OUT_FRAG_COLOR = vec4 ( aQ . xyz , 0.0 ) ; }".split(" ")}]};
d["postprocessing/compositing.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform sampler2D u_color ; uniform float u_brightness ; uniform float u_contrast ; uniform float u_exposure ; uniform float u_saturation ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gC = GLSL_TEXTURE ( u_color , A ) ; vec3 aQ = gC . rgb ; if ( u_brightness < 0.0 ) aQ = aQ * ( 1.0 + u_brightness ) ; else aQ = aQ + ( ( 1.0 - aQ ) * u_brightness ) ; aQ = ( aQ - 0.5 ) * ( tan ( ( u_contrast + 1.0 ) * M_PI_4 ) ) + 0.5 ; aQ *= u_exposure ; float ds = ge ( vec4 ( aQ , 0.0 ) ) ; aQ = mix ( vec3 ( ds ) , aQ , u_saturation ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , gC . a ) ; }".split(" ")}]};
d["postprocessing/depth_pack.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"pack.glslf"},{$:"include",oa:"depth_fetch.glslf"},{$:"txt",aa:"uniform sampler2D u_depth ; uniform vec2 u_camera_range ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { GLSL_OUT_FRAG_COLOR = er ( clamp ( gy ( u_depth , A , u_camera_range ) , 0.0 , 0.999999 ) ) ; }".split(" ")}]};
d["postprocessing/dof.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"DOF_TYPE",aa:["DOF_SIMPLE"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["DOF_TYPE","DOF_BOKEH",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform highp sampler2D u_sharp ; uniform highp sampler2D u_blurred1 ; uniform highp sampler2D u_blurred2 ; uniform float u_dof_dist ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"include",oa:"depth_fetch.glslf"},{$:"txt",aa:"uniform sampler2D u_sharp ; uniform sampler2D u_blurred ; uniform sampler2D u_depth ; uniform float u_view_max_depth ; uniform float u_dof_dist ; uniform float u_dof_front_end ; uniform float u_dof_rear_end ; uniform vec2 u_camera_range ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gD = GLSL_TEXTURE ( u_sharp , A ) ; if ( u_dof_dist > 0.0 ) {".split(" ")},{$:"cond",
da:[{$:"if",ga:["DOF_TYPE","DOF_BOKEH",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float gz ; vec4 gE = GLSL_TEXTURE ( u_blurred1 , A ) ; vec4 gF = GLSL_TEXTURE ( u_blurred2 , A ) ; vec4 gG = min ( gE . rgba , gF . rgba ) ; gz = gG . a ; if ( gz > 0.0 ) { gG = vec4 ( gG . rgb / gz , gD . a ) ; GLSL_OUT_FRAG_COLOR = mix ( gD , gG , min ( gz * 5.0 , 1.0 ) ) ; } else GLSL_OUT_FRAG_COLOR = gD ;".split(" ")}]}},{$:"elif",ga:["DOF_TYPE","DOF_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:"float eq = gy ( u_depth , A , u_camera_range ) ; eq *= u_view_max_depth ; float gH ; if ( eq < u_dof_dist ) gH = ( u_dof_dist - eq ) / u_dof_front_end ; else gH = ( eq - u_dof_dist ) / u_dof_rear_end ; gH = clamp ( gH , 0.0 , 1.0 ) ; vec4 gI = GLSL_TEXTURE ( u_blurred , A ) ; GLSL_OUT_FRAG_COLOR = mix ( gD , gI , gH ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT_FRAG_COLOR","=","gD",";"]}]}}]},{$:"txt",aa:"} else GLSL_OUT_FRAG_COLOR = gD ; }".split(" ")}]};d["postprocessing/glow.glslf"]=
{$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform sampler2D u_src_color ; uniform sampler2D u_glow_mask_small ; uniform sampler2D u_glow_mask_large ; uniform float u_glow_mask_small_coeff ; uniform float u_glow_mask_large_coeff ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gJ = GLSL_TEXTURE ( u_src_color , A ) ; vec4 gK = GLSL_TEXTURE ( u_glow_mask_small , A ) ; vec4 gL = GLSL_TEXTURE ( u_glow_mask_large , A ) ; GLSL_OUT_FRAG_COLOR = gJ ; if ( gL . a != 0.0 ) { float gM = u_glow_mask_large_coeff * gL . a ; gM = clamp ( gM , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR . rgb = mix ( GLSL_OUT_FRAG_COLOR . rgb , gL . rgb / gL . a , gM ) ; GLSL_OUT_FRAG_COLOR . a = mix ( GLSL_OUT_FRAG_COLOR . a , 1.0 , gM ) ; } if ( gK . a != 0.0 ) { float gN = u_glow_mask_small_coeff * gK . a ; gN = clamp ( gN , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR . rgb = mix ( GLSL_OUT_FRAG_COLOR . rgb , gK . rgb / gK . a , gN ) ; GLSL_OUT_FRAG_COLOR . a = mix ( GLSL_OUT_FRAG_COLOR . a , 1.0 , gN ) ; } }".split(" ")}]};
d["postprocessing/god_rays.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"DEPTH_RGBA",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"STEPS_PER_PASS",aa:["10.0"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"depth_fetch.glslf"},{$:"include",oa:"procedural.glslf"},{$:"include",oa:"pack.glslf"},{$:"txt",aa:"uniform float u_time ; uniform float u_radial_blur_step ; uniform sampler2D u_input ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","vec2","u_camera_range",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN float gO ; GLSL_IN vec2 gP ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_IN vec4 gQ ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec2 cS = ( gQ . xy - A ) ; float aM = length ( cS ) ; vec2 gR = u_radial_blur_step * cS / aM ; float gS = aM / u_radial_blur_step ; gR *= min ( gS , STEPS_PER_PASS ) / STEPS_PER_PASS ; gS = max ( gS , STEPS_PER_PASS ) ; vec2 gT = A ; float gU = 0.0 ; const int gV = int ( STEPS_PER_PASS ) ; int gW = int ( gS + 0.5 ) ; for ( int cl = 0 ; cl < gV ; cl += 1 ) { if ( cl <= gW ) {".split(" ")},
{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA"],ha:{$:"grp",da:[{$:"txt",aa:"float eq = gy ( u_input , gT , u_camera_range ) ; gU += max ( ( 1.0 - pow ( aM , 0.3 ) ) * step ( 0.9 , eq ) , 0.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 gX = GLSL_TEXTURE ( u_input , gT ) ; gU += cQ ( gX ) ;".split(" ")}]}}]},{$:"txt",aa:"} gT += gR ; }".split(" ")},{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 b_ = A + gP ; float gY = fG ( vec2 ( 2.5 * ( b_ . x ) , 2.5 * ( b_ . y ) + 1.0 * u_time ) ) . x + 0.75 * fG ( vec2 ( 5.0 * ( b_ . x ) - 0.66 * u_time , 5.0 * ( b_ . y ) + 0.66 * u_time ) ) . x + 0.5 * fv ( vec2 ( 7.5 * ( b_ . x ) + 0.33 * u_time , 7.5 * ( b_ . y ) - 0.33 * u_time ) ) ; gY *= clamp ( 1.2 - sqrt ( 0.2 * aM ) , 0.0 , 1.0 ) * gO ; gU = max ( gY , gU ) ;".split(" ")}]}}]},
{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = er ( gU / STEPS_PER_PASS ) ; }".split(" ")}]};d["postprocessing/god_rays.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"DEPTH_RGBA",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"math.glslv"},{$:"txt",aa:"uniform mat4 u_view_proj_matrix ; uniform vec3 u_sun_direction ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform vec4 u_camera_quat ; uniform float u_cam_water_depth ;".split(" ")}]}}]},
{$:"txt",aa:["GLSL_IN","vec2","a_bb_vertex",";"]},{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT float gO ; GLSL_OUT vec2 gP ;".split(" ")}]}}]},{$:"txt",aa:"GLSL_OUT vec2 A ; GLSL_OUT vec4 gQ ; void main ( ) { A = a_bb_vertex ; vec3 bD = normalize ( u_sun_direction ) ; gQ = u_view_proj_matrix * vec4 ( bD , 0.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DEPTH_RGBA","WATER_EFFECTS",{$:"logical_and_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"if ( u_cam_water_depth < 0.0 ) { gO = 1.0 ; vec3 gZ = vec3 ( 0.0 , 1.0 , 0.0 ) ; vec3 g_ = T ( u_camera_quat , gZ ) ; g_ = normalize ( g_ ) ; float ha = dot ( g_ , vec3 ( 0.0 , 1.0 , 0.0 ) ) ; float hb = atan ( g_ . x , g_ . z ) ; gP = vec2 ( - hb , acos ( ha ) ) ; } else { gO = 0.0 ; }".split(" ")}]}}]},{$:"txt",aa:"gQ . xy = 0.5 * ( gQ . xy / gQ . w + 1.0 ) ; gQ += 99999.0 * step ( gQ . z , 0.0 ) ; gl_Position = vec4 ( 2.0 * a_bb_vertex . xy - 1.0 , 0.0 , 1.0 ) ; }".split(" ")}]};
d["postprocessing/god_rays_combine.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"SAFARI_CANVAS_ALPHA_HACK",aa:["0"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"pack.glslf"},{$:"txt",aa:"uniform sampler2D u_main ; uniform sampler2D u_god_rays ; uniform float u_god_rays_intensity ; uniform vec3 u_sun_intensity ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hc = GLSL_TEXTURE ( u_main , A ) ; vec3 hd = clamp ( u_sun_intensity , 0.4 , 0.8 ) ; bC ( hc . rgb ) ; float he = cQ ( GLSL_TEXTURE ( u_god_rays , A ) ) ; vec3 hf = hc . rgb + u_god_rays_intensity * vec3 ( he ) * hd ; aW ( hf ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SAFARI_CANVAS_ALPHA_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( hf , max ( 0.01 , hc . a ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( hf , hc . a ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]};d["postprocessing/luminance.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform sampler2D u_input ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 gw = GLSL_TEXTURE ( u_input , A ) ; float hg = dot ( gw . rgb , vec3 ( 0.2126 , 0.7152 , 0.0722 ) ) ; GLSL_OUT_FRAG_COLOR = vec4 ( vec3 ( hg ) , 1.0 ) ; }".split(" ")}]};
d["postprocessing/luminance_av.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform sampler2D u_input ; uniform float u_mipmap_1x1 ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { float hh = max ( GLSL_TEXTURE ( u_input , A , u_mipmap_1x1 ) . r , 0.01 ) ; GLSL_OUT_FRAG_COLOR = vec4 ( vec3 ( hh ) , 1.0 ) ; }".split(" ")}]};d["postprocessing/luminance_truncated.glslf"]={$:"grp",da:[{$:"version",
aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"var",ba:"ADAPTIVE_BLOOM",aa:["0"]},{$:"txt",aa:"uniform sampler2D u_main ; uniform sampler2D u_luminance ; uniform sampler2D u_average_lum ; uniform float u_bloom_edge_lum ; uniform float u_bloom_key ;".split(" ")},{$:"cond",da:[{$:"if",ga:["ADAPTIVE_BLOOM",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_average_lum_val",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},
{$:"cond",da:[{$:"if",ga:["ADAPTIVE_BLOOM"],ha:{$:"grp",da:[{$:"txt",aa:"float hh = GLSL_TEXTURE ( u_average_lum , vec2 ( 0.5 ) ) . r ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["float","hh","=","u_average_lum_val",";"]}]}}]},{$:"txt",aa:"float hi = GLSL_TEXTURE ( u_luminance , A ) . r ; vec4 aQ = GLSL_TEXTURE ( u_main , A ) ; float hj = hi / hh ; float hk = u_bloom_edge_lum ; GLSL_OUT_FRAG_COLOR = aQ * u_bloom_key * smoothstep ( hk , hk + 1.2 , hj ) ; }".split(" ")}]};d["postprocessing/motion_blur.glslf"]=
{$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform sampler2D u_mb_tex_curr ; uniform sampler2D u_mb_tex_accum ; uniform float u_motion_blur_exp ; uniform float u_motion_blur_decay_threshold ; float hl = 0.0042 ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hm = GLSL_TEXTURE ( u_mb_tex_curr , A ) ; vec4 hn = GLSL_TEXTURE ( u_mb_tex_accum , A ) ; if ( length ( hm - hn ) > u_motion_blur_decay_threshold ) { vec4 ho = ( 1.0 - u_motion_blur_exp ) * hm + u_motion_blur_exp * hn ; vec4 hp = ho - hn ; vec4 hq = hm - hn ; vec4 cS = min ( max ( abs ( hp ) , vec4 ( hl ) ) , abs ( hq ) ) * sign ( hp ) ; GLSL_OUT_FRAG_COLOR = hn + cS ; } else { GLSL_OUT_FRAG_COLOR = hm ; } }".split(" ")}]};
d["postprocessing/outline.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform sampler2D u_outline_src ; uniform sampler2D u_outline_mask ; uniform sampler2D u_outline_mask_blurred ; uniform vec3 u_outline_color ; uniform float u_draw_outline ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 hr = GLSL_TEXTURE ( u_outline_src , A ) ; GLSL_OUT_FRAG_COLOR = hr ; if ( u_draw_outline != 0.0 ) { vec4 hs = GLSL_TEXTURE ( u_outline_mask , A ) ; vec4 ht = GLSL_TEXTURE ( u_outline_mask_blurred , A ) ; float hu = ht . a - hs . a ; if ( hu != 0.0 ) { float hv = smoothstep ( 0.0 , 1.0 , ht . a ) ; if ( hs . a == 0.0 ) { vec3 hw = u_outline_color ; aW ( hw ) ; vec4 hx = vec4 ( clamp ( hw , 0.0 , 1.0 ) , 1.0 ) ; GLSL_OUT_FRAG_COLOR = mix ( hr , hx , hv ) ; } } } }".split(" ")}]};
d["postprocessing/performance.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform sampler2D u_color ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { vec4 aQ = vec4 ( 0.0 ) ; for ( int cl = 0 ; cl < 10 ; cl ++ ) { vec2 hy = vec2 ( fract ( A * vec2 ( cl ) * vec2 ( 1.431 , 3.921 ) ) ) ; aQ += 0.01 * GLSL_TEXTURE ( u_color , hy ) ; } GLSL_OUT_FRAG_COLOR = aQ ; }".split(" ")}]};d["postprocessing/postprocessing.glslf"]=
{$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"POST_EFFECT",aa:["POST_EFFECT_NONE"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform vec2 u_texel_size ; uniform sampler2D u_color ;".split(" ")},{$:"cond",da:[{$:"if",ga:["POST_EFFECT","FLIP_CUBEMAP_COORDS",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform int u_tex_number ; uniform vec2 u_delta ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["POST_EFFECT","POST_EFFECT_DOF_BLUR",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","float","u_dof_bokeh_intensity",";"]}]}}]},{$:"txt",aa:"GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["POST_EFFECT","POST_EFFECT_NONE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , A ) ;".split(" ")}]}},{$:"elif",ga:["POST_EFFECT","POST_EFFECT_GRAYSCALE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 du = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR . rgb = vec3 ( ( du . r + du . g + du . b ) / 3.0 ) ; GLSL_OUT_FRAG_COLOR . a = 1.0 ;".split(" ")}]}},
{$:"elif",ga:["POST_EFFECT","POST_EFFECT_BLUR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ * 0.2270270270 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1945945946 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1945945946 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1216216216 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.1216216216 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0540540541 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0540540541 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0162162162 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * 0.0162162162 ;".split(" ")}]}},
{$:"elif",ga:["POST_EFFECT","POST_EFFECT_GLOW_BLUR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.152507 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.141763 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.141763 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.113861 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.113861 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.079019 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.079019 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.047383 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.047383 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.024549 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.024549 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.01099 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.01099 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00425 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00425 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00142 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; GLSL_OUT_FRAG_COLOR += aQ * ( 1.0 - step ( 0.0 , - aQ . a ) ) * 0.00142 ; GLSL_OUT_FRAG_COLOR = clamp ( GLSL_OUT_FRAG_COLOR , 0.0 , 1.0 ) ;".split(" ")}]}},
{$:"elif",ga:["POST_EFFECT","POST_EFFECT_DOF_BLUR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; vec4 hz ; vec4 hA ; float gz ; float hB = u_dof_bokeh_intensity ; aQ = GLSL_TEXTURE ( u_color , A ) ; hz = aQ ; hA = aQ ; gz = aQ . a ; cS = gz * cS ; for ( int cl = 0 ; cl < 12 ; cl += 2 ) { fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hz += aQ ; hA = max ( hA , aQ ) ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hz += aQ ; hA = max ( hA , aQ ) ; } hz /= 13.0 ; GLSL_OUT_FRAG_COLOR = mix ( hz , hA , hB ) ;".split(" ")}]}},
{$:"elif",ga:["POST_EFFECT","POST_EFFECT_ALPHA_BLUR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 fI = vec2 ( 0.0 , 0.0 ) ; vec2 cS = u_texel_size ; vec4 aQ ; vec4 hz ; vec4 hA ; aQ = GLSL_TEXTURE ( u_color , A ) ; hA = max ( hA , aQ ) ; hz = aQ ; hz . a = aQ . a * 0.2270270270 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1945945946 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1945945946 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1216216216 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.1216216216 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0540540541 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0540540541 ; fI += cS ; aQ = GLSL_TEXTURE ( u_color , A + fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0162162162 ; aQ = GLSL_TEXTURE ( u_color , A - fI ) ; hA . a = max ( hA . a , aQ . a ) ; hz . a += aQ . a * 0.0162162162 ; GLSL_OUT_FRAG_COLOR = mix ( hz , hA , 0.5 ) ;".split(" ")}]}},
{$:"elif",ga:["POST_EFFECT","POST_EFFECT_EXTEND",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 cS = u_texel_size ; vec4 aQ = GLSL_TEXTURE ( u_color , A ) ; GLSL_OUT_FRAG_COLOR = aQ ; if ( aQ . a == 0.0 ) { aQ = GLSL_TEXTURE ( u_color , A + cS ) ; if ( aQ . a > 0.0 ) GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , aQ . a ) ; else { aQ = GLSL_TEXTURE ( u_color , A - cS ) ; if ( aQ . a > 0.0 ) GLSL_OUT_FRAG_COLOR = vec4 ( 1.0 , 1.0 , 1.0 , aQ . a ) ; } }".split(" ")}]}},{$:"elif",ga:["POST_EFFECT",
"FLIP_CUBEMAP_COORDS",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float hC = u_delta [ 0 ] ; float hD = u_delta [ 1 ] ; float hE = 1.0 / 3.0 ; float hF = 0.5 ; vec2 hG = vec2 ( hE , hF ) ; if ( u_tex_number == 0 ) { vec2 b_ = mat2 ( 0.0 , - 1.0 , 1.0 , 0.0 ) * A * hG + vec2 ( 2.0 * hE , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , 2.0 * hE + hC ) ; b_ [ 1 ] = max ( b_ [ 1 ] , hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( b_ [ 0 ] , hF - b_ [ 1 ] ) ) ; } else if ( u_tex_number == 1 ) { vec2 b_ = mat2 ( 0.0 , - 1.0 , 1.0 , 0.0 ) * A * hG + vec2 ( 0.0 , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , hF - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( hE - b_ [ 0 ] , b_ [ 1 ] ) ) ; } else if ( u_tex_number == 2 ) { vec2 b_ = A * hG + vec2 ( 2.0 * hE , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , 2.0 * hE + hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , 1.0 - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( b_ [ 0 ] , 1.5 - b_ [ 1 ] ) ) ; } else if ( u_tex_number == 3 ) { vec2 b_ = A * hG + vec2 ( hE , 0.0 ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hE + hC ) ; b_ [ 0 ] = min ( b_ [ 0 ] , 2.0 * hE - hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , hF - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( 1.0 - b_ [ 0 ] , b_ [ 1 ] ) ) ; } else if ( u_tex_number == 4 ) { vec2 b_ = A * hG + vec2 ( hE , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hE + hC ) ; b_ [ 0 ] = min ( b_ [ 0 ] , 2.0 * hE - hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , 1.0 - hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( b_ [ 0 ] , 3.0 * hF - b_ [ 1 ] ) ) ; } else { vec2 b_ = A * hG + vec2 ( 0.0 , hF ) ; b_ [ 0 ] = max ( b_ [ 0 ] , hC ) ; b_ [ 1 ] = min ( b_ [ 1 ] , 1.0 - hD ) ; b_ [ 1 ] = max ( b_ [ 1 ] , hF + hD ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_color , vec2 ( hE - b_ [ 0 ] , b_ [ 1 ] ) ) ; }".split(" ")}]}}]},
{$:"txt",aa:["}"]}]};d["postprocessing/postprocessing.glslv"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"GLSL_IN vec2 a_position ; GLSL_OUT vec2 A ; void main ( ) { A = 2.0 * a_position ; gl_Position = vec4 ( 4.0 * ( a_position . xy - 0.25 ) , 0.0 , 1.0 ) ; }".split(" ")}]};d["postprocessing/precompute_brdf.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"var",ba:"PRECISION",
aa:["highp"]},{$:"txt",aa:"precision PRECISION sampler2D ; precision PRECISION float ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; float dZ ( int cr , int dV ) { float dW = 1.0 / float ( dV ) ; float dX = 1.0 ; float dY = 0.0 ; for ( int cl = 0 ; cl < 32 ; ++ cl ) { if ( cr > 0 ) { dX = mod ( float ( cr ) , 2.0 ) ; dY += dX * dW ; dW = dW / 2.0 ; cr = int ( float ( cr ) / 2.0 ) ; } } return dY ; } vec2 ea ( int cl , int d_ ) { return vec2 ( float ( cl ) / float ( d_ ) , dZ ( cl , 2 ) ) ; } vec3 eh ( vec2 eb , vec3 d_ , float ec ) { float a = ec * ec ; float by = 2.0 * M_PI * eb . x ; float ed = sqrt ( ( 1.0 - eb . y ) / ( 1.0 + ( a * a - 1.0 ) * eb . y ) ) ; float ee = sqrt ( 1.0 - ed * ed ) ; vec3 ef ; ef . x = cos ( by ) * ee ; ef . y = sin ( by ) * ee ; ef . z = ed ; vec3 bu = abs ( d_ . z ) < 0.999 ? vec3 ( 0.0 , 0.0 , 1.0 ) : vec3 ( 1.0 , 0.0 , 0.0 ) ; vec3 V = normalize ( cross ( bu , d_ ) ) ; vec3 eg = cross ( d_ , V ) ; vec3 bB = V * ef . x + eg * ef . y + d_ * ef . z ; return normalize ( bB ) ; } float hK ( float hH , float ec ) { float a = ec ; float hI = ( a * a ) / 2.0 ; float hJ = hH ; float dX = hH * ( 1.0 - hI ) + hI ; return hJ / dX ; } float hN ( vec3 d_ , vec3 ek , vec3 en , float ec ) { float hH = max ( dot ( d_ , ek ) , 0.0 ) ; float eo = max ( dot ( d_ , en ) , 0.0 ) ; float hL = hK ( hH , ec ) ; float hM = hK ( eo , ec ) ; return hM * hL ; } vec2 hU ( float hH , float ec ) { vec3 ek ; ek . x = sqrt ( 1.0 - hH * hH ) ; ek . y = 0.0 ; ek . z = hH ; float cB = 0.0 ; float hO = 0.0 ; vec3 d_ = vec3 ( 0.0 , 0.0 , 1.0 ) ; const int el = 1024 ; for ( int cl = 0 ; cl < el ; ++ cl ) { vec2 eb = ea ( cl , el ) ; vec3 ef = eh ( eb , d_ , ec ) ; vec3 en = normalize ( 2.0 * dot ( ek , ef ) * ef - ek ) ; float eo = max ( en . z , 0.0 ) ; float hP = max ( ef . z , 0.0 ) ; float hQ = max ( dot ( ek , ef ) , 0.0 ) ; if ( eo > 0.0 ) { float hR = hN ( d_ , ek , en , ec ) ; float hS = ( hR * hQ ) / ( hP * hH ) ; float hT = pow ( 1.0 - hQ , 5.0 ) ; cB += ( 1.0 - hT ) * hS ; hO += hT * hS ; } } cB /= float ( el ) ; hO /= float ( el ) ; return vec2 ( cB , hO ) ; } void main ( ) { vec2 hV = hU ( A . x , A . y ) ; GLSL_OUT_FRAG_COLOR = vec4 ( hV , 0.0 , 1.0 ) ; }".split(" ")}]};
d["postprocessing/smaa.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"SMAA_PASS",aa:["SMAA_RESOLVE"]},{$:"var",ba:"SMAA_REPROJECTION",aa:["0"]},{$:"var",ba:"SMAA_PREDICATION",aa:["0"]},{$:"var",ba:"SMAA_DISABLE_CORNER_DETECTION",aa:["0"]},{$:"var",ba:"AA_METHOD",aa:["AA_METHOD_SMAA_ULTRA"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"pack.glslf"},{$:"txt",aa:["uniform","sampler2D","u_color",";"]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS",
"SMAA_RESOLVE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_color_prev",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_blend",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_velocity_tex",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2},"SMAA_PREDICATION",
{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["uniform","sampler2D","u_predication_tex",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform sampler2D u_search_tex ; uniform sampler2D u_area_tex ; uniform vec4 u_subsample_indices ;".split(" ")}]}}]},{$:"txt",aa:"uniform vec2 u_texel_size ; GLSL_IN vec2 A ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec4","hW",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_IN vec4 hX ; GLSL_IN vec4 hY ; GLSL_IN vec4 hZ ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec2","h_",";"]}]}}]},{$:"txt",aa:["GLSL_OUT","vec4","GLSL_OUT_FRAG_COLOR",";"]},{$:"cond",da:[{$:"if",ga:["AA_METHOD","AA_METHOD_SMAA_LOW",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",
ba:"SMAA_THRESHOLD",aa:["0.15"]},{$:"define",ba:"SMAA_DISABLE_DIAG_DETECTION",aa:["1"]},{$:"define",ba:"SMAA_DISABLE_CORNER_DETECTION",aa:["1"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_THRESHOLD",aa:["0.1"]},{$:"define",ba:"SMAA_DISABLE_DIAG_DETECTION",aa:["1"]},{$:"define",ba:"SMAA_DISABLE_CORNER_DETECTION",aa:["1"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_HIGH",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_THRESHOLD",
aa:["0.1"]},{$:"define",ba:"SMAA_DISABLE_DIAG_DETECTION",aa:["0"]},{$:"define",ba:"SMAA_MAX_SEARCH_STEPS_DIAG",aa:["8"]},{$:"define",ba:"SMAA_CORNER_ROUNDING",aa:["25"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_THRESHOLD",aa:["0.05"]},{$:"define",ba:"SMAA_DISABLE_DIAG_DETECTION",aa:["0"]},{$:"define",ba:"SMAA_MAX_SEARCH_STEPS_DIAG",aa:["16"]},{$:"define",ba:"SMAA_CORNER_ROUNDING",aa:["25"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_THRESHOLD",
ha:{$:"grp",da:[{$:"define",ba:"SMAA_THRESHOLD",aa:["0.1"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_DEPTH_THRESHOLD",ha:{$:"grp",da:[{$:"define",ba:"SMAA_DEPTH_THRESHOLD",aa:["(","0.1","*","SMAA_THRESHOLD",")"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_MAX_SEARCH_STEPS_DIAG",ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS_DIAG",aa:["8"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_CORNER_ROUNDING",ha:{$:"grp",da:[{$:"define",ba:"SMAA_CORNER_ROUNDING",aa:["25"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",
ha:{$:"grp",da:[{$:"define",ba:"SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR",aa:["2.0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_PREDICATION",ha:{$:"grp",da:[{$:"define",ba:"SMAA_PREDICATION",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_PREDICATION_THRESHOLD",ha:{$:"grp",da:[{$:"define",ba:"SMAA_PREDICATION_THRESHOLD",aa:["0.01"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_PREDICATION_SCALE",ha:{$:"grp",da:[{$:"define",ba:"SMAA_PREDICATION_SCALE",aa:["2.0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_PREDICATION_STRENGTH",
ha:{$:"grp",da:[{$:"define",ba:"SMAA_PREDICATION_STRENGTH",aa:["0.4"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_REPROJECTION",ha:{$:"grp",da:[{$:"define",ba:"SMAA_REPROJECTION",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_REPROJECTION_WEIGHT_SCALE",ha:{$:"grp",da:[{$:"define",ba:"SMAA_REPROJECTION_WEIGHT_SCALE",aa:["30.0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_MAX_SEARCH_STEPS",ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["16"]}]}}]},{$:"define",ba:"SMAA_AREATEX_MAX_DISTANCE",
aa:["16"]},{$:"define",ba:"SMAA_AREATEX_MAX_DISTANCE_DIAG",aa:["20"]},{$:"define",ba:"SMAA_AREATEX_PIXEL_SIZE",aa:"( 1.0 / vec2 ( 160.0 , 560.0 ) )".split(" ")},{$:"define",ba:"SMAA_AREATEX_SUBTEX_SIZE",aa:["(","1.0","/","7.0",")"]},{$:"define",ba:"SMAA_SEARCHTEX_SIZE",aa:"vec2 ( 66.0 , 33.0 )".split(" ")},{$:"define",ba:"SMAA_SEARCHTEX_PACKED_SIZE",aa:"vec2 ( 64.0 , 16.0 )".split(" ")},{$:"define",ba:"SMAA_CORNER_ROUNDING_NORM",aa:"( float ( SMAA_CORNER_ROUNDING ) / 100.0 )".split(" ")},{$:"cond",
da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 id ( vec2 b_ , sampler2D ia ) { float p = GLSL_TEXTURE ( ia , b_ ) . r ; float ib = GLSL_TEXTURE ( ia , hX . xy ) . r ; float ic = GLSL_TEXTURE ( ia , hX . zw ) . r ; return vec3 ( p , ib , ic ) ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 ii ( vec2 b_ , sampler2D ie ) { vec3 ig = id ( b_ , ie ) ; vec2 cS = abs ( ig . xx - ig . yz ) ; vec2 ih = step ( SMAA_PREDICATION_THRESHOLD , cS ) ; return SMAA_PREDICATION_SCALE * SMAA_THRESHOLD * ( 1.0 - SMAA_PREDICATION_STRENGTH * ih ) ; }".split(" ")}]}}]},
{$:"txt",aa:"void im ( bvec2 ij , inout vec2 ik , vec2 il ) { if ( ij . x ) ik . x = il . x ; if ( ij . y ) ik . y = il . y ; } void im ( bvec4 ij , inout vec4 ik , vec4 il ) { im ( ij . xy , ik . xy , il . xy ) ; im ( ij . zw , ik . zw , il . zw ) ; } vec2 io ( vec2 x ) { return sign ( x ) * floor ( abs ( x ) + .5 ) ; } vec4 io ( vec4 x ) { return sign ( x ) * floor ( abs ( x ) + .5 ) ; }".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"vec2 iA ( vec2 b_ , sampler2D ip".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PREDICATION"],ha:{$:"grp",da:[{$:"txt",aa:[",","sampler2D","ie"]}]}}]},{$:"txt",aa:[")","{"]},{$:"cond",da:[{$:"if",ga:["SMAA_PREDICATION"],ha:{$:"grp",da:[{$:"txt",aa:"vec2 iq = ii ( b_ , ie ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec2 iq = vec2 ( SMAA_THRESHOLD , SMAA_THRESHOLD ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 ir = vec3 ( 0.2126 , 0.7152 , 0.0722 ) ; float en = dot ( GLSL_TEXTURE ( ip , b_ ) . rgb , ir ) ; float is = dot ( GLSL_TEXTURE ( ip , hX . xy ) . rgb , ir ) ; float it = dot ( GLSL_TEXTURE ( ip , hX . zw ) . rgb , ir ) ; vec4 cS ; cS . xy = abs ( en - vec2 ( is , it ) ) ; vec2 ih = step ( iq , cS . xy ) ; if ( dot ( ih , vec2 ( 1.0 , 1.0 ) ) == 0.0 ) discard ; float iu = dot ( GLSL_TEXTURE ( ip , hY . xy ) . rgb , ir ) ; float iv = dot ( GLSL_TEXTURE ( ip , hY . zw ) . rgb , ir ) ; cS . zw = abs ( en - vec2 ( iu , iv ) ) ; vec2 iw = max ( cS . xy , cS . zw ) ; float ix = dot ( GLSL_TEXTURE ( ip , hZ . xy ) . rgb , ir ) ; float iy = dot ( GLSL_TEXTURE ( ip , hZ . zw ) . rgb , ir ) ; cS . zw = abs ( vec2 ( is , it ) - vec2 ( ix , iy ) ) ; iw = max ( iw . xy , cS . zw ) ; float iz = max ( iw . x , iw . y ) ; ih . xy *= step ( iz , SMAA_LOCAL_CONTRAST_ADAPTATION_FACTOR * cS . xy ) ; return ih ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SMAA_DISABLE_DIAG_DETECTION",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 iC ( vec2 iB ) { iB . r = iB . r * abs ( 5.0 * iB . r - 5.0 * 0.75 ) ; return io ( iB ) ; } vec4 iC ( vec4 iB ) { iB . rb = iB . rb * abs ( 5.0 * iB . rb - 5.0 * 0.75 ) ; return io ( iB ) ; } vec2 iE ( sampler2D iD , vec2 b_ , vec2 bD , out vec2 iB ) { vec4 fW = vec4 ( b_ , - 1.0 , 1.0 ) ; vec3 t = vec3 ( u_texel_size , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS_DIAG ; cl ++ ) { if ( fW . z < float ( SMAA_MAX_SEARCH_STEPS_DIAG - 1 ) && fW . w > 0.9 ) { fW . xyz += t * vec3 ( bD , 1.0 ) ; iB = GLSL_TEXTURE ( iD , fW . xy , 0.0 ) . rg ; fW . w = dot ( iB , vec2 ( 0.5 , 0.5 ) ) ; } } return fW . zw ; } vec2 iF ( sampler2D iD , vec2 b_ , vec2 bD , out vec2 iB ) { vec4 fW = vec4 ( b_ , - 1.0 , 1.0 ) ; fW . x += 0.25 * u_texel_size . x ; vec3 t = vec3 ( u_texel_size , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS_DIAG ; cl ++ ) { if ( fW . z < float ( SMAA_MAX_SEARCH_STEPS_DIAG - 1 ) && fW . w > 0.9 ) { fW . xyz = t * vec3 ( bD , 1.0 ) + fW . xyz ; iB = GLSL_TEXTURE ( iD , fW . xy , 0.0 ) . rg ; iB = iC ( iB ) ; fW . w = dot ( iB , vec2 ( 0.5 , 0.5 ) ) ; } } return fW . zw ; } vec2 iH ( sampler2D iG , vec2 aM , vec2 iB , float fI ) { vec2 b_ = vec2 ( SMAA_AREATEX_MAX_DISTANCE_DIAG , SMAA_AREATEX_MAX_DISTANCE_DIAG ) * iB + aM ; b_ = SMAA_AREATEX_PIXEL_SIZE * b_ + 0.5 * SMAA_AREATEX_PIXEL_SIZE ; b_ . x += 0.5 ; b_ . y += SMAA_AREATEX_SUBTEX_SIZE * fI ; return GLSL_TEXTURE ( iG , b_ , 0.0 ) . rg ; } vec2 iM ( sampler2D iD , sampler2D iG , vec2 b_ , vec2 iB , vec4 iI ) { vec2 ir = vec2 ( 0.0 , 0.0 ) ; vec4 dz ; vec2 iJ ; if ( iB . r > 0.0 ) { dz . xz = iE ( iD , b_ , vec2 ( - 1.0 , 1.0 ) , iJ ) ; dz . x += float ( iJ . y > 0.9 ) ; } else dz . xz = vec2 ( 0.0 , 0.0 ) ; dz . yw = iE ( iD , b_ , vec2 ( 1.0 , - 1.0 ) , iJ ) ; if ( dz . x + dz . y > 2.0 ) { vec4 iK = vec4 ( - dz . x + 0.25 , dz . x , dz . y , - dz . y - 0.25 ) * u_texel_size . xyxy + b_ . xyxy ; vec4 du ; du . xy = GLSL_TEXTURE ( iD , iK . xy + u_texel_size * vec2 ( - 1 , 0 ) , 0.0 ) . rg ; du . zw = GLSL_TEXTURE ( iD , iK . zw + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . rg ; du . yxwz = iC ( du . xyzw ) ; vec2 iL = vec2 ( 2.0 , 2.0 ) * du . xz + du . yw ; im ( bvec2 ( step ( 0.9 , dz . zw ) ) , iL , vec2 ( 0.0 , 0.0 ) ) ; ir += iH ( iG , dz . xy , iL , iI . z ) ; } dz . xz = iF ( iD , b_ , vec2 ( - 1 , - 1 ) , iJ ) ; if ( GLSL_TEXTURE ( iD , b_ + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . r > 0.0 ) { dz . yw = iF ( iD , b_ , vec2 ( 1 , 1 ) , iJ ) ; dz . y += float ( iJ . y > 0.9 ) ; } else dz . yw = vec2 ( 0.0 , 0.0 ) ; if ( dz . x + dz . y > 2.0 ) { vec4 iK = vec4 ( - dz . x , - dz . x , dz . y , dz . y ) * u_texel_size . xyxy + b_ . xyxy ; vec4 du ; du . x = GLSL_TEXTURE ( iD , iK . xy + u_texel_size * vec2 ( - 1 , 0 ) , 0.0 ) . g ; du . y = GLSL_TEXTURE ( iD , iK . xy + u_texel_size * vec2 ( 0 , - 1 ) , 0.0 ) . r ; du . zw = GLSL_TEXTURE ( iD , iK . zw + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . gr ; vec2 iL = vec2 ( 2.0 , 2.0 ) * du . xz + du . yw ; im ( bvec2 ( step ( 0.9 , dz . zw ) ) , iL , vec2 ( 0 , 0 ) ) ; ir += iH ( iG , dz . xy , iL , iI . w ) . gr ; } return ir ; }".split(" ")}]}}]},
{$:"txt",aa:"float iP ( sampler2D iN , vec2 iB , float fI ) { vec2 hG = SMAA_SEARCHTEX_SIZE * vec2 ( 0.5 , - 1.0 ) ; vec2 iO = SMAA_SEARCHTEX_SIZE * vec2 ( fI , 1.0 ) ; hG += vec2 ( - 1.0 , 1.0 ) ; iO += vec2 ( 0.5 , - 0.5 ) ; hG *= 1.0 / SMAA_SEARCHTEX_PACKED_SIZE ; iO *= 1.0 / SMAA_SEARCHTEX_PACKED_SIZE ; return GLSL_TEXTURE ( iN , hG * iB + iO , 0.0 ) . r ; } float iQ ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 0.0 , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . x > iJ && iB . g > 0.8281 && iB . r == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = - vec2 ( 2.0 , 0.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB , 0.0 ) + 3.25 ; return u_texel_size . x * fI + b_ . x ; } float iR ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 0.0 , 1.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . x < iJ && iB . g > 0.8281 && iB . r == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = vec2 ( 2.0 , 0.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB , 0.5 ) + 3.25 ; return - u_texel_size . x * fI + b_ . x ; } float iS ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 1.0 , 0.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . y > iJ && iB . r > 0.8281 && iB . g == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = - vec2 ( 0.0 , 2.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB . gr , 0.0 ) + 3.25 ; return u_texel_size . y * fI + b_ . y ; } float iT ( sampler2D iD , sampler2D iN , vec2 b_ , float iJ ) { vec2 iB = vec2 ( 1.0 , 0.0 ) ; for ( int cl = 0 ; cl < SMAA_MAX_SEARCH_STEPS ; cl ++ ) { if ( b_ . y < iJ && iB . r > 0.8281 && iB . g == 0.0 ) { iB = GLSL_TEXTURE ( iD , b_ , 0.0 ) . rg ; b_ = vec2 ( 0.0 , 2.0 ) * u_texel_size + b_ ; } } float fI = - ( 255.0 / 127.0 ) * iP ( iN , iB . gr , 0.5 ) + 3.25 ; return - u_texel_size . y * fI + b_ . y ; } vec2 iW ( sampler2D iG , vec2 aM , float iU , float iV , float fI ) { vec2 b_ = vec2 ( SMAA_AREATEX_MAX_DISTANCE , SMAA_AREATEX_MAX_DISTANCE ) * io ( 4.0 * vec2 ( iU , iV ) ) + aM ; b_ = SMAA_AREATEX_PIXEL_SIZE * b_ + 0.5 * SMAA_AREATEX_PIXEL_SIZE ; b_ . y = SMAA_AREATEX_SUBTEX_SIZE * fI + b_ . y ; return GLSL_TEXTURE ( iG , b_ , 0.0 ) . rg ; } void iZ ( sampler2D iD , inout vec2 ir , vec4 b_ , vec2 dz ) {".split(" ")},
{$:"cond",da:[{$:"if",ga:["SMAA_DISABLE_CORNER_DETECTION",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 iX = step ( dz . xy , dz . yx ) ; vec2 iY = ( 1.0 - SMAA_CORNER_ROUNDING_NORM ) * iX ; iY /= iX . x + iX . y ; vec2 aL = vec2 ( 1.0 , 1.0 ) ; aL . x -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( 0 , 1 ) , 0.0 ) . r ; aL . x -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( 1 , 1 ) , 0.0 ) . r ; aL . y -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( 0 , - 2 ) , 0.0 ) . r ; aL . y -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( 1 , - 2 ) , 0.0 ) . r ; ir *= clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},
{$:"txt",aa:"} void i_ ( sampler2D iD , inout vec2 ir , vec4 b_ , vec2 dz ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_DISABLE_CORNER_DETECTION",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 iX = step ( dz . xy , dz . yx ) ; vec2 iY = ( 1.0 - SMAA_CORNER_ROUNDING_NORM ) * iX ; iY /= iX . x + iX . y ; vec2 aL = vec2 ( 1.0 , 1.0 ) ; aL . x -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . g ; aL . x -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( 1 , 1 ) , 0.0 ) . g ; aL . y -= iY . x * GLSL_TEXTURE ( iD , b_ . xy + u_texel_size * vec2 ( - 2 , 0 ) , 0.0 ) . g ; aL . y -= iY . y * GLSL_TEXTURE ( iD , b_ . zw + u_texel_size * vec2 ( - 2 , 1 ) , 0.0 ) . g ; ir *= clamp ( aL , 0.0 , 1.0 ) ;".split(" ")}]}}]},
{$:"txt",aa:["}"]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jc ( vec2 b_ , vec2 ja , sampler2D iD , sampler2D iG , sampler2D iN , vec4 iI ) { vec4 ir = vec4 ( 0.0 , 0.0 , 0.0 , 0.0 ) ; vec2 iB = GLSL_TEXTURE ( iD , b_ ) . rg ; if ( iB . g > 0.0 ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_DISABLE_DIAG_DETECTION",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"ir . rg = iM ( iD , iG , b_ , iB , iI ) ; if ( ir . r == - ir . g ) {".split(" ")}]}}]},
{$:"txt",aa:"vec2 dz ; vec3 iK ; iK . x = iQ ( iD , iN , hX . xy , hZ . x ) ; iK . y = hY . y ; dz . x = iK . x ; float iU = GLSL_TEXTURE ( iD , iK . xy , 0.0 ) . r ; iK . z = iR ( iD , iN , hX . zw , hZ . y ) ; dz . y = iK . z ; dz = abs ( io ( dz / u_texel_size . xx - ja . xx ) ) ; vec2 jb = sqrt ( dz ) ; float iV = GLSL_TEXTURE ( iD , iK . zy + u_texel_size * vec2 ( 1 , 0 ) , 0.0 ) . r ; ir . rg = iW ( iG , jb , iU , iV , iI . y ) ; iK . y = b_ . y ; iZ ( iD , ir . rg , iK . xyzy , dz ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SMAA_DISABLE_DIAG_DETECTION",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"} else iB . r = 0.0 ;".split(" ")}]}}]},{$:"txt",aa:"} if ( iB . r > 0.0 ) { vec2 dz ; vec3 iK ; iK . y = iS ( iD , iN , hY . xy , hZ . z ) ; iK . x = hX . x ; dz . x = iK . y ; float iU = GLSL_TEXTURE ( iD , iK . xy , 0.0 ) . g ; iK . z = iT ( iD , iN , hY . zw , hZ . w ) ; dz . y = iK . z ; dz = abs ( io ( dz / u_texel_size . yy - ja . yy ) ) ; vec2 jb = sqrt ( dz ) ; float iV = GLSL_TEXTURE ( iD , iK . xz + u_texel_size * vec2 ( 0 , 1 ) , 0.0 ) . g ; ir . ba = iW ( iG , jb , iU , iV , iI . x ) ; iK . x = b_ . x ; i_ ( iD , ir . ba , iK . xyxz , dz ) ; } return ir ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jl ( vec2 b_ , sampler2D ip , sampler2D jd".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:[",","sampler2D","je"]}]}}]},{$:"txt",aa:") { vec4 a ; a . x = GLSL_TEXTURE ( jd , hW . xy ) . a ; a . y = GLSL_TEXTURE ( jd , hW . zw ) . g ; a . wz = GLSL_TEXTURE ( jd , b_ ) . xz ; if ( dot ( a , vec4 ( 1.0 , 1.0 , 1.0 , 1.0 ) ) < 1e-5 ) { vec4 aQ = GLSL_TEXTURE ( ip , b_ , 0.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jf = GLSL_TEXTURE ( je , A ) ; vec2 dl = 2.0 * jg ( jf ) - 1.0 ; aQ . a = sqrt ( 2.0 * length ( dl ) ) ;".split(" ")}]}}]},{$:"txt",aa:"return aQ ; } else { bool cj = max ( a . x , a . z ) > max ( a . y , a . w ) ; vec4 jh = vec4 ( 0.0 , a . y , 0.0 , a . w ) ; vec2 ji = a . yw ; im ( bvec4 ( cj , cj , cj , cj ) , jh , vec4 ( a . x , 0.0 , a . z , 0.0 ) ) ; im ( bvec2 ( cj , cj ) , ji , a . xz ) ; ji /= dot ( ji , vec2 ( 1.0 , 1.0 ) ) ; vec4 jj = jh * vec4 ( u_texel_size , - u_texel_size ) + b_ . xyxy ; vec4 aQ = ji . x * GLSL_TEXTURE ( ip , jj . xy , 0.0 ) ; aQ += ji . y * GLSL_TEXTURE ( ip , jj . zw , 0.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jf = GLSL_TEXTURE ( je , jj . xy ) ; vec2 jk = 2.0 * jg ( jf ) - 1.0 ; vec2 dl = ji . x * jk ; jf = GLSL_TEXTURE ( je , jj . zw ) ; jk = 2.0 * jg ( jf ) - 1.0 ; dl += ji . y * jk ; aQ . a = sqrt ( 2.0 * length ( dl ) ) ;".split(" ")}]}}]},{$:"txt",aa:["return","aQ",";","}","}"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_RESOLVE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jq ( vec2 b_ , sampler2D jm , sampler2D jn".split(" ")},
{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:[",","sampler2D","je"]}]}}]},{$:"txt",aa:[")","{"]},{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jf = GLSL_TEXTURE ( je , A ) ; vec2 dl ; dl = 2.0 * jg ( jf ) - 1.0 ; vec4 jo = GLSL_TEXTURE ( jm , b_ ) ; vec4 jp = GLSL_TEXTURE ( jn , b_ - dl ) ; float cS = abs ( jo . a * jo . a - jp . a * jp . a ) / 2.0 ; float cp = 0.5 * clamp ( 1.0 - sqrt ( cS ) * SMAA_REPROJECTION_WEIGHT_SCALE , 0.0 , 1.0 ) ; vec4 aQ = mix ( jo , jp , cp ) ; aQ . a = 1.0 ; return aQ ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 jo = GLSL_TEXTURE ( jm , b_ ) ; vec4 jp = GLSL_TEXTURE ( jn , b_ ) ; return mix ( jo , jp , 0.5 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 aQ = vec4 ( iA ( A , u_color".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PREDICATION"],ha:{$:"grp",da:[{$:"txt",aa:[",","u_predication_tex"]}]}}]},{$:"txt",
aa:") , 0.0 , 0.0 ) ;".split(" ")}]}},{$:"elif",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 aQ = jc ( A , h_ , u_color , u_area_tex , u_search_tex , u_subsample_indices ) ;".split(" ")}]}},{$:"elif",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 aQ = jl ( A , u_color , u_blend".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:[",","u_velocity_tex"]}]}}]},
{$:"txt",aa:[")",";"]}]}},{$:"elif",ga:["SMAA_PASS","SMAA_RESOLVE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 aQ = vec4 ( jq ( A , u_color , u_color_prev".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_REPROJECTION"],ha:{$:"grp",da:[{$:"txt",aa:[",","u_velocity_tex"]}]}}]},{$:"txt",aa:[")",")",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 aQ = GLSL_TEXTURE ( u_color , A ) ;".split(" ")}]}}]},{$:"txt",aa:["GLSL_OUT_FRAG_COLOR","=","aQ",";","}"]}]};d["postprocessing/smaa.glslv"]={$:"grp",
da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SMAA_PASS",aa:["SMAA_RESOLVE"]},{$:"var",ba:"AA_METHOD",aa:["AA_METHOD_SMAA_LOW"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"uniform PRECISION vec2 u_texel_size ; GLSL_IN vec2 a_position ; GLSL_OUT vec2 A ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec4","hW",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT vec4 hX ; GLSL_OUT vec4 hY ; GLSL_OUT vec4 hZ ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_OUT","vec2","h_",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["AA_METHOD","AA_METHOD_SMAA_LOW",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["4"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_MEDIUM",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["8"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_HIGH",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["16"]}]}},{$:"elif",ga:["AA_METHOD","AA_METHOD_SMAA_ULTRA",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["32"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"SMAA_MAX_SEARCH_STEPS",ha:{$:"grp",da:[{$:"define",ba:"SMAA_MAX_SEARCH_STEPS",aa:["16"]}]}}]},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"void jr ( vec2 b_ ) { hX = u_texel_size . xyxy * vec4 ( - 1.0 , 0.0 , 0.0 , - 1.0 ) + b_ . xyxy ; hY = u_texel_size . xyxy * vec4 ( 1.0 , 0.0 , 0.0 , 1.0 ) + b_ . xyxy ; hZ = u_texel_size . xyxy * vec4 ( - 2.0 , 0.0 , 0.0 , - 2.0 ) + b_ . xyxy ; }".split(" ")}]}},
{$:"elif",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"void js ( vec2 b_ , out vec2 ja ) { ja = b_ / u_texel_size ; hX = u_texel_size . xyxy * vec4 ( - 0.25 , - 0.125 , 1.25 , - 0.125 ) + b_ . xyxy ; hY = u_texel_size . xyxy * vec4 ( - 0.125 , - 0.25 , - 0.125 , 1.25 ) + b_ . xyxy ; hZ = u_texel_size . xxyy * vec4 ( - 2.0 , 2.0 , - 2.0 , 2.0 ) * float ( SMAA_MAX_SEARCH_STEPS ) + vec4 ( hX . xz , hY . yw ) ; }".split(" ")}]}},{$:"elif",ga:["SMAA_PASS",
"SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"void jt ( vec2 b_ ) { hW = u_texel_size . xyxy * vec4 ( 1.0 , 0.0 , 0.0 , 1.0 ) + b_ . xyxy ; }".split(" ")}]}}]},{$:"txt",aa:"void main ( ) { A = 2.0 * a_position ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SMAA_PASS","SMAA_EDGE_DETECTION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["jr","(","A",")",";"]}]}},{$:"elif",ga:["SMAA_PASS","SMAA_BLENDING_WEIGHT_CALCULATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:"js ( A , h_ ) ;".split(" ")}]}},{$:"elif",ga:["SMAA_PASS","SMAA_NEIGHBORHOOD_BLENDING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["jt","(","A",")",";"]}]}}]},{$:"txt",aa:"gl_Position = vec4 ( 4.0 * ( a_position . xy - 0.25 ) , 0.0 , 1.0 ) ; }".split(" ")}]};d["postprocessing/ssao.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SSAO_WHITE",aa:["0"]},{$:"var",ba:"SSAO_QUALITY",aa:["SSAO_QUALITY_8"]},{$:"var",ba:"SSAO_HEMISPHERE",
aa:["0"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"depth_fetch.glslf"},{$:"txt",aa:"uniform sampler2D u_color ; uniform sampler2D u_depth ; uniform sampler2D u_ssao_special_tex ; uniform vec2 u_camera_range ; uniform vec2 u_texel_size ; uniform float u_ssao_radius_increase ; uniform float u_ssao_influence ; uniform float u_ssao_dist_factor ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; float ju ( in vec2 fW ) { return gy ( u_depth , fW , u_camera_range ) ; } void main ( ) { vec3 gC = GLSL_TEXTURE ( u_color , A ) . rgb ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SSAO_WHITE"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( gC , 1.0 ) ; return ;".split(" ")}]}}]},{$:"txt",aa:"vec3 jv = normalize ( 2.0 * GLSL_TEXTURE ( u_ssao_special_tex , A * 0.25 / u_texel_size ) . rgb - 1.0 ) ; float eq = ju ( A ) ; float jw = eq * ( u_camera_range . y - u_camera_range . x ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SSAO_QUALITY","SSAO_QUALITY_8",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const float jx = 8.0 ; const int jy = 1 ;".split(" ")}]}},
{$:"elif",ga:["SSAO_QUALITY","SSAO_QUALITY_16",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const float jx = 16.0 ; const int jy = 2 ;".split(" ")}]}},{$:"elif",ga:["SSAO_QUALITY","SSAO_QUALITY_24",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const float jx = 24.0 ; const int jy = 3 ;".split(" ")}]}},{$:"elif",ga:["SSAO_QUALITY","SSAO_QUALITY_32",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const float jx = 32.0 ; const int jy = 4 ;".split(" ")}]}}]},{$:"txt",aa:"float jz = u_ssao_radius_increase * 0.001 ; const float jA = 1.0 + 2.4 / jx ; float jB = 0.0 ; for ( int cl = 0 ; cl < jy ; cl ++ ) for ( int x = - 1 ; x <= 1 ; x += 2 ) for ( int y = - 1 ; y <= 1 ; y += 2 ) for ( int z = - 1 ; z <= 1 ; z += 2 ) { vec3 jC = reflect ( normalize ( vec3 ( x , y , z ) ) , jv ) * ( jz *= jA ) ; vec3 jD = vec3 ( A , jw ) ; jD += vec3 ( jC . xy , jC . z * jw * 2.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SSAO_HEMISPHERE"],ha:{$:"grp",da:[{$:"txt",aa:"jD . z -= 1.4 * ( jD . z - jw ) * step ( jw , jD . z ) ;".split(" ")}]}}]},{$:"txt",aa:"float jE = ju ( jD . xy ) * ( u_camera_range . y - u_camera_range . x ) ; float jF = clamp ( ( jw - jE ) / jE , 0.0 , 1.0 ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SSAO_HEMISPHERE"],ha:{$:"grp",da:[{$:"txt",aa:"jB += mix ( 1.0 , jF , step ( jE , jD . z ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"jB += mix ( step ( jD . z , jE ) , 0.5 , jF ) ;".split(" ")}]}}]},
{$:"txt",aa:"} jB = jB / jx ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SSAO_HEMISPHERE"],ha:{$:"grp",da:[{$:"txt",aa:"jB = clamp ( jB * jB + 0.6 * jB , 0.0 , 1.0 ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"jB = clamp ( jB * jB + jB , 0.0 , 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"float jG = u_ssao_influence * ( 1.0 - u_ssao_dist_factor * eq ) ; jB = mix ( 1.0 , jB , jG ) ; GLSL_OUT_FRAG_COLOR = vec4 ( gC , jB ) ; }".split(" ")}]};d["postprocessing/ssao_blur.glslf"]={$:"grp",da:[{$:"version",
aa:["GLSL_VERSION"]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SSAO_BLUR_DEPTH",aa:["0"]},{$:"txt",aa:["precision","PRECISION","sampler2D",";"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["SSAO_BLUR_DEPTH"],ha:{$:"grp",da:[{$:"include",oa:"depth_fetch.glslf"}]}}]},{$:"txt",aa:"uniform sampler2D u_ssao_mask ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SSAO_BLUR_DEPTH"],
ha:{$:"grp",da:[{$:"txt",aa:"uniform sampler2D u_depth ; uniform vec2 u_camera_range ; uniform float u_ssao_blur_discard_value ; float ju ( in vec2 fW ) { return gy ( u_depth , fW , u_camera_range ) ; }".split(" ")}]}}]},{$:"txt",aa:"void main ( ) { float jH = 0.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SSAO_BLUR_DEPTH"],ha:{$:"grp",da:[{$:"txt",aa:"float jI = ju ( A ) ; float cp = 0.0 ; float jJ = u_ssao_blur_discard_value * 100.0 ;".split(" ")}]}}]},{$:"txt",aa:"vec2 jK = vec2 ( - 2.0 ) ; for ( int cl = 0 ; cl < 4 ; ++ cl ) { for ( int jL = 0 ; jL < 4 ; ++ jL ) { vec2 fI = ( jK + vec2 ( float ( cl ) , float ( jL ) ) ) * u_texel_size ; float jM = GLSL_TEXTURE ( u_ssao_mask , A + fI ) . a ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["SSAO_BLUR_DEPTH"],ha:{$:"grp",da:[{$:"txt",aa:"float jN = ju ( A + fI ) ; float jO = 1.0 - clamp ( abs ( jN - jI ) * jJ , 0.0 , 1.0 ) ; jH += jM * jO ; cp += jO ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["jH","+=","jM",";"]}]}}]},{$:"txt",aa:["}","}"]},{$:"cond",da:[{$:"if",ga:["SSAO_BLUR_DEPTH"],ha:{$:"grp",da:[{$:"txt",aa:"GLSL_OUT_FRAG_COLOR = vec4 ( GLSL_TEXTURE ( u_ssao_mask , A ) . rgb , jH / cp ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",
aa:"GLSL_OUT_FRAG_COLOR = vec4 ( GLSL_TEXTURE ( u_ssao_mask , A ) . rgb , jH / 16.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]};d["postprocessing/stereo.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"var",ba:"ANAGLYPH",aa:["0"]},{$:"var",ba:"SIDEBYSIDE",aa:["0"]},{$:"var",ba:"EPSILON",aa:["0.000001"]},{$:"var",ba:"DISTOR_SCALE",aa:["0.8"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"uniform sampler2D u_sampler_left ; uniform sampler2D u_sampler_right ; uniform vec2 u_texel_size ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["ANAGLYPH",{$:"logic_negative_expr",ia:1},"SIDEBYSIDE",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"uniform int u_enable_hmd_stereo ; uniform vec4 u_distortion_params ; uniform vec4 u_chromatic_aberration_coefs ; void jX ( vec2 b_ , vec2 ao , float df , sampler2D jP ) { vec2 bz = ( b_ - ao ) * 4.0 * u_texel_size [ 0 ] / u_texel_size [ 1 ] / df ; float jQ = bz . x * bz . x + bz . y * bz . y ; vec2 jR = bz * ( 1.0 + u_distortion_params [ 0 ] * jQ + u_distortion_params [ 1 ] * jQ * jQ ) ; vec2 jS = jR * 0.5 / ( 1.0 + u_distortion_params [ 0 ] + u_distortion_params [ 1 ] ) ; if ( length ( u_chromatic_aberration_coefs ) > 0.0 ) { vec2 jT = jS * ( 1.0 + u_chromatic_aberration_coefs [ 0 ] + jQ * u_chromatic_aberration_coefs [ 1 ] ) + 0.5 ; vec2 jU = jS + 0.5 ; vec2 jV = jS * ( 1.0 + u_chromatic_aberration_coefs [ 2 ] + jQ * u_chromatic_aberration_coefs [ 3 ] ) + 0.5 ; if ( clamp ( jV , 0.0 , 1.0 ) != jV ) { GLSL_OUT_FRAG_COLOR = vec4 ( 0.0 ) ; } else { vec4 jW = GLSL_TEXTURE ( jP , jU ) ; GLSL_OUT_FRAG_COLOR [ 0 ] = GLSL_TEXTURE ( jP , jT ) . x ; GLSL_OUT_FRAG_COLOR [ 1 ] = jW . y ; GLSL_OUT_FRAG_COLOR [ 2 ] = GLSL_TEXTURE ( jP , jV ) . z ; GLSL_OUT_FRAG_COLOR [ 3 ] = jW . w ; } } else { jS += 0.5 ; if ( clamp ( jS , 0.0 , 1.0 ) != jS ) { GLSL_OUT_FRAG_COLOR = vec4 ( 0.0 ) ; } else { GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( jP , jS ) ; } } }".split(" ")}]}}]},
{$:"txt",aa:["void","main","(",")","{"]},{$:"cond",da:[{$:"if",ga:["ANAGLYPH"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 jY = GLSL_TEXTURE ( u_sampler_left , A ) ; vec4 jZ = GLSL_TEXTURE ( u_sampler_right , A ) ; vec3 j_ = vec3 ( jY [ 0 ] , jY [ 1 ] , jY [ 2 ] ) ; bC ( j_ ) ; vec3 ka = vec3 ( jZ [ 0 ] , jZ [ 1 ] , jZ [ 2 ] ) ; bC ( ka ) ; mat3 kb = mat3 ( 0.437 , - 0.062 , - 0.048 , 0.449 , - 0.062 , - 0.050 , 0.164 , - 0.024 , - 0.017 ) ; mat3 bv = mat3 ( - 0.011 , 0.377 , - 0.026 , - 0.032 , 0.761 , - 0.093 , - 0.007 , 0.009 , 1.234 ) ; vec3 aQ = clamp ( kb * j_ , 0.0 , 1.0 ) + clamp ( bv * ka , 0.0 , 1.0 ) ; aW ( aQ ) ; GLSL_OUT_FRAG_COLOR = vec4 ( aQ , jY [ 3 ] + jZ [ 3 ] ) ;".split(" ")}]}},
{$:"elif",ga:["SIDEBYSIDE"],ha:{$:"grp",da:[{$:"txt",aa:"if ( A [ 0 ] < 0.5 ) { vec2 b_ = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , b_ ) ; } else { vec2 b_ = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_right , b_ ) ; }".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"if ( u_enable_hmd_stereo != 0 ) { if ( abs ( u_distortion_params [ 0 ] ) > EPSILON || abs ( u_distortion_params [ 1 ] ) > EPSILON ) if ( A [ 0 ] < 0.5 ) { vec2 b_ = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; vec2 ao = vec2 ( 0.5 - ( u_distortion_params [ 3 ] - 0.5 ) / 2.0 , u_distortion_params [ 2 ] ) ; float df = 2.0 * u_distortion_params [ 3 ] * DISTOR_SCALE ; jX ( b_ , ao , df , u_sampler_left ) ; } else { vec2 b_ = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; vec2 ao = vec2 ( 0.5 + ( u_distortion_params [ 3 ] - 0.5 ) / 2.0 , u_distortion_params [ 2 ] ) ; float df = 2.0 * u_distortion_params [ 3 ] * DISTOR_SCALE ; jX ( b_ , ao , df , u_sampler_right ) ; } else if ( A [ 0 ] < 0.5 ) { vec2 b_ = vec2 ( 2.0 * A [ 0 ] , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , b_ ) ; } else { vec2 b_ = vec2 ( 2.0 * ( A [ 0 ] - 0.5 ) , A [ 1 ] ) ; GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_right , b_ ) ; } } else { GLSL_OUT_FRAG_COLOR = GLSL_TEXTURE ( u_sampler_left , A ) ; }".split(" ")}]}}]},
{$:"txt",aa:["}"]}]};d["postprocessing/velocity.glslf"]={$:"grp",da:[{$:"version",aa:["GLSL_VERSION"]},{$:"include",oa:"precision_statement.glslf"},{$:"include",oa:"std.glsl"},{$:"include",oa:"pack.glslf"},{$:"txt",aa:"uniform sampler2D u_depth ; uniform mat4 u_view_proj_inverse ; uniform mat4 u_view_proj_prev ; GLSL_IN vec2 A ; GLSL_OUT vec4 GLSL_OUT_FRAG_COLOR ; void main ( ) { float eq = GLSL_TEXTURE ( u_depth , A ) . x ; vec4 kc = vec4 ( A * 2.0 - 1.0 , 2.0 * eq - 1.0 , 1.0 ) ; vec4 cy = u_view_proj_inverse * kc ; vec4 kd = cy / cy . w ; vec4 ke = u_view_proj_prev * kd ; ke /= ke . w ; vec2 dl = ( kc . xy - ke . xy ) / 4.0 + 0.5 ; dl = clamp ( dl , 0.0 , 1.0 ) ; GLSL_OUT_FRAG_COLOR = er ( dl ) ; }".split(" ")}]};
d["include/blending.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"BLENDING_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"BLENDING_GLSLF",aa:[""]},{$:"txt",aa:"vec3 kf ( vec3 rgb ) { vec4 hI = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hI . wz ) , vec4 ( rgb . gb , hI . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dz = q . x - min ( q . w , q . y ) ; float iB = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dz + iB ) ) , dz / ( q . x + iB ) , q . x ) ; } vec3 kh ( vec3 kg ) { vec4 hI = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kg . r , kg . r , kg . r ) + hI . xyz ) * 6.0 - hI . www ) ; return kg . b * mix ( hI . xxx , clamp ( p - hI . xxx , _0_0 , _1_0 ) , kg . g ) ; } vec3 kl ( vec3 ki , vec3 kj , float kk ) { return mix ( ki , kj , kk ) ; } vec3 km ( vec3 ki , vec3 kj , float kk ) { return kk * ki + kj ; } vec3 kn ( vec3 ki , vec3 kj , float kk ) { return kj - kk * ki ; } vec3 kp ( vec3 ki , vec3 kj , float kk ) { float ko = _1_0 - kk ; return ( vec3 ( ko ) + kk * ki ) * kj ; } vec3 kq ( vec3 ki , vec3 kj , float kk ) { vec3 ko = vec3 ( _1_0 - kk ) ; return vec3 ( _1_0 ) - ( ko + kk * ( vec3 ( _1_0 ) - ki ) ) * ( vec3 ( _1_0 ) - kj ) ; } vec3 kr ( vec3 ki , vec3 kj , float kk ) { vec3 ko = vec3 ( _1_0 - kk ) ; return mix ( kj * ( ko + 2.0 * kk * ki ) , vec3 ( _1_0 ) - ( ko + 2.0 * kk * ( vec3 ( _1_0 ) - ki ) ) * ( vec3 ( _1_0 ) - kj ) , step ( 0.5 , kj ) ) ; } vec3 ks ( vec3 ki , vec3 kj , float kk ) { return mix ( kj , abs ( ki - kj ) , kk ) ; } vec3 kt ( vec3 ki , vec3 kj , float kk ) { return mix ( kj , kj / ( ki + step ( ki , vec3 ( _0_0 ) ) ) , kk ) ; } vec3 ku ( vec3 ki , vec3 kj , float kk ) { return mix ( kj , min ( ki , kj ) , kk ) ; } vec3 kv ( vec3 ki , vec3 kj , float kk ) { return max ( kk * ki , kj ) ; } vec3 kz ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( kj ) ; if ( kw . y != _0_0 ) { vec3 kx = kf ( ki ) ; vec3 ky = kh ( vec3 ( kw . x , kx . yz ) ) ; return mix ( ki , ky , kk ) ; } return ki ; } vec3 kA ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( ki ) ; if ( kw . y != _0_0 ) { vec3 kx = kf ( kj ) ; return kh ( vec3 ( kw . x , mix ( kw . y , kx . y , kk ) , kw . z ) ) ; } return ki ; } vec3 kB ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( ki ) ; vec3 kx = kf ( kj ) ; return kh ( vec3 ( kw . xy , mix ( kw . z , kx . z , kk ) ) ) ; } vec3 kC ( vec3 ki , vec3 kj , float kk ) { vec3 kw = kf ( kj ) ; if ( kw . y != _0_0 ) { vec3 kx = kf ( ki ) ; vec3 ky = kh ( vec3 ( kw . xy , kx . z ) ) ; return mix ( ki , ky , kk ) ; } return ki ; } vec3 kE ( vec3 ki , vec3 kj , float kk ) { vec3 kD = vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - kj ) * ( vec3 ( _1_0 ) - ki ) ; return mix ( ki , ( ( vec3 ( _1_0 ) - ki ) * kj * ki ) + ki * kD , kk ) ; } vec3 kF ( vec3 ki , vec3 kj , float kk ) { return ki + kk * ( 2.0 * kj - _1_0 ) ; } float kJ ( float kG , float kH , float kk , float kI ) { float ko = _1_0 - kI ; return ( ko + kk * kG ) * kH ; } float kK ( float kG , float kH , float kk , float kI ) { float ko = _1_0 - kI ; return _1_0 - ( ko + kk * ( _1_0 - kG ) ) * ( _1_0 - kH ) ; } float kL ( float kG , float kH , float kk , float kI ) { float ko = _1_0 - kI ; return mix ( kH * ( ko + 2.0 * kk * kG ) , _1_0 - ( ko + 2.0 * kk * ( _1_0 - kG ) ) * ( _1_0 - kH ) , step ( 0.5 , kH ) ) ; }".split(" ")}]}}]}]};
d["include/caustics.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"CAUSTICS_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"CAUSTICS_GLSLF",aa:[""]},{$:"var",ba:"SUN_NUM",aa:["0"]},{$:"var",ba:"CAUST_SCALE",aa:["0.25"]},{$:"var",ba:"CAUST_SPEED",aa:["vec2","(","0.0",")"]},{$:"var",ba:"CAUST_BRIGHT",aa:["0.5"]},{$:"include",oa:"procedural.glslf"},{$:"include",oa:"math.glslv"},{$:"define",ba:"CAUSTICS_VIEW_DISTANCE",aa:["100.0"]},{$:"txt",aa:"void bQ ( inout vec3 aQ , float kM , float fu , vec4 bP , vec3 U , vec3 kN , vec3 kO , vec4 kP , vec3 bo , float bN ) { if ( bN > CAUSTICS_VIEW_DISTANCE ) return ; vec3 kQ = bo + U ; kQ . xz = 10.0 * sin ( 0.1 * kQ . xz ) ; vec3 kS = T ( kR ( kP ) , kQ ) ; vec2 b_ = kS . xz ; vec3 kT = kN ; float kU = max ( dot ( U , kT ) , 0.0 ) ; float kV = 0.025 ; vec2 kW = CAUST_SPEED * fu ; b_ . s += 0.25 * sin ( dot ( bo + fu , vec3 ( 1.0 ) ) ) ; b_ . t += 0.35 * ( - sin ( dot ( bo - fu , vec3 ( - 0.7 ) ) ) ) ; b_ . st += 0.15 * cos ( 4.0 * kM - kW . x ) + 1.5 * sin ( kM - 0.3 * kW . y ) ; float hG = CAUST_SCALE * ( 1.0 + max ( 0.1 * kM , 0.0 ) ) ; vec3 kY = kX ( ( b_ / hG ) , kV ) ; kY *= CAUST_BRIGHT ; kY *= kY ; float kZ = min ( 0.25 * kM , - kM ) + 1.0 ; kZ = max ( kZ , 0.0 ) ; float k_ = bP [ SUN_NUM ] * kU ; float la = max ( sign ( kM ) , 0.0 ) ; k_ = k_ + max ( 0.5 * sign ( - U . y ) * la , 0.0 ) ; k_ = min ( k_ , 1.0 ) ; aQ += kO * kY * kZ * k_ ; }".split(" ")}]}}]}]};
d["include/color_util.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"COLOR_UTIL_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"COLOR_UTIL_GLSLF",aa:[""]},{$:"define",ba:"PREMULTIPLY_ALPHA",aa:["1"]},{$:"var",ba:"SRGB",aa:["SRGB_NONE"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"void bC ( inout float aQ ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SRGB","SRGB_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aQ = pow ( aQ , 2.2 ) ;".split(" ")}]}},{$:"elif",ga:["SRGB","SRGB_PROPER",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( aQ < 0.04045 ) aQ = aQ / 12.92 ; else aQ = pow ( aQ * ( 1.0 / 1.055 ) + 0.0521327 , 2.4 ) ;".split(" ")}]}}]},{$:"txt",aa:"} void aW ( inout float aQ ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SRGB","SRGB_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aQ = pow ( aQ , 1.0 / 2.2 ) ;".split(" ")}]}},{$:"elif",ga:["SRGB","SRGB_PROPER",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( aQ < 0.0031308 ) aQ = aQ * 12.92 ; else aQ = 1.055 * pow ( aQ , 1.0 / 2.4 ) - 0.055 ;".split(" ")}]}}]},
{$:"txt",aa:"} void bC ( inout vec3 aQ ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SRGB","SRGB_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aQ = pow ( aQ , vec3 ( 2.2 ) ) ;".split(" ")}]}},{$:"elif",ga:["SRGB","SRGB_PROPER",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"bC ( aQ . r ) ; bC ( aQ . g ) ; bC ( aQ . b ) ;".split(" ")}]}}]},{$:"txt",aa:"} void aW ( inout vec3 aQ ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SRGB","SRGB_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:"aQ = pow ( aQ , vec3 ( 1.0 / 2.2 ) ) ;".split(" ")}]}},{$:"elif",ga:["SRGB","SRGB_PROPER",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"aW ( aQ . r ) ; aW ( aQ . g ) ; aW ( aQ . b ) ;".split(" ")}]}}]},{$:"txt",aa:"} void aX ( inout vec3 aQ , in float L ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["PREMULTIPLY_ALPHA"],ha:{$:"grp",da:[{$:"txt",aa:"aQ = aQ * L ;".split(" ")}]}}]},{$:"txt",aa:"} float ge ( vec4 aQ ) { vec3 lb = vec3 ( 0.299 , 0.587 , 0.114 ) ; float lc = dot ( aQ . rgb , lb ) ; return lc ; }".split(" ")}]}}]}]};
d["include/coverage.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"COVERAGE_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"COVERAGE_GLSLF",aa:[""]},{$:"include",oa:"procedural.glslf"},{$:"txt",aa:"const float ld = 1000.0 ; bool C ( float L , float le ) { if ( le < 0.0 ) L = 1.0 - L ; float lf = floor ( L * ld ) ; float lh = floor ( lg ( gl_FragCoord . xy ) * ld ) ; if ( le > 0.0 ) return lh < lf ; else return lh >= lf ; }".split(" ")}]}}]}]};d["include/depth_fetch.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",
ba:"DEPTH_FETCH_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"DEPTH_FETCH_GLSLF",aa:[""]},{$:"include",oa:"std.glsl"},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_CASTING",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float ep ( in float li , in vec2 lj ) { float dD = lj . x ; float lk = lj . y ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CAMERA_TYPE","CAM_TYPE_PERSP",{$:"equal_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"return lk * ( 1.0 - dD / li ) / ( lk - dD ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return ( li - dD ) / ( lk - dD ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float gy ( in sampler2D ll , in vec2 fW , in vec2 lj ) { float eq = GLSL_TEXTURE ( ll , fW ) . r ; float dD = lj . x ; float lk = lj . y ; float li = 2.0 * dD / ( dD + lk - ( 2.0 * eq - 1.0 ) * ( lk - dD ) ) ; return li ; }".split(" ")}]}}]}]}}]}]};d["include/dynamic_grass.glslv"]=
{$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"DYNAMIC_GRASS_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"DYNAMIC_GRASS_GLSLV",aa:[""]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"DYNAMIC_GRASS",aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"GRASS_TEXTURE_SIZE",aa:["1024.0"]},{$:"cond",da:[{$:"if",ga:["DYNAMIC_GRASS"],ha:{$:"grp",da:[{$:"include",oa:"math.glslv"},{$:"include",oa:"to_world.glslv"},{$:"txt",aa:"vec2 lp ( vec3 O , float lm , vec2 ln ) { vec2 lo = vec2 ( ( O . x - ln . x ) / lm , ( O . y - ln . y ) / lm ) ; return fract ( lo ) ; } vec2 lq ( vec2 gT , float lm , vec2 ln ) { return vec2 ( gT . x * lm , gT . y * lm ) + ln ; } au lr ( ) { return au ( vec3 ( - 10000.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) , vec3 ( 0.0 ) ) ; }".split(" ")},
{$:"cond",da:[{$:"if",ga:["GLSL3"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 lB ( sampler2D ls , vec2 lt ) { float lu = 1.0 / GRASS_TEXTURE_SIZE ; vec4 lv = GLSL_TEXTURE ( ls , lt ) ; vec4 lw = GLSL_TEXTURE ( ls , lt + vec2 ( lu , 0.0 ) ) ; vec4 lx = GLSL_TEXTURE ( ls , lt + vec2 ( 0.0 , lu ) ) ; vec4 ly = GLSL_TEXTURE ( ls , lt + vec2 ( lu , lu ) ) ; float a = fract ( lt . x * GRASS_TEXTURE_SIZE ) ; vec4 lz = mix ( lv , lw , a ) ; vec4 lA = mix ( lx , ly , a ) ; float b = fract ( lt . y * GRASS_TEXTURE_SIZE ) ; return mix ( lz , lA , b ) ; }".split(" ")}]}}]},
{$:"txt",aa:"au aZ ( vec3 O , vec3 V , vec3 lC , vec3 W , vec3 U , vec3 ao , PRECISION sampler2D lD , sampler2D lE , vec3 lF , float lG , vec3 lH , vec4 lI , mat3 N , mat3 Z ) { vec3 lJ = T ( lI , vec3 ( 0.0 , 0.0 , - 1.0 ) ) ; float lK = - lJ . x ; float lL = lJ . y ; vec2 ln = vec2 ( lH . x - lG * ( 1.0 + lK ) / 2.0 , lH . y - lG * ( 1.0 - lL ) / 2.0 ) ; vec2 lM = lp ( ao , lG , ln ) ; float lN = lG / 2.0 ; vec2 lO = abs ( lq ( lM - vec2 ( 0.5 ) , lG , vec2 ( 0.0 ) ) ) ; float lP = lN * ( 1.0 + sqrt ( 2.0 ) ) / 2.0 ; if ( length ( lO ) > lP ) return lr ( ) ; float lQ = lG / lF . z ; vec2 lR = ( lM - vec2 ( 0.5 ) ) * lQ + vec2 ( 0.5 ) ; vec3 lS = lJ * ( lG / lF . z - 1.0 ) / 2.0 ; lR . x += lS . x ; lR . y += lS . y ; vec4 lT = GLSL_TEXTURE ( lE , lR ) ; float hG = lT . r ; if ( hG < u_scale_threshold ) return lr ( ) ; float lU = lF . y - lF . x ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["GLSL3"],ha:{$:"grp",da:[{$:"txt",aa:"float ci = lF . y - ( lB ( lD , lR ) ) . r * lU ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float ci = lF . y - ( GLSL_TEXTURE ( lD , lR ) ) . r * lU ;".split(" ")}]}}]},{$:"txt",aa:"vec2 lV = O . xy - ao . xy ; ao . xy = lq ( lM , lG , ln ) ; ao . z = ci ; O . xy = ao . xy + lV ; O . z *= hG ; O . z += ci ; vec3 aQ = lT . gba ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD"],ha:{$:"grp",da:[{$:"txt",aa:"O -= ao ; mat3 lW = as ( lH , ao , N , Z ) ; au aw = av ( O , ao , V , lC , W , U , lW ) ; aw . ao = ao ; aw . aQ = aQ ; return lX ( aw ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return lX ( au ( O , ao , V , lC , W , U , aQ ) ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]}}]}]};d["include/environment.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"ENVIRONMENT_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"ENVIRONMENT_GLSLF",aa:[""]},{$:"var",ba:"USE_ENVIRONMENT_LIGHT",aa:["0"]},{$:"var",ba:"SKY_COLOR",aa:["0"]},{$:"var",ba:"SKY_TEXTURE",aa:["0"]},{$:"txt",aa:"vec3 cz ( vec3 U ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_ENVIRONMENT_LIGHT"],
ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["SKY_TEXTURE"],ha:{$:"grp",da:[{$:"txt",aa:"return GLSL_TEXTURE_CUBE ( u_sky_texture , U ) . rgb ;".split(" ")}]}},{$:"elif",ga:["SKY_COLOR"],ha:{$:"grp",da:[{$:"txt",aa:"float lY = 0.5 * U . z + 0.5 ; return mix ( u_horizon_color , u_zenith_color , lY ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return vec3 ( 1.0 ) ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return vec3 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]};
d["include/fog.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"FOG_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"FOG_GLSLF",aa:[""]},{$:"var",ba:"USE_FOG",aa:["0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"FOG_TYPE",aa:["QUADRATIC"]},{$:"var",ba:"PROCEDURAL_FOG",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"txt",aa:"void mc ( inout vec3 aQ , in float lZ , in float ci , in vec4 l_ ) { float ma = clamp ( ( lZ - u_fog_params . z ) / u_fog_params . y , 0.0 , 1.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FOG_TYPE","QUADRATIC",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["ma","*=","ma",";"]}]}},{$:"elif",ga:["FOG_TYPE","LINEAR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[]}},{$:"elif",ga:["FOG_TYPE","INVERSE_QUADRATIC",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"ma = sqrt ( ma ) ;".split(" ")}]}}]},{$:"txt",aa:"if ( u_fog_params . w > 0.0 ) { if ( ci > u_fog_params . w ) ma = 0.0 ; else { float mb = ( u_fog_params . w - max ( ci , 0.0 ) ) / u_fog_params . w ; ma *= mb * mb ; } } l_ . a = 1.0 - ( 1.0 - ma ) * ( 1.0 - u_fog_params . x ) ; aQ = mix ( aQ , l_ . rgb , l_ . a ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 mh ( in mat4 md , in vec3 D ) { vec3 me = mix ( md [ 0 ] . rgb , md [ 1 ] . rgb , ( D . x + 1.0 ) / 2.0 ) ; vec3 mf = mix ( md [ 2 ] . rgb , md [ 3 ] . rgb , ( D . y + 1.0 ) / 2.0 ) ; vec3 mg = vec3 ( md [ 0 ] . a , md [ 1 ] . a , md [ 2 ] . a ) ; vec3 aQ = mix ( me , mf , abs ( D . y ) ) ; aQ = mix ( aQ , mg , abs ( D . z ) ) ; bC ( aQ ) ; return aQ ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],ha:{$:"grp",
da:[{$:"txt",aa:"void mj ( inout float mi ) { mi -= 0.5 ; mi = 4.0 * ( mi * mi * mi ) + 0.5 ; } void mp ( inout vec3 aQ , in float lZ , in vec3 D , in float eC , in vec4 mk , in float fl ) { float ml = max ( D . z , 0.0 ) ; float mm = max ( lZ - max ( eC / ml , 0.0 ) , 0.0 ) ; float mn = mk . w * mm ; vec3 eD = vec3 ( 0.0 , 0.02 , 0.05 ) ; vec3 mo = mk . rgb ; mn = min ( mn , 1.0 ) ; mj ( mn ) ; mn *= clamp ( 2.0 - fl , 0.0 , 1.0 ) ; vec3 eE = mix ( mo , eD , min ( ml , 1.0 ) ) ; eC = clamp ( - eC * 0.03 , 0.0 , 0.8 ) ; eE *= 1.0 - eC ; aQ = mix ( aQ , eE , mn ) ; }".split(" ")}]}}]},
{$:"txt",aa:"void bR ( inout vec3 aQ , float lZ , vec3 D , float bO ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_FOG"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["PROCEDURAL_FOG"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 md = mh ( u_cube_fog , D ) ; vec4 eE = vec4 ( md , u_fog_color_density . a ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec4","eE","=","u_fog_color_density",";"]}]}}]},{$:"txt",aa:"mc ( aQ , lZ , h . z , eE ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS"],
ha:{$:"grp",da:[{$:"txt",aa:"mp ( aQ , lZ , D , u_cam_water_depth , u_underwater_fog_color_density , bO ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]};d["include/fxaa.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"FXAA_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GLSLF",aa:[""]},{$:"var",ba:"FXAA_BLEND4WEB",aa:["1"]},{$:"var",ba:"FXAA_QUALITY_P12",aa:["0.0"]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_PS3",ha:{$:"grp",da:[{$:"define",ba:"FXAA_PS3",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_360",
ha:{$:"grp",da:[{$:"define",ba:"FXAA_360",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_360_OPT",ha:{$:"grp",da:[{$:"define",ba:"FXAA_360_OPT",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_PC",ha:{$:"grp",da:[{$:"define",ba:"FXAA_PC",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_PC_CONSOLE",ha:{$:"grp",da:[{$:"define",ba:"FXAA_PC_CONSOLE",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_GLSL_120",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GLSL_120",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",
ba:"FXAA_GLSL_130",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GLSL_130",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_HLSL_3",ha:{$:"grp",da:[{$:"define",ba:"FXAA_HLSL_3",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_HLSL_4",ha:{$:"grp",da:[{$:"define",ba:"FXAA_HLSL_4",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_HLSL_5",ha:{$:"grp",da:[{$:"define",ba:"FXAA_HLSL_5",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_GREEN_AS_LUMA",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GREEN_AS_LUMA",aa:["0"]}]}}]},
{$:"cond",da:[{$:"ifndef",ba:"FXAA_EARLY_EXIT",ha:{$:"grp",da:[{$:"define",ba:"FXAA_EARLY_EXIT",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_DISCARD",ha:{$:"grp",da:[{$:"define",ba:"FXAA_DISCARD",aa:["0"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_FAST_PIXEL_OFFSET",ha:{$:"grp",da:[{$:"cond",da:[{$:"ifdef",ba:"GL_EXT_gpu_shader4",ha:{$:"grp",da:[{$:"define",ba:"FXAA_FAST_PIXEL_OFFSET",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifdef",ba:"GL_NV_gpu_shader5",ha:{$:"grp",da:[{$:"define",ba:"FXAA_FAST_PIXEL_OFFSET",
aa:["1"]}]}}]},{$:"cond",da:[{$:"ifdef",ba:"GL_ARB_gpu_shader5",ha:{$:"grp",da:[{$:"define",ba:"FXAA_FAST_PIXEL_OFFSET",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_FAST_PIXEL_OFFSET",ha:{$:"grp",da:[{$:"define",ba:"FXAA_FAST_PIXEL_OFFSET",aa:["0"]}]}}]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_GATHER4_ALPHA",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["FXAA_HLSL_5",1,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_GATHER4_ALPHA",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifdef",ba:"GL_ARB_gpu_shader5",
ha:{$:"grp",da:[{$:"define",ba:"FXAA_GATHER4_ALPHA",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifdef",ba:"GL_NV_gpu_shader5",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GATHER4_ALPHA",aa:["1"]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_GATHER4_ALPHA",ha:{$:"grp",da:[{$:"define",ba:"FXAA_GATHER4_ALPHA",aa:["0"]}]}}]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:[1],ha:{$:"grp",da:[{$:"define",ba:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",aa:["8.0"]}]}}]},{$:"cond",
da:[{$:"if",ga:[0],ha:{$:"grp",da:[{$:"define",ba:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",aa:["4.0"]}]}}]},{$:"cond",da:[{$:"if",ga:[0],ha:{$:"grp",da:[{$:"define",ba:"FXAA_CONSOLE_PS3_EDGE_SHARPNESS",aa:["2.0"]}]}}]}]}}]},{$:"cond",da:[{$:"ifndef",ba:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:[1],ha:{$:"grp",da:[{$:"define",ba:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",aa:["0.125"]}]}},{$:"else",ha:{$:"grp",da:[{$:"define",ba:"FXAA_CONSOLE_PS3_EDGE_THRESHOLD",aa:["0.25"]}]}}]}]}}]},
{$:"cond",da:[{$:"ifndef",ba:"FXAA_QUALITY_PRESET",ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PRESET",aa:["12"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",10,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["3"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["3.0"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",11,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",
aa:["4"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["3.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",12,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["5"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["4.0"]},
{$:"define",ba:"FXAA_QUALITY_P4",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",13,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["6"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",
14,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["7"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",15,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",
ba:"FXAA_QUALITY_PS",aa:["8"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["12.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",20,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",
aa:["3"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",21,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["4"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",
22,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["5"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",23,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["6"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",
ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",24,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["7"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",
aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["3.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",25,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["8"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},
{$:"define",ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",26,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["9"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",
ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P8",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",27,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["10"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",
aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P8",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P9",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",28,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["11"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},
{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P8",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P9",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P10",aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",29,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["12"]},{$:"define",
ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P8",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P9",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P10",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P11",
aa:["8.0"]}]}}]},{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PRESET",39,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"define",ba:"FXAA_QUALITY_PS",aa:["12"]},{$:"define",ba:"FXAA_QUALITY_P0",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P1",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P2",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P3",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P4",aa:["1.0"]},{$:"define",ba:"FXAA_QUALITY_P5",aa:["1.5"]},{$:"define",ba:"FXAA_QUALITY_P6",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P7",aa:["2.0"]},
{$:"define",ba:"FXAA_QUALITY_P8",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P9",aa:["2.0"]},{$:"define",ba:"FXAA_QUALITY_P10",aa:["4.0"]},{$:"define",ba:"FXAA_QUALITY_P11",aa:["8.0"]}]}}]},{$:"include",oa:"color_util.glslf"},{$:"txt",aa:"float mq ( float x ) { return clamp ( x , 0.0 , 1.0 ) ; }".split(" ")},{$:"cond",da:[{$:"if",ga:["FXAA_BLEND4WEB",1,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 mr ( sampler2D t , vec2 p ) { return GLSL_TEXTURE ( t , p ) ; } vec4 mt ( sampler2D t , vec2 p , vec2 ms , vec2 r ) { return GLSL_TEXTURE ( t , p + ( ms * r ) ) ; }".split(" ")}]}}]},
{$:"txt",aa:"vec4 gv ( vec2 fn , sampler2D ia , vec2 mu , float mv , float mw , float mx ) { vec2 my ; my . x = fn . x ; my . y = fn . y ;".split(" ")},{$:"cond",da:[{$:"if",ga:["FXAA_GATHER4_ALPHA",1,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 mz = mr ( ia , my ) ; float gf = ge ( mz ) ; float mA = ge ( mt ( ia , my , vec2 ( 0 , 1 ) , mu . xy ) ) ; float mB = ge ( mt ( ia , my , vec2 ( 1 , 0 ) , mu . xy ) ) ; float mC = ge ( mt ( ia , my , vec2 ( 0 , - 1 ) , mu . xy ) ) ; float mD = ge ( mt ( ia , my , vec2 ( - 1 , 0 ) , mu . xy ) ) ;".split(" ")}]}}]},
{$:"txt",aa:"float mE = max ( mA , gf ) ; float mF = min ( mA , gf ) ; float mG = max ( mB , mE ) ; float mH = min ( mB , mF ) ; float mI = max ( mC , mD ) ; float mJ = min ( mC , mD ) ; float mK = max ( mI , mG ) ; float mL = min ( mJ , mH ) ; float mM = mK * mw ; float mN = mK - mL ; float mO = max ( mx , mM ) ; bool mP = mN < mO ; if ( mP ) return mz ;".split(" ")},{$:"cond",da:[{$:"if",ga:["FXAA_GATHER4_ALPHA",0,{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float gh = ge ( mt ( ia , my , vec2 ( - 1 , - 1 ) , mu . xy ) ) ; float gk = ge ( mt ( ia , my , vec2 ( 1 , 1 ) , mu . xy ) ) ; float gi = ge ( mt ( ia , my , vec2 ( 1 , - 1 ) , mu . xy ) ) ; float gj = ge ( mt ( ia , my , vec2 ( - 1 , 1 ) , mu . xy ) ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[]}}]},{$:"txt",aa:"float mQ = mC + mA ; float mR = mD + mB ; float mS = 1.0 / mN ; float mT = mQ + mR ; float mU = ( - 2.0 * gf ) + mQ ; float mV = ( - 2.0 * gf ) + mR ; float mW = gi + gk ; float mX = gh + gi ; float mY = ( - 2.0 * mB ) + mW ; float mZ = ( - 2.0 * mC ) + mX ; float m_ = gh + gj ; float na = gj + gk ; float nb = ( abs ( mU ) * 2.0 ) + abs ( mY ) ; float nc = ( abs ( mV ) * 2.0 ) + abs ( mZ ) ; float nd = ( - 2.0 * mD ) + m_ ; float ne = ( - 2.0 * mA ) + na ; float nf = abs ( nd ) + nb ; float ng = abs ( ne ) + nc ; float nh = m_ + mW ; float ni = mu . x ; bool nj = nf >= ng ; float nk = mT * 2.0 + nh ; if ( ! nj ) mC = mD ; if ( ! nj ) mA = mB ; if ( nj ) ni = mu . y ; float nl = ( nk * ( 1.0 / 12.0 ) ) - gf ; float nm = mC - gf ; float nn = mA - gf ; float no = mC + gf ; float np = mA + gf ; bool nq = abs ( nm ) >= abs ( nn ) ; float nr = max ( abs ( nm ) , abs ( nn ) ) ; if ( nq ) ni = - ni ; float ns = mq ( abs ( nl ) * mS ) ; vec2 nt ; nt . x = my . x ; nt . y = my . y ; vec2 nu ; nu . x = ( ! nj ) ? 0.0 : mu . x ; nu . y = ( nj ) ? 0.0 : mu . y ; if ( ! nj ) nt . x += ni * 0.5 ; if ( nj ) nt . y += ni * 0.5 ; vec2 nv ; nv . x = nt . x - nu . x * FXAA_QUALITY_P0 ; nv . y = nt . y - nu . y * FXAA_QUALITY_P0 ; vec2 nw ; nw . x = nt . x + nu . x * FXAA_QUALITY_P0 ; nw . y = nt . y + nu . y * FXAA_QUALITY_P0 ; float nx = ( ( - 2.0 ) * ns ) + 3.0 ; float ny = ge ( mr ( ia , nv ) ) ; float nz = ns * ns ; float nA = ge ( mr ( ia , nw ) ) ; if ( ! nq ) no = np ; float nB = nr * 1.0 / 4.0 ; float nC = gf - no * 0.5 ; float nD = nx * nz ; bool nE = nC < 0.0 ; ny -= no * 0.5 ; nA -= no * 0.5 ; bool nF = abs ( ny ) >= nB ; bool nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P1 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P1 ; bool nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P1 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P1 ; if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P2 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P2 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P2 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P2 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",3,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P3 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P3 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P3 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P3 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",4,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P4 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P4 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P4 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P4 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",5,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P5 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P5 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P5 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P5 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",6,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P6 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P6 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P6 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P6 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",7,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P7 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P7 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P7 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P7 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",8,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P8 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P8 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P8 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P8 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",9,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P9 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P9 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P9 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P9 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",10,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P10 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P10 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P10 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P10 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",11,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P11 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P11 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P11 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P11 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_QUALITY_PS",12,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( nH ) { if ( ! nF ) ny = ge ( mr ( ia , nv . xy ) ) ; if ( ! nG ) nA = ge ( mr ( ia , nw . xy ) ) ; if ( ! nF ) ny = ny - no * 0.5 ; if ( ! nG ) nA = nA - no * 0.5 ; nF = abs ( ny ) >= nB ; nG = abs ( nA ) >= nB ; if ( ! nF ) nv . x -= nu . x * FXAA_QUALITY_P12 ; if ( ! nF ) nv . y -= nu . y * FXAA_QUALITY_P12 ; nH = ( ! nF ) || ( ! nG ) ; if ( ! nG ) nw . x += nu . x * FXAA_QUALITY_P12 ; if ( ! nG ) nw . y += nu . y * FXAA_QUALITY_P12 ; }".split(" ")}]}}]},
{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:"} float nI = my . x - nv . x ; float nJ = nw . x - my . x ; if ( ! nj ) nI = my . y - nv . y ; if ( ! nj ) nJ = nw . y - my . y ; bool nK = ( ny < 0.0 ) != nE ; float nL = ( nJ + nI ) ; bool nM = ( nA < 0.0 ) != nE ; float nN = 1.0 / nL ; bool nO = nI < nJ ; float nP = min ( nI , nJ ) ; bool nQ = nO ? nK : nM ; float nR = nD * nD ; float nS = ( nP * ( - nN ) ) + 0.5 ; float nT = nR * mv ; float nU = nQ ? nS : 0.0 ; float nV = max ( nU , nT ) ; if ( ! nj ) my . x += nV * ni ; if ( nj ) my . y += nV * ni ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["FXAA_DISCARD",1,{$:"equal_expr",ia:2},"FXAA_BLEND4WEB",1,{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return mr ( ia , my ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return vec4 ( mr ( ia , my ) . xyz , gf ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]};d["include/halo_color.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"HALO_COLOR_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"HALO_COLOR_GLSLF",aa:[""]},{$:"var",ba:"NUM_RINGS",
aa:["0"]},{$:"var",ba:"NUM_LINES",aa:["0"]},{$:"var",ba:"NUM_STARS",aa:["0"]},{$:"var",ba:"SKY_STARS",aa:["0"]},{$:"var",ba:"WAVES_HEIGHT",aa:["1.0"]},{$:"var",ba:"WATER_EFFECTS",aa:["0"]},{$:"var",ba:"DISABLE_FOG",aa:["0"]},{$:"cond",da:[{$:"if",ga:["NUM_RINGS","NUM_LINES",{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const int nW = NUM_RINGS ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"const int nW = NUM_LINES ;".split(" ")}]}}]},{$:"txt",aa:"float nX ( float x ) { return x - floor ( x * ( 1.0 / 0.01 ) ) * 0.01 ; }".split(" ")},
{$:"cond",da:[{$:"if",ga:["NUM_RINGS"],ha:{$:"grp",da:[{$:"txt",aa:"void od ( inout float nY , in float nZ [ nW ] , in float n_ ) { for ( int a = 0 ; a < NUM_RINGS ; a ++ ) { float oa = 40.0 * nZ [ a ] ; float ob = 300.0 * ( nX ( oa ) - 0.005 ) ; float oc = oa ; float ma = abs ( oc * ( u_halo_size * ob - n_ ) ) ; nY += 1.0 - min ( ma , 1.0 ) ; } }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_LINES"],ha:{$:"grp",da:[{$:"txt",aa:"void oi ( inout float oe , in float nZ [ nW ] , in float aM ) { for ( int a = 0 ; a < NUM_LINES ; a ++ ) { float of = nZ [ a ] ; float og = of ; float oh = 1000.0 * ( nX ( of ) - 0.005 ) ; float ma = 20.0 * abs ( og * A . x + oh * A . y ) ; oe += 1.0 - min ( ma , 1.0 ) ; } oe *= aM ; }".split(" ")}]}}]},
{$:"txt",aa:"void om ( inout float aM , in vec2 b_ ) { float oj , bK ; bK = atan ( b_ . y , b_ . x ) ; bK *= ( 1.0 + 0.25 * float ( NUM_STARS ) ) ; float ok = cos ( bK ) ; float ol = sin ( bK ) ; bK = ( ok * b_ . x + ol * b_ . y ) * ( ok * b_ . y - ol * b_ . x ) ; oj = abs ( bK ) ; if ( oj < 1.0 ) { oj = ( 0.01 * u_halo_size ) / ( oj ) ; aM *= sqrt ( min ( oj , 1.0 ) ) ; } } vec4 bh ( ) { float aM = ( A . x * A . x + A . y * A . y ) ; float n_ = sqrt ( aM ) ; aM = max ( 1.0 - aM , 0.0 ) ; aM = pow ( aM , u_halo_hardness ) ; float L = u_diffuse_color . a ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NUM_RINGS","NUM_LINES",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float nZ [ nW ] ; for ( int cl = 0 ; cl < nW ; cl ++ ) { nZ [ cl ] = fract ( bf / float ( cl + 1 ) ) - 1.0 ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_RINGS"],ha:{$:"grp",da:[{$:"txt",aa:"float nY = 0.0 ; od ( nY , nZ , n_ ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_LINES"],ha:{$:"grp",da:[{$:"txt",aa:"float oe = 0.0 ; oi ( oe , nZ , aM ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",
ga:["NUM_STARS"],ha:{$:"grp",da:[{$:"txt",aa:"om ( aM , A ) ;".split(" ")}]}}]},{$:"txt",aa:"aM *= L ; vec3 aQ = u_diffuse_color . rgb ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_RINGS"],ha:{$:"grp",da:[{$:"txt",aa:"nY *= aM ; aQ += u_halo_rings_color * nY ; aM += nY ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_LINES"],ha:{$:"grp",da:[{$:"txt",aa:"oe *= L ; aQ += u_halo_lines_color * oe ; aM += oe ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["SKY_STARS"],ha:{$:"grp",da:[{$:"txt",aa:"aM *= max ( 1.0 - 2.0 * u_sun_intensity . x , 0.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WATER_EFFECTS","DISABLE_FOG",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float kZ = u_halo_stars_blend * ( be . y - u_halo_stars_height ) ; aM *= clamp ( kZ , 0.0 , 1.0 ) ; aM *= min ( u_cam_water_depth + 2.0 * WAVES_HEIGHT , 1.0 ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"vec4 on = vec4 ( aQ , aM ) ; return on ; }".split(" ")}]}}]}]};d["include/lighting_nodes.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"LIGHTING_NODES_GLSLF",
ha:{$:"grp",da:[{$:"define",ba:"LIGHTING_NODES_GLSLF",aa:[""]},{$:"include",oa:"std.glsl"},{$:"node",ba:"LIGHTING_BEGIN",ma:[],la:[{$:"node_out",ba:"oB",fa:["vec3"],ea:!1},{$:"node_out",ba:"oC",fa:["vec3"],ea:!1},{$:"node_out",ba:"oD",fa:["vec3"],ea:!1},{$:"node_out",ba:"oE",fa:["vec3"],ea:!0},{$:"node_out",ba:"oF",fa:["vec3"],ea:!0},{$:"node_out",ba:"oG",fa:["vec2"],ea:!0},{$:"node_out",ba:"oH",fa:["vec2"],ea:!0},{$:"node_out",ba:"oI",fa:["vec4"],ea:!0},{$:"node_out",ba:"oJ",fa:["float"],ea:!0},
{$:"node_out",ba:"oK",fa:["vec4"],ea:!0}],ja:[{$:"txt",aa:"oB = oo ; oC = op ; oD = oq ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oE"],ja:[{$:"txt",aa:["oE","=","or",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oF"],ja:[{$:"txt",aa:["oF","=","ot",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oH"],ja:[{$:"txt",aa:["oH","=","ov",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oG"],ja:[{$:"txt",aa:["oG","=","ow",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oI"],
ja:[{$:"txt",aa:["oI","=","ox",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oJ"],ja:[{$:"txt",aa:["oJ","=","oy",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_oK"],ja:[{$:"txt",aa:["oK","=","oz",";"]}]}]}]},{$:"node",ba:"LIGHTING_AMBIENT",ma:[],la:[{$:"node_in",ba:"oL",fa:["vec3"],ea:!1},{$:"node_in",ba:"oM",fa:["vec3"],ea:!1},{$:"node_in",ba:"oN",fa:["vec3"],ea:!1},{$:"node_out",ba:"oO",fa:["vec4"],ea:!1},{$:"node_out",ba:"oP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"oO = vec4 ( oL + oN * oM , _0_0 ) ; oP = vec3 ( _0_0 ) ;".split(" ")}]},
{$:"node",ba:"LIGHTING_LAMP",ma:[{$:"node_var",ba:"LAMP_TYPE",aa:["HEMI"]},{$:"node_var",ba:"LAMP_IND",aa:["0"]},{$:"node_var",ba:"LAMP_SPOT_SIZE",aa:["0.8"]},{$:"node_var",ba:"LAMP_SPOT_BLEND",aa:["0.03"]},{$:"node_var",ba:"LAMP_LIGHT_DIST",aa:["30.0"]},{$:"node_var",ba:"LAMP_SHADOW_MAP_IND",aa:["-","1"]},{$:"node_var",ba:"LAMP_USE_SPHERE",aa:["0"]}],la:[{$:"node_in",ba:"oQ",fa:["vec4"],ea:!1},{$:"node_out",ba:"oR",fa:["vec3"],ea:!1},{$:"node_out",ba:"oS",fa:["vec2"],ea:!1},{$:"node_out",ba:"oT",
fa:["vec3"],ea:!1},{$:"node_out",ba:"oU",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"oS = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","HEMI",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:["oU","=","_0_5",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["oU","=","_0_0",";"]}]}]},{$:"txt",aa:"oT = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_SHADOW_MAP_IND",
1,{$:"negative_expr",ia:1},{$:"non_equal_expr",ia:2}],ja:[{$:"txt",aa:"oT *= oQ [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2},"LAMP_TYPE","POINT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"vec3 oV = u_light_positions [ LAMP_IND ] . xyz ; oR = oV - os ; float aM = length ( oR ) ; float oW = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oR = normalize ( oR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"vec3 oX = u_light_directions [ LAMP_IND ] ; float oY = dot ( oR , oX ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oW *= oY ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_USE_SPHERE"],ja:[{$:"txt",aa:"oW *= max ( LAMP_LIGHT_DIST - aM , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]},{$:"txt",aa:["oT","*=","oW",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"oR = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},
{$:"node",ba:"DIFFUSE_FRESNEL",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"oZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"o_",fa:["vec2"],ea:!1},{$:"node_in",ba:"pa",fa:["vec3"],ea:!1},{$:"node_in",ba:"pb",fa:["float"],ea:!1},{$:"node_in",ba:"pc",fa:["vec2"],ea:!1},{$:"node_out",ba:"pd",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pe = cross ( oZ , B . xyz ) ; pa = cross ( pe , B . xyz ) ; pa = - normalize ( pa ) ;".split(" ")}]}]},
{$:"txt",aa:"pd = _0_0 ; if ( o_ . r != _0_0 ) { float pf = ( _1_0 - pb ) * dot ( pa , oZ ) + pb ; if ( pc [ 0 ] == _0_0 ) { pd = _1_0 ; } else { float t = _1_0 + abs ( pf ) ; t = pc [ 1 ] + ( _1_0 - pc [ 1 ] ) * pow ( t , pc [ 0 ] ) ; pd = clamp ( t , _0_0 , _1_0 ) ; } pd = max ( pd , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_LAMBERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pg",fa:["vec3"],ea:!1},{$:"node_in",ba:"ph",fa:["vec2"],ea:!1},{$:"node_in",ba:"pi",
fa:["vec3"],ea:!1},{$:"node_in",ba:"pj",fa:["float"],ea:!1},{$:"node_out",ba:"pk",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pe = cross ( pg , B . xyz ) ; pi = cross ( pe , B . xyz ) ; pi = - normalize ( pi ) ;".split(" ")}]}]},{$:"txt",aa:"pk = _0_0 ; if ( ph . r != _0_0 ) { float pf = ( _1_0 - pj ) * dot ( pi , pg ) + pj ; pk = max ( pf , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_OREN_NAYAR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",
aa:["0"]}],la:[{$:"node_in",ba:"pl",fa:["vec3"],ea:!1},{$:"node_in",ba:"pm",fa:["vec2"],ea:!1},{$:"node_in",ba:"pn",fa:["vec3"],ea:!1},{$:"node_in",ba:"po",fa:["float"],ea:!1},{$:"node_in",ba:"pr",fa:["vec2"],ea:!1},{$:"node_out",ba:"pu",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pe = cross ( pl , B . xyz ) ; pn = cross ( pe , B . xyz ) ; pn = - normalize ( pn ) ;".split(" ")}]}]},{$:"txt",aa:"pu = _0_0 ; if ( pm . r != _0_0 ) { float pf = ( _1_0 - po ) * dot ( pn , pl ) + po ; if ( pr [ 0 ] > _0_0 ) { float pv = max ( dot ( pn , ou ) , _0_0 ) ; float pw = pr [ 0 ] * pr [ 0 ] ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = pl - pf * pn ; vec3 py = ou - pv * pn ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) pu = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; pu = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else pu = pf ; pu = max ( pu , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"DIFFUSE_MINNAERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pD",fa:["vec3"],ea:!1},{$:"node_in",ba:"pE",fa:["vec2"],ea:!1},{$:"node_in",ba:"pF",fa:["vec3"],ea:!1},{$:"node_in",ba:"pG",fa:["float"],ea:!1},{$:"node_in",ba:"pH",fa:["vec2"],ea:!1},{$:"node_out",ba:"pI",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pe = cross ( pD , B . xyz ) ; pF = cross ( pe , B . xyz ) ; pF = - normalize ( pF ) ;".split(" ")}]}]},
{$:"txt",aa:"pI = _0_0 ; if ( pE . r != _0_0 ) { float pf = ( _1_0 - pG ) * dot ( pF , pD ) + pG ; float pv = max ( dot ( pF , ou ) , _0_0 ) ; if ( pH [ 0 ] <= _1_0 ) pI = pf * pow ( max ( pv * pf , 0.1 ) , pH [ 0 ] - _1_0 ) ; else pI = pf * pow ( 1.0001 - pv , pH [ 0 ] - _1_0 ) ; pI = max ( pI , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"pK",fa:["vec2"],ea:!1},{$:"node_in",
ba:"pL",fa:["vec3"],ea:!1},{$:"node_in",ba:"pM",fa:["float"],ea:!1},{$:"node_in",ba:"pN",fa:["vec2"],ea:!1},{$:"node_out",ba:"pO",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pe = cross ( pJ , B . xyz ) ; pL = cross ( pe , B . xyz ) ; pL = - normalize ( pL ) ;".split(" ")}]}]},{$:"txt",aa:"pO = _0_0 ; if ( pK . r != _0_0 ) { float pf = ( _1_0 - pM ) * dot ( pL , pJ ) + pM ; float pP = acos ( pf ) ; if ( pP < pN [ 0 ] ) pO = _1_0 ; else if ( pP > ( pN [ 0 ] + pN [ 1 ] ) || pN [ 1 ] == _0_0 ) pO = _0_0 ; else pO = _1_0 - ( ( pP - pN [ 0 ] ) / pN [ 1 ] ) ; pO = max ( pO , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"SPECULAR_PHONG",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"pR",fa:["vec2"],ea:!1},{$:"node_in",ba:"pS",fa:["vec3"],ea:!1},{$:"node_in",ba:"pT",fa:["float"],ea:!1},{$:"node_in",ba:"pU",fa:["vec2"],ea:!1},{$:"node_out",ba:"pV",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"pV = _0_0 ; if ( pR . g != _0_0 ) { vec3 pW = normalize ( pQ + ou ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",
aa:"if ( pT == _0_0 ) { pV = dot ( B . xyz , pW ) ; pV = sqrt ( _1_0 - pV * pV ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"pV = ( _1_0 - pT ) * max ( dot ( pS , pW ) , _0_0 ) + pT ;".split(" ")}]}]},{$:"txt",aa:"pV = pow ( pV , pU [ 0 ] ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_COOKTORR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pX",fa:["vec3"],ea:!1},{$:"node_in",ba:"pY",fa:["vec2"],ea:!1},{$:"node_in",ba:"pZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"p_",fa:["float"],
ea:!1},{$:"node_in",ba:"qa",fa:["vec2"],ea:!1},{$:"node_out",ba:"qb",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qb = _0_0 ; if ( pY . g != _0_0 ) { vec3 pW = normalize ( pX + ou ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"if ( p_ == _0_0 ) { qb = dot ( B . xyz , pW ) ; qb = sqrt ( _1_0 - qb * qb ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"qb = max ( dot ( pZ , pW ) , _0_0 ) ; qb = ( _1_0 - p_ ) * qb + p_ ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float pv = max ( dot ( B . xyz , ou ) , _0_0 ) ; pv = sqrt ( _1_0 - pv * pv ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"float pv = max ( dot ( pZ , ou ) , _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:"qb = pow ( qb , qa [ 0 ] ) ; qb = qb / ( 0.1 + pv ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_WARDISO",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qc",fa:["vec3"],ea:!1},{$:"node_in",ba:"qd",fa:["vec2"],ea:!1},{$:"node_in",ba:"qe",
fa:["vec3"],ea:!1},{$:"node_in",ba:"qf",fa:["float"],ea:!1},{$:"node_in",ba:"qg",fa:["vec2"],ea:!1},{$:"node_out",ba:"qh",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qh = _0_0 ; if ( qd . g != _0_0 ) { vec3 pW = normalize ( qc + ou ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qi = _0_0 ; float pv = _0_0 ; float qj = _0_0 ; if ( qf == _0_0 ) { qi = dot ( B . xyz , pW ) ; pv = dot ( B . xyz , ou ) ; qj = dot ( B . xyz , qc ) ; qi = sqrt ( _1_0 - qi * qi ) ; pv = sqrt ( _1_0 - pv * pv ) ; qj = sqrt ( _1_0 - qj * qj ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qi = max ( dot ( qe , pW ) , 0.01 ) ; float pv = max ( dot ( qe , ou ) , 0.01 ) ; float qj = max ( dot ( qe , qc ) , 0.01 ) ;".split(" ")}]}]},{$:"txt",aa:"float bK = tan ( acos ( qi ) ) ; float L = max ( qg [ 0 ] , 0.01 ) ; qh = qj * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bK * bK ) / ( L * L ) ) / ( sqrt ( pv * qj ) ) ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qk",fa:["vec3"],
ea:!1},{$:"node_in",ba:"ql",fa:["vec2"],ea:!1},{$:"node_in",ba:"qm",fa:["vec3"],ea:!1},{$:"node_in",ba:"qn",fa:["float"],ea:!1},{$:"node_in",ba:"qo",fa:["vec2"],ea:!1},{$:"node_out",ba:"qr",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qr = _0_0 ; if ( ql . g != _0_0 ) { vec3 cj = normalize ( qk + ou ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qu = dot ( cj , B . xyz ) ; float bK = qo [ 0 ] + qo [ 1 ] ; if ( qn == _0_0 ) bK = acos ( sqrt ( _1_0 - qu * qu ) ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float bK = acos ( dot ( cj , qm ) ) ;".split(" ")}]}]},{$:"txt",aa:"if ( bK < qo [ 0 ] ) qr = _1_0 ; else if ( bK >= qo [ 0 ] + qo [ 1 ] || qo [ 1 ] == _0_0 ) qr = _0_0 ; else qr = _1_0 - ( bK - qo [ 0 ] ) / qo [ 1 ] ; }".split(" ")}]},{$:"node",ba:"SPECULAR_BLINN",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qv",fa:["vec3"],ea:!1},{$:"node_in",ba:"qw",fa:["vec2"],ea:!1},{$:"node_in",ba:"qx",fa:["vec3"],ea:!1},{$:"node_in",ba:"qy",fa:["float"],
ea:!1},{$:"node_in",ba:"qz",fa:["vec2"],ea:!1},{$:"node_out",ba:"qA",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"float qB = qz [ 0 ] ; float qC = qz [ 1 ] ; qA = _0_0 ; if ( qw . g != _0_0 ) { if ( qB < 1.0 || qC == _0_0 ) qA = _0_0 ; else { if ( qC < 100.0 ) qC = sqrt ( 1.0 / qC ) ; else qC = 10.0 / qC ; vec3 pW = normalize ( ou + qv ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qi = 0.0 ; if ( qy == _0_0 ) { float qD = dot ( B . xyz , pW ) ; qi = sqrt ( _1_0 - qD * qD ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qi = ( _1_0 - qy ) * max ( dot ( qx , pW ) , _0_0 ) + qy ;".split(" ")}]}]},{$:"txt",aa:"if ( qi < _0_0 ) qA = _0_0 ; else { float pv = max ( dot ( qx , ou ) , 0.01 ) ; float qj = dot ( qx , qv ) ; if ( qj <= 0.01 ) qA = _0_0 ; else { float qE = max ( dot ( ou , pW ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qi * pv ) / qE ; float du = ( 2.0 * qi * qj ) / qE ; float g = min ( min ( a , b ) , du ) ; float p = sqrt ( pow ( qB , 2.0 ) + pow ( qE , 2.0 ) - _1_0 ) ; float mi = pow ( p - qE , 2.0 ) / pow ( p + qE , 2.0 ) * ( _1_0 + pow ( qE * ( p + qE ) - _1_0 , 2.0 ) / pow ( qE * ( p - qE ) + _1_0 , 2.0 ) ) ; float pP = acos ( qi ) ; qA = max ( mi * g * exp ( - pow ( pP , 2.0 ) / ( 2.0 * pow ( qC , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{$:"node",ba:"LIGHTING_APPLY",ma:[],la:[{$:"node_in",ba:"qF",fa:["vec4"],ea:!1},{$:"node_in",ba:"qG",fa:["vec3"],ea:!1},{$:"node_in",ba:"qH",fa:["float"],ea:!1},{$:"node_in",ba:"qI",fa:["float"],ea:!1},{$:"node_in",ba:"qJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"qK",fa:["vec3"],ea:!1},{$:"node_in",ba:"qL",fa:["vec4"],ea:!1},{$:"node_in",ba:"qM",fa:["vec3"],ea:!1},{$:"node_in",ba:"qN",fa:["vec3"],ea:!1},{$:"node_in",ba:"qO",fa:["vec3"],ea:!1},{$:"node_in",ba:"qP",fa:["float"],ea:!1},{$:"node_out",ba:"qQ",
fa:["vec4"],ea:!1},{$:"node_out",ba:"qR",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"qR = qG + qO * qN * qI ; qQ = qF + vec4 ( qO * qM * qH , qI ) ;".split(" ")}]},{$:"node",ba:"LIGHTING_END",ma:[],la:[{$:"node_in",ba:"qS",fa:["vec4"],ea:!1},{$:"node_in",ba:"qT",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"E = qS . rgb ; oA = qT ;".split(" ")}]},{$:"nodes_global"},{$:"txt",aa:"void cK ( vec3 oo , vec3 op , vec3 oq , vec3 or , vec3 os , vec3 ot , vec3 ou , vec2 ov , vec2 ow , vec4 ox , float oy , vec4 oz , out vec3 E , out vec3 oA ) {".split(" ")},
{$:"nodes_main"},{$:"txt",aa:["}"]}]}}]}]};d["include/math.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"MATH_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"MATH_GLSLV",aa:[""]},{$:"var",ba:"EPSILON",aa:["0.000001"]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"USE_POSITION_CLIP",aa:["0"]},{$:"var",ba:"SOFT_PARTICLES",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"txt",aa:"struct au { vec3 O ; vec3 ao ; vec3 V ; vec3 aB ; vec3 W ; vec3 U ; vec3 aQ ; } ; bool qU ( vec3 a , vec3 b ) { return any ( lessThan ( abs ( a - b ) , vec3 ( EPSILON ) ) ) ; } vec3 T ( in vec4 q , in vec3 kQ ) { return kQ + 2.0 * cross ( q . xyz , cross ( q . xyz , kQ ) + q . w * kQ ) ; } vec4 kR ( in vec4 qV ) { return vec4 ( - qV . xyz , qV . w ) ; } vec4 qX ( in vec4 a , in vec4 b ) { vec4 qW ; qW . x = a . x * b . w + a . w * b . x + a . y * b . z - a . z * b . y ; qW . y = a . y * b . w + a . w * b . y + a . z * b . x - a . x * b . z ; qW . z = a . z * b . w + a . w * b . z + a . x * b . y - a . y * b . x ; qW . w = a . w * b . w - a . x * b . x - a . y * b . y - a . z * b . z ; return qW ; } vec4 X ( in vec3 qY , in float qZ ) { vec4 qW ; qZ = qZ * 0.5 ; float s = sin ( qZ ) ; qW . x = s * qY [ 0 ] ; qW . y = s * qY [ 1 ] ; qW . z = s * qY [ 2 ] ; qW . w = cos ( qZ ) ; return qW ; } vec4 rd ( in vec3 bD , in vec3 q_ ) { vec4 qW ; float dz = dot ( q_ , bD ) ; vec3 rc = cross ( q_ , bD ) ; qW . xyz = rc . xyz ; qW . w = 1.0 + dz ; return normalize ( qW ) ; } vec3 rh ( vec4 re , vec4 qV , vec3 rf ) { vec3 qW = rf * re . w ; qW = T ( qV , qW ) ; qW += re . xyz ; return qW ; } vec3 ap ( mat3 ri , vec3 rf ) { vec3 qW = rf * ri [ 1 ] [ 0 ] ; vec4 qV = vec4 ( ri [ 1 ] [ 1 ] , ri [ 1 ] [ 2 ] , ri [ 2 ] [ 0 ] , ri [ 2 ] [ 1 ] ) ; qW = T ( qV , qW ) ; qW += ri [ 0 ] ; return qW ; } vec3 rj ( vec4 re , vec4 qV , vec3 bD ) { vec3 qW = bD * re . w ; qW = T ( qV , qW ) ; return qW ; } vec3 _ ( mat3 ri , vec3 bD ) { vec3 qW = bD * ri [ 1 ] [ 0 ] ; vec4 qV = vec4 ( ri [ 1 ] [ 1 ] , ri [ 1 ] [ 2 ] , ri [ 2 ] [ 0 ] , ri [ 2 ] [ 1 ] ) ; qW = T ( qV , qW ) ; return qW ; } vec3 rk ( vec4 re , vec4 qV , vec3 rf ) { vec3 qW = rf - re . xyz ; qW = T ( kR ( qV ) , qW ) ; qW /= re . w ; return qW ; } vec3 rl ( vec4 re , vec4 qV , vec3 bD ) { return T ( kR ( qV ) , bD ) / re . w ; } mat4 rm ( ) { return mat4 ( _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 rn ( float bK ) { return mat4 ( _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , cos ( bK ) , sin ( bK ) , _0_0 , _0_0 , - sin ( bK ) , cos ( bK ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 ro ( float bK ) { return mat4 ( cos ( bK ) , _0_0 , - sin ( bK ) , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , sin ( bK ) , _0_0 , cos ( bK ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } mat4 rp ( float bK ) { return mat4 ( cos ( bK ) , sin ( bK ) , _0_0 , _0_0 , - sin ( bK ) , cos ( bK ) , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _0_0 , _1_0 ) ; } au lX ( in au kQ ) { return au ( kQ . O , kQ . ao , normalize ( kQ . V ) , normalize ( kQ . aB ) , normalize ( kQ . W ) , normalize ( kQ . U ) , kQ . aQ ) ; }".split(" ")},
{$:"cond",da:[{$:"if",ga:["SOFT_PARTICLES","REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2},"REFRACTIVE","USE_POSITION_CLIP",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 aC ( vec4 f ) { float fT = f . x ; float fU = f . y ; float fV = f . w ; vec3 rq ; rq . x = ( fT + fV ) / 2.0 ; rq . y = ( fU + fV ) / 2.0 ; rq . z = fV ; return rq ; }".split(" ")}]}}]},{$:"txt",aa:"mat3 da ( ) { return mat3 ( _0_0 , _0_0 , _0_0 , _1_0 , _0_0 , _0_0 , _0_0 , _1_0 , _0_0 ) ; } mat4 bc ( mat3 t ) { mat4 rs ; rs [ 0 ] [ 0 ] = ( _1_0 - ( t [ 1 ] [ 2 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) + t [ 2 ] [ 0 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) ) * t [ 1 ] [ 0 ] ; rs [ 0 ] [ 1 ] = ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) + t [ 2 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 0 ] [ 2 ] = ( t [ 1 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) - t [ 2 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 0 ] [ 3 ] = _0_0 ; rs [ 1 ] [ 0 ] = ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) - t [ 2 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 1 ] [ 1 ] = ( _1_0 - ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) + t [ 2 ] [ 0 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) ) ) * t [ 1 ] [ 0 ] ; rs [ 1 ] [ 2 ] = ( t [ 1 ] [ 2 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) + t [ 2 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 1 ] [ 3 ] = _0_0 ; rs [ 2 ] [ 0 ] = ( t [ 1 ] [ 1 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) + t [ 2 ] [ 1 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 2 ] [ 1 ] = ( t [ 1 ] [ 2 ] * ( t [ 2 ] [ 0 ] + t [ 2 ] [ 0 ] ) - t [ 2 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) ) * t [ 1 ] [ 0 ] ; rs [ 2 ] [ 2 ] = ( _1_0 - ( t [ 1 ] [ 1 ] * ( t [ 1 ] [ 1 ] + t [ 1 ] [ 1 ] ) + t [ 1 ] [ 2 ] * ( t [ 1 ] [ 2 ] + t [ 1 ] [ 2 ] ) ) ) * t [ 1 ] [ 0 ] ; rs [ 2 ] [ 3 ] = _0_0 ; rs [ 3 ] [ 0 ] = t [ 0 ] [ 0 ] ; rs [ 3 ] [ 1 ] = t [ 0 ] [ 1 ] ; rs [ 3 ] [ 2 ] = t [ 0 ] [ 2 ] ; rs [ 3 ] [ 3 ] = 1.0 ; return rs ; } mat3 aY ( in mat3 ri , in mat3 rt ) { mat3 qW ; vec3 rf = rt [ 0 ] ; vec4 re = vec4 ( ri [ 0 ] , ri [ 1 ] [ 0 ] ) ; vec4 qV = vec4 ( ri [ 1 ] [ 1 ] , ri [ 1 ] [ 2 ] , ri [ 2 ] [ 0 ] , ri [ 2 ] [ 1 ] ) ; qW [ 0 ] = rh ( re , qV , rf ) ; qW [ 1 ] [ 0 ] = ri [ 1 ] [ 0 ] * rt [ 1 ] [ 0 ] ; qW [ 1 ] [ 1 ] = ri [ 1 ] [ 1 ] * rt [ 2 ] [ 1 ] + ri [ 2 ] [ 1 ] * rt [ 1 ] [ 1 ] + ri [ 1 ] [ 2 ] * rt [ 2 ] [ 0 ] - ri [ 2 ] [ 0 ] * rt [ 1 ] [ 2 ] ; qW [ 1 ] [ 2 ] = ri [ 1 ] [ 2 ] * rt [ 2 ] [ 1 ] + ri [ 2 ] [ 1 ] * rt [ 1 ] [ 2 ] + ri [ 2 ] [ 0 ] * rt [ 1 ] [ 1 ] - ri [ 1 ] [ 1 ] * rt [ 2 ] [ 0 ] ; qW [ 2 ] [ 0 ] = ri [ 2 ] [ 0 ] * rt [ 2 ] [ 1 ] + ri [ 2 ] [ 1 ] * rt [ 2 ] [ 0 ] + ri [ 1 ] [ 1 ] * rt [ 1 ] [ 2 ] - ri [ 1 ] [ 2 ] * rt [ 1 ] [ 1 ] ; qW [ 2 ] [ 1 ] = ri [ 2 ] [ 1 ] * rt [ 2 ] [ 1 ] - ri [ 1 ] [ 1 ] * rt [ 1 ] [ 1 ] - ri [ 1 ] [ 2 ] * rt [ 1 ] [ 2 ] - ri [ 2 ] [ 0 ] * rt [ 2 ] [ 0 ] ; return qW ; } mat3 dd ( in vec4 qV , in mat3 ri ) { mat3 qW ; qW [ 0 ] = ri [ 0 ] ; qW [ 1 ] [ 0 ] = ri [ 1 ] [ 0 ] ; qW [ 1 ] [ 1 ] = qV [ 0 ] ; qW [ 1 ] [ 2 ] = qV [ 1 ] ; qW [ 2 ] [ 0 ] = qV [ 2 ] ; qW [ 2 ] [ 1 ] = qV [ 3 ] ; return qW ; } vec4 R ( in vec4 ru ) { return normalize ( ru ) ; } vec4 R ( in vec4 ru , out float P , out float Q ) { vec4 qV = R ( ru ) ; P = length ( ru ) * M_PI ; Q = sign ( ru [ 3 ] ) ; return R ( ru ) ; }".split(" ")}]}}]}]};
d["include/mirror.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"MIRROR_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"MIRROR_GLSLF",aa:[""]},{$:"var",ba:"REFLECTION_TYPE",aa:["REFL_NONE"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"USE_BSDF_SKY_DIM",aa:[""]},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2},"REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2},"REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2},{$:"logical_or_expr",
ia:3}],ha:{$:"grp",da:[{$:"include",oa:"color_util.glslf"},{$:"include",oa:"math.glslv"},{$:"define",ba:"REFL_BUMP",aa:["0.1"]},{$:"txt",aa:"float rv ( in vec3 D , vec3 eJ , float d_ , float fg ) { vec3 fe = normalize ( eJ + D ) ; float ff = 1.0 - dot ( D , fe ) ; float r = fg + ( 1.0 - fg ) * pow ( ff , d_ ) ; return r ; } void cL ( inout vec3 rw , vec3 D , vec3 U , float rx , mat3 N ) { vec3 eJ = reflect ( - D , U ) ; float d_ = u_fresnel_params [ 0 ] ; float fg = u_fresnel_params [ 1 ] ; float r = 1.0 ; if ( d_ != 0.0 ) r = rv ( D , eJ , d_ , fg ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_TYPE","REFL_CUBE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 eO = GLSL_TEXTURE_CUBE ( u_cube_reflection , eJ ) . xyz ;".split(" ")}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_NONE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 ry = u_refl_plane . xyz * dot ( U , u_refl_plane . xyz ) ; vec3 rz = U - ry ; vec2 rA = _ ( N , rz ) . xy ; vec2 rB = l . xy / l . z ; rB += rA * REFL_BUMP ; vec3 eO = GLSL_TEXTURE ( u_plane_reflection , rB ) . rgb ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 eO = vec3 ( 1.0 ) ; rx = 0.0 ;".split(" ")}]}}]}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_MIRRORMAP",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 eO = GLSL_TEXTURE_CUBE ( u_mirrormap , eJ ) . xyz ;".split(" ")}]}}]},{$:"txt",aa:"bC ( eO . rgb ) ; rw = mix ( rw , eO , rx * r ) ; }".split(" ")}]}},{$:"elif",ga:["REFLECTION_TYPE","REFL_PBR_STANDARD",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 rD ( float ed , vec3 rC , float ec ) { return rC + ( max ( vec3 ( 1.0 - ec ) , rC ) - rC ) * pow ( 1.0 - ed , 5.0 ) ; } vec3 rP ( vec3 rw , vec3 rE , vec3 D , vec3 U , float rF , float rG , mat3 N ) { float rH = max ( dot ( normalize ( U ) , D ) , _0_0 ) ; vec3 eJ = reflect ( - D , U ) ; float ec = sqrt ( rG ) ; vec3 rC = vec3 ( 0.04 ) ; rC = mix ( rC , rE , rF ) ; vec3 rI = rD ( rH , rC , ec ) ; vec3 rJ = rI ; vec3 rK = vec3 ( _1_0 ) - rJ ; rK *= vec3 ( 1.0 - rF ) ; vec3 bt = GLSL_TEXTURE_CUBE ( u_cube_irradiance , U ) . xyz ; vec3 rL = bt * rw ; const float rM = 5.0 ; vec3 ei = GLSL_TEXTURE_CUBE_LOD ( u_cube_r_convolution , eJ , ec * rM ) . rgb ; vec2 rN = GLSL_TEXTURE ( u_brdf , vec2 ( rH , ec ) ) . rg ; vec3 cJ = ei * ( rI * rN . x + rN . y ) ; vec3 rO = ( rK * rL + cJ ) ; return rO ; }".split(" ")}]}},
{$:"elif",ga:["REFLECTION_TYPE","REFL_PBR_SIMPLE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 rD ( float ed , vec3 rC , float ec ) { return rC + ( max ( vec3 ( 1.0 - ec ) , rC ) - rC ) * pow ( 1.0 - ed , 5.0 ) ; } vec3 rP ( vec3 rw , vec3 rE , vec3 D , vec3 U , float rF , float rG , mat3 N ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_BSDF_SKY_DIM"],ha:{$:"grp",da:[{$:"txt",aa:"float rH = max ( dot ( normalize ( U ) , D ) , _0_0 ) ; vec3 eJ = reflect ( - D , U ) ; float rQ = max ( 2.0 / ( rG * rG ) - 2.0 , _0_0 ) ; vec3 rC = vec3 ( 0.04 ) ; rC = mix ( rC , rE , rF ) ; vec3 rI = rD ( rH , rC , sqrt ( rG ) ) ; vec3 rJ = rI ; vec3 rK = vec3 ( _1_0 ) - rJ ; rK *= 1.0 - rF ; vec3 rL = GLSL_TEXTURE_CUBE_LOD ( u_sky_reflection , normalize ( U ) , 100.0 ) . xyz ; bC ( rL ) ; rL *= rw ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["GLSL1"],ha:{$:"grp",da:[{$:"txt",aa:["float","rR","=","u_bsdf_cube_sky_dim",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"float rR = float ( textureSize ( u_sky_reflection , 0 ) . x ) ;".split(" ")}]}}]},{$:"txt",aa:"float rS = log2 ( rR * sqrt ( 3.0 ) ) - _0_5 * log2 ( rQ + _1_0 ) ; vec3 cJ = GLSL_TEXTURE_CUBE_LOD ( u_sky_reflection , eJ , rS ) . xyz ; bC ( cJ ) ; vec3 rO = rK * rL + rJ * cJ ; return rO ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["return",
"rw",";"]}]}}]},{$:"txt",aa:["}"]}]}}]}]}}]}]};d["include/nodes.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"NODES_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"NODES_GLSLF",aa:[""]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",aa:["0"]},{$:"var",ba:"DOUBLE_SIDED_LIGHTING",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"USE_REFRACTION",aa:["0"]},{$:"var",ba:"HAS_REFRACT_TEXTURE",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"REFLECTION_TYPE",
aa:["REFL_NONE"]},{$:"var",ba:"USE_DERIVATIVES_EXT",aa:["0"]},{$:"var",ba:"CAMERA_TYPE",aa:["CAM_TYPE_PERSP"]},{$:"var",ba:"IS_WORLD",aa:["0"]},{$:"var",ba:"USE_BSDF_TRANSPARENT_REFRACT",aa:["0"]},{$:"var",ba:"USE_BSDF_TRANSPARENT_ALPHA",aa:["0"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_BSDF_BEGIN",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"mirror.glslf"},{$:"include",oa:"shadow.glslf"},{$:"include",oa:"environment.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION",
"USE_REFRACTION",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"refraction.glslf"}]}}]},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"math.glslv"},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["GLSL_IN","vec3","rT",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_B4W_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 rW ( in vec3 rU , in float rV ) { vec3 eX = vec3 ( _0_0 ) ;".split(" ")},{$:"cond",
da:[{$:"if",ga:["USE_REFRACTION"],ha:{$:"grp",da:[{$:"txt",aa:"eX = cN ( l , rU . xy * rV ) ;".split(" ")}]}},{$:"elif",ga:["HAS_REFRACT_TEXTURE"],ha:{$:"grp",da:[{$:"txt",aa:"eX = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bC ( eX ) ;".split(" ")}]}}]},{$:"txt",aa:["return","eX",";","}"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{$:"logical_or_expr",ia:6}],
ha:{$:"grp",da:[{$:"txt",aa:"vec3 kf ( vec3 rgb ) { vec4 hI = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hI . wz ) , vec4 ( rgb . gb , hI . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dz = q . x - min ( q . w , q . y ) ; float iB = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dz + iB ) ) , dz / ( q . x + iB ) , q . x ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{$:"logical_or_expr",ia:6}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 kh ( vec3 kg ) { vec4 hI = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kg . r , kg . r , kg . r ) + hI . xyz ) * 6.0 - hI . www ) ; return kg . b * mix ( hI . xxx , clamp ( p - hI . xxx , _0_0 , _1_0 ) , kg . g ) ; }".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED","USE_NODE_TEX_COORD_UV","USE_NODE_UVMAP",{$:"logical_or_expr",ia:5}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 rX ( vec2 gT ) { return vec3 ( gT * 2.0 - vec2 ( _1_0 , _1_0 ) , _0_0 ) ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 rY ( vec3 rf ) { return vec2 ( rf . xy * _0_5 + vec2 ( _0_5 , _0_5 ) ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_FRESNEL","USE_NODE_LAYER_WEIGHT",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float sb ( vec3 rZ , vec3 r_ , float sa ) { float du = abs ( dot ( rZ , r_ ) ) ; float g = sa * sa - _1_0 + du * du ; float dY ; if ( g > _0_0 ) { g = sqrt ( g ) ; float cB = ( g - du ) / ( g + du ) ; float hO = ( du * ( g + du ) - _1_0 ) / ( du * ( g - du ) + _1_0 ) ; dY = _0_5 * cB * cB * ( _1_0 + hO * hO ) ; } else { dY = _1_0 ; } return dY ; }".split(" ")}]}}]},{$:"node",
ba:"CAMERA",ma:[],la:[{$:"node_out",ba:"sE",fa:["vec3"],ea:!0},{$:"node_out",ba:"sF",fa:["float"],ea:!0},{$:"node_out",ba:"sG",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sE"],ja:[{$:"txt",aa:"sE = normalize ( sB . xyz ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sF"],ja:[{$:"txt",aa:"sF = abs ( sB . z ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sG"],ja:[{$:"txt",aa:"sG = length ( sB . xyz ) ;".split(" ")}]}]}]},{$:"node",ba:"COMBRGB",
ma:[],la:[{$:"node_in",ba:"sH",fa:["float"],ea:!1},{$:"node_in",ba:"sI",fa:["float"],ea:!1},{$:"node_in",ba:"sJ",fa:["float"],ea:!1},{$:"node_out",ba:"sK",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"sK = vec3 ( sH , sI , sJ ) ;".split(" ")}]},{$:"node",ba:"COMBHSV",ma:[],la:[{$:"node_in",ba:"sL",fa:["float"],ea:!1},{$:"node_in",ba:"sM",fa:["float"],ea:!1},{$:"node_in",ba:"sN",fa:["float"],ea:!1},{$:"node_out",ba:"sO",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"sO = kh ( vec3 ( sL , sM , sN ) ) ;".split(" ")}]},
{$:"node",ba:"EMPTY_UV",ma:[],la:[{$:"node_out",ba:"sP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"sP = vec3 ( - _1_0 , - _1_0 , _0_0 ) ;".split(" ")}]},{$:"node",ba:"EMPTY_VC",ma:[],la:[{$:"node_out",ba:"sQ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"sQ = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_UV",ma:[],la:[{$:"node_out",ba:"sR",fa:["vec3"],ea:!1},{$:"node_param",ba:"sc",fa:["GLSL_IN","vec2"],ea:!1}],ja:[{$:"txt",aa:"sR = rX ( sc ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_OR",ma:[],la:[{$:"node_out",
ba:"sS",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"sS = 2.0 * rT - vec3 ( _1_0 ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_VC",ma:[],la:[{$:"node_out",ba:"sT",fa:["vec3"],ea:!1},{$:"node_param",ba:"sd",fa:["GLSL_IN","vec3"],ea:!1}],ja:[{$:"txt",aa:"sT = max ( vec3 ( _0_0 ) , sd ) ; bC ( sT ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_VC1",ma:[],la:[{$:"node_out",ba:"sU",fa:["float"],ea:!1},{$:"node_param",ba:"se",fa:["GLSL_IN","float"],ea:!1}],ja:[{$:"txt",aa:"sU = max ( _0_0 , se ) ; bC ( sU ) ;".split(" ")}]},
{$:"node",ba:"GEOMETRY_VC2",ma:[],la:[{$:"node_out",ba:"sV",fa:["float"],ea:!1},{$:"node_out",ba:"sW",fa:["float"],ea:!1},{$:"node_param",ba:"sf",fa:["GLSL_IN","vec2"],ea:!1}],ja:[{$:"txt",aa:"sV = max ( _0_0 , sf [ 0 ] ) ; sW = max ( _0_0 , sf [ 1 ] ) ; bC ( sV ) ; bC ( sW ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_VC3",ma:[],la:[{$:"node_out",ba:"sX",fa:["float"],ea:!1},{$:"node_out",ba:"sY",fa:["float"],ea:!1},{$:"node_out",ba:"sZ",fa:["float"],ea:!1},{$:"node_param",ba:"sg",fa:["GLSL_IN","vec3"],
ea:!1}],ja:[{$:"txt",aa:"sX = max ( _0_0 , sg [ 0 ] ) ; sY = max ( _0_0 , sg [ 1 ] ) ; sZ = max ( _0_0 , sg [ 2 ] ) ; bC ( sX ) ; bC ( sY ) ; bC ( sZ ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_NO",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"s_",fa:["vec3"],ea:!1},{$:"node_out",ba:"ta",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["ta","=","s_",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"ta = su . xyz ;".split(" ")}]}]}]},{$:"node",
ba:"GEOMETRY_FB",ma:[],la:[{$:"node_out",ba:"tb",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"tb = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"tb = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]}]}]},{$:"node",ba:"GEOMETRY_BF",ma:[],la:[{$:"node_out",ba:"tc",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",
ia:2}],ja:[{$:"txt",aa:"tc = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"tc = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]}]}]},{$:"node",ba:"GEOMETRY_VW",ma:[],la:[{$:"node_out",ba:"td",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"td = - _ ( u_view_tsr_frag , ou ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_LO",ma:[],la:[{$:"node_out",ba:"te",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"te = sB . xyz ;".split(" ")}]},{$:"node",ba:"GEOMETRY_GL",ma:[],la:[{$:"node_out",ba:"tf",
fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["tf","=","os",";"]}]},{$:"node",ba:"GEOMETRY_IN",ma:[],la:[{$:"node_out",ba:"tg",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["tg","=","ou",";"]}]},{$:"node",ba:"NEW_GEOMETRY",ma:[],la:[{$:"node_out",ba:"th",fa:["vec3"],ea:!1},{$:"node_out",ba:"ti",fa:["vec3"],ea:!1},{$:"node_out",ba:"tj",fa:["vec3"],ea:!1},{$:"node_out",ba:"tk",fa:["vec3"],ea:!1},{$:"node_out",ba:"tl",fa:["vec3"],ea:!1},{$:"node_out",ba:"tm",fa:["vec3"],ea:!1},{$:"node_out",ba:"tn",fa:["float"],ea:!1},
{$:"node_out",ba:"to",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"th = vec3 ( _0_0 ) ; ti = vec3 ( _0_0 ) ; tj = vec3 ( _0_0 ) ; tk = vec3 ( _0_0 ) ; tl = vec3 ( _0_0 ) ; tm = vec3 ( _0_0 ) ; tn = _0_0 ; to = _0_0 ;".split(" ")}]},{$:"node",ba:"HUE_SAT",ma:[],la:[{$:"node_in",ba:"tr",fa:["float"],ea:!1},{$:"node_in",ba:"tu",fa:["float"],ea:!1},{$:"node_in",ba:"tv",fa:["float"],ea:!1},{$:"node_in",ba:"tw",fa:["float"],ea:!1},{$:"node_in",ba:"tx",fa:["vec3"],ea:!1},{$:"node_out",ba:"ty",fa:["vec3"],ea:!1}],
ja:[{$:"txt",aa:"vec3 kg = kf ( tx ) ; kg [ 0 ] += ( tr - _0_5 ) ; if ( kg [ 0 ] > _1_0 ) kg [ 0 ] -= _1_0 ; else if ( kg [ 0 ] < _0_0 ) kg [ 0 ] += _1_0 ; kg *= vec3 ( _1_0 , tu , tv ) ; kg = mix ( vec3 ( _1_0 ) , mix ( vec3 ( _0_0 ) , kg , step ( vec3 ( _0_0 ) , kg ) ) , step ( kg , vec3 ( _1_0 ) ) ) ; ty = mix ( tx , kh ( kg ) , tw ) ;".split(" ")}]},{$:"node",ba:"INVERT",ma:[],la:[{$:"node_in",ba:"tz",fa:["float"],ea:!1},{$:"node_in",ba:"tA",fa:["vec3"],ea:!1},{$:"node_out",ba:"tB",fa:["vec3"],
ea:!1}],ja:[{$:"txt",aa:"tB = mix ( tA , vec3 ( _1_0 ) - tA , tz ) ;".split(" ")}]},{$:"node",ba:"LAMP",ma:[{$:"node_var",ba:"LAMP_TYPE",aa:["HEMI"]},{$:"node_var",ba:"LAMP_INDEX",aa:["0"]},{$:"node_var",ba:"LAMP_USE_SPHERE",aa:["0"]},{$:"node_var",ba:"LAMP_SPOT_SIZE",aa:["0.8"]},{$:"node_var",ba:"LAMP_SPOT_BLEND",aa:["0.03"]},{$:"node_var",ba:"LAMP_LIGHT_DIST",aa:["30.0"]}],la:[{$:"node_out",ba:"tC",fa:["vec3"],ea:!0},{$:"node_out",ba:"tD",fa:["vec3"],ea:!1},{$:"node_out",ba:"tE",fa:["float"],ea:!1},
{$:"node_out",ba:"tF",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["LAMP_INDEX",1,{$:"negative_expr",ia:1},{$:"non_equal_expr",ia:2}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tC"],ja:[{$:"txt",aa:"tC = u_lamp_light_color_intensities [ LAMP_INDEX ] ;".split(" ")}]}]},{$:"txt",aa:"vec3 tG = u_lamp_light_directions [ LAMP_INDEX ] ; vec3 tH = u_lamp_light_positions [ LAMP_INDEX ] ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2},"LAMP_TYPE",
"POINT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"tD = h - tH ; tE = length ( tD ) ; tD = normalize ( tD ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tF"],ja:[{$:"txt",aa:"tF = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + tE * tE ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"float oY = dot ( - tD , tG ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; tF *= oY ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["LAMP_USE_SPHERE"],ja:[{$:"txt",aa:"tF *= max ( LAMP_LIGHT_DIST - tE , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]}]}]},{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tD"],ja:[{$:"txt",aa:["tD","=","tG",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tE"],ja:[{$:"txt",aa:"tE = length ( tH - h ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tF"],ja:[{$:"txt",aa:["tF","=","_1_0",";"]}]}]}]}]}]},{$:"node_else",ja:[{$:"node_cond",
da:[{$:"node_if",ga:["USE_OUT_tC"],ja:[{$:"txt",aa:"tC = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:"tD = vec3 ( _0_0 ) ; tE = 0.0 ;".split(" ")}]}]}]},{$:"node",ba:"NORMAL",ma:[],la:[{$:"node_in",ba:"tI",fa:["vec3"],ea:!1},{$:"node_out",ba:"tJ",fa:["vec3"],ea:!0},{$:"node_out",ba:"tK",fa:["float"],ea:!0},{$:"node_param",ba:"sh",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tJ"],ja:[{$:"txt",aa:["tJ","=","sh",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tK"],ja:[{$:"txt",
aa:"tK = - dot ( tI , sh ) ;".split(" ")}]}]}]},{$:"node",ba:"B4W_VECTOR_VIEW",ma:[],la:[{$:"node_in",ba:"tL",fa:["vec3"],ea:!1},{$:"node_out",ba:"tM",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tM = - _ ( u_view_tsr_frag , tL ) ;".split(" ")}]},{$:"node",ba:"BSDF_BEGIN",ma:[],la:[{$:"node_in",ba:"tN",fa:["vec3"],ea:!1},{$:"node_in",ba:"tO",fa:["vec3"],ea:!1},{$:"node_in",ba:"tP",fa:["float"],ea:!1},{$:"node_in",ba:"tQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"tR",fa:["float"],ea:!1},{$:"node_in",ba:"tS",fa:["float"],
ea:!1},{$:"node_in",ba:"tT",fa:["vec3"],ea:!1},{$:"node_in",ba:"tU",fa:["vec3"],ea:!1},{$:"node_in",ba:"tV",fa:["float"],ea:!1},{$:"node_in",ba:"tW",fa:["vec3"],ea:!1},{$:"node_in",ba:"tX",fa:["float"],ea:!1},{$:"node_out",ba:"tY",fa:["vec3"],ea:!1},{$:"node_out",ba:"tZ",fa:["vec3"],ea:!1},{$:"node_out",ba:"t_",fa:["vec3"],ea:!1},{$:"node_out",ba:"ua",fa:["vec3"],ea:!1},{$:"node_out",ba:"ub",fa:["vec3"],ea:!1},{$:"node_out",ba:"uc",fa:["vec4"],ea:!1},{$:"node_out",ba:"ud",fa:["vec4"],ea:!1},{$:"node_out",
ba:"ue",fa:["vec3"],ea:!1},{$:"node_out",ba:"uf",fa:["vec3"],ea:!1},{$:"node_out",ba:"ug",fa:["vec3"],ea:!1},{$:"node_out",ba:"uh",fa:["float"],ea:!1},{$:"node_out",ba:"ui",fa:["vec3"],ea:!1},{$:"node_out",ba:"uj",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"t_ = tO ; ua = tQ ; ub = tT ; ue = tO ; uf = tQ ; ug = tU ; uh = tV ; ui = tW ; uj = tX ; tY = sC * t_ ; tZ = sD * u_environment_energy * cz ( ub ) ; ud = cC ( t_ ) ; H = ud ; uc [ 0 ] = tP ; uc [ 1 ] = tR ; uc [ 2 ] = tS ;".split(" ")}]},{$:"node",
ba:"BSDF_END",ma:[],la:[{$:"node_in",ba:"uk",fa:["vec4"],ea:!1},{$:"node_in",ba:"ul",fa:["vec3"],ea:!1},{$:"node_in",ba:"um",fa:["vec3"],ea:!1},{$:"node_in",ba:"un",fa:["vec4"],ea:!1},{$:"node_in",ba:"uo",fa:["vec3"],ea:!1},{$:"node_in",ba:"up",fa:["vec3"],ea:!1},{$:"node_in",ba:"uq",fa:["vec3"],ea:!1},{$:"node_in",ba:"ur",fa:["float"],ea:!1},{$:"node_in",ba:"us",fa:["vec3"],ea:!1},{$:"node_in",ba:"ut",fa:["float"],ea:!1},{$:"node_out",ba:"uu",fa:["vec3"],ea:!1},{$:"node_out",ba:"uv",fa:["float"],
ea:!1}],ja:[{$:"txt",aa:"float uw = clamp ( un [ 1 ] , _0_0 , _1_0 ) ; float rF = un [ 2 ] ; uu = uk . rgb ; uv = _1_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_TYPE","REFL_PBR_STANDARD",{$:"equal_expr",ia:2},"REFLECTION_TYPE","REFL_PBR_SIMPLE",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"uu += rP ( uo , up , ou , um , rF , uw , mat3 ( _0_0 ) ) ;".split(" ")}]},{$:"node_elif",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"uu += rP ( uo , up , ou , um , rF , u_view_tsr_frag ) ;".split(" ")}]}]},
{$:"txt",aa:"uu += ul ; uu = mix ( uu , uq , ur ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NODE_BSDF_TRANSPARENT"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_BSDF_TRANSPARENT_REFRACT"],ja:[{$:"txt",aa:"vec3 ux = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bC ( ux ) ; us = us * ux ; uu += us ; uv = _1_0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_BSDF_TRANSPARENT_ALPHA"],ja:[{$:"txt",aa:"uu = mix ( us , uu , ut ) ; uv = ut ;".split(" ")}]}]}]}]},{$:"txt",
aa:["um",";"]}]},{$:"node",ba:"BSDF_COMPUTE",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"uy",fa:["vec3"],ea:!1},{$:"node_in",ba:"uz",fa:["vec2"],ea:!1},{$:"node_in",ba:"uA",fa:["vec3"],ea:!1},{$:"node_in",ba:"uB",fa:["float"],ea:!1},{$:"node_in",ba:"uC",fa:["vec4"],ea:!1},{$:"node_out",ba:"uD",fa:["float"],ea:!1},{$:"node_out",ba:"uE",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vec3 r_ = uA ; float uF = clamp ( uC [ 0 ] , _0_0 , _1_0 ) ; float uw = clamp ( uC [ 1 ] , _0_0 , _1_0 ) ; float rF = uC [ 2 ] ; vec3 pW = normalize ( ou + uy ) ; float pf = ( _1_0 - uB ) * dot ( r_ , uy ) + uB ; float uG = ( _1_0 - uB ) * max ( dot ( uy , pW ) , _0_0 ) + uB ; float uH = ( _1_0 - uB ) * max ( dot ( uA , pW ) , _0_0 ) + uB ; uD = _0_0 ; if ( uz . r != _0_0 ) { if ( uF > _0_0 ) { float pv = max ( dot ( r_ , ou ) , _0_0 ) ; float pw = uF * uF ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = uy - pf * r_ ; vec3 py = ou - pv * r_ ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) uD = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; uD = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else uD = pf ; uD = max ( uD , _0_0 ) / M_PI ; } float L = uw ; float uI = L * L ; float dX = ( uH * uI - uH ) * uH + _1_0 ; float cy = uI / ( M_PI * dX * dX ) ; float uJ ; float uK ; float uL = pow ( _1_0 - uG , 5.0 ) ; uJ = _1_0 ; uK = uL ; float hI = L / 2.0 ; float uM = hI * hI ; float uN = _1_0 - uM ; float uO = _1_0 / ( uG * uG * uN + uM ) ; uJ *= uO ; uK *= uO ; float rC = mix ( 0.04 , _1_0 , rF ) ; float uP = mix ( uK , uJ , rC ) ; uE = max ( pf * cy * uP , _0_0 ) ;".split(" ")}]},
{$:"node",ba:"BSDF_PRINCIPLED",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"uQ",fa:["vec4"],ea:!1},{$:"node_in",ba:"uR",fa:["float"],ea:!1},{$:"node_in",ba:"uS",fa:["float"],ea:!1},{$:"node_in",ba:"uT",fa:["vec3"],ea:!1},{$:"node_out",ba:"uU",fa:["vec3"],ea:!1},{$:"node_out",ba:"uV",fa:["vec3"],ea:!1},{$:"node_out",ba:"uW",fa:["float"],ea:!1},{$:"node_out",ba:"uX",fa:["vec3"],ea:!1},{$:"node_out",ba:"uY",fa:["float"],ea:!1},{$:"node_out",ba:"uZ",fa:["float"],ea:!1},{$:"node_out",
ba:"u_",fa:["vec3"],ea:!1},{$:"node_out",ba:"va",fa:["vec3"],ea:!1},{$:"node_out",ba:"vb",fa:["float"],ea:!1},{$:"node_out",ba:"vc",fa:["vec3"],ea:!1},{$:"node_out",ba:"vd",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"uX = uQ . rgb ; uY = uS * uS ; uV = uQ . rgb ; uW = uS ; uZ = uR ; vb = _0_0 ; vd = _1_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["u_","=","uT",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["u_","=","ot",";"]}]}]},{$:"txt",aa:"uU ; va = vec3 ( _0_0 ) ; vc = vec3 ( _0_0 ) ;".split(" ")}]},
{$:"node",ba:"BSDF_ANISOTROPIC",ma:[],la:[{$:"node_in",ba:"ve",fa:["vec3"],ea:!1},{$:"node_in",ba:"vf",fa:["float"],ea:!1},{$:"node_in",ba:"vg",fa:["float"],ea:!1},{$:"node_in",ba:"vh",fa:["float"],ea:!1},{$:"node_in",ba:"vi",fa:["vec3"],ea:!1},{$:"node_in",ba:"vj",fa:["vec3"],ea:!1},{$:"node_out",ba:"vk",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"vk = ve ; vf ; vg ; vh ; vi ; vj ;".split(" ")}]},{$:"node",ba:"BSDF_DIFFUSE",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"vl",fa:["vec3"],
ea:!1},{$:"node_in",ba:"vm",fa:["float"],ea:!1},{$:"node_in",ba:"vn",fa:["vec3"],ea:!1},{$:"node_out",ba:"vo",fa:["vec3"],ea:!1},{$:"node_out",ba:"vp",fa:["vec3"],ea:!1},{$:"node_out",ba:"vq",fa:["float"],ea:!1},{$:"node_out",ba:"vr",fa:["vec3"],ea:!1},{$:"node_out",ba:"vs",fa:["float"],ea:!1},{$:"node_out",ba:"vt",fa:["float"],ea:!1},{$:"node_out",ba:"vu",fa:["vec3"],ea:!1},{$:"node_out",ba:"vv",fa:["vec3"],ea:!1},{$:"node_out",ba:"vw",fa:["float"],ea:!1},{$:"node_out",ba:"vx",fa:["vec3"],ea:!1},
{$:"node_out",ba:"vy",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vp = vl ; vq = vm ; vs = _1_0 ; vt = _0_0 ; vw = _0_0 ; vy = _1_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vu","=","vn",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vu","=","ot",";"]}]}]},{$:"txt",aa:"vo ; vr = vec3 ( _0_0 ) ; vv = vec3 ( _0_0 ) ; vx = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"BSDF_GLASS",ma:[],la:[{$:"node_in",ba:"vz",fa:["vec3"],ea:!1},{$:"node_in",ba:"vA",fa:["float"],ea:!1},
{$:"node_in",ba:"vB",fa:["float"],ea:!1},{$:"node_in",ba:"vC",fa:["vec3"],ea:!1},{$:"node_out",ba:"vD",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"vD = vz ; vA ; vB ; vC ;".split(" ")}]},{$:"node",ba:"BSDF_GLOSSY",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"vE",fa:["vec3"],ea:!1},{$:"node_in",ba:"vF",fa:["float"],ea:!1},{$:"node_in",ba:"vG",fa:["vec3"],ea:!1},{$:"node_out",ba:"vH",fa:["vec3"],ea:!1},{$:"node_out",ba:"vI",fa:["vec3"],ea:!1},{$:"node_out",ba:"vJ",fa:["float"],ea:!1},
{$:"node_out",ba:"vK",fa:["vec3"],ea:!1},{$:"node_out",ba:"vL",fa:["float"],ea:!1},{$:"node_out",ba:"vM",fa:["float"],ea:!1},{$:"node_out",ba:"vN",fa:["vec3"],ea:!1},{$:"node_out",ba:"vO",fa:["vec3"],ea:!1},{$:"node_out",ba:"vP",fa:["float"],ea:!1},{$:"node_out",ba:"vQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"vR",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vK = vE ; vL = vF ; vM = _1_0 ; vP = _0_0 ; vR = _1_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vN","=","vG",
";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vN","=","ot",";"]}]}]},{$:"txt",aa:"vH ; vI = vec3 ( _0_0 ) ; vJ = _0_0 ; vO = vec3 ( _0_0 ) ; vQ = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"BSDF_HAIR",ma:[],la:[{$:"node_in",ba:"vS",fa:["vec3"],ea:!1},{$:"node_in",ba:"vT",fa:["float"],ea:!1},{$:"node_in",ba:"vU",fa:["float"],ea:!1},{$:"node_in",ba:"vV",fa:["float"],ea:!1},{$:"node_out",ba:"vW",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"vW = vS ; vT ; vU ; vV ;".split(" ")}]},{$:"node",ba:"BSDF_TRANSPARENT",
ma:[],la:[{$:"node_in",ba:"vX",fa:["vec3"],ea:!1},{$:"node_out",ba:"vY",fa:["vec3"],ea:!1},{$:"node_out",ba:"vZ",fa:["vec3"],ea:!1},{$:"node_out",ba:"v_",fa:["float"],ea:!1},{$:"node_out",ba:"wa",fa:["vec3"],ea:!1},{$:"node_out",ba:"wb",fa:["float"],ea:!1},{$:"node_out",ba:"wc",fa:["float"],ea:!1},{$:"node_out",ba:"wd",fa:["vec3"],ea:!1},{$:"node_out",ba:"we",fa:["vec3"],ea:!1},{$:"node_out",ba:"wf",fa:["float"],ea:!1},{$:"node_out",ba:"wg",fa:["vec3"],ea:!1},{$:"node_out",ba:"wh",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:"wg = vX ; wc = _0_0 ; wf = _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_BSDF_TRANSPARENT_ALPHA"],ja:[{$:"txt",aa:["wh","=","_0_0",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["wh","=","_1_0",";"]}]}]},{$:"txt",aa:"wd = ot ; vY ; vZ = vec3 ( _0_0 ) ; v_ = _0_0 ; wa = vec3 ( _0_0 ) ; wb = _0_0 ; we = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"BSDF_TRANSLUCENT",ma:[],la:[{$:"node_in",ba:"wi",fa:["vec3"],ea:!1},{$:"node_in",ba:"wj",fa:["vec3"],ea:!1},{$:"node_out",ba:"wk",
fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wk = wi ; wj ;".split(" ")}]},{$:"node",ba:"BSDF_REFRACTION",ma:[],la:[{$:"node_in",ba:"wl",fa:["vec3"],ea:!1},{$:"node_in",ba:"wm",fa:["float"],ea:!1},{$:"node_in",ba:"wn",fa:["float"],ea:!1},{$:"node_in",ba:"wo",fa:["vec3"],ea:!1},{$:"node_out",ba:"wp",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wp [ 0 ] = wp [ 1 ] = wp [ 2 ] = _0_0 ; wl ; wm ; wn ; wo ;".split(" ")}]},{$:"node",ba:"BSDF_TOON",ma:[],la:[{$:"node_in",ba:"wq",fa:["vec3"],ea:!1},{$:"node_in",ba:"wr",fa:["float"],
ea:!1},{$:"node_in",ba:"ws",fa:["float"],ea:!1},{$:"node_in",ba:"wt",fa:["vec3"],ea:!1},{$:"node_out",ba:"wu",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wu = wq ; wr ; ws ; wt ;".split(" ")}]},{$:"node",ba:"BSDF_VELVET",ma:[],la:[{$:"node_in",ba:"wv",fa:["vec3"],ea:!1},{$:"node_in",ba:"wA",fa:["float"],ea:!1},{$:"node_in",ba:"wB",fa:["vec3"],ea:!1},{$:"node_out",ba:"wC",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wC = wv ; wA ; wB ;".split(" ")}]},{$:"node",ba:"SUBSURFACE_SCATTERING",ma:[],la:[{$:"node_in",ba:"wD",
fa:["vec3"],ea:!1},{$:"node_in",ba:"wE",fa:["float"],ea:!1},{$:"node_in",ba:"wF",fa:["vec3"],ea:!1},{$:"node_in",ba:"wG",fa:["float"],ea:!1},{$:"node_in",ba:"wH",fa:["float"],ea:!1},{$:"node_in",ba:"wI",fa:["vec3"],ea:!1},{$:"node_out",ba:"wJ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wJ [ 0 ] = wJ [ 1 ] = wJ [ 2 ] = _0_0 ; wD ; wF ; wG ; wH ; wI ; wE ;".split(" ")}]},{$:"node",ba:"EMISSION",ma:[],la:[{$:"node_in",ba:"wK",fa:["vec3"],ea:!1},{$:"node_in",ba:"wL",fa:["float"],ea:!1},{$:"node_out",ba:"wM",
fa:["vec3"],ea:!1},{$:"node_out",ba:"wN",fa:["vec3"],ea:!1},{$:"node_out",ba:"wO",fa:["float"],ea:!1},{$:"node_out",ba:"wP",fa:["vec3"],ea:!1},{$:"node_out",ba:"wQ",fa:["float"],ea:!1},{$:"node_out",ba:"wR",fa:["float"],ea:!1},{$:"node_out",ba:"wS",fa:["vec3"],ea:!1},{$:"node_out",ba:"wT",fa:["vec3"],ea:!1},{$:"node_out",ba:"wU",fa:["float"],ea:!1},{$:"node_out",ba:"wV",fa:["vec3"],ea:!1},{$:"node_out",ba:"wW",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"wT = wL * wK ; wR = _0_0 ; wU = _1_0 ; wW = _1_0 ; wS = ot ; wM ; wN = vec3 ( _0_0 ) ; wO = _0_0 ; wP = vec3 ( _0_0 ) ; wQ = _0_0 ;".split(" ")}]},
{$:"node",ba:"AMBIENT_OCCLUSION",ma:[],la:[{$:"node_in",ba:"wX",fa:["vec3"],ea:!1},{$:"node_out",ba:"wY",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wY [ 0 ] = wY [ 1 ] = wY [ 2 ] = _0_0 ; wX ;".split(" ")}]},{$:"node",ba:"HOLDOUT",ma:[],la:[{$:"node_out",ba:"wZ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wZ [ 0 ] = wZ [ 1 ] = wZ [ 2 ] = _0_0 ;".split(" ")}]},{$:"node",ba:"VOLUME_ABSORPTION",ma:[],la:[{$:"node_in",ba:"w_",fa:["vec3"],ea:!1},{$:"node_in",ba:"xa",fa:["float"],ea:!1},{$:"node_out",ba:"xb",fa:["vec3"],
ea:!1}],ja:[{$:"txt",aa:"xb [ 0 ] = xb [ 1 ] = xb [ 2 ] = _0_0 ; w_ ; xa ;".split(" ")}]},{$:"node",ba:"VOLUME_SCATTER",ma:[],la:[{$:"node_in",ba:"xc",fa:["vec3"],ea:!1},{$:"node_in",ba:"xd",fa:["float"],ea:!1},{$:"node_in",ba:"xe",fa:["float"],ea:!1},{$:"node_out",ba:"xf",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xf [ 0 ] = xf [ 1 ] = xf [ 2 ] = _0_0 ; xc ; xd ; xe ;".split(" ")}]},{$:"node",ba:"BUMP",ma:[{$:"node_var",ba:"INVERT",aa:["0"]},{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",
ba:"xg",fa:["float"],ea:!1},{$:"node_in",ba:"xh",fa:["float"],ea:!1},{$:"node_in",ba:"xi",fa:["float"],ea:!1},{$:"node_in",ba:"xj",fa:["vec3"],ea:!1},{$:"node_out",ba:"xk",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float aM = xh ; float gH = xg ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["INVERT"],ja:[{$:"txt",aa:["aM","=","-","_1_0",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vec3","U","=","xj",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","U","=","ot",";"]}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_DERIVATIVES_EXT"],ja:[{$:"txt",aa:"vec3 xl = dFdx ( os ) ; vec3 xm = dFdy ( os ) ; vec3 xn = cross ( xm , U ) ; vec3 xo = cross ( U , xl ) ; float dv = dot ( xl , xn ) ; float xp = abs ( dv ) ; vec3 xq = dFdx ( xi ) * xn + dFdy ( xi ) * xo ; gH = max ( gH , _0_0 ) ; xk = normalize ( xp * U - aM * sign ( dv ) * xq ) ; xk = normalize ( gH * xk + ( _1_0 - gH ) * U ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["xk","=","U",";"]}]}]}]},{$:"node",ba:"DISPLACEMENT_BUMP",
ma:[],la:[{$:"node_in",ba:"xr",fa:["float"],ea:!1},{$:"node_out",ba:"xs",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float aM = 0.1 ; vec3 U = ot ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_DERIVATIVES_EXT"],ja:[{$:"txt",aa:"vec3 xl = dFdx ( os ) ; vec3 xm = dFdy ( os ) ; vec3 xn = cross ( xm , U ) ; vec3 xo = cross ( U , xl ) ; float dv = dot ( xl , xn ) ; float xp = abs ( dv ) ; vec3 xq = dFdx ( xr ) * xn + dFdy ( xr ) * xo ; xs = normalize ( xp * U - aM * sign ( dv ) * xq ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:["xs","=","U",";"]}]}]}]},{$:"node",ba:"NORMAL_MAP",ma:[{$:"node_var",ba:"SPACE",aa:["NM_TANGENT"]},{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"xt",fa:["float"],ea:!1},{$:"node_in",ba:"xu",fa:["vec4"],ea:!1},{$:"node_in",ba:"xv",fa:["vec3"],ea:!1},{$:"node_out",ba:"xA",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vec3","xB","=","xv",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","xB","=","sw",";"]}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["SPACE","NM_TANGENT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xA = 2.0 * xu . xyz - _1_0 ; xA = sA * xA ;".split(" ")}]},{$:"node_elif",ga:["SPACE","NM_OBJECT",{$:"equal_expr",ia:2},"SPACE","NM_BLENDER_OBJECT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"xA = 2.0 * xu . xyz - _1_0 ; xA . yz *= - _1_0 ; xA = _ ( u_model_tsr , xA ) ;".split(" ")}]},{$:"node_elif",ga:["SPACE","NM_WORLD",{$:"equal_expr",ia:2},"SPACE","NM_BLENDER_WORLD",{$:"equal_expr",
ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"xA = 2.0 * xu . xyz - _1_0 ; xA . yz *= - _1_0 ;".split(" ")}]}]},{$:"txt",aa:"float ma = max ( xt , _0_0 ) ; xA = normalize ( mix ( xB , xA , ma ) ) ;".split(" ")}]},{$:"node",ba:"VECT_TRANSFORM",ma:[{$:"node_var",ba:"CONVERT_TYPE",aa:["VT_WORLD_TO_OBJECT"]},{$:"node_var",ba:"VECTOR_TYPE",aa:["VT_VECTOR"]}],la:[{$:"node_in",ba:"xC",fa:["vec3"],ea:!1},{$:"node_out",ba:"xD",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE",
"VT_WORLD_TO_WORLD",{$:"equal_expr",ia:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",{$:"equal_expr",ia:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:3}],ja:[{$:"txt",aa:["xD","=","xC",";"]}]},{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["VECTOR_TYPE","VT_POINT",{$:"equal_expr",ia:2}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = ap ( u_view_tsr_frag , xC ) ;".split(" ")}]},{$:"node_elif",
ga:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = ap ( u_model_tsr_inverse , xC ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = ap ( u_model_tsr , xC ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = ap ( u_model_tsr , xC ) ; xD = ap ( u_view_tsr_frag , xD ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",
{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = ap ( u_view_tsr_inverse , xC ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = ap ( u_view_tsr_inverse , xC ) ; xD = ap ( u_model_tsr_inverse , xD ) ;".split(" ")}]}]}]},{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = _ ( u_view_tsr_frag , xC ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",
{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = _ ( u_model_tsr_inverse , xC ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = _ ( u_model_tsr , xC ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = _ ( u_model_tsr , xC ) ; xD = _ ( u_view_tsr_frag , xD ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = _ ( u_view_tsr_inverse , xC ) ;".split(" ")}]},
{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = _ ( u_view_tsr_inverse , xC ) ; xD = _ ( u_model_tsr_inverse , xD ) ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["VECTOR_TYPE","VT_NORMAL",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = normalize ( xD ) ;".split(" ")}]}]}]}]}]},{$:"node",ba:"BLACKBODY",ma:[],la:[{$:"node_in",ba:"xE",fa:["float"],ea:!1},{$:"node_out",ba:"xF",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xF [ 0 ] = xF [ 1 ] = xF [ 2 ] = _0_0 ; xE ;".split(" ")}]},
{$:"node",ba:"WAVELENGTH",ma:[],la:[{$:"node_in",ba:"xG",fa:["float"],ea:!1},{$:"node_out",ba:"xH",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xH [ 0 ] = xH [ 1 ] = xH [ 2 ] = _0_0 ; xG ;".split(" ")}]},{$:"node",ba:"SEPXYZ",ma:[],la:[{$:"node_in",ba:"xI",fa:["vec3"],ea:!1},{$:"node_out",ba:"xJ",fa:["float"],ea:!1},{$:"node_out",ba:"xK",fa:["float"],ea:!1},{$:"node_out",ba:"xL",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"xJ = xI [ 0 ] ; xK = xI [ 1 ] ; xL = xI [ 2 ] ;".split(" ")}]},{$:"node",ba:"COMBXYZ",ma:[],
la:[{$:"node_in",ba:"xM",fa:["float"],ea:!1},{$:"node_in",ba:"xN",fa:["float"],ea:!1},{$:"node_in",ba:"xO",fa:["float"],ea:!1},{$:"node_out",ba:"xP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xP [ 0 ] = xM ; xP [ 1 ] = xN ; xP [ 2 ] = xO ;".split(" ")}]},{$:"node",ba:"BRIGHTCONTRAST",ma:[],la:[{$:"node_in",ba:"xQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"xR",fa:["float"],ea:!1},{$:"node_in",ba:"xS",fa:["float"],ea:!1},{$:"node_out",ba:"xT",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float b = xR - xS * _0_5 ; xT = max ( ( _1_0 + xS ) * xQ + b , vec3 ( _0_0 ) ) ;".split(" ")}]},
{$:"node",ba:"LIGHT_FALLOFF",ma:[],la:[{$:"node_in",ba:"xU",fa:["float"],ea:!1},{$:"node_in",ba:"xV",fa:["float"],ea:!1},{$:"node_out",ba:"xW",fa:["float"],ea:!1},{$:"node_out",ba:"xX",fa:["float"],ea:!1},{$:"node_out",ba:"xY",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"xW = xX = xY = _0_0 ; xU ; xV ;".split(" ")}]},{$:"node",ba:"TEX_SKY",ma:[],la:[{$:"node_in",ba:"xZ",fa:["vec3"],ea:!1},{$:"node_out",ba:"x_",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"x_ [ 0 ] = x_ [ 1 ] = x_ [ 2 ] = _0_0 ; xZ ;".split(" ")}]},
{$:"node",ba:"TEX_NOISE",ma:[],la:[{$:"node_in",ba:"ya",fa:["vec3"],ea:!1},{$:"node_in",ba:"yb",fa:["float"],ea:!1},{$:"node_in",ba:"yc",fa:["float"],ea:!1},{$:"node_in",ba:"yd",fa:["float"],ea:!1},{$:"node_out",ba:"ye",fa:["vec3"],ea:!1},{$:"node_out",ba:"yf",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"ye [ 0 ] = ye [ 1 ] = ye [ 2 ] = _0_0 ; yf = _1_0 ; ya ; yb ; yc ; yd ;".split(" ")}]},{$:"node",ba:"TEX_WAVE",ma:[],la:[{$:"node_in",ba:"yg",fa:["vec3"],ea:!1},{$:"node_in",ba:"yh",fa:["float"],ea:!1},
{$:"node_in",ba:"yi",fa:["float"],ea:!1},{$:"node_in",ba:"yj",fa:["float"],ea:!1},{$:"node_in",ba:"yk",fa:["float"],ea:!1},{$:"node_out",ba:"yl",fa:["vec3"],ea:!1},{$:"node_out",ba:"ym",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yl [ 0 ] = yl [ 1 ] = yl [ 2 ] = _0_0 ; ym = _1_0 ; yg ; yh ; yi ; yj ; yk ;".split(" ")}]},{$:"node",ba:"TEX_VORONOI",ma:[],la:[{$:"node_in",ba:"yn",fa:["vec3"],ea:!1},{$:"node_in",ba:"yo",fa:["float"],ea:!1},{$:"node_out",ba:"yp",fa:["vec3"],ea:!1},{$:"node_out",ba:"yq",fa:["float"],
ea:!1}],ja:[{$:"txt",aa:"yp [ 0 ] = yp [ 1 ] = yp [ 2 ] = _0_0 ; yq = _1_0 ; yn ; yo ;".split(" ")}]},{$:"node",ba:"TEX_MUSGRAVE",ma:[],la:[{$:"node_in",ba:"yr",fa:["vec3"],ea:!1},{$:"node_in",ba:"ys",fa:["float"],ea:!1},{$:"node_in",ba:"yt",fa:["float"],ea:!1},{$:"node_in",ba:"yu",fa:["float"],ea:!1},{$:"node_in",ba:"yv",fa:["float"],ea:!1},{$:"node_in",ba:"yA",fa:["float"],ea:!1},{$:"node_in",ba:"yB",fa:["float"],ea:!1},{$:"node_out",ba:"yC",fa:["vec3"],ea:!1},{$:"node_out",ba:"yD",fa:["float"],
ea:!1}],ja:[{$:"txt",aa:"yC [ 0 ] = yC [ 1 ] = yC [ 2 ] = _0_0 ; yD = _1_0 ; yr ; ys ; yt ; yu ; yv ; yA ; yB ;".split(" ")}]},{$:"node",ba:"TEX_GRADIENT",ma:[],la:[{$:"node_in",ba:"yE",fa:["vec3"],ea:!1},{$:"node_out",ba:"yF",fa:["vec3"],ea:!1},{$:"node_out",ba:"yG",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yF [ 0 ] = yF [ 1 ] = yF [ 2 ] = _0_0 ; yG = _1_0 ; yE ;".split(" ")}]},{$:"node",ba:"TEX_MAGIC",ma:[],la:[{$:"node_in",ba:"yH",fa:["vec3"],ea:!1},{$:"node_in",ba:"yI",fa:["float"],ea:!1},{$:"node_in",
ba:"yJ",fa:["float"],ea:!1},{$:"node_out",ba:"yK",fa:["vec3"],ea:!1},{$:"node_out",ba:"yL",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yK [ 0 ] = yK [ 1 ] = yK [ 2 ] = _0_0 ; yL = _1_0 ; yH ; yI ; yJ ;".split(" ")}]},{$:"node",ba:"TEX_CHECKER",ma:[],la:[{$:"node_in",ba:"yM",fa:["vec3"],ea:!1},{$:"node_in",ba:"yN",fa:["vec3"],ea:!1},{$:"node_in",ba:"yO",fa:["vec3"],ea:!1},{$:"node_in",ba:"yP",fa:["float"],ea:!1},{$:"node_out",ba:"yQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"yR",fa:["float"],ea:!1}],ja:[{$:"txt",
aa:"yQ [ 0 ] = yQ [ 1 ] = yQ [ 2 ] = _0_0 ; yR = _1_0 ; yM ; yN ; yO ; yP ;".split(" ")}]},{$:"node",ba:"TEX_BRICK",ma:[],la:[{$:"node_in",ba:"yS",fa:["vec3"],ea:!1},{$:"node_in",ba:"yT",fa:["vec3"],ea:!1},{$:"node_in",ba:"yU",fa:["vec3"],ea:!1},{$:"node_in",ba:"yV",fa:["vec3"],ea:!1},{$:"node_in",ba:"yW",fa:["float"],ea:!1},{$:"node_in",ba:"yX",fa:["float"],ea:!1},{$:"node_in",ba:"yY",fa:["float"],ea:!1},{$:"node_in",ba:"yZ",fa:["float"],ea:!1},{$:"node_in",ba:"y_",fa:["float"],ea:!1},{$:"node_out",
ba:"za",fa:["vec3"],ea:!1},{$:"node_out",ba:"zb",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"za [ 0 ] = za [ 1 ] = za [ 2 ] = _0_0 ; zb = _1_0 ; yS ; yT ; yU ; yV ; yW ; yX ; yY ; yZ ; y_ ;".split(" ")}]},{$:"node",ba:"ADD_SHADER",ma:[],la:[{$:"node_in",ba:"zc",fa:["vec3"],ea:!1},{$:"node_in",ba:"zd",fa:["vec3"],ea:!1},{$:"node_out",ba:"ze",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"ze = clamp ( zc + zd , vec3 ( _0_0 ) , vec3 ( _1_0 ) ) ;".split(" ")}]},{$:"node",ba:"MIX_SHADER",ma:[],la:[{$:"node_in",ba:"zf",
fa:["float"],ea:!1},{$:"node_in",ba:"zg",fa:["vec3"],ea:!1},{$:"node_in",ba:"zh",fa:["vec3"],ea:!1},{$:"node_in",ba:"zi",fa:["vec3"],ea:!1},{$:"node_in",ba:"zj",fa:["float"],ea:!1},{$:"node_in",ba:"zk",fa:["vec3"],ea:!1},{$:"node_in",ba:"zl",fa:["float"],ea:!1},{$:"node_in",ba:"zm",fa:["float"],ea:!1},{$:"node_in",ba:"zn",fa:["vec3"],ea:!1},{$:"node_in",ba:"zo",fa:["vec3"],ea:!1},{$:"node_in",ba:"zp",fa:["float"],ea:!1},{$:"node_in",ba:"zq",fa:["vec3"],ea:!1},{$:"node_in",ba:"zr",fa:["float"],ea:!1},
{$:"node_in",ba:"zs",fa:["vec3"],ea:!1},{$:"node_in",ba:"zt",fa:["float"],ea:!1},{$:"node_in",ba:"zu",fa:["vec3"],ea:!1},{$:"node_in",ba:"zv",fa:["float"],ea:!1},{$:"node_in",ba:"zA",fa:["float"],ea:!1},{$:"node_in",ba:"zB",fa:["vec3"],ea:!1},{$:"node_in",ba:"zC",fa:["vec3"],ea:!1},{$:"node_in",ba:"zD",fa:["float"],ea:!1},{$:"node_in",ba:"zE",fa:["vec3"],ea:!1},{$:"node_in",ba:"zF",fa:["float"],ea:!1},{$:"node_out",ba:"zG",fa:["vec3"],ea:!1},{$:"node_out",ba:"zH",fa:["vec3"],ea:!1},{$:"node_out",
ba:"zI",fa:["float"],ea:!1},{$:"node_out",ba:"zJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"zK",fa:["float"],ea:!1},{$:"node_out",ba:"zL",fa:["float"],ea:!1},{$:"node_out",ba:"zM",fa:["vec3"],ea:!1},{$:"node_out",ba:"zN",fa:["vec3"],ea:!1},{$:"node_out",ba:"zO",fa:["float"],ea:!1},{$:"node_out",ba:"zP",fa:["vec3"],ea:!1},{$:"node_out",ba:"zQ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"float zR = sqrt ( clamp ( zf , _0_0 , _1_0 ) ) ; zH = mix ( zi , zs , zR ) ; zI = mix ( zj , zt , zR ) ; if ( zm > _0_0 ) { if ( zA > _0_0 ) { zJ = mix ( zk , zu , zR ) ; zK = mix ( zl , zv , zR ) ; } else { zJ = zk ; zK = zl ; } } else { zJ = zu ; zK = zv ; } if ( zp > _0_0 ) { if ( zD > _0_0 ) { zN = mix ( zo , zC , zR ) ; } else { zN = zo ; } } else { zN = zC ; } zL = mix ( zm , zA , zR ) ; zM = mix ( zn , zB , zR ) ; zO = mix ( zp , zD , zR ) ; zP = mix ( zq , zE , zR ) ; zQ = mix ( zr , zF , zR ) ;".split(" ")}]},
{$:"node",ba:"UV_MERGED",ma:[],la:[{$:"node_out",ba:"zS",fa:["vec3"],ea:!1},{$:"node_out",ba:"zT",fa:["vec3"],ea:!1},{$:"node_param",ba:"si",fa:["GLSL_IN","vec2"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_zS"],ja:[{$:"txt",aa:"zS = rX ( si ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_zT"],ja:[{$:"txt",aa:"zT = vec3 ( si , _0_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"TEX_COORD_UV",ma:[],la:[{$:"node_out",ba:"zU",fa:["vec3"],ea:!1},{$:"node_param",ba:"sj",fa:["GLSL_IN",
"vec2"],ea:!1}],ja:[{$:"txt",aa:"zU = vec3 ( sj , _0_0 ) ;".split(" ")}]},{$:"node",ba:"TEX_COORD_NO",ma:[],la:[{$:"node_out",ba:"zV",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["zV","=","ot",";"]}]},{$:"node",ba:"TEX_COORD_GE",ma:[],la:[{$:"node_out",ba:"zW",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["IS_WORLD",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["zW","=","rT",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["zW","=","sr",";"]}]}]}]},{$:"node",ba:"TEX_COORD_OB",ma:[],la:[{$:"node_out",
ba:"zX",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["IS_WORLD",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:"zX = ap ( u_model_tsr_inverse , os ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["zX","=","sr",";"]}]}]}]},{$:"node",ba:"TEX_COORD_CA",ma:[],la:[{$:"node_out",ba:"zY",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"zY . xy = sB . xy ; zY . z = _1_0 ;".split(" ")}]},{$:"node",ba:"TEX_COORD_WI",ma:[],la:[{$:"node_out",ba:"zZ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"zZ . xy = l . xy / l . z ; zZ . z = _0_0 ;".split(" ")}]},
{$:"node",ba:"TEX_COORD_RE",ma:[],la:[{$:"node_out",ba:"z_",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"z_ = reflect ( - ou , ot ) ;".split(" ")}]},{$:"node",ba:"UVMAP",ma:[],la:[{$:"node_out",ba:"Aa",fa:["vec3"],ea:!1},{$:"node_param",ba:"sk",fa:["GLSL_IN","vec2"],ea:!1}],ja:[{$:"txt",aa:"Aa = vec3 ( sk , _0_0 ) ;".split(" ")}]},{$:"node",ba:"PARTICLE_INFO",ma:[],la:[{$:"node_out",ba:"Ab",fa:["float"],ea:!1},{$:"node_out",ba:"Ac",fa:["float"],ea:!1},{$:"node_out",ba:"Ad",fa:["float"],ea:!1},{$:"node_out",
ba:"Ae",fa:["vec3"],ea:!1},{$:"node_out",ba:"Af",fa:["float"],ea:!1},{$:"node_out",ba:"Ag",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ah",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Ab = _0_0 ; Ac = _0_0 ; Ad = _0_0 ; Ae = vec3 ( _0_0 ) ; Af = _0_0 ; Ag = Ae ; Ah = Ae ;".split(" ")}]},{$:"node",ba:"HAIR_INFO",ma:[],la:[{$:"node_out",ba:"Ai",fa:["float"],ea:!1},{$:"node_out",ba:"Aj",fa:["float"],ea:!1},{$:"node_out",ba:"Ak",fa:["float"],ea:!1},{$:"node_out",ba:"Al",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Ai = _0_0 ; Aj = _0_0 ; Ak = _0_0 ; Al = vec3 ( _0_0 ) ;".split(" ")}]},
{$:"node",ba:"OBJECT_INFO",ma:[{$:"node_var",ba:"USE_LOCATION_OUT",aa:["0"]},{$:"node_var",ba:"USE_OBJ_IND_OUT",aa:["0"]},{$:"node_var",ba:"USE_MAT_IND_OUT",aa:["0"]},{$:"node_var",ba:"USE_RANDOM_OUT",aa:["0"]}],la:[{$:"node_out",ba:"Am",fa:["vec3"],ea:!1},{$:"node_out",ba:"An",fa:["float"],ea:!1},{$:"node_out",ba:"Ao",fa:["float"],ea:!1},{$:"node_out",ba:"Ap",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_LOCATION_OUT"],ja:[{$:"txt",aa:"Am = u_model_tsr [ 0 ] . xyz ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OBJ_IND_OUT"],ja:[{$:"txt",aa:"An = u_obj_info . r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MAT_IND_OUT"],ja:[{$:"txt",aa:"Ao = u_obj_info . g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_RANDOM_OUT"],ja:[{$:"txt",aa:"Ap = u_obj_info . b ;".split(" ")}]}]}]},{$:"node",ba:"WIREFRAME",ma:[],la:[{$:"node_in",ba:"Aq",fa:["float"],ea:!1},{$:"node_out",ba:"Ar",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["Ar","=","Aq",";"]}]},{$:"node",
ba:"TANGENT",ma:[],la:[{$:"node_out",ba:"As",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"As = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"LAYER_WEIGHT",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"At",fa:["float"],ea:!1},{$:"node_in",ba:"Au",fa:["vec3"],ea:!1},{$:"node_out",ba:"Av",fa:["float"],ea:!1},{$:"node_out",ba:"Aw",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:"vec3 cr = normalize ( Au ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",
aa:["vec3","cr","=","ot",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["CAMERA_TYPE","CAM_TYPE_PERSP",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"vec3 Ax = normalize ( ou ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","Ax","=","u_camera_direction",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Av"],ja:[{$:"txt",aa:"float sa = max ( _1_0 - At , 0.00001 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"non_equal_expr",ia:2}],ja:[{$:"txt",aa:"sa = gl_FrontFacing == false ? sa : _1_0 / sa ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"sa = gl_FrontFacing ? sa : _1_0 / sa ;".split(" ")}]}]},{$:"txt",aa:"Av = sb ( Ax , cr , sa ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["Av","=","_0_0",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Aw"],ja:[{$:"txt",aa:"Aw = abs ( dot ( Ax , cr ) ) ; float ew = At ; if ( ew != _0_5 ) { ew = clamp ( ew , _0_0 , 0.99999 ) ; ew = ( ew < _0_5 ) ? 2.0 * ew : _0_5 / ( _1_0 - ew ) ; Aw = pow ( Aw , ew ) ; } Aw = _1_0 - Aw ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",
aa:["Aw","=","_0_0",";"]}]}]}]},{$:"node",ba:"LIGHT_PATH",ma:[],la:[{$:"node_out",ba:"Ay",fa:["float"],ea:!1},{$:"node_out",ba:"Az",fa:["float"],ea:!1},{$:"node_out",ba:"AA",fa:["float"],ea:!1},{$:"node_out",ba:"AB",fa:["float"],ea:!1},{$:"node_out",ba:"AC",fa:["float"],ea:!1},{$:"node_out",ba:"AD",fa:["float"],ea:!1},{$:"node_out",ba:"AE",fa:["float"],ea:!1},{$:"node_out",ba:"AF",fa:["float"],ea:!1},{$:"node_out",ba:"AG",fa:["float"],ea:!1},{$:"node_out",ba:"AH",fa:["float"],ea:!1},{$:"node_out",
ba:"AI",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Ay = Az = AA = _0_0 ; AB = AC = AD = _0_0 ; AE = AI = AG = AH = _0_0 ; AF = _0_0 ;".split(" ")}]},{$:"node",ba:"ATTRIBUTE",ma:[],la:[{$:"node_out",ba:"AJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"AK",fa:["vec3"],ea:!1},{$:"node_out",ba:"AL",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"AJ = AK = vec3 ( _0_0 ) ; AL = _0_0 ;".split(" ")}]},{$:"node",ba:"SCRIPT",ma:[],la:[],ja:[]},{$:"node",ba:"CURVE_VEC",ma:[{$:"node_var",ba:"READ_R",aa:["0"]},{$:"node_var",ba:"READ_G",
aa:["0"]},{$:"node_var",ba:"READ_B",aa:["0"]},{$:"node_var",ba:"NODE_TEX_ROW",aa:["_0_0"]}],la:[{$:"node_in",ba:"AM",fa:["float"],ea:!1},{$:"node_in",ba:"AN",fa:["vec3"],ea:!1},{$:"node_out",ba:"AO",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["AO","=","AN",";"]},{$:"node_cond",da:[{$:"node_if",ga:["READ_R"],ja:[{$:"txt",aa:"AO . r = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * AN . r + _0_5 , NODE_TEX_ROW ) ) . r - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_G"],ja:[{$:"txt",
aa:"AO . g = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * AN . g + _0_5 , NODE_TEX_ROW ) ) . g - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_B"],ja:[{$:"txt",aa:"AO . b = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * AN . b + _0_5 , NODE_TEX_ROW ) ) . b - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"txt",aa:"AO = mix ( AN , AO , AM ) ;".split(" ")}]},{$:"node",ba:"CURVE_RGB",ma:[{$:"node_var",ba:"READ_A",aa:["0"]},{$:"node_var",ba:"READ_R",aa:["0"]},{$:"node_var",ba:"READ_G",
aa:["0"]},{$:"node_var",ba:"READ_B",aa:["0"]},{$:"node_var",ba:"NODE_TEX_ROW",aa:["_0_0"]}],la:[{$:"node_in",ba:"AP",fa:["float"],ea:!1},{$:"node_in",ba:"AQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"AR",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["READ_A"],ja:[{$:"txt",aa:"float r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AQ . r , NODE_TEX_ROW ) ) . a ; float g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AQ . g , NODE_TEX_ROW ) ) . a ; float b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AQ . b , NODE_TEX_ROW ) ) . a ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float r = AQ . r ; float g = AQ . g ; float b = AQ . b ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_R"],ja:[{$:"txt",aa:"AR . r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( r , NODE_TEX_ROW ) ) . r ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"AR . r = r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_G"],ja:[{$:"txt",aa:"AR . g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( g , NODE_TEX_ROW ) ) . g ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",
aa:"AR . g = g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_B"],ja:[{$:"txt",aa:"AR . b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( b , NODE_TEX_ROW ) ) . b ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"AR . b = b ;".split(" ")}]}]},{$:"txt",aa:"AR = mix ( AQ , AR , AP ) ;".split(" ")}]},{$:"node",ba:"VALTORGB",ma:[{$:"node_var",ba:"NODE_TEX_ROW",aa:["_0_0"]}],la:[{$:"node_in",ba:"AS",fa:["float"],ea:!1},{$:"node_out",ba:"AT",fa:["vec3"],ea:!1},{$:"node_out",ba:"AU",fa:["float"],
ea:!1}],ja:[{$:"txt",aa:"vec4 AV = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AS , NODE_TEX_ROW ) ) ; AT = AV . rgb ; AU = AV . a ;".split(" ")}]},{$:"node",ba:"MAPPING",ma:[{$:"node_var",ba:"MAPPING_SCALE_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_SCALE",aa:["vec3","(","_1_0",")"]},{$:"node_var",ba:"MAPPING_TRANS_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_TRANS",aa:["vec3","(","_0_0",")"]},{$:"node_var",ba:"MAPPING_TRS_MATRIX_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_TRS_MATRIX",aa:["mat4","(","_1_0",")"]},
{$:"node_var",ba:"MAPPING_MIN_CLIP_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_MIN_CLIP",aa:["vec3","(","_0_0",")"]},{$:"node_var",ba:"MAPPING_MAX_CLIP_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_MAX_CLIP",aa:["vec3","(","_1_0",")"]},{$:"node_var",ba:"MAPPING_IS_NORMAL",aa:["0"]}],la:[{$:"node_in",ba:"AW",fa:["vec3"],ea:!1},{$:"node_out",ba:"AX",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["AX","=","AW",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_SCALE_DEF"],ja:[{$:"txt",aa:"AX = AX * MAPPING_SCALE ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_TRANS_DEF"],ja:[{$:"txt",aa:"AX = AX + MAPPING_TRANS ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_TRS_MATRIX_DEF"],ja:[{$:"txt",aa:"AX = ( MAPPING_TRS_MATRIX * vec4 ( AX , _1_0 ) ) . xyz ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_MIN_CLIP_DEF"],ja:[{$:"txt",aa:"AX = max ( AX , MAPPING_MIN_CLIP ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_MAX_CLIP_DEF"],ja:[{$:"txt",aa:"AX = min ( AX , MAPPING_MAX_CLIP ) ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_IS_NORMAL"],ja:[{$:"txt",aa:"AX = normalize ( AX ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ADD",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"AY",fa:["float"],ea:!1},{$:"node_in",ba:"AZ",fa:["float"],ea:!1},{$:"node_out",ba:"A_",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"A_ = AY + AZ ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"A_ = clamp ( A_ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_SUBTRACT",
ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ba",fa:["float"],ea:!1},{$:"node_in",ba:"Bb",fa:["float"],ea:!1},{$:"node_out",ba:"Bc",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bc = Ba - Bb ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Bc = clamp ( Bc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MULTIPLY",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Bd",fa:["float"],ea:!1},{$:"node_in",ba:"Be",fa:["float"],
ea:!1},{$:"node_out",ba:"Bf",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bf = Bd * Be ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Bf = clamp ( Bf , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_DIVIDE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Bg",fa:["float"],ea:!1},{$:"node_in",ba:"Bh",fa:["float"],ea:!1},{$:"node_out",ba:"Bi",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bi = ( Bh != _0_0 ) ? Bg / Bh : _0_0 ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Bi = clamp ( Bi , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_SINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Bj",fa:["float"],ea:!1},{$:"node_in",ba:"Bk",fa:["float"],ea:!1},{$:"node_out",ba:"Bl",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bl = sin ( Bj ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Bl = clamp ( Bl , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Bk",";"]}]},
{$:"node",ba:"MATH_COSINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Bm",fa:["float"],ea:!1},{$:"node_in",ba:"Bn",fa:["float"],ea:!1},{$:"node_out",ba:"Bo",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bo = cos ( Bm ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Bo = clamp ( Bo , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Bn",";"]}]},{$:"node",ba:"MATH_TANGENT",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Bp",
fa:["float"],ea:!1},{$:"node_in",ba:"Bq",fa:["float"],ea:!1},{$:"node_out",ba:"Br",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Br = tan ( Bp ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Br = clamp ( Br , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Bq",";"]}]},{$:"node",ba:"MATH_ARCSINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Bs",fa:["float"],ea:!1},{$:"node_in",ba:"Bt",fa:["float"],ea:!1},{$:"node_out",ba:"Bu",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:"Bu = ( Bs <= _1_0 && Bs >= - _1_0 ) ? asin ( Bs ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Bu = clamp ( Bu , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Bt",";"]}]},{$:"node",ba:"MATH_ARCCOSINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Bv",fa:["float"],ea:!1},{$:"node_in",ba:"Bw",fa:["float"],ea:!1},{$:"node_out",ba:"Bx",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bx = ( Bv <= _1_0 && Bv >= - _1_0 ) ? acos ( Bv ) : _0_0 ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Bx = clamp ( Bx , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Bw",";"]}]},{$:"node",ba:"MATH_ARCTANGENT",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"By",fa:["float"],ea:!1},{$:"node_in",ba:"Bz",fa:["float"],ea:!1},{$:"node_out",ba:"BA",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BA = atan ( By ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BA = clamp ( BA , _0_0 , _1_0 ) ;".split(" ")}]}]},
{$:"txt",aa:["Bz",";"]}]},{$:"node",ba:"MATH_POWER",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BB",fa:["float"],ea:!1},{$:"node_in",ba:"BC",fa:["float"],ea:!1},{$:"node_out",ba:"BD",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"if ( BB < _0_0 && BC != floor ( BC ) ) BD = _0_0 ; else if ( BC == _0_0 ) BD = _1_0 ; else if ( BB < _0_0 ) BD = mix ( _1_0 , - _1_0 , sign ( mod ( - BC , 2.0 ) ) ) * pow ( - BB , BC ) ; else if ( BB == _0_0 ) BD = _0_0 ; else BD = pow ( BB , BC ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BD = clamp ( BD , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_LOGARITHM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BE",fa:["float"],ea:!1},{$:"node_in",ba:"BF",fa:["float"],ea:!1},{$:"node_out",ba:"BG",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BG = ( BE > _0_0 && BF > _0_0 ) ? log2 ( BE ) / log2 ( BF ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BG = clamp ( BG , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{$:"node",ba:"MATH_MINIMUM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BH",fa:["float"],ea:!1},{$:"node_in",ba:"BI",fa:["float"],ea:!1},{$:"node_out",ba:"BJ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BJ = min ( BH , BI ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BJ = clamp ( BJ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MAXIMUM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BK",fa:["float"],ea:!1},
{$:"node_in",ba:"BL",fa:["float"],ea:!1},{$:"node_out",ba:"BM",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BM = max ( BK , BL ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BM = clamp ( BM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ROUND",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BN",fa:["float"],ea:!1},{$:"node_in",ba:"BO",fa:["float"],ea:!1},{$:"node_out",ba:"BP",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BP = floor ( BN + _0_5 ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BP = clamp ( BP , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["BO",";"]}]},{$:"node",ba:"MATH_LESS_THAN",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BQ",fa:["float"],ea:!1},{$:"node_in",ba:"BR",fa:["float"],ea:!1},{$:"node_out",ba:"BS",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BS = ( BQ < BR ) ? _1_0 : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BS = clamp ( BS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{$:"node",ba:"MATH_GREATER_THAN",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BT",fa:["float"],ea:!1},{$:"node_in",ba:"BU",fa:["float"],ea:!1},{$:"node_out",ba:"BV",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BV = ( BT > BU ) ? _1_0 : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BV = clamp ( BV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MODULO",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BW",fa:["float"],
ea:!1},{$:"node_in",ba:"BX",fa:["float"],ea:!1},{$:"node_out",ba:"BY",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BY = abs ( BX ) > 0.000001 ? mod ( BW , BX ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BY = clamp ( BY , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ABSOLUTE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BZ",fa:["float"],ea:!1},{$:"node_in",ba:"B_",fa:["float"],ea:!1},{$:"node_out",ba:"Ca",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:"Ca = abs ( BZ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Ca = clamp ( Ca , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["B_",";"]}]},{$:"node",ba:"MIX_RGB_MIX",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cb",fa:["float"],ea:!1},{$:"node_in",ba:"Cc",fa:["vec3"],ea:!1},{$:"node_in",ba:"Cd",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ce",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Cb , _0_0 , _1_0 ) ; Ce = mix ( Cc , Cd , zR ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Ce = clamp ( Ce , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_ADD",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cf",fa:["float"],ea:!1},{$:"node_in",ba:"Cg",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ch",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ci",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Cf , _0_0 , _1_0 ) ; Ci = mix ( Cg , Cg + Ch , zR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Ci = clamp ( Ci , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_MULTIPLY",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cj",fa:["float"],ea:!1},{$:"node_in",ba:"Ck",fa:["vec3"],ea:!1},{$:"node_in",ba:"Cl",fa:["vec3"],ea:!1},{$:"node_out",ba:"Cm",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Cj , _0_0 , _1_0 ) ; Cm = mix ( Ck , Ck * Cl , zR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],
ja:[{$:"txt",aa:"Cm = clamp ( Cm , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SUBTRACT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cn",fa:["float"],ea:!1},{$:"node_in",ba:"Co",fa:["vec3"],ea:!1},{$:"node_in",ba:"Cp",fa:["vec3"],ea:!1},{$:"node_out",ba:"Cq",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Cn , _0_0 , _1_0 ) ; Cq = mix ( Co , Co - Cp , zR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Cq = clamp ( Cq , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{$:"node",ba:"MIX_RGB_SCREEN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cr",fa:["float"],ea:!1},{$:"node_in",ba:"Cs",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ct",fa:["vec3"],ea:!1},{$:"node_out",ba:"Cu",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Cr , _0_0 , _1_0 ) ; float Cv = _1_0 - zR ; Cu = vec3 ( _1_0 ) - ( vec3 ( Cv ) + zR * ( vec3 ( _1_0 ) - Ct ) ) * ( vec3 ( _1_0 ) - Cs ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",
aa:"Cu = clamp ( Cu , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DIVIDE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cw",fa:["float"],ea:!1},{$:"node_in",ba:"Cx",fa:["vec3"],ea:!1},{$:"node_in",ba:"Cy",fa:["vec3"],ea:!1},{$:"node_out",ba:"Cz",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Cw , _0_0 , _1_0 ) ; float Cv = _1_0 - zR ; Cy += step ( Cy , vec3 ( _0_0 ) ) ; Cz = Cv * Cx + zR * Cx / Cy ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],
ja:[{$:"txt",aa:"Cz = clamp ( Cz , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DIFFERENCE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CA",fa:["float"],ea:!1},{$:"node_in",ba:"CB",fa:["vec3"],ea:!1},{$:"node_in",ba:"CC",fa:["vec3"],ea:!1},{$:"node_out",ba:"CD",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( CA , _0_0 , _1_0 ) ; CD = mix ( CB , abs ( CB - CC ) , zR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",
aa:"CD = clamp ( CD , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DARKEN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CE",fa:["float"],ea:!1},{$:"node_in",ba:"CF",fa:["vec3"],ea:!1},{$:"node_in",ba:"CG",fa:["vec3"],ea:!1},{$:"node_out",ba:"CH",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( CE , _0_0 , _1_0 ) ; CH = min ( CF . rgb , CG . rgb * zR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"CH = clamp ( CH , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{$:"node",ba:"MIX_RGB_LIGHTEN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CI",fa:["float"],ea:!1},{$:"node_in",ba:"CJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"CK",fa:["vec3"],ea:!1},{$:"node_out",ba:"CL",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( CI , _0_0 , _1_0 ) ; CL = max ( CJ . rgb , CK . rgb * zR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"CL = clamp ( CL , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_OVERLAY",
ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CM",fa:["float"],ea:!1},{$:"node_in",ba:"CN",fa:["vec3"],ea:!1},{$:"node_in",ba:"CO",fa:["vec3"],ea:!1},{$:"node_out",ba:"CP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( CM , _0_0 , _1_0 ) ; vec3 CQ = vec3 ( _1_0 - zR ) ; CP = mix ( CN * ( CQ + 2.0 * zR * CO ) , vec3 ( _1_0 ) - ( CQ + 2.0 * zR * ( vec3 ( _1_0 ) - CO ) ) * ( vec3 ( _1_0 ) - CN ) , step ( _0_5 , CN ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"CP = clamp ( CP , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DODGE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CR",fa:["float"],ea:!1},{$:"node_in",ba:"CS",fa:["vec3"],ea:!1},{$:"node_in",ba:"CT",fa:["vec3"],ea:!1},{$:"node_out",ba:"CU",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( CR , _0_0 , _1_0 ) ; vec3 CV = vec3 ( _1_0 ) - zR * CT ; vec3 CW = clamp ( CS / CV , _0_0 , _1_0 ) ; CU = mix ( mix ( CW , vec3 ( _1_0 ) , step ( CV , vec3 ( _0_0 ) ) ) , CS , step ( CS , vec3 ( _0_0 ) ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"CU = clamp ( CU , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_BURN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CX",fa:["float"],ea:!1},{$:"node_in",ba:"CY",fa:["vec3"],ea:!1},{$:"node_in",ba:"CZ",fa:["vec3"],ea:!1},{$:"node_out",ba:"C_",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( CX , _0_0 , _1_0 ) ; vec3 ko = vec3 ( _1_0 - zR ) ; vec3 CV = ko + zR * CZ ; vec3 CW = clamp ( vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - CY ) / CV , _0_0 , _1_0 ) ; C_ = mix ( CW , vec3 ( _0_0 ) , step ( CV , vec3 ( _0_0 ) ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"C_ = clamp ( C_ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_HUE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Da",fa:["float"],ea:!1},{$:"node_in",ba:"Db",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dc",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dd",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Da , _0_0 , _1_0 ) ; vec3 kg , De , CV ; Dd = Db ; De = kf ( Dc ) ; if ( De . y != _0_0 ) { kg = kf ( Dd ) ; kg . x = De . x ; CV = kh ( kg ) ; Dd = mix ( Dd , CV , zR ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dd = clamp ( Dd , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SATURATION",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Df",fa:["float"],ea:!1},{$:"node_in",ba:"Dg",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dh",fa:["vec3"],ea:!1},{$:"node_out",ba:"Di",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Df , _0_0 , _1_0 ) ; float Cv = _1_0 - zR ; Di = Dg ; vec3 kg , De ; kg = kf ( Di ) ; if ( kg . y != _0_0 ) { De = kf ( Dh ) ; kg . y = Cv * kg . y + zR * De . y ; Di = kh ( kg ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Di = clamp ( Di , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_VALUE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Dj",fa:["float"],ea:!1},{$:"node_in",ba:"Dk",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dl",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dm",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Dj , _0_0 , _1_0 ) ; float Cv = _1_0 - zR ; vec3 kg , De ; kg = kf ( Dk ) ; De = kf ( Dl ) ; kg . z = Cv * kg . z + zR * De . z ; Dm = kh ( kg ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dm = clamp ( Dm , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_COLOR",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Dn",fa:["float"],ea:!1},{$:"node_in",ba:"Do",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dp",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dq",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Dn , _0_0 , _1_0 ) ; vec3 kg , De , CV ; Dq = Do ; De = kf ( Dp ) ; if ( De . y != _0_0 ) { kg = kf ( Dq ) ; kg . x = De . x ; kg . y = De . y ; CV = kh ( kg ) ; Dq = mix ( Dq , CV , zR ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dq = clamp ( Dq , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SOFT_LIGHT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Dr",fa:["float"],ea:!1},{$:"node_in",ba:"Ds",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dt",fa:["vec3"],ea:!1},{$:"node_out",ba:"Du",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Dr , _0_0 , _1_0 ) ; float Cv = _1_0 - zR ; vec3 Dv = Dt + Ds - Dt * Ds ; Du = Ds * ( vec3 ( Cv ) + vec3 ( zR ) * ( ( vec3 ( _1_0 ) - Ds ) * Dt + Dv ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Du = clamp ( Du , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_LINEAR_LIGHT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Dw",fa:["float"],ea:!1},{$:"node_in",ba:"Dx",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dy",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dz",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Dw , _0_0 , _1_0 ) ; Dz = Dx + zR * ( 2.0 * Dy - vec3 ( _1_0 ) ) ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dz = clamp ( Dz , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_WORLD_RGB",ma:[],la:[{$:"node_in",ba:"DA",fa:["float"],ea:!1},{$:"node_in",ba:"DB",fa:["vec3"],ea:!1},{$:"node_in",ba:"DC",fa:["vec3"],ea:!1},{$:"node_out",ba:"DD",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( DA , _0_0 , _1_0 ) ; DD = mix ( DB , DC , zR ) ;".split(" ")}]},{$:"node",ba:"ADD_WORLD_RGB",ma:[],la:[{$:"node_in",ba:"DE",fa:["float"],ea:!1},{$:"node_in",
ba:"DF",fa:["vec3"],ea:!1},{$:"node_in",ba:"DG",fa:["vec3"],ea:!1},{$:"node_out",ba:"DH",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( DE , _0_0 , _1_0 ) ; DH = mix ( DF , DF + DG , zR ) ;".split(" ")}]},{$:"node",ba:"OUTPUT",ma:[],la:[{$:"node_in",ba:"DI",fa:["vec3"],ea:!1},{$:"node_in",ba:"DJ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"E = DI ; I = DJ ;".split(" ")}]},{$:"node",ba:"OUTPUT_SURFACE",ma:[],la:[{$:"node_in",ba:"DK",fa:["vec3"],ea:!1},{$:"node_in",ba:"DL",fa:["float"],ea:!1}],ja:[{$:"txt",
aa:"E = DK ; I = DL ;".split(" ")}]},{$:"node",ba:"OUTPUT_WORLD_SURFACE",ma:[],la:[{$:"node_in",ba:"DM",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"E = DM ; I = _1_0 ;".split(" ")}]},{$:"node",ba:"MATERIAL_BEGIN",ma:[{$:"node_var",ba:"MATERIAL_EXT",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_NORMAL",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_DIFFUSE",aa:["0"]},{$:"node_var",ba:"SHADELESS_MAT",aa:["0"]}],la:[{$:"node_in",ba:"DN",fa:["vec3"],ea:!1},{$:"node_in",ba:"DO",fa:["vec3"],ea:!1},{$:"node_in",ba:"DP",fa:["float"],
ea:!1},{$:"node_in",ba:"DQ",fa:["vec3"],ea:!0},{$:"node_in",ba:"DR",fa:["float"],ea:!0},{$:"node_out",ba:"DS",fa:["vec3"],ea:!1},{$:"node_out",ba:"DT",fa:["vec3"],ea:!1},{$:"node_out",ba:"DU",fa:["vec3"],ea:!1},{$:"node_out",ba:"DV",fa:["vec3"],ea:!1},{$:"node_out",ba:"DW",fa:["vec3"],ea:!1},{$:"node_out",ba:"DX",fa:["vec2"],ea:!1},{$:"node_out",ba:"DY",fa:["vec2"],ea:!1},{$:"node_out",ba:"DZ",fa:["vec4"],ea:!1},{$:"node_param",ba:"sl",fa:["const","vec2"],ea:!1},{$:"node_param",ba:"sm",fa:["const",
"vec3"],ea:!1}],ja:[{$:"txt",aa:"DU = DN ; DV = sm [ 0 ] * DO ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_NORMAL"],ja:[{$:"txt",aa:"DW = normalize ( DQ ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["DW","=","ot",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["SHADELESS_MAT",{$:"logic_negative_expr",ia:1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MATERIAL_EXT"],ja:[{$:"txt",aa:"DS = DR * DU ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"DS = sC * DU ;".split(" ")}]}]},{$:"node_cond",
da:[{$:"node_if",ga:["USE_MATERIAL_DIFFUSE"],ja:[{$:"txt",aa:["DU","*=","DP",";"]}]}]},{$:"txt",aa:"DT = sD * u_environment_energy * cz ( DW ) ; DZ = cC ( DU ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NUM_LIGHTS",0,{$:"g_expr",ia:2}],ja:[{$:"txt",aa:"DX = vec2 ( sl [ 0 ] , sl [ 1 ] ) ; DY = vec2 ( sm [ 1 ] , sm [ 2 ] ) ;".split(" ")}]}]},{$:"txt",aa:["H","=","DZ",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"DS = vec3 ( _0_0 ) ; DT = vec3 ( _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATERIAL_END",
ma:[{$:"node_var",ba:"MATERIAL_EXT",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_DIFFUSE",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_SPECULAR",aa:["0"]}],la:[{$:"node_in",ba:"D_",fa:["vec4"],ea:!1},{$:"node_in",ba:"Ea",fa:["vec3"],ea:!1},{$:"node_in",ba:"Eb",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ec",fa:["float"],ea:!0},{$:"node_in",ba:"Ed",fa:["float"],ea:!0},{$:"node_in",ba:"Ee",fa:["float"],ea:!0},{$:"node_out",ba:"Ef",fa:["vec3"],ea:!0},{$:"node_out",ba:"Eg",fa:["float"],ea:!0},{$:"node_out",ba:"Eh",fa:["vec3"],
ea:!0},{$:"node_out",ba:"Ei",fa:["vec3"],ea:!0},{$:"node_out",ba:"Ej",fa:["vec3"],ea:!0},{$:"node_param",ba:"sn",fa:["float"],ea:!1},{$:"node_param",ba:"so",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ef"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_DIFFUSE"],ja:[{$:"txt",aa:"Ef = D_ . rgb ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"Ef = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MATERIAL_EXT","REFLECTION_TYPE","REFL_NONE",{$:"non_equal_expr",
ia:2},{$:"logical_and_expr",ia:2}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_TYPE","REFL_PLANE",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"cL ( Ef , ou , Eb , Ec , u_view_tsr_frag ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"cL ( Ef , ou , Eb , Ec , mat3 ( _0_0 ) ) ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:["Ef","+=","Ea",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Eh"],ja:[{$:"txt",aa:["Eh","=","Eb",";"]}]}]},{$:"node_cond",
da:[{$:"node_if",ga:["MATERIAL_EXT"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ei"],ja:[{$:"txt",aa:"Ei = D_ . rgb ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ej"],ja:[{$:"txt",aa:["Ej","=","Ea",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Eg"],ja:[{$:"txt",aa:"Eg = clamp ( Ee , _0_0 , _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:"float t = max ( max ( Ea . r , Ea . g ) , Ea . b ) * Ed ; Eg = clamp ( Ee * ( _1_0 - t ) + t , _0_0 , _1_0 ) ;".split(" ")}]}]}]}]}]},
{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Eg"],ja:[{$:"txt",aa:"Eg = clamp ( sn , _0_0 , _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:"float t = max ( max ( Ea . r , Ea . g ) , Ea . b ) * so ; Eg = sn * ( _1_0 - t ) + t ;".split(" ")}]}]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:["F","=","Ea",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"F = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:["G",
"=","Eb",";"]}]},{$:"node",ba:"LIGHTING_AMBIENT",ma:[],la:[{$:"node_in",ba:"oL",fa:["vec3"],ea:!1},{$:"node_in",ba:"oM",fa:["vec3"],ea:!1},{$:"node_in",ba:"oN",fa:["vec3"],ea:!1},{$:"node_out",ba:"oO",fa:["vec4"],ea:!1},{$:"node_out",ba:"oP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"oO = vec4 ( oL + oN * oM , _0_0 ) ; oP = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"LIGHTING_LAMP",ma:[{$:"node_var",ba:"LAMP_TYPE",aa:["HEMI"]},{$:"node_var",ba:"LAMP_IND",aa:["0"]},{$:"node_var",ba:"LAMP_SPOT_SIZE",aa:["0.8"]},
{$:"node_var",ba:"LAMP_SPOT_BLEND",aa:["0.03"]},{$:"node_var",ba:"LAMP_LIGHT_DIST",aa:["30.0"]},{$:"node_var",ba:"LAMP_SHADOW_MAP_IND",aa:["-","1"]},{$:"node_var",ba:"LAMP_USE_SPHERE",aa:["0"]}],la:[{$:"node_in",ba:"oQ",fa:["vec4"],ea:!1},{$:"node_out",ba:"oR",fa:["vec3"],ea:!1},{$:"node_out",ba:"oS",fa:["vec2"],ea:!1},{$:"node_out",ba:"oT",fa:["vec3"],ea:!1},{$:"node_out",ba:"oU",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"oS = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","HEMI",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:["oU","=","_0_5",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["oU","=","_0_0",";"]}]}]},{$:"txt",aa:"oT = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_SHADOW_MAP_IND",1,{$:"negative_expr",ia:1},{$:"non_equal_expr",ia:2}],ja:[{$:"txt",aa:"oT *= oQ [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",
ia:2},"LAMP_TYPE","POINT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"vec3 oV = u_light_positions [ LAMP_IND ] . xyz ; oR = oV - os ; float aM = length ( oR ) ; oT *= LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oR = normalize ( oR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"vec3 oX = u_light_directions [ LAMP_IND ] ; float oY = dot ( oR , oX ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oT *= oY ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["LAMP_USE_SPHERE"],ja:[{$:"txt",aa:"oT *= max ( LAMP_LIGHT_DIST - aM , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]},{$:"node_else",ja:[{$:"txt",aa:"oR = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{$:"node",ba:"DIFFUSE_FRESNEL",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"oZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"o_",fa:["vec2"],ea:!1},{$:"node_in",ba:"pa",fa:["vec3"],ea:!1},{$:"node_in",ba:"pb",fa:["float"],ea:!1},{$:"node_in",
ba:"pc",fa:["vec2"],ea:!1},{$:"node_out",ba:"pd",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["vec3","r_","=","pa",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pe = cross ( oZ , B . xyz ) ; r_ = cross ( pe , B . xyz ) ; r_ = - normalize ( r_ ) ;".split(" ")}]}]},{$:"txt",aa:"pd = _0_0 ; if ( o_ . r != _0_0 ) { float pf = ( _1_0 - pb ) * dot ( r_ , oZ ) + pb ; if ( pc [ 0 ] == _0_0 ) { pd = _1_0 ; } else { float t = _1_0 + abs ( pf ) ; t = pc [ 1 ] + ( _1_0 - pc [ 1 ] ) * pow ( t , pc [ 0 ] ) ; pd = clamp ( t , _0_0 , _1_0 ) ; } pd = max ( pd , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"DIFFUSE_LAMBERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pg",fa:["vec3"],ea:!1},{$:"node_in",ba:"ph",fa:["vec2"],ea:!1},{$:"node_in",ba:"pi",fa:["vec3"],ea:!1},{$:"node_in",ba:"pj",fa:["float"],ea:!1},{$:"node_out",ba:"pk",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["vec3","r_","=","pi",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pe = cross ( pg , B . xyz ) ; r_ = cross ( pe , B . xyz ) ; r_ = - normalize ( r_ ) ;".split(" ")}]}]},
{$:"txt",aa:"pk = _0_0 ; if ( ph . r != _0_0 ) { float pf = ( _1_0 - pj ) * dot ( r_ , pg ) + pj ; pk = max ( pf , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_OREN_NAYAR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pl",fa:["vec3"],ea:!1},{$:"node_in",ba:"pm",fa:["vec2"],ea:!1},{$:"node_in",ba:"pn",fa:["vec3"],ea:!1},{$:"node_in",ba:"po",fa:["float"],ea:!1},{$:"node_in",ba:"pr",fa:["vec2"],ea:!1},{$:"node_out",ba:"pu",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["vec3",
"r_","=","pn",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pe = cross ( pl , B . xyz ) ; r_ = cross ( pe , B . xyz ) ; r_ = - normalize ( r_ ) ;".split(" ")}]}]},{$:"txt",aa:"pu = _0_0 ; if ( pm . r != _0_0 ) { float pf = ( _1_0 - po ) * dot ( r_ , pl ) + po ; if ( pr [ 0 ] > _0_0 ) { float pv = max ( dot ( r_ , ou ) , _0_0 ) ; float pw = pr [ 0 ] * pr [ 0 ] ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = pl - pf * r_ ; vec3 py = ou - pv * r_ ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) pu = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; pu = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else pu = pf ; pu = max ( pu , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"DIFFUSE_MINNAERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pD",fa:["vec3"],ea:!1},{$:"node_in",ba:"pE",fa:["vec2"],ea:!1},{$:"node_in",ba:"pF",fa:["vec3"],ea:!1},{$:"node_in",ba:"pG",fa:["float"],ea:!1},{$:"node_in",ba:"pH",fa:["vec2"],ea:!1},{$:"node_out",ba:"pI",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["vec3","r_","=","pF",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pe = cross ( pD , B . xyz ) ; r_ = cross ( pe , B . xyz ) ; r_ = - normalize ( r_ ) ;".split(" ")}]}]},
{$:"txt",aa:"pI = _0_0 ; if ( pE . r != _0_0 ) { float pf = ( _1_0 - pG ) * dot ( r_ , pD ) + pG ; float pv = max ( dot ( r_ , ou ) , _0_0 ) ; if ( pH [ 0 ] <= _1_0 ) pI = pf * pow ( max ( pv * pf , 0.1 ) , pH [ 0 ] - _1_0 ) ; else pI = pf * pow ( 1.0001 - pv , pH [ 0 ] - _1_0 ) ; pI = max ( pI , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"pK",fa:["vec2"],ea:!1},{$:"node_in",
ba:"pL",fa:["vec3"],ea:!1},{$:"node_in",ba:"pM",fa:["float"],ea:!1},{$:"node_in",ba:"pN",fa:["vec2"],ea:!1},{$:"node_out",ba:"pO",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["vec3","r_","=","pL",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pe = cross ( pJ , B . xyz ) ; r_ = cross ( pe , B . xyz ) ; r_ = - normalize ( r_ ) ;".split(" ")}]}]},{$:"txt",aa:"pO = _0_0 ; if ( pK . r != _0_0 ) { float pf = ( _1_0 - pM ) * dot ( r_ , pJ ) + pM ; float pP = acos ( pf ) ; if ( pP < pN [ 0 ] ) pO = _1_0 ; else if ( pP > ( pN [ 0 ] + pN [ 1 ] ) || pN [ 1 ] == _0_0 ) pO = _0_0 ; else pO = _1_0 - ( ( pP - pN [ 0 ] ) / pN [ 1 ] ) ; pO = max ( pO , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"SPECULAR_PHONG",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"pR",fa:["vec2"],ea:!1},{$:"node_in",ba:"pS",fa:["vec3"],ea:!1},{$:"node_in",ba:"pT",fa:["float"],ea:!1},{$:"node_in",ba:"pU",fa:["vec2"],ea:!1},{$:"node_out",ba:"pV",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"pV = _0_0 ; if ( pR . g == _1_0 ) { vec3 pW = normalize ( pQ + ou ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",
aa:"if ( pT == _0_0 ) { pV = dot ( B . xyz , pW ) ; pV = sqrt ( _1_0 - pV * pV ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"pV = ( _1_0 - pT ) * max ( dot ( pS , pW ) , _0_0 ) + pT ;".split(" ")}]}]},{$:"txt",aa:"pV = pow ( pV , pU [ 0 ] ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_COOKTORR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pX",fa:["vec3"],ea:!1},{$:"node_in",ba:"pY",fa:["vec2"],ea:!1},{$:"node_in",ba:"pZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"p_",fa:["float"],
ea:!1},{$:"node_in",ba:"qa",fa:["vec2"],ea:!1},{$:"node_out",ba:"qb",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qb = _0_0 ; if ( pY . g != _0_0 ) { vec3 pW = normalize ( pX + ou ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"if ( p_ == _0_0 ) { qb = dot ( B . xyz , pW ) ; qb = sqrt ( _1_0 - qb * qb ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"qb = max ( dot ( pZ , pW ) , _0_0 ) ; qb = ( _1_0 - p_ ) * qb + p_ ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float pv = max ( dot ( B . xyz , ou ) , _0_0 ) ; pv = sqrt ( _1_0 - pv * pv ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"float pv = max ( dot ( pZ , ou ) , _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:"qb = pow ( qb , qa [ 0 ] ) ; qb = qb / ( 0.1 + pv ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_WARDISO",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qc",fa:["vec3"],ea:!1},{$:"node_in",ba:"qd",fa:["vec2"],ea:!1},{$:"node_in",ba:"qe",
fa:["vec3"],ea:!1},{$:"node_in",ba:"qf",fa:["float"],ea:!1},{$:"node_in",ba:"qg",fa:["vec2"],ea:!1},{$:"node_out",ba:"qh",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qh = _0_0 ; if ( qd . g == _1_0 ) { vec3 pW = normalize ( qc + ou ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qi = _0_0 ; float pv = _0_0 ; float qj = _0_0 ; if ( qf == _0_0 ) { qi = dot ( B . xyz , pW ) ; pv = dot ( B . xyz , ou ) ; qj = dot ( B . xyz , qc ) ; qi = sqrt ( _1_0 - qi * qi ) ; pv = sqrt ( _1_0 - pv * pv ) ; qj = sqrt ( _1_0 - qj * qj ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qi = max ( dot ( qe , pW ) , 0.01 ) ; float pv = max ( dot ( qe , ou ) , 0.01 ) ; float qj = max ( dot ( qe , qc ) , 0.01 ) ;".split(" ")}]}]},{$:"txt",aa:"float bK = tan ( acos ( qi ) ) ; float L = max ( qg [ 0 ] , 0.01 ) ; qh = qj * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bK * bK ) / ( L * L ) ) / ( sqrt ( pv * qj ) ) ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qk",fa:["vec3"],
ea:!1},{$:"node_in",ba:"ql",fa:["vec2"],ea:!1},{$:"node_in",ba:"qm",fa:["vec3"],ea:!1},{$:"node_in",ba:"qn",fa:["float"],ea:!1},{$:"node_in",ba:"qo",fa:["vec2"],ea:!1},{$:"node_out",ba:"qr",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qr = _0_0 ; if ( ql . g == _1_0 ) { vec3 cj = normalize ( qk + ou ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qu = dot ( cj , B . xyz ) ; float bK = qo [ 0 ] + qo [ 1 ] ; if ( qn == _0_0 ) bK = acos ( sqrt ( _1_0 - qu * qu ) ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float bK = acos ( dot ( cj , qm ) ) ;".split(" ")}]}]},{$:"txt",aa:"if ( bK < qo [ 0 ] ) qr = _1_0 ; else if ( bK >= qo [ 0 ] + qo [ 1 ] || qo [ 1 ] == _0_0 ) qr = _0_0 ; else qr = _1_0 - ( bK - qo [ 0 ] ) / qo [ 1 ] ; }".split(" ")}]},{$:"node",ba:"SPECULAR_BLINN",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qv",fa:["vec3"],ea:!1},{$:"node_in",ba:"qw",fa:["vec2"],ea:!1},{$:"node_in",ba:"qx",fa:["vec3"],ea:!1},{$:"node_in",ba:"qy",fa:["float"],
ea:!1},{$:"node_in",ba:"qz",fa:["vec2"],ea:!1},{$:"node_out",ba:"qA",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"float qB = qz [ 0 ] ; float qC = qz [ 1 ] ; qA = _0_0 ; if ( qw . g == _1_0 ) { if ( qB < _1_0 || qC == _0_0 ) qA = _0_0 ; else { if ( qC < 100.0 ) qC = sqrt ( _1_0 / qC ) ; else qC = 10.0 / qC ; vec3 pW = normalize ( ou + qv ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qi = _0_0 ; if ( qy == _0_0 ) { float qD = dot ( B . xyz , pW ) ; qi = sqrt ( _1_0 - qD * qD ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qi = ( _1_0 - qy ) * max ( dot ( qx , pW ) , _0_0 ) + qy ;".split(" ")}]}]},{$:"txt",aa:"if ( qi < _0_0 ) qA = _0_0 ; else { float pv = max ( dot ( qx , ou ) , 0.01 ) ; float qj = dot ( qx , qv ) ; if ( qj <= 0.01 ) qA = _0_0 ; else { float qE = max ( dot ( ou , pW ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qi * pv ) / qE ; float du = ( 2.0 * qi * qj ) / qE ; float g = min ( min ( a , b ) , du ) ; float p = sqrt ( pow ( qB , 2.0 ) + pow ( qE , 2.0 ) - _1_0 ) ; float mi = pow ( p - qE , 2.0 ) / pow ( p + qE , 2.0 ) * ( _1_0 + pow ( qE * ( p + qE ) - _1_0 , 2.0 ) / pow ( qE * ( p - qE ) + _1_0 , 2.0 ) ) ; float pP = acos ( qi ) ; qA = max ( mi * g * exp ( - pow ( pP , 2.0 ) / ( 2.0 * pow ( qC , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{$:"node",ba:"LIGHTING_APPLY",ma:[],la:[{$:"node_in",ba:"qF",fa:["vec4"],ea:!1},{$:"node_in",ba:"qG",fa:["vec3"],ea:!1},{$:"node_in",ba:"qH",fa:["float"],ea:!1},{$:"node_in",ba:"qI",fa:["float"],ea:!1},{$:"node_in",ba:"qJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"qK",fa:["vec3"],ea:!1},{$:"node_in",ba:"qL",fa:["vec4"],ea:!1},{$:"node_in",ba:"qM",fa:["vec3"],ea:!1},{$:"node_in",ba:"qN",fa:["vec3"],ea:!1},{$:"node_in",ba:"qO",fa:["vec3"],ea:!1},{$:"node_in",ba:"qP",fa:["float"],ea:!1},{$:"node_out",ba:"qQ",
fa:["vec4"],ea:!1},{$:"node_out",ba:"qR",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NODE_B4W_TRANSLUCENCY"],ja:[{$:"txt",aa:"if ( dot ( qJ , qK ) * dot ( ou , qK ) < _0_0 ) { float Ek = qL . x ; float El = qL . y ; float Em = qL . z ; float En = qL . w ; float Eo = clamp ( abs ( dot ( qJ , qK ) ) , _0_0 , _1_0 ) ; float Ep = clamp ( dot ( ou , - qJ ) , _0_0 , _1_0 ) ; float Eq = pow ( Ep , El ) ; qQ = qF + qP * vec4 ( qO * Eo * pow ( qM , vec3 ( Ek ) ) , _1_0 ) ; qQ += Em * mix ( vec4 ( qM , _1_0 ) , vec4 ( _1_0 ) , En ) * qP * vec4 ( qO * Eo * vec3 ( Eq ) , _1_0 ) ; } else { qQ = qF + vec4 ( qO * qM * qH , qI ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"qQ = qF + vec4 ( qO * qM * qH , qI ) ;".split(" ")}]}]},{$:"txt",aa:"qR = qG + qO * qN * qI ;".split(" ")}]},{$:"node",ba:"RGB",ma:[{$:"node_var",ba:"RGB_IND",aa:["0"]}],la:[{$:"node_out",ba:"Er",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Er = u_node_rgbs [ RGB_IND ] ;".split(" ")}]},{$:"node",ba:"RGBTOBW",ma:[],la:[{$:"node_in",ba:"Es",fa:["vec3"],ea:!1},{$:"node_out",ba:"Et",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Et = dot ( Es , vec3 ( 0.35 , 0.45 , 0.2 ) ) ;".split(" ")}]},
{$:"node",ba:"SEPRGB",ma:[],la:[{$:"node_in",ba:"Eu",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ev",fa:["float"],ea:!0},{$:"node_out",ba:"Ew",fa:["float"],ea:!0},{$:"node_out",ba:"Ex",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ev"],ja:[{$:"txt",aa:"Ev = Eu . r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ew"],ja:[{$:"txt",aa:"Ew = Eu . g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ex"],ja:[{$:"txt",aa:"Ex = Eu . b ;".split(" ")}]}]}]},{$:"node",
ba:"SEPHSV",ma:[],la:[{$:"node_in",ba:"Ey",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ez",fa:["float"],ea:!0},{$:"node_out",ba:"EA",fa:["float"],ea:!0},{$:"node_out",ba:"EB",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"vec3 EC = kf ( Ey ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ez"],ja:[{$:"txt",aa:"Ez = EC . r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EA"],ja:[{$:"txt",aa:"EA = EC . g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EB"],ja:[{$:"txt",aa:"EB = EC . b ;".split(" ")}]}]}]},
{$:"node",ba:"SQUEEZE",ma:[],la:[{$:"node_in",ba:"ED",fa:["float"],ea:!1},{$:"node_in",ba:"EE",fa:["float"],ea:!1},{$:"node_in",ba:"EF",fa:["float"],ea:!1},{$:"node_out",ba:"EG",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"EG = _1_0 / ( _1_0 + pow ( 2.71828183 , - ( ED - EF ) * EE ) ) ;".split(" ")}]},{$:"node",ba:"GAMMA",ma:[],la:[{$:"node_in",ba:"EH",fa:["vec3"],ea:!1},{$:"node_in",ba:"EI",fa:["float"],ea:!1},{$:"node_out",ba:"EJ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"EJ = EH ; if ( EJ . x > _0_0 ) EJ . x = pow ( EH . x , EI ) ; if ( EJ . y > _0_0 ) EJ . y = pow ( EH . y , EI ) ; if ( EJ . z > _0_0 ) EJ . z = pow ( EH . z , EI ) ;".split(" ")}]},
{$:"node",ba:"B4W_SRGB_TO_LINEAR",ma:[],la:[{$:"node_in",ba:"EK",fa:["vec3"],ea:!1},{$:"node_out",ba:"EL",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"EL = max ( vec3 ( _0_0 ) , EK ) ; EL = pow ( EL , vec3 ( 2.2 ) ) ;".split(" ")}]},{$:"node",ba:"B4W_LINEAR_TO_SRGB",ma:[],la:[{$:"node_in",ba:"EM",fa:["vec3"],ea:!1},{$:"node_out",ba:"EN",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"EN = max ( vec3 ( _0_0 ) , EM ) ; EN = pow ( EN , vec3 ( _1_0 / 2.2 ) ) ;".split(" ")}]},{$:"node",ba:"TEXTURE_EMPTY",ma:[],la:[{$:"node_out",
ba:"EO",fa:["vec3"],ea:!1},{$:"node_out",ba:"EP",fa:["vec3"],ea:!1},{$:"node_out",ba:"EQ",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EO"],ja:[{$:"txt",aa:"EO = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EP"],ja:[{$:"txt",aa:"EP = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EQ"],ja:[{$:"txt",aa:["EQ","=","_0_0",";"]}]}]}]},{$:"node",ba:"TEXTURE_ENVIRONMENT_CUBE",ma:[],la:[{$:"node_in",ba:"ER",fa:["vec3"],
ea:!1},{$:"node_out",ba:"ES",fa:["vec3"],ea:!0},{$:"node_out",ba:"ET",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_ENVIRONMENT_CUBE_var_texture",fa:["uniform","samplerCube"],ea:!1}],ja:[{$:"txt",aa:"vec3 EU = vec3 ( ER . x , ER . y , ER . z ) ; vec4 AV = GLSL_TEXTURE_CUBE ( node_TEXTURE_ENVIRONMENT_CUBE_var_texture , EU ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_ES"],ja:[{$:"txt",aa:"ES = AV . xyz ; bC ( ES ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_ET"],
ja:[{$:"txt",aa:"ET = AV . w ;".split(" ")}]}]}]},{$:"node",ba:"TEXTURE_ENVIRONMENT_EQUIRECTANGULAR",ma:[{$:"node_var",ba:"USE_VECTOR_IN",aa:["0"]}],la:[{$:"node_in",ba:"EV",fa:["vec3"],ea:!1},{$:"node_out",ba:"EW",fa:["vec3"],ea:!1},{$:"node_param",ba:"node_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_VECTOR_IN"],ja:[{$:"txt",aa:"vec3 EX = normalize ( EV ) ;".split(" ")}]},{$:"node_elif",ga:["IS_WORLD"],ja:[{$:"txt",
aa:["vec3","EX","=","sr",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","EX","=","ot",";"]}]}]},{$:"txt",aa:"float dC = - atan ( EX . y , EX . x ) / ( 2.0 * M_PI ) + _0_5 ; float kQ = atan ( EX . z , sqrt ( EX . x * EX . x + EX . y * EX . y ) ) / M_PI + _0_5 ; vec4 AV = GLSL_TEXTURE ( node_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR_var_texture , vec2 ( dC , kQ ) ) ; EW = AV . xyz ; bC ( EW ) ;".split(" ")}]},{$:"node",ba:"TEXTURE_ENVIRONMENT_MIRROR_BALL",ma:[{$:"node_var",ba:"USE_VECTOR_IN",aa:["0"]}],la:[{$:"node_in",
ba:"EY",fa:["vec3"],ea:!1},{$:"node_out",ba:"EZ",fa:["vec3"],ea:!1},{$:"node_param",ba:"node_TEXTURE_ENVIRONMENT_MIRROR_BALL_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_VECTOR_IN"],ja:[{$:"txt",aa:"vec3 EX = normalize ( EY ) ;".split(" ")}]},{$:"node_elif",ga:["IS_WORLD"],ja:[{$:"txt",aa:["vec3","EX","=","sr",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","EX","=","ot",";"]}]}]},{$:"txt",aa:"EX . y -= _1_0 ; float E_ = 2.0 * sqrt ( max ( - _0_5 * EX . y , _0_0 ) ) ; if ( E_ > _0_0 ) EX /= E_ ; float dC = _0_5 * ( EX . x + _1_0 ) ; float kQ = _0_5 * ( EX . z + _1_0 ) ; vec4 AV = GLSL_TEXTURE ( node_TEXTURE_ENVIRONMENT_MIRROR_BALL_var_texture , vec2 ( dC , kQ ) ) ; EZ = AV . xyz ; bC ( EZ ) ;".split(" ")}]},
{$:"node",ba:"TEXTURE_COLOR",ma:[{$:"node_var",ba:"NON_COLOR",aa:["0"]},{$:"node_var",ba:"CONVERT_UV",aa:["0"]},{$:"node_var",ba:"USE_uv2",aa:["0"]},{$:"node_var",ba:"USE_uv3",aa:["0"]},{$:"node_var",ba:"USE_uv4",aa:["0"]}],la:[{$:"node_in",ba:"Fa",fa:["vec3"],ea:!0},{$:"node_in",ba:"Fb",fa:["vec3"],ea:!0},{$:"node_in",ba:"Fc",fa:["vec3"],ea:!0},{$:"node_in",ba:"Fd",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fe",fa:["vec3"],ea:!0},{$:"node_out",ba:"Ff",fa:["float"],ea:!0},{$:"node_out",ba:"Fg",fa:["vec3"],
ea:!0},{$:"node_out",ba:"Fh",fa:["float"],ea:!0},{$:"node_out",ba:"Fi",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fj",fa:["float"],ea:!0},{$:"node_out",ba:"Fk",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fl",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_COLOR_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_UV"],ja:[{$:"txt",aa:"vec4 AV = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , rY ( Fa ) ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"vec4 AV = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , Fa . xy ) ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fe"],ja:[{$:"txt",aa:"Fe = AV . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bC","(","Fe",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ff"],ja:[{$:"txt",aa:"Ff = AV . w ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv2"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_UV"],ja:[{$:"txt",aa:"AV = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , rY ( Fb ) ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"AV = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , Fb . xy ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fg"],ja:[{$:"txt",aa:"Fg = AV . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bC","(","Fg",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fh"],ja:[{$:"txt",aa:"Fh = AV . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv3"],ja:[{$:"node_cond",
da:[{$:"node_if",ga:["CONVERT_UV"],ja:[{$:"txt",aa:"AV = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , rY ( Fc ) ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"AV = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , Fc . xy ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fi"],ja:[{$:"txt",aa:"Fi = AV . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bC","(","Fi",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["USE_OUT_Fj"],ja:[{$:"txt",aa:"Fj = AV . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv4"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_UV"],ja:[{$:"txt",aa:"AV = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , rY ( Fd ) ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"AV = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , Fd . xy ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fk"],ja:[{$:"txt",aa:"Fk = AV . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bC","(","Fk",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fl"],ja:[{$:"txt",aa:"Fl = AV . w ;".split(" ")}]}]}]}]}]},{$:"node",ba:"TEXTURE_NORMAL",ma:[{$:"node_var",ba:"USE_uv2",aa:["0"]},{$:"node_var",ba:"USE_uv3",aa:["0"]},{$:"node_var",ba:"USE_uv4",aa:["0"]}],la:[{$:"node_in",ba:"Fm",fa:["vec3"],ea:!0},{$:"node_in",ba:"Fn",fa:["vec3"],ea:!0},{$:"node_in",ba:"Fo",fa:["vec3"],ea:!0},{$:"node_in",ba:"Fp",fa:["vec3"],
ea:!0},{$:"node_out",ba:"Fq",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fr",fa:["float"],ea:!0},{$:"node_out",ba:"Fs",fa:["vec3"],ea:!0},{$:"node_out",ba:"Ft",fa:["float"],ea:!0},{$:"node_out",ba:"Fu",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fv",fa:["float"],ea:!0},{$:"node_out",ba:"Fw",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fx",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_NORMAL_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"txt",aa:"vec4 AV = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , rY ( Fm ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fq"],ja:[{$:"txt",aa:"Fq = normalize ( sy * ( AV . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fr"],ja:[{$:"txt",aa:"Fr = AV . w ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv2"],ja:[{$:"txt",aa:"AV = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , rY ( Fn ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fs"],ja:[{$:"txt",aa:"Fs = normalize ( sy * ( AV . xyz - _0_5 ) ) ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ft"],ja:[{$:"txt",aa:"Ft = AV . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv3"],ja:[{$:"txt",aa:"AV = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , rY ( Fo ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fu"],ja:[{$:"txt",aa:"Fu = normalize ( sy * ( AV . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fv"],ja:[{$:"txt",aa:"Fv = AV . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["USE_uv4"],ja:[{$:"txt",aa:"AV = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , rY ( Fp ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fw"],ja:[{$:"txt",aa:"Fw = normalize ( sy * ( AV . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fx"],ja:[{$:"txt",aa:"Fx = AV . w ;".split(" ")}]}]}]}]}]},{$:"node",ba:"VALUE",ma:[{$:"node_var",ba:"VALUE_ROW_IND",aa:["0"]},{$:"node_var",ba:"VALUE_COL_IND",aa:["0"]}],la:[{$:"node_out",ba:"Fy",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:"Fy = u_node_values [ VALUE_ROW_IND ] [ VALUE_COL_IND ] ;".split(" ")}]},{$:"node",ba:"VECT_MATH_ADD",ma:[],la:[{$:"node_in",ba:"Fz",fa:["vec3"],ea:!1},{$:"node_in",ba:"FA",fa:["vec3"],ea:!1},{$:"node_out",ba:"FB",fa:["vec3"],ea:!1},{$:"node_out",ba:"FC",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"FB = Fz + FA ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FC"],ja:[{$:"txt",aa:"FC = ( abs ( FB [ 0 ] ) + abs ( FB [ 1 ] ) + abs ( FB [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{$:"node",
ba:"VECT_MATH_SUBTRACT",ma:[],la:[{$:"node_in",ba:"FD",fa:["vec3"],ea:!1},{$:"node_in",ba:"FE",fa:["vec3"],ea:!1},{$:"node_out",ba:"FF",fa:["vec3"],ea:!1},{$:"node_out",ba:"FG",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"FF = FD - FE ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FG"],ja:[{$:"txt",aa:"FG = ( abs ( FF [ 0 ] ) + abs ( FF [ 1 ] ) + abs ( FF [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_AVERAGE",ma:[],la:[{$:"node_in",ba:"FH",fa:["vec3"],ea:!1},{$:"node_in",ba:"FI",
fa:["vec3"],ea:!1},{$:"node_out",ba:"FJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"FK",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"FJ = FH + FI ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FK"],ja:[{$:"txt",aa:"FK = length ( FJ ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FJ"],ja:[{$:"txt",aa:"FJ = normalize ( FJ ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_DOT_PRODUCT",ma:[],la:[{$:"node_in",ba:"FL",fa:["vec3"],ea:!1},{$:"node_in",ba:"FM",fa:["vec3"],ea:!1},{$:"node_out",
ba:"FN",fa:["vec3"],ea:!1},{$:"node_out",ba:"FO",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"FN = vec3 ( _0_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FO"],ja:[{$:"txt",aa:"FO = dot ( FL , FM ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_CROSS_PRODUCT",ma:[],la:[{$:"node_in",ba:"FP",fa:["vec3"],ea:!1},{$:"node_in",ba:"FQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"FR",fa:["vec3"],ea:!1},{$:"node_out",ba:"FS",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"FR = cross ( FP , FQ ) ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["USE_OUT_FS"],ja:[{$:"txt",aa:"FS = length ( FR ) ; FR /= FS ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"FR = normalize ( FR ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_NORMALIZE",ma:[],la:[{$:"node_in",ba:"FT",fa:["vec3"],ea:!1},{$:"node_in",ba:"FU",fa:["vec3"],ea:!1},{$:"node_out",ba:"FV",fa:["vec3"],ea:!1},{$:"node_out",ba:"FW",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"FV = normalize ( FT ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FW"],ja:[{$:"txt",aa:"FW = length ( FT ) ;".split(" ")}]}]},
{$:"txt",aa:["FU",";"]}]},{$:"node",ba:"FRESNEL",ma:[{$:"node_var",ba:"USE_FRESNEL_NORMAL",aa:["0"]}],la:[{$:"node_in",ba:"FX",fa:["float"],ea:!1},{$:"node_in",ba:"FY",fa:["vec3"],ea:!1},{$:"node_out",ba:"FZ",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_FRESNEL_NORMAL"],ja:[{$:"txt",aa:"vec3 cr = normalize ( FY ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","cr","=","ot",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["CAMERA_TYPE","CAM_TYPE_PERSP",{$:"equal_expr",ia:2}],
ja:[{$:"txt",aa:"vec3 Ax = normalize ( ou ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","Ax","=","u_camera_direction",";"]}]}]},{$:"txt",aa:"float sa = max ( FX , 0.00001 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"sa = gl_FrontFacing == false ? sa : _1_0 / sa ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"sa = gl_FrontFacing ? sa : _1_0 / sa ;".split(" ")}]}]},{$:"txt",aa:"FZ = sb ( Ax , cr , sa ) ;".split(" ")}]},
{$:"node",ba:"BACKGROUND",ma:[],la:[{$:"node_in",ba:"F_",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ga",fa:["float"],ea:!1},{$:"node_out",ba:"Gb",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Gb = F_ * Ga ;".split(" ")}]},{$:"node",ba:"B4W_REFLECT",ma:[],la:[{$:"node_in",ba:"Gc",fa:["vec3"],ea:!1},{$:"node_in",ba:"Gd",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ge",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Ge = reflect ( _ ( u_view_tsr_inverse , Gc ) , Gd ) ;".split(" ")}]},{$:"node",ba:"B4W_REFLECT_WORLD",ma:[],la:[{$:"node_in",
ba:"Gf",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gg",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Gg = reflect ( - ou . xyz , Gf ) ;".split(" ")}]},{$:"node",ba:"B4W_PARALLAX",ma:[],la:[{$:"node_in",ba:"Gh",fa:["vec3"],ea:!1},{$:"node_in",ba:"Gi",fa:["float"],ea:!1},{$:"node_in",ba:"Gj",fa:["const","float"],ea:!1},{$:"node_in",ba:"Gk",fa:["const","float"],ea:!1},{$:"node_out",ba:"Gl",fa:["vec3"],ea:!1},{$:"node_param",ba:"node_B4W_PARALLAX_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"txt",aa:"float bN = length ( sB ) ; if ( bN < Gk ) { vec2 b_ = rY ( Gh ) ; float cd = clamp ( _0_5 * ( Gk - bN ) , _0_0 , _1_0 ) ; float hG = Gi * cd ; vec3 cf = normalize ( ou * sy ) ; float cg = _1_0 / Gj ; vec2 ch = cf . xy * hG / ( Gj * cf . z ) ; float ci = _1_0 ; float cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; for ( float cl = 1.0 ; cl <= Gj ; cl ++ ) { if ( cj < ci ) { ci -= cg ; b_ -= ch ; cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; } } vec2 cm = b_ + ch ; float cn = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , cm ) . a - ( ci + cg ) ; float co = cj - ci ; float cp = co / ( co - cn ) ; b_ = cp * cm + ( _1_0 - cp ) * b_ ; Gl = rX ( b_ ) ; } else Gl = Gh ;".split(" ")}]},
{$:"node",ba:"B4W_CLAMP",ma:[],la:[{$:"node_in",ba:"Gm",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gn",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Gn = clamp ( Gm , _0_0 , _1_0 ) ;".split(" ")}]},{$:"node",ba:"B4W_REFRACTION",ma:[],la:[{$:"node_in",ba:"Go",fa:["vec3"],ea:!1},{$:"node_in",ba:"Gp",fa:["float"],ea:!1},{$:"node_out",ba:"Gq",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Gq = rW ( Go , Gp ) ;".split(" ")}]},{$:"node",ba:"B4W_TRANSLUCENCY",ma:[],la:[{$:"node_in",ba:"Gr",fa:["float"],ea:!1},{$:"node_in",ba:"Gs",
fa:["float"],ea:!1},{$:"node_in",ba:"Gt",fa:["float"],ea:!1},{$:"node_in",ba:"Gu",fa:["float"],ea:!1},{$:"node_in",ba:"Gv",fa:["float"],ea:!1},{$:"node_out",ba:"Gw",fa:["float"],ea:!0},{$:"node_out",ba:"Gx",fa:["vec4"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gw"],ja:[{$:"txt",aa:["Gw","=","Gr",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gx"],ja:[{$:"txt",aa:"Gx = vec4 ( Gs , Gt , Gu , Gv ) ;".split(" ")}]}]}]},{$:"node",ba:"B4W_TIME",ma:[],la:[{$:"node_out",ba:"Gy",fa:["float"],
ea:!1}],ja:[{$:"txt",aa:["Gy","=","u_time",";"]}]},{$:"node",ba:"B4W_SMOOTHSTEP",ma:[],la:[{$:"node_in",ba:"Gz",fa:["float"],ea:!1},{$:"node_in",ba:"GA",fa:["float"],ea:!1},{$:"node_in",ba:"GB",fa:["float"],ea:!1},{$:"node_out",ba:"GC",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"GC = smoothstep ( GA , GB , Gz ) ;".split(" ")}]},{$:"node",ba:"B4W_GLOW_OUTPUT",ma:[],la:[{$:"node_in",ba:"GD",fa:["vec3"],ea:!1},{$:"node_in",ba:"GE",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"E = GD ; I = GE ;".split(" ")}]},{$:"node",
ba:"B4W_VECTOSCAL",ma:[],la:[{$:"node_in",ba:"GF",fa:["vec3"],ea:!1},{$:"node_out",ba:"GG",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"GG = ( GF . r + GF . g + GF . b ) / 3.0 ;".split(" ")}]},{$:"node",ba:"B4W_SCALTOVEC",ma:[],la:[{$:"node_in",ba:"GH",fa:["float"],ea:!1},{$:"node_out",ba:"GI",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"GI [ 0 ] = GH ; GI [ 1 ] = GH ; GI [ 2 ] = GH ;".split(" ")}]},{$:"nodes_global"},{$:"txt",aa:"void J ( in vec3 ou , out vec3 E , out vec3 F , out vec3 G , out vec4 H , out float I ) { E = vec3 ( _0_0 ) ; F = vec3 ( _0_0 ) ; G = vec3 ( _0_0 ) ; H = vec4 ( _0_0 ) ; I = _0_0 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["IS_WORLD"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_ENVIRONMENT_EQUIRECTANGULAR","USE_NODE_TEXTURE_ENVIRONMENT_MIRROR_BALL","USE_NODE_TEX_COORD_GE","USE_NODE_TEX_COORD_OB",{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 sr = - ou ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_GL"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 os = - ou ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_TEX_COORD_NO"],ha:{$:"grp",da:[{$:"txt",aa:["vec3",
"ot","=","ou",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_NO"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","su","=","ou",";"]}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_NORMAL_MAP","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:11}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","sv","=","j",";"]},
{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( gl_FrontFacing == false )".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["if","(","gl_FrontFacing",")"]}]}}]},{$:"txt",aa:"sv = sv ; else sv = - sv ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_NORMAL_MAP"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","sw",
"=","sv",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{$:"logical_or_expr",ia:4}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 sx = normalize ( sv ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ot","=","sx",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ot = normalize ( j ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_NO"],ha:{$:"grp",
da:[{$:"txt",aa:["vec3","su","=","sx",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 W = cross ( sx , k . xyz ) * k . w ; mat3 sy = mat3 ( k . xyz , W , sx ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_NORMAL_MAP"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 sz = cross ( sv , k . xyz ) * k . w ; mat3 sA = mat3 ( k . xyz , sz , sv ) ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:"vec3 os = h ; vec4 sB = i ; float sC = u_emit ; float sD = u_ambient ;".split(" ")}]}}]},{$:"nodes_main"},{$:"txt",aa:["}"]}]}}]}]};d["include/nodes.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"NODES_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"NODES_GLSLV",aa:[""]},{$:"var",ba:"PARTICLE_BATCH",aa:["0"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",ia:2},"PARTICLE_BATCH",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",
da:[{$:"txt",aa:"GLSL_IN vec3 a_orco_tex_coord ; GLSL_OUT vec3 rT ;".split(" ")}]}}]},{$:"node",ba:"TEX_COORD_UV",ma:[],la:[{$:"node_param",ba:"node_TEX_COORD_UV_var_a_uv",fa:["GLSL_IN","vec2"],ea:!1},{$:"node_param",ba:"sj",fa:["GLSL_OUT","vec2"],ea:!1}],ja:[{$:"txt",aa:["sj","=","node_TEX_COORD_UV_var_a_uv",";"]}]},{$:"node",ba:"UV_MERGED",ma:[],la:[{$:"node_param",ba:"node_UV_MERGED_var_a_uv",fa:["GLSL_IN","vec2"],ea:!1},{$:"node_param",ba:"si",fa:["GLSL_OUT","vec2"],ea:!1}],ja:[{$:"txt",aa:["si",
"=","node_UV_MERGED_var_a_uv",";"]}]},{$:"node",ba:"UVMAP",ma:[],la:[{$:"node_param",ba:"node_UVMAP_var_a_uv",fa:["GLSL_IN","vec2"],ea:!1},{$:"node_param",ba:"sk",fa:["GLSL_OUT","vec2"],ea:!1}],ja:[{$:"txt",aa:["sk","=","node_UVMAP_var_a_uv",";"]}]},{$:"node",ba:"GEOMETRY_UV",ma:[],la:[{$:"node_param",ba:"node_GEOMETRY_UV_var_a_uv",fa:["GLSL_IN","vec2"],ea:!1},{$:"node_param",ba:"sc",fa:["GLSL_OUT","vec2"],ea:!1}],ja:[{$:"txt",aa:["sc","=","node_GEOMETRY_UV_var_a_uv",";"]}]},{$:"node",ba:"GEOMETRY_VC",
ma:[],la:[{$:"node_param",ba:"node_GEOMETRY_VC_var_a_vertex_color",fa:["GLSL_IN","vec3"],ea:!1},{$:"node_param",ba:"GJ",fa:["GLSL_OUT","vec3"],ea:!1}],ja:[{$:"txt",aa:["GJ","=","node_GEOMETRY_VC_var_a_vertex_color",";"]}]},{$:"node",ba:"GEOMETRY_VC1",ma:[],la:[{$:"node_param",ba:"node_GEOMETRY_VC1_var_a_vertex_color",fa:["GLSL_IN","float"],ea:!1},{$:"node_param",ba:"GK",fa:["GLSL_OUT","float"],ea:!1}],ja:[{$:"txt",aa:["GK","=","node_GEOMETRY_VC1_var_a_vertex_color",";"]}]},{$:"node",ba:"GEOMETRY_VC2",
ma:[],la:[{$:"node_param",ba:"node_GEOMETRY_VC2_var_a_vertex_color",fa:["GLSL_IN","vec2"],ea:!1},{$:"node_param",ba:"GL",fa:["GLSL_OUT","vec2"],ea:!1}],ja:[{$:"txt",aa:["GL","=","node_GEOMETRY_VC2_var_a_vertex_color",";"]}]},{$:"node",ba:"GEOMETRY_VC3",ma:[],la:[{$:"node_param",ba:"node_GEOMETRY_VC3_var_a_vertex_color",fa:["GLSL_IN","vec3"],ea:!1},{$:"node_param",ba:"GM",fa:["GLSL_OUT","vec3"],ea:!1}],ja:[{$:"txt",aa:["GM","=","node_GEOMETRY_VC3_var_a_vertex_color",";"]}]},{$:"nodes_global"},{$:"txt",
aa:["void","J","(",")","{"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["rT","=","a_orco_tex_coord",";"]}]}}]},{$:"nodes_main"},{$:"txt",aa:["}"]}]}}]}]};d["include/pack.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PACK_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"PACK_GLSLF",aa:[""]},{$:"txt",aa:"vec4 er ( const in float il ) { vec4 fq = vec4 ( _255_0 * _255_0 * _255_0 , _255_0 * _255_0 , _255_0 , _1_0 ) ; vec4 GN = vec4 ( _0_0 , _1_0 / _255_0 , _1_0 / _255_0 , _1_0 / _255_0 ) ; vec4 jB = fract ( il * fq ) ; jB -= jB . xxyz * GN ; return jB ; } float cQ ( const in vec4 GO ) { float eq ; vec4 fq = vec4 ( _1_0 / ( _255_0 * _255_0 * _255_0 ) , _1_0 / ( _255_0 * _255_0 ) , _1_0 / _255_0 , _1_0 ) ; eq = dot ( GO , fq ) ; return eq ; } vec4 er ( const in vec2 rf ) { vec2 fq = vec2 ( _255_0 , _1_0 ) ; vec2 GN = vec2 ( _0_0 , _1_0 / _255_0 ) ; vec4 jB = fract ( rf . xxyy * fq . xyxy ) ; jB -= jB . xxzz * GN . xyxy ; if ( rf . r == _1_0 ) jB . rg = vec2 ( _0_0 , _1_0 ) ; if ( rf . g == _1_0 ) jB . ba = vec2 ( _0_0 , _1_0 ) ; return jB ; } vec2 jg ( const in vec4 GP ) { vec2 rf ; vec2 fq = vec2 ( _1_0 / _255_0 , _1_0 ) ; rf . r = dot ( GP . rg , fq ) ; rf . g = dot ( GP . ba , fq ) ; return rf ; }".split(" ")}]}}]}]};
d["include/particles.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PARTICLES_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"PARTICLES_GLSLV",aa:[""]},{$:"var",ba:"EPSILON",aa:["0.000001"]},{$:"var",ba:"COLOR_RAMP_LENGTH",aa:["0"]},{$:"var",ba:"WORLD_SPACE",aa:["0"]},{$:"var",ba:"USE_COLOR_RAMP",aa:["0"]},{$:"include",oa:"math.glslv"},{$:"txt",aa:"struct cY { float df ; vec3 O ; float L ; vec3 aQ ; float bK ; vec3 dl ; vec3 dm ; float dn ; } ;".split(" ")},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",
0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"void GT ( inout vec3 aQ , float GQ , vec4 kb , vec4 bv ) { float GR = bv . x - kb . x ; float GS = ( GQ - kb . x ) / GR ; aQ = mix ( aQ , bv . yzw , clamp ( GS , 0.0 , 1.0 ) ) ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 GW ( float t , float GU , vec4 GV [ COLOR_RAMP_LENGTH ] ) { float GQ = t / GU ; vec3 aQ = GV [ 0 ] . yzw ;".split(" ")},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",
1,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GT ( aQ , GQ , GV [ 0 ] , GV [ 1 ] ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",2,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GT ( aQ , GQ , GV [ 1 ] , GV [ 2 ] ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",3,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"GT ( aQ , GQ , GV [ 2 ] , GV [ 3 ] ) ;".split(" ")}]}}]},{$:"txt",aa:["return","aQ",";","}"]}]}}]},{$:"txt",aa:"float Hb ( float t , float GU , float GX , float GY ) { float GZ = max ( 0.01 , min ( GU , GX ) ) ; float G_ = max ( 0.01 , min ( GU , GY ) ) ; float Ha = GU - G_ ; float L = clamp ( t / GZ , 0.0 , 1.0 ) - step ( Ha , t ) * ( t - Ha ) / G_ ; return L ; } cY cZ ( ) { cY sp ; float t ; float GU = a_p_data [ 0 ] ; float Hc = a_p_data [ 1 ] ; if ( u_p_cyclic == 1 ) { t = mod ( u_p_time , u_p_length ) - Hc ; if ( t < 0.0 ) t += u_p_length ; } if ( u_p_cyclic != 1 ) { t = u_p_time - Hc ; } if ( t < 0.0 || t >= GU ) { sp . df = 0.0001 ; sp . O = vec3 ( 99999.0 , 0.0 , 0.0 ) ; } if ( ! ( t < 0.0 || t >= GU ) ) { vec4 S = R ( a_tbn ) ; vec3 bW = T ( S , vec3 ( 0.0 , 1.0 , 0.0 ) ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["WORLD_SPACE"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 fn = a_position ; vec3 r_ = bW ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 fn = ap ( u_model_tsr , a_position ) ; vec3 r_ = _ ( u_model_tsr , bW ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 Hd = u_p_nfactor * r_ ; Hd += a_p_vels . xyz ; Hd . z -= u_p_gravity * t / 2.0 ; float He = max ( u_p_mass , EPSILON ) ; Hd += ( u_p_wind_fac * u_wind / He ) * t / 2.0 ; sp . dn = t ; sp . dl = Hd ; sp . dm = bW * a_p_vels . w ; sp . O = fn + Hd * t ; sp . bK = a_p_vels . w * t ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["USE_COLOR_RAMP"],ha:{$:"grp",da:[{$:"txt",aa:"sp . df = GLSL_TEXTURE ( u_color_ramp_tex , vec2 ( t / u_p_max_lifetime , 0.5 ) ) . g ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"sp . df = 1.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["COLOR_RAMP_LENGTH",0,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"sp . aQ = GW ( t , u_p_max_lifetime , u_p_color_ramp ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"sp . aQ = vec3 ( 1.0 ) ;".split(" ")}]}}]},
{$:"txt",aa:"sp . L = Hb ( t , a_p_data [ 0 ] , u_p_fade_in , u_p_fade_out ) ; } return sp ; }".split(" ")}]}}]}]};d["include/particles_nodes.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PARTICLES_NODES_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"PARTICLES_NODES_GLSLF",aa:[""]},{$:"var",ba:"CAUSTICS",aa:["0"]},{$:"var",ba:"DOUBLE_SIDED_LIGHTING",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"PARTICLE_BATCH",aa:["0"]},{$:"var",ba:"NUM_LIGHTS",aa:["0"]},{$:"var",ba:"CALC_TBN_SPACE",
aa:["0"]},{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_BSDF_BEGIN",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"environment.glslf"}]}}]},{$:"include",oa:"color_util.glslf"},{$:"include",oa:"math.glslv"},{$:"cond",da:[{$:"if",ga:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_SEPHSV",{$:"logical_or_expr",ia:6}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 kf ( vec3 rgb ) { vec4 hI = vec4 ( _0_0 , - _1_0 / 3.0 , 2.0 / 3.0 , - _1_0 ) ; vec4 p = mix ( vec4 ( rgb . bg , hI . wz ) , vec4 ( rgb . gb , hI . xy ) , step ( rgb . b , rgb . g ) ) ; vec4 q = mix ( vec4 ( p . xyw , rgb . r ) , vec4 ( rgb . r , p . yzx ) , step ( p . x , rgb . r ) ) ; float dz = q . x - min ( q . w , q . y ) ; float iB = 1.0e-10 ; return vec3 ( abs ( q . z + ( q . w - q . y ) / ( 6.0 * dz + iB ) ) , dz / ( q . x + iB ) , q . x ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["USE_NODE_HUE_SAT","USE_NODE_MIX_RGB_HUE","USE_NODE_MIX_RGB_SATURATION","USE_NODE_MIX_RGB_VALUE","USE_NODE_MIX_RGB_COLOR","USE_NODE_COMBHSV",{$:"logical_or_expr",ia:6}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 kh ( vec3 kg ) { vec4 hI = vec4 ( _1_0 , 2.0 / 3.0 , _1_0 / 3.0 , 3.0 ) ; vec3 p = abs ( fract ( vec3 ( kg . r , kg . r , kg . r ) + hI . xyz ) * 6.0 - hI . www ) ; return kg . b * mix ( hI . xxx , clamp ( p - hI . xxx , _0_0 , _1_0 ) , kg . g ) ; }".split(" ")}]}}]},{$:"cond",
da:[{$:"if",ga:["USE_NODE_GEOMETRY_UV","USE_NODE_B4W_PARALLAX","USE_NODE_UV_MERGED",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 rX ( vec2 gT ) { return vec3 ( gT * 2.0 - vec2 ( _1_0 , _1_0 ) , _0_0 ) ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_COLOR","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 rY ( vec3 rf ) { return vec2 ( rf . xy * _0_5 + vec2 ( _0_5 , _0_5 ) ) ; }".split(" ")}]}}]},{$:"node",
ba:"CAMERA",ma:[],la:[{$:"node_out",ba:"sE",fa:["vec3"],ea:!0},{$:"node_out",ba:"sF",fa:["float"],ea:!0},{$:"node_out",ba:"sG",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sE"],ja:[{$:"txt",aa:"sE = normalize ( sB . xyz ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sF"],ja:[{$:"txt",aa:"sF = abs ( sB . z ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_sG"],ja:[{$:"txt",aa:"sG = length ( sB . xyz ) ;".split(" ")}]}]}]},{$:"node",ba:"COMBRGB",
ma:[],la:[{$:"node_in",ba:"sH",fa:["float"],ea:!1},{$:"node_in",ba:"sI",fa:["float"],ea:!1},{$:"node_in",ba:"sJ",fa:["float"],ea:!1},{$:"node_out",ba:"sK",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"sK = vec3 ( sH , sI , sJ ) ;".split(" ")}]},{$:"node",ba:"COMBHSV",ma:[],la:[{$:"node_in",ba:"sL",fa:["float"],ea:!1},{$:"node_in",ba:"sM",fa:["float"],ea:!1},{$:"node_in",ba:"sN",fa:["float"],ea:!1},{$:"node_out",ba:"sO",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"sO = kh ( vec3 ( sL , sM , sN ) ) ;".split(" ")}]},
{$:"node",ba:"EMPTY_UV",ma:[],la:[{$:"node_out",ba:"sP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"sP = vec3 ( - _1_0 , - _1_0 , _0_0 ) ;".split(" ")}]},{$:"node",ba:"EMPTY_VC",ma:[],la:[{$:"node_out",ba:"sQ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"sQ = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_UV",ma:[],la:[{$:"node_out",ba:"sR",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"sR = rX ( A ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_OR",ma:[],la:[{$:"node_out",ba:"sS",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"sS = 2.0 * vec3 ( A , _0_0 ) - vec3 ( _1_0 ) ;".split(" ")}]},
{$:"node",ba:"GEOMETRY_VC",ma:[],la:[{$:"node_out",ba:"sT",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"sT = vec3 ( _1_0 ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_VC1",ma:[],la:[{$:"node_out",ba:"sU",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["sU","=","_1_0",";"]}]},{$:"node",ba:"GEOMETRY_VC2",ma:[],la:[{$:"node_out",ba:"sV",fa:["float"],ea:!1},{$:"node_out",ba:"sW",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"sV = _1_0 ; sW = _1_0 ;".split(" ")}]},{$:"node",ba:"GEOMETRY_VC3",ma:[],la:[{$:"node_out",ba:"sX",fa:["float"],
ea:!1},{$:"node_out",ba:"sY",fa:["float"],ea:!1},{$:"node_out",ba:"sZ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"sX = _1_0 ; sY = _1_0 ; sZ = _1_0 ;".split(" ")}]},{$:"node",ba:"GEOMETRY_NO",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"s_",fa:["vec3"],ea:!1},{$:"node_out",ba:"ta",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["ta","=","s_",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"ta = su . xyz ;".split(" ")}]}]}]},{$:"node",ba:"GEOMETRY_FB",
ma:[],la:[{$:"node_out",ba:"tb",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"tb = ( gl_FrontFacing ) ? _0_0 : _1_0 ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"tb = ( gl_FrontFacing ) ? _1_0 : _0_0 ;".split(" ")}]}]}]},{$:"node",ba:"GEOMETRY_VW",ma:[],la:[{$:"node_out",ba:"td",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"td = - _ ( u_view_tsr_frag , ou ) ;".split(" ")}]},{$:"node",ba:"GEOMETRY_LO",ma:[],la:[{$:"node_out",
ba:"te",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"te [ 0 ] = sB [ 0 ] ; te [ 1 ] = sB [ 1 ] ; te [ 2 ] = sB [ 2 ] ;".split(" ")}]},{$:"node",ba:"GEOMETRY_GL",ma:[],la:[{$:"node_out",ba:"tf",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tf = vec3 ( os . r , os . g , os . b ) ;".split(" ")}]},{$:"node",ba:"NEW_GEOMETRY",ma:[],la:[{$:"node_out",ba:"th",fa:["vec3"],ea:!1},{$:"node_out",ba:"ti",fa:["vec3"],ea:!1},{$:"node_out",ba:"tj",fa:["vec3"],ea:!1},{$:"node_out",ba:"tk",fa:["vec3"],ea:!1},{$:"node_out",ba:"tl",
fa:["vec3"],ea:!1},{$:"node_out",ba:"tm",fa:["vec3"],ea:!1},{$:"node_out",ba:"tn",fa:["float"],ea:!1},{$:"node_out",ba:"to",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"th = vec3 ( _0_0 ) ; ti = vec3 ( _0_0 ) ; tj = vec3 ( _0_0 ) ; tk = vec3 ( _0_0 ) ; tl = vec3 ( _0_0 ) ; tm = vec3 ( _0_0 ) ; tn = _0_0 ; to = _0_0 ;".split(" ")}]},{$:"node",ba:"HUE_SAT",ma:[],la:[{$:"node_in",ba:"tr",fa:["float"],ea:!1},{$:"node_in",ba:"tu",fa:["float"],ea:!1},{$:"node_in",ba:"tv",fa:["float"],ea:!1},{$:"node_in",ba:"tw",
fa:["float"],ea:!1},{$:"node_in",ba:"tx",fa:["vec3"],ea:!1},{$:"node_out",ba:"ty",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"vec3 kg = kf ( tx ) ; kg [ 0 ] += ( tr - _0_5 ) ; if ( kg [ 0 ] > _1_0 ) kg [ 0 ] -= _1_0 ; else if ( kg [ 0 ] < _0_0 ) kg [ 0 ] += _1_0 ; kg *= vec3 ( _1_0 , tu , tv ) ; kg = mix ( vec3 ( _1_0 ) , mix ( vec3 ( _0_0 ) , kg , step ( vec3 ( _0_0 ) , kg ) ) , step ( kg , vec3 ( _1_0 ) ) ) ; ty = mix ( tx , kh ( kg ) , tw ) ;".split(" ")}]},{$:"node",ba:"INVERT",ma:[],la:[{$:"node_in",
ba:"tz",fa:["float"],ea:!1},{$:"node_in",ba:"tA",fa:["vec3"],ea:!1},{$:"node_out",ba:"tB",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"tB = mix ( tA , vec3 ( _1_0 ) - tA , tz ) ;".split(" ")}]},{$:"node",ba:"LAMP",ma:[{$:"node_var",ba:"LAMP_TYPE",aa:["HEMI"]},{$:"node_var",ba:"LAMP_INDEX",aa:["0"]},{$:"node_var",ba:"LAMP_USE_SPHERE",aa:["0"]},{$:"node_var",ba:"LAMP_SPOT_SIZE",aa:["0.8"]},{$:"node_var",ba:"LAMP_SPOT_BLEND",aa:["0.03"]},{$:"node_var",ba:"LAMP_LIGHT_DIST",aa:["30.0"]}],la:[{$:"node_out",ba:"tC",
fa:["vec3"],ea:!0},{$:"node_out",ba:"tD",fa:["vec3"],ea:!1},{$:"node_out",ba:"tE",fa:["float"],ea:!1},{$:"node_out",ba:"tF",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tC"],ja:[{$:"txt",aa:"tC = u_lamp_light_color_intensities [ LAMP_INDEX ] ;".split(" ")}]}]},{$:"txt",aa:"vec3 tG = u_lamp_light_directions [ LAMP_INDEX ] ; vec3 tH = u_lamp_light_positions [ LAMP_INDEX ] ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2},"LAMP_TYPE",
"POINT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"tD = - h + tH ; tE = length ( tD ) ; tD = normalize ( tD ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tF"],ja:[{$:"txt",aa:"tF = LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + tE * tE ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"float oY = dot ( tD , tG ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; tF *= oY ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["LAMP_USE_SPHERE"],ja:[{$:"txt",aa:"tF *= max ( LAMP_LIGHT_DIST - tE , _0_0 ) / LAMP_LIGHT_DIST ;".split(" ")}]}]}]}]}]},{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tD"],ja:[{$:"txt",aa:["tD","=","tG",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tE"],ja:[{$:"txt",aa:"tE = length ( tH - h ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tF"],ja:[{$:"txt",aa:["tF","=","_1_0",";"]}]}]}]}]}]},{$:"node",ba:"NORMAL",ma:[],
la:[{$:"node_in",ba:"tI",fa:["vec3"],ea:!1},{$:"node_out",ba:"tJ",fa:["vec3"],ea:!0},{$:"node_out",ba:"tK",fa:["float"],ea:!0},{$:"node_param",ba:"sh",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tJ"],ja:[{$:"txt",aa:["tJ","=","sh",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_tK"],ja:[{$:"txt",aa:"tK = - dot ( tI , sh ) ;".split(" ")}]}]}]},{$:"node",ba:"B4W_VECTOR_VIEW",ma:[],la:[{$:"node_in",ba:"tL",fa:["vec3"],ea:!1},{$:"node_out",ba:"tM",fa:["vec3"],ea:!1}],ja:[{$:"txt",
aa:"tM = - _ ( u_view_tsr_frag , tL ) ;".split(" ")}]},{$:"node",ba:"BSDF_BEGIN",ma:[],la:[{$:"node_in",ba:"tN",fa:["vec3"],ea:!1},{$:"node_in",ba:"tO",fa:["vec3"],ea:!1},{$:"node_in",ba:"tP",fa:["float"],ea:!1},{$:"node_in",ba:"tQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"tR",fa:["float"],ea:!1},{$:"node_in",ba:"tS",fa:["float"],ea:!1},{$:"node_in",ba:"tT",fa:["vec3"],ea:!1},{$:"node_in",ba:"tU",fa:["vec3"],ea:!1},{$:"node_in",ba:"tV",fa:["float"],ea:!1},{$:"node_in",ba:"tW",fa:["vec3"],ea:!1},{$:"node_in",
ba:"tX",fa:["float"],ea:!1},{$:"node_out",ba:"tY",fa:["vec3"],ea:!1},{$:"node_out",ba:"tZ",fa:["vec3"],ea:!1},{$:"node_out",ba:"t_",fa:["vec3"],ea:!1},{$:"node_out",ba:"ua",fa:["vec3"],ea:!1},{$:"node_out",ba:"ub",fa:["vec3"],ea:!1},{$:"node_out",ba:"uc",fa:["vec4"],ea:!1},{$:"node_out",ba:"ud",fa:["vec4"],ea:!1},{$:"node_out",ba:"ue",fa:["vec3"],ea:!1},{$:"node_out",ba:"uf",fa:["vec3"],ea:!1},{$:"node_out",ba:"ug",fa:["vec3"],ea:!1},{$:"node_out",ba:"uh",fa:["float"],ea:!1},{$:"node_out",ba:"ui",
fa:["vec3"],ea:!1},{$:"node_out",ba:"uj",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"t_ = tO ; ua = tQ ; ub = tT ; ue = tO ; uf = tQ ; metalness_out = tS ; ug = tU ; uh = tV ; ui = tW ; uj = tX ; tY = sC * t_ ; tZ = sD * u_environment_energy * cz ( ub ) ; ud = cC ( t_ ) ; H = ud ; uc [ 0 ] = tP ; uc [ 1 ] = tR ; uc [ 2 ] = tS ;".split(" ")}]},{$:"node",ba:"BSDF_END",ma:[],la:[{$:"node_in",ba:"uk",fa:["vec4"],ea:!1},{$:"node_in",ba:"ul",fa:["vec3"],ea:!1},{$:"node_in",ba:"um",fa:["vec3"],ea:!1},{$:"node_in",
ba:"un",fa:["vec4"],ea:!1},{$:"node_in",ba:"uo",fa:["vec3"],ea:!1},{$:"node_in",ba:"up",fa:["vec3"],ea:!1},{$:"node_in",ba:"uq",fa:["vec3"],ea:!1},{$:"node_in",ba:"ur",fa:["float"],ea:!1},{$:"node_in",ba:"us",fa:["vec3"],ea:!1},{$:"node_in",ba:"ur",fa:["float"],ea:!1},{$:"node_in",ba:"ut",fa:["float"],ea:!1},{$:"node_out",ba:"uu",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"uu = uk . rgb + ul ; uu = mix ( uu , uq , ur ) ; I = _1_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NODE_BSDF_TRANSPARENT"],
ja:[{$:"txt",aa:"vec3 ux = GLSL_TEXTURE ( u_refractmap , l . xy / l . z ) . rgb ; bC ( ux ) ; us = us * ux ; uu += us ;".split(" ")}]}]},{$:"txt",aa:["um",";"]}]},{$:"node",ba:"BSDF_COMPUTE",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"uy",fa:["vec3"],ea:!1},{$:"node_in",ba:"uz",fa:["vec2"],ea:!1},{$:"node_in",ba:"uA",fa:["vec3"],ea:!1},{$:"node_in",ba:"uB",fa:["float"],ea:!1},{$:"node_in",ba:"uC",fa:["vec4"],ea:!1},{$:"node_out",ba:"uD",fa:["float"],ea:!1},{$:"node_out",
ba:"uE",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vec3 r_ = uA ; float uF = clamp ( uC [ 0 ] , _0_0 , _1_0 ) ; float uw = clamp ( uC [ 1 ] , _0_0 , _1_0 ) ; float rF = uC [ 2 ] ; vec3 pW = normalize ( ou + uy ) ; float pf = ( _1_0 - uB ) * dot ( r_ , uy ) + uB ; float uG = ( _1_0 - uB ) * max ( dot ( uy , pW ) , _0_0 ) + uB ; float uH = ( _1_0 - uB ) * max ( dot ( uA , pW ) , _0_0 ) + uB ; uD = _0_0 ; if ( uz . r != _0_0 ) { if ( uF > _0_0 ) { float pv = max ( dot ( r_ , ou ) , _0_0 ) ; float pw = uF * uF ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = uy - pf * r_ ; vec3 py = ou - pv * r_ ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) uD = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; uD = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else uD = pf ; uD = max ( uD , _0_0 ) ; } float L = uw ; float uI = L * L ; float dX = ( uH * uI - uH ) * uH + _1_0 ; float cy = uI / ( M_PI * dX * dX ) ; float uJ ; float uK ; float uL = pow ( _1_0 - uG , 5.0 ) ; uJ = _1_0 ; uK = uL ; float hI = L / 2.0 ; float uM = hI * hI ; float uN = _1_0 - uM ; float uO = _1_0 / ( uG * uG * uN + uM ) ; uJ *= uO ; uK *= uO ; float rC = mix ( 0.04 , _1_0 , rF ) ; float uP = mix ( uK , uJ , rC ) ; uE = max ( pf * cy * uP , _0_0 ) ;".split(" ")}]},
{$:"node",ba:"BSDF_ANISOTROPIC",ma:[],la:[{$:"node_in",ba:"ve",fa:["vec3"],ea:!1},{$:"node_in",ba:"vf",fa:["float"],ea:!1},{$:"node_in",ba:"vg",fa:["float"],ea:!1},{$:"node_in",ba:"vh",fa:["float"],ea:!1},{$:"node_in",ba:"vi",fa:["vec3"],ea:!1},{$:"node_in",ba:"vj",fa:["vec3"],ea:!1},{$:"node_out",ba:"vk",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"vk = ve ; vf ; vg ; vh ; vi ; vj ;".split(" ")}]},{$:"node",ba:"BSDF_DIFFUSE",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"vl",fa:["vec3"],
ea:!1},{$:"node_in",ba:"vm",fa:["float"],ea:!1},{$:"node_in",ba:"vn",fa:["vec3"],ea:!1},{$:"node_out",ba:"vo",fa:["vec3"],ea:!1},{$:"node_out",ba:"vp",fa:["vec3"],ea:!1},{$:"node_out",ba:"vq",fa:["float"],ea:!1},{$:"node_out",ba:"vr",fa:["vec3"],ea:!1},{$:"node_out",ba:"vs",fa:["float"],ea:!1},{$:"node_out",ba:"vt",fa:["float"],ea:!1},{$:"node_out",ba:"vu",fa:["vec3"],ea:!1},{$:"node_out",ba:"vv",fa:["vec3"],ea:!1},{$:"node_out",ba:"vw",fa:["float"],ea:!1},{$:"node_out",ba:"vx",fa:["vec3"],ea:!1},
{$:"node_out",ba:"vy",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vp = vl ; vq = vm ; vt = _0_0 ; vw = _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vu","=","vn",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vu","=","ot",";"]}]}]},{$:"txt",aa:"vo ; vr ; vs ; vv ; vx ; vy ;".split(" ")}]},{$:"node",ba:"BSDF_GLASS",ma:[],la:[{$:"node_in",ba:"vz",fa:["vec3"],ea:!1},{$:"node_in",ba:"vA",fa:["float"],ea:!1},{$:"node_in",ba:"vB",fa:["float"],ea:!1},{$:"node_in",ba:"vC",
fa:["vec3"],ea:!1},{$:"node_out",ba:"vD",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"vD = vz ; vA ; vB ; vC ;".split(" ")}]},{$:"node",ba:"BSDF_GLOSSY",ma:[{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"vE",fa:["vec3"],ea:!1},{$:"node_in",ba:"vF",fa:["float"],ea:!1},{$:"node_in",ba:"vG",fa:["vec3"],ea:!1},{$:"node_out",ba:"vH",fa:["vec3"],ea:!1},{$:"node_out",ba:"vI",fa:["vec3"],ea:!1},{$:"node_out",ba:"vJ",fa:["float"],ea:!1},{$:"node_out",ba:"vK",fa:["vec3"],ea:!1},{$:"node_out",ba:"vL",
fa:["float"],ea:!1},{$:"node_out",ba:"vM",fa:["float"],ea:!1},{$:"node_out",ba:"vN",fa:["vec3"],ea:!1},{$:"node_out",ba:"vO",fa:["vec3"],ea:!1},{$:"node_out",ba:"vP",fa:["float"],ea:!1},{$:"node_out",ba:"vQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"vR",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vK = vE ; vL = vF ; vM = _1_0 ; vP = _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vN","=","vG",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vN","=","ot",";"]}]}]},{$:"txt",
aa:"vH ; vI ; vJ ; vO ; vQ ; vR ;".split(" ")}]},{$:"node",ba:"BSDF_HAIR",ma:[],la:[{$:"node_in",ba:"vS",fa:["vec3"],ea:!1},{$:"node_in",ba:"vT",fa:["float"],ea:!1},{$:"node_in",ba:"vU",fa:["float"],ea:!1},{$:"node_in",ba:"vV",fa:["float"],ea:!1},{$:"node_out",ba:"vW",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"vW = vS ; vT ; vU ; vV ;".split(" ")}]},{$:"node",ba:"BSDF_TRANSPARENT",ma:[],la:[{$:"node_in",ba:"vX",fa:["vec3"],ea:!1},{$:"node_out",ba:"vY",fa:["vec3"],ea:!1},{$:"node_out",ba:"vZ",fa:["vec3"],
ea:!1},{$:"node_out",ba:"v_",fa:["float"],ea:!1},{$:"node_out",ba:"wa",fa:["vec3"],ea:!1},{$:"node_out",ba:"wb",fa:["float"],ea:!1},{$:"node_out",ba:"wc",fa:["float"],ea:!1},{$:"node_out",ba:"wd",fa:["vec3"],ea:!1},{$:"node_out",ba:"we",fa:["vec3"],ea:!1},{$:"node_out",ba:"wf",fa:["float"],ea:!1},{$:"node_out",ba:"wg",fa:["vec3"],ea:!1},{$:"node_out",ba:"wh",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"wg = vX ; wc = _0_0 ; wf = _0_0 ; wh = _0_0 ; wd = ot ; vY ; vZ ; v_ ; wa ; wb ; we ;".split(" ")}]},{$:"node",
ba:"BSDF_TRANSLUCENT",ma:[],la:[{$:"node_in",ba:"wi",fa:["vec3"],ea:!1},{$:"node_in",ba:"wj",fa:["vec3"],ea:!1},{$:"node_out",ba:"wk",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wk = wi ; wj ;".split(" ")}]},{$:"node",ba:"BSDF_REFRACTION",ma:[],la:[{$:"node_in",ba:"wl",fa:["vec3"],ea:!1},{$:"node_in",ba:"wm",fa:["float"],ea:!1},{$:"node_in",ba:"wn",fa:["float"],ea:!1},{$:"node_in",ba:"wo",fa:["vec3"],ea:!1},{$:"node_out",ba:"wp",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wp [ 0 ] = wp [ 1 ] = wp [ 2 ] = _0_0 ; wl ; wm ; wn ; wo ;".split(" ")}]},
{$:"node",ba:"BSDF_TOON",ma:[],la:[{$:"node_in",ba:"wq",fa:["vec3"],ea:!1},{$:"node_in",ba:"wr",fa:["float"],ea:!1},{$:"node_in",ba:"ws",fa:["float"],ea:!1},{$:"node_in",ba:"wt",fa:["vec3"],ea:!1},{$:"node_out",ba:"wu",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wu = wq ; wr ; ws ; wt ;".split(" ")}]},{$:"node",ba:"BSDF_VELVET",ma:[],la:[{$:"node_in",ba:"wv",fa:["vec3"],ea:!1},{$:"node_in",ba:"wA",fa:["float"],ea:!1},{$:"node_in",ba:"wB",fa:["vec3"],ea:!1},{$:"node_out",ba:"wC",fa:["vec3"],ea:!1}],ja:[{$:"txt",
aa:"wC = wv ; wA ; wB ;".split(" ")}]},{$:"node",ba:"SUBSURFACE_SCATTERING",ma:[],la:[{$:"node_in",ba:"wD",fa:["vec3"],ea:!1},{$:"node_in",ba:"wE",fa:["float"],ea:!1},{$:"node_in",ba:"wF",fa:["vec3"],ea:!1},{$:"node_in",ba:"wG",fa:["float"],ea:!1},{$:"node_in",ba:"wH",fa:["float"],ea:!1},{$:"node_in",ba:"wI",fa:["vec3"],ea:!1},{$:"node_out",ba:"wJ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wJ [ 0 ] = wJ [ 1 ] = wJ [ 2 ] = _0_0 ; wD ; wF ; wG ; wH ; wI ; wE ;".split(" ")}]},{$:"node",ba:"EMISSION",ma:[],
la:[{$:"node_in",ba:"wK",fa:["vec3"],ea:!1},{$:"node_in",ba:"wL",fa:["float"],ea:!1},{$:"node_out",ba:"wM",fa:["vec3"],ea:!1},{$:"node_out",ba:"wN",fa:["vec3"],ea:!1},{$:"node_out",ba:"wO",fa:["float"],ea:!1},{$:"node_out",ba:"wP",fa:["vec3"],ea:!1},{$:"node_out",ba:"wQ",fa:["float"],ea:!1},{$:"node_out",ba:"wR",fa:["float"],ea:!1},{$:"node_out",ba:"wS",fa:["vec3"],ea:!1},{$:"node_out",ba:"wT",fa:["vec3"],ea:!1},{$:"node_out",ba:"wU",fa:["float"],ea:!1},{$:"node_out",ba:"wV",fa:["vec3"],ea:!1},{$:"node_out",
ba:"wW",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"wT = wL * wK ; wR = _0_0 ; wU = _1_0 ; wS = ot ; wM ; wN ; wO ; wP ; wQ ; wV ; wW ;".split(" ")}]},{$:"node",ba:"AMBIENT_OCCLUSION",ma:[],la:[{$:"node_in",ba:"wX",fa:["vec3"],ea:!1},{$:"node_out",ba:"wY",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wY [ 0 ] = wY [ 1 ] = wY [ 2 ] = _0_0 ; wX ;".split(" ")}]},{$:"node",ba:"HOLDOUT",ma:[],la:[{$:"node_out",ba:"wZ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"wZ [ 0 ] = wZ [ 1 ] = wZ [ 2 ] = _0_0 ;".split(" ")}]},{$:"node",
ba:"VOLUME_ABSORPTION",ma:[],la:[{$:"node_in",ba:"w_",fa:["vec3"],ea:!1},{$:"node_in",ba:"xa",fa:["float"],ea:!1},{$:"node_out",ba:"xb",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xb [ 0 ] = xb [ 1 ] = xb [ 2 ] = _0_0 ; w_ ; xa ;".split(" ")}]},{$:"node",ba:"VOLUME_SCATTER",ma:[],la:[{$:"node_in",ba:"xc",fa:["vec3"],ea:!1},{$:"node_in",ba:"xd",fa:["float"],ea:!1},{$:"node_in",ba:"xe",fa:["float"],ea:!1},{$:"node_out",ba:"xf",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xf [ 0 ] = xf [ 1 ] = xf [ 2 ] = _0_0 ; xc ; xd ; xe ;".split(" ")}]},
{$:"node",ba:"BUMP",ma:[],la:[{$:"node_in",ba:"Hj",fa:["float"],ea:!1},{$:"node_in",ba:"Hk",fa:["float"],ea:!1},{$:"node_in",ba:"xi",fa:["float"],ea:!1},{$:"node_in",ba:"Hl",fa:["vec3"],ea:!1},{$:"node_out",ba:"xk",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xk = Hl ; Hj ; Hk ; xi ;".split(" ")}]},{$:"node",ba:"DISPLACEMENT_BUMP",ma:[],la:[{$:"node_in",ba:"xr",fa:["float"],ea:!1},{$:"node_out",ba:"xs",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xs = ot ; xr ;".split(" ")}]},{$:"node",ba:"NORMAL_MAP",ma:[{$:"node_var",
ba:"SPACE",aa:["NM_TANGENT"]},{$:"node_var",ba:"USE_NORMAL_IN",aa:["0"]}],la:[{$:"node_in",ba:"xt",fa:["float"],ea:!1},{$:"node_in",ba:"xu",fa:["vec4"],ea:!1},{$:"node_in",ba:"xv",fa:["vec3"],ea:!1},{$:"node_out",ba:"xA",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NORMAL_IN"],ja:[{$:"txt",aa:["vec3","xB","=","xv",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["vec3","xB","=","sw",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["SPACE","NM_TANGENT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xA = 2.0 * xu . xyz - _1_0 ; xA = sA * xA ;".split(" ")}]},
{$:"node_elif",ga:["SPACE","NM_OBJECT",{$:"equal_expr",ia:2},"SPACE","NM_BLENDER_OBJECT",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"xA = 2.0 * xu . xyz - _1_0 ; xA . yz *= - _1_0 ; xA = _ ( u_model_tsr , xA ) ;".split(" ")}]},{$:"node_elif",ga:["SPACE","NM_WORLD",{$:"equal_expr",ia:2},"SPACE","NM_BLENDER_WORLD",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ja:[{$:"txt",aa:"xA = 2.0 * xu . xyz - _1_0 ; xA . yz *= - _1_0 ;".split(" ")}]}]},{$:"txt",aa:"float ma = max ( xt , _0_0 ) ; xA = normalize ( mix ( xB , xA , ma ) ) ;".split(" ")}]},
{$:"node",ba:"VECT_TRANSFORM",ma:[{$:"node_var",ba:"CONVERT_TYPE",aa:["VT_WORLD_TO_OBJECT"]},{$:"node_var",ba:"VECTOR_TYPE",aa:["VT_VECTOR"]}],la:[{$:"node_in",ba:"xC",fa:["vec3"],ea:!1},{$:"node_out",ba:"xD",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE","VT_WORLD_TO_WORLD",{$:"equal_expr",ia:2},"CONVERT_TYPE","VT_OBJECT_TO_OBJECT",{$:"equal_expr",ia:2},"CONVERT_TYPE","VT_CAMERA_TO_CAMERA",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:3}],ja:[{$:"txt",aa:["xD","=","xC",
";"]}]},{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["VECTOR_TYPE","VT_POINT",{$:"equal_expr",ia:2}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = ap ( u_view_tsr_frag , xC ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = ap ( u_model_tsr_inverse , xC ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{$:"equal_expr",ia:2}],
ja:[{$:"txt",aa:"xD = ap ( u_model_tsr , xC ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = ap ( u_model_tsr , xC ) ; xD = ap ( u_view_tsr_frag , xD ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = ap ( u_view_tsr_inverse , xC ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = ap ( u_view_tsr_inverse , xC ) ; xD = ap ( u_model_tsr_inverse , xD ) ;".split(" ")}]}]}]},
{$:"node_else",ja:[{$:"node_cond",da:[{$:"node_if",ga:["CONVERT_TYPE","VT_WORLD_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = _ ( u_view_tsr_frag , xC ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_WORLD_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = _ ( u_model_tsr_inverse , xC ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_OBJECT_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = _ ( u_model_tsr , xC ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE",
"VT_OBJECT_TO_CAMERA",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = _ ( u_model_tsr , xC ) ; xD = _ ( u_view_tsr_frag , xD ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_WORLD",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = _ ( u_view_tsr_inverse , xC ) ;".split(" ")}]},{$:"node_elif",ga:["CONVERT_TYPE","VT_CAMERA_TO_OBJECT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = _ ( u_view_tsr_inverse , xC ) ; xD = _ ( u_model_tsr_inverse , xD ) ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["VECTOR_TYPE","VT_NORMAL",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"xD = normalize ( xD ) ;".split(" ")}]}]}]}]}]},{$:"node",ba:"BLACKBODY",ma:[],la:[{$:"node_in",ba:"xE",fa:["float"],ea:!1},{$:"node_out",ba:"xF",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xF [ 0 ] = xF [ 1 ] = xF [ 2 ] = _0_0 ; xE ;".split(" ")}]},{$:"node",ba:"WAVELENGTH",ma:[],la:[{$:"node_in",ba:"xG",fa:["float"],ea:!1},{$:"node_out",ba:"xH",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xH [ 0 ] = xH [ 1 ] = xH [ 2 ] = _0_0 ; xG ;".split(" ")}]},
{$:"node",ba:"SEPXYZ",ma:[],la:[{$:"node_in",ba:"xI",fa:["vec3"],ea:!1},{$:"node_out",ba:"xJ",fa:["float"],ea:!1},{$:"node_out",ba:"xK",fa:["float"],ea:!1},{$:"node_out",ba:"xL",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"xJ = xI [ 0 ] ; xK = xI [ 1 ] ; xL = xI [ 2 ] ;".split(" ")}]},{$:"node",ba:"COMBXYZ",ma:[],la:[{$:"node_in",ba:"xM",fa:["float"],ea:!1},{$:"node_in",ba:"xN",fa:["float"],ea:!1},{$:"node_in",ba:"xO",fa:["float"],ea:!1},{$:"node_out",ba:"xP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"xP [ 0 ] = xM ; xP [ 1 ] = xN ; xP [ 2 ] = xO ;".split(" ")}]},
{$:"node",ba:"BRIGHTCONTRAST",ma:[],la:[{$:"node_in",ba:"xQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"xR",fa:["float"],ea:!1},{$:"node_in",ba:"xS",fa:["float"],ea:!1},{$:"node_out",ba:"xT",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float b = xR - xS * _0_5 ; xT = max ( ( _1_0 + xS ) * xQ + b , vec3 ( _0_0 ) ) ;".split(" ")}]},{$:"node",ba:"LIGHT_FALLOFF",ma:[],la:[{$:"node_in",ba:"xU",fa:["float"],ea:!1},{$:"node_in",ba:"xV",fa:["float"],ea:!1},{$:"node_out",ba:"xW",fa:["float"],ea:!1},{$:"node_out",ba:"xX",
fa:["float"],ea:!1},{$:"node_out",ba:"xY",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"xW = xX = xY = _0_0 ; xU ; xV ;".split(" ")}]},{$:"node",ba:"TEX_IMAGE",ma:[],la:[{$:"node_in",ba:"Hm",fa:["vec3"],ea:!1},{$:"node_out",ba:"Hn",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ho",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Hn [ 0 ] = Hn [ 1 ] = Hn [ 2 ] = _0_0 ; Ho = _1_0 ; Hm ;".split(" ")}]},{$:"node",ba:"TEX_ENVIRONMENT",ma:[],la:[{$:"node_in",ba:"Hp",fa:["vec3"],ea:!1},{$:"node_out",ba:"Hq",fa:["vec3"],ea:!1}],ja:[{$:"txt",
aa:"Hq [ 0 ] = Hq [ 1 ] = Hq [ 2 ] = _0_0 ; Hp ;".split(" ")}]},{$:"node",ba:"TEX_SKY",ma:[],la:[{$:"node_in",ba:"xZ",fa:["vec3"],ea:!1},{$:"node_out",ba:"x_",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"x_ [ 0 ] = x_ [ 1 ] = x_ [ 2 ] = _0_0 ; xZ ;".split(" ")}]},{$:"node",ba:"TEX_NOISE",ma:[],la:[{$:"node_in",ba:"ya",fa:["vec3"],ea:!1},{$:"node_in",ba:"yb",fa:["float"],ea:!1},{$:"node_in",ba:"yc",fa:["float"],ea:!1},{$:"node_in",ba:"yd",fa:["float"],ea:!1},{$:"node_out",ba:"ye",fa:["vec3"],ea:!1},{$:"node_out",
ba:"yf",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"ye [ 0 ] = ye [ 1 ] = ye [ 2 ] = _0_0 ; yf = _1_0 ; ya ; yb ; yc ; yd ;".split(" ")}]},{$:"node",ba:"TEX_WAVE",ma:[],la:[{$:"node_in",ba:"yg",fa:["vec3"],ea:!1},{$:"node_in",ba:"yh",fa:["float"],ea:!1},{$:"node_in",ba:"yi",fa:["float"],ea:!1},{$:"node_in",ba:"yj",fa:["float"],ea:!1},{$:"node_in",ba:"yk",fa:["float"],ea:!1},{$:"node_out",ba:"yl",fa:["vec3"],ea:!1},{$:"node_out",ba:"ym",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yl [ 0 ] = yl [ 1 ] = yl [ 2 ] = _0_0 ; ym = _1_0 ; yg ; yh ; yi ; yj ; yk ;".split(" ")}]},
{$:"node",ba:"TEX_VORONOI",ma:[],la:[{$:"node_in",ba:"yn",fa:["vec3"],ea:!1},{$:"node_in",ba:"yo",fa:["float"],ea:!1},{$:"node_out",ba:"yp",fa:["vec3"],ea:!1},{$:"node_out",ba:"yq",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yp [ 0 ] = yp [ 1 ] = yp [ 2 ] = _0_0 ; yq = _1_0 ; yn ; yo ;".split(" ")}]},{$:"node",ba:"TEX_MUSGRAVE",ma:[],la:[{$:"node_in",ba:"yr",fa:["vec3"],ea:!1},{$:"node_in",ba:"ys",fa:["float"],ea:!1},{$:"node_in",ba:"yt",fa:["float"],ea:!1},{$:"node_in",ba:"yu",fa:["float"],ea:!1},{$:"node_in",
ba:"yv",fa:["float"],ea:!1},{$:"node_in",ba:"yA",fa:["float"],ea:!1},{$:"node_in",ba:"yB",fa:["float"],ea:!1},{$:"node_out",ba:"yC",fa:["vec3"],ea:!1},{$:"node_out",ba:"yD",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yC [ 0 ] = yC [ 1 ] = yC [ 2 ] = _0_0 ; yD = _1_0 ; yr ; ys ; yt ; yu ; yv ; yA ; yB ;".split(" ")}]},{$:"node",ba:"TEX_GRADIENT",ma:[],la:[{$:"node_in",ba:"yE",fa:["vec3"],ea:!1},{$:"node_out",ba:"yF",fa:["vec3"],ea:!1},{$:"node_out",ba:"yG",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yF [ 0 ] = yF [ 1 ] = yF [ 2 ] = _0_0 ; yG = _1_0 ; yE ;".split(" ")}]},
{$:"node",ba:"TEX_MAGIC",ma:[],la:[{$:"node_in",ba:"yH",fa:["vec3"],ea:!1},{$:"node_in",ba:"yI",fa:["float"],ea:!1},{$:"node_in",ba:"yJ",fa:["float"],ea:!1},{$:"node_out",ba:"yK",fa:["vec3"],ea:!1},{$:"node_out",ba:"yL",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yK [ 0 ] = yK [ 1 ] = yK [ 2 ] = _0_0 ; yL = _1_0 ; yH ; yI ; yJ ;".split(" ")}]},{$:"node",ba:"TEX_CHECKER",ma:[],la:[{$:"node_in",ba:"yM",fa:["vec3"],ea:!1},{$:"node_in",ba:"yN",fa:["vec3"],ea:!1},{$:"node_in",ba:"yO",fa:["vec3"],ea:!1},{$:"node_in",
ba:"yP",fa:["float"],ea:!1},{$:"node_out",ba:"yQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"yR",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"yQ [ 0 ] = yQ [ 1 ] = yQ [ 2 ] = _0_0 ; yR = _1_0 ; yM ; yN ; yO ; yP ;".split(" ")}]},{$:"node",ba:"TEX_BRICK",ma:[],la:[{$:"node_in",ba:"yS",fa:["vec3"],ea:!1},{$:"node_in",ba:"yT",fa:["vec3"],ea:!1},{$:"node_in",ba:"yU",fa:["vec3"],ea:!1},{$:"node_in",ba:"yV",fa:["vec3"],ea:!1},{$:"node_in",ba:"yW",fa:["float"],ea:!1},{$:"node_in",ba:"yX",fa:["float"],ea:!1},{$:"node_in",
ba:"yY",fa:["float"],ea:!1},{$:"node_in",ba:"yZ",fa:["float"],ea:!1},{$:"node_in",ba:"y_",fa:["float"],ea:!1},{$:"node_out",ba:"za",fa:["vec3"],ea:!1},{$:"node_out",ba:"zb",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"za [ 0 ] = za [ 1 ] = za [ 2 ] = _0_0 ; zb = _1_0 ; yS ; yT ; yU ; yV ; yW ; yX ; yY ; yZ ; y_ ;".split(" ")}]},{$:"node",ba:"ADD_SHADER",ma:[],la:[{$:"node_in",ba:"zc",fa:["vec3"],ea:!1},{$:"node_in",ba:"zd",fa:["vec3"],ea:!1},{$:"node_out",ba:"ze",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"ze = clamp ( zc + zd , vec3 ( _0_0 ) , vec3 ( _1_0 ) ) ;".split(" ")}]},
{$:"node",ba:"MIX_SHADER",ma:[],la:[{$:"node_in",ba:"zf",fa:["float"],ea:!1},{$:"node_in",ba:"zg",fa:["vec3"],ea:!1},{$:"node_in",ba:"zh",fa:["vec3"],ea:!1},{$:"node_in",ba:"zi",fa:["vec3"],ea:!1},{$:"node_in",ba:"zj",fa:["float"],ea:!1},{$:"node_in",ba:"zk",fa:["vec3"],ea:!1},{$:"node_in",ba:"zl",fa:["float"],ea:!1},{$:"node_in",ba:"zm",fa:["float"],ea:!1},{$:"node_in",ba:"zn",fa:["vec3"],ea:!1},{$:"node_in",ba:"zo",fa:["vec3"],ea:!1},{$:"node_in",ba:"zp",fa:["float"],ea:!1},{$:"node_in",ba:"zq",
fa:["vec3"],ea:!1},{$:"node_in",ba:"zr",fa:["float"],ea:!1},{$:"node_in",ba:"zs",fa:["vec3"],ea:!1},{$:"node_in",ba:"zt",fa:["float"],ea:!1},{$:"node_in",ba:"zu",fa:["vec3"],ea:!1},{$:"node_in",ba:"zv",fa:["float"],ea:!1},{$:"node_in",ba:"zA",fa:["float"],ea:!1},{$:"node_in",ba:"zB",fa:["vec3"],ea:!1},{$:"node_in",ba:"zC",fa:["vec3"],ea:!1},{$:"node_in",ba:"zD",fa:["float"],ea:!1},{$:"node_in",ba:"zE",fa:["vec3"],ea:!1},{$:"node_in",ba:"zF",fa:["float"],ea:!1},{$:"node_out",ba:"zG",fa:["vec3"],ea:!1},
{$:"node_out",ba:"zH",fa:["vec3"],ea:!1},{$:"node_out",ba:"zI",fa:["float"],ea:!1},{$:"node_out",ba:"zJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"zK",fa:["float"],ea:!1},{$:"node_out",ba:"zL",fa:["float"],ea:!1},{$:"node_out",ba:"zM",fa:["vec3"],ea:!1},{$:"node_out",ba:"zN",fa:["vec3"],ea:!1},{$:"node_out",ba:"zO",fa:["float"],ea:!1},{$:"node_out",ba:"zP",fa:["vec3"],ea:!1},{$:"node_out",ba:"zQ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( zf , _0_0 , _1_0 ) ; zH = mix ( zi , zs , zR ) ; zI = mix ( zj , zt , zR ) ; if ( zm > _0_0 ) { if ( zA > _0_0 ) { zJ = mix ( zk , zu , zR ) ; zK = mix ( zl , zv , zR ) ; } else { zJ = zk ; zK = zl ; } } else { zJ = zu ; zK = zv ; } if ( zp > _0_0 ) { if ( zD > _0_0 ) { zN = mix ( zo , zC , zR ) ; } else { zN = zo ; } } else { zN = zC ; } zL = mix ( zm , zA , zR ) ; zM = mix ( zn , zB , zR ) ; zO = mix ( zp , zD , zR ) ; zP = mix ( zq , zE , zR ) ; zQ = mix ( zr , zF , zR ) ;".split(" ")}]},
{$:"node",ba:"UV_MERGED",ma:[],la:[{$:"node_out",ba:"zS",fa:["vec3"],ea:!1},{$:"node_out",ba:"zT",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_zS"],ja:[{$:"txt",aa:"zS = rX ( A ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_zT"],ja:[{$:"txt",aa:"zT = vec3 ( A , _0_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"TEX_COORD_UV",ma:[],la:[{$:"node_out",ba:"zU",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"zU = vec3 ( A , _0_0 ) ;".split(" ")}]},{$:"node",ba:"TEX_COORD_NO",ma:[],
la:[{$:"node_out",ba:"zV",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["zV","=","ot",";"]}]},{$:"node",ba:"TEX_COORD_GE",ma:[],la:[{$:"node_out",ba:"zW",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"zW = vec3 ( A , _0_0 ) ;".split(" ")}]},{$:"node",ba:"TEX_COORD_OB",ma:[],la:[{$:"node_out",ba:"zX",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"zX [ 0 ] = zX [ 1 ] = zX [ 2 ] = _1_0 ;".split(" ")}]},{$:"node",ba:"TEX_COORD_CA",ma:[],la:[{$:"node_out",ba:"zY",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"zY [ 0 ] = sB [ 0 ] ; zY [ 1 ] = sB [ 1 ] ; zY [ 2 ] = _1_0 ;".split(" ")}]},
{$:"node",ba:"TEX_COORD_WI",ma:[],la:[{$:"node_out",ba:"zZ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"zZ [ 0 ] = zZ [ 1 ] = zZ [ 2 ] = _1_0 ;".split(" ")}]},{$:"node",ba:"TEX_COORD_RE",ma:[],la:[{$:"node_out",ba:"z_",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"z_ [ 0 ] = z_ [ 1 ] = z_ [ 2 ] = _1_0 ;".split(" ")}]},{$:"node",ba:"UVMAP",ma:[],la:[{$:"node_out",ba:"Aa",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Aa = vec3 ( A , _0_0 ) ;".split(" ")}]},{$:"node",ba:"PARTICLE_INFO",ma:[],la:[{$:"node_out",ba:"Ab",fa:["float"],
ea:!1},{$:"node_out",ba:"Ac",fa:["float"],ea:!1},{$:"node_out",ba:"Ad",fa:["float"],ea:!1},{$:"node_out",ba:"Ae",fa:["vec3"],ea:!1},{$:"node_out",ba:"Af",fa:["float"],ea:!1},{$:"node_out",ba:"Ag",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ah",fa:["vec3"],ea:!1},{$:"node_param",ba:"Hf",fa:["GLSL_IN","vec4"],ea:!0},{$:"node_param",ba:"Hg",fa:["GLSL_IN","vec3"],ea:!0},{$:"node_param",ba:"Hh",fa:["GLSL_IN","vec3"],ea:!0},{$:"node_param",ba:"Hi",fa:["GLSL_IN","vec3"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",
ga:["PARTICLE_BATCH"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ab"],ja:[{$:"txt",aa:"Ab = Hf [ 0 ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ac"],ja:[{$:"txt",aa:"Ac = Hf [ 1 ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ad"],ja:[{$:"txt",aa:"Ad = Hf [ 2 ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ae"],ja:[{$:"txt",aa:["Ae","=","Hg",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Af"],ja:[{$:"txt",aa:"Af = Hf [ 3 ] ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ag"],ja:[{$:"txt",aa:["Ag","=","Hh",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ah"],ja:[{$:"txt",aa:["Ah","=","Hi",";"]}]}]}]},{$:"node_else",ja:[{$:"txt",aa:"Ab = _0_0 ; Ac = _0_0 ; Ad = _0_0 ; Ae = vec3 ( _0_0 ) ; Af = _0_0 ; Ag = Ae ; Ah = Ae ;".split(" ")}]}]}]},{$:"node",ba:"HAIR_INFO",ma:[],la:[{$:"node_out",ba:"Ai",fa:["float"],ea:!1},{$:"node_out",ba:"Aj",fa:["float"],ea:!1},{$:"node_out",ba:"Ak",fa:["float"],ea:!1},{$:"node_out",ba:"Al",
fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Ai = _0_0 ; Aj = _0_0 ; Ak = _0_0 ; Al = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"OBJECT_INFO",ma:[],la:[{$:"node_out",ba:"Am",fa:["vec3"],ea:!1},{$:"node_out",ba:"An",fa:["float"],ea:!1},{$:"node_out",ba:"Ao",fa:["float"],ea:!1},{$:"node_out",ba:"Ap",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"An = _0_0 ; Ao = _0_0 ; Ap = _0_0 ; Am = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"WIREFRAME",ma:[],la:[{$:"node_in",ba:"Aq",fa:["float"],ea:!1},{$:"node_out",ba:"Ar",
fa:["float"],ea:!1}],ja:[{$:"txt",aa:["Ar","=","Aq",";"]}]},{$:"node",ba:"TANGENT",ma:[],la:[{$:"node_out",ba:"As",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"As = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"LAYER_WEIGHT",ma:[],la:[{$:"node_in",ba:"Hr",fa:["float"],ea:!1},{$:"node_in",ba:"Hs",fa:["vec3"],ea:!1},{$:"node_out",ba:"Av",fa:["float"],ea:!1},{$:"node_out",ba:"Aw",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Av = Aw = _0_0 ; Hs ; Hr ;".split(" ")}]},{$:"node",ba:"LIGHT_PATH",ma:[],la:[{$:"node_out",
ba:"Ay",fa:["float"],ea:!1},{$:"node_out",ba:"Az",fa:["float"],ea:!1},{$:"node_out",ba:"AA",fa:["float"],ea:!1},{$:"node_out",ba:"AB",fa:["float"],ea:!1},{$:"node_out",ba:"AC",fa:["float"],ea:!1},{$:"node_out",ba:"AD",fa:["float"],ea:!1},{$:"node_out",ba:"AE",fa:["float"],ea:!1},{$:"node_out",ba:"AF",fa:["float"],ea:!1},{$:"node_out",ba:"AG",fa:["float"],ea:!1},{$:"node_out",ba:"AH",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Ay = Az = AA = _0_0 ; AB = AC = AD = _0_0 ; AE = AE = AG = AH = _0_0 ; AF = _0_0 ;".split(" ")}]},
{$:"node",ba:"ATTRIBUTE",ma:[],la:[{$:"node_out",ba:"AJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"AK",fa:["vec3"],ea:!1},{$:"node_out",ba:"AL",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"AJ = AK = vec3 ( _0_0 ) ; AL = _0_0 ;".split(" ")}]},{$:"node",ba:"SCRIPT",ma:[],la:[],ja:[]},{$:"node",ba:"CURVE_VEC",ma:[{$:"node_var",ba:"READ_R",aa:["0"]},{$:"node_var",ba:"READ_G",aa:["0"]},{$:"node_var",ba:"READ_B",aa:["0"]},{$:"node_var",ba:"NODE_TEX_ROW",aa:["0.0"]}],la:[{$:"node_in",ba:"AM",fa:["float"],ea:!1},{$:"node_in",
ba:"AN",fa:["vec3"],ea:!1},{$:"node_out",ba:"AO",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["AO","=","AN",";"]},{$:"node_cond",da:[{$:"node_if",ga:["READ_R"],ja:[{$:"txt",aa:"AO . r = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * AN . r + _0_5 , NODE_TEX_ROW ) ) . r - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_G"],ja:[{$:"txt",aa:"AO . g = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * AN . g + _0_5 , NODE_TEX_ROW ) ) . g - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"node_cond",
da:[{$:"node_if",ga:["READ_B"],ja:[{$:"txt",aa:"AO . b = ( GLSL_TEXTURE ( u_nodes_texture , vec2 ( _0_5 * AN . b + _0_5 , NODE_TEX_ROW ) ) . b - _0_5 ) * 2.0 ;".split(" ")}]}]},{$:"txt",aa:"AO = mix ( AN , AO , AM ) ;".split(" ")}]},{$:"node",ba:"CURVE_RGB",ma:[{$:"node_var",ba:"READ_A",aa:["0"]},{$:"node_var",ba:"READ_R",aa:["0"]},{$:"node_var",ba:"READ_G",aa:["0"]},{$:"node_var",ba:"READ_B",aa:["0"]},{$:"node_var",ba:"NODE_TEX_ROW",aa:["_0_0"]}],la:[{$:"node_in",ba:"AP",fa:["float"],ea:!1},{$:"node_in",
ba:"AQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"AR",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["READ_A"],ja:[{$:"txt",aa:"float r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AQ . r , NODE_TEX_ROW ) ) . a ; float g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AQ . g , NODE_TEX_ROW ) ) . a ; float b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AQ . b , NODE_TEX_ROW ) ) . a ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"float r = AQ . r ; float g = AQ . g ; float b = AQ . b ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["READ_R"],ja:[{$:"txt",aa:"AR . r = GLSL_TEXTURE ( u_nodes_texture , vec2 ( r , NODE_TEX_ROW ) ) . r ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"AR . r = r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_G"],ja:[{$:"txt",aa:"AR . g = GLSL_TEXTURE ( u_nodes_texture , vec2 ( g , NODE_TEX_ROW ) ) . g ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"AR . g = g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["READ_B"],ja:[{$:"txt",aa:"AR . b = GLSL_TEXTURE ( u_nodes_texture , vec2 ( b , NODE_TEX_ROW ) ) . b ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"AR . b = b ;".split(" ")}]}]},{$:"txt",aa:"AR = mix ( AQ , AR , AP ) ;".split(" ")}]},{$:"node",ba:"VALTORGB",ma:[{$:"node_var",ba:"NODE_TEX_ROW",aa:["_0_0"]}],la:[{$:"node_in",ba:"AS",fa:["float"],ea:!1},{$:"node_out",ba:"AT",fa:["vec3"],ea:!1},{$:"node_out",ba:"AU",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"vec4 AV = GLSL_TEXTURE ( u_nodes_texture , vec2 ( AS , NODE_TEX_ROW ) ) ; AT = AV . rgb ; AU = AV . a ;".split(" ")}]},{$:"node",ba:"MAPPING",ma:[{$:"node_var",ba:"MAPPING_SCALE_DEF",
aa:["0"]},{$:"node_var",ba:"MAPPING_SCALE",aa:["vec3","(","_1_0",")"]},{$:"node_var",ba:"MAPPING_TRANS_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_TRANS",aa:["vec3","(","_0_0",")"]},{$:"node_var",ba:"MAPPING_TRS_MATRIX_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_TRS_MATRIX",aa:["mat4","(","_1_0",")"]},{$:"node_var",ba:"MAPPING_MIN_CLIP_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_MIN_CLIP",aa:["vec3","(","_0_0",")"]},{$:"node_var",ba:"MAPPING_MAX_CLIP_DEF",aa:["0"]},{$:"node_var",ba:"MAPPING_MAX_CLIP",aa:["vec3",
"(","_1_0",")"]},{$:"node_var",ba:"MAPPING_IS_NORMAL",aa:["0"]}],la:[{$:"node_in",ba:"AW",fa:["vec3"],ea:!1},{$:"node_out",ba:"AX",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["AX","=","AW",";"]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_SCALE_DEF"],ja:[{$:"txt",aa:"AX = AX * MAPPING_SCALE ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_TRANS_DEF"],ja:[{$:"txt",aa:"AX = AX + MAPPING_TRANS ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_TRS_MATRIX_DEF"],ja:[{$:"txt",aa:"AX = ( MAPPING_TRS_MATRIX * vec4 ( AX , _1_0 ) ) . xyz ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_MIN_CLIP_DEF"],ja:[{$:"txt",aa:"AX = max ( AX , MAPPING_MIN_CLIP ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_MAX_CLIP_DEF"],ja:[{$:"txt",aa:"AX = min ( AX , MAPPING_MAX_CLIP ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MAPPING_IS_NORMAL"],ja:[{$:"txt",aa:"AX = normalize ( AX ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ADD",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"AY",fa:["float"],ea:!1},{$:"node_in",
ba:"AZ",fa:["float"],ea:!1},{$:"node_out",ba:"A_",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"A_ = AY + AZ ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"A_ = clamp ( A_ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_SUBTRACT",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Ba",fa:["float"],ea:!1},{$:"node_in",ba:"Bb",fa:["float"],ea:!1},{$:"node_out",ba:"Bc",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bc = Ba - Bb ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Bc = clamp ( Bc , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MULTIPLY",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Bd",fa:["float"],ea:!1},{$:"node_in",ba:"Be",fa:["float"],ea:!1},{$:"node_out",ba:"Bf",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bf = Bd * Be ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Bf = clamp ( Bf , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_DIVIDE",
ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Bg",fa:["float"],ea:!1},{$:"node_in",ba:"Bh",fa:["float"],ea:!1},{$:"node_out",ba:"Bi",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bi = ( Bh != _0_0 ) ? Bg / Bh : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Bi = clamp ( Bi , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_SINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Bj",fa:["float"],ea:!1},{$:"node_in",
ba:"Bk",fa:["float"],ea:!1},{$:"node_out",ba:"Bl",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bl = sin ( Bj ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Bl = clamp ( Bl , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Bk",";"]}]},{$:"node",ba:"MATH_COSINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Bm",fa:["float"],ea:!1},{$:"node_in",ba:"Bn",fa:["float"],ea:!1},{$:"node_out",ba:"Bo",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bo = cos ( Bm ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Bo = clamp ( Bo , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Bn",";"]}]},{$:"node",ba:"MATH_TANGENT",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Bp",fa:["float"],ea:!1},{$:"node_in",ba:"Bq",fa:["float"],ea:!1},{$:"node_out",ba:"Br",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Br = tan ( Bp ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Br = clamp ( Br , _0_0 , _1_0 ) ;".split(" ")}]}]},
{$:"txt",aa:["Bq",";"]}]},{$:"node",ba:"MATH_ARCSINE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Bs",fa:["float"],ea:!1},{$:"node_in",ba:"Bt",fa:["float"],ea:!1},{$:"node_out",ba:"Bu",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bu = ( Bs <= _1_0 && Bs >= - _1_0 ) ? asin ( Bs ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Bu = clamp ( Bu , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Bt",";"]}]},{$:"node",ba:"MATH_ARCCOSINE",ma:[{$:"node_var",
ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Bv",fa:["float"],ea:!1},{$:"node_in",ba:"Bw",fa:["float"],ea:!1},{$:"node_out",ba:"Bx",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Bx = ( Bv <= _1_0 && Bv >= - _1_0 ) ? acos ( Bv ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Bx = clamp ( Bx , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Bw",";"]}]},{$:"node",ba:"MATH_ARCTANGENT",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"By",
fa:["float"],ea:!1},{$:"node_in",ba:"Bz",fa:["float"],ea:!1},{$:"node_out",ba:"BA",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BA = atan ( By ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BA = clamp ( BA , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["Bz",";"]}]},{$:"node",ba:"MATH_POWER",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BB",fa:["float"],ea:!1},{$:"node_in",ba:"BC",fa:["float"],ea:!1},{$:"node_out",ba:"BD",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:"if ( BB < _0_0 && BC != floor ( BC ) ) BD = _0_0 ; else if ( BC == _0_0 ) BD = _1_0 ; else if ( BB < _0_0 ) BD = mix ( _1_0 , - _1_0 , sign ( mod ( - BC , 2.0 ) ) ) * pow ( - BB , BC ) ; else if ( BB == _0_0 ) BD = _0_0 ; else BD = pow ( BB , BC ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BD = clamp ( BD , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_LOGARITHM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BE",
fa:["float"],ea:!1},{$:"node_in",ba:"BF",fa:["float"],ea:!1},{$:"node_out",ba:"BG",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BG = ( BE > _0_0 && BF > _0_0 ) ? log2 ( BE ) / log2 ( BF ) : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BG = clamp ( BG , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MINIMUM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BH",fa:["float"],ea:!1},{$:"node_in",ba:"BI",fa:["float"],ea:!1},{$:"node_out",
ba:"BJ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BJ = min ( BH , BI ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BJ = clamp ( BJ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MAXIMUM",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BK",fa:["float"],ea:!1},{$:"node_in",ba:"BL",fa:["float"],ea:!1},{$:"node_out",ba:"BM",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BM = max ( BK , BL ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],
ja:[{$:"txt",aa:"BM = clamp ( BM , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ROUND",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BN",fa:["float"],ea:!1},{$:"node_in",ba:"BO",fa:["float"],ea:!1},{$:"node_out",ba:"BP",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BP = floor ( BN + _0_5 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BP = clamp ( BP , _0_0 , _1_0 ) ;".split(" ")}]}]},{$:"txt",aa:["BO",";"]}]},{$:"node",ba:"MATH_LESS_THAN",
ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BQ",fa:["float"],ea:!1},{$:"node_in",ba:"BR",fa:["float"],ea:!1},{$:"node_out",ba:"BS",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BS = ( BQ < BR ) ? _1_0 : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BS = clamp ( BS , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_GREATER_THAN",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BT",fa:["float"],ea:!1},{$:"node_in",
ba:"BU",fa:["float"],ea:!1},{$:"node_out",ba:"BV",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BV = ( BT > BU ) ? _1_0 : _0_0 ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BV = clamp ( BV , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_MODULO",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BW",fa:["float"],ea:!1},{$:"node_in",ba:"BX",fa:["float"],ea:!1},{$:"node_out",ba:"BY",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"BY = abs ( BX ) > 0.000001 ? mod ( BW , BX ) : _0_0 ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"BY = clamp ( BY , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATH_ABSOLUTE",ma:[{$:"node_var",ba:"MATH_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"BZ",fa:["float"],ea:!1},{$:"node_in",ba:"B_",fa:["float"],ea:!1},{$:"node_out",ba:"Ca",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Ca = abs ( BZ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MATH_USE_CLAMP"],ja:[{$:"txt",aa:"Ca = clamp ( Ca , _0_0 , _1_0 ) ;".split(" ")}]}]},
{$:"txt",aa:["B_",";"]}]},{$:"node",ba:"MIX_RGB_MIX",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cb",fa:["float"],ea:!1},{$:"node_in",ba:"Cc",fa:["vec3"],ea:!1},{$:"node_in",ba:"Cd",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ce",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Cb , _0_0 , _1_0 ) ; Ce = mix ( Cc , Cd , zR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Ce = clamp ( Ce , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",
ba:"MIX_RGB_ADD",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cf",fa:["float"],ea:!1},{$:"node_in",ba:"Cg",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ch",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ci",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Cf , _0_0 , _1_0 ) ; Ci = mix ( Cg , Cg + Ch , zR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Ci = clamp ( Ci , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_MULTIPLY",ma:[{$:"node_var",
ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cj",fa:["float"],ea:!1},{$:"node_in",ba:"Ck",fa:["vec3"],ea:!1},{$:"node_in",ba:"Cl",fa:["vec3"],ea:!1},{$:"node_out",ba:"Cm",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Cj , _0_0 , _1_0 ) ; Cm = mix ( Ck , Ck * Cl , zR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Cm = clamp ( Cm , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SUBTRACT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",
aa:["0"]}],la:[{$:"node_in",ba:"Cn",fa:["float"],ea:!1},{$:"node_in",ba:"Co",fa:["vec3"],ea:!1},{$:"node_in",ba:"Cp",fa:["vec3"],ea:!1},{$:"node_out",ba:"Cq",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Cn , _0_0 , _1_0 ) ; Cq = mix ( Co , Co - Cp , zR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Cq = clamp ( Cq , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SCREEN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",
ba:"Cr",fa:["float"],ea:!1},{$:"node_in",ba:"Cs",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ct",fa:["vec3"],ea:!1},{$:"node_out",ba:"Cu",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Cr , _0_0 , _1_0 ) ; float Cv = _1_0 - zR ; Cu = vec3 ( _1_0 ) - ( vec3 ( Cv ) + zR * ( vec3 ( _1_0 ) - Ct ) ) * ( vec3 ( _1_0 ) - Cs ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Cu = clamp ( Cu , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DIVIDE",ma:[{$:"node_var",
ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Cw",fa:["float"],ea:!1},{$:"node_in",ba:"Cx",fa:["vec3"],ea:!1},{$:"node_in",ba:"Cy",fa:["vec3"],ea:!1},{$:"node_out",ba:"Cz",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Cw , _0_0 , _1_0 ) ; float Cv = _1_0 - zR ; Cy += step ( Cy , vec3 ( _0_0 ) ) ; Cz = Cv * Cx + zR * Cx / Cy ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Cz = clamp ( Cz , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DIFFERENCE",
ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CA",fa:["float"],ea:!1},{$:"node_in",ba:"CB",fa:["vec3"],ea:!1},{$:"node_in",ba:"CC",fa:["vec3"],ea:!1},{$:"node_out",ba:"CD",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( CA , _0_0 , _1_0 ) ; CD = mix ( CB , abs ( CB - CC ) , zR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"CD = clamp ( CD , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_DARKEN",ma:[{$:"node_var",
ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CE",fa:["float"],ea:!1},{$:"node_in",ba:"CF",fa:["vec3"],ea:!1},{$:"node_in",ba:"CG",fa:["vec3"],ea:!1},{$:"node_out",ba:"CH",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( CE , _0_0 , _1_0 ) ; CH = min ( CF . rgb , CG . rgb * zR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"CH = clamp ( CH , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_LIGHTEN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",
aa:["0"]}],la:[{$:"node_in",ba:"CI",fa:["float"],ea:!1},{$:"node_in",ba:"CJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"CK",fa:["vec3"],ea:!1},{$:"node_out",ba:"CL",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( CI , _0_0 , _1_0 ) ; CL = max ( CJ . rgb , CK . rgb * zR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"CL = clamp ( CL , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_OVERLAY",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",
ba:"CM",fa:["float"],ea:!1},{$:"node_in",ba:"CN",fa:["vec3"],ea:!1},{$:"node_in",ba:"CO",fa:["vec3"],ea:!1},{$:"node_out",ba:"CP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( CM , _0_0 , _1_0 ) ; vec3 CQ = vec3 ( _1_0 - zR ) ; CP = mix ( CN * ( CQ + 2.0 * zR * CO ) , vec3 ( _1_0 ) - ( CQ + 2.0 * zR * ( vec3 ( _1_0 ) - CO ) ) * ( vec3 ( _1_0 ) - CN ) , step ( _0_5 , CN ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"CP = clamp ( CP , _0_0 , _1_0 ) ;".split(" ")}]}]}]},
{$:"node",ba:"MIX_RGB_DODGE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CR",fa:["float"],ea:!1},{$:"node_in",ba:"CS",fa:["vec3"],ea:!1},{$:"node_in",ba:"CT",fa:["vec3"],ea:!1},{$:"node_out",ba:"CU",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( CR , _0_0 , _1_0 ) ; vec3 CV = vec3 ( _1_0 ) - zR * CT ; vec3 CW = clamp ( CS / CV , _0_0 , _1_0 ) ; CU = mix ( mix ( CW , vec3 ( _1_0 ) , step ( CV , vec3 ( _0_0 ) ) ) , CS , step ( CS , vec3 ( _0_0 ) ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"CU = clamp ( CU , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_BURN",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"CX",fa:["float"],ea:!1},{$:"node_in",ba:"CY",fa:["vec3"],ea:!1},{$:"node_in",ba:"CZ",fa:["vec3"],ea:!1},{$:"node_out",ba:"C_",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( CX , _0_0 , _1_0 ) ; vec3 ko = vec3 ( _1_0 - zR ) ; vec3 CV = ko + zR * CZ ; vec3 CW = clamp ( vec3 ( _1_0 ) - ( vec3 ( _1_0 ) - CY ) / CV , _0_0 , _1_0 ) ; C_ = mix ( CW , vec3 ( _0_0 ) , step ( CV , vec3 ( _0_0 ) ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"C_ = clamp ( C_ , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_HUE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Da",fa:["float"],ea:!1},{$:"node_in",ba:"Db",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dc",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dd",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Da , _0_0 , _1_0 ) ; vec3 kg , De , CV ; Dd = Db ; De = kf ( Dc ) ; if ( De . y != _0_0 ) { kg = kf ( Dd ) ; kg . x = De . x ; CV = kh ( kg ) ; Dd = mix ( Dd , CV , zR ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dd = clamp ( Dd , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SATURATION",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Df",fa:["float"],ea:!1},{$:"node_in",ba:"Dg",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dh",fa:["vec3"],ea:!1},{$:"node_out",ba:"Di",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Df , _0_0 , _1_0 ) ; float Cv = _1_0 - zR ; Di = Dg ; vec3 kg , De ; kg = kf ( Di ) ; if ( kg . y != _0_0 ) { De = kf ( Dh ) ; kg . y = Cv * kg . y + zR * De . y ; Di = kh ( kg ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Di = clamp ( Di , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_VALUE",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Dj",fa:["float"],ea:!1},{$:"node_in",ba:"Dk",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dl",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dm",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Dj , _0_0 , _1_0 ) ; float Cv = _1_0 - zR ; vec3 kg , De ; kg = kf ( Dk ) ; De = kf ( Dl ) ; kg . z = Cv * kg . z + zR * De . z ; Dm = kh ( kg ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dm = clamp ( Dm , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_COLOR",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Dn",fa:["float"],ea:!1},{$:"node_in",ba:"Do",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dp",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dq",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Dn , _0_0 , _1_0 ) ; vec3 kg , De , CV ; Dq = Do ; De = kf ( Dp ) ; if ( De . y != _0_0 ) { kg = kf ( Dq ) ; kg . x = De . x ; kg . y = De . y ; CV = kh ( kg ) ; Dq = mix ( Dq , CV , zR ) ; }".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dq = clamp ( Dq , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_SOFT_LIGHT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Dr",fa:["float"],ea:!1},{$:"node_in",ba:"Ds",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dt",fa:["vec3"],ea:!1},{$:"node_out",ba:"Du",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Dr , _0_0 , _1_0 ) ; float Cv = _1_0 - zR ; vec3 Dv = Dt + Ds - Dt * Ds ; Du = Ds * ( vec3 ( Cv ) + vec3 ( zR ) * ( ( vec3 ( _1_0 ) - Ds ) * Dt + Dv ) ) ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Du = clamp ( Du , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MIX_RGB_LINEAR_LIGHT",ma:[{$:"node_var",ba:"MIX_RGB_USE_CLAMP",aa:["0"]}],la:[{$:"node_in",ba:"Dw",fa:["float"],ea:!1},{$:"node_in",ba:"Dx",fa:["vec3"],ea:!1},{$:"node_in",ba:"Dy",fa:["vec3"],ea:!1},{$:"node_out",ba:"Dz",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"float zR = clamp ( Dw , _0_0 , _1_0 ) ; Dz = Dx + zR * ( 2.0 * Dy - vec3 ( _1_0 ) ) ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["MIX_RGB_USE_CLAMP"],ja:[{$:"txt",aa:"Dz = clamp ( Dz , _0_0 , _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"OUTPUT",ma:[],la:[{$:"node_in",ba:"DI",fa:["vec3"],ea:!1},{$:"node_in",ba:"DJ",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"E = DI ; I = DJ ;".split(" ")}]},{$:"node",ba:"OUTPUT_SURFACE",ma:[],la:[{$:"node_in",ba:"DK",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"E = DK ; I = _1_0 ;".split(" ")}]},{$:"node",ba:"MATERIAL_BEGIN",ma:[{$:"node_var",ba:"MATERIAL_EXT",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_NORMAL",
aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_DIFFUSE",aa:["0"]},{$:"node_var",ba:"SHADELESS_MAT",aa:["0"]}],la:[{$:"node_in",ba:"DN",fa:["vec3"],ea:!1},{$:"node_in",ba:"DO",fa:["vec3"],ea:!1},{$:"node_in",ba:"DP",fa:["float"],ea:!1},{$:"node_in",ba:"DQ",fa:["vec3"],ea:!0},{$:"node_in",ba:"DR",fa:["float"],ea:!0},{$:"node_out",ba:"DS",fa:["vec3"],ea:!1},{$:"node_out",ba:"DT",fa:["vec3"],ea:!1},{$:"node_out",ba:"DU",fa:["vec3"],ea:!1},{$:"node_out",ba:"DV",fa:["vec3"],ea:!1},{$:"node_out",ba:"DW",fa:["vec3"],
ea:!1},{$:"node_out",ba:"DX",fa:["vec2"],ea:!1},{$:"node_out",ba:"DY",fa:["vec2"],ea:!1},{$:"node_out",ba:"DZ",fa:["vec4"],ea:!1},{$:"node_param",ba:"sl",fa:["const","vec2"],ea:!0},{$:"node_param",ba:"sm",fa:["const","vec3"],ea:!1}],ja:[{$:"txt",aa:"DU = clamp ( DN , _0_0 , _1_0 ) ; DV = sm [ 0 ] * clamp ( DO , _0_0 , _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_NORMAL"],ja:[{$:"txt",aa:"DW = normalize ( DQ ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:["DW","=","ot",
";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["SHADELESS_MAT",{$:"logic_negative_expr",ia:1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MATERIAL_EXT"],ja:[{$:"txt",aa:"DS = DR * DU ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"DS = sC * DU ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_DIFFUSE"],ja:[{$:"txt",aa:["DU","*=","DP",";"]}]}]},{$:"txt",aa:"DT = sD * u_environment_energy * cz ( DW ) ; DZ = vec4 ( _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NUM_LIGHTS",
0,{$:"g_expr",ia:2}],ja:[{$:"txt",aa:"DX = vec2 ( sl [ 0 ] , sl [ 1 ] ) ; DY = vec2 ( sm [ 1 ] , sm [ 2 ] ) ;".split(" ")}]}]},{$:"txt",aa:["H","=","DZ",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"DS = vec3 ( _0_0 ) ; DT = vec3 ( _1_0 ) ;".split(" ")}]}]}]},{$:"node",ba:"MATERIAL_END",ma:[{$:"node_var",ba:"MATERIAL_EXT",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_DIFFUSE",aa:["0"]},{$:"node_var",ba:"USE_MATERIAL_SPECULAR",aa:["0"]}],la:[{$:"node_in",ba:"D_",fa:["vec4"],ea:!1},{$:"node_in",ba:"Ea",fa:["vec3"],
ea:!1},{$:"node_in",ba:"Eb",fa:["vec3"],ea:!1},{$:"node_in",ba:"Ec",fa:["float"],ea:!0},{$:"node_in",ba:"Ed",fa:["float"],ea:!0},{$:"node_in",ba:"Ee",fa:["float"],ea:!0},{$:"node_out",ba:"Ef",fa:["vec3"],ea:!0},{$:"node_out",ba:"Eg",fa:["float"],ea:!0},{$:"node_out",ba:"Eh",fa:["vec3"],ea:!0},{$:"node_out",ba:"Ei",fa:["vec3"],ea:!0},{$:"node_out",ba:"Ej",fa:["vec3"],ea:!0},{$:"node_param",ba:"sn",fa:["float"],ea:!1},{$:"node_param",ba:"so",fa:["float"],ea:!1}],ja:[{$:"txt",aa:["Ec",";"]},{$:"node_cond",
da:[{$:"node_if",ga:["USE_OUT_Ef"],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_DIFFUSE"],ja:[{$:"txt",aa:"Ef = D_ . rgb ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"Ef = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:["Ef","+=","Ea",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Eh"],ja:[{$:"txt",aa:["Eh","=","Eb",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["MATERIAL_EXT"],ja:[{$:"node_cond",da:[{$:"node_if",
ga:["USE_OUT_Ei"],ja:[{$:"txt",aa:"Ei = D_ . rgb ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ej"],ja:[{$:"txt",aa:["Ej","=","Ea",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Eg"],ja:[{$:"txt",aa:"Eg = clamp ( Ee , _0_0 , _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:"float t = max ( max ( Ea . r , Ea . g ) , Ea . b ) * Ed ; Eg = clamp ( Ee * ( _1_0 - t ) + t , _0_0 , _1_0 ) ;".split(" ")}]}]}]}]}]},{$:"node_else",ja:[{$:"node_cond",
da:[{$:"node_if",ga:["USE_OUT_Eg"],ja:[{$:"txt",aa:"Eg = clamp ( sn , _0_0 , _1_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:"float t = max ( max ( Ea . r , Ea . g ) , Ea . b ) * so ; Eg = sn * ( _1_0 - t ) + t ;".split(" ")}]}]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_MATERIAL_SPECULAR"],ja:[{$:"txt",aa:["F","=","Ea",";"]}]},{$:"node_else",ja:[{$:"txt",aa:"F = vec3 ( _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:["G","=","Eb",";"]}]},{$:"node",
ba:"LIGHTING_AMBIENT",ma:[],la:[{$:"node_in",ba:"oL",fa:["vec3"],ea:!1},{$:"node_in",ba:"oM",fa:["vec3"],ea:!1},{$:"node_in",ba:"oN",fa:["vec3"],ea:!1},{$:"node_out",ba:"oO",fa:["vec4"],ea:!1},{$:"node_out",ba:"oP",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"oO = vec4 ( oL + oN * oM , _0_0 ) ; oP = vec3 ( _0_0 ) ;".split(" ")}]},{$:"node",ba:"LIGHTING_LAMP",ma:[{$:"node_var",ba:"LAMP_TYPE",aa:["HEMI"]},{$:"node_var",ba:"LAMP_IND",aa:["0"]},{$:"node_var",ba:"LAMP_SPOT_SIZE",aa:["0.8"]},{$:"node_var",ba:"LAMP_SPOT_BLEND",
aa:["0.03"]},{$:"node_var",ba:"LAMP_LIGHT_DIST",aa:["30.0"]},{$:"node_var",ba:"LAMP_SHADOW_MAP_IND",aa:["-","1"]}],la:[{$:"node_in",ba:"oQ",fa:["vec4"],ea:!1},{$:"node_out",ba:"oR",fa:["vec3"],ea:!1},{$:"node_out",ba:"oS",fa:["vec2"],ea:!1},{$:"node_out",ba:"oT",fa:["vec3"],ea:!1},{$:"node_out",ba:"oU",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"oS = vec2 ( u_light_positions [ LAMP_IND ] . w , u_light_color_intensities [ LAMP_IND ] . w ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","HEMI",
{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:["oU","=","_0_5",";"]}]},{$:"node_else",ja:[{$:"txt",aa:["oU","=","_0_0",";"]}]}]},{$:"txt",aa:"oT = u_light_color_intensities [ LAMP_IND ] . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_SHADOW_MAP_IND",1,{$:"negative_expr",ia:1},{$:"non_equal_expr",ia:2}],ja:[{$:"txt",aa:"oT *= oQ [ LAMP_SHADOW_MAP_IND ] ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2},"LAMP_TYPE","POINT",{$:"equal_expr",ia:2},{$:"logical_or_expr",
ia:2}],ja:[{$:"txt",aa:"vec3 oV = u_light_positions [ LAMP_IND ] . xyz ; oR = oV - os ; float aM = length ( oR ) ; oT *= LAMP_LIGHT_DIST / ( LAMP_LIGHT_DIST + aM * aM ) ; oR = normalize ( oR ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["LAMP_TYPE","SPOT",{$:"equal_expr",ia:2}],ja:[{$:"txt",aa:"vec3 oX = u_light_directions [ LAMP_IND ] ; float oY = dot ( oR , oX ) ; oY *= smoothstep ( _0_0 , _1_0 , ( oY - LAMP_SPOT_SIZE ) / LAMP_SPOT_BLEND ) ; oT *= oY ;".split(" ")}]}]}]},{$:"node_else",ja:[{$:"txt",
aa:"oR = u_light_directions [ LAMP_IND ] ;".split(" ")}]}]}]},{$:"node",ba:"DIFFUSE_FRESNEL",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"oZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"o_",fa:["vec2"],ea:!1},{$:"node_in",ba:"pa",fa:["vec3"],ea:!1},{$:"node_in",ba:"pb",fa:["float"],ea:!1},{$:"node_in",ba:"pc",fa:["vec2"],ea:!1},{$:"node_out",ba:"pd",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pe = cross ( oZ , k . xyz ) ; pa = cross ( pe , k . xyz ) ; pa = - normalize ( pa ) ;".split(" ")}]}]},
{$:"txt",aa:"pd = _0_0 ; if ( o_ . r != _0_0 ) { float pf = ( _1_0 - pb ) * dot ( pa , oZ ) + pb ; if ( pc [ 0 ] == _0_0 ) { pd = _1_0 ; } else { float t = _1_0 + abs ( pf ) ; t = pc [ 1 ] + ( _1_0 - pc [ 1 ] ) * pow ( t , pc [ 0 ] ) ; pd = clamp ( t , _0_0 , _1_0 ) ; } pd = max ( pd , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_LAMBERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pg",fa:["vec3"],ea:!1},{$:"node_in",ba:"ph",fa:["vec2"],ea:!1},{$:"node_in",ba:"pi",
fa:["vec3"],ea:!1},{$:"node_in",ba:"pj",fa:["float"],ea:!1},{$:"node_out",ba:"pk",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pe = cross ( pg , k . xyz ) ; pi = cross ( pe , k . xyz ) ; pi = - normalize ( pi ) ;".split(" ")}]}]},{$:"txt",aa:"pk = _0_0 ; if ( ph . r != _0_0 ) { float pf = ( _1_0 - pj ) * dot ( pi , pg ) + pj ; pk = max ( pf , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_OREN_NAYAR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",
aa:["0"]}],la:[{$:"node_in",ba:"pl",fa:["vec3"],ea:!1},{$:"node_in",ba:"pm",fa:["vec2"],ea:!1},{$:"node_in",ba:"pn",fa:["vec3"],ea:!1},{$:"node_in",ba:"po",fa:["float"],ea:!1},{$:"node_in",ba:"pr",fa:["vec2"],ea:!1},{$:"node_out",ba:"pu",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pe = cross ( pl , k . xyz ) ; pn = cross ( pe , k . xyz ) ; pn = - normalize ( pn ) ;".split(" ")}]}]},{$:"txt",aa:"pu = _0_0 ; if ( pm . r != _0_0 ) { float pf = ( _1_0 - po ) * dot ( pn , pl ) + po ; if ( pr [ 0 ] > _0_0 ) { float pv = max ( dot ( pn , ou ) , _0_0 ) ; float pw = pr [ 0 ] * pr [ 0 ] ; float cB = _1_0 - _0_5 * ( pw / ( pw + 0.33 ) ) ; vec3 px = pl - pf * pn ; vec3 py = ou - pv * pn ; if ( length ( px ) == _0_0 || length ( py ) == _0_0 || abs ( pf ) > _1_0 || abs ( pv ) > _1_0 ) pu = pf * cB ; else { float pz = acos ( pf ) ; float pA = acos ( pv ) ; vec3 pB = normalize ( px ) ; vec3 pC = normalize ( py ) ; float a , b ; a = max ( pz , pA ) ; b = min ( pz , pA ) ; b *= 0.95 ; float t = max ( dot ( pB , pC ) , _0_0 ) ; float hO = 0.45 * ( pw / ( pw + 0.09 ) ) ; pu = pf * ( cB + ( hO * t * sin ( a ) * tan ( b ) ) ) ; } } else pu = pf ; pu = max ( pu , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"DIFFUSE_MINNAERT",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pD",fa:["vec3"],ea:!1},{$:"node_in",ba:"pE",fa:["vec2"],ea:!1},{$:"node_in",ba:"pF",fa:["vec3"],ea:!1},{$:"node_in",ba:"pG",fa:["float"],ea:!1},{$:"node_in",ba:"pH",fa:["vec2"],ea:!1},{$:"node_out",ba:"pI",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pe = cross ( pD , k . xyz ) ; pF = cross ( pe , k . xyz ) ; pF = - normalize ( pF ) ;".split(" ")}]}]},
{$:"txt",aa:"pI = _0_0 ; if ( pE . r != _0_0 ) { float pf = ( _1_0 - pG ) * dot ( pF , pD ) + pG ; float pv = max ( dot ( pF , ou ) , _0_0 ) ; if ( pH [ 0 ] <= _1_0 ) pI = pf * pow ( max ( pv * pf , 0.1 ) , pH [ 0 ] - _1_0 ) ; else pI = pf * pow ( 1.0001 - pv , pH [ 0 ] - _1_0 ) ; pI = max ( pI , _0_0 ) ; }".split(" ")}]},{$:"node",ba:"DIFFUSE_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"pK",fa:["vec2"],ea:!1},{$:"node_in",
ba:"pL",fa:["vec3"],ea:!1},{$:"node_in",ba:"pM",fa:["float"],ea:!1},{$:"node_in",ba:"pN",fa:["vec2"],ea:!1},{$:"node_out",ba:"pO",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"vec3 pe = cross ( pJ , k . xyz ) ; pL = cross ( pe , k . xyz ) ; pL = - normalize ( pL ) ;".split(" ")}]}]},{$:"txt",aa:"pO = _0_0 ; if ( pK . r != _0_0 ) { float pf = ( _1_0 - pM ) * dot ( pL , pJ ) + pM ; float pP = acos ( pf ) ; if ( pP < pN [ 0 ] ) pO = _1_0 ; else if ( pP > ( pN [ 0 ] + pN [ 1 ] ) || pN [ 1 ] == _0_0 ) pO = _0_0 ; else pO = _1_0 - ( ( pP - pN [ 0 ] ) / pN [ 1 ] ) ; pO = max ( pO , _0_0 ) ; }".split(" ")}]},
{$:"node",ba:"SPECULAR_PHONG",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pQ",fa:["vec3"],ea:!1},{$:"node_in",ba:"pR",fa:["vec2"],ea:!1},{$:"node_in",ba:"pS",fa:["vec3"],ea:!1},{$:"node_in",ba:"pT",fa:["float"],ea:!1},{$:"node_in",ba:"pU",fa:["vec2"],ea:!1},{$:"node_out",ba:"pV",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"pV = _0_0 ; if ( pR . g == _1_0 ) { vec3 pW = normalize ( pQ + ou ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",
aa:"if ( pT == _0_0 ) { pV = dot ( k . xyz , pW ) ; pV = sqrt ( _1_0 - pV * pV ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"pV = ( _1_0 - pT ) * max ( dot ( pS , pW ) , _0_0 ) + pT ;".split(" ")}]}]},{$:"txt",aa:"pV = pow ( pV , pU [ 0 ] ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_COOKTORR",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"pX",fa:["vec3"],ea:!1},{$:"node_in",ba:"pY",fa:["vec2"],ea:!1},{$:"node_in",ba:"pZ",fa:["vec3"],ea:!1},{$:"node_in",ba:"p_",fa:["float"],
ea:!1},{$:"node_in",ba:"qa",fa:["vec2"],ea:!1},{$:"node_out",ba:"qb",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qb = _0_0 ; if ( pY . g != _0_0 ) { vec3 pW = normalize ( pX + ou ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"if ( p_ == _0_0 ) { qb = dot ( B . xyz , pW ) ; qb = sqrt ( _1_0 - qb * qb ) ; }".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"qb = max ( dot ( pZ , pW ) , _0_0 ) ; qb = ( _1_0 - p_ ) * qb + p_ ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float pv = max ( dot ( B . xyz , ou ) , _0_0 ) ; pv = sqrt ( _1_0 - pv * pv ) ;".split(" ")}]},{$:"node_else",ja:[{$:"txt",aa:"float pv = max ( dot ( pZ , ou ) , _0_0 ) ;".split(" ")}]}]},{$:"txt",aa:"qb = pow ( qb , qa [ 0 ] ) ; qb = qb / ( 0.1 + pv ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_WARDISO",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qc",fa:["vec3"],ea:!1},{$:"node_in",ba:"qd",fa:["vec2"],ea:!1},{$:"node_in",ba:"qe",
fa:["vec3"],ea:!1},{$:"node_in",ba:"qf",fa:["float"],ea:!1},{$:"node_in",ba:"qg",fa:["vec2"],ea:!1},{$:"node_out",ba:"qh",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qh = _0_0 ; if ( qd . g == _1_0 ) { vec3 pW = normalize ( qc + ou ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qi = _0_0 ; float pv = _0_0 ; float qj = _0_0 ; if ( qf == _0_0 ) { qi = dot ( k . xyz , pW ) ; pv = dot ( k . xyz , ou ) ; qj = dot ( k . xyz , qc ) ; qi = sqrt ( _1_0 - qi * qi ) ; pv = sqrt ( _1_0 - pv * pv ) ; qj = sqrt ( _1_0 - qj * qj ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qi = max ( dot ( qe , pW ) , 0.01 ) ; float pv = max ( dot ( qe , ou ) , 0.01 ) ; float qj = max ( dot ( qe , qc ) , 0.01 ) ;".split(" ")}]}]},{$:"txt",aa:"float bK = tan ( acos ( qi ) ) ; float L = max ( qg [ 0 ] , 0.01 ) ; qh = qj * ( _1_0 / ( 4.0 * M_PI * L * L ) ) * ( exp ( - ( bK * bK ) / ( L * L ) ) / ( sqrt ( pv * qj ) ) ) ; }".split(" ")}]},{$:"node",ba:"SPECULAR_TOON",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qk",fa:["vec3"],
ea:!1},{$:"node_in",ba:"ql",fa:["vec2"],ea:!1},{$:"node_in",ba:"qm",fa:["vec3"],ea:!1},{$:"node_in",ba:"qn",fa:["float"],ea:!1},{$:"node_in",ba:"qo",fa:["vec2"],ea:!1},{$:"node_out",ba:"qr",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qr = _0_0 ; if ( ql . g == _1_0 ) { vec3 cj = normalize ( qk + ou ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qu = dot ( cj , k . xyz ) ; float bK = qo [ 0 ] + qo [ 1 ] ; if ( qn == _0_0 ) bK = acos ( sqrt ( _1_0 - qu * qu ) ) ;".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float bK = acos ( dot ( cj , qm ) ) ;".split(" ")}]}]},{$:"txt",aa:"if ( bK < qo [ 0 ] ) qr = _1_0 ; else if ( bK >= qo [ 0 ] + qo [ 1 ] || qo [ 1 ] == _0_0 ) qr = _0_0 ; else qr = _1_0 - ( bK - qo [ 0 ] ) / qo [ 1 ] ; }".split(" ")}]},{$:"node",ba:"SPECULAR_BLINN",ma:[{$:"node_var",ba:"MAT_USE_TBN_SHADING",aa:["0"]}],la:[{$:"node_in",ba:"qv",fa:["vec3"],ea:!1},{$:"node_in",ba:"qw",fa:["vec2"],ea:!1},{$:"node_in",ba:"qx",fa:["vec3"],ea:!1},{$:"node_in",ba:"qy",fa:["float"],
ea:!1},{$:"node_in",ba:"qz",fa:["vec2"],ea:!1},{$:"node_out",ba:"qA",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"qA = _0_0 ; if ( qw . g == _1_0 ) { if ( qz [ 0 ] < _1_0 || qz [ 1 ] == _0_0 ) qA = _0_0 ; else { if ( qz [ 1 ] < 100.0 ) qz [ 1 ] = sqrt ( _1_0 / qz [ 1 ] ) ; else qz [ 1 ] = 10.0 / qz [ 1 ] ; vec3 pW = normalize ( ou + qv ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["MAT_USE_TBN_SHADING"],ja:[{$:"txt",aa:"float qi = _0_0 ; if ( qy == _0_0 ) { float qD = dot ( k . xyz , pW ) ; qi = sqrt ( _1_0 - qD * qD ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"float qi = ( _1_0 - qy ) * max ( dot ( qx , pW ) , _0_0 ) + qy ;".split(" ")}]}]},{$:"txt",aa:"if ( qi < _0_0 ) qA = _0_0 ; else { float pv = max ( dot ( qx , ou ) , 0.01 ) ; float qj = dot ( qx , qv ) ; if ( qj <= 0.01 ) qA = _0_0 ; else { float qE = max ( dot ( ou , pW ) , 0.01 ) ; float a = _1_0 ; float b = ( 2.0 * qi * pv ) / qE ; float du = ( 2.0 * qi * qj ) / qE ; float g = min ( min ( a , b ) , du ) ; float p = sqrt ( pow ( qz [ 0 ] , 2.0 ) + pow ( qE , 2.0 ) - _1_0 ) ; float mi = pow ( p - qE , 2.0 ) / pow ( p + qE , 2.0 ) * ( _1_0 + pow ( qE * ( p + qE ) - _1_0 , 2.0 ) / pow ( qE * ( p - qE ) + _1_0 , 2.0 ) ) ; float pP = acos ( qi ) ; qA = max ( mi * g * exp ( - pow ( pP , 2.0 ) / ( 2.0 * pow ( qz [ 1 ] , 2.0 ) ) ) , _0_0 ) ; } } } }".split(" ")}]},
{$:"node",ba:"LIGHTING_APPLY",ma:[],la:[{$:"node_in",ba:"qF",fa:["vec4"],ea:!1},{$:"node_in",ba:"qG",fa:["vec3"],ea:!1},{$:"node_in",ba:"qH",fa:["float"],ea:!1},{$:"node_in",ba:"qI",fa:["float"],ea:!1},{$:"node_in",ba:"qJ",fa:["vec3"],ea:!1},{$:"node_in",ba:"qK",fa:["vec3"],ea:!1},{$:"node_in",ba:"qL",fa:["vec4"],ea:!1},{$:"node_in",ba:"qM",fa:["vec3"],ea:!1},{$:"node_in",ba:"qN",fa:["vec3"],ea:!1},{$:"node_in",ba:"qO",fa:["vec3"],ea:!1},{$:"node_in",ba:"qP",fa:["float"],ea:!1},{$:"node_out",ba:"qQ",
fa:["vec4"],ea:!1},{$:"node_out",ba:"qR",fa:["vec3"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_NODE_B4W_TRANSLUCENCY"],ja:[{$:"txt",aa:"if ( dot ( qJ , qK ) * dot ( ou , qK ) < _0_0 ) { float Ek = qL . x ; float El = qL . y ; float Em = qL . z ; float En = qL . w ; float Eo = clamp ( abs ( dot ( qJ , qK ) ) , _0_0 , _1_0 ) ; float Ep = clamp ( dot ( ou , - qJ ) , _0_0 , _1_0 ) ; float Eq = pow ( Ep , El ) ; qQ = qF + qP * vec4 ( qO * Eo * pow ( qM , vec3 ( Ek ) ) , _1_0 ) ; qQ += Em * mix ( vec4 ( qM , _1_0 ) , vec4 ( _1_0 ) , En ) * qP * vec4 ( qO * Eo * vec3 ( Eq ) , _1_0 ) ; } else { qQ = qF + vec4 ( qO * qM * qH , qI ) ; }".split(" ")}]},
{$:"node_else",ja:[{$:"txt",aa:"qQ = qF + vec4 ( qO * qM * qH , qI ) ;".split(" ")}]}]},{$:"txt",aa:"qR = qG + qO * qN * qI ;".split(" ")}]},{$:"node",ba:"RGB",ma:[{$:"node_var",ba:"RGB_IND",aa:["0"]}],la:[{$:"node_out",ba:"Er",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Er = u_node_rgbs [ RGB_IND ] ;".split(" ")}]},{$:"node",ba:"RGBTOBW",ma:[],la:[{$:"node_in",ba:"Es",fa:["vec3"],ea:!1},{$:"node_out",ba:"Et",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Et = dot ( Es , vec3 ( 0.35 , 0.45 , 0.2 ) ) ;".split(" ")}]},
{$:"node",ba:"SEPRGB",ma:[],la:[{$:"node_in",ba:"Eu",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ev",fa:["float"],ea:!0},{$:"node_out",ba:"Ew",fa:["float"],ea:!0},{$:"node_out",ba:"Ex",fa:["float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ev"],ja:[{$:"txt",aa:"Ev = Eu . r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ew"],ja:[{$:"txt",aa:"Ew = Eu . g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ex"],ja:[{$:"txt",aa:"Ex = Eu . b ;".split(" ")}]}]}]},{$:"node",
ba:"SEPHSV",ma:[],la:[{$:"node_in",ba:"Ey",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ez",fa:["float"],ea:!0},{$:"node_out",ba:"EA",fa:["float"],ea:!0},{$:"node_out",ba:"EB",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"vec3 EC = kf ( Ey ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ez"],ja:[{$:"txt",aa:"Ez = EC . r ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EA"],ja:[{$:"txt",aa:"EA = EC . g ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EB"],ja:[{$:"txt",aa:"EB = EC . b ;".split(" ")}]}]}]},
{$:"node",ba:"SQUEEZE",ma:[],la:[{$:"node_in",ba:"ED",fa:["float"],ea:!1},{$:"node_in",ba:"EE",fa:["float"],ea:!1},{$:"node_in",ba:"EF",fa:["float"],ea:!1},{$:"node_out",ba:"EG",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"EG = _1_0 / ( _1_0 + pow ( 2.71828183 , - ( ED - EF ) * EE ) ) ;".split(" ")}]},{$:"node",ba:"GAMMA",ma:[],la:[{$:"node_in",ba:"EH",fa:["vec3"],ea:!1},{$:"node_in",ba:"EI",fa:["float"],ea:!1},{$:"node_out",ba:"EJ",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"EJ = EH ; if ( EJ . x > _0_0 ) EJ . x = pow ( EH . x , EI ) ; if ( EJ . y > _0_0 ) EJ . y = pow ( EH . y , EI ) ; if ( EJ . z > _0_0 ) EJ . z = pow ( EH . z , EI ) ;".split(" ")}]},
{$:"node",ba:"B4W_SRGB_TO_LINEAR",ma:[],la:[{$:"node_in",ba:"EK",fa:["vec3"],ea:!1},{$:"node_out",ba:"EL",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"EL = max ( vec3 ( _0_0 ) , EK ) ; EL = pow ( EL , vec3 ( 2.2 ) ) ;".split(" ")}]},{$:"node",ba:"B4W_LINEAR_TO_SRGB",ma:[],la:[{$:"node_in",ba:"EM",fa:["vec3"],ea:!1},{$:"node_out",ba:"EN",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"EN = max ( vec3 ( _0_0 ) , EM ) ; EN = pow ( EN , vec3 ( _1_0 / 2.2 ) ) ;".split(" ")}]},{$:"node",ba:"TEXTURE_EMPTY",ma:[],la:[{$:"node_out",
ba:"EO",fa:["vec3"],ea:!1},{$:"node_out",ba:"EP",fa:["vec3"],ea:!1},{$:"node_out",ba:"EQ",fa:["float"],ea:!1}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EO"],ja:[{$:"txt",aa:"EO [ 2 ] = EO [ 1 ] = EO [ 0 ] = _0_0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EP"],ja:[{$:"txt",aa:"EP [ 2 ] = EP [ 1 ] = EP [ 0 ] = _0_0 ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_EQ"],ja:[{$:"txt",aa:["EQ","=","_0_0",";"]}]}]}]},{$:"node",ba:"TEXTURE_ENVIRONMENT",ma:[],la:[{$:"node_in",
ba:"Ht",fa:["vec3"],ea:!1},{$:"node_out",ba:"Hu",fa:["vec3"],ea:!0},{$:"node_out",ba:"Hv",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_ENVIRONMENT_var_texture",fa:["uniform","samplerCube"],ea:!1}],ja:[{$:"txt",aa:"vec4 AV = GLSL_TEXTURE_CUBE ( node_TEXTURE_ENVIRONMENT_var_texture , Ht ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Hu"],ja:[{$:"txt",aa:"Hu = AV . xyz ; bC ( Hu ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Hv"],ja:[{$:"txt",aa:"Hv = AV . w ;".split(" ")}]}]}]},
{$:"node",ba:"TEXTURE_COLOR",ma:[{$:"node_var",ba:"NON_COLOR",aa:["0"]},{$:"node_var",ba:"USE_uv2",aa:["0"]},{$:"node_var",ba:"USE_uv3",aa:["0"]},{$:"node_var",ba:"USE_uv4",aa:["0"]}],la:[{$:"node_in",ba:"Fa",fa:["vec3"],ea:!0},{$:"node_in",ba:"Fb",fa:["vec3"],ea:!0},{$:"node_in",ba:"Fc",fa:["vec3"],ea:!0},{$:"node_in",ba:"Fd",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fe",fa:["vec3"],ea:!0},{$:"node_out",ba:"Ff",fa:["float"],ea:!0},{$:"node_out",ba:"Fg",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fh",fa:["float"],
ea:!0},{$:"node_out",ba:"Fi",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fj",fa:["float"],ea:!0},{$:"node_out",ba:"Fk",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fl",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_COLOR_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"txt",aa:"vec4 AV = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , rY ( Fa ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fe"],ja:[{$:"txt",aa:"Fe = AV . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",
{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bC","(","Fe",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ff"],ja:[{$:"txt",aa:"Ff = AV . w ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv2"],ja:[{$:"txt",aa:"AV = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , rY ( Fb ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fg"],ja:[{$:"txt",aa:"Fg = AV . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",
aa:["bC","(","Fg",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fh"],ja:[{$:"txt",aa:"Fh = AV . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv3"],ja:[{$:"txt",aa:"AV = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , rY ( Fc ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fi"],ja:[{$:"txt",aa:"Fi = AV . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bC","(","Fi",")",";"]}]}]}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fj"],ja:[{$:"txt",aa:"Fj = AV . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv4"],ja:[{$:"txt",aa:"AV = GLSL_TEXTURE ( node_TEXTURE_COLOR_var_texture , rY ( Fd ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fk"],ja:[{$:"txt",aa:"Fk = AV . xyz ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["NON_COLOR",{$:"logic_negative_expr",ia:1}],ja:[{$:"txt",aa:["bC","(","Fk",")",";"]}]}]}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["USE_OUT_Fl"],ja:[{$:"txt",aa:"Fl = AV . w ;".split(" ")}]}]}]}]}]},{$:"node",ba:"TEXTURE_NORMAL",ma:[{$:"node_var",ba:"USE_uv2",aa:["0"]},{$:"node_var",ba:"USE_uv3",aa:["0"]},{$:"node_var",ba:"USE_uv4",aa:["0"]}],la:[{$:"node_in",ba:"Fm",fa:["vec3"],ea:!0},{$:"node_in",ba:"Fn",fa:["vec3"],ea:!0},{$:"node_in",ba:"Fo",fa:["vec3"],ea:!0},{$:"node_in",ba:"Fp",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fq",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fr",fa:["float"],ea:!0},{$:"node_out",ba:"Fs",fa:["vec3"],ea:!0},
{$:"node_out",ba:"Ft",fa:["float"],ea:!0},{$:"node_out",ba:"Fu",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fv",fa:["float"],ea:!0},{$:"node_out",ba:"Fw",fa:["vec3"],ea:!0},{$:"node_out",ba:"Fx",fa:["float"],ea:!0},{$:"node_param",ba:"node_TEXTURE_NORMAL_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"txt",aa:"vec4 AV = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , rY ( Fm ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fq"],ja:[{$:"txt",aa:"Fq = normalize ( sy * ( AV . xyz - _0_5 ) ) ;".split(" ")}]}]},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fr"],ja:[{$:"txt",aa:"Fr = AV . w ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv2"],ja:[{$:"txt",aa:"AV = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , rY ( Fn ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fs"],ja:[{$:"txt",aa:"Fs = normalize ( sy * ( AV . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Ft"],ja:[{$:"txt",aa:"Ft = AV . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",
ga:["USE_uv3"],ja:[{$:"txt",aa:"AV = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , rY ( Fo ) ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fu"],ja:[{$:"txt",aa:"Fu = normalize ( sy * ( AV . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fv"],ja:[{$:"txt",aa:"Fv = AV . w ;".split(" ")}]}]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_uv4"],ja:[{$:"txt",aa:"AV = GLSL_TEXTURE ( node_TEXTURE_NORMAL_var_texture , rY ( Fp ) ) ;".split(" ")},{$:"node_cond",
da:[{$:"node_if",ga:["USE_OUT_Fw"],ja:[{$:"txt",aa:"Fw = normalize ( sy * ( AV . xyz - _0_5 ) ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Fx"],ja:[{$:"txt",aa:"Fx = AV . w ;".split(" ")}]}]}]}]}]},{$:"node",ba:"VALUE",ma:[{$:"node_var",ba:"VALUE_ROW_IND",aa:["0"]},{$:"node_var",ba:"VALUE_COL_IND",aa:["0"]}],la:[{$:"node_out",ba:"Fy",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"Fy = u_node_values [ VALUE_ROW_IND ] [ VALUE_COL_IND ] ;".split(" ")}]},{$:"node",ba:"VECT_MATH_ADD",ma:[],
la:[{$:"node_in",ba:"Fz",fa:["vec3"],ea:!1},{$:"node_in",ba:"FA",fa:["vec3"],ea:!1},{$:"node_out",ba:"FB",fa:["vec3"],ea:!1},{$:"node_out",ba:"FC",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"FB = Fz + FA ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FC"],ja:[{$:"txt",aa:"FC = ( abs ( FB [ 0 ] ) + abs ( FB [ 1 ] ) + abs ( FB [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_SUBTRACT",ma:[],la:[{$:"node_in",ba:"FD",fa:["vec3"],ea:!1},{$:"node_in",ba:"FE",fa:["vec3"],ea:!1},{$:"node_out",
ba:"FF",fa:["vec3"],ea:!1},{$:"node_out",ba:"FG",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"FF = FD - FE ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FG"],ja:[{$:"txt",aa:"FG = ( abs ( FF [ 0 ] ) + abs ( FF [ 1 ] ) + abs ( FF [ 2 ] ) ) / 3.0 ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_AVERAGE",ma:[],la:[{$:"node_in",ba:"FH",fa:["vec3"],ea:!1},{$:"node_in",ba:"FI",fa:["vec3"],ea:!1},{$:"node_out",ba:"FJ",fa:["vec3"],ea:!1},{$:"node_out",ba:"FK",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"FJ = FH + FI ;".split(" ")},
{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FK"],ja:[{$:"txt",aa:"FK = length ( FJ ) ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FJ"],ja:[{$:"txt",aa:"FJ = normalize ( FJ ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_DOT_PRODUCT",ma:[],la:[{$:"node_in",ba:"FL",fa:["vec3"],ea:!1},{$:"node_in",ba:"FM",fa:["vec3"],ea:!1},{$:"node_out",ba:"FN",fa:["vec3"],ea:!1},{$:"node_out",ba:"FO",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"FN = vec3 ( _0_0 ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",
ga:["USE_OUT_FO"],ja:[{$:"txt",aa:"FO = dot ( FL , FM ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_CROSS_PRODUCT",ma:[],la:[{$:"node_in",ba:"FP",fa:["vec3"],ea:!1},{$:"node_in",ba:"FQ",fa:["vec3"],ea:!1},{$:"node_out",ba:"FR",fa:["vec3"],ea:!1},{$:"node_out",ba:"FS",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"FR = cross ( FP , FQ ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FS"],ja:[{$:"txt",aa:"FS = length ( FR ) ;".split(" ")}]}]}]},{$:"node",ba:"VECT_MATH_NORMALIZE",ma:[],la:[{$:"node_in",
ba:"FT",fa:["vec3"],ea:!1},{$:"node_in",ba:"FU",fa:["vec3"],ea:!1},{$:"node_out",ba:"FV",fa:["vec3"],ea:!1},{$:"node_out",ba:"FW",fa:["float"],ea:!0}],ja:[{$:"txt",aa:"FV = normalize ( FT ) ;".split(" ")},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_FW"],ja:[{$:"txt",aa:"FW = length ( FT ) ;".split(" ")}]}]},{$:"txt",aa:["FU",";"]}]},{$:"node",ba:"B4W_REFLECT",ma:[],la:[{$:"node_in",ba:"Gc",fa:["vec3"],ea:!1},{$:"node_in",ba:"Gd",fa:["vec3"],ea:!1},{$:"node_out",ba:"Ge",fa:["vec3"],ea:!1}],ja:[{$:"txt",
aa:"Ge = reflect ( _ ( u_view_tsr_inverse , Gc ) , Gd ) ;".split(" ")}]},{$:"node",ba:"B4W_REFLECT_WORLD",ma:[],la:[{$:"node_in",ba:"Gf",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gg",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"vec3 Hw = - ou . xyz ; Gg = reflect ( Hw , Gf ) ;".split(" ")}]},{$:"node",ba:"B4W_PARALLAX",ma:[],la:[{$:"node_in",ba:"Gh",fa:["vec3"],ea:!1},{$:"node_in",ba:"Gi",fa:["float"],ea:!1},{$:"node_in",ba:"Gj",fa:["const","float"],ea:!1},{$:"node_in",ba:"Gk",fa:["const","float"],ea:!1},{$:"node_out",
ba:"Gl",fa:["vec3"],ea:!1},{$:"node_param",ba:"node_B4W_PARALLAX_var_texture",fa:["uniform","sampler2D"],ea:!1}],ja:[{$:"txt",aa:"float bN = length ( sB ) ; if ( bN < Gk ) { vec2 b_ = rY ( Gh ) ; float cd = clamp ( _0_5 * ( Gk - bN ) , _0_0 , _1_0 ) ; float hG = Gi * cd ; vec3 cf = normalize ( ou * sy ) ; float cg = _1_0 / Gj ; vec2 ch = cf . xy * hG / ( Gj * cf . z ) ; float ci = _1_0 ; float cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; for ( float cl = 1.0 ; cl <= Gj ; cl ++ ) { if ( cj < ci ) { ci -= cg ; b_ -= ch ; cj = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , b_ ) . a ; } } vec2 cm = b_ + ch ; float cn = GLSL_TEXTURE ( node_B4W_PARALLAX_var_texture , cm ) . a - ( ci + cg ) ; float co = cj - ci ; float cp = co / ( co - cn ) ; b_ = cp * cm + ( _1_0 - cp ) * b_ ; Gl = rX ( b_ ) ; } else Gl = Gh ;".split(" ")}]},
{$:"node",ba:"B4W_CLAMP",ma:[],la:[{$:"node_in",ba:"Gm",fa:["vec3"],ea:!1},{$:"node_out",ba:"Gn",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"Gn = clamp ( Gm , _0_0 , _1_0 ) ;".split(" ")}]},{$:"node",ba:"B4W_REFRACTION",ma:[],la:[{$:"node_in",ba:"Go",fa:["vec3"],ea:!1},{$:"node_in",ba:"Gp",fa:["float"],ea:!1},{$:"node_out",ba:"Gq",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:["Gq","=","Go",";"]}]},{$:"node",ba:"B4W_TRANSLUCENCY",ma:[],la:[{$:"node_in",ba:"Gr",fa:["float"],ea:!1},{$:"node_in",ba:"Gs",fa:["float"],
ea:!1},{$:"node_in",ba:"Gt",fa:["float"],ea:!1},{$:"node_in",ba:"Gu",fa:["float"],ea:!1},{$:"node_in",ba:"Gv",fa:["float"],ea:!1},{$:"node_out",ba:"Gw",fa:["float"],ea:!0},{$:"node_out",ba:"Gx",fa:["vec4"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gw"],ja:[{$:"txt",aa:["Gw","=","Gr",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["USE_OUT_Gx"],ja:[{$:"txt",aa:"Gx = vec4 ( Gs , Gt , Gu , Gv ) ;".split(" ")}]}]}]},{$:"node",ba:"B4W_TIME",ma:[],la:[{$:"node_out",ba:"Gy",fa:["float"],ea:!1}],
ja:[{$:"txt",aa:["Gy","=","u_time",";"]}]},{$:"node",ba:"B4W_SMOOTHSTEP",ma:[],la:[{$:"node_in",ba:"Gz",fa:["float"],ea:!1},{$:"node_in",ba:"GA",fa:["float"],ea:!1},{$:"node_in",ba:"GB",fa:["float"],ea:!1},{$:"node_out",ba:"GC",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"GC = smoothstep ( GA , GB , Gz ) ;".split(" ")}]},{$:"node",ba:"B4W_GLOW_OUTPUT",ma:[],la:[{$:"node_in",ba:"GD",fa:["vec3"],ea:!1},{$:"node_in",ba:"GE",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"E = GD ; I = GE ;".split(" ")}]},{$:"node",ba:"B4W_VECTOSCAL",
ma:[],la:[{$:"node_in",ba:"GF",fa:["vec3"],ea:!1},{$:"node_out",ba:"GG",fa:["float"],ea:!1}],ja:[{$:"txt",aa:"GG = ( GF . r + GF . g + GF . b ) / 3.0 ;".split(" ")}]},{$:"node",ba:"B4W_SCALTOVEC",ma:[],la:[{$:"node_in",ba:"GH",fa:["float"],ea:!1},{$:"node_out",ba:"GI",fa:["vec3"],ea:!1}],ja:[{$:"txt",aa:"GI [ 0 ] = GH ; GI [ 1 ] = GH ; GI [ 2 ] = GH ;".split(" ")}]},{$:"nodes_global"},{$:"txt",aa:"void J ( in vec3 ou , out vec3 E , out vec3 F , out vec3 G , out vec4 H , out float I ) { E = vec3 ( _0_0 ) ; F = vec3 ( _0_0 ) ; G = vec3 ( _0_0 ) ; H = vec4 ( _0_0 ) ; I = _0_0 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["USE_NODE_MATERIAL_BEGIN","USE_NODE_GEOMETRY_NO","CAUSTICS","CALC_TBN_SPACE","USE_NODE_TEX_COORD_NO","USE_NODE_NORMAL_MAP","USE_NODE_BSDF_BEGIN","USE_NODE_FRESNEL","USE_NODE_TEX_COORD_RE","USE_NODE_LAYER_WEIGHT","USE_NODE_BUMP",{$:"logical_or_expr",ia:11}],ha:{$:"grp",da:[{$:"txt",aa:["vec3","sv","=","j",";"]},{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",
{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"if ( gl_FrontFacing == false )".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["if","(","gl_FrontFacing",")"]}]}}]},{$:"txt",aa:"sv = sv ; else sv = - sv ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_NORMAL_MAP"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","sw","=","sv",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING","USE_NODE_GEOMETRY_NO","USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",{$:"logical_or_expr",ia:4}],ha:{$:"grp",
da:[{$:"txt",aa:"vec3 sx = normalize ( sv ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["DOUBLE_SIDED_LIGHTING"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","ot","=","sx",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 ot = normalize ( j ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_NO"],ha:{$:"grp",da:[{$:"txt",aa:["vec3","su","=","sx",";"]}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["CALC_TBN_SPACE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_NODE_TEXTURE_NORMAL","USE_NODE_B4W_PARALLAX",
{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 W = cross ( sx , k . xyz ) * k . w ; mat3 sy = mat3 ( k . xyz , W , sx ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["USE_NODE_NORMAL_MAP"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 W = cross ( sv , k . xyz ) * k . w ; mat3 sA = mat3 ( k . xyz , W , sv ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:"vec3 os = h ; vec4 sB = i ; float sC = u_emit ; float sD = u_ambient ;".split(" ")},{$:"nodes_main"},{$:"txt",aa:["}"]}]}}]}]};d["include/particles_nodes.glslv"]=
{$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PARTICLES_NODES_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"PARTICLES_NODES_GLSLV",aa:[""]},{$:"node",ba:"TEX_COORD_UV",ma:[],la:[],ja:[{$:"txt",aa:["A","=","HC",";"]}]},{$:"node",ba:"UV_MERGED",ma:[],la:[],ja:[{$:"txt",aa:["A","=","HC",";"]}]},{$:"node",ba:"UVMAP",ma:[],la:[],ja:[{$:"txt",aa:["A","=","HC",";"]}]},{$:"node",ba:"GEOMETRY_UV",ma:[],la:[],ja:[{$:"txt",aa:["A","=","HC",";"]}]},{$:"node",ba:"PARTICLE_INFO",ma:[{$:"node_var",ba:"PART_INFO_SIZE",aa:["0"]},
{$:"node_var",ba:"PART_INFO_AGE",aa:["0"]},{$:"node_var",ba:"PART_INFO_LT",aa:["0"]},{$:"node_var",ba:"PART_INFO_LOC",aa:["0"]},{$:"node_var",ba:"PART_INFO_IND",aa:["0"]},{$:"node_var",ba:"PART_INFO_VEL",aa:["0"]},{$:"node_var",ba:"PART_INFO_A_VEL",aa:["0"]}],la:[{$:"node_param",ba:"Hf",fa:["GLSL_OUT","vec4"],ea:!0},{$:"node_param",ba:"Hg",fa:["GLSL_OUT","vec3"],ea:!0},{$:"node_param",ba:"Hh",fa:["GLSL_OUT","vec3"],ea:!0},{$:"node_param",ba:"Hi",fa:["GLSL_OUT","vec3"],ea:!0},{$:"node_param",ba:"node_PARTICLE_INFO_var_a_p_indices",
fa:["GLSL_IN","float"],ea:!0}],ja:[{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_SIZE"],ja:[{$:"txt",aa:"Hf [ 3 ] = HB ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_AGE"],ja:[{$:"txt",aa:"Hf [ 1 ] = HA ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_LT"],ja:[{$:"txt",aa:"Hf [ 2 ] = HD ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_LOC"],ja:[{$:"txt",aa:["Hg","=","Hx",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_IND"],ja:[{$:"txt",
aa:"Hf [ 0 ] = node_PARTICLE_INFO_var_a_p_indices ;".split(" ")}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_VEL"],ja:[{$:"txt",aa:["Hh","=","Hy",";"]}]}]},{$:"node_cond",da:[{$:"node_if",ga:["PART_INFO_A_VEL"],ja:[{$:"txt",aa:["Hi","=","Hz",";"]}]}]}]},{$:"nodes_global"},{$:"txt",aa:"void J ( in vec3 Hx , in vec3 Hy , in vec3 Hz , in float HA , in float HB , in vec2 HC , in float HD ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_NODE_GEOMETRY_OR","USE_NODE_TEX_COORD_GE",{$:"logical_or_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["A","=","HC",";"]}]}}]},{$:"nodes_main"},{$:"txt",aa:["}"]}]}}]}]};d["include/precision_statement.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PRECISION_STATEMENT_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"PRECISION_STATEMENT_GLSLF",aa:[""]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"txt",aa:["precision","PRECISION","float",";"]}]}}]}]};d["include/procedural.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"PROCEDURAL_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"PROCEDURAL_GLSLF",
aa:[""]},{$:"txt",aa:"vec4 HE ( vec4 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec3 HE ( vec3 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec2 HE ( vec2 x ) { return x - floor ( x * ( _1_0 / 289.0 ) ) * 289.0 ; } vec4 HF ( vec4 x ) { return x - floor ( x * ( _1_0 / 7.0 ) ) * 7.0 ; } vec4 HG ( vec4 x ) { return HE ( ( 34.0 * x + 5.0 ) * x ) ; }".split(" ")},{$:"define",ba:"K",aa:["0.142857142857"]},{$:"define",ba:"K2",aa:["0.0714285714285"]},{$:"define",ba:"JITTER",
aa:["0.7"]},{$:"txt",aa:"vec2 fG ( vec2 HH ) { vec2 HI = HE ( floor ( HH ) ) ; vec2 HJ = fract ( HH ) ; vec4 HK = HJ . x + vec4 ( - 0.5 , - 1.5 , - 0.5 , - 1.5 ) ; vec4 HL = HJ . y + vec4 ( - 0.5 , - 0.5 , - 1.5 , - 1.5 ) ; vec4 p = HG ( HI . x + vec4 ( _0_0 , _1_0 , _0_0 , _1_0 ) ) ; p = HG ( p + HI . y + vec4 ( _0_0 , _0_0 , _1_0 , _1_0 ) ) ; vec4 HM = HF ( p ) * K + K2 ; vec4 HN = HF ( floor ( p * K ) ) * K + K2 ; vec4 HO = HK + JITTER * HM ; vec4 HP = HL + JITTER * HN ; vec4 dz = HO * HO + HP * HP ;".split(" ")},
{$:"cond",da:[{$:"if",ga:[1],ha:{$:"grp",da:[{$:"txt",aa:"dz . xy = min ( dz . xy , dz . zw ) ; dz . x = min ( dz . x , dz . y ) ; return dz . xx ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"dz . xy = ( dz . x < dz . y ) ? dz . xy : dz . yx ; dz . xz = ( dz . x < dz . z ) ? dz . xz : dz . zx ; dz . xw = ( dz . x < dz . w ) ? dz . xw : dz . wx ; dz . y = min ( dz . y , dz . z ) ; dz . y = min ( dz . y , dz . w ) ; return sqrt ( dz . xy ) ;".split(" ")}]}}]},{$:"txt",aa:"} vec3 kX ( vec2 HH , float HQ ) { vec2 HI = HE ( floor ( HH ) ) ; vec2 HJ = fract ( HH ) ; vec4 HK = HJ . x + vec4 ( - 0.5 , - 1.5 , - 0.5 , - 1.5 ) ; vec4 HL = HJ . y + vec4 ( - 0.5 , - 0.5 , - 1.5 , - 1.5 ) ; vec4 p = HG ( HI . x + vec4 ( _0_0 , _1_0 , _0_0 , _1_0 ) ) ; p = HG ( p + HI . y + vec4 ( _0_0 , _0_0 , _1_0 , _1_0 ) ) ; vec4 HM = HF ( p ) * K + K2 ; vec4 HN = HF ( floor ( p * K ) ) * K + K2 ; vec4 HO = HK + JITTER * HM ; vec4 HP = HL + JITTER * HN ; vec4 HR = HO * HO + HP * HP ; HO += HQ ; HP += HQ ; vec4 HS = HO * HO + HP * HP ; HO += HQ ; HP += HQ ; vec4 HT = HO * HO + HP * HP ; HR . xy = min ( HR . xy , HR . zw ) ; HR . x = min ( HR . x , HR . y ) ; HS . xy = min ( HS . xy , HS . zw ) ; HS . x = min ( HS . x , HS . y ) ; HT . xy = min ( HT . xy , HT . zw ) ; HT . x = min ( HT . x , HT . y ) ; return vec3 ( HR . x , HS . x , HT . x ) ; } vec3 HU ( vec3 x ) { return HE ( ( ( x * 34.0 ) + _1_0 ) * x ) ; } float fv ( vec2 kQ ) { const vec4 HV = vec4 ( 0.211324865405187 , 0.366025403784439 , - 0.577350269189626 , 0.024390243902439 ) ; vec2 cl = floor ( kQ + dot ( kQ , HV . yy ) ) ; vec2 HW = kQ - cl + dot ( cl , HV . xx ) ; vec2 HX ; HX = ( HW . x > HW . y ) ? vec2 ( _1_0 , _0_0 ) : vec2 ( _0_0 , _1_0 ) ; vec4 HY = HW . xyxy + HV . xxzz ; HY . xy -= HX ; cl = HE ( cl ) ; vec3 p = HU ( HU ( cl . y + vec3 ( _0_0 , HX . y , _1_0 ) ) + cl . x + vec3 ( _0_0 , HX . x , _1_0 ) ) ; vec3 aA = max ( 0.5 - vec3 ( dot ( HW , HW ) , dot ( HY . xy , HY . xy ) , dot ( HY . zw , HY . zw ) ) , _0_0 ) ; aA = aA * aA ; aA = aA * aA ; vec3 x = 2.0 * fract ( p * HV . www ) - _1_0 ; vec3 cj = abs ( x ) - 0.5 ; vec3 HM = floor ( x + 0.5 ) ; vec3 HZ = x - HM ; aA *= 1.79284291400159 - 0.85373472095314 * ( HZ * HZ + cj * cj ) ; vec3 g ; g . x = HZ . x * HW . x + cj . x * HW . y ; g . yz = HZ . yz * HY . xz + cj . yz * HY . yw ; return 130.0 * dot ( aA , g ) ; } vec2 Ib ( vec2 fW ) { float HR = dot ( fW , vec2 ( 12.9898 , 78.233 ) ) ; float HS = dot ( fW , vec2 ( 12.9898 , 78.233 ) * 2.0 ) ; float H_ = fract ( sin ( HR ) * 43758.5453 ) * 2.0 - _1_0 ; float Ia = fract ( sin ( HS ) * 43758.5453 ) * 2.0 - _1_0 ; return vec2 ( H_ , Ia ) ; } float lg ( vec2 Ic ) { return fract ( sin ( dot ( Ic , vec2 ( 12.9898 , 78.233 ) ) ) * 43758.5453 ) ; }".split(" ")}]}}]}]};
d["include/refraction.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"REFRACTION_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"REFRACTION_GLSLF",aa:[""]},{$:"var",ba:"REFRACTIVE",aa:["0"]},{$:"var",ba:"USE_REFRACTION_CORRECTION",aa:["0"]},{$:"cond",da:[{$:"if",ga:["REFRACTIVE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["USE_REFRACTION_CORRECTION"],ha:{$:"grp",da:[{$:"include",oa:"pack.glslf"}]}}]},{$:"include",oa:"color_util.glslf"},{$:"cond",da:[{$:"if",ga:["USE_REFRACTION_CORRECTION"],ha:{$:"grp",da:[{$:"txt",
aa:"float eS ( in float cR , inout vec2 eR , in vec2 eI ) { vec4 Id = GLSL_TEXTURE ( u_scene_depth , eR ) ; float eT = cQ ( Id ) ; if ( eT < m ) { eR = eI ; return cR ; } else { return eT ; } return cR ; }".split(" ")}]}}]},{$:"txt",aa:"vec3 cN ( in vec3 rq , in vec2 Ie ) { vec2 eI = rq . xy / rq . z ; vec2 eR = eI + Ie ;".split(" ")},{$:"cond",da:[{$:"if",ga:["USE_REFRACTION_CORRECTION"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 cP = GLSL_TEXTURE_PROJ ( u_scene_depth , rq ) ; float cR = cQ ( cP ) ; eS ( cR , eR , eI ) ;".split(" ")}]}}]},
{$:"txt",aa:"vec3 eX = GLSL_TEXTURE ( u_refractmap , eR ) . rgb ; bC ( eX ) ; return eX ; }".split(" ")}]}}]}]}}]}]};d["include/scale_texcoord.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"SCALE_TEXCOORD_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"SCALE_TEXCOORD_GLSLV",aa:[""]},{$:"txt",aa:"vec2 az ( vec2 b_ , vec3 If ) { return ( b_ + 0.5 ) * If . xy - 0.5 ; }".split(" ")}]}}]}]};d["include/shadow.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"SHADOW_GLSLF",ha:{$:"grp",da:[{$:"define",ba:"SHADOW_GLSLF",
aa:[""]},{$:"var",ba:"PRECISION",aa:["highp"]},{$:"var",ba:"SHADOW_TEX_RES",aa:["2048.0"]},{$:"var",ba:"CSM_FADE_LAST_CASCADE",aa:["0"]},{$:"var",ba:"CSM_BLEND_BETWEEN_CASCADES",aa:["0"]},{$:"var",ba:"RGBA_SHADOWS",aa:["0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"var",ba:"COMPARED_MODE",aa:["0"]},{$:"var",ba:"POISSON_DISK_NUM",aa:["NO_SOFT_SHADOWS"]},
{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"procedural.glslf"}]}}]},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"const float Ig = 0.1 ; const float Ih = 0.1 ; const float Ii = - 0.01 ; const float Ij = 0.05 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","POISSON_X_16",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 Ik = vec4 ( 0.14383161 , 0.34495938 , - 0.38277543 , - 0.26496911 ) ; vec4 Il = vec4 ( 0.53742981 , 0.19984126 , 0.79197514 , - 0.094184101 ) ; vec4 Im = vec4 ( - 0.94201624 , - 0.91588581 , - 0.2418884 , 0.44323325 ) ; vec4 In = vec4 ( - 0.81544232 , 0.94558609 , - 0.81409955 , 0.97484398 ) ; vec4 Io = vec4 ( - 0.1410079 , 0.2938776 , 0.27676845 , - 0.41893023 ) ; vec4 Ip = vec4 ( - 0.4737342 , 0.78641367 , 0.19090188 , - 0.9293887 ) ; vec4 Iq = vec4 ( - 0.39906216 , 0.45771432 , 0.99706507 , - 0.97511554 ) ; vec4 Ir = vec4 ( - 0.87912464 , - 0.76890725 , 0.9143759 , 0.7564837 ) ;".split(" ")}]}},
{$:"elif",ga:["POISSON_DISK_NUM","POISSON_X_8",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 Ik = vec2 ( - 0.37192261 , 0.47109537 ) ; vec2 Il = vec2 ( - 0.6807477 , 0.69048062 ) ; vec2 Im = vec2 ( 0.11615683 , - 0.91318524 ) ; vec2 In = vec2 ( 0.93688596 , - 0.16948928 ) ; vec2 Io = vec2 ( - 0.89699117 , 0.74092316 ) ; vec2 Ip = vec2 ( 0.38263656 , - 0.66119884 ) ; vec2 Iq = vec2 ( - 0.08193062 , - 0.21275223 ) ; vec2 Ir = vec2 ( 0.05578877 , 0.84225623 ) ;".split(" ")}]}},{$:"elif",ga:["POISSON_DISK_NUM",
"POISSON_X_4",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 Ik = vec2 ( - 0.51808083 , 0.0 ) ; vec2 Il = vec2 ( 0.5741194 , 0.0 ) ; vec2 Im = vec2 ( - 0.68048857 , 0.0 ) ; vec2 In = vec2 ( 0.82934988 , 0.0 ) ; vec2 Io = vec2 ( 0.70009436 , 0.0 ) ; vec2 Ip = vec2 ( - 0.78790467 , 0.0 ) ; vec2 Iq = vec2 ( - 0.58619489 , 0.0 ) ; vec2 Ir = vec2 ( 0.41902178 , 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"bool It ( vec2 iK , float Is ) { return all ( lessThanEqual ( iK , vec2 ( 1.0 + Is ) ) ) && all ( greaterThanEqual ( iK , vec2 ( 0.0 - Is ) ) ) ; } float IA ( float Iu , float Iv , mat2 Iw , vec3 Ix , float Iy , PRECISION GLSL_SMPLR2D_SHDW Iz ) {".split(" ")},
{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec2 iK , fI ; fI . x = Iu ; fI . y = Iv ; fI = Iw * fI ; iK = Ix . xy + fI * Iy / SHADOW_TEX_RES ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec2 iK = Ix . xy ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"if ( ! It ( iK , Ii ) ) return 1.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["RGBA_SHADOWS"],
ha:{$:"grp",da:[{$:"txt",aa:"float eq = cQ ( GLSL_TEXTURE ( Iz , iK ) ) ; return step ( Ix . z , eq ) ;".split(" ")}]}},{$:"elif",ga:["COMPARED_MODE"],ha:{$:"grp",da:[{$:"txt",aa:"return GLSL_TEXTURE ( Iz , vec3 ( iK , Ix . z ) ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return step ( Ix . z , GLSL_TEXTURE ( Iz , iK ) . r ) ;".split(" ")}]}}]},{$:"txt",aa:"} float IF ( vec3 Ix , PRECISION GLSL_SMPLR2D_SHDW Iz , float Iy ) { float IB = 0.0 ; Ix . z = clamp ( Ix . z , 0.0 , 1.0 ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float IC = Ib ( Ix . xy ) . x * M_PI ; float ID = cos ( IC ) ; float IE = sin ( IC ) ; mat2 Iw = mat2 ( ID , IE , - IE , ID ) ; for ( int cl = 0 ; cl < POISSON_DISK_NUM ; cl ++ ) { IB += IA ( Ik [ cl ] , Io [ cl ] , Iw , Ix , Iy , Iz ) ; IB += IA ( Il [ cl ] , Ip [ cl ] , Iw , Ix , Iy , Iz ) ; IB += IA ( Im [ cl ] , Iq [ cl ] , Iw , Ix , Iy , Iz ) ; IB += IA ( In [ cl ] , Ir [ cl ] , Iw , Ix , Iy , Iz ) ; } return clamp ( IB / ( float ( POISSON_DISK_NUM ) * 4.0 ) , 0.0 , 1.0 ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return IA ( 0.0 , 0.0 , mat2 ( 0.0 ) , Ix , Iy , Iz ) ;".split(" ")}]}}]},{$:"txt",aa:"} float IO ( vec3 IG , PRECISION GLSL_SMPLR2D_SHDW IH , vec3 II , PRECISION GLSL_SMPLR2D_SHDW IJ , float IK , float IL , float aL ) { float IM , IN ; IG . z = clamp ( IG . z , 0.0 , 1.0 ) ; II . z = clamp ( II . z , 0.0 , 1.0 ) ; IM = 0.0 ; IN = 0.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",
aa:"float IC = Ib ( IG . xy ) . x * M_PI ; float ID = cos ( IC ) ; float IE = sin ( IC ) ; mat2 Iw = mat2 ( ID , IE , - IE , ID ) ; for ( int cl = 0 ; cl < POISSON_DISK_NUM ; cl ++ ) { IM += IA ( Ik [ cl ] , Io [ cl ] , Iw , IG , IK , IH ) ; IM += IA ( Il [ cl ] , Ip [ cl ] , Iw , IG , IK , IH ) ; IM += IA ( Im [ cl ] , Iq [ cl ] , Iw , IG , IK , IH ) ; IM += IA ( In [ cl ] , Ir [ cl ] , Iw , IG , IK , IH ) ; } for ( int cl = 0 ; cl < POISSON_DISK_NUM ; cl ++ ) { IN += IA ( Ik [ cl ] , Io [ cl ] , Iw , II , IL , IJ ) ; IN += IA ( Il [ cl ] , Ip [ cl ] , Iw , II , IL , IJ ) ; IN += IA ( Im [ cl ] , Iq [ cl ] , Iw , II , IL , IJ ) ; IN += IA ( In [ cl ] , Ir [ cl ] , Iw , II , IL , IJ ) ; } IM = mix ( IM , IN , aL ) ; IM /= ( float ( POISSON_DISK_NUM ) * 4.0 ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"IM += IA ( 0.0 , 0.0 , mat2 ( 0.0 ) , IG , IK , IH ) ; IN += IA ( 0.0 , 0.0 , mat2 ( 0.0 ) , II , IL , IJ ) ; IM = mix ( IM , IN , aL ) ;".split(" ")}]}}]},{$:"txt",aa:"return clamp ( IM , 0.0 , 1.0 ) ; } float IP ( vec2 iK ) { float a = min ( iK . x , iK . y ) ; float b = min ( 1.0 - iK . x , 1.0 - iK . y ) ; return min ( a , b ) ; } float IR ( float uO , float IQ ) { if ( IQ >= 0.0 && IQ <= Ih ) uO = ( uO - 1.0 ) / Ih * IQ + 1.0 ; return uO ; } float IW ( vec3 IS , vec3 IT , PRECISION GLSL_SMPLR2D_SHDW IH , PRECISION GLSL_SMPLR2D_SHDW IJ , float IK , float IL , float IU , float eq ) { float uO ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CSM_BLEND_BETWEEN_CASCADES"],ha:{$:"grp",da:[{$:"txt",aa:"float IQ = IP ( IS . xy ) ; if ( - eq > IU && IQ >= 0.0 && IQ <= Ig && It ( IT . xy , 0.0 ) ) { float IV = 1.0 - IQ / Ig ; uO = IO ( IS , IH , IT , IJ , IK , IL , IV ) ; } else".split(" ")}]}}]},{$:"txt",aa:"uO = IF ( IS , IH , IK ) ; return uO ; } float IY ( vec3 IX , PRECISION GLSL_SMPLR2D_SHDW Iz , float Iy , float IU , float eq ) { float uO = IF ( IX , Iz , Iy ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_FADE_LAST_CASCADE"],
ha:{$:"grp",da:[{$:"txt",aa:"if ( - eq > IU ) { float IQ = IP ( IX . xy ) ; uO = IR ( uO , IQ ) ; }".split(" ")}]}}]},{$:"txt",aa:"return uO ; } vec4 es ( float eq ) { float uO = 1.0 ;".split(" ")},{$:"cond",da:[{$:"if",ga:["POISSON_DISK_NUM","NO_SOFT_SHADOWS",{$:"non_equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["vec4","IZ","=","u_pcf_blur_radii",";"]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec4 IZ = vec4 ( 0.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"vec3 IG = n . xyz / n . w ; if ( n . w < 0.0 ) IG . z = 0.0 ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["CSM_SECTION1","NUM_CAST_LAMPS",1,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 II = o . xyz / o . w ; if ( o . w < 0.0 ) II . z = 0.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2","NUM_CAST_LAMPS",2,{$:"g_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 I_ = u . xyz / u . w ; if ( u . w < 0.0 ) I_ . z = 0.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3","NUM_CAST_LAMPS",3,{$:"g_expr",
ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 Ja = v . xyz / v . w ; if ( v . w < 0.0 ) Ja . z = 0.0 ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION1"],ha:{$:"grp",da:[{$:"txt",aa:"if ( It ( IG . xy , 0.0 ) ) { uO = IW ( IG , II , u_shadow_map0 , u_shadow_map1 , IZ [ 0 ] , IZ [ 1 ] , u_csm_center_dists [ 0 ] , eq ) ; }".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"if ( It ( IG . xy , Ij ) ) { uO = IY ( IG , u_shadow_map0 , IZ [ 0 ] , u_csm_center_dists [ 0 ] , eq ) ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["CSM_SECTION1"],ha:{$:"grp",da:[{$:"txt",aa:"else { if ( It ( II . xy , 0.0 ) ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2"],ha:{$:"grp",da:[{$:"txt",aa:"uO = IW ( II , I_ , u_shadow_map1 , u_shadow_map2 , IZ [ 1 ] , IZ [ 2 ] , u_csm_center_dists [ 1 ] , eq ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"uO = IY ( II , u_shadow_map1 , IZ [ 1 ] , u_csm_center_dists [ 1 ] , eq ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2"],
ha:{$:"grp",da:[{$:"txt",aa:"else { if ( It ( I_ . xy , 0.0 ) ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3"],ha:{$:"grp",da:[{$:"txt",aa:"uO = IW ( I_ , Ja , u_shadow_map2 , u_shadow_map3 , IZ [ 2 ] , IZ [ 3 ] , u_csm_center_dists [ 2 ] , eq ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"uO = IY ( I_ , u_shadow_map2 , IZ [ 2 ] , u_csm_center_dists [ 2 ] , eq ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3"],ha:{$:"grp",da:[{$:"txt",aa:"else { if ( It ( Ja . xy , 0.0 ) ) uO = IY ( Ja , u_shadow_map3 , IZ [ 3 ] , u_csm_center_dists [ 3 ] , eq ) ; }".split(" ")}]}}]},
{$:"txt",aa:["}"]}]}}]},{$:"txt",aa:["}"]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",1,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float Jb = IF ( II , u_shadow_map1 , IZ [ 0 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["float","Jb","=","0.0",";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",2,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float Jc = IF ( I_ , u_shadow_map2 , IZ [ 0 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["float","Jc","=","0.0",
";"]}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",3,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"float Jd = IF ( Ja , u_shadow_map3 , IZ [ 0 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["float","Jd","=","1.0",";"]}]}}]},{$:"txt",aa:"return vec4 ( uO , Jb , Jc , Jd ) ; }".split(" ")}]}}]},{$:"txt",aa:"vec4 cC ( inout vec3 cy ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MAPPING_OPAQUE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 IB = GLSL_TEXTURE ( u_shadow_mask , l . xy / l . z ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",3,{$:"l_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"cy *= IB . a ;".split(" ")}]}}]},{$:"txt",aa:["return","IB",";"]}]}},{$:"elif",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 IB = es ( i . z ) ; return IB ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"return vec4 ( 1.0 ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]};
d["include/shadow.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"SHADOW_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"SHADOW_GLSLV",aa:[""]},{$:"var",ba:"MAC_OS_SHADOW_HACK",aa:["0"]},{$:"var",ba:"SHADOW_TEX_RES",aa:["2048.0"]},{$:"var",ba:"SHADOW_USAGE",aa:["NO_SHADOWS"]},{$:"var",ba:"NUM_CAST_LAMPS",aa:["0"]},{$:"var",ba:"CSM_SECTION1",aa:["0"]},{$:"var",ba:"CSM_SECTION2",aa:["0"]},{$:"var",ba:"CSM_SECTION3",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["SHADOW_USAGE","SHADOW_MASK_GENERATION",
{$:"equal_expr",ia:2},"SHADOW_USAGE","SHADOW_MAPPING_BLEND",{$:"equal_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"include",oa:"math.glslv"},{$:"txt",aa:"vec4 Jh ( mat4 Je , vec4 Jf , mat4 Jg ) { vec2 eu = ( Je * Jg [ 3 ] ) . xy ; float ev = SHADOW_TEX_RES / 2.0 ; eu = floor ( eu * ev + 0.5 ) / ev - eu ; vec4 Ix = Je * Jf ; Ix . xy += eu ; Ix . xyz = 0.5 * ( Ix . xyz + Ix . w ) ; return Ix ; } void bZ ( vec3 fn , vec3 Ji ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["MAC_OS_SHADOW_HACK"],
ha:{$:"grp",da:[{$:"txt",aa:"mat4 Jg = bc ( u_v_light_tsr [ 0 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat4 Jg = bc ( mat3 ( u_v_light_ts [ 0 ] , u_v_light_r [ 0 ] , 0.0 ) ) ;".split(" ")}]}}]},{$:"txt",aa:"vec4 Jj = Jg * vec4 ( fn + u_normal_offset * Ji , 1.0 ) ; n = Jh ( u_p_light_matrix0 , Jj , Jg ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",1,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAC_OS_SHADOW_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"Jg = bc ( u_v_light_tsr [ 1 ] ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"Jg = bc ( mat3 ( u_v_light_ts [ 1 ] , u_v_light_r [ 1 ] , 0.0 ) ) ;".split(" ")}]}}]},{$:"txt",aa:"Jj = Jg * vec4 ( fn + u_normal_offset * Ji , 1.0 ) ; o = Jh ( u_p_light_matrix1 , Jj , Jg ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",2,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAC_OS_SHADOW_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"Jg = bc ( u_v_light_tsr [ 2 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"Jg = bc ( mat3 ( u_v_light_ts [ 2 ] , u_v_light_r [ 2 ] , 0.0 ) ) ;".split(" ")}]}}]},
{$:"txt",aa:"Jj = Jg * vec4 ( fn + u_normal_offset * Ji , 1.0 ) ; u = Jh ( u_p_light_matrix2 , Jj , Jg ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["NUM_CAST_LAMPS",3,{$:"g_expr",ia:2}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MAC_OS_SHADOW_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"Jg = bc ( u_v_light_tsr [ 3 ] ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"Jg = bc ( mat3 ( u_v_light_ts [ 3 ] , u_v_light_r [ 3 ] , 0.0 ) ) ;".split(" ")}]}}]},{$:"txt",aa:"Jj = Jg * vec4 ( fn + u_normal_offset * Ji , 1.0 ) ; v = Jh ( u_p_light_matrix3 , Jj , Jg ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["CSM_SECTION1"],ha:{$:"grp",da:[{$:"txt",aa:"o = Jh ( u_p_light_matrix1 , Jj , Jg ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION2"],ha:{$:"grp",da:[{$:"txt",aa:"u = Jh ( u_p_light_matrix2 , Jj , Jg ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["CSM_SECTION3"],ha:{$:"grp",da:[{$:"txt",aa:"v = Jh ( u_p_light_matrix3 , Jj , Jg ) ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]}}]}]};d["include/skin.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"SKIN_GLSLV",ha:{$:"grp",
da:[{$:"define",ba:"SKIN_GLSLV",aa:[""]},{$:"var",ba:"DISABLE_TANGENT_SKINNING",aa:["0"]},{$:"var",ba:"SKINNED",aa:["0"]},{$:"var",ba:"FRAMES_BLENDING",aa:["0"]},{$:"cond",da:[{$:"if",ga:["SKINNED"],ha:{$:"grp",da:[{$:"include",oa:"math.glslv"},{$:"define",ba:"SKIN_SLERP",aa:["0"]},{$:"cond",da:[{$:"if",ga:["SKIN_SLERP"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 Jr ( in vec4 qV , in vec4 Jk , in float Jl ) { float Jm = qV [ 0 ] * Jk [ 0 ] + qV [ 1 ] * Jk [ 1 ] + qV [ 2 ] * Jk [ 2 ] + qV [ 3 ] * Jk [ 3 ] ; if ( Jm < 0.0 ) { Jk *= - 1.0 ; Jm = - Jm ; } if ( abs ( Jm ) >= 1.0 ) return qV ; float Jn = acos ( Jm ) ; float Jo = sqrt ( 1.0 - Jm * Jm ) ; if ( abs ( Jo ) < 0.001 ) return vec4 ( qV * 0.5 + Jk * 0.5 ) ; float Jp = sin ( ( 1.0 - Jl ) * Jn ) / Jo ; float Jq = sin ( Jl * Jn ) / Jo ; return qV * Jp + Jk * Jq ; }".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 JF ( in vec3 O , in vec4 Js , in vec4 Jt , in vec4 Ju , in vec4 Jv , in float Jw ) { vec3 Jx = rh ( u_arm_rel_trans , u_arm_rel_quat , O ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SKIN_SLERP"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 qV = Jr ( Js , Jt , Jw ) ; vec4 Jy = mix ( Ju , Jv , Jw ) ; vec3 Jz = T ( qV , Jx ) ; vec3 JA = Jz * Jy . w + Jy . xyz ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 JB = T ( Js , Jx ) ; vec3 JC = T ( Jt , Jx ) ; vec3 JD = JB * Ju . w + Ju . xyz ; vec3 JE = JC * Jv . w + Jv . xyz ; vec3 JA = mix ( JD , JE , Jw ) ;".split(" ")}]}}]},
{$:"txt",aa:"return rk ( u_arm_rel_trans , u_arm_rel_quat , JA ) ; } vec3 JL ( in vec3 JG , in vec4 Js , in vec4 Jt , in float Jw ) { vec3 JH = rj ( u_arm_rel_trans , u_arm_rel_quat , JG ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["SKIN_SLERP"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 qV = Jr ( Js , Jt , Jw ) ; vec3 JI = T ( qV , JH ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 JJ = T ( Js , JH ) ; vec3 JK = T ( Jt , JH ) ; vec3 JI = mix ( JJ , JK , Jw ) ;".split(" ")}]}}]},{$:"txt",aa:"return rl ( u_arm_rel_trans , u_arm_rel_quat , JI ) ; }".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 JF ( in vec3 O , in vec4 Js , in vec4 Ju ) { vec3 Jx = rh ( u_arm_rel_trans , u_arm_rel_quat , O ) ; vec3 Jz = T ( Js , Jx ) ; vec3 JA = Jz * Ju . w + Ju . xyz ; return rk ( u_arm_rel_trans , u_arm_rel_quat , JA ) ; } vec3 JL ( in vec3 JG , in vec4 Js ) { vec3 JH = rj ( u_arm_rel_trans , u_arm_rel_quat , JG ) ; vec3 JI = T ( Js , JH ) ; return rl ( u_arm_rel_trans , u_arm_rel_quat , JI ) ; }".split(" ")}]}}]},{$:"txt",aa:"void an ( inout vec3 O , inout vec3 V , inout vec3 W , inout vec3 U ) {".split(" ")},
{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:["float","JM","=","u_frame_factor",";"]}]}}]},{$:"txt",aa:"if ( a_influence . y > 0.0 ) { vec3 jD = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 JN = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 JO = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec3 JP = vec3 ( 0.0 , 0.0 , 0.0 ) ; vec4 JQ = a_influence ; for ( int cl = 0 ; cl < 4 ; cl ++ ) { int JR = int ( JQ [ cl ] ) ; float JS = fract ( JQ [ cl ] ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",
da:[{$:"txt",aa:"JN += JS * JL ( V , u_quatsb [ JR ] , u_quatsa [ JR ] , JM ) ; JO += JS * JL ( W , u_quatsb [ JR ] , u_quatsa [ JR ] , JM ) ; JP += JS * JL ( U , u_quatsb [ JR ] , u_quatsa [ JR ] , JM ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"jD += JS * JF ( O , u_quatsb [ JR ] , u_transb [ JR ] ) ; JP += JS * JL ( U , u_quatsb [ JR ] ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_TANGENT_SKINNING",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"JN += JS * JL ( V , u_quatsb [ JR ] ) ; JO += JS * JL ( W , u_quatsb [ JR ] ) ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:["}"]},{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"int JR = int ( JQ [ 0 ] ) ; float JS = fract ( JQ [ 0 ] ) ; jD += JS * JF ( O , u_quatsb [ JR ] , u_quatsa [ JR ] , u_transb [ JR ] , u_transa [ JR ] , JM ) ; JR = int ( JQ [ 1 ] ) ; JS = fract ( JQ [ 1 ] ) ; jD += JS * JF ( O , u_quatsb [ JR ] , u_quatsa [ JR ] , u_transb [ JR ] , u_transa [ JR ] , JM ) ; JR = int ( JQ [ 2 ] ) ; JS = fract ( JQ [ 2 ] ) ; jD += JS * JF ( O , u_quatsb [ JR ] , u_quatsa [ JR ] , u_transb [ JR ] , u_transa [ JR ] , JM ) ; JR = int ( JQ [ 3 ] ) ; JS = fract ( JQ [ 3 ] ) ; jD += JS * JF ( O , u_quatsb [ JR ] , u_quatsa [ JR ] , u_transb [ JR ] , u_transa [ JR ] , JM ) ;".split(" ")}]}}]},
{$:"txt",aa:"O = jD ; U = JP ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_TANGENT_SKINNING",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"V = JN ; W = JO ;".split(" ")}]}}]},{$:"txt",aa:"} if ( ! ( a_influence . y > 0.0 ) ) { int JT = int ( a_influence [ 0 ] - 1.0 ) ; if ( JT > - 1 ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["FRAMES_BLENDING"],ha:{$:"grp",da:[{$:"txt",aa:"O = JF ( O , u_quatsb [ JT ] , u_quatsa [ JT ] , u_transb [ JT ] , u_transa [ JT ] , JM ) ; V = JL ( V , u_quatsb [ JT ] , u_quatsa [ JT ] , JM ) ; W = JL ( W , u_quatsb [ JT ] , u_quatsa [ JT ] , JM ) ; U = JL ( U , u_quatsb [ JT ] , u_quatsa [ JT ] , JM ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"O = JF ( O , u_quatsb [ JT ] , u_transb [ JT ] ) ; U = JL ( U , u_quatsb [ JT ] ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["DISABLE_TANGENT_SKINNING",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"V = JL ( V , u_quatsb [ JT ] ) ; W = JL ( W , u_quatsb [ JT ] ) ;".split(" ")}]}}]}]}}]},{$:"txt",aa:["}","}","}"]}]}}]}]}}]}]};d["include/sky_blending.glslf"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"SKY_BLENDING_GLSLF",ha:{$:"grp",da:[{$:"define",
ba:"SKY_BLENDING_GLSLF",aa:[""]},{$:"include",oa:"std.glsl"},{$:"include",oa:"blending.glslf"},{$:"var",ba:"WO_SKYREAL",aa:["0"]},{$:"var",ba:"WO_SKYBLEND",aa:["0"]},{$:"var",ba:"BLENDTYPE",aa:["MIX"]},{$:"var",ba:"MTEX_RGBTOINT",aa:["0"]},{$:"var",ba:"WOMAP_HORIZ",aa:["0"]},{$:"var",ba:"WOMAP_ZENUP",aa:["0"]},{$:"var",ba:"WOMAP_ZENDOWN",aa:["0"]},{$:"var",ba:"WOMAP_BLEND",aa:["0"]},{$:"var",ba:"MTEX_NEGATIVE",aa:["0"]},{$:"txt",aa:"vec3 JU ( vec3 ki , vec3 kj , float aL , float kI ) { float kk = aL * kI ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["BLENDTYPE","MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kl ( kj , ki , kk ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","ADD",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return km ( ki , kj , kk ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","SUBTRACT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kn ( ki , kj , kk ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","MULTIPLY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kp ( ki , kj , kk ) ;".split(" ")}]}},
{$:"elif",ga:["BLENDTYPE","SCREEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kq ( ki , kj , kk ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","OVERLAY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kr ( ki , kj , kk ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","DIFFERENCE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return ks ( ki , kj , kk ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","DIVIDE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kt ( ki , kj , kk ) ;".split(" ")}]}},
{$:"elif",ga:["BLENDTYPE","DARKEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return ku ( ki , kj , kk ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","LIGHTEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kv ( ki , kj , kk ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","HUE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kz ( kj , ki , kk ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","SATURATION",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kA ( kj , ki , kk ) ;".split(" ")}]}},
{$:"elif",ga:["BLENDTYPE","VALUE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kB ( kj , ki , kk ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","COLOR",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kC ( kj , ki , kk ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","SOFT_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kE ( kj , ki , kk ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","LINEAR_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kF ( kj , ki , kk ) ;".split(" ")}]}}]},
{$:"txt",aa:"return vec3 ( 1.0 , 0.0 , 1.0 ) ; } float JV ( float kG , float kH , float aL , float kI ) { vec3 ki = vec3 ( kG ) , kj = vec3 ( kH ) ; float kk = aL * kI ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BLENDTYPE","MIX",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kl ( kj , ki , kk ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","ADD",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return km ( ki , kj , kk ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","SUBTRACT",{$:"equal_expr",
ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kn ( ki , kj , kk ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","MULTIPLY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kJ ( kG , kH , kk , kI ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","SCREEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kK ( kG , kH , kk , kI ) ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","OVERLAY",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kL ( kG , kH , kk , kI ) ;".split(" ")}]}},{$:"elif",
ga:["BLENDTYPE","DIFFERENCE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return ks ( ki , kj , kk ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","DIVIDE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kt ( ki , kj , kk ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","DARKEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return ku ( ki , kj , kk ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","LIGHTEN",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kv ( ki , kj , kk ) . x ;".split(" ")}]}},
{$:"elif",ga:["BLENDTYPE","SOFT_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kE ( kj , ki , kk ) . x ;".split(" ")}]}},{$:"elif",ga:["BLENDTYPE","LINEAR_LIGHT",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"return kF ( kj , ki , kk ) . x ;".split(" ")}]}}]},{$:"txt",aa:"return 0.0 ; } vec3 eB ( vec3 ex , vec3 ey , vec4 eA , float ew , vec3 ez ) { float JW = 1.0 ; JW = eA . a ;".split(" ")},{$:"cond",da:[{$:"if",ga:["MTEX_RGBTOINT"],ha:{$:"grp",da:[{$:"txt",aa:"JW = ge ( eA ) ;".split(" ")}]}}]},
{$:"cond",da:[{$:"if",ga:["MTEX_NEGATIVE"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MTEX_RGBTOINT",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"eA = vec4 ( vec3 ( 1.0 ) - eA . rgb , eA . a ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"JW = 1.0 - JW ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WOMAP_HORIZ","WOMAP_ZENUP","WOMAP_ZENDOWN",{$:"logical_or_expr",ia:3}],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MTEX_RGBTOINT"],ha:{$:"grp",da:[{$:"txt",aa:"eA = vec4 ( u_sky_tex_color , 1.0 ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"JW = eA . a ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WOMAP_HORIZ"],ha:{$:"grp",da:[{$:"txt",aa:"ex = JU ( eA . rgb , ex , JW , u_sky_tex_fac [ 1 ] ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WOMAP_ZENUP","WOMAP_ZENDOWN",{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:["float","JX","=","0.0",";"]},{$:"cond",da:[{$:"if",ga:["WO_SKYREAL"],ha:{$:"grp",da:[{$:"txt",aa:"if ( dot ( ez , vec3 ( 0.0 , 0.0 , 1.0 ) ) >= 0.0 ) {".split(" ")},{$:"cond",
da:[{$:"if",ga:["WOMAP_ZENUP"],ha:{$:"grp",da:[{$:"txt",aa:"JX = u_sky_tex_fac [ 2 ] ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:[";"]}]}}]},{$:"txt",aa:["}"]},{$:"cond",da:[{$:"if",ga:["WOMAP_ZENDOWN"],ha:{$:"grp",da:[{$:"txt",aa:"else JX = u_sky_tex_fac [ 3 ] ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["WOMAP_ZENUP"],ha:{$:"grp",da:[{$:"txt",aa:"JX = u_sky_tex_fac [ 2 ] ;".split(" ")}]}},{$:"elif",ga:["WOMAP_ZENDOWN"],ha:{$:"grp",da:[{$:"txt",aa:"JX = u_sky_tex_fac [ 3 ] ;".split(" ")}]}}]}]}}]},
{$:"txt",aa:"if ( JX != 0.0 ) ey = JU ( eA . rgb , ey , JW , JX ) ;".split(" ")}]}}]}]}}]},{$:"cond",da:[{$:"if",ga:["WOMAP_BLEND"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["MTEX_RGBTOINT",{$:"logic_negative_expr",ia:1}],ha:{$:"grp",da:[{$:"txt",aa:"JW = dot ( eA . rgb , vec3 ( 0.2126 , 0.7152 , 0.0722 ) ) ;".split(" ")}]}}]},{$:"txt",aa:"ew = JV ( u_sky_tex_dvar , ew , JW , u_sky_tex_fac [ 0 ] ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["WO_SKYBLEND"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 bs = mix ( ex , ey , ew ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:["vec3","bs","=","ex",";"]}]}}]},{$:"txt",aa:["return","bs",";","}"]}]}}]}]};d["include/std.glsl"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"STD_ENUMS_GLSL",ha:{$:"grp",da:[{$:"define",ba:"STD_ENUMS_GLSL",aa:[""]},{$:"var",ba:"CONSTANTS_HACK",aa:["0"]},{$:"define",ba:"TEXTURE_COORDS_NONE",aa:["0"]},{$:"define",ba:"TEXTURE_COORDS_UV_ORCO",aa:["1"]},{$:"define",ba:"TEXTURE_COORDS_NORMAL",aa:["2"]},{$:"define",ba:"TEXTURE_BLEND_TYPE_MIX",aa:["1"]},{$:"define",ba:"TEXTURE_BLEND_TYPE_MULTIPLY",
aa:["2"]},{$:"define",ba:"SHADOW_SRC_NONE",aa:["1"]},{$:"define",ba:"SHADOW_SRC_DEPTH",aa:["2"]},{$:"define",ba:"SHADOW_SRC_MASK",aa:["3"]},{$:"define",ba:"SHADOW_DST_NONE",aa:["1"]},{$:"define",ba:"SHADOW_DST_DEPTH",aa:["2"]},{$:"define",ba:"SHADOW_DST_MASK",aa:["3"]},{$:"define",ba:"NO_SHADOWS",aa:["1"]},{$:"define",ba:"SHADOW_CASTING",aa:["2"]},{$:"define",ba:"SHADOW_MASK_GENERATION",aa:["3"]},{$:"define",ba:"SHADOW_MAPPING_OPAQUE",aa:["4"]},{$:"define",ba:"SHADOW_MAPPING_BLEND",aa:["5"]},{$:"define",
ba:"POISSON_X_16",aa:["4"]},{$:"define",ba:"POISSON_X_8",aa:["2"]},{$:"define",ba:"POISSON_X_4",aa:["1"]},{$:"define",ba:"NO_SOFT_SHADOWS",aa:["0"]},{$:"define",ba:"SPECULAR_PHONG",aa:["1"]},{$:"define",ba:"SPECULAR_COOKTORR",aa:["2"]},{$:"define",ba:"SPECULAR_WARDISO",aa:["3"]},{$:"define",ba:"SPECULAR_BLINN",aa:["4"]},{$:"define",ba:"SPECULAR_TOON",aa:["5"]},{$:"define",ba:"DIFFUSE_LAMBERT",aa:["1"]},{$:"define",ba:"DIFFUSE_OREN_NAYAR",aa:["2"]},{$:"define",ba:"DIFFUSE_FRESNEL",aa:["3"]},{$:"define",
ba:"DIFFUSE_MINNAERT",aa:["4"]},{$:"define",ba:"DIFFUSE_TOON",aa:["5"]},{$:"define",ba:"MIX",aa:["0"]},{$:"define",ba:"ADD",aa:["1"]},{$:"define",ba:"SUBTRACT",aa:["2"]},{$:"define",ba:"MULTIPLY",aa:["3"]},{$:"define",ba:"SCREEN",aa:["4"]},{$:"define",ba:"OVERLAY",aa:["5"]},{$:"define",ba:"DIFFERENCE",aa:["6"]},{$:"define",ba:"DIVIDE",aa:["7"]},{$:"define",ba:"DARKEN",aa:["8"]},{$:"define",ba:"LIGHTEN",aa:["9"]},{$:"define",ba:"HUE",aa:["10"]},{$:"define",ba:"SATURATION",aa:["11"]},{$:"define",ba:"VALUE",
aa:["12"]},{$:"define",ba:"COLOR",aa:["13"]},{$:"define",ba:"SOFT_LIGHT",aa:["14"]},{$:"define",ba:"LINEAR_LIGHT",aa:["15"]},{$:"define",ba:"REFL_NONE",aa:["0"]},{$:"define",ba:"REFL_MIRRORMAP",aa:["1"]},{$:"define",ba:"REFL_PLANE",aa:["2"]},{$:"define",ba:"REFL_CUBE",aa:["3"]},{$:"define",ba:"REFL_PBR_SIMPLE",aa:["4"]},{$:"define",ba:"REFL_PBR_STANDARD",aa:["5"]},{$:"define",ba:"INVERSE_QUADRATIC",aa:["0"]},{$:"define",ba:"LINEAR",aa:["1"]},{$:"define",ba:"QUADRATIC",aa:["2"]},{$:"define",ba:"HEMI",
aa:["1"]},{$:"define",ba:"SPOT",aa:["2"]},{$:"define",ba:"POINT",aa:["3"]},{$:"define",ba:"SUN",aa:["4"]},{$:"define",ba:"DOF_SIMPLE",aa:["0"]},{$:"define",ba:"DOF_BOKEH",aa:["1"]},{$:"define",ba:"COC_ALL",aa:["0"]},{$:"define",ba:"COC_FOREGROUND",aa:["1"]},{$:"define",ba:"COC_COMBINE",aa:["2"]},{$:"define",ba:"VT_WORLD_TO_WORLD",aa:["0"]},{$:"define",ba:"VT_WORLD_TO_OBJECT",aa:["1"]},{$:"define",ba:"VT_WORLD_TO_CAMERA",aa:["2"]},{$:"define",ba:"VT_OBJECT_TO_WORLD",aa:["3"]},{$:"define",ba:"VT_OBJECT_TO_OBJECT",
aa:["4"]},{$:"define",ba:"VT_OBJECT_TO_CAMERA",aa:["5"]},{$:"define",ba:"VT_CAMERA_TO_WORLD",aa:["6"]},{$:"define",ba:"VT_CAMERA_TO_OBJECT",aa:["7"]},{$:"define",ba:"VT_CAMERA_TO_CAMERA",aa:["8"]},{$:"define",ba:"VT_POINT",aa:["0"]},{$:"define",ba:"VT_VECTOR",aa:["1"]},{$:"define",ba:"VT_NORMAL",aa:["2"]},{$:"define",ba:"NM_TANGENT",aa:["0"]},{$:"define",ba:"NM_OBJECT",aa:["1"]},{$:"define",ba:"NM_WORLD",aa:["2"]},{$:"define",ba:"NM_BLENDER_OBJECT",aa:["3"]},{$:"define",ba:"NM_BLENDER_WORLD",aa:["4"]},
{$:"define",ba:"BILLBOARD_ALIGN_VIEW",aa:["1"]},{$:"define",ba:"BILLBOARD_ALIGN_XY",aa:["2"]},{$:"define",ba:"BILLBOARD_ALIGN_YZ",aa:["3"]},{$:"define",ba:"BILLBOARD_ALIGN_ZX",aa:["4"]},{$:"define",ba:"POST_EFFECT_NONE",aa:["1"]},{$:"define",ba:"POST_EFFECT_GRAYSCALE",aa:["2"]},{$:"define",ba:"POST_EFFECT_BLUR",aa:["3"]},{$:"define",ba:"POST_EFFECT_GLOW_BLUR",aa:["4"]},{$:"define",ba:"POST_EFFECT_DOF_BLUR",aa:["5"]},{$:"define",ba:"POST_EFFECT_ALPHA_BLUR",aa:["6"]},{$:"define",ba:"POST_EFFECT_EXTEND",
aa:["7"]},{$:"define",ba:"FLIP_CUBEMAP_COORDS",aa:["8"]},{$:"define",ba:"BLUR_PASS_1",aa:["1"]},{$:"define",ba:"BLUR_PASS_2",aa:["2"]},{$:"define",ba:"BLUR_PASS_3",aa:["3"]},{$:"define",ba:"BLUR_PASS_4",aa:["4"]},{$:"define",ba:"BLUR_PASS_5",aa:["5"]},{$:"define",ba:"DV_NONE",aa:["0"]},{$:"define",ba:"DV_OPAQUE_WIREFRAME",aa:["1"]},{$:"define",ba:"DV_TRANSPARENT_WIREFRAME",aa:["2"]},{$:"define",ba:"DV_FRONT_BACK_VIEW",aa:["3"]},{$:"define",ba:"DV_BOUNDINGS",aa:["4"]},{$:"define",ba:"DV_CLUSTERS_VIEW",
aa:["5"]},{$:"define",ba:"DV_BATCHES_VIEW",aa:["6"]},{$:"define",ba:"DV_RENDER_TIME",aa:["7"]},{$:"define",ba:"SSAO_QUALITY_8",aa:["1"]},{$:"define",ba:"SSAO_QUALITY_16",aa:["2"]},{$:"define",ba:"SSAO_QUALITY_24",aa:["3"]},{$:"define",ba:"SSAO_QUALITY_32",aa:["4"]},{$:"define",ba:"AA_METHOD_FXAA_LIGHT",aa:["1"]},{$:"define",ba:"AA_METHOD_FXAA_QUALITY",aa:["2"]},{$:"define",ba:"AA_QUALITY_LOW",aa:["0"]},{$:"define",ba:"AA_QUALITY_MEDIUM",aa:["1"]},{$:"define",ba:"AA_QUALITY_HIGH",aa:["2"]},{$:"define",
ba:"SMAA_RESOLVE",aa:["25"]},{$:"define",ba:"SMAA_EDGE_DETECTION",aa:["24"]},{$:"define",ba:"SMAA_BLENDING_WEIGHT_CALCULATION",aa:["23"]},{$:"define",ba:"SMAA_NEIGHBORHOOD_BLENDING",aa:["26"]},{$:"define",ba:"AA_METHOD_SMAA_LOW",aa:["1"]},{$:"define",ba:"AA_METHOD_SMAA_MEDIUM",aa:["2"]},{$:"define",ba:"AA_METHOD_SMAA_HIGH",aa:["3"]},{$:"define",ba:"AA_METHOD_SMAA_ULTRA",aa:["4"]},{$:"define",ba:"REFL_PASS_NONE",aa:["0"]},{$:"define",ba:"REFL_PASS_PLANE",aa:["1"]},{$:"define",ba:"REFL_PASS_CUBE",aa:["2"]},
{$:"define",ba:"SRGB_NONE",aa:["0"]},{$:"define",ba:"SRGB_SIMPLE",aa:["1"]},{$:"define",ba:"SRGB_PROPER",aa:["2"]},{$:"define",ba:"CAM_TYPE_ORTHO",aa:["0"]},{$:"define",ba:"CAM_TYPE_PERSP",aa:["1"]},{$:"define",ba:"M_PI",aa:["3.14159265359"]},{$:"define",ba:"M_PI_4",aa:["0.785398163"]},{$:"define",ba:"INV_PI",aa:["0.318309886"]},{$:"define",ba:"UP_VECTOR",aa:"vec3 ( 0.0 , 0.0 , 1.0 )".split(" ")},{$:"define",ba:"RIGHT_VECTOR",aa:"vec3 ( 1.0 , 0.0 , 0.0 )".split(" ")},{$:"define",ba:"TOWARD_VECTOR",
aa:"vec3 ( 0.0 , - 1.0 , 0.0 )".split(" ")},{$:"cond",da:[{$:"if",ga:["CONSTANTS_HACK"],ha:{$:"grp",da:[{$:"txt",aa:"float _0_0 = 0.0 ; float _0_5 = 0.5 ; float _1_0 = 1.0 ; float _255_0 = 255.0 ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"define",ba:"_0_0",aa:["0.0"]},{$:"define",ba:"_0_5",aa:["0.5"]},{$:"define",ba:"_1_0",aa:["1.0"]},{$:"define",ba:"_255_0",aa:["255.0"]}]}}]}]}}]}]};d["include/to_world.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"TO_WORLD_GLSLV",ha:{$:"grp",da:[{$:"define",
ba:"TO_WORLD_GLSLV",aa:[""]},{$:"include",oa:"math.glslv"},{$:"var",ba:"BILLBOARD_ALIGN",aa:["BILLBOARD_ALIGN_VIEW"]},{$:"var",ba:"BILLBOARD_SPHERICAL",aa:["0"]},{$:"var",ba:"BILLBOARD_RANDOM",aa:["0"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"var",ba:"BILLBOARD_JITTERED",aa:["0"]},{$:"var",ba:"BILLBOARD_PRES_GLOB_ORIENTATION",aa:["0"]},{$:"var",ba:"STATIC_BATCH",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"define",ba:"MAX_BILLBOARD_ANGLE",aa:["M_PI_4"]},{$:"cond",da:[{$:"if",ga:["BILLBOARD_SPHERICAL",
"BILLBOARD",{$:"logic_negative_expr",ia:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"mat3 bj ( vec3 JY , mat3 N ) { vec4 JZ = vec4 ( N [ 1 ] [ 1 ] , N [ 1 ] [ 2 ] , N [ 2 ] [ 0 ] , N [ 2 ] [ 1 ] ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec4 J_ = X ( RIGHT_VECTOR , - M_PI / 2.0 ) ;".split(" ")}]}},{$:"else",
ha:{$:"grp",da:[{$:"txt",aa:"vec4 J_ = X ( RIGHT_VECTOR , M_PI / 2.0 ) ;".split(" ")}]}}]},{$:"txt",aa:"JZ = qX ( J_ , JZ ) ; JZ = kR ( JZ ) ; mat3 bk = da ( ) ; bk [ 0 ] = JY ; bk = dd ( JZ , bk ) ; return bk ; }".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat3 Kb ( vec3 lH , vec3 JY ) { vec3 Ka = lH - JY ; Ka . z = 0.0 ; Ka = normalize ( Ka ) ; vec4 JZ = rd ( Ka , TOWARD_VECTOR ) ; mat3 bk = da ( ) ; bk [ 0 ] = JY ; bk = dd ( JZ , bk ) ; return bk ; }".split(" ")}]}}]},{$:"cond",da:[{$:"if",
ga:["BILLBOARD_JITTERED"],ha:{$:"grp",da:[{$:"txt",aa:"mat3 at ( in vec3 Kc , float Kd , float Ke , float Kf , vec3 a_ , mat3 Z ) { float Ic = fract ( length ( a_ ) / 0.17 ) ; float Kg = Kf + Ic / 10.0 ; float Kh = Ic ; if ( Kf != 0.0 ) Kh /= Kf ; Kc *= 1.0 + 0.5 * sin ( Kd ) ; float Ki = length ( Kc ) * Ke * sin ( 2.0 * 3.14 * Kd * Kg + Kh ) ; vec4 Kj = X ( TOWARD_VECTOR , Ki ) ; vec4 Kk = vec4 ( Z [ 1 ] [ 1 ] , Z [ 1 ] [ 2 ] , Z [ 2 ] [ 0 ] , Z [ 2 ] [ 1 ] ) ; Kk = qX ( Kk , Kj ) ; Z = dd ( Kk , Z ) ; return Z ; }".split(" ")}]}}]},
{$:"txt",aa:"mat3 as ( in vec3 lH , in vec3 aq , in mat3 N , in mat3 Z ) {".split(" ")},{$:"cond",da:[{$:"if",ga:["BILLBOARD_SPHERICAL","BILLBOARD",{$:"logic_negative_expr",ia:1},"BILLBOARD_ALIGN","BILLBOARD_ALIGN_VIEW",{$:"equal_expr",ia:2},{$:"logical_and_expr",ia:2},{$:"logical_or_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"mat3 lW = bj ( aq , N ) ;".split(" ")}]}},{$:"elif",ga:["BILLBOARD_RANDOM"],ha:{$:"grp",da:[{$:"txt",aa:"float Ic = fract ( ( aq . x * 1.43 - aq . z * 0.123 + aq . y * 6.1 ) ) ; float Kl = 2.0 * M_PI * Ic ; vec4 Km = vec4 ( N [ 1 ] [ 1 ] , N [ 1 ] [ 2 ] , N [ 2 ] [ 0 ] , N [ 2 ] [ 1 ] ) ; float Kn = asin ( 2.0 * ( Km . x * Km . y - Km . z * Km . w ) ) ; float hu = Kn - Kl ; if ( hu < 0.0 ) hu = 2.0 * M_PI + hu ; float Ko = Kl ; if ( hu <= MAX_BILLBOARD_ANGLE ) Ko += hu ; else if ( hu <= M_PI - MAX_BILLBOARD_ANGLE ) Ko += MAX_BILLBOARD_ANGLE * ( 2.0 * hu - M_PI ) / ( 2.0 * MAX_BILLBOARD_ANGLE - M_PI ) ; else if ( hu <= M_PI + MAX_BILLBOARD_ANGLE ) Ko += hu - M_PI ; else if ( hu <= 2.0 * M_PI - MAX_BILLBOARD_ANGLE ) Ko += MAX_BILLBOARD_ANGLE * ( 2.0 * hu - M_PI ) / ( 2.0 * MAX_BILLBOARD_ANGLE - M_PI ) + M_PI ; else Ko += hu - 2.0 * M_PI ; vec4 Kp = X ( UP_VECTOR , Ko ) ; mat3 lW = da ( ) ; lW [ 0 ] = aq ; lW = dd ( Kp , lW ) ;".split(" ")}]}},
{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"mat3 lW = Kb ( lH , aq ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BILLBOARD_PRES_GLOB_ORIENTATION","STATIC_BATCH",{$:"logic_negative_expr",ia:1},{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"Z [ 0 ] = vec3 ( 0.0 , 0.0 , 0.0 ) ; lW = aY ( lW , Z ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"lW [ 1 ] [ 0 ] *= Z [ 1 ] [ 0 ] ;".split(" ")}]}}]},{$:"txt",aa:"return lW ; } au av ( in vec3 fn , in vec3 Kq , in vec3 Kr , in vec3 Ks , in vec3 Kt , in vec3 Ku , in mat3 Z ) { fn = ap ( Z , fn ) ; Kq = ap ( Z , Kq ) ; Kr = _ ( Z , Kr ) ; Ks = _ ( Z , Ks ) ; Kt = _ ( Z , Kt ) ; Ku = _ ( Z , Ku ) ; return lX ( au ( fn , Kq , Kr , Ks , Kt , Ku , vec3 ( 0.0 ) ) ) ; }".split(" ")}]}}]}]};
d["include/wind_bending.glslv"]={$:"grp",da:[{$:"cond",da:[{$:"ifndef",ba:"WIND_BENDING_GLSLV",ha:{$:"grp",da:[{$:"define",ba:"WIND_BENDING_GLSLV",aa:[""]},{$:"var",ba:"WIND_BEND",aa:["0"]},{$:"var",ba:"MAIN_BEND_COL",aa:["0"]},{$:"var",ba:"DETAIL_BEND",aa:["0"]},{$:"var",ba:"BEND_CENTER_ONLY",aa:["0"]},{$:"var",ba:"REFLECTION_PASS",aa:["REFL_PASS_NONE"]},{$:"var",ba:"BILLBOARD",aa:["0"]},{$:"include",oa:"std.glsl"},{$:"cond",da:[{$:"if",ga:["WIND_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"void KH ( inout vec3 bo , in vec3 Kv , in float Kw , in float Kx , in float fu , in vec3 Kc , in float Ky , in mat4 bV ) {".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 Kz = ( bV * vec4 ( bo , 1.0 ) ) . xyz ; vec3 KA = ( bV * vec4 ( Kv , 1.0 ) ) . xyz ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 Kz = bo ; vec3 KA = Kv ;".split(" ")}]}}]},{$:"txt",aa:"float dA = length ( KA ) ; float KB = Kx * ( 1.0 + 0.1 * fract ( dA ) ) ; float KC = Kw * Ky * ( 1.0 + sin ( 2.0 * 3.14 * fu * KB + dA ) ) ; float KD = ( Kz . z - KA . z ) * abs ( KC ) ; KD += 1.0 ; KD *= KD ; KD = KD * KD - KD ; vec3 KE = Kz ; KE . xy += Kc . xy * KD * sign ( KC ) ; vec3 KF = KE - KA ; if ( all ( equal ( KF , vec3 ( 0.0 ) ) ) ) bo = Kv ; else {".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"KF = ( bV * vec4 ( KF , 0.0 ) ) . xyz ;".split(" ")}]}}]},{$:"txt",aa:"float KG = length ( Kz - KA ) ; bo = Kv + normalize ( KF ) * KG ; } }".split(" ")},{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"vec4 KI ( vec4 x ) { return x * x * ( 3.0 - 2.0 * x ) ; } vec4 KJ ( vec4 x ) { return abs ( fract ( x + 0.5 ) * 2.0 - 1.0 ) ; } vec4 KK ( vec4 x ) { return KI ( KJ ( x ) ) ; } void KW ( inout vec3 bo , in float fu , in vec3 U , in vec3 Kc , in vec3 Kv , in float KL , in float KM , in float KN , in vec3 KO , in mat4 bV ) { float KP ; float KQ ; float KR ; vec2 KS ; vec4 KT ; vec2 KU ; vec3 KV ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"vec3 Kz = ( bV * vec4 ( bo , 1.0 ) ) . xyz ; vec3 KA = ( bV * vec4 ( Kv , 1.0 ) ) . xyz ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 Kz = bo ; vec3 KA = Kv ;".split(" ")}]}}]},{$:"txt",aa:"KP = dot ( KA , vec3 ( 1.0 ) ) ; KQ = KP + KO . g ; KR = dot ( Kz , vec3 ( KO . g ) ) ; KS = ( fu + vec2 ( KR , KQ ) ) ; KT = ( ( fract ( ( KS . xxyy * vec4 ( 1.975 , 0.793 , 0.375 , 0.193 ) ) ) * 2.0 ) - 1.0 ) * length ( Kc ) * KL ; KT = KK ( KT ) ; KU = KT . xz + KT . yw ; KU . y = 0.5 - KU . y ; KV = KU . xxy * KO . rrb * vec3 ( KM * U . x , KM * U . y , KN ) ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"KV = ( bV * vec4 ( KV , 0.0 ) ) . xyz ;".split(" ")}]}}]},{$:"txt",aa:["bo","+=","KV",";","}"]}]}}]},{$:"txt",aa:"void ax ( inout vec3 O , inout vec3 ao , in vec3 U , in mat4 bV ) { vec3 KX = u_wind * 1.0 + 0.7 * sin ( u_time ) ;".split(" ")},{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:"vec3 KY = ao ; vec3 KZ = a_emitter_center ;".split(" ")},
{$:"cond",da:[{$:"if",ga:["REFLECTION_PASS","REFL_PASS_PLANE",{$:"equal_expr",ia:2},"BILLBOARD",{$:"logical_and_expr",ia:2}],ha:{$:"grp",da:[{$:"txt",aa:"KZ = ( bV * vec4 ( KZ , 1.0 ) ) . xyz ;".split(" ")}]}}]}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"vec3 KY = O ; vec3 KZ = ao ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["MAIN_BEND_COL"],ha:{$:"grp",da:[{$:"cond",da:[{$:"if",ga:["DETAIL_BEND"],ha:{$:"grp",da:[{$:"txt",aa:"KW ( KY , u_time , U , KX , KZ , au_detail_bending_freq , au_detail_bending_amp , au_branch_bending_amp , a_bending_col_detail , bV ) ;".split(" ")}]}}]},
{$:"txt",aa:"KH ( KY , KZ , au_wind_bending_amp , au_wind_bending_freq , u_time , KX , a_bending_col_main , bV ) ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"KH ( KY , KZ , au_wind_bending_amp , au_wind_bending_freq , u_time , KX , 1.0 , bV ) ;".split(" ")}]}}]},{$:"cond",da:[{$:"if",ga:["BEND_CENTER_ONLY"],ha:{$:"grp",da:[{$:"txt",aa:"O += KY - ao ; ao = KY ;".split(" ")}]}},{$:"else",ha:{$:"grp",da:[{$:"txt",aa:"O = KY ; ao = KZ ;".split(" ")}]}}]},{$:"txt",aa:["}"]}]}}]}]}}]}]}}},function(E,
t){function d(d,f){var k=d[0],m=d[1],p=d[2],q=d[3],k=T(k,m,p,q,f[0],7,-680876936),q=T(q,k,m,p,f[1],12,-389564586),p=T(p,q,k,m,f[2],17,606105819),m=T(m,p,q,k,f[3],22,-1044525330),k=T(k,m,p,q,f[4],7,-176418897),q=T(q,k,m,p,f[5],12,1200080426),p=T(p,q,k,m,f[6],17,-1473231341),m=T(m,p,q,k,f[7],22,-45705983),k=T(k,m,p,q,f[8],7,1770035416),q=T(q,k,m,p,f[9],12,-1958414417),p=T(p,q,k,m,f[10],17,-42063),m=T(m,p,q,k,f[11],22,-1990404162),k=T(k,m,p,q,f[12],7,1804603682),q=T(q,k,m,p,f[13],12,-40341101),p=T(p,
q,k,m,f[14],17,-1502002290),m=T(m,p,q,k,f[15],22,1236535329),k=G(k,m,p,q,f[1],5,-165796510),q=G(q,k,m,p,f[6],9,-1069501632),p=G(p,q,k,m,f[11],14,643717713),m=G(m,p,q,k,f[0],20,-373897302),k=G(k,m,p,q,f[5],5,-701558691),q=G(q,k,m,p,f[10],9,38016083),p=G(p,q,k,m,f[15],14,-660478335),m=G(m,p,q,k,f[4],20,-405537848),k=G(k,m,p,q,f[9],5,568446438),q=G(q,k,m,p,f[14],9,-1019803690),p=G(p,q,k,m,f[3],14,-187363961),m=G(m,p,q,k,f[8],20,1163531501),k=G(k,m,p,q,f[13],5,-1444681467),q=G(q,k,m,p,f[2],9,-51403784),
p=G(p,q,k,m,f[7],14,1735328473),m=G(m,p,q,k,f[12],20,-1926607734),k=O(m^p^q,k,m,f[5],4,-378558),q=O(k^m^p,q,k,f[8],11,-2022574463),p=O(q^k^m,p,q,f[11],16,1839030562),m=O(p^q^k,m,p,f[14],23,-35309556),k=O(m^p^q,k,m,f[1],4,-1530992060),q=O(k^m^p,q,k,f[4],11,1272893353),p=O(q^k^m,p,q,f[7],16,-155497632),m=O(p^q^k,m,p,f[10],23,-1094730640),k=O(m^p^q,k,m,f[13],4,681279174),q=O(k^m^p,q,k,f[0],11,-358537222),p=O(q^k^m,p,q,f[3],16,-722521979),m=O(p^q^k,m,p,f[6],23,76029189),k=O(m^p^q,k,m,f[9],4,-640364487),
q=O(k^m^p,q,k,f[12],11,-421815835),p=O(q^k^m,p,q,f[15],16,530742520),m=O(p^q^k,m,p,f[2],23,-995338651),k=r(k,m,p,q,f[0],6,-198630844),q=r(q,k,m,p,f[7],10,1126891415),p=r(p,q,k,m,f[14],15,-1416354905),m=r(m,p,q,k,f[5],21,-57434055),k=r(k,m,p,q,f[12],6,1700485571),q=r(q,k,m,p,f[3],10,-1894986606),p=r(p,q,k,m,f[10],15,-1051523),m=r(m,p,q,k,f[1],21,-2054922799),k=r(k,m,p,q,f[8],6,1873313359),q=r(q,k,m,p,f[15],10,-30611744),p=r(p,q,k,m,f[6],15,-1560198380),m=r(m,p,q,k,f[13],21,1309151649),k=r(k,m,p,q,
f[4],6,-145523070),q=r(q,k,m,p,f[11],10,-1120210379),p=r(p,q,k,m,f[2],15,718787259),m=r(m,p,q,k,f[9],21,-343485551);d[0]=k+d[0]&4294967295;d[1]=m+d[1]&4294967295;d[2]=p+d[2]&4294967295;d[3]=q+d[3]&4294967295}function O(d,f,r,m,p,q){f=(f+d&4294967295)+(m+q&4294967295)&4294967295;return(f<<p|f>>>32-p)+r&4294967295}function T(d,f,r,m,p,q,b){return O(f&r|~f&m,d,f,p,q,b)}function G(d,f,r,m,p,q,b){return O(f&m|r&~m,d,f,p,q,b)}function r(d,f,r,m,p,q,b){return O(r^(f|~m),d,f,p,q,b)}t.a=function(k){var r=
k,x=r.length;k=[1732584193,-271733879,-1732584194,271733878];var m;for(m=64;m<=r.length;m+=64){var p,q=r.substring(m-64,m),b=[];for(p=0;64>p;p+=4)b[p>>2]=q.charCodeAt(p)+(q.charCodeAt(p+1)<<8)+(q.charCodeAt(p+2)<<16)+(q.charCodeAt(p+3)<<24);d(k,b)}r=r.substring(m-64);p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(m=0;m<r.length;m++)p[m>>2]|=r.charCodeAt(m)<<(m%4<<3);p[m>>2]|=128<<(m%4<<3);if(55<m)for(d(k,p),m=0;16>m;m++)p[m]=0;p[14]=8*x;d(k,p);for(r=0;r<k.length;r++){x=k[r];m="";for(p=0;4>p;p++)m+=f[x>>
8*p+4&15]+f[x>>8*p&15];k[r]=m}return k.join("")};var f="0123456789abcdef".split("")},function(E,t,d){E=d(0);var O=d(5),T=d(25),G=d(4),r=d(75),f=d(21),k=d(1),y=d(9),x=d(36),m=d(2),p=d(3),q=d(27),b=d(59),u=d(37);d=Object(E.a)("__reformer",function(d,l){function e(b){switch(b.type){case "VALTORGB":b.color_ramp||(b.color_ramp={elements:[{position:.5,color:[1,1,1,1]}]},a("node Color Ramp",b,"color_ramp"));break;case "CURVE_RGB":b.curve_mapping||(b.curve_mapping={curves_data:[[[0,0],[1,1]],[[0,0],[1,1]],
[[0,0],[1,1]],[[0,0],[1,1]]],curves_handle_types:["EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED"],curve_extend:[["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"]]},a("node RGB Curves",b,"curve_mapping"));break;case "CURVE_VEC":b.curve_mapping||(b.curve_mapping={curves_data:[[[0,0],[1,1]],[[0,0],[1,1]],[[0,0],[1,1]]],curves_handle_types:["EXTRAPOLATED","EXTRAPOLATED","EXTRAPOLATED"],curve_extend:[["AUTO","AUTO"],["AUTO","AUTO"],["AUTO","AUTO"]]},a("node Vector Curves",b,
"curve_mapping"));break;case "MAPPING":b.vector_type||(b.vector_type="POINT",a("node Mapping",b,"vector_type"));break;case "MATERIAL":case "MATERIAL_EXT":"alpha"in b||(b.alpha=1,a("node material",b,"alpha"));"darkness"in b||(b.darkness=1,a("node material",b,"darkness"));"diffuse_toon_size"in b||(b.diffuse_toon_size=.5,a("node material",b,"diffuse_toon_size"));"diffuse_toon_smooth"in b||(b.diffuse_toon_smooth=.1,a("node material",b,"diffuse_toon_smooth"));"diffuse_intensity"in b||(b.diffuse_intensity=
1,a("node material",b,"diffuse_intensity"));"use_tangent_shading"in b||(b.use_tangent_shading=!1,a("node material",b,"use_tangent_shading"));"specular_shader"in b||(b.specular_shader="COOKTORR",a("node material",b,"specular_shader"));"specular_ior"in b||(b.specular_ior=4,a("node material",b,"specular_ior"));"specular_hardness"in b||(b.specular_hardness=50,a("node material",b,"specular_hardness"));"specular_slope"in b||(b.specular_slope=.1,a("node material",b,"specular_slope"));"specular_toon_size"in
b||(b.specular_toon_size=.5,a("node material",b,"specular_toon_size"));"specular_toon_smooth"in b||(b.specular_toon_smooth=.1,a("node material",b,"specular_toon_smooth"));"specular_intensity"in b||(b.specular_intensity=.5,a("node material",b,"specular_intensity"));"diffuse_shader"in b||(b.diffuse_shader="LAMBERT",a("node material",b,"diffuse_shader"));"roughness"in b||(b.roughness=.5,a("node material",b,"roughness"));"diffuse_fresnel"in b||(b.diffuse_fresnel=.1,a("node material",b,"diffuse_fresnel"));
"diffuse_fresnel_factor"in b||(b.diffuse_fresnel_factor=.5,a("node material",b,"diffuse_fresnel_factor"));break;case "MATH":case "MIX_RGB":"use_clamp"in b||(b.use_clamp=!1,a("node "+b.type,b,"use_clamp"));break;case "GROUP":b.node_tree_name=b.node_tree_name.replace(/\.[0-9]{3,}$/g,"");switch(b.node_tree_name){case "CLAMP":case "LEVELS_OF_QUALITY":case "LINEAR_TO_SRGB":case "NORMAL_VIEW":case "PARALLAX":case "REFLECT":case "REFRACTION":case "REPLACE":case "SMOOTHSTEP":case "SRGB_TO_LINEAR":case "TIME":case "TRANSLUCENCY":case "VECTOR_VIEW":b.node_tree_name=
"B4W_"+b.node_tree_name}break;case "VECT_TRANSFORM":"convert_from"in b||(b.convert_from="WORLD",a("node "+b.type,b,"convert_from"));"convert_to"in b||(b.convert_to="WORLD",a("node "+b.type,b,"convert_to"));"vector_type"in b||(b.vector_type="POINT",a("node "+b.type,b,"vector_type"));break;case "ATTRIBUTE":b.color_layer="";break;case "BSDF_TRANSPARENT":"b4w_use_alpha"in b||(b.b4w_use_alpha=!1,a("node "+b.type,b,"b4w_use_alpha"))}}function c(b){if(b=b.nla_tracks)for(var c=0;c<b.length;c++)for(var e=
b[c],d=0;d<e.strips.length;d++){var f=e.strips[d];"action"in f||(f.action=null,a("strip",f,"action"));"action_frame_start"in f||(f.action_frame_start=0,a("strip",f,"action_frame_start"));"action_frame_end"in f||(f.action_frame_end=f.frame_end-f.frame_start,a("strip",f,"action_frame_end"));"repeat"in f||(f.repeat=1,a("strip",f,"repeat"));"use_reverse"in f||(f.use_reverse=!1,a("strip",f,"use_reverse"));"scale"in f||(f.scale=1,a("strip",f,"scale"))}}function a(a,b,c){c=c+">>"+a;c in K||(K[c]={Dx:[],
vH:"undefined",type:a});K[c].Dx.push(b.name)}function h(a,b,c){c=c+">>"+a;c in K||(K[c]={Dx:[],vH:"deprecated",type:a});K[c].Dx.push(b.name)}function t(a){I.warn(a)}function v(a,b){b||(b=a.name+"_COPY");var c=a.materials,e=a.submeshes;a.materials=null;a.submeshes=null;var d=m.O(a);a.materials=c;a.submeshes=e;d.name=b;d.materials=a.materials.slice(0);d.submeshes=[];for(c=0;c<e.length;c++){var f=m.N(e[c]);d.submeshes.push(f)}return d}function B(a,b,c){if(1<c){for(var e=a.length/c,d=b.length/c,f=new Float32Array(a.length+
b.length),g=0,h=0;h<c;h++)f.set(a.subarray(e*h,e*(h+1)),g),g+=e,f.set(b.subarray(d*h,d*(h+1)),g),g+=d;return f}return m._2(a,b)}var C=Object(O.a)(d),L=Object(G.a)(d),H=Object(r.a)(d),I=Object(k.a)(d),E=Object(b.a)(d),N=Object(u.a)(d),U=L.wa,K={},D=q.create(),R=x.c(),V=y.create();l.LM=function(b){K={};var d=b.worlds;if(0==d.length){I.warn('WARNING Datablock world is missing, reexport "'+b.b4w_filepath_blend+'" scene');var f={name:"DEFAULT",horizon_color:new Float32Array([0,0,0]),zenith_color:new Float32Array([0,
0,0]),light_settings:{use_environment_light:!1,environment_energy:1,environment_color:"PLAIN"},fog_settings:{use_fog:!1,intensity:0,depth:25,start:5,height:0,falloff:"INVERSE_QUADRATIC",use_custom_color:!0,color:[.5,.5,.5]},use_sky_paper:!1,use_sky_blend:!1,use_sky_real:!1,use_nodes:!1,node_tree:null,texture_slots:[]};d.push(f)}for(var k=0;k<d.length;k++){f=d[k];"use_sky_blend"in f||(a("world",f,"use_sky_blend"),f.use_sky_blend=!1);"use_sky_paper"in f||(a("world",f,"use_sky_paper"),f.use_sky_paper=
!1);"use_sky_real"in f||(a("world",f,"use_sky_real"),f.use_sky_real=!1);"b4w_sky_settings"in f&&"rayleigh_brightness"in f.b4w_sky_settings||(a("world",f,"rayleigh_brightness"),f.b4w_sky_settings={render_sky:!1,procedural_skydome:!1,use_as_enviroment_map:!1,color:[.24,.43,.75],rayleigh_brightness:3.3,mie_brightness:.1,spot_brightness:10,scatter_strength:.2,rayleigh_strength:.2,mie_strength:.006,rayleigh_collection_power:.5,mie_collection_power:.5,mie_distribution:.4});"fog_settings"in f||(a("world",
f,"fog_settings"),f.fog_settings={use_fog:!1,intensity:0,depth:25,start:0,height:0,falloff:"QUADRATIC",use_custom_color:!0,color:[.5,.5,.5]},"b4w_fog_color"in f&&(f.fog_settings.use_custom_color=!0,f.fog_settings.color=f.b4w_fog_color),"b4w_fog_density"in f&&0<f.b4w_fog_density&&(f.fog_settings.depth=1/f.b4w_fog_density));"render_sky"in f.b4w_sky_settings||(a("world",f,"render_sky"),f.b4w_sky_settings.render_sky=!1);for(var l=f.texture_slots,n=0;n<l.length;n++){var g=l[n];"blend_type"in g||(g.blend_type=
"MIX",a("world_texture_slot",g,"blend_type"));"use_map_blend"in g||(g.use_map_blend=!1,a("world_texture_slot",g,"use_map_blend"));"use_map_horizon"in g||(g.use_map_horizon=!0,a("world_texture_slot",g,"use_map_horizon"));"use_map_zenith_up"in g||(g.use_map_zenith_up=!1,a("world_texture_slot",g,"use_map_zenith_up"));"use_rgb_to_intensity"in g||(g.use_rgb_to_intensity=!1,a("world_texture_slot",g,"use_rgb_to_intensity"));"invert"in g||(g.invert=!1,a("world_texture_slot",g,"invert"));"color"in g||(g.color=
[1,0,1],a("world_texture_slot",g,"color"));"blend_factor"in g||(g.blend_factor=0,a("world_texture_slot",g,"blend_factor"));"horizon_factor"in g||(g.horizon_factor=1,a("world_texture_slot",g,"horizon_factor"));"zenith_up_factor"in g||(g.zenith_up_factor=0,a("world_texture_slot",g,"zenith_up_factor"));"zenith_down_factor"in g||(g.zenith_down_factor=0,a("world_texture_slot",g,"zenith_down_factor"));"default_value"in g||(g.default_value=1,a("world_texture_slot",g,"default_value"))}"b4w_use_default_animation"in
f||(a("world",f,"b4w_use_default_animation"),f.b4w_use_default_animation=!1);"b4w_anim_behavior"in f||(a("world",f,"b4w_anim_behavior"),f.b4w_anim_behavior="CYCLIC")}l=b.scenes;for(k=0;k<l.length;k++)g=l[k],n=g.world,"timeline_markers"in g||(g.timeline_markers=null,a("scene",g,"timeline_markers")),"boolean"==typeof g.b4w_enable_physics&&(g.b4w_enable_physics="AUTO"),"b4w_reflection_quality"in g||(g.b4w_reflection_quality="MEDIUM",a("scene",g,"b4w_reflection_quality")),"b4w_use_nla"in g||(g.b4w_use_nla=
!1,a("scene",g,"b4w_use_nla")),"fps"in g||(g.fps=24,a("scene",g,"fps")),"b4w_nla_cyclic"in g||(g.b4w_nla_cyclic=!1,a("scene",g,"b4w_nla_cyclic")),"b4w_logic_nodes"in g||(g.b4w_logic_nodes=[],a("scene",g,"b4w_logic_nodes")),"b4w_detect_collisions"in g&&(h("scene",g,"b4w_detect_collisions"),delete g.b4w_detect_collisions),"audio_doppler_speed"in g||(g.audio_doppler_speed=343.3),"audio_doppler_factor"in g||(g.audio_doppler_factor=1),"b4w_dynamic_compressor_settings"in g||(g.b4w_dynamic_compressor_settings=
{threshold:-24,knee:30,ratio:12,attack:.003,release:.25},a("scene",g,"b4w_dynamic_compressor_settings")),"b4w_enable_convolution_engine"in g||(g.b4w_enable_convolution_engine=!1),"b4w_enable_bloom"in g||(g.b4w_enable_bloom=!1,a("scene",g,"b4w_enable_bloom")),"b4w_enable_motion_blur"in g||(g.b4w_enable_motion_blur=!1,a("scene",g,"b4w_enable_motion_blur")),"b4w_enable_color_correction"in g||(g.b4w_enable_color_correction=!1,a("scene",g,"b4w_enable_color_correction")),"b4w_antialiasing_quality"in g||
(g.b4w_antialiasing_quality="MEDIUM",a("scene",g,"b4w_antialiasing_quality")),"b4w_tags"in g||(g.b4w_tags={title:"",description:""},a("scene",g,"b4w_tags")),"b4w_lod_smooth_type"in g||(g.b4w_lod_smooth_type="OFF",a("scene",g,"b4w_lod_smooth_type")),"b4w_lod_hyst_interval"in g||(g.b4w_lod_hyst_interval=0,a("scene",g,"b4w_lod_hyst_interval")),"b4w_enable_object_selection"in g||(g.b4w_enable_object_selection="AUTO",a("scene",g,"b4w_enable_object_selection")),"b4w_enable_outlining"in g||(g.b4w_enable_outlining=
"AUTO",a("scene",g,"b4w_enable_outlining")),"b4w_enable_glow_materials"in g||(g.b4w_enable_glow_materials="AUTO",a("scene",g,"b4w_enable_glow_materials")),"b4w_enable_anchors_visibility"in g||(g.b4w_enable_anchors_visibility="AUTO",a("scene",g,"b4w_enable_anchors_visibility")),"b4w_outline_color"in g||(g.b4w_outline_color=[1,1,1],a("scene",g,"b4w_outline_color")),"b4w_outline_factor"in g||(g.b4w_outline_factor="b4w_glow_factor"in g?g.b4w_glow_factor:1,a("scene",g,"b4w_outline_factor")),"b4w_shadow_settings"in
g||(a("scene",g,"b4w_shadow_settings"),d=n.b4w_shadow_settings,g.b4w_shadow_settings=d?d:{csm_resolution:2048,blur_samples:"16x",self_shadow_polygon_offset:1,b4w_enable_csm:!1,csm_num:1,csm_first_cascade_border:10,first_cascade_blur_radius:3,csm_last_cascade_border:100,last_cascade_blur_radius:1.5,fade_last_cascade:!0,blend_between_cascades:!0}),d=g.b4w_shadow_settings,"csm_resolution"in d||(a("scene",g,"b4w_shadow_settings.csm_resolution"),d.csm_resolution=2048),"blur_samples"in d||(a("scene",g,
"b4w_shadow_settings.blur_samples"),d.blur_samples="16x"),"soft_shadows"in d||(a("scene",g,"b4w_shadow_settings.soft_shadows"),d.soft_shadows=!0),"self_shadow_polygon_offset"in d||(a("scene",g,"b4w_shadow_settings.self_shadow_polygon_offset"),d.self_shadow_polygon_offset=1),"self_shadow_normal_offset"in d||(a("scene",g,"b4w_shadow_settings.self_shadow_normal_offset"),d.self_shadow_normal_offset=.01),"b4w_enable_csm"in d||(a("scene",g,"b4w_shadow_settings.b4w_enable_csm"),d.b4w_enable_csm=!1),"csm_num"in
d||(a("scene",g,"b4w_shadow_settings.csm_num"),d.csm_num=1),"csm_first_cascade_border"in d||(a("scene",g,"b4w_shadow_settings.csm_first_cascade_border"),d.csm_first_cascade_border=10),"first_cascade_blur_radius"in d||(a("scene",g,"b4w_shadow_settings.first_cascade_blur_radius"),d.first_cascade_blur_radius=3),"csm_last_cascade_border"in d||(a("scene",g,"b4w_shadow_settings.csm_last_cascade_border"),d.csm_last_cascade_border=100),"last_cascade_blur_radius"in d||(a("scene",g,"b4w_shadow_settings.last_cascade_blur_radius"),
d.last_cascade_blur_radius=1.5),"fade_last_cascade"in d||(a("scene",g,"b4w_shadow_settings.fade_last_cascade"),d.fade_last_cascade=!0),"blend_between_cascades"in d||(a("scene",g,"b4w_shadow_settings.blend_between_cascades"),d.blend_between_cascades=!0),"b4w_ssao_settings"in g||(a("scene",g,"b4w_ssao_settings"),d=n.b4w_ssao_settings,g.b4w_ssao_settings=d?d:{dist_factor:0,samples:16,hemisphere:!1,blur_depth:!1,blur_discard_value:1}),d=g.b4w_ssao_settings,"dist_factor"in d||(a("scene",g,"b4w_ssao_settings.dist_factor"),
d.dist_factor=0),"samples"in d||(a("scene",g,"b4w_ssao_settings.samples"),d.samples=16),"hemisphere"in d||(a("scene",g,"b4w_ssao_settings.hemisphere"),d.hemisphere=!1),"blur_depth"in d||(a("scene",g,"b4w_ssao_settings.blur_depth"),d.blur_depth=!1),"blur_discard_value"in d||(a("scene",g,"b4w_ssao_settings.blur_discard_value"),d.blur_discard_value=1),"b4w_bloom_settings"in g||(a("scene",g,"b4w_bloom_settings"),d=n.b4w_bloom_settings,g.b4w_bloom_settings=d?d:{key:.2,blur:4,edge_lum:1}),"key"in g.b4w_bloom_settings||
(a("scene",g,"b4w_bloom_settings.key"),g.b4w_bloom_settings.key=.2),"blur"in g.b4w_bloom_settings||(a("scene",g,"b4w_bloom_settings.blur"),g.b4w_bloom_settings.blur=4),"edge_lum"in g.b4w_bloom_settings||(a("scene",g,"b4w_bloom_settings.edge_lum"),g.b4w_bloom_settings.edge_lum=1),"adaptive"in g.b4w_bloom_settings||(a("scene",g,"b4w_bloom_settings.adaptive"),g.b4w_bloom_settings.adaptive=!0),"average_luminance"in g.b4w_bloom_settings||(a("scene",g,"b4w_bloom_settings.average_luminance"),g.b4w_bloom_settings.average_luminance=
.5),"b4w_motion_blur_settings"in g||(a("scene",g,"b4w_motion_blur_settings"),d=n.b4w_motion_blur_settings,g.b4w_motion_blur_settings=d?d:{motion_blur_factor:.01,motion_blur_decay_threshold:.01}),"motion_blur_factor"in g.b4w_motion_blur_settings||(a("scene",g,"b4w_motion_blur_settings.motion_blur_factor"),g.b4w_motion_blur_settings.motion_blur_factor=.01),"motion_blur_decay_threshold"in g.b4w_motion_blur_settings||(a("scene",g,"b4w_motion_blur_settings.motion_blur_decay_threshold"),g.b4w_motion_blur_settings.motion_blur_decay_threshold=
.01),"b4w_color_correction_settings"in g||(a("scene",g,"b4w_color_correction_settings"),d=n.b4w_color_correction_settings,g.b4w_color_correction_settings=d?d:{brightness:0,contrast:0,exposure:1,saturation:1}),"b4w_god_rays_settings"in g||(a("scene",g,"b4w_god_rays_settings"),d=n.b4w_god_rays_settings,g.b4w_god_rays_settings=d?d:{intensity:.7,max_ray_length:1,steps_per_pass:10}),"steps_per_pass"in g.b4w_god_rays_settings||(a("scene",g,"b4w_god_rays_settings.steps_per_pass"),g.b4w_god_rays_settings.steps_per_pass=
10),"b4w_glow_settings"in g||(a("scene",g,"b4w_glow_settings"),g.b4w_glow_settings={render_glow_over_blend:!1,small_glow_mask_coeff:2,large_glow_mask_coeff:2,small_glow_mask_width:2,large_glow_mask_width:6},d=g.b4w_glow_settings,"b4w_render_glow_over_blend"in n&&(d.render_glow_over_blend=n.b4w_render_glow_over_blend),"b4w_small_glow_mask_coeff"in n&&(d.small_glow_mask_coeff=n.b4w_small_glow_mask_coeff),"b4w_large_glow_mask_coeff"in n&&(d.large_glow_mask_coeff=n.b4w_large_glow_mask_coeff),"b4w_small_glow_mask_width"in
n&&(d.small_glow_mask_width=n.b4w_small_glow_mask_width),"b4w_large_glow_mask_width"in n&&(d.large_glow_mask_width=n.b4w_large_glow_mask_width)),n=g.b4w_render_shadows,"AUTO"!=n&&"OFF"!=n&&"ON"!=n&&(g.b4w_render_shadows=n?"ON":"OFF"),n=g.b4w_render_reflections,"OFF"!=n&&"ON"!=n&&(g.b4w_render_reflections=n?"ON":"OFF"),n=g.b4w_render_refractions,"AUTO"!=n&&"OFF"!=n&&"ON"!=n&&(g.b4w_render_refractions=n?"ON":"OFF"),"b4w_render_dynamic_grass"in g||(a("scene",g,"b4w_render_dynamic_grass"),g.b4w_render_dynamic_grass=
"AUTO"),g.b4w_nla_script&&h("scene",g,"b4w_nla_script"),"audio_distance_model"in g||(a("scene",g,"audio_distance_model"),g.audio_distance_model="INVERSE_CLAMPED"),"b4w_custom_prop"in g||(a("scene",g,"b4w_custom_prop"),g.b4w_custom_prop=null);l=b.meshes;for(k=0;k<l.length;k++){g=l[k];g.b4w_boundings||(a("mesh",g,"b4w_boundings"),g.b4w_boundings={},d=g.b4w_boundings,d.bb=g.b4w_bounding_box?g.b4w_bounding_box:{max_x:0,max_y:0,max_z:0,min_x:0,min_y:0,min_z:0},d.bb_src=g.b4w_bounding_box_source?g.b4w_bounding_box_source:
g.b4w_bounding_box,d.bs_cen=g.b4w_bounding_sphere_center?g.b4w_bounding_sphere_center:[0,0,0],d.bc_cen=g.b4w_bounding_cylinder_center?g.b4w_bounding_cylinder_center:[0,0,0],d.be_cen=g.b4w_bounding_ellipsoid_center?g.b4w_bounding_ellipsoid_center:[0,0,0],g.b4w_bounding_ellipsoid_axes?d.be_ax=g.b4w_bounding_ellipsoid_axes:(n=d.bb,d.be_ax=[(n.max_x-n.min_x)/2,(n.max_y-n.min_y)/2,(n.max_z-n.min_z)/2]),g.b4w_rotated_bounding_box?d.rbb=g.b4w_rotated_bounding_box:(n=d.bb,d.rbb={rbb_c:[(n.max_x+n.min_x)/
2,(n.max_y+n.min_y)/2,(n.max_z+n.min_z)/2],rbb_s:[1,1,1]}),d.caxis_x=g.b4w_cov_axis_x?g.b4w_cov_axis_x:[1,0,0],d.caxis_y=g.b4w_cov_axis_y?g.b4w_cov_axis_y:[0,1,0],d.caxis_z=g.b4w_cov_axis_z?g.b4w_cov_axis_z:[0,0,1]);"is_boundings_overridden"in g||(a("mesh",g,"is_boundings_overridden"),g.is_boundings_overridden=!1);"b4w_shape_keys"in g||(g.b4w_shape_keys=[],a("mesh",g,"b4w_shape_keys"));d=!0;for(f=0;f<g.submeshes.length;f++){var p=g.submeshes[f];"boundings"in p||(d=!1,p.boundings={be_ax:g.b4w_bounding_ellipsoid_axes,
be_cen:g.b4w_bounding_ellipsoid_center,bb:{max_x:g.b4w_bounding_box.max_x,max_y:g.b4w_bounding_box.max_y,max_z:g.b4w_bounding_box.max_z,min_x:g.b4w_bounding_box.min_x,min_y:g.b4w_bounding_box.min_y,min_z:g.b4w_bounding_box.min_z}});"uv_layers"in p||(a("submesh",g,"uv_layers"),p.uv_layers=g.uv_textures);"be_ax"in p.boundings||(p.boundings.be_ax=g.b4w_bounding_ellipsoid_axes);"be_cen"in p.boundings||(p.boundings.be_cen=g.b4w_bounding_ellipsoid_center);"bb"in p.boundings||(p.boundings.bb=g.b4w_bounding_box);
"rbb"in p.boundings||(n=g.b4w_bounding_box,p.boundings.rbb={rbb_c:[(n.max_x+n.min_x)/2,(n.max_y+n.min_y)/2,(n.max_z+n.min_z)/2],rbb_s:[1,1,1]});"caxis_x"in p.boundings||(p.boundings.caxis_x=[1,0,0]);"caxis_y"in p.boundings||(p.boundings.caxis_y=[0,1,0]);"caxis_z"in p.boundings||(p.boundings.caxis_z=[0,0,1])}d||a("mesh",g,"submesh_bd");n=g;d=["b4w_apply_scale","b4w_apply_modifiers","b4w_export_edited_normals","b4w_loc_export_vertex_anim","b4w_shape_keys"];f=null;for(p=0;p<d.length;p++)n[d[p]]&&(f?
(n[d[p]]=!1,I.warn('WARNING property "'+d[p]+'" of object "'+n.name+'" has been set to "false". Foreground property "'+f+'" already exists.')):f=d[p]);for(n=0;n<g.b4w_vertex_anim.length;n++)d=g.b4w_vertex_anim[n],"allow_nla"in d||(a('mesh["b4w_vertex_anim"]',g,"allow_nla"),d.allow_nla=!0);"active_uv_name"in g||(a("mesh",g,"active_uv_name"),g.active_uv_name="")}l=b.cameras;for(k=0;k<l.length;k++)g=l[k],g.type||(g.type="PERSP",a("camera",g,"type")),"b4w_eye_target_dist"in g&&(delete g.b4w_eye_target_dist,
h("camera",g,"b4w_eye_target_dist")),"b4w_hover_zero_level"in g||(g.b4w_hover_zero_level=0,a("camera",g,"b4w_hover_zero_level")),"b4w_trans_velocity"in g||(g.b4w_trans_velocity=1,a("camera",g,"b4w_trans_velocity")),"b4w_rot_velocity"in g||(g.b4w_rot_velocity=1,a("camera",g,"b4w_rot_velocity")),"b4w_zoom_velocity"in g||(g.b4w_zoom_velocity=.1,a("camera",g,"b4w_zoom_velocity")),"b4w_use_target_distance_limits"in g||(g.b4w_use_target_distance_limits=g.b4w_use_distance_limits||!1,a("camera",g,"b4w_use_target_distance_limits")),
"b4w_use_zooming"in g||(g.b4w_use_zooming=g.b4w_use_distance_limits||!1,a("camera",g,"b4w_use_zooming")),"b4w_distance_min"in g||(g.b4w_distance_min=1,a("camera",g,"b4w_distance_min")),"b4w_distance_max"in g||(g.b4w_distance_max=100,a("camera",g,"b4w_distance_max")),"b4w_horizontal_translation_min"in g||(g.b4w_horizontal_translation_min=-100,a("camera",g,"b4w_horizontal_translation_min")),"b4w_horizontal_translation_max"in g||(g.b4w_horizontal_translation_max=100,a("camera",g,"b4w_horizontal_translation_max")),
"b4w_vertical_translation_min"in g||(g.b4w_vertical_translation_min=-100,a("camera",g,"b4w_vertical_translation_min")),"b4w_vertical_translation_max"in g||(g.b4w_vertical_translation_max=100,a("camera",g,"b4w_vertical_translation_max")),"b4w_use_horizontal_clamping"in g||(g.b4w_use_horizontal_clamping=!1,a("camera",g,"b4w_use_horizontal_clamping")),"b4w_rotation_left_limit"in g||(g.b4w_rotation_left_limit=-Math.PI,a("camera",g,"b4w_rotation_left_limit")),"b4w_rotation_right_limit"in g||(g.b4w_rotation_right_limit=
Math.PI,a("camera",g,"b4w_rotation_right_limit")),"b4w_horizontal_clamping_type"in g||(g.b4w_horizontal_clamping_type="LOCAL",a("camera",g,"b4w_horizontal_clamping_type")),"b4w_use_vertical_clamping"in g||(g.b4w_use_vertical_clamping=!1,a("camera",g,"b4w_use_vertical_clamping")),"b4w_rotation_down_limit"in g||(g.b4w_rotation_down_limit=-Math.PI/2,a("camera",g,"b4w_rotation_down_limit")),"b4w_rotation_up_limit"in g||(g.b4w_rotation_up_limit=Math.PI/2,a("camera",g,"b4w_rotation_up_limit")),"b4w_vertical_clamping_type"in
g||(g.b4w_vertical_clamping_type="LOCAL",a("camera",g,"b4w_vertical_clamping_type")),"b4w_hover_angle_min"in g||(g.b4w_hover_angle_min=Math.PI/6,a("camera",g,"b4w_hover_angle_min")),"b4w_hover_angle_max"in g||(g.b4w_hover_angle_max=Math.PI/6,a("camera",g,"b4w_hover_angle_max")),"b4w_enable_hover_hor_rotation"in g||(g.b4w_enable_hover_hor_rotation=!0,a("camera",g,"b4w_enable_hover_hor_rotation")),"b4w_use_panning"in g||(g.b4w_use_panning=!0,a("camera",g,"b4w_use_panning")),"b4w_use_pivot_limits"in
g||(g.b4w_use_pivot_limits=!1,g.b4w_pivot_z_min=0,g.b4w_pivot_z_max=10,a("camera",g,"b4w_use_pivot_limits")),"b4w_dof_bokeh"in g||(g.b4w_dof_bokeh=!1,a("camera",g,"b4w_dof_bokeh")),"b4w_dof_bokeh_intensity"in g||(g.b4w_dof_bokeh_intensity=.3,a("camera",g,"b4w_dof_bokeh_intensity")),"b4w_dof_foreground_blur"in g||(g.b4w_dof_foreground_blur=!1,a("camera",g,"b4w_dof_foreground_blur")),"b4w_dof_front_start"in g||(g.b4w_dof_front_start=0,a("camera",g,"b4w_dof_front_start")),"b4w_dof_front_end"in g||(g.b4w_dof_front_end=
g.b4w_dof_front,a("camera",g,"b4w_dof_front_end")),"b4w_dof_rear_start"in g||(g.b4w_dof_rear_start=0,a("camera",g,"b4w_dof_rear_start")),"b4w_dof_rear_end"in g||(g.b4w_dof_rear_end=g.b4w_dof_rear,a("camera",g,"b4w_dof_rear_end")),"sensor_fit"in g||(g.sensor_fit="VERTICAL",a("camera",g,"sensor_fit"));l=b.lamps;for(k=0;k<l.length;k++)if(g=l[k],"b4w_generate_shadows"in g||(g.b4w_generate_shadows=!1,a("lamp",g,"b4w_generate_shadows")),"b4w_dynamic_intensity"in g||(g.b4w_dynamic_intensity=!1,a("lamp",
g,"b4w_dynamic_intensity")),"use_diffuse"in g||(g.use_diffuse=!0,a("lamp",g,"use_diffuse")),"use_specular"in g||(g.use_specular=!0,a("lamp",g,"use_specular")),"clip_start"in g||(g.clip_start=.1,a("lamp",g,"clip_start")),"clip_end"in g||(g.clip_end=30,a("lamp",g,"clip_end")),"POINT"==g.type||"SPOT"==g.type)"use_sphere"in g||(g.use_sphere=!1,a("lamp",g,"use_sphere")),U.FG&&(g.type="SUN");l=b.speakers;for(k=0;k<l.length;k++)g=l[k],"b4w_behavior"in g||(g.b4w_behavior=g.b4w_background_music?"BACKGROUND_SOUND":
"POSITIONAL"),"b4w_auto_play"in g||(g.b4w_auto_play=!1,a("speaker",g,"b4w_auto_play")),"b4w_enable_doppler"in g||(g.b4w_enable_doppler=!1,a("speaker",g,"b4w_enable_doppler")),"b4w_delay"in g||(g.b4w_delay=0),"b4w_delay_random"in g||(g.b4w_delay_random=0),"b4w_volume_random"in g||(g.b4w_volume_random=0),"b4w_pitch_random"in g||(g.b4w_pitch_random=0),"b4w_fade_in"in g||(g.b4w_fade_in=0),"b4w_fade_out"in g||(g.b4w_fade_out=0),"b4w_loop"in g||(g.b4w_loop=!1),"b4w_loop_start"in g||(g.b4w_loop_start=0,
a("speaker",g,"b4w_loop_start")),"b4w_loop_end"in g||(g.b4w_loop_end=0,a("speaker",g,"b4w_loop_end")),g.animation_data&&c(g.animation_data);l=b.textures;for(k=0;k<l.length;k++)g=l[k],"b4w_anisotropic_filtering"in g||(g.b4w_anisotropic_filtering="OFF",a("texture",g,"b4w_anisotropic_filtering")),"b4w_water_foam"in g||(g.b4w_water_foam=!1,a("texture",g,"b4w_water_foam")),"b4w_foam_uv_freq"in g||(g.b4w_foam_uv_freq=[1,1],a("texture",g,"b4w_foam_uv_freq")),"b4w_foam_uv_magnitude"in g||(g.b4w_foam_uv_magnitude=
[1,1],a("texture",g,"b4w_foam_uv_magnitude")),"b4w_parallax_steps"in g||(g.b4w_parallax_steps=5,a("material",g,"b4w_parallax_steps")),"b4w_parallax_lod_dist"in g||(g.b4w_parallax_lod_dist=10,a("material",g,"b4w_parallax_lod_dist")),"b4w_shore_dist_map"in g||(g.b4w_shore_dist_map=!1,a("texture",g,"b4w_shore_dist_map")),"b4w_shore_boundings"in g||(g.b4w_shore_boundings=[1E3,-1E3,1E3,-1E3],a("texture",g,"b4w_shore_boundings")),"b4w_max_shore_dist"in g||(g.b4w_max_shore_dist=100,a("texture",g,"b4w_max_shore_dist")),
"b4w_disable_compression"in g||(g.b4w_disable_compression=!1,a("texture",g,"b4w_disable_compression")),"b4w_source_type"in g||(g.b4w_source_type="",a("texture",g,"b4w_source_type")),"b4w_source_id"in g||(g.b4w_source_id="",a("texture",g,"b4w_source_id")),"b4w_source_size"in g||(g.b4w_source_size=1024,a("texture",g,"b4w_source_size")),"b4w_enable_canvas_mipmapping"in g||(g.b4w_enable_canvas_mipmapping=!0,a("texture",g,"b4w_enable_canvas_mipmapping")),"b4w_nla_video"in g||(g.b4w_nla_video=!1,a("texture",
g,"b4w_nla_video"));l=b.images;for(k=0;k<l.length;k++)g=l[k],"colorspace_settings_name"in g||(g.colorspace_settings_name="sRGB",a("image",g,"colorspace_settings_name"));d=b.materials;for(k=0;k<d.length;k++){f=d[k];"ALPHA_ANTIALIASING"==f.game_settings.alpha_blend&&(U.GG?f.game_settings.alpha_blend="CLIP":2>U.Jc&&(I.warn('Material "'+f.name+'" has the "Alpha Anti-Aliasing" transparency type, but multisampling is disabled. Changed to "Alpha Clip".'),f.game_settings.alpha_blend="CLIP"));"use_tangent_shading"in
f||(f.use_tangent_shading=!1,a("material",f,"use_tangent_shading"));"b4w_node_mat_type"in f&&h("material",f,"b4w_node_mat_type");"b4w_skydome"in f&&h("material",f,"b4w_skydome");"b4w_procedural_skydome"in f&&h("material",f,"b4w_procedural_skydome");"b4w_lens_flares"in f||(f.b4w_lens_flares=!1,a("material",f,"b4w_lens_flares"));"LENS_FLARES"===f.name&&(f.b4w_lens_flares||I.warn('"LENS_FLARES" material name has been found. Enable the "Lens Flare" property for this material.'),f.b4w_lens_flares=!0);
f.b4w_water&&("b4w_water_shore_smoothing"in f||(f.b4w_water_shore_smoothing=!1,a("material",f,"b4w_water_shore_smoothing")),"b4w_water_dynamic"in f||(f.b4w_water_dynamic=!1,a("material",f,"b4w_water_dynamic")),"b4w_waves_height"in f||(f.b4w_waves_height=1,a("material",f,"b4w_waves_height")),"b4w_waves_length"in f||(f.b4w_waves_length=1,a("material",f,"b4w_waves_length")),"b4w_water_dst_noise_scale0"in f||(f.b4w_water_dst_noise_scale0=.05,a("material",f,"b4w_water_dst_noise_scale0")),"b4w_water_dst_noise_scale1"in
f||(f.b4w_water_dst_noise_scale1=.03,a("material",f,"b4w_water_dst_noise_scale1")),"b4w_water_dst_noise_freq0"in f||(f.b4w_water_dst_noise_freq0=1.3,a("material",f,"b4w_water_dst_noise_freq0")),"b4w_water_dst_noise_freq1"in f||(f.b4w_water_dst_noise_freq1=1,a("material",f,"b4w_water_dst_noise_freq1")),"b4w_water_dir_min_shore_fac"in f||(f.b4w_water_dir_min_shore_fac=.4,a("material",f,"b4w_water_dir_min_shore_fac")),"b4w_water_dir_freq"in f||(f.b4w_water_dir_freq=.5,a("material",f,"b4w_water_dir_freq")),
"b4w_water_dir_noise_scale"in f||(f.b4w_water_dir_noise_scale=.05,a("material",f,"b4w_water_dir_noise_scale")),"b4w_water_dir_noise_freq"in f||(f.b4w_water_dir_noise_freq=.07,a("material",f,"b4w_water_dir_noise_freq")),"b4w_water_dir_min_noise_fac"in f||(f.b4w_water_dir_min_noise_fac=.5,a("material",f,"b4w_water_dir_min_noise_fac")),"b4w_water_dst_min_fac"in f||(f.b4w_water_dst_min_fac=.2,a("material",f,"b4w_water_dst_min_fac")),"b4w_water_waves_hor_fac"in f||(f.b4w_water_waves_hor_fac=5,a("material",
f,"b4w_water_waves_hor_fac")),"b4w_water_absorb_factor"in f||(f.b4w_water_absorb_factor=6,a("material",f,"b4w_water_absorb_factor")),"b4w_water_fog_color"in f||(f.b4w_water_fog_color=[.5,.7,.7],a("material",f,"b4w_water_fog_color")),"b4w_foam_factor"in f||(f.b4w_foam_factor=5,a("material",f,"b4w_foam_factor")),"b4w_generated_mesh"in f||(f.b4w_generated_mesh=!1,a("material",f,"b4w_generated_mesh")),"b4w_water_num_cascads"in f||(f.b4w_water_num_cascads=5,a("material",f,"b4w_water_num_cascads")),"b4w_water_subdivs"in
f||(f.b4w_water_subdivs=64,a("material",f,"b4w_water_subdivs")),"b4w_water_detailed_dist"in f||(f.b4w_water_detailed_dist=1E3,a("material",f,"b4w_water_detailed_dist")),"b4w_water_enable_caust"in f||(f.b4w_water_enable_caust=!1,a("material",f,"b4w_water_enable_caust")),"b4w_water_caust_scale"in f||(f.b4w_water_caust_scale=.25,a("material",f,"b4w_water_caust_scale")),"b4w_water_caust_brightness"in f||(f.b4w_water_caust_brightness=.5,a("material",f,"b4w_water_caust_brightness")));"b4w_dynamic_grass_size"in
f||(f.b4w_dynamic_grass_size="");"b4w_dynamic_grass_color"in f||(f.b4w_dynamic_grass_color="");"diffuse_intensity"in f||(f.diffuse_intensity=1,a("material",f,"diffuse_intensity"));"b4w_use_ghost"in f||(f.b4w_use_ghost=!1);"b4w_collision_margin"in f||(f.b4w_collision_margin=.04,a("material",f,"b4w_collision_margin"));"b4w_collision_group"in f||(f.b4w_collision_group=128,a("material",f,"b4w_collision_group"));"b4w_collision_mask"in f||(f.b4w_collision_mask=127,a("material",f,"b4w_collision_mask"));
"b4w_do_not_render"in f||(f.b4w_do_not_render=!1,a("material",f,"b4w_do_not_render"));"HALO"!=f.type||"b4w_halo_sky_stars"in f||(f.b4w_halo_sky_stars=!1,a("material",f,"b4w_halo_sky_stars"));"HALO"!=f.type||"b4w_halo_stars_blend_height"in f||(f.b4w_halo_stars_blend_height=10,a("material",f,"b4w_halo_stars_blend_height"));"HALO"!=f.type||"b4w_halo_stars_min_height"in f||(f.b4w_halo_stars_min_height=0,a("material",f,"b4w_halo_stars_min_height"));"specular_shader"in f||(f.specular_shader="COOKTORR",
a("material",f,"specular_shader"));"diffuse_shader"in f||(f.diffuse_shader="LAMBERT",a("material",f,"diffuse_shader"));"roughness"in f||(f.roughness=.5,a("material",f,"roughness"));"diffuse_fresnel"in f||(f.diffuse_fresnel=.1,a("material",f,"diffuse_fresnel"));"diffuse_fresnel_factor"in f||(f.diffuse_fresnel_factor=.5,a("material",f,"diffuse_fresnel_factor"));"specular_slope"in f||(f.specular_slope=.2,a("material",f,"specular_slope"));"specular_toon_size"in f||(f.specular_toon_size=.5,a("material",
f,"specular_toon_size"));"specular_toon_smooth"in f||(f.specular_toon_smooth=.1,a("material",f,"specular_toon_smooth"));"specular_alpha"in f||(f.specular_alpha=1,a("material",f,"specular_alpha"));"b4w_wettable"in f||(f.b4w_wettable=!1,a("material",f,"b4w_wettable"));"b4w_refractive"in f||(f.b4w_refractive=!1,a("material",f,"b4w_refractive"));"b4w_refr_bump"in f||(f.b4w_refr_bump=0,a("material",f,"b4w_refr_bump"));"b4w_shallow_water_col"in f||(f.b4w_shallow_water_col=[0,.8,.3],a("material",f,"b4w_shallow_water_col"));
"b4w_shore_water_col"in f||(f.b4w_shore_water_col=[0,.9,.2],a("material",f,"b4w_shore_water_col"));"b4w_shallow_water_col_fac"in f||(f.b4w_shallow_water_col_fac=1,a("material",f,"b4w_shallow_water_col_fac"));"b4w_shore_water_col_fac"in f||(f.b4w_shore_water_col_fac=.5,a("material",f,"b4w_shore_water_col_fac"));"b4w_water_sss_strength"in f||(f.b4w_water_sss_strength=5.9,a("material",f,"b4w_water_sss_strength"));"b4w_water_sss_width"in f||(f.b4w_water_sss_width=.45,a("material",f,"b4w_water_sss_width"));
"b4w_render_above_all"in f||(f.b4w_render_above_all=!1,a("material",f,"b4w_render_above_all"));"b4w_water_norm_uv_velocity"in f||(f.b4w_water_norm_uv_velocity=.05,a("material",f,"b4w_water_norm_uv_velocity"));"specular_ior"in f||(f.specular_ior=1,a("material",f,"specular_ior"));"darkness"in f||(f.darkness=0,a("material",f,"darkness"));"diffuse_toon_size"in f||(f.diffuse_toon_size=0,a("material",f,"diffuse_toon_size"));"diffuse_toon_smooth"in f||(f.diffuse_toon_smooth=0,a("material",f,"diffuse_toon_smooth"));
"pass_index"in f||(f.pass_index=0,a("material",f,"pass_index"));l=f.texture_slots;for(n=0;n<l.length;n++)g=l[n],"blend_type"in g||(g.blend_type="MIX",a("texture_slot",g,"blend_type"));if(f.node_tree){l=f.node_tree.nodes;for(n=0;n<l.length;n++)e(l[n]);f.node_tree.animation_data&&c(f.node_tree.animation_data)}}g=b.node_groups;for(k=0;k<g.length;k++)for(l=g[k].node_tree.nodes,n=0;n<l.length;n++)e(l[n]);l=b.objects;for(k=0;k<l.length;k++){g=l[k];switch(g.type){case "MESH":"b4w_dynamic_geometry"in g||
(g.b4w_dynamic_geometry=!1);"b4w_reflexible"in g||(g.b4w_reflexible=!1);"b4w_reflexible_only"in g||(g.b4w_reflexible_only=!1);"b4w_reflective"in g||(g.b4w_reflective=!1);"b4w_reflection_type"in g||(g.b4w_reflection_type="PLANE",a("object",g,"b4w_reflection_type"));"b4w_wind_bending"in g||(g.b4w_wind_bending=!1,a("object",g,"b4w_wind_bending"));"b4w_wind_bending_angle"in g||(g.b4w_wind_bending_angle=10,g.b4w_wind_bending_freq=.25,a("object",g,"wind bending params"));"b4w_detail_bending_amp"in g||(g.b4w_detail_bending_amp=
.1,g.b4w_branch_bending_amp=.3,a("object",g,"detail bending params"));"b4w_detail_bending_freq"in g||(g.b4w_detail_bending_freq=1,a("object",g,"b4w_detail_bending_freq"));"b4w_main_bend_stiffness_col"in g||(g.b4w_main_bend_stiffness_col="",a("object",g,"b4w_main_bend_stiffness_col"));"b4w_detail_bend_colors"in g||(g.b4w_detail_bend_colors={leaves_stiffness_col:"",leaves_phase_col:"",overall_stiffness_col:""},a("object",g,"b4w_detail_bend_colors"));"b4w_caustics"in g||(g.b4w_caustics=!1);"vertex_groups"in
g&&g.vertex_groups.length&&g.data&&0==g.data.vertex_groups.length&&(g.data.vertex_groups=g.vertex_groups,delete g.vertex_groups,a("object",g,"vertex_groups"));"b4w_vertex_anim"in g&&g.b4w_vertex_anim.length&&g.data&&0==g.data.b4w_vertex_anim.length&&(g.data.b4w_vertex_anim=g.b4w_vertex_anim,delete g.b4w_vertex_anim,a("object",g,"b4w_vertex_anim"));"b4w_do_not_render"in g||(g.b4w_do_not_render=!1);"b4w_hidden_on_load"in g||(g.b4w_hidden_on_load=!1);"b4w_hide_chldr_on_load"in g||(g.b4w_hide_chldr_on_load=
!1);"use_ghost"in g.game||(g.game.use_ghost=!1);"use_sleep"in g.game||(g.game.use_sleep=!1);"velocity_min"in g.game||(g.game.velocity_min=0);"velocity_max"in g.game||(g.game.velocity_max=0);"collision_group"in g.game||(g.game.collision_group=1);"collision_mask"in g.game||(g.game.collision_mask=255);n=g;d=n.game;f=d.collision_bounds_type;d.use_collision_bounds&&"BOX"!=f&&"CYLINDER"!=f&&"CONE"!=f&&"SPHERE"!=f&&"CAPSULE"!=f&&"EMPTY"!=f&&(I.error("Wrong collision bounds type "+f+". Disable physics for object "+
n.name),n.b4w_collision=!1,n.b4w_floating=!1,n.b4w_vehicle=!1,n.b4w_character=!1);"b4w_vehicle_settings"in g?g.b4w_vehicle_settings&&("steering_ratio"in g.b4w_vehicle_settings||(g.b4w_vehicle_settings.steering_ratio=10),"steering_max"in g.b4w_vehicle_settings||(g.b4w_vehicle_settings.steering_max=1),"inverse_control"in g.b4w_vehicle_settings||(g.b4w_vehicle_settings.inverse_control=!1),"force_max"in g.b4w_vehicle_settings||(g.b4w_vehicle_settings.force_max=1500),"brake_max"in g.b4w_vehicle_settings||
(g.b4w_vehicle_settings.brake_max=100),"speed_ratio"in g.b4w_vehicle_settings||(g.b4w_vehicle_settings.speed_ratio=.027),"max_speed_angle"in g.b4w_vehicle_settings||(g.b4w_vehicle_settings.max_speed_angle=Math.PI),"delta_tach_angle"in g.b4w_vehicle_settings||(g.b4w_vehicle_settings.delta_tach_angle=4.43),"suspension_compression"in g.b4w_vehicle_settings||(g.b4w_vehicle_settings.suspension_compression=4.4),"suspension_stiffness"in g.b4w_vehicle_settings||(g.b4w_vehicle_settings.suspension_stiffness=
20),"suspension_damping"in g.b4w_vehicle_settings||(g.b4w_vehicle_settings.suspension_damping=2.3),"wheel_friction"in g.b4w_vehicle_settings||(g.b4w_vehicle_settings.wheel_friction=1E3),"roll_influence"in g.b4w_vehicle_settings||(g.b4w_vehicle_settings.roll_influence=.1),"max_suspension_travel_cm"in g.b4w_vehicle_settings||(g.b4w_vehicle_settings.max_suspension_travel_cm=30),"floating_factor"in g.b4w_vehicle_settings||(g.b4w_vehicle_settings.floating_factor=3),"floating_factor"in g.b4w_vehicle_settings||
(g.b4w_vehicle_settings.floating_factor=3),"water_lin_damp"in g.b4w_vehicle_settings||(g.b4w_vehicle_settings.water_lin_damp=.9),"water_rot_damp"in g.b4w_vehicle_settings||(g.b4w_vehicle_settings.water_rot_damp=.9)):(g.b4w_vehicle_settings=null,a("object",g,"b4w_vehicle_settings"));"b4w_floating_settings"in g?g.b4w_floating_settings&&("floating_factor"in g.b4w_floating_settings||(g.b4w_floating_settings.floating_factor=3),"water_lin_damp"in g.b4w_floating_settings||(g.b4w_floating_settings.water_lin_damp=
.8),"water_rot_damp"in g.b4w_floating_settings||(g.b4w_floating_settings.water_rot_damp=.8)):(g.b4w_floating_settings=null,a("object",g,"b4w_floating_settings"));"b4w_character_settings"in g?g.b4w_character_settings&&("walk_speed"in g.b4w_character_settings||(g.b4w_character_settings.walk_speed=4),"run_speed"in g.b4w_character_settings||(g.b4w_character_settings.run_speed=8),"step_height"in g.b4w_character_settings||(g.b4w_character_settings.step_height=.25),"jump_strength"in g.b4w_character_settings||
(g.b4w_character_settings.jump_strength=5),"waterline"in g.b4w_character_settings||(g.b4w_character_settings.waterline=0)):(g.b4w_character_settings=null,a("object",g,"b4w_character_settings"));"b4w_selectable"in g||(g.b4w_selectable=!1,a("object",g,"b4w_selectable"));"b4w_outlining"in g||(g.b4w_outlining=!1,a("object",g,"b4w_outlining"));"b4w_outline_on_select"in g||(g.b4w_outline_on_select=!1,a("object",g,"b4w_outline_on_select"));"b4w_billboard"in g||(g.b4w_billboard=!1,a("object",g,"b4w_billboard"));
"b4w_billboard_geometry"in g||(g.b4w_billboard_geometry="SPHERICAL",a("object",g,"b4w_billboard_geometry"));"b4w_pres_glob_orientation"in g||(g.b4w_pres_glob_orientation=!1,a("object",g,"b4w_pres_glob_orientation"));"b4w_outline_settings"in g||("b4w_glow_settings"in g?g.b4w_outline_settings=g.b4w_glow_settings:(g.b4w_outline_settings={},g.b4w_outline_settings.outline_duration=1,g.b4w_outline_settings.outline_period=1,g.b4w_outline_settings.outline_relapses=0),a("object",g,"b4w_outline_settings"));
"lod_levels"in g||(g.lod_levels=[],a("object",g,"lod_levels"));"b4w_animation_mixing"in g||(g.b4w_animation_mixing=!1,a("object",g,"b4w_animation_mixing"));break;case "EMPTY":"b4w_anchor"in g||(g.b4w_anchor=null,a("object",g,"b4w_anchor")),!g.b4w_anchor||"max_width"in g.b4w_anchor||(g.b4w_anchor.max_width=250)}"collision_margin"in g.game||(g.game.collision_margin=.04,a("object",g,"collision_margin"));"b4w_anim_behavior"in g||(g.b4w_anim_behavior=g.b4w_cyclic_animation?"CYCLIC":"FINISH_STOP",a("object",
g,"b4w_anim_behavior"));if(!("rotation_quaternion"in g)){n=[0,0,0,1];m.Y(g.rotation_euler,n);var d=n,f=n[0],p=n[1],q=n[2];d[0]=n[3];d[1]=f;d[2]=p;d[3]=q;g.rotation_quaternion=n;a("object",g,"rotation_quaternion")}"webgl_do_not_batch"in g&&(g.b4w_do_not_batch=g.webgl_do_not_batch)&&h("object",g,"webgl_do_not_batch");"b4w_shadow_cast_only"in g||(g.b4w_shadow_cast_only=!1,a("object",g,"b4w_shadow_cast_only"));"b4w_correct_bounding_offset"in g||(g.b4w_correct_bounding_offset="AUTO",a("object",g,"b4w_correct_bounding_offset"));
d=g.particle_systems;for(n=0;n<d.length;n++)f=d[n],p=f.settings,"use_rotation_dupli"in p||(p.use_rotation_dupli=!1,a("particle_settings",p,"use_rotation_dupli")),"use_whole_group"in p||(p.use_whole_group=!1,a("particle_settings",p,"use_whole_group")),f.transforms||(f.transforms=new Float32Array,a("particle_system",f,"transforms")),"b4w_billboard_align"in p||(p.b4w_billboard_align="VIEW",a("particle_settings",p,"b4w_billboard_align")),"b4w_dynamic_grass"in p||(p.b4w_dynamic_grass=!1,a("object",p,"b4w_dynamic_grass")),
"b4w_dynamic_grass_scale_threshold"in p||(p.b4w_dynamic_grass_scale_threshold=.01,a("object",p,"b4w_dynamic_grass_scale_threshold")),"b4w_initial_rand_rotation"in p||(p.b4w_initial_rand_rotation=!1,a("particle_settings",p,"b4w_initial_rand_rotation")),"b4w_rotation_type"in p||(p.b4w_rotation_type="Z",a("particle_settings",p,"b4w_rotation_type")),"b4w_rand_rotation_strength"in p||(p.b4w_rand_rotation_strength=1,a("particle_settings",p,"b4w_rand_rotation_strength")),"b4w_hair_billboard"in p||(p.b4w_hair_billboard=
!1,a("particle_settings",p,"b4w_hair_billboard")),"b4w_hair_billboard_type"in p||(p.b4w_hair_billboard_type="BASIC",a("particle_settings",p,"b4w_hair_billboard_type")),"b4w_hair_billboard_jitter_amp"in p||(p.b4w_hair_billboard_jitter_amp=0,a("particle_settings",p,"b4w_hair_billboard_jitter_amp")),"b4w_hair_billboard_jitter_freq"in p||(p.b4w_hair_billboard_jitter_freq=0,a("particle_settings",p,"b4w_hair_billboard_jitter_freq")),"b4w_hair_billboard_geometry"in p||(p.b4w_hair_billboard_geometry="SPHERICAL",
a("particle_settings",p,"b4w_hair_billboard_geometry")),"b4w_wind_bend_inheritance"in p||(p.b4w_wind_bend_inheritance="PARENT",a("particle_settings",p,"b4w_wind_bend_inheritance")),"b4w_shadow_inheritance"in p||(p.b4w_shadow_inheritance="PARENT",a("particle_settings",p,"b4w_shadow_inheritance")),"b4w_reflection_inheritance"in p||(p.b4w_reflection_inheritance="PARENT",a("particle_settings",p,"b4w_reflection_inheritance")),"b4w_vcol_from_name"in p||(p.b4w_vcol_from_name="",a("particle_settings",p,"b4w_vcol_from_name")),
"b4w_vcol_to_name"in p||(p.b4w_vcol_to_name="",a("particle_settings",p,"b4w_vcol_to_name")),"b4w_coordinate_system"in p||(p.b4w_coordinate_system="LOCAL",a("particle_settings",p,"b4w_coordinate_system")),"b4w_allow_nla"in p||(p.b4w_allow_nla=!0,a("particle_settings",p,"b4w_allow_nla")),"b4w_enable_soft_particles"in p||(p.b4w_enable_soft_particles=!1,a("particle_settings",p,"b4w_enable_soft_particles")),"b4w_particles_softness"in p||(p.b4w_particles_softness=1,a("particle_settings",p,"b4w_particles_softness")),
"billboard_tilt"in p||(p.billboard_tilt=0,a("particle_settings",p,"billboard_tilt")),"billboard_tilt_random"in p||(p.billboard_tilt_random=0,a("particle_settings",p,"billboard_tilt_random")),"use_rotations"in p||(p.use_rotations=!1,a("particle_settings",p,"use_rotations"));"constraints"in g||(g.constraints=[],a("object",g,"constraints"));d=g.constraints;for(n=0;n<d.length;n++)f=d[n],"influence"in f||(f.influence=1),"axes"in f||(f.axes=[1,1,1]);d=g.modifiers;for(n=0;n<d.length;n++){a:{f=d[n];switch(f.type){case "ARRAY":if(!("fit_type"in
f)){I.error("WARNING Incomplete modifier "+String(f.type)+' for "'+g.name+'", reexport "'+b.b4w_filepath_blend+'" scene');f=!1;break a}}f=!0}f||(d.splice(n,1),n--)}"animation_data"in g||(g.animation_data={action:null,nla_tracks:[]},a("object",g,"animation_data"));if(g.animation_data){if(!("action"in g.animation_data))g.animation_data.action=null,t("no action in animation data "+g.name);else if(g.animation_data.action){var n=g.animation_data.action.fcurves,v;for(v in n){var d=n[v],u;for(u in d)f=d[u],
"num_channels"in f||(f.num_channels=1,t('B4W Warning: no channels number in animation fcurve for "'+g.animation_data.action.name+'" action, reexport scene'))}}"nla_tracks"in g.animation_data||(g.animation_data.nla_tracks=[],t("no NLA in animation data "+g.name));c(g.animation_data)}"b4w_collision_id"in g||(g.b4w_collision_id="",a("object",g,"b4w_collision_id"));"b4w_viewport_alignment"in g||(g.b4w_viewport_alignment=null,a("object",g,"b4w_viewport_alignment"));"pinverse_tsr"in g||(g.pinverse_tsr=
null,a("object",g,"pinverse_tsr"));"b4w_cluster_data"in g||(g.b4w_cluster_data={cluster_id:-1,cluster_center:null},a("object",g,"b4w_cluster_data"));"pass_index"in g||(g.pass_index=0,a("object",g,"pass_index"));"b4w_custom_prop"in g||(a("object",g,"b4w_custom_prop"),g.b4w_custom_prop=null);(0>g.scale[0]||0>g.scale[1]||0>g.scale[2])&&t('negative scale for object "'+g.name+'", can lead to some errors');n=g.scale;0==n[0]&&0==n[1]&&0==n[2]?n=!0:(d=Math.abs((n[1]-n[2])/n[1]),n=.005>Math.abs((n[0]-n[1])/
n[0])&&.005>d);n||t("non-uniform scale for object "+g.name)}for(var r in K)k=K[r],v=r.match(/.*?(?=>>|$)/i)[0],I.warn('Property "'+String(v)+'" is '+k.vH+' for "'+k.type+'". To fix this, reexport '+b.b4w_filepath_blend)};l.$L=function(a){var b;a:{b=a.modifiers;for(var c=0;c<b.length;c++){var e=b[c].type;if("ARRAY"==e||"CURVE"==e){b=!0;break a}}b=!1}if(!b)return null;b=v(a.data,a.data.name+"_MOD");a=a.modifiers;for(c=0;c<a.length;c++){var d=a[c];switch(d.type){case "ARRAY":for(var e=b,h=d,g=0,k=0,
l=0,u=new Float32Array(16),d=[],r=1;r<h.count;r++){h.use_constant_offset&&(g+=h.constant_offset_displace[0],k+=h.constant_offset_displace[1],l+=h.constant_offset_displace[2]);if(h.use_relative_offset)var t=e.b4w_boundings.bb,g=g+(t.max_x-t.min_x)*h.relative_offset_displace[0],k=k+(t.max_y-t.min_y)*h.relative_offset_displace[1],l=l+(t.max_z-t.min_z)*h.relative_offset_displace[2];m._59(g,k,l,u);for(var L=t=v(e),F=u,G=q.fromMat4(F,D),G=y.fromMat3(G,V),K=0;K<L.submeshes.length;K++){var E=L.submeshes[K];
m._27(E.position,F,E.position,0);x.j(E.tbn,G,E.tbn)}d.push(t)}for(r=0;r<d.length;r++)for(h=e,g=d[r],k=0;k<h.submeshes.length;k++)if(l=h.submeshes[k],u=g.submeshes[k],t=l.base_length,L=l.indices.length,t)for(var N in l)switch(N){case "base_length":l[N]+=u[N];break;case "boundings":break;case "indices":l[N]=m._66(l[N],u[N]);for(F=L;F<l[N].length;F++)l[N][F]+=t;break;case "position":l[N]=B(l[N],u[N],l[N].length/t/3);break;case "tbn":l[N]=B(l[N],u[N],l[N].length/t/4);break;case "shade_tangs":l[N]=B(l[N],
u[N],l[N].length/t/3);break;case "group":l[N]=B(l[N],u[N],l[N].length/t);break;case "texcoord":l[N]=B(l[N],u[N],l.uv_layers.length);break;case "color":l[N]=B(l[N],u[N],l.vertex_colors.length);break;case "uv_layers":case "vertex_colors":break;default:I.warn('array_mesh_join(): unknown submesh property "'+N+'"'),l[N]=m._2(l[N],u[N])}break;case "CURVE":for(e=b,r=H.LN(d.object),h=new Float32Array(16),k=r.sl?4:3,g=new Float32Array(k),k=new Float32Array(k),l=new Float32Array(3),u=new Float32Array(4),t=
new Float32Array(4),L=new Float32Array(3),F=new Float32Array(3),G=new Float32Array(3),K=0;K<e.submeshes.length;K++){var O=e.submeshes[K],E=O.position,O=O.tbn,ca;a:{ca=d.deform_axis;switch(ca){case "POS_X":case "NEG_X":ca=0;break a;case "POS_Y":case "NEG_Y":ca=1;break a;case "POS_Z":case "NEG_Z":ca=2;break a;default:C.va("Wrong deform axis value "+ca)}ca=void 0}L[0]=0;L[1]=0;L[2]=0;L[ca]=1;for(var U=H.QT(r),Q=0;Q<E.length/3;Q++){G[0]=E[3*Q];G[1]=E[3*Q+1];G[2]=E[3*Q+2];var da=G[ca],la=H.PT(r,da);H.RT(r,
la,g);l[0]=g[0];l[1]=g[1];l[2]=g[2];H.OT(r,la,k);F[0]=k[0];F[1]=0;F[2]=k[2];p.normalize(F,F);y.rotationTo(L,F,u);0>da?(g[0]=F[0],g[1]=F[1],g[2]=F[2],p.scale(g,da,g),p.add(l,g,l)):da>U&&(g[0]=F[0],g[1]=F[1],g[2]=F[2],p.scale(g,da-U,g),p.add(l,g,l));f.fromRotationTranslation(u,l,h);r.sl&&(y.setAxisAngle(L,g[3],t),p.transformQuat(G,t,G));G[ca]=0;p.transformMat4(G,h,G);E[3*Q]=G[0];E[3*Q+1]=G[1];E[3*Q+2]=G[2];da=x.e(O,Q,R);x.j(da,u,da);x.n(O,da,Q)}}}T.N(b)}return b};l.cM=function(a,b){function c(b,c){var e=
b[0];if(1<b.length)for(var d=1;d<b.length;d++)e+="*"+b[d];for(d=0;d<a.length;d++){var g=a[d];if(g.name==e)for(var f in c)g[f]=c[f]}}function e(a,b){for(var e in a)c(a[e],b)}for(var d=b.b4w_logic_nodes,f=0;f<d.length;f++)for(var g=d[f],h=0;h<g.length;h++){var k=g[h],l={register1:"variable1",register2:"variable2",registerd:"variabled"},m;for(m in l)m in k&&(k[l[m]]=k[m]);for(var p in k.variables)"boolean"!=typeof k.variables[p][0]&&(k.variables[p]=[!1,k.variables[p]]);0<=["MATH","CONDJUMP","PAGEPARAM",
"REGSTORE"].indexOf(k.type)&&("variable1"in k&&(k.variables.id0=[!1,k.variable1]),"variable2"in k&&(k.variables.id1=[!1,k.variable2]),"variabled"in k&&(k.variables.vd=[!1,k.variabled]));for(var q in k.links)q.startsWith("id")||delete k.links[q];var l=k.common_usage_names,v=k.variables;switch(k.type){case "SELECT":for(var u=0;u<a.length;u++)l=a[u],l.name==k.object&&(l.b4w_selectable=!0);k.bools||(k.bools={});k.bools.not_wait||(k.bools.not_wait=!1);t('Logic nodes type "SELECT" is deprecated');break;
case "SWITCH_SELECT":e(k.objects_paths,{b4w_selectable:!0});if(k.links instanceof Array){t('Format of a "SWITCH_SELECT" node is outdated. It is recommended to reexport the scene "'+b.name+'"');l={};v=0;for(u in k.objects_paths)l[u]=k.links[v],v++;k.links=l}break;case "SELECT_PLAY":t('Logic nodes type "SELECT_PLAY" is deprecated, node will be muted. To fix this, reexport the scene "'+b.name+'"');k.mute=!0;break;case "SELECT_PLAY_ANIM":t('Logic nodes type "SELECT_PLAY_ANIM" is deprecated');break;case "SHOW":case "HIDE":k.bools||
(k.bools={});void 0===k.bools.ch&&(k.bools.ch=!1);k.bools.id0||e(k.objects_paths,{b4w_do_not_batch:!0});break;case "SET_SHADER_NODE_PARAM":case "INHERIT_MAT":e(k.objects_paths,{b4w_do_not_batch:!0});break;case "PLAY":b.b4w_use_nla=!0;break;case "MOVE_TO":e(k.objects_paths,{b4w_do_not_batch:!0});break;case "TRANSFORM_OBJECT":e(k.objects_paths,{b4w_do_not_batch:!0});switch(l.space_type){case "WORLD":l.space_type=E.uK;break;case "PARENT":l.space_type=E.tK;break;case "LOCAL":l.space_type=E.sK}break;case "OUTLINE":e(k.objects_paths,
{b4w_outlining:!0});break;case "CONDJUMP":k.condition&&(l.condition=k.condition);if("cnd"in k.floats)l.condition=k.floats.cnd;else switch(l.condition){case "GEQUAL":l.condition=E.VC;break;case "LEQUAL":l.condition=E.XC;break;case "GREATER":l.condition=E.WC;break;case "LESS":l.condition=E.YC;break;case "NOTEQUAL":l.condition=E.ZC;break;case "EQUAL":l.condition=E.UC}void 0!=k.number1&&(k.input1=k.number1);void 0!=k.number2&&(k.input2=k.number2);k.bools||(k.bools={});k.bools.str&&(l.variable_type="STRING");
switch(l.variable_type){case "NUMBER":l.variable_type=E.Iy;break;case "STRING":l.variable_type=E.aD;break;case "OBJECT":l.variable_type=E.$C}void 0===l.variable_type&&(l.variable_type=E.Iy,k.floats.inp1=k.input1,k.floats.inp2=k.input2);void 0===v.id0&&(v.id0=v.v1,v.id1=v.v2);break;case "SEND_REQ":k.bools||(k.bools={});k.strings||(k.strings={});void 0===k.bools.ct&&(k.bools.ct=!1);void 0!=k.url&&(k.bools.url=!1,k.strings.url=k.url);break;case "MATH":void 0!=k.number1&&(k.input1=k.number1);void 0!=
k.number2&&(k.input2=k.number2);void 0!=k.input1&&(k.floats.inp1=k.input1);void 0!=k.input2&&(k.floats.inp2=k.input2);switch(k.operation){case "DIV":k.operation=E.$J;break;case "SUB":k.operation=E.iK;break;case "MUL":k.operation=E.eK;break;case "ADD":k.operation=E.VJ;break;case "RAND":k.operation=E.fK;break;case "SIN":k.operation=E.hK;break;case "COS":k.operation=E.ZJ;break;case "TAN":k.operation=E.jK;break;case "ARCSIN":k.operation=E.XJ;break;case "ARCCOS":k.operation=E.WJ;break;case "ARCTAN":k.operation=
E.YJ;break;case "LOG":k.operation=E.aK;break;case "MIN":k.operation=E.cK;break;case "MAX":k.operation=E.bK;break;case "ROUND":k.operation=E.gK;break;case "MOD":k.operation=E.dK;break;case "ABS":k.operation=E.UJ}void 0===v.id0&&(v.id0=v.v1,v.id1=v.v2);break;case "REGSTORE":k.floats||(k.floats={});k.strings||(k.strings={});void 0!=k.number1&&(k.input1=k.number1);if(void 0!=k.input1)switch(typeof k.input1){case "number":k.floats.inp1=k.input1;l.variable_type="NUMBER";break;default:k.strings.inp1=k.input1,
l.variable_type="STRING"}switch(l.variable_type){case "NUMBER":l.variable_type=E.Iy;break;case "STRING":l.variable_type=E.aD;break;case "OBJECT":l.variable_type=E.$C,e(k.objects_paths,{b4w_do_not_batch:!0})}break;case "PAGEPARAM":k.bools||(k.bools={});void 0===k.bools.hsh&&(k.bools.hsh=!1);k.floats||(k.floats={});void 0===k.floats.ptp&&(k.floats.ptp=0);break;case "STOP_ANIM":case "PLAY_ANIM":k.bools||(k.bools={});void 0===k.bools.env&&(k.bools.env=!1);void 0===k.bools.id0&&(k.bools.id0=!1);k.bools.id0||
c(k.objects_paths.id0,{b4w_do_not_batch:!0});"PLAY_ANIM"==k.type&&((k=l.param_anim_behavior)||(k="FINISH_STOP"),l.param_anim_behavior=N.Sy(k));break;case "STRING":switch(l.string_operation){case "JOIN":l.string_operation=E.pK;break;case "FIND":l.string_operation=E.oK;break;case "REPLACE":l.string_operation=E.qK;break;case "SPLIT":l.string_operation=E.rK;break;case "COMPARE":l.string_operation=E.nK}if("cnd"in k.floats)l.condition=k.floats.cnd;else switch(l.condition){case "GEQUAL":l.condition=E.VC;
break;case "LEQUAL":l.condition=E.XC;break;case "GREATER":l.condition=E.WC;break;case "LESS":l.condition=E.YC;break;case "NOTEQUAL":l.condition=E.ZC;break;case "EQUAL":l.condition=E.UC}break;case "REDIRECT":void 0!=k.url&&(k.bools.url=!1,k.strings.url=k.url);break;case "SET_CAMERA_MOVE_STYLE":switch(l.camera_move_style){case "STATIC":l.camera_move_style=E.QJ;break;case "TARGET":l.camera_move_style=E.RJ;break;case "EYE":l.camera_move_style=E.OJ;break;case "HOVER":l.camera_move_style=E.PJ}break;case "ENTRYPOINT":k.bools||
(k.bools={});void 0===k.bools.js&&(k.bools.js=!1);k.bools.js&&(k.mute=!0);break;case "JS_CALLBACK":for(m in k=l.js_cb_params,k)switch(k[m]){case "OBJECT":k[m]=E.SJ;break;case "VARIABLE":k[m]=E.TJ}}}}});t.a=d},function(E,t,d){E=d(0);var O=d(16),T=d(1),G=d(12),r=d(10),f=d(2);d=Object(E.a)("__debug_batch",function(d,t){function k(b,d,e){var c=[],a;for(a in b)1<f._8(b[a])&&c.push([a,b[a]]);c.sort(function(a,b){var c=f._8(a[1]),e=f._8(b[1]);return e!=c?e-c:a<b?-1:b<a?1:0});if(c.length){q.groupCollapsed(d+
" "+e);q.Sd("Property different variants (>1) | Property name");for(b=0;b<c.length;b++)q.groupCollapsed(f._8(c[b][1]),c[b][0]),m(c[b][1]);q.groupEnd()}}function m(b){q.Sd("Batches count for this property value | Property value");var d=[],e;for(e in b)d.push([e,b[e]]);d.sort(function(b,a){return a[1]!=b[1]?a[1]-b[1]:b[0]<a[0]?-1:a[0]<b[0]?1:0});for(b=0;b<d.length;b++)q.Sd(d[b][1],d[b][0]);q.groupEnd()}var p=Object(O.a)(d),q=Object(T.a)(d),b=Object(G.a)(d),u=Object(r.a)(d);t.print_batches_stat=function(){for(var d=
{},f="bounds_local bufs_data id attribute_setters num_vertices num_triangles material_names shader bpy_tex_names".split(" "),e=0,c=0,a=b.Fc(u.ji(),"MESH",b.DATA_ID_ALL),m=0;m<a.length;m++)for(var r=0;r<a[m].Ba.length;r++)for(var v=0;v<a[m].Ba[r].Ia.length;v++){var x=p.ZM(a[m].Ba[r].Ia[v]),t=x.Lb.vg+"/"+x.Lb.ef;x["shaders_info.directives"]=x.Lb.ei;x["shaders_info.node_elements"]=x.Lb.Jf;delete x.Lb;for(var y=0;y<f.length;y++)delete x[f[y]];if(a[m].is_dynamic)c++;else{e++;x.type in d||(d[x.type]={});
t in d[x.type]||(d[x.type][t]={});for(var H in x)H in d[x.type][t]||(d[x.type][t][H]={}),y=JSON.stringify(x[H]),y in d[x.type][t][H]||(d[x.type][t][H][y]=0),d[x.type][t][H][y]++}}q.group("Batches statistics:");q.Sd("STATIC/DYNAMIC count:",e+"/"+c);q.group("STATIC batches diversity:");for(var I in d)for(t in d[I])k(d[I][t],I,t);q.groupEnd();q.groupEnd()}});t.a=d},function(E,t,d){E=d(0);var O=d(33),T=d(24),G=d(1),r=d(29),f=d(68),k=d(40),y=d(80),x=d(26),m=d(3);d=Object(E.a)("camera_anim",function(d,
q){function b(a,b,c,e,d){c=E.angle_wrap_0_2pi(b-c);c=Math.min(c,2*Math.PI-c);b=E.angle_wrap_0_2pi(e-b);b=Math.min(b,2*Math.PI-b);if(1E-6>Math.abs(c)||1E-6>2*Math.PI-Math.abs(c))c=0;if(1E-6>Math.abs(b)||1E-6>2*Math.PI-Math.abs(b))b=0;p.is_eye_camera(a)?(d[0]=b,d[1]=c):(d[0]=c,d[1]=b);return d}var p=Object(O.a)(d),h=Object(T.a)(d),l=Object(G.a)(d),e=Object(r.a)(d),c=Object(f.a)(d),a=Object(k.a)(d),t=Object(y.a)(d),E=Object(x.a)(d),v=new Float32Array(2),B=new Float32Array(2),C=new Float32Array(3),L=
new Float32Array(3),H=new Float32Array(3),I=t.create(),da=t.create(),N=t.create(),U={},K=!1,D=!1,R=!1,V=!1;q.track_to_target=function(b,e,d,f,k,n,g,q){if(p.is_eye_camera(b)){if(E.is_vector(e))var r=e;else r=C,a.get_object_center(e,!1,r);d=d||1;f=f||2;k=k||1;n=n||1;var u=a.get_translation(b,L);e=m.subtract(r,u,H);var r=p.get_camera_angles(b,v),w=p.get_camera_angles_dir(e,B),x=w[0]-r[0],t=w[1]-r[1],y=Math.abs(Math.acos(Math.cos(x)*Math.cos(t))/d),A=m.length(e)*(1-1/f),z=function(a){return 6*a*(1-a)},
D=c.get_timeline(),F=0,I=function(){h.remove_sensor_manifold(b,"TRACK_TO_TARGET");g&&g()};d=h.create_timeline_sensor();f=h.create_elapsed_sensor();h.create_sensor_manifold(b,"TRACK_TO_TARGET",h.CT_CONTINUOUS,[d,f],null,function(c,e,d){p.is_eye_camera(c)?1==d&&(d=h.get_sensor_value(c,e,0)-D,e=h.get_sensor_value(c,e,1),d<y?(d=z(d/y),p.rotate_camera(b,d*x*e/y,d*t*e/y)):d<y+k?(F||(p.rotate_camera(b,w[0],w[1],!0),F++),d=z(d-y/k),e=d*A*e/k,a.move_local(c,0,0,-e)):d<y+k+n?1>=F&&(p.rotate_camera(b,w[0],w[1],
!0),p.eye_set_look_at(b,u),a.move_local(c,0,0,-A),q&&q(),F++):d<y+k+n+k?(2>=F&&(p.rotate_camera(b,w[0],w[1],!0),p.eye_set_look_at(b,u),a.move_local(c,0,0,-A),F++),d=z(d-y-k-n/k),e=d*A*e/k,a.move_local(c,0,0,e)):(p.rotate_camera(b,w[0],w[1],!0),p.eye_set_look_at(b,u),I())):I()})}else l.error("track_to_target(): Wrong camera object or camera move style")};q.auto_rotate=function(a,c,d){function f(c,e,d){if(1==d)if(d=p.get_move_style(c),d==p.MS_STATIC)k();else if(d!=p.MS_TARGET_CONTROLS&&d!=p.MS_EYE_CONTROLS||
!p.has_horizontal_rot_limits(c))g=null,e=h.get_sensor_value(c,e,0),p.rotate_camera(c,e*a,0);else{d=d==p.MS_EYE_CONTROLS?p.eye_get_horizontal_limits(c,U):p.target_get_horizontal_limits(c,U);if(null===g||d.left!=g.left||d.right!=g.right){g=g||{};g.left=d.left;g.right=d.right;q=Math.min(.2,E.angle_wrap_0_2pi(g.right-g.left)/2);d=m;var f=g,l=p.get_camera_angles(d,v)[0];d=b(d,l,f.left,f.right,B);r=a*Math.min(1,d[0]/.2,d[1]/.2)}e=h.get_sensor_value(c,e,0);d=p.get_camera_angles(c,v)[0];d=b(c,d,g.left,g.right,
B);d[1]>q&&d[0]>q?r=E.sign(r)*a:d[1]<q?r-=Math.pow(a,2)/.4*e:d[0]<q&&(r+=Math.pow(a,2)/.4*e);p.rotate_camera(c,e*r,0)}}function k(){h.remove_sensor_manifold(m,"AUTO_ROTATE");h.remove_sensor_manifold(m,"DISABLE_AUTO_ROTATE");c()}c=c||function(){};var m=e.get_active_camera();if(p.is_static_camera(m))l.error("auto_rotate(): Wrong camera move style");else{var g={},q=0,r=0;if(h.check_sensor_manifold(m,"AUTO_ROTATE"))k();else{var u=h.create_mouse_move_sensor("X"),w=h.create_mouse_move_sensor("Y"),x=h.create_mouse_click_sensor(),
t=h.create_touch_move_sensor(),y=h.create_touch_zoom_sensor(),C=h.create_elapsed_sensor();d=d?h.create_mouse_wheel_sensor():h.create_custom_sensor(0);h.create_sensor_manifold(m,"DISABLE_AUTO_ROTATE",h.CT_LEVEL,[u,w,x,t,y,d],function(a){return a[0]&&a[2]||a[1]&&a[2]||a[3]||a[4]||a[5]},k);h.create_sensor_manifold(m,"AUTO_ROTATE",h.CT_CONTINUOUS,[C],function(a){return a[0]},f)}}};q.is_auto_rotate=function(){var a=e.get_active_camera();return h.check_sensor_manifold(a,"AUTO_ROTATE")};q.check_auto_rotate=
function(){var a=e.get_active_camera();return p.get_move_style(a)==p.MS_STATIC?!1:!0};q.move_camera_to_point=function(b,e,d,f,h){if(p.get_move_style(b)!=p.MS_STATIC)l.error("move_camera_to_point(): wrong camera type");else if(!K)if(b)if(e){d=d||1;f=f||.01;var k=E.is_vector(b)?b:a.get_tsr(b,I),g=E.is_vector(e)?e:a.get_tsr(e,da);e=m.distance(t.get_trans_view(k),t.get_trans_view(g))/d;d=E.quat_to_dir(t.get_quat_view(k),E.AXIS_MZ,C);var q=E.quat_to_dir(t.get_quat_view(g),E.AXIS_MZ,L);d=Math.min(Math.abs(m.dot(d,
q)),1);f=1E3*Math.max(e,Math.acos(d)/f);K=!0;var v=c.animate(0,1,f,function(e){var d=t.interpolate(k,g,E.smooth_step(e),N);R?(c.clear_animation(v),K=R=!1):(a.set_tsr(b,d),1==e&&(K=!1,h&&h()))})}else l.error("move_camera_to_point(): you must specify the point object");else l.error("move_camera_to_point(): you must specify the camera object")};q.rotate_camera=function(a,b,e,d,f){if(p.get_move_style(a)==p.MS_STATIC)l.error("rotate_camera(): not supported for STATIC cameras");else if(!D)if(a)if(b||e){d=
d||1E3;D=!0;var h=0,g=c.animate(0,b,d,function(e){V||e>=b?(V=!1,c.clear_animation(g),D&&(D=!1,f&&f())):(p.rotate_camera(a,h-e,0),h=e)}),k=0,m=c.animate(0,e,d,function(b){V||b>=e?(V=!1,c.clear_animation(m),D&&(D=!1,f&&f())):(p.rotate_camera(a,0,k-b),k=b)})}else l.error("rotate_camera(): you must specify the rotation angle");else l.error("rotate_camera(): you must specify the camera object")};q.stop_cam_moving=function(){R=!0};q.stop_cam_rotating=function(){V=!0};q.is_moving=function(){return K};q.is_rotating=
function(){return D}});t.a=d},function(E,t,d){E=d(0);var O=d(33),T=d(24),G=d(54),r=d(29),f=d(26),k=d(60),y=d(39),x=d(49),m=d(50),p=d(40),q=d(67),b=d(3),u=d(81),h=d(1);d=Object(E.a)("fps",function(d,e){function c(){}function a(a,b,c){var e=W.get_active_camera();F.rotate_camera(e,b,c);b=F.get_camera_angles_char(e,Ra);w.set_character_rotation_h(a,b[0]);w.set_character_vert_move_dir_angle(a,b[1])}function l(a,b,c,e){if(.01<Math.abs(ja[0])||.01<Math.abs(ja[1]))c=z.get_sensor_value(a,b,0),b=A.smooth(ja[0],
0,c,.2*Ia),c=A.smooth(ja[1],0,c,.2*Ia),ja[0]-=b,ja[1]-=c,e(a,-b*Ca,-c*Ca)}function t(a){var b=document.createElement("div");b.style.cssText="position: absolute;left: 10px;bottom: 70px;width: 53px;height: 53px;background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyBpZD0ic3ZnMzQwMCIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQuMTExbW0iIHdpZHRoPSIxNC4xMTFtbSIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHZpZXdCb3g9IjAgMCA0OS45OTk5OTggNDkuOTk5OTk5Ij4gPG1ldGFkYXRhIGlkPSJtZXRhZGF0YTM0MDUiPjxyZGY6UkRGPjxjYzpXb3JrIHJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZSByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIi8+PGRjOnRpdGxlLz48L2NjOldvcms+PC9yZGY6UkRGPiA8L21ldGFkYXRhPiA8ZyBpZD0ibGF5ZXIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xMDAyLjQpIj48cmVjdCBpZD0icmVjdDI0MTI2IiBvcGFjaXR5PSIwLjU0MyIgZmlsbC1vcGFjaXR5PSIuODM2MTEiIGhlaWdodD0iNTAiIHdpZHRoPSI1MCIgeT0iMTAwMi40IiB4PSIwIiBmaWxsPSIjZmZmIi8+PHBhdGggaWQ9InBhdGgyNDEyOCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTM5LjE0MiAxMDMzLjUtMTQuMTQyLTE0LjE0Mi0xNC4xNDIgMTQuMTQyIiBzdHJva2U9IiM2ZTZlNmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+IDwvZz48L3N2Zz4=);";
b.setAttribute("id","B4W_DEFAULT_BTN_1");var c=document.createElement("div");c.style.cssText="position: absolute;left: 10px;bottom: 10px;width: 53px;height: 53px;background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyBpZD0ic3ZnMzQwMCIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQuMTExbW0iIHdpZHRoPSIxNC4xMTFtbSIgdmVyc2lvbj0iMS4xIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHZpZXdCb3g9IjAgMCA0OS45OTk5OTggNDkuOTk5OTk5Ij4gPG1ldGFkYXRhIGlkPSJtZXRhZGF0YTM0MDUiPjxyZGY6UkRGPjxjYzpXb3JrIHJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZSByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIi8+PGRjOnRpdGxlLz48L2NjOldvcms+PC9yZGY6UkRGPiA8L21ldGFkYXRhPiA8ZyBpZD0ibGF5ZXIxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIC0xMDAyLjQpIj48cmVjdCBpZD0icmVjdDI0MTI2IiBvcGFjaXR5PSIwLjU0MyIgZmlsbC1vcGFjaXR5PSIuODM2MTEiIGhlaWdodD0iNTAiIHdpZHRoPSI1MCIgeT0iMTAwMi40IiB4PSIwIiBmaWxsPSIjZmZmIi8+PHBhdGggaWQ9InBhdGgyNDEyOCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgZD0ibTM5LjE0MiAxMDMzLjUtMTQuMTQyLTE0LjE0Mi0xNC4xNDIgMTQuMTQyIiBzdHJva2U9IiM2ZTZlNmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIi8+IDwvZz48L3N2Zz4=);transform: rotate(180deg);transform-origin: center;";
c.setAttribute("id","B4W_DEFAULT_BTN_2");a.appendChild(b);a.appendChild(c)}function v(a){return"function"===typeof(a.requestPointerLock||a.webkitRequestPointerLock||a.mozRequestPointerLock)}function B(a,b){if(v(a)&&!n.detect_mobile()){var e=z.create_plock_mouse_sensor(a),d=X?X:z.create_plock_sensor(a);X=d;z.create_sensor_manifold(b,"FPS_PLOCK",z.CT_CONTINUOUS,[e,d],function(a){return a[0]&&a[1]},function(a,b,e){0<e&&(b=z.get_sensor_payload(a,b,0),c(a,-b.coords[0]*Ca,-b.coords[1]*Ca))});z.create_sensor_manifold(null,
"FPS_ACTIVATE_PLOCK",z.CT_TRIGGER,[d],function(a){return a[0]},function(b,c,e){0<e?Q.Fz&&Q.Fz(a):Q.lr&&Q.lr(a)})}else{if(n.detect_mobile())var e=z.create_touch_move_sensor("XY",a),d=z.create_touch_click_sensor(a),g=4;else{var e=z.create_mouse_move_sensor("XY",a),d=z.create_mouse_click_sensor(a),g=2,f=W.get_active_camera(),h=z.create_elapsed_sensor(),k=z.create_gamepad_axis_sensor(ea.GMPD_AXIS_2),m=z.create_gamepad_axis_sensor(ea.GMPD_AXIS_3);z.create_sensor_manifold(b,"FPS_CAM_ROT",z.CT_CONTINUOUS,
[h,k,m],function(a){return.05<Math.abs(a[1])||.05<Math.abs(a[2])},function(a,b,c){if(0<c){var e=z.get_sensor_value(a,b,0);c=z.get_sensor_value(a,b,1);b=z.get_sensor_value(a,b,2);e*=2.5;b=-(.05>Math.abs(b)?0:b)*e;c=-(.05>Math.abs(c)?0:c)*e;b=A.clamp(b,aa,oa);F.rotate_camera(f,c,b);c=F.get_camera_angles(f,Ra);w.set_character_rotation_h(a,c[0]+Math.PI)}})}var p=0,q=0;z.create_sensor_manifold(null,"FPS_DRAG_PRESS",z.CT_SHOT,[d],function(a){return a[0]},function(a,b,c){1==c&&(a=z.get_sensor_payload(a,
b,0).coords,p=a[0],q=a[1])});z.create_sensor_manifold(null,"FPS_DRAG_MOVE",z.CT_CONTINUOUS,[e,d],function(a){return a[0]&&a[1]},function(a,b,c){1==c&&(a=z.get_sensor_payload(a,b,0).coords,ja[0]+=(a[0]-p)*g,ja[1]+=(a[1]-q)*g,p=a[0],q=a[1])});e=z.create_elapsed_sensor();z.create_sensor_manifold(b,"FPS_SMOOTH_DRAG",z.CT_CONTINUOUS,[e],null,l,c)}}function C(a,b){ea.add_click_listener(a,function(){ka.request_fullscreen_hmd(a,function(){z.check_sensor_manifolds(b,"FPS_PLOCK")&&z.remove_sensor_manifold(b,
"FPS_PLOCK");z.check_sensor_manifolds(null,"FPS_ACTIVATE_PLOCK")&&z.remove_sensor_manifold(null,"FPS_ACTIVATE_PLOCK");z.check_sensor_manifolds(b,"FPS_CAM_ROT")&&z.remove_sensor_manifold(b,"FPS_CAM_ROT");z.check_sensor_manifolds(null,"FPS_DRAG_PRESS")&&z.remove_sensor_manifold(null,"FPS_DRAG_PRESS");z.check_sensor_manifolds(null,"FPS_DRAG_MOVE")&&z.remove_sensor_manifold(null,"FPS_DRAG_MOVE");z.check_sensor_manifolds(b,"FPS_SMOOTH_DRAG")&&z.remove_sensor_manifold(b,"FPS_SMOOTH_DRAG");Ea.enable_hmd(Ea.HMD_ALL_AXES_MOUSE_NONE);
L(b);ga&&ga()},function(){z.remove_sensor_manifold(b,"FPS_CHARECTER_VR_ROT");Ea.disable_hmd();B(a,b);P&&P()})})}function L(a){var b=z.create_elapsed_sensor(),c=W.get_active_camera();z.create_sensor_manifold(a,"FPS_CHARECTER_VR_ROT",z.CT_CONTINUOUS,[b],null,function(a){var b=F.get_camera_angles_char(c,Ra)[0];w.set_character_rotation_h(a,b)})}function H(){var a=Ea.check_browser_support()&&!n.detect_mobile(),b=ea.get_device_by_type_element(ea.DEVICE_HMD);b&&(a=a&&ea.get_value_param(b,ea.HMD_WEBVR_TYPE)&
ea.HMD_WEBVR1);return a}function I(a,b,c,e){function d(a){if(h()){4==k.cl.id&&(a=0);a=0<a?1:a;var e=l+m;m=-(0>a?-1:a);a=p+q;var d=l+m;w.set_character_move_dir(b,a,d);c&&c(a,d);f(a,d);r&&e!=d&&r(a,d,0)}}function g(a){if(h()){a=0<a?1:a;var e=p+q;q=-(0>a?-1:a);a=p+q;var d=l+m;w.set_character_move_dir(b,a,d);c&&c(a,d);f(a,d);r&&e!=a&&r(a,d,0)}}function f(a,b){var c=k.cl.id;a||b||4==c?0==c&&(0<v?D(k,2):D(k,1)):D(k,0)}function h(){return Va?(q=p=m=l=0,!1):!0}n.detect_mobile()&&t(a.parentElement?a.parentElement:
a);var k=R(b),l=0,m=0,p=0,q=0,v=-1,r=e.move_dir_cd;a=e.hM;var u=e.ES,x=e.ZQ,y=e.TQ,A=e.HS,C=e.cP;V(1,e.dP,function(a){if(h()){var e=p+q;p=a;a=p+q;var d=l+m;w.set_character_move_dir(b,a,d);c&&c(a,d);f(a,d);r&&e!=a&&r(a,d,0)}});V(1,a,g);V(1,u,d);V(1,x,function(a){if(h()){4==k.cl.id&&(a=0);var e=l+m;l=a;a=p+q;var d=l+m;w.set_character_move_dir(b,a,d);c&&c(a,d);f(a,d);r&&e!=d&&r(a,d,0)}});V(1,y,function(a){h()&&0<a&&(w.character_jump(b),r&&r(p+q,l+m,1))});V(3,[ea.GMPD_AXIS_0],d);V(3,[ea.GMPD_AXIS_1],
g);V(1,A,function(a){v=a;Math.abs(p+q)+Math.abs(l+m)?(0<a?D(k,2):D(k,1),r&&r(p+q,l+m,0)):D(k,0)});V(1,C,function(a){0<a&&(a=Ma.cl.id,1==a||0==a?D(k,3):D(k,1))})}function E(){Ma||(Ma={Ha:[],cl:null,lock:!1,YQ:null});return Ma}function N(a,b,c,e){a.Ha.push({id:b,Ry:c,ZD:e,YD:null,ez:null})}function U(a){for(var b=[],c=0;c<a.Ha;c++){var e=a.Ha[c].id;if(0<=b.indexOf(e))return!1;b.push(e)}for(c=0;c<a.Ha;c++)for(var e=a.Ha[c],d=0;d<e.Ry.length;d++)if(0>b.indexOf(e.Ry[d]))return!1;return!0}function K(a,
b){for(var c=null,e=0;e<a.Ha.length;e++)if(a.Ha[e].id==b){c=a.Ha[e];break}return c}function D(a,b){a.YQ=b;if(!a.lock){var c=a.cl,e=c.id;if(0<=c.Ry.indexOf(b)){var d=!0;c.YD&&(d=c.YD(e,b));d&&(a.cl=K(a,b),c.ZD&&c.ZD(e,b),c.ez&&c.ez(e,b))}}}function R(a){function b(b,c){switch(c){case 0:case 1:w.set_character_move_type(a,w.CM_WALK);break;case 2:w.set_character_move_type(a,w.CM_RUN);break;case 3:w.set_character_move_type(a,w.CM_FLY);break;case 4:w.set_character_move_type(a,w.CM_CLIMB)}}var c=E();N(c,
0,[1,3,2,4],b);N(c,1,[2,3,4,0],b);N(c,2,[1,3,4,0],b);N(c,3,[1],b);N(c,4,[1,2,0],b);U(c);c.cl=K(c,0);return Ma}function V(a,b,c){if(b.length){for(var e=[],d=0;d<b.length;d++)if("number"==typeof b[d])300>b[d]?e.push(z.create_keyboard_sensor(b[d])):326>b[d]?e.push(z.create_gamepad_btn_sensor(b[d],Aa)):e.push(z.create_gamepad_axis_sensor(b[d]));else if("string"==typeof b[d]){var g=document.getElementById(b[d]);g?e.push(z.create_touch_click_sensor(g)):Z.error("Couldn't find element with "+b[d]+" ID.")}b=
function(){return!1};d=z.CT_SHOT;g=function(){};switch(a){case 1:d=z.CT_TRIGGER;b=function(a){for(var b=0;b<a.length;b++)if(a[b])return!0;return!1};g=function(a,b,e){0<e?c(1):c(0)};break;case 2:d=z.CT_TRIGGER;b=function(a){for(var b=0;b<a.length;b++)if(a[b])return!0;return!1};g=function(a,b,e){0>e?c(1):c(0)};break;case 3:d=z.CT_CONTINUOUS,b=function(a){for(var b=0;b<a.length;b++)if(.05<Math.abs(a[b]))return!0;return!1},g=function(a,b,e,d){if(0<e)for(e=0;e<d;e++){var g=z.get_sensor_value(a,b,e);if(.05<
Math.abs(g)){c(g);break}}else c(0)}}z.create_sensor_manifold(null,"FPS_USER_CONTROL_ACTION_"+Ja.toString(),d,e,b,g,e.length);Ja++}}var F=Object(O.a)(d),z=Object(T.a)(d),w=Object(G.a)(d),W=Object(r.a)(d),A=Object(f.a)(d),n=Object(k.a)(d),g=Object(y.a)(d),ea=Object(x.a)(d),ka=Object(m.a)(d),wa=Object(p.a)(d),M=Object(q.a)(d),Ea=Object(u.a)(d),Z=Object(h.a)(d),aa=(-Math.PI+.1)/2,oa=(Math.PI-.1)/2,ja=new Float32Array(2),Ia=1,Ca=4E-4,Ja=0,Ma=null,X=null,Q={Fz:null,lr:null},Aa=0,Ba=4,Va=!1,Ra=new Float32Array(2),
ta=new Float32Array(3),ha=new Float32Array(3),ga=null,P=null;e.append_switch_vr_cbs=function(a){ga=a};e.CS_STAY=0;e.CS_WALK=1;e.CS_RUN=2;e.CS_FLY=3;e.CS_CLIMB=4;e.AT_PRESSED=1;e.AT_RELEASED=2;e.AT_CONTINUOUS=3;e.bind_action=V;e.enable_fps_controls=function(e){e=e||{lock_camera:!0};var d=e.character||W.get_first_character();if(d){var f=e.element||g.get_canvas(),h=e.motion_cb||null;Aa=e.gamepad_id||0;var k=e.forward_sens||[z.KEY_W,ea.GMPD_BUTTON_12],l=e.backward_sens||[z.KEY_S,ea.GMPD_BUTTON_13],m=
e.right_sens||[z.KEY_D,ea.GMPD_BUTTON_15],p=e.left_sens||[z.KEY_A,ea.GMPD_BUTTON_14],q=e.jump_sens||[z.KEY_SPACE,ea.GMPD_BUTTON_1],v=e.eY||[z.KEY_SHIFT,ea.GMPD_BUTTON_7],r=e.fly_sens||[];n.detect_mobile()&&(k.push("B4W_DEFAULT_BTN_1"),l.push("B4W_DEFAULT_BTN_2"));k={dP:k,hM:l,ES:m,ZQ:p,TQ:q,HS:v,cP:r,move_dir_cd:e.move_dir_cd||null};c=e.rotation_cb||a;l="undefined"!=typeof e.lock_camera?e.lock_camera:!0;e=W.get_active_camera();l&&(l=wa.get_translation(e,ta),m=wa.get_translation(d,ha),b.subtract(l,
m,l),M.append_stiff_trans(e,d,l));e=F.get_camera_angles_char(e,Ra);w.set_character_rotation_h(d,e[0]);w.set_character_vert_move_dir_angle(d,e[1]);H()&&C(f,d);B(f,d);I(f,d,h,k)}};e.disable_fps_controls=function(a,b){a=a||W.get_first_character();b=b||g.get_container();if(a){for(var c=0;c<Ja;c++)z.remove_sensor_manifold(null,"FPS_USER_CONTROL_ACTION_"+c.toString());var c=a,e=b;v(e)&&!n.detect_mobile()&&(Q.lr&&Q.lr(e),z.remove_sensor_manifold(c,"FPS_PLOCK"),z.remove_sensor_manifold(null,"FPS_ACTIVATE_PLOCK"));
c=a;if(!v(b)||n.detect_mobile())z.remove_sensor_manifold(c,"FPS_CAM_ROT"),z.remove_sensor_manifold(c,"FPS_DRAG_PRESS"),z.remove_sensor_manifold(c,"FPS_DRAG_MOVE"),z.remove_sensor_manifold(c,"FPS_SMOOTH_DRAG");c=a;H()&&z.remove_sensor_manifold(c,"FPS_CHARECTER_VR_ROT");c=b;if(n.detect_mobile()){var e=document.getElementById("B4W_DEFAULT_BTN_1"),d=document.getElementById("B4W_DEFAULT_BTN_2");e&&c.removeChild(e);d&&c.removeChild(d)}}};e.set_state_change_cb=function(a,b){K(Ma,a).ez=b};e.set_cam_smooth_factor=
function(a){z.set_plock_smooth_factor(a);Ia=a};e.get_cam_smooth_factor=function(){return Ia};e.set_cam_sensitivity=function(a){Ca=a/2E5};e.get_cam_sensitivity=function(){return 2E5*Ca};e.set_plock_enable_cb=function(a){Q.Fz=a};e.set_plock_disable_cb=function(a){Q.lr=a};e.get_character_state=function(){return Ma.cl.id};e.add_new_state=function(){return Ba++};e.add_state=function(a,b,c){var e=E();N(e,a,b,c);U(e)||Z.error("Incorrect state machine.")};e.switch_state=function(a){var b=E();D(b,a)};e.lock_character=
function(){E().lock=!0};e.unlock_character=function(){E().lock=!1};e.is_character_locked=function(){return E().lock};e.set_rotation_cb=function(b){b?c=b:c=a};e.freeze_movements=function(){Va=!0};e.unfreeze_movements=function(){Va=!1}});t.a=d},function(E,t,d){E=d(0);var O=d(39),T=d(24),G=d(49),r=d(69);d=Object(E.a)("gp_conf",function(d,k){function f(){V.length=0;for(var a=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[],b=0;b<a.length;b++)a[b]&&
V.push(a[b]);return V}function x(a){var b=E.get(a+"_gmpd_stngs","b4w");if(b){var b=JSON.parse(b),c;for(c in b)t.set_gamepad_key(a,c,b[c])}else c=JSON.stringify(B),E.set(a+"_gmpd_stngs",c,"b4w")}function m(a){W=!0;var b=document.createElement("div"),c=document.createElement("div"),e=document.createElement("div"),d=document.createElement("div"),f=document.createElement("div"),k=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div"),n=document.createElement("div"),
p=document.createElement("div"),q=document.createElement("div"),r=document.createElement("div"),u=document.createElement("div"),x=document.createElement("div"),y=document.createElement("div"),A=document.createElement("div"),B=document.createElement("div"),L=document.createElement("div"),D=document.createElement("div"),H=document.createElement("div"),I=document.createElement("div"),G=document.createElement("div");N=b;b.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+
btoa('<svg id="svg26627" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="128.51mm" viewBox="0 0 636.63517 455.33329" width="179.67mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:dc="http://purl.org/dc/elements/1.1/"><defs id="defs26629"><linearGradient id="linearGradient4691"><stop id="stop4693" offset="0"/><stop id="stop4695" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4358"><stop id="stop4360" stop-color="#2e2e2e" offset="0"/><stop id="stop4362" stop-color="#2e2e2e" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4364" x1="1141.5" xlink:href="#linearGradient4358" gradientUnits="userSpaceOnUse" y1="255.95" gradientTransform="matrix(-1 0 0 1 1531.4 560.1)" x2="1165.2" y2="309.88"/><linearGradient id="linearGradient4368" x1="1141.5" xlink:href="#linearGradient4358" gradientUnits="userSpaceOnUse" y1="255.95" gradientTransform="translate(-896.37 560.1)" x2="1165.2" y2="309.88"/><linearGradient id="linearGradient4430" x1="959.32" gradientUnits="userSpaceOnUse" y1="653.07" gradientTransform="matrix(-1 0 0 1 1531.4 70.097)" x2="1467.6" y2="653.07"><stop id="stop4426" stop-color="#4f4f4f" offset="0"/><stop id="stop4428" stop-color="#4f4f4f" stop-opacity="0" offset="1"/></linearGradient><linearGradient id="linearGradient4701" x1="529.91" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="111.1" gradientTransform="translate(-52.276 546.89)" x2="481.49" y2="85.746"/><linearGradient id="linearGradient4713" x1="529.91" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="111.1" gradientTransform="matrix(-1 0 0 1 689.01 546.89)" x2="481.49" y2="85.746"/><linearGradient id="linearGradient4725" x1="367.39" xlink:href="#linearGradient4691" gradientUnits="userSpaceOnUse" y1="125.6" gradientTransform="matrix(-1.3272 0 0 .68317 806.95 579.14)" x2="367.39" y2="116.11"/></defs><metadata id="metadata26632"><rdf:RDF><cc:Work rdf:about="">    <dc:format>image/svg+xml</dc:format>    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>    <dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -597.03)"><g id="g20" fill-rule="evenodd"><path id="path4209" fill="#434343" d="m576.71 1052.4c42.015-1.9097 64.296-46.468 59.204-122.86-5.0928-76.387-27.374-175.69-44.562-224.7-17.188-49.015-25.501-62.531-26.737-65.565-3.7697-9.2504-11.278-19.949-62.379-27.691-28.97-4.3891-16.697-7.9577-27.084-9.4696-17.96-2.6141-43.609-1.229-52.203 1.6354-8.594 2.8645-12.709 29.16-24.486 35.207-11.777 6.0473-19.416 10.185-80.149 10.185s-68.372-4.1376-80.149-10.185c-11.777-6.0473-18.113-32.099-25.736-36.993-11.183-7.1796-26.985-5.6722-54.891-0.57481-5.64 1.0302-1.1304 7.6212-18.165 12.509-32.913 9.4438-52.094 3.7056-65.087 20.831-1.9807 2.6106-11.822 21.096-29.01 70.111-17.179 48.95-39.46 148.25-44.553 224.64-5.0929 76.39 17.188 120.99 59.204 122.89 73.339-1.7 55.219-116.53 258.4-116.53s185.05 114.82 258.4 116.49z"/><path id="path4366" fill="url(#linearGradient4368)" d="m249.77 838.51c-107.76 0-171.55 96.288-176.84 121.23-5.2294 24.634-17.658 55.705 3.8195 53.789 9.6996-0.8655 18.053-15.713 37.559-38.193 18.78-21.643 41.379-54.425 96.763-54.425s73.209-44.877 75.119-53.152c1.9098-8.2752 2.4146-27.976-36.418-29.25z"/><path id="path4217" fill="url(#linearGradient4364)" d="m385.23 838.51c107.76 0 171.55 96.288 176.84 121.23 5.2293 24.634 17.658 55.705-3.8195 53.789-9.6996-0.8655-18.053-15.713-37.559-38.193-18.78-21.643-41.379-54.425-96.763-54.425s-73.209-44.877-75.119-53.152c-1.9098-8.2752-2.4146-27.976 36.418-29.25z"/><path id="path4370" fill="url(#linearGradient4430)" d="m572.06 654.81c-60.48-19.09-76.79-18.6-89.84-17.96-13.05 0.63657-22.638 16.617-45.237 49.4s-67.48 125.27-116.23 125.27c-48.746 0-93.626-92.491-116.23-125.27-22.599-32.783-32.008-48.942-45.059-49.579-13.05-0.63648-35.251 1.8354-95.728 20.932l1.1161-2.3404c60.494-19.1 81.754-20.83 94.804-20.19 13.05 0.63657 22.281 13.049 44.88 45.832s67.48 123.49 116.23 123.49c48.746 0 93.626-90.709 116.23-123.49 22.599-32.783 31.83-45.195 44.88-45.832 13.05-0.63648 28.783-1.6248 89.26 17.472"/><path id="path4315" fill="#343434" d="m570.99 652.48c-60.477-19.097-76.074-18.269-89.124-17.633-13.05 0.63658-22.281 14.832-44.88 47.614-22.599 32.783-67.48 125.27-116.23 125.27-48.746 0-93.626-92.491-116.23-125.27-22.599-32.783-31.83-46.978-44.88-47.614-13.05-0.63648-34.715 1.2996-95.192 20.396l1.1161-2.3404c60.474-19.1 81.024-22.26 94.074-21.62 13.05 0.63658 22.281 13.049 44.88 45.832s67.48 123.49 116.23 123.49c48.746 0 93.626-90.709 116.23-123.49 22.599-32.783 31.83-45.195 44.88-45.832 13.05-0.63647 27.71-0.17274 88.186 18.924"/></g><g id="g15645" transform="matrix(.75439 0 0 1 1558.5 -6638.3)" fill-rule="evenodd"><rect id="rect15584" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="2" ry="1.8461" height="44.307" width="570" y="6558.3" x="100.71" fill="#4164bb"/><rect id="rect15331" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="2" ry="1.8461" height="44.307" width="570" y="6554.6" x="100.71" fill="#5276cf"/></g><text id="text15623-9" style="word-spacing:0px;letter-spacing:0px" font-weight="300" xml:space="preserve" font-size="22px" line-height="430.99999428%" y="-53.755863" x="1792.7805" font-family="&apos;Noto Sans CJK TC&apos;" fill="#ffffff"><tspan id="tspan15625-5" y="-53.755863" x="1792.7805"/></text><text id="text15657" style="word-spacing:0px;letter-spacing:0px" font-weight="300" xml:space="preserve" font-size="13px" line-height="430.99999428%" y="-3.7607465" x="1670.2437" font-family="&apos;Noto Sans CJK TC&apos;" fill="#828282"><tspan id="tspan15659" y="-3.7607465" x="1670.2437"/></text><g id="g34" fill-rule="evenodd"><path id="path4675" fill="#303030" d="m551.75 628.4c9.3003 4.1796 8.2375 11.558 2.1302 9.9581-6.1073-1.6003-33.792-9.1405-46.239-11.577-12.446-2.4363-34.904-3.0623-36.951-4.0165-2.0474-0.95416 0.93313-7.7247 5.491-7.3449 23.258 0.91012 59.905 6.0339 75.569 12.98z"/><path id="path4677" fill="#303030" d="m474.88 602.61c3.6488 0.63684 4.1169 1.3708 2.4115 5.2499-0.80967 1.8416-1.261 3.904-3.4715 3.7336-4.456-0.34344-16.578-1.2846-25.692-1.3764-9.1139-0.0918-23.83 1.217-25.307 0.79399-1.4771-0.42301-1.8834-4.9141 1.7769-6.7458 4.6221-1.3593 38.698-3.2021 50.281-1.6553z"/><path id="path4699" opacity=".384" fill="url(#linearGradient4701)" d="m475.53 611.7c-11.693-0.63604-8.4597-0.73151-44.068 54.448-6.5182 8.6489-22.874 37.231-36.865 35.326-6.7491-1.4177 15.436-67.299 22.724-75.767 11.112-12.911 19.255-16.122 58.209-14.007z"/><path id="path4703" fill="#303030" d="m84.068 628.4c-9.3003 4.1796-8.2375 11.558-2.1302 9.9581 6.1073-1.6003 33.792-9.1405 46.239-11.577 12.446-2.4363 34.904-3.0623 36.951-4.0165 2.0474-0.95416-0.93313-7.7247-5.491-7.3449-23.258 0.91012-59.905 6.0339-75.569 12.98z"/><path id="path4705" fill="#303030" d="m161.86 602.61c-3.6488 0.63684-4.1169 1.3708-2.4115 5.2499 0.80967 1.8416 1.261 3.904 3.4715 3.7336 4.456-0.34344 16.578-1.2846 25.692-1.3764 9.1139-0.0918 23.83 1.217 25.307 0.79399 1.4771-0.42301 1.8834-4.9141-1.7769-6.7458-4.6221-1.3593-38.698-3.2021-50.281-1.6553z"/><path id="path4711" opacity=".384" fill="url(#linearGradient4713)" d="m161.2 611.7c11.693-0.63604 8.4597-0.73151 44.068 54.448 6.5182 8.6489 22.874 37.231 36.865 35.326 6.7491-1.4177-15.436-67.299-22.724-75.767-11.112-12.911-19.255-16.122-58.209-14.007z"/><path id="path4717" opacity=".115" fill="url(#linearGradient4725)" d="m413.37 645.84c-9.0496 10.007-29.401 19.937-36.775 19.937h-52.205c-31.171 0-37.359 0.34506-47.75 0.51758-10.39 0.17253-18.682 0.65628-23.653-3.278-5.0513-3.9977-24-15.425-24-15.425 53.346 4.1464 144.49 4.3368 184.38-1.7523z"/></g></g><g id="layer1-0" fill-rule="evenodd" transform="translate(159.08 -720.76)"><g id="g4527-3" transform="translate(-961.22,330.69)"><ellipse id="circle4233-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="circle4235-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="circle4237-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g><g id="g4523-1" transform="translate(-961.22,330.69)"><ellipse id="circle4239-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="circle4243-3" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g><g id="g3506" transform="translate(-961.22,330.69)"><ellipse id="ellipse3508" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="ellipse3510" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="ellipse3512" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g></g><g id="layer1-7" fill-rule="evenodd" transform="translate(352.57 -719.72)"><g id="g4527-3-4" transform="translate(-961.22,330.69)"><ellipse id="circle4233-8-8" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="circle4235-8-9" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="circle4237-7-3" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g><g id="g4523-1-1" transform="translate(-961.22,330.69)"><ellipse id="circle4239-4-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="circle4243-3-5" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g><g id="g3506-2" transform="translate(-961.22,330.69)"><ellipse id="ellipse3508-1" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="66.284" ry="66.279" cy="655.39" cx="1027.5" fill="#303030"/><ellipse id="ellipse3510-1" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="62.007" ry="62.003" cy="655.39" cx="1027.5" fill="#4c4c4c"/><ellipse id="ellipse3512-4" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="43.41" ry="43.408" cy="655.39" cx="1027.5" fill="#303030"/></g></g></svg>')+
"');width: 637px;height: 455px;background-size: 100% 100%;left: 50%;margin-bottom: 40px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);bottom: 0px;";c.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3904" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="35.924mm" width="35.926mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 127.29808 127.28933"><metadata id="metadata3909"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -925.07)"><ellipse id="circle4330" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="63.649" ry="63.645" cy="988.72" cx="63.649" fill="#303030"/><ellipse id="circle4223" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="59.705" ry="59.701" cy="988.72" cx="63.649" fill="#4c4c4c"/></g></svg>')+
"');position: absolute;top: 47px;left: 65px;width: 135px;height: 135px;";e.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4326" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1017.1c-15.254-3.8172-24.634-1.7612-34.31 0v16.247h0.015c-0.013 0.097-0.013 0.1951-0.015 0.2928 0.0006 9.4753 7.6813 18.256 17.156 18.256 9.4739-0.0005 17.154-8.7813 17.154-18.256 0-0.097-0.014-0.1952-0.014-0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 36px;height: 38px;left: 49px;top: 8px;position: absolute;";d.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m35.298 1017.6c3.8175 15.253 1.7611 24.633 0 34.308h-16.248v-0.015c-0.098 0.01-0.1952 0.01-0.2928 0.015-9.476-0.0006-18.258-7.6807-18.257-17.154 0.0005-9.4733 8.7818-17.153 18.257-17.153 0.098 0 0.1952 0.01 0.2928 0.011v-0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 38px;height: 36px;top: 47px;left: 84px;position: absolute;";f.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4328" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1049.7c-15.254 3.8172-24.634 1.7612-34.31 0v-16.247h0.015c-0.013-0.097-0.013-0.1951-0.015-0.2928 0.0006-9.4753 7.6813-18.256 17.156-18.256 9.4739 0.0005 17.154 8.7813 17.154 18.256 0 0.097-0.014 0.1952-0.014 0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 36px;height: 38px;bottom: 11px;left: 51px;position: absolute;";k.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m2.6552 1051.9c-3.8175-15.253-1.7611-24.633 0-34.308h16.248v0.015c0.098-0.01 0.1952-0.01 0.2928-0.015 9.476 0.0006 18.258 7.6807 18.257 17.154-0.0005 9.4733-8.7818 17.153-18.257 17.153-0.098 0-0.1952-0.01-0.2928-0.011v0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>')+
"');width: 38px;height: 36px;top: 47px;left: 13px;position: absolute;";l.style.cssText="position: absolute;top: 55px;left: 434px;width: 150px;height: 150px;";m.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 53px;top: 0px;position: absolute;";n.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 107px;top: 51px;position: absolute;";p.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;left: 53px;bottom: 0px;position: absolute;";q.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>')+
"');width: 50px;height: 50px;top: 51px;position: absolute;";r.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>')+
"');position: absolute;top: 222px;left: 183px;width: 85px;height: 85px;";u.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>')+
"');position: absolute;top: 223px;left: 376px;width: 85px;height: 85px;";x.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>')+
"');position: absolute;top: 76px;left: 227px;width: 34px;height: 34px;";y.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>')+
"');position: absolute;top: 76px;left: 376px;width: 34px;height: 34px;";A.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="21.241671mm" height="8.8544388mm" viewBox="0 0 75.265762 31.373996" id="svg3447" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="l1.svg"><defs id="defs3449" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="-254.57869" inkscape:cy="228.81952" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(1.5000945e-8,-1020.9882)"><path style="fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.026383,1051.1651 c -7.4440599,1.9144 -7.5133499,2.2466 -9.7963799,-4.4934 -1.81058997,-5.3452 -2.44278,-8.8152 4.01547,-12.116 2.74038,-1.4007 13.7365799,-5.877 38.4768299,-10.72 24.26031,-4.749 25.16653,-2.7967 26.79132,0.3418 1.15503,2.2311 1.8961,4.1561 2.94279,6.651 3.08552,8.5188 2.92609,8.5778 -6.08214,9.5501 -19.09891,2.1414 -37.95723,5.8307 -56.34789,10.7865 z" id="path4289" inkscape:connector-curvature="0" sodipodi:nodetypes="cssssccc" /></g></svg>')+
"');position: absolute;top: 4px;left: 78px;width: 79px;height: 33px;";B.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3447" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="8.8544mm" width="21.242mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 75.265762 31.373996"><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(1.5001e-8 -1021)"><path id="path4715" d="m64.239 1051.2c7.4441 1.9144 7.5134 2.2466 9.7964-4.4934 1.8106-5.3452 2.4428-8.8152-4.0155-12.116-2.7404-1.4007-13.737-5.877-38.477-10.72-24.26-4.749-25.167-2.7967-26.791 0.3418-1.155 2.2311-1.8961 4.1561-2.9428 6.651-3.0855 8.5188-2.9261 8.5778 6.0822 9.5501 19.099 2.1414 37.957 5.8307 56.348 10.786z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: 4px;left: 477px;width: 79px;height: 33px;";L.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: -7px;left: 425px;width: 50px;height: 17px;";D.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>')+
"');position: absolute;top: -7px;left: 164px;width: 50px;height: 17px;";H.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24.603382mm" height="24.601696mm" viewBox="0 0 87.177338 87.171363" id="svg3640" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="main.svg"><defs id="defs3642" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.979899" inkscape:cx="61.113463" inkscape:cy="69.71796" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3645"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-965.19093)"><ellipse ry="43.585682" rx="43.588669" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#2e2e2e;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="ellipse4372" cx="43.588669" cy="1008.7766" /><ellipse cy="1008.7766" cx="43.588669" id="circle4239-1" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:#4364b2;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" rx="40.056705" ry="40.053959" /><ellipse style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#434343;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="circle4243-0" cx="43.588669" cy="1008.7766" rx="31.455994" ry="31.453836" /></g></svg>')+
"');position: absolute;top: 68px;left: 274px;width: 92px;height: 92px;";I.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>')+
"');position: absolute;top: 186px;left: 148px;width: 157px;height: 157px;";G.style.cssText="background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>')+
"');position: absolute;top: 187px;left: 339px;width: 157px;height: 157px;";b.appendChild(I);b.appendChild(G);c.appendChild(e);c.appendChild(d);c.appendChild(f);c.appendChild(k);b.appendChild(c);l.appendChild(m);l.appendChild(n);l.appendChild(p);l.appendChild(q);b.appendChild(l);b.appendChild(r);b.appendChild(u);b.appendChild(x);b.appendChild(y);b.appendChild(A);b.appendChild(B);b.appendChild(L);a.appendChild(b);b.appendChild(D);b.appendChild(H);F.length=0;C.length=0;z.length=0;w.length=0;F.push(p,
n,q,m,A,B,D,L,x,y,r,u,e,f,k,d,H);C.push('<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg id="svg3548" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="13.417mm" width="13.418mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 47.543997 47.542"><metadata id="metadata3553"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1004.8)"><ellipse id="circle4271" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="23.772" ry="23.771" cy="1028.6" cx="23.772" fill="#303030"/><ellipse id="circle4273" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="18.668" ry="18.667" stroke="#3b63c9" cy="1028.6" cx="23.772" fill="#5276cf"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="21.241671mm" height="8.8544388mm" viewBox="0 0 75.265762 31.373996" id="svg3447" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="l1.svg"><defs id="defs3449" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.4" inkscape:cx="-254.57869" inkscape:cy="228.81952" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(1.5000945e-8,-1020.9882)"><path style="fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 11.026383,1051.1651 c -7.4440599,1.9144 -7.5133499,2.2466 -9.7963799,-4.4934 -1.81058997,-5.3452 -2.44278,-8.8152 4.01547,-12.116 2.74038,-1.4007 13.7365799,-5.877 38.4768299,-10.72 24.26031,-4.749 25.16653,-2.7967 26.79132,0.3418 1.15503,2.2311 1.8961,4.1561 2.94279,6.651 3.08552,8.5188 2.92609,8.5778 -6.08214,9.5501 -19.09891,2.1414 -37.95723,5.8307 -56.34789,10.7865 z" id="path4289" inkscape:connector-curvature="0" sodipodi:nodetypes="cssssccc" /></g></svg>',
'<svg id="svg3447" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="8.8544mm" width="21.242mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 75.265762 31.373996"><metadata id="metadata3452"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(1.5001e-8 -1021)"><path id="path4715" d="m64.239 1051.2c7.4441 1.9144 7.5134 2.2466 9.7964-4.4934 1.8106-5.3452 2.4428-8.8152-4.0155-12.116-2.7404-1.4007-13.737-5.877-38.477-10.72-24.26-4.749-25.167-2.7967-26.791 0.3418-1.155 2.2311-1.8961 4.1561-2.9428 6.651-3.0855 8.5188-2.9261 8.5778 6.0822 9.5501 19.099 2.1414 37.957 5.8307 56.348 10.786z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3560" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="4.7796mm" width="13.57mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 48.082162 16.935645"><metadata id="metadata3565"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1035.4)"><path id="path4727" d="m42.857 1052.2c4.7071 0.4081 4.7981 0.6563 5.1414-4.9139 0.16344-2.6517 0.16699-6.1108-0.72615-8.0342-0.59471-1.2808-1.7793-2.049-3.7642-2.4662-2.5264-0.531-16.253-1.4345-26.685-1.3241-15.118 0.16-15.362 1.4769-15.855 4.1522-0.35071 1.9018-0.5016 3.5056-0.74837 5.5967-0.55261 7.0693-0.44908 7.0921 5.0452 6.5411 11.661-1.1062 25.929-0.7359 37.592 0.4484z" fill-rule="evenodd" fill="#5276cf"/></g></svg>',
'<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>',
'<svg id="svg3699" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2811mm" width="9.2817mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.8879 32.88565"><metadata id="metadata3704"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" fill-rule="evenodd" transform="translate(0 -1019.5)"><ellipse id="ellipse4575" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="16.444" ry="16.443" cy="1035.9" cx="16.444" fill="#2e2e2e"/><ellipse id="ellipse4577" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" stroke-linecap="round" rx="15.112" ry="15.11" stroke="#4364b2" cy="1035.9" cx="16.444" fill="#5276cf"/><ellipse id="ellipse4579" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="11.867" ry="11.866" cy="1035.9" cx="16.444" fill="#434343"/></g></svg>',
'<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>',
'<svg id="svg3461" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="22.608mm" width="22.61mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 80.114398 80.108405"><metadata id="metadata3466"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(.0000019915 -972.25)"><g id="g3514-7" fill-rule="evenodd" transform="translate(-987.45 356.91)"><ellipse id="ellipse3516-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="40.057" ry="40.054" cy="655.39" cx="1027.5" fill="#3b63c9"/><ellipse id="ellipse3518-7" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" rx="36.23" ry="36.228" cy="655.39" cx="1027.5" fill="#5276cf"/></g></g></svg>',
'<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4326" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1017.1c-15.254-3.8172-24.634-1.7612-34.31 0v16.247h0.015c-0.013 0.097-0.013 0.1951-0.015 0.2928 0.0006 9.4753 7.6813 18.256 17.156 18.256 9.4739-0.0005 17.154-8.7813 17.154-18.256 0-0.097-0.014-0.1952-0.014-0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3754" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.711mm" width="9.9653mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 35.3101 37.950677"><metadata id="metadata3759"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1014.4)"><path id="path4328" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m34.81 1049.7c-15.254 3.8172-24.634 1.7612-34.31 0v-16.247h0.015c-0.013-0.097-0.013-0.1951-0.015-0.2928 0.0006-9.4753 7.6813-18.256 17.156-18.256 9.4739 0.0005 17.154 8.7813 17.154 18.256 0 0.097-0.014 0.1952-0.014 0.2928h0.014z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m2.6552 1051.9c-3.8175-15.253-1.7611-24.633 0-34.308h16.248v0.015c0.098-0.01 0.1952-0.01 0.2928-0.015 9.476 0.0006 18.258 7.6807 18.257 17.154-0.0005 9.4733-8.7818 17.153-18.257 17.153-0.098 0-0.1952-0.01-0.2928-0.011v0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg id="svg3790" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.9646mm" width="10.711mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 37.953175 35.3077"><metadata id="metadata3795"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1017.1)"><path id="path4324" stroke-linejoin="round" style="color-rendering:auto;color:#000000;isolation:auto;mix-blend-mode:normal;shape-rendering:auto;solid-color:#000000;image-rendering:auto" d="m35.298 1017.6c3.8175 15.253 1.7611 24.633 0 34.308h-16.248v-0.015c-0.098 0.01-0.1952 0.01-0.2928 0.015-9.476-0.0006-18.258-7.6807-18.257-17.154 0.0005-9.4733 8.7818-17.153 18.257-17.153 0.098 0 0.1952 0.01 0.2928 0.011v-0.011z" fill-rule="evenodd" stroke="#4364b2" stroke-linecap="round" fill="#5276cf"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="24.603382mm" height="24.601696mm" viewBox="0 0 87.177338 87.171363" id="svg3640" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="main.svg"><defs id="defs3642" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="1.979899" inkscape:cx="61.113463" inkscape:cy="69.71796" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3645"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(0,-965.19093)"><ellipse ry="43.585682" rx="43.588669" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#2e2e2e;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="ellipse4372" cx="43.588669" cy="1008.7766" /><ellipse cy="1008.7766" cx="43.588669" id="circle4239-1" style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#5276cf;fill-opacity:1;fill-rule:evenodd;stroke:#4364b2;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" rx="40.056705" ry="40.053959" /><ellipse style="color:#000000;clip-rule:nonzero;display:inline;overflow:visible;visibility:visible;opacity:1;isolation:auto;mix-blend-mode:normal;color-interpolation:sRGB;color-interpolation-filters:linearRGB;solid-color:#000000;solid-opacity:1;fill:#434343;fill-opacity:1;fill-rule:evenodd;stroke:none;stroke-width:0.99999994;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;color-rendering:auto;image-rendering:auto;shape-rendering:auto;text-rendering:auto;enable-background:accumulate" id="circle4243-0" cx="43.588669" cy="1008.7766" rx="31.455994" ry="31.453836" /></g></svg>');
z.push(r,r,u,u);w.push(I,G);for(a=0;a<F.length;a++)F[a].setAttribute("id","pad_btn_"+a),F[a].setAttribute("data-colorstate","B"),F[a].setAttribute("data-key",a),F[a].setAttribute("data-svgid",a);I.setAttribute("id","pad_left_axis");I.setAttribute("data-colorstate","GR");I.setAttribute("data-key",t.GMPD_AXIS_0);I.setAttribute("data-svgid",C.length);G.setAttribute("id","pad_right_axis");G.setAttribute("data-colorstate","GR");G.setAttribute("data-key",t.GMPD_AXIS_2);G.setAttribute("data-svgid",C.length+
1);C.push('<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>',
'<svg id="svg3407" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="41.787mm" width="41.786mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 148.0624 148.06251"><metadata id="metadata3412"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -904.3)" fill="#e6e6e6"><path id="rect4545" d="m74.031 904.3-14.469 22.156h8.0313v8.2187h12.875v-8.2187h8.0625l-14.5-22.156z"/><path id="rect4603" d="m125.94 963.86v8.0313h-8.25v12.906h8.25v8.0313l22.125-14.5-22.125-14.469z"/><path id="rect4609" d="m67.594 1022v8.25h-8.0313l14.469 22.125 14.5-22.125h-8.0625v-8.25h-12.875z"/><path id="rect4615" d="m22.156 963.86-22.156 14.47l22.156 14.5v-8.2188h8.2188v-12.906h-8.2188v-7.8438z"/><path id="path4619" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m54.393 924.58c-15.821 5.7885-28.404 18.385-34.188 34.219h11.156c4.6667-10.175 12.865-18.361 23.031-23.031v-11.188zm39.219 0.031v11.156c10.167 4.6713 18.361 12.86 23.031 23.031h11.156c-5.7846-15.821-18.379-28.393-34.188-34.188zm-73.375 73.438c5.7899 15.816 18.348 28.403 34.156 34.188v-11.156c-10.163-4.6691-18.364-12.861-23.031-23.031h-11.125zm96.406 0c-4.6712 10.167-12.868 18.361-23.031 23.031v11.125c15.796-5.7901 28.366-18.352 34.156-34.156h-11.125z"/></g></svg>');
h(F,v);h(w,"#e6e6e6")}function p(b){return[a.create_gamepad_btn_sensor(t.GMPD_BUTTON_0,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_1,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_2,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_3,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_4,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_5,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_6,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_7,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_8,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_9,
b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_10,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_11,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_12,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_13,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_14,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_15,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_16,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_17,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_18,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_19,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_20,
b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_21,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_22,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_23,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_24,b),a.create_gamepad_btn_sensor(t.GMPD_BUTTON_25,b)]}function q(b){return[a.create_gamepad_axis_sensor(t.GMPD_AXIS_0,b),a.create_gamepad_axis_sensor(t.GMPD_AXIS_1,b),a.create_gamepad_axis_sensor(t.GMPD_AXIS_2,b),a.create_gamepad_axis_sensor(t.GMPD_AXIS_3,b),a.create_gamepad_axis_sensor(t.GMPD_AXIS_4,b),a.create_gamepad_axis_sensor(t.GMPD_AXIS_5,
b),a.create_gamepad_axis_sensor(t.GMPD_AXIS_6,b),a.create_gamepad_axis_sensor(t.GMPD_AXIS_7,b),a.create_gamepad_axis_sensor(t.GMPD_AXIS_8,b),a.create_gamepad_axis_sensor(t.GMPD_AXIS_9,b),a.create_gamepad_axis_sensor(t.GMPD_AXIS_10,b),a.create_gamepad_axis_sensor(t.GMPD_AXIS_11,b)]}function b(a,b){var c=document.createElement("input");c.style.cssText="display: inline-block;position = relative;";c.setAttribute("type","radio");c.setAttribute("name","choice");var e=document.createElement("label");e.textContent=
b;e.style.cssText="position = relative;display: inline-block;color: white;";a.appendChild(c);a.appendChild(e);return c}function u(a){da.removeChild(N);N=null;switch(a){case "PAD":D.checked=!0;m(da);break;case "WHEEL":K.checked=!0;var b=da;W=!1;var c=document.createElement("div"),e=document.createElement("div"),d=document.createElement("div"),f=document.createElement("div"),k=document.createElement("div"),l=document.createElement("div"),n=document.createElement("div"),p=document.createElement("div"),
q=document.createElement("div"),r=document.createElement("div"),u=document.createElement("div"),x=document.createElement("div"),y=document.createElement("div"),A=document.createElement("div"),B=document.createElement("div"),L=document.createElement("div"),H=document.createElement("div"),I=document.createElement("div"),G=document.createElement("div"),E=document.createElement("div"),O=document.createElement("div"),R=document.createElement("div"),P=document.createElement("div"),T=document.createElement("div");
a=document.createElement("div");var U=document.createElement("div"),ca=document.createElement("div"),V=document.createElement("div"),la=document.createElement("div"),Fa=document.createElement("div");N=c;var fa="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>')+
"');width: 19px;height: 19px;background-size: 100% 100%;";c.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="112.08413mm" height="128.46834mm" viewBox="0 0 397.14849 455.20277" id="svg3440" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel.svg"><defs id="defs3442" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="0.98994949" inkscape:cx="421.01508" inkscape:cy="52.510802" inkscape:document-units="px" inkscape:current-layer="g87" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3445"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title /></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(-2.3645008e-8,-597.15942)"><path inkscape:connector-curvature="0" style="fill:#4d4d4d;stroke:#6e6e6e;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path4140" d="m 307.84153,715.52552 c -4.35995,43.11849 -2.78952,86.66385 -15.90234,128.54337 -10.85452,25.86023 -13.33477,47.2976 6.91492,61.09536 7.23778,50.7442 78.38013,47.39232 82.20535,0 23.06079,-14.19054 13.49405,-42.79138 6.91492,-61.09536 -17.40045,-40.83001 -4.82581,-86.43019 -15.90235,-128.54337 -8.3177,-20.33228 -56.75348,-20.7661 -64.22927,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#cccccc;stroke:#1a1a1a;stroke-width:2.09465766;stroke-miterlimit:4;stroke-dasharray:none" id="path4266" d="m 313.11812,724.1957 -3.84514,68.80568 c 4.64168,13.40814 62.19981,10.8172 61.83082,0 l -3.84515,-68.80568 c -4.46942,-24.00369 -52.58756,-18.95946 -54.13979,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#353535;stroke:#2c2c2c;stroke-width:2.11880326;stroke-miterlimit:4;stroke-dasharray:none" id="path4156" d="m 304.91419,870.673 c -12.36924,67.40381 80.42804,69.69607 70.55134,0 -6.57605,-36.5947 -65.0964,-34.8253 -70.55134,0 z m 60.53812,3.9862 c 8.65841,48.24354 -57.58987,49.86644 -50.52489,0 4.7009,-26.27069 46.6394,-24.84292 50.52489,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#e6e6e6;stroke:#969696;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path4011" d="m 106.04576,696.97906 c -11.197076,4.25792 -17.123706,8.24834 -17.123706,8.24834 l -66.18493,16.33946 1.40291,30.64619 46.54715,-7.67623 c 17.00932,-1.6438 32.551896,8.94676 38.302026,23.34506 l 2.78663,65.4778 27.6363,0 2.78663,-65.4778 c 8.0428,-15.3291 20.46247,-27.10803 38.30202,-23.34506 l 46.54716,7.67623 1.40291,-30.64619 -66.18493,-16.33946 c 0,0 -5.92627,-3.99074 -17.12371,-8.24834 -13.45408,-4.31874 -26.62772,-4.20804 -39.08982,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#252525;stroke:#6e6e6e;stroke-width:2.99125171;stroke-miterlimit:4;stroke-dasharray:none" id="path2996" d="m 38.311064,931.09899 c -8.01574,5.05649 -22.76006,21.74743 -26.34852,58.0567 -4.1290804,35.18581 -4.8394604,60.59901 28.55878,61.68771 l 162.934726,0 c 39.19437,1.1693 30.46155,-41.5992 28.55878,-61.68771 -3.58839,-36.30927 -18.33277,-52.99983 -26.34851,-58.0567 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#373737;stroke:#6e6e6e;stroke-width:2.83429575;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none" id="path3019" d="m 26.230254,979.1291 c -11.50334,14.44882 -11.98241,47.3999 -0.33519,57.1202 l 191.802226,0 c 12.10111,-12.3068 9.93082,-46.99573 -0.33518,-57.1202 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#808080;stroke:#1a1a1a;stroke-width:2.14882827;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path4133" d="m 360.82498,854.6914 a 20.634815,21.265151 0 1 1 -41.269,0 20.634815,21.265151 0 1 1 41.269,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#333333;stroke:#000000;stroke-width:2.11880326;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path4280" d="m 351.64051,761.132 a 11.444622,11.75148 0 1 1 -22.88896,0 11.444622,11.75148 0 1 1 22.88896,0 z" stroke-miterlimit="4" /><path inkscape:connector-curvature="0" style="fill:#313131;stroke:#565656;stroke-width:2.93434715;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" id="path3993" d="m 125.52855,598.62659 c -68.528026,0 -124.0613764,57.81925 -124.0613764,129.13695 0,71.31265 55.5370404,129.13696 124.0613764,129.13696 68.52804,0 124.07984,-57.81926 124.07984,-129.13696 0,-71.31264 -55.55611,-129.13695 -124.07984,-129.13695 z m -1.00095,23.63932 c 10.01261,0.0734 20.238,1.32074 28.95237,3.51006 11.62203,3.80301 21.53624,8.52304 31.01135,16.15381 26.21752,19.0207 43.36275,50.36277 43.36275,85.83029 0,58.01564 -45.80548,105.05244 -102.30928,105.05244 -56.500726,0 -102.309276,-47.03364 -102.309276,-105.05244 0,-32.14848 14.06783,-60.91918 36.22336,-80.19121 11.45168,-11.11714 23.14136,-17.13322 37.3943,-21.79731 7.855846,-2.48302 17.655666,-3.5835 27.668276,-3.51006 z" stroke-miterlimit="4" /><g style="stroke-miterlimit:4;stroke-dasharray:none" id="g4127" stroke-miterlimit="4" transform="matrix(0.61498728,0,0,0.63147657,-18.171616,453.28593)"><g id="g4111"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="rect3040" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path3024" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g><g id="g4115" transform="translate(97.984785,0)"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="path4117" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path4119" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g><g id="g4121" transform="translate(195.96959,0)"><path style="fill:#808080;stroke:#373737;stroke-width:3.56837296" inkscape:connector-curvature="0" id="path4123" d="m 110.97,771.16 31.694,4.8776 1.3007,44.257 -32.995,0 z" /><path style="fill:#b3b3b3;stroke:#565656;stroke-width:3.4000001;stroke-linecap:butt;stroke-linejoin:miter" inkscape:connector-curvature="0" id="path4125" d="m 96.83,686.82 58.353,-5.0761 c 15.608,27.569 6.8304,64.333 -5.0761,90.545 l -53.841,-2.538 z" /></g></g><g style="fill:#666666;stroke:#969696;stroke-width:3.99777174;stroke-miterlimit:4;stroke-dasharray:none" id="g4051" transform="translate(-42.878584,98.083591)" stroke-miterlimit="4"><g id="g4437" transform="matrix(0.74686368,0,0,0.74686368,-73.374214,285.30447)"><path inkscape:connector-curvature="0" id="rect4348" style="color:#000000;text-indent:0;text-transform:none;block-progression:tb;fill:#ffffff" d="m 567.31,584.22 0,42.25 0,3.4062 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.375,0 0,-42.25 27.062,0 0,42.25 3.4062,0 0,-43.969 0,-1.6875 -1.7188,0 -28.75,0 0,-42.25 -3.375,0 0,42.25 -27.062,0 0,-42.25 -3.375,0 0,42.25 -27.062,0 0,-42.25 -3.375,0 z" /><g style="fill:#a02c2c;stroke:#ffffff;stroke-width:3.4000001;stroke-linecap:square" id="g87" /></g></g></g></svg>')+
"');width: 397px;height: 455px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);transform: translateX(-50%);background-size: 100% 100%;left: 50%;margin-left: 25px;margin-bottom: 40px;bottom: 0px;";e.style.cssText=fa+"top: 132px;left: 331px;";d.style.cssText=fa+"top: 122px;left: 315px;";f.style.cssText=fa+"top: 122px;left: 347px;";k.style.cssText=fa+"top: 113px;left: 331px;";l.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+
btoa('<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4049" d="m26.584 1016.1c-12.631 0-23.15 9.858-25.478 22.922l50.705 12.18c0.47921-2.1565 0.73023-4.4099 0.73023-6.7204 0-15.677-11.621-28.382-25.957-28.382z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>')+
"');width: 54px;height: 37px;background-size: 100% 100%;top: 84px;left: 166px;";n.style.cssText="position: absolute;height: auto;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4033" d="m26.92 1016.1c-14.337 0-25.957 12.707-25.957 28.382 0 2.3225 0.26742 4.5784 0.74876 6.7386l50.681-12.18c-2.321-13.072-12.841-22.944-25.476-22.944z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>')+
"');width: 54px;height: 37px;background-size: 100% 100%;top: 84px;left: 36px;";p.style.cssText=fa+"top: 107px;left: 141px;";q.style.cssText=fa+"top: 107px;left: 90px;";r.style.cssText=fa+"top: 185px;left: 321px;";u.style.cssText=fa+"top: 185px;left: 340px;";x.style.cssText=fa+"top: 179px;left: 358px;";y.style.cssText=fa+"top: 178px;left: 303px;";A.style.cssText=fa+"top: 210px;left: 299px;";B.style.cssText=fa+"top: 279px;left: 299px;";L.style.cssText=fa+"top: 210px;left: 321px;";H.style.cssText=fa+
"top: 279px;left: 321px;";I.style.cssText=fa+"top: 210px;left: 344px;";G.style.cssText=fa+"top: 278px;left: 344px;";E.style.cssText=fa+"top: 124px;left: 147px;";O.style.cssText=fa+"top: 138px;left: 133px;";R.style.cssText=fa+"top: 124px;left: 82px;";P.style.cssText=fa+"top: 138px;left: 96px;";T.style.cssText=fa+"top: 278px;left: 367px;";fa="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>')+
"');width: 19px;height: 46px;background-size: 100% 100%;";a.style.cssText=fa+"top: 291px;left: 50px;";U.style.cssText=fa+"top: 291px;left: 111px;";ca.style.cssText=fa+"top: 291px;left: 171px;";V.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3458" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="50.447mm" width="83.899mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 297.28131 178.75"><metadata id="metadata3463"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -873.61)" fill="#e6e6e6"><path id="path4535" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m33.875 873.61-18.5 8.8125 5.0626 3.0625c-12.899 22.78-20.438 49.17-20.438 77.44 0 28.284 7.5315 54.691 20.438 77.469l-5.0626 3.0625 18.5 8.8125 0.6563-20.469-5.531 3.3c-12.002-21.2-18.937-45.8-18.937-72.18 0-26.362 6.9415-50.99 18.937-72.188l5.5313 3.3438-0.6563-20.469z"/><path id="path4551" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m263.38 873.71-0.6562 20.469 5.5312-3.3438c11.996 21.198 18.969 45.825 18.969 72.188 0 26.371-6.9672 51.011-18.969 72.219l-5.5312-3.3437 0.6562 20.469 18.5-8.8125-5.0312-3.0625c12.906-22.778 20.438-49.184 20.438-77.469 0-28.275-7.5391-54.665-20.438-77.438l5.0312-3.0625-18.5-8.8125z"/></g></svg>')+
"');width: 297px;height: 179px;background-size: 100% 100%;top: 43px;left: -25px;";la.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="2.9016mm" width="9.2516mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.781198 10.281199"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1042.1)"><path id="rect4585" d="m32.781 1047.2-7.875-5.125v2.8437h-17.031v-2.8437l-7.875 5.1 7.875 5.1562v-2.8437h17.031v2.8437z" fill="#e6e6e6"/></g></svg>')+
"');width: 33px;height: 10px;background-size: 100% 100%;top: 159px;left: 324px;";Fa.style.cssText="position: absolute;background-image: url('data:image/svg+xml;base64,"+btoa('<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2516mm" width="2.9016mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 10.281248 32.7812"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1019.6)"><path id="rect4585" d="m5.125 1019.6-5.125 7.9h2.8437v17.031h-2.8437l5.125 7.875 5.1562-7.875h-2.8438v-17.031h2.8438z" fill="#e6e6e6"/></g></svg>')+
"');width: 10px;height: 33px;background-size: 100% 100%;top: 148px;left: 335px;";b.appendChild(c);c.appendChild(a);c.appendChild(U);c.appendChild(ca);c.appendChild(V);c.appendChild(la);c.appendChild(Fa);c.appendChild(e);c.appendChild(d);c.appendChild(f);c.appendChild(k);c.appendChild(l);c.appendChild(n);c.appendChild(p);c.appendChild(q);c.appendChild(r);c.appendChild(u);c.appendChild(x);c.appendChild(y);c.appendChild(A);c.appendChild(B);c.appendChild(L);c.appendChild(H);c.appendChild(I);c.appendChild(G);
c.appendChild(E);c.appendChild(O);c.appendChild(R);c.appendChild(P);c.appendChild(T);F.length=0;C.length=0;z.length=0;w.length=0;F.push(e,d,f,k,l,n,p,q,r,u,x,y,A,B,L,H,I,G,E,O,R,P,T);C.push('<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4049" d="m26.584 1016.1c-12.631 0-23.15 9.858-25.478 22.922l50.705 12.18c0.47921-2.1565 0.73023-4.4099 0.73023-6.7204 0-15.677-11.621-28.382-25.957-28.382z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>',
'<svg id="svg3400" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="10.507mm" width="15.1mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 53.504016 37.228838"><metadata id="metadata3405"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(-2.847e-7 -1015.1)"><path id="path4033" d="m26.92 1016.1c-14.337 0-25.957 12.707-25.957 28.382 0 2.3225 0.26742 4.5784 0.74876 6.7386l50.681-12.18c-2.321-13.072-12.841-22.944-25.476-22.944z" stroke="#5276cf" stroke-linecap="square" stroke-width="1.9247" fill="#666"/></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>',
'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="5.4777083mm" height="5.5003009mm" viewBox="0 0 19.409203 19.489255" id="svg3402" version="1.1" inkscape:version="0.91 r13725" sodipodi:docname="wheel_btn.svg"><defs id="defs3404" /><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1.0" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:zoom="22.4" inkscape:cx="4.7324003" inkscape:cy="15.245372" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" inkscape:window-width="1920" inkscape:window-height="1134" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="1" /><metadata id="metadata3407"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(8.5754969e-8,-1032.873)"><path inkscape:connector-curvature="0" style="fill:#5276cf;stroke:#000000;stroke-width:3.4000001;stroke-linecap:square;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;fill-opacity:1" id="path4272" d="m 17.709101,1042.6176 a 8.0046,8.0046 0 1 1 -16.0089998,0 8.0046,8.0046 0 1 1 16.0089998,0 z" stroke-miterlimit="4" /></g></svg>');
w.push(V,a,ca,U,la,Fa);for(b=0;b<F.length;b++)F[b].setAttribute("id","wheel_btn_"+b),F[b].setAttribute("data-colorstate","B"),F[b].setAttribute("data-key",b),F[b].setAttribute("data-svgid",b);for(b=0;b<w.length;b++)F[b].setAttribute("id","wheel_axis_"+b),F[b].setAttribute("data-colorstate","GR");V.setAttribute("data-key",t.GMPD_AXIS_0);V.setAttribute("data-svgid",C.length);a.setAttribute("data-key",t.GMPD_AXIS_1);a.setAttribute("data-svgid",C.length+1);ca.setAttribute("data-key",t.GMPD_AXIS_2);ca.setAttribute("data-svgid",
C.length+2);U.setAttribute("data-key",t.GMPD_AXIS_3);U.setAttribute("data-svgid",C.length+3);la.setAttribute("data-key",t.GMPD_AXIS_4);la.setAttribute("data-svgid",C.length+4);Fa.setAttribute("data-key",t.GMPD_AXIS_5);Fa.setAttribute("data-svgid",C.length+5);C.push('<svg id="svg3458" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="50.447mm" width="83.899mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 297.28131 178.75"><metadata id="metadata3463"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -873.61)" fill="#e6e6e6"><path id="path4535" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m33.875 873.61-18.5 8.8125 5.0626 3.0625c-12.899 22.78-20.438 49.17-20.438 77.44 0 28.284 7.5315 54.691 20.438 77.469l-5.0626 3.0625 18.5 8.8125 0.6563-20.469-5.531 3.3c-12.002-21.2-18.937-45.8-18.937-72.18 0-26.362 6.9415-50.99 18.937-72.188l5.5313 3.3438-0.6563-20.469z"/><path id="path4551" style="color:#000000;text-indent:0;block-progression:tb;text-decoration-line:none;text-transform:none" d="m263.38 873.71-0.6562 20.469 5.5312-3.3438c11.996 21.198 18.969 45.825 18.969 72.188 0 26.371-6.9672 51.011-18.969 72.219l-5.5312-3.3437 0.6562 20.469 18.5-8.8125-5.0312-3.0625c12.906-22.778 20.438-49.184 20.438-77.469 0-28.275-7.5391-54.665-20.438-77.438l5.0312-3.0625-18.5-8.8125z"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3386" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="12.859mm" width="5.2917mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 18.749999 45.562501"><metadata id="metadata3391"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1006.8)"><path id="rect4575" d="m9.3125 1006.8-9.3125 14.25h5.3125v17.094h-5.1875l9.3125 14.219 9.3125-14.219h-5.1562v-17.094h5.0312l-9.3125-14.25z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="2.9016mm" width="9.2516mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 32.781198 10.281199"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1042.1)"><path id="rect4585" d="m32.781 1047.2-7.875-5.125v2.8437h-17.031v-2.8437l-7.875 5.1 7.875 5.1562v-2.8437h17.031v2.8437z" fill="#e6e6e6"/></g></svg>',
'<svg id="svg3378" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="9.2516mm" width="2.9016mm" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="0 0 10.281248 32.7812"><metadata id="metadata3383"><rdf:RDF><cc:Work rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/><dc:title/></cc:Work></rdf:RDF></metadata><g id="layer1" transform="translate(0 -1019.6)"><path id="rect4585" d="m5.125 1019.6-5.125 7.9h2.8437v17.031h-2.8437l5.125 7.875 5.1562-7.875h-2.8438v-17.031h2.8438z" fill="#e6e6e6"/></g></svg>');
h(F,v);h(w,"#e6e6e6")}}function h(a,b){function c(a){a=a.target;if(!(0>L||"G"==a.getAttribute("data-colorstate")))if(I){if("R"==a.getAttribute("data-colorstate")&&(H=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller",I=0),"B"==a.getAttribute("data-colorstate")||"GR"==a.getAttribute("data-colorstate")){var c=parseFloat(H.getAttribute("data-svgid"));H.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(C[c])+"')";H.setAttribute("data-colorstate",
a.getAttribute("data-colorstate"));H=a;c=parseFloat(a.getAttribute("data-svgid"));a.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(C[c].replace(b,"#ff0000"))+"')";a.setAttribute("data-colorstate","R")}}else{var c=parseFloat(a.getAttribute("data-svgid")),e="B"==a.getAttribute("data-colorstate")?1:2;I=e;a.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(C[c].replace(b,"#ff0000"))+"')";a.setAttribute("data-colorstate","R");document.getElementById("action_label").textContent=
1==e?"Now press the button on the device":"Now move the axis on the device";H=a}}for(var e=0;e<a.length;e++)t.add_click_listener(a[e],c)}function l(a){var b=document.createElement("label");b.style.cssText="position: relative;display: inline-block;width: 50px;color: white;margin: 0 10px;font-size: 36px;line-height: 50px;background-color: black;border: 3px solid white;border-radius: 5px;height: 50px;";b.textContent=a;return b}function e(){var a=window.innerWidth,b=window.innerHeight;da.style.zoom=750>=
b&&400<b||750>=a&&400<a?"0.5":400>=a||400>=b?"0.3":"1"}var c=Object(O.a)(d),a=Object(T.a)(d),t=Object(G.a)(d),E=Object(r.a)(d),v=RegExp("#5276cf","g"),B={};B[t.GMPD_BUTTON_12]=t.GMPD_BUTTON_12;B[t.GMPD_BUTTON_13]=t.GMPD_BUTTON_13;B[t.GMPD_BUTTON_15]=t.GMPD_BUTTON_15;B[t.GMPD_BUTTON_14]=t.GMPD_BUTTON_14;B[t.GMPD_BUTTON_3]=t.GMPD_BUTTON_3;B[t.GMPD_BUTTON_0]=t.GMPD_BUTTON_0;B[t.GMPD_BUTTON_1]=t.GMPD_BUTTON_1;B[t.GMPD_BUTTON_2]=t.GMPD_BUTTON_2;B[t.GMPD_BUTTON_5]=t.GMPD_BUTTON_5;B[t.GMPD_BUTTON_7]=t.GMPD_BUTTON_7;
B[t.GMPD_BUTTON_4]=t.GMPD_BUTTON_4;B[t.GMPD_BUTTON_6]=t.GMPD_BUTTON_6;B[t.GMPD_BUTTON_8]=t.GMPD_BUTTON_8;B[t.GMPD_BUTTON_9]=t.GMPD_BUTTON_9;B[t.GMPD_BUTTON_10]=t.GMPD_BUTTON_10;B[t.GMPD_BUTTON_11]=t.GMPD_BUTTON_11;B[t.GMPD_BUTTON_16]=t.GMPD_BUTTON_16;var C=[],L=-1,H=null,I=0,da=null,N=null,U=null,K=null,D=null,R=null,V=[],F=[],z=[],w=[],W=!0,A={};A[t.GMPD_AXIS_0]=-2;A[t.GMPD_AXIS_1]=-2;A[t.GMPD_AXIS_2]=-2;A[t.GMPD_AXIS_3]=-2;A[t.GMPD_AXIS_4]=-2;A[t.GMPD_AXIS_5]=-2;A[t.GMPD_AXIS_6]=-2;A[t.GMPD_AXIS_7]=
-2;A[t.GMPD_AXIS_8]=-2;A[t.GMPD_AXIS_9]=-2;A[t.GMPD_AXIS_10]=-2;A[t.GMPD_AXIS_11]=-2;k.show=function(){var d=document.createElement("div");da=d;d.style.cssText="position: absolute;width: 720px;height: 750px;top: 50%;left: 50%;-moz-transform: translateY(-50%) translateX(-50%);-ms-transform: translateY(-50%) translateX(-50%);-webkit-transform: translateY(-50%) translateX(-50%);transform: translateY(-50%) translateX(-50%);background-color: black;border: 4px solid white;border-radius: 35px;box-shadow: 0px 0px 20px 0px rgba(50, 50, 50, 1);";
c.insert_to_container(d,"LAST");m(d);var g=document.createElement("div");g.style.cssText="position: absolute;width: 637px;top: 0px;font-family: sans-serif;text-align: center;margin-top: 40px;-moz-transform: translateX(-50%);-ms-transform: translateX(-50%);-webkit-transform: translateX(-50%);transform: translateX(-50%);left: 50%;";var h=document.createElement("div");h.innerHTML="Select a device";h.style.cssText="color: #fff;display: inline-block;";g.appendChild(h);for(h=0;4>h;h++){var k=p(h),r=function(){return!0},
y=function(b,c){if(c==L)for(var e=0;e<F.length;e++){var d=F[e],g=a.get_sensor_value(b,c,e),f=e;if(I)g=t.get_pressed_gmpd_btn(L),0<=g&&H&&1==I&&(d=H.getAttribute("data-key"),t.set_gamepad_key(L,d,g),f=E.get(L+"_gmpd_stngs","b4w")||"{}",f=JSON.parse(f),f[d]=g,E.set(L+"_gmpd_stngs",JSON.stringify(f),"b4w"),H=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller",I=0);else{if(g&&"B"==d.getAttribute("data-colorstate")){var h=C[f];d.style.backgroundImage=
"url('data:image/svg+xml;base64,"+btoa(h.replace(v,"#00ff00"))+"')";d.setAttribute("data-colorstate","G")}g||"B"==d.getAttribute("data-colorstate")||(h=C[f],d.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(h)+"')",d.setAttribute("data-colorstate","B"))}}};a.create_sensor_manifold(null,h,a.CT_CONTINUOUS,k,r,y)}0<f().length&&(L=0);var B=[],h=document.createElement("div");h.style.cssText="margin-top: 20px;";for(k=0;4>k;k++)y=l(k),k==L&&(y.style.backgroundColor="green",U=y),x(k),h.appendChild(y),
y.setAttribute("data-device_type","PAD"),B.push(y),t.add_click_listener(y,function(a){var b=f();a=a.target;for(var c=0;c<b.length;c++)B[c]==a&&(L=c,U=a,x(L),u(a.getAttribute("data-device_type")))});g.appendChild(h);R=document.createElement("label");R.style.cssText="position: relative;display: block;color: white;";g.appendChild(R);h=document.createElement("div");h.style.cssText="margin-top: 20px;";k=b(h,"Pad");y=b(h,"Wheel");k.setAttribute("checked","true");k.onchange=function(){u("PAD");U&&U.setAttribute("data-device_type",
"PAD")};y.onchange=function(){u("WHEEL");U&&U.setAttribute("data-device_type","WHEEL")};k.setAttribute("id","test");D=k;K=y;k=document.createElement("label");k.style.cssText+="color: #fff;display: block;";h.appendChild(k);k.textContent="Click on the buttons & arrows to setup your controller";k.setAttribute("id","action_label");g.appendChild(h);d.appendChild(g);d=a.create_elapsed_sensor();a.create_sensor_manifold(null,"UPDATE_GAMEPAD_DATA",a.CT_CONTINUOUS,[d],r,function(){var a=f(),b=a.length;-1==
L&&a.length&&(L=a[0].index,U=B[L]);for(var c=0;c<B.length;c++)c<b?(B[c].textContent=a[c].index,B[c]==U?(B[c].style.backgroundColor="green",R.textContent="Selected device: "+a[c].index+". Data: "+a[c].id):B[c].style.backgroundColor="blue"):B[c].style.backgroundColor="black";b||(L=-1,R.textContent="")});for(h=0;4>h;h++)k=q(h),y=function(b,c){if(c=="AXES"+L){for(var e=0;e<z.length;e+=2){var d=z[e],g=b,f=c,h=e,k=20*a.get_sensor_value(g,f,h),g=20*a.get_sensor_value(g,f,h+1);d.style.transform="translate3d("+
k+"px, "+g+"px, 0px) rotate(0rad)"}if(W)for(e=0;12>e;e+=2){if(g=b,f=c,d=e,!(d+1>2*w.length)){k=a.get_sensor_value(g,f,d);g=a.get_sensor_value(g,f,d+1);if(-2<A[d]){var l=k-A[d],m=g-A[d+1],f=w[Math.floor(d/2)],h=f.getAttribute("data-svgid");I?2==I&&(l=t.get_moved_gmpd_axis(L),0<=l&&(l%2&&l--,I=0,f.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(C[h])+"')",f=parseFloat(H.getAttribute("data-key")),t.set_gamepad_key(L,f,l),t.set_gamepad_key(L,f+1,l+1),H=null,document.getElementById("action_label").textContent=
"Click on the buttons & arrows to setup your controller")):f.style.backgroundImage=l||m?"url('data:image/svg+xml;base64,"+btoa(C[h].replace("#e6e6e6","#00ff00"))+"')":"url('data:image/svg+xml;base64,"+btoa(C[h])+"')"}A[d]=k;A[d+1]=g}}else for(e=0;12>e;e++)(d=e,d>=w.length)||(k=a.get_sensor_value(b,c,d),-2<A[d]&&((h=k-A[d],g=w[d],f=g.getAttribute("data-svgid"),I)?2==I&&(h=t.get_moved_gmpd_axis(L),0<=h&&(I=0,g.style.backgroundImage="url('data:image/svg+xml;base64,"+btoa(C[f])+"')",g=parseFloat(H.getAttribute("data-key")),
t.set_gamepad_key(L,g,h),H=null,document.getElementById("action_label").textContent="Click on the buttons & arrows to setup your controller")):g.style.backgroundImage=h?"url('data:image/svg+xml;base64,"+btoa(C[f].replace("#e6e6e6","#00ff00"))+"')":"url('data:image/svg+xml;base64,"+btoa(C[f])+"')"),A[d]=k)}},a.create_sensor_manifold(null,"AXES"+h,a.CT_CONTINUOUS,k,function(){return!0},y);e();window.addEventListener("resize",e)};k.hide=function(){I=0;L=-1;D=K=H=U=null;z.length=0;F.length=0;w.length=
0;c.get_container().removeChild(da);da=null;a.remove_sensor_manifold(null,"UPDATE_GAMEPAD_DATA");for(var b=0;4>b;b++)a.remove_sensor_manifold(null,b),a.remove_sensor_manifold(null,"AXES"+b);window.removeEventListener("resize",e)};k.update=function(){for(var a=0;4>a;a++)x(a)}});t.a=d},function(E,t,d){E=d(0);var O=d(33),T=d(24),G=d(29),r=d(40),f=d(26),k=d(3);d=Object(E.a)("gyroscope",function(d,t){function m(b){var d=q.create_gyro_angles_sensor(),f=q.create_gyro_quat_sensor(),m=!0;q.create_sensor_manifold(b,
"CAMERA_ROTATE_GYRO",q.CT_CONTINUOUS,[d,f],null,function(b,d,f){if(0<f)if(p.is_eye_camera(b))d=q.get_sensor_payload(b,d,1),f=k.transformQuat(h.AXIS_MY,d,c),p.set_vertical_axis(b,f),u.set_rotation_v(b,d);else{e=q.get_sensor_payload(b,d,0);m&&(l[0]=e[0],l[1]=e[1],l[2]=e[2],m=!1);f=d=0;window.orientation||(d=e[1]-l[1],f=e[0]-l[0],e[1]>x&&e[1]<a&&(f=0));if(180==window.orientation){d=e[1]-l[1];0>e[1]&&(d=-d);f=l[0]-e[0];if(d>Math.PI/2||d<-Math.PI/2)d=0;e[1]>-a&&e[1]<-x&&(f=0)}if(-90==window.orientation){d=
e[0]-l[0];if(d>Math.PI/2||d<-Math.PI/2)d=0;f=l[1]-e[1];if(e[0]>y||e[0]<v)f=0}if(90==window.orientation){d=l[0]-e[0];if(d>Math.PI/2||d<-Math.PI/2)d=0;f=e[1]-l[1];if(e[0]>y||e[0]<v)f=0}p.rotate_camera(b,f,d);l[0]=e[0];l[1]=e[1];l[2]=e[2]}})}var p=Object(O.a)(d),q=Object(T.a)(d),b=Object(G.a)(d),u=Object(r.a)(d),h=Object(f.a)(d),l=new Float32Array(3),e=new Float32Array(3),c=k.create(),a=h.deg_to_rad(110),x=h.deg_to_rad(70),y=h.deg_to_rad(70),v=-h.deg_to_rad(70);t.enable_camera_rotation=function(){var a=
b.get_active_camera();m(a)};t.disable_camera_rotation=function(){var a=b.get_active_camera();q.remove_sensor_manifold(a,"CAMERA_ROTATE_GYRO")}});t.a=d},function(E,t,d){E=d(0);var O=d(39),T=d(24),G=d(49),r=d(1),f=d(69),k=d(26);d=Object(E.a)("hmd_conf",function(d,t){function m(){if(!y.can_use_device(y.DEVICE_HMD))return!1;var a=y.get_device_by_type_element(y.DEVICE_HMD),a=y.get_value_param(a,y.HMD_WEBVR_TYPE);return a&(y.HMD_NON_WEBVR|y.HMD_WEBVR_MOBILE|y.HMD_WEBVR_DESKTOP)&&!(a&y.HMD_WEBVR1)}function p(a){a=
a.target.value;var b=D[a],c;for(c in U)if(c in b){var e=document.getElementById(c+"_slider");e&&(e.disabled="custom"!==a,e.value=b[c]);if(e=document.getElementById(c+"_number"))e.disabled="custom"!==a,e.value=b[c];U[c]=b[c]}}function q(){x.remove_sensor_manifold(null,"UPDATE_HMD_RENDERING");u();l();L&&(L=!1,a.get_container().removeChild(H),document.head.removeChild(I),I=E=H=null)}function b(){u(!0);l();for(var a in U){var b=document.getElementById(a+"_slider");b&&(b.value=U[a]);if(b=document.getElementById(a+
"_number"))b.value=U[a]}}function u(a){var b=Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio,c=Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio,e=0,d=0,f=0,g;a:{g=V;var h=navigator.userAgent||navigator.vendor||window.opera;if(1==g.format&&g.devices&&g.devices.length)for(var k=0;k<g.devices.length;k++){var l=g.devices[k];if(l.rules&&("ios"==l.type&&K||"android"==l.type)){for(var m=!1,p=0;p<l.rules.length;p++){var q=l.rules[p];if(q.ua&&0<=h.indexOf(q.ua)||
!q.ua&&q.res&&q.res[0]&&q.res[1]&&Math.min(b,c)==Math.min(q.res[0],q.res[1])&&Math.max(b,c)==Math.max(q.res[0],q.res[1])){m=!0;break}}if(m){g=k;break a}}}else v.error("DPDB isn't correct.");g=-1}-1!=g&&(f=V.devices[g],d=f.dpi[1]||f.dpi,e=Math.round(25.4*b/(f.dpi[0]||f.dpi)),d=Math.round(25.4*c/d),f=Math.round(f.bw));b=B.get("hmd_conf","b4w");b=JSON.parse(b?b:"{}");a?(U.first_distortion=.34,U.second_distortion=.55,U.bevel_size=f||4,U.screen_width=e||110,U.screen_height=d||65,U.screen_lense=50,U.ipd=
64,U.baseline=32):(U.first_distortion="first_distortion"in b?parseFloat(b.first_distortion):.34,U.second_distortion="second_distortion"in b?parseFloat(b.second_distortion):.55,U.bevel_size="bevel_size"in b?parseFloat(b.bevel_size):f||4,U.screen_width="screen_width"in b?parseFloat(b.screen_width):e||110,U.screen_height="screen_height"in b?parseFloat(b.screen_height):d||65,U.screen_lense="screen_lense"in b?parseFloat(b.screen_lense):50,U.ipd="ipd"in b?parseFloat(b.ipd):64,U.baseline="baseline"in b?
parseFloat(b.baseline):32);N=!0}function h(){B.set("hmd_conf",JSON.stringify(U),"b4w");q()}function l(){if(N){var a=y.get_device_by_type_element(y.DEVICE_HMD);a&&(y.set_config(a,y.HMD_DISTORTION,[U.first_distortion,U.second_distortion]),y.get_value_param(a,y.HMD_WEBVR_TYPE)&(y.HMD_NON_WEBVR|y.HMD_WEBVR_MOBILE)&&(y.set_config(a,y.HMD_BEVEL_SIZE,.001*U.bevel_size),y.set_config(a,y.HMD_SCREEN_WIDTH,.001*U.screen_width),y.set_config(a,y.HMD_SCREEN_HEIGHT,.001*U.screen_height),y.set_config(a,y.HMD_SCREEN_LENS_DIST,
.001*U.screen_lense),y.set_config(a,y.HMD_EYE_DISTANCE,.001*U.ipd),y.set_config(a,y.HMD_BASELINE_DIST,.001*U.baseline)));N=!1}}function e(a){var b=a.target.id.split("_"),b=b.splice(0,b.length-1).join("_");b in U&&U[b]!=a.target.value&&(N=!0,U[b]=a.target.value,document.getElementById(b+"_slider").value=a.target.value,document.getElementById(b+"_number").value=a.target.value)}function c(a,b,c){var e=document.createElement("button");e.onclick=a;e.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 160px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: center;padding-left: 8px;line-height: 28px;margin-right:"+
c+";box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";e.innerHTML=b;return e}var a=Object(O.a)(d),x=Object(T.a)(d),y=Object(G.a)(d),v=Object(r.a)(d),B=Object(f.a)(d),C=Object(k.a)(d),L=!1,H=null,I=null,E=null,N=!0,U={profile:"custom",first_distortion:0,second_distortion:0,bevel_size:0,screen_width:0,screen_height:0,screen_lense:0,ipd:0,baseline:0},K=/iPad|iPhone|iPod/.test(navigator.platform),D={oculus_dk2:{name:"Oculus Rift DK2",type:2,first_distortion:.22,second_distortion:.28},cardboard_1:{name:"Cardboard (2014)",
type:1,ipd:60,baseline:35,screen_lense:42,first_distortion:.441,second_distortion:.156},cardboard_2:{name:"Cardboard (2015)",type:1,ipd:64,baseline:35,screen_lense:39,first_distortion:.34,second_distortion:.55},custom:{name:"Custom",type:0,ipd:64,baseline:35,screen_lense:39,first_distortion:0,second_distortion:0}},R=[{label:"Tray to lens-center distance.",Ro:!0,inputs:[{id:"baseline",max:"50",step:"0.5"}]},{label:"Interpupillary distance.",Ro:!0,inputs:[{id:"ipd",max:"100",step:"1"}]},{label:"Screen to lense distance.",
Ro:!0,inputs:[{id:"screen_lense",max:"100",step:"1"}]},{label:"Screen height.",Ro:!0,inputs:[{id:"screen_height",max:"150",step:"1"}]},{label:"Screen width.",Ro:!0,inputs:[{id:"screen_width",max:"200",step:"1"}]},{label:"Bevel width.",Ro:!0,inputs:[{id:"bevel_size",max:"20",step:"1"}]},{label:"Distortion coefficients.",inputs:[{id:"first_distortion",max:"1.0",step:"0.01"},{id:"second_distortion",max:"1.0",step:"0.01"}]}];t.check=m;t.show=function(d){if(m()){var f=a.get_container();I=document.createElement("style");
I.innerHTML="."+d+" input[type=range]::-webkit-slider-runnable-track {width: 100%; height: 8px;cursor: pointer;background-color: #fff;border: 2px solid rgba(98, 98, 98, .2);box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);}."+d+" input[type=range]::-webkit-slider-thumb {box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);height: 30px;width: 16px;border-radius: 2px;background-color: #323232;cursor: pointer;margin-top: -13px;-webkit-appearance: none;}";document.head.appendChild(I);if(!L){L=!0;u();var k=
y.get_device_by_type_element(y.DEVICE_MOUSE,f);y.switch_prevent_default(k,!1);k=y.get_device_by_type_element(y.DEVICE_TOUCH,f);y.switch_prevent_default(k,!1);H=document.createElement("div");H.className=d;f.appendChild(H);E=document.createElement("div");H.appendChild(E);E.style.cssText="background-color: #484848;border: 2px solid rgba(150, 150, 150, 0.7);box-shadow: 0px 0px 10px 0px rgba(150, 150, 150, 0.7);position: relative;width: 524px;padding: 16px;overflow: hidden;";d=B.get("hmd_conf","b4w");
d=JSON.parse(d?d:"{}").profile||"custom";f=document.createElement("div");k=document.createElement("label");k.innerHTML="Profile: ";k.className="text_label";k.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 120px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
f.appendChild(k);k=document.createElement("select");f.appendChild(k);k.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;height: 30px;display: block;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";var v=y.get_device_by_type_element(y.DEVICE_HMD);if(v)for(var r in D)if(0==D[r].type||y.get_value_param(v,
y.HMD_WEBVR_TYPE)&(y.HMD_NON_WEBVR|y.HMD_WEBVR_MOBILE)&&1==D[r].type){var n=document.createElement("option");n.value=r;n.text=D[r].name;k.appendChild(n)}k.value=d;C.is_ie11()?k.onchange=p:k.oninput=p;E.appendChild(f);r=y.get_device_by_type_element(y.DEVICE_HMD);for(d=0;d<R.length;d++)if(y.get_value_param(r,y.HMD_WEBVR_TYPE)&(y.HMD_NON_WEBVR|y.HMD_WEBVR_MOBILE)||!R[d].Ro){f=R[d];v=d;k=document.createElement("div");n=document.createElement("label");n.className="text_label";var g="8px";v%2&&(g="0");
n.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 100%;height: 30px;display: block;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: left;padding-left: 8px;line-height: 28px;margin-bottom: 4px;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";n.textContent=f.label;k.appendChild(n);k.style.cssText="margin-top: 16px;float: left;width: 240px;margin-right: "+g+";border-top: 2px solid rgba(98, 98, 98, .4);box-sizing: border-box;-webkit-box-sizing: border-box;padding-top: 8px;";
for(v=0;v<f.inputs.length;v++){n=f.inputs[v];g=document.createElement("div");g.className="row";var t=document.createElement("input");t.className="input_slider";t.style.cssText="-webkit-appearance: none;width: 192px;display: block;float: left;height: 8px;margin-bottom: 16px;margin-top: 16px;box-sizing: border-box;margin-right: 8px;margin-left: 0;";t.setAttribute("id",n.id+"_slider");t.setAttribute("type","range");t.setAttribute("min","0.00");t.setAttribute("step",n.step);t.setAttribute("value",U[n.id]);
t.setAttribute("max",n.max);g.appendChild(t);var G=document.createElement("input");G.className="input_text";G.setAttribute("id",n.id+"_number");G.setAttribute("type","number");G.setAttribute("min","0.00");G.setAttribute("step",n.step);G.setAttribute("value",U[n.id]);G.setAttribute("max",n.max);g.appendChild(G);G.style.cssText="background-color: #323232;border: 2px solid rgba(98, 98, 98, .2);border-radius: 2px;width: 40px;height: 30px;display: block;float: left;font-size: 16px;font-weight: normal;color: #fff;cursor: pointer;text-decoration: none;text-align: center;box-sizing: border-box;line-height: 28px;margin-top: 4px;margin-right: 0;margin-left: 0;box-shadow: 0px 0px 4px 0px rgba(98, 98, 98, .8);";
C.is_ie11()?(t.onchange=e,G.onchange=e):(t.oninput=e,G.oninput=e);k.appendChild(g)}E.appendChild(k)}r=document.createElement("div");d=c(h,"SAVE","4px");f=c(q,"CANCEL","4px");k=c(b,"RESET","0px");r.className="row";r.style.cssText="padding-top: 32px;clear: both;box-sizing: border-box;-webkit-box-sizing: border-box;";r.appendChild(d);r.appendChild(f);r.appendChild(k);E.appendChild(r);r=x.create_timeline_sensor();x.create_sensor_manifold(null,"UPDATE_HMD_RENDERING",x.CT_CONTINUOUS,[r],null,l)}}};t.hide=
q;t.reset=b;t.update=function(){u();l()};var V={_comment:"AUTOMATICALLY GENERATED BY generate_dpdb.py. DO NOT EDIT.",format:1,last_updated:"2016-01-26T23:11:18Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},
{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,
518],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1E3},{type:"android",
rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},
{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},
{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],
dpi:[403.4,402.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],
bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1E3},
{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1E3},{type:"android",
rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1E3},{type:"android",
rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},
{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},
{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],
dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,
bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},
{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1E3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1E3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1E3},{type:"ios",
rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1E3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1E3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1E3}]}});t.a=d},function(E,t,d){E=d(0);var O=d(24),T=d(1),G=d(29),r=d(50),f=d(82),k=d(26);d=Object(E.a)("mixer",function(d,t){function m(){I=H.length=0;E=p();N=new Float32Array(E.length);U=new Float32Array(E.length);var a=B.get_speaker_objects();if(a.length){H.push(q());for(var b=0;b<a.length;b++)H.push(u(a[b]));H.sort(function(a,
b){return"MASTER"==a.id?-1:"MASTER"==b.id?1:"COMPRESSOR"==a.id?-1:"COMPRESSOR"==b.id?1:a.id.toUpperCase()<b.id.toUpperCase()?-1:a.id.toUpperCase()>b.id.toUpperCase()?1:0})}}function p(){for(var a=new Float32Array(100),b=0,c=0;100>c;c++)a[c]=20*Math.pow(1E3,b),b+=1/99;return a}function q(){var a=b("MASTER"),c=B.get_compressor_params();c&&(a.Ma.push(["THRESHOLD",c.threshold,-100,0,100,!1]),a.Ma.push(["KNEE",c.knee,0,40,40,!1]),a.Ma.push(["RATIO",c.ratio,1,20,20,!1]),a.Ma.push(["ATTACK",c.attack,0,1,
1E3,!1]),a.Ma.push(["RELEASE",c.release,0,1,1E3,!1]));a.Ma.push(["VOLUME",B.get_volume(null),0,1,50,!1]);a.mute=B.is_muted(null)?1:0;a.Ph=-1;return a}function b(a){return{id:a,Ma:[],rm:0,mute:-1,Ph:-1,Vc:null}}function u(a){var c=b(x.get_object_name(a));c.mute=B.is_muted(a)?1:0;c.Ph=0;c.Vc=a;return c}function h(a){if(a.Vc){a.Ma.length=0;var b=B.get_positional_params(a.Vc);b&&(a.Ma.push(["DIST_REF",b.dist_ref,0,1E3,1E4,!1]),a.Ma.push(["ATTENUATION",b.attenuation,0,50,1E3,!1]),a.Ma.push(["DIST_MAX",
b.dist_max,0,1E4,1E4,!1]));if(b=B.get_filter_params(a.Vc))a.Ma.push(["EQ_FREQ",b.freq,20,2E4,100,!0]),a.Ma.push(["EQ_Q",b.Q,0,10,100,!1]),a.Ma.push(["EQ_GAIN",b.gain,-70,30,100,!1]);a.Ma.push(["VOLUME",B.get_volume(a.Vc),0,1,50,!1]);C.clamp(a.rm,0,a.Ma.length-1)}}function l(a){for(var b=0;b<H.length;b++){var c=H[b];if(c!=a&&1==c.Ph)return!0}return!1}function e(a){for(var b=0;b<H.length;b++){var c=H[b];c!=a&&0==c.mute&&0==c.Ph&&B.mute(c.Vc,!1)}}function c(){if(!H.length)return[0,-1];var a=8*Math.floor(I/
8),b=a+7,a=C.clamp(a,0,H.length-1),b=C.clamp(b,0,H.length-1);return[a,b]}var a=Object(O.a)(d),y=Object(T.a)(d),x=Object(G.a)(d),v=Object(r.a)(d),B=Object(f.a)(d),C=Object(k.a)(d),L="SWITCH_STRIP SWITCH_STRIP_HOLD SWITCH_PARAM INC_DEC INC_DEC_HOLD MUTE_SOLO".split(" "),H=[],I=0,E=null,N=null,U=null;t.enable_mixer_controls=function(){function b(b,c,e){if(1==e){var d=a.get_sensor_value(b,c,0)?-1:1,g=H[I];if(g)switch(e=g.Ma[g.rm],e[1]=e[5]?e[1]*Math.pow(e[3]/e[2],d/e[4]):e[1]+(e[3]-e[2])/e[4]*d,e[1]=
C.clamp(e[1],e[2],e[3]),e[0]){case "VOLUME":"MASTER"!=g.id?B.set_volume(g.Vc,e[1]):B.set_volume(null,e[1]);break;case "DIST_REF":d=B.get_positional_params(g.Vc);d.dist_ref=e[1];B.set_positional_params(g.Vc,d);break;case "ATTENUATION":d=B.get_positional_params(g.Vc);d.attenuation=e[1];B.set_positional_params(g.Vc,d);break;case "DIST_MAX":d=B.get_positional_params(g.Vc);d.dist_max=e[1];B.set_positional_params(g.Vc,d);break;case "EQ_FREQ":d=B.get_filter_params(g.Vc);d.freq=e[1];B.set_filter_params(g.Vc,
d);break;case "EQ_Q":d=B.get_filter_params(g.Vc);d.Q=e[1];B.set_filter_params(g.Vc,d);break;case "EQ_GAIN":d=B.get_filter_params(g.Vc);d.gain=e[1];B.set_filter_params(g.Vc,d);break;case "THRESHOLD":g=B.get_compressor_params();g.threshold=e[1];B.set_compressor_params(g);break;case "KNEE":g=B.get_compressor_params();g.knee=e[1];B.set_compressor_params(g);break;case "RATIO":g=B.get_compressor_params();g.ratio=e[1];B.set_compressor_params(g);break;case "ATTACK":g=B.get_compressor_params();g.attack=e[1];
B.set_compressor_params(g);break;case "RELEASE":g=B.get_compressor_params();g.release=e[1];B.set_compressor_params(g);break;default:y.error("Unknown strip param")}"INC_DEC"==c?a.reset_timer_sensor(b,c,2,.35):a.reset_timer_sensor(b,c,2,.05)}else a.reset_timer_sensor(b,c,2,10)}function d(b,e,d){if(1==d){d=a.get_sensor_value(b,e,0)?-1:1;if(H.length){1==d&&I<H.length-1?I++:-1==d&&0<I&&I--;d=c();for(var g=d[0];g<=d[1];g++)h(H[g])}"SWITCH_STRIP"==e?a.reset_timer_sensor(b,e,2,.15+.3):a.reset_timer_sensor(b,
e,2,.15)}else a.reset_timer_sensor(b,e,2,10)}m();var f=a.create_keyboard_sensor(a.KEY_NUM4),k=a.create_keyboard_sensor(a.KEY_NUM6),p=a.create_keyboard_sensor(a.KEY_NUM8),q=a.create_keyboard_sensor(a.KEY_NUM2),r=a.create_keyboard_sensor(a.KEY_ADD),u=a.create_keyboard_sensor(a.KEY_SUB),t=a.create_keyboard_sensor(a.KEY_NUM7),n=a.create_keyboard_sensor(a.KEY_NUM9),g=a.create_timer_sensor(.15,!0),x=a.create_timer_sensor(.05,!0),f=[f,k,g];a.create_sensor_manifold(null,"SWITCH_STRIP",a.CT_TRIGGER,f,function(a){return a[0]||
a[1]},d);a.create_sensor_manifold(null,"SWITCH_STRIP_HOLD",a.CT_SHOT,f,function(a){return(a[0]||a[1])&&a[2]},d);a.create_sensor_manifold(null,"SWITCH_PARAM",a.CT_SHOT,[p,q],function(a){return a[0]||a[1]},function(b,c){var e=a.get_sensor_value(b,c,0)?-1:1,d=H[I];d&&(1==e&&d.rm<d.Ma.length-1?d.rm++:-1==e&&0<d.rm&&d.rm--)});p=[u,r,x];a.create_sensor_manifold(null,"INC_DEC",a.CT_TRIGGER,p,function(a){return a[0]||a[1]},b);a.create_sensor_manifold(null,"INC_DEC_HOLD",a.CT_SHOT,p,function(a){return(a[0]||
a[1])&&a[2]},b);a.create_sensor_manifold(null,"MUTE_SOLO",a.CT_SHOT,[t,n],function(a){return a[0]||a[1]},function(b,c){if(a.get_sensor_value(b,c,0)){var d=H[I];d&&0<=d.mute&&("MASTER"!=d.id?0==d.mute?(d.mute=1,B.mute(d.Vc,!0),1==d.Ph&&(d.Ph=0,l(d)||e(d))):(d.mute=0,l(d)||B.mute(d.Vc,!1)):0==d.mute?(d.mute=1,B.mute(null,!0)):(d.mute=0,B.mute(null,!1)))}else if((d=H[I])&&0<=d.Ph)if(0==d.Ph){d.Ph=1;B.mute(d.Vc,!1);1==d.mute&&(d.mute=0);for(var g=0;g<H.length;g++){var f=H[g];f!=d&&0==f.mute&&0==f.Ph&&
B.mute(f.Vc,!0)}}else d.Ph=0,l(d)?B.mute(d.Vc,!0):e(d)});t=a.create_elapsed_sensor();a.create_sensor_manifold(null,"MIXER_DRAW",a.CT_CONTINUOUS,[t],null,function(){if(H[I])for(var a=c(),b=a[0];b<=a[1];b++){var e=H[b];v.draw_mixer_strip(e.id,b==I,b%8,e.Ma,e.rm,e.mute,e.Ph);if(e.Vc&&B.get_filter_params(e.Vc)){B.get_filter_freq_response(e.Vc,E,N,U);for(e=0;e<N.length;e++)N[e]=20*Math.log(N[e])/Math.LN10;v.plot_array("EQ",b%8,N,20,2E4,-10,10)}}});t=a.create_timer_sensor(1,!0);a.create_sensor_manifold(null,
"MIXER_UPDATE",a.CT_TRIGGER,[t],null,function(){for(var a=c(),b=a[0];b<=a[1];b++)h(H[b])})};t.disable_mixer_controls=function(){for(var b=0;L.length;b++)a.remove_sensor_manifold(null,L[b])}});t.a=d},function(E,t,d){E=d(0);var O=d(33),T=d(39),G=d(24),r=d(54),f=d(1),k=d(29),y=d(26),x=d(60);d=Object(E.a)("mouse",function(d,p){function m(){1==F&&(F=0);var a=document.exitPointerLock||document.webkitExitPointerLock||document.mozExitPointerLock;"function"===typeof a&&a.apply(document);v.remove_sensor_manifold(L.get_active_camera(),
"SMOOTH_PL")}function b(a){2==F&&(F=0);a.removeEventListener("mousedown",h,!1);a.removeEventListener("mouseup",l,!1);a.removeEventListener("mousemove",u,!1);v.remove_sensor_manifold(L.get_active_camera(),"SMOOTH_DRAG")}function u(a){if(R()){if(w)var b=E.get_coords_target_space(a,D);else b=D,b[0]=a.clientX,b[1]=a.clientY;K[0]+=2*(b[0]-N);K[1]+=2*(b[1]-U);N=b[0];U=b[1]}a.preventDefault()}function h(a){if(w)var b=E.get_coords_target_space(a,D);else b=D,b[0]=a.clientX,b[1]=a.clientY;N=b[0];U=b[1];a.currentTarget.addEventListener("mousemove",
u,!1);a.preventDefault()}function l(a){a.currentTarget.removeEventListener("mousemove",u,!1);a.preventDefault()}function e(a,b,c,e){if(.01<Math.abs(K[0])||.01<Math.abs(K[1]))b=v.get_sensor_value(a,b,0),a=H.smooth(K[0],0,b,.1*da),b=H.smooth(K[1],0,b,.1*da),K[0]-=a,K[1]-=b,e(4E-4*-a,4E-4*-b)}function c(a,b){var c=L.get_first_character(),e=L.get_active_camera();t.rotate_camera(e,a,b);c&&(e=t.get_camera_angles_char(e,D),B.set_character_rotation_h(c,e[0]),B.set_character_vert_move_dir_angle(c,e[1]))}function a(a){z?
(a=E.get_coords_target_space(a,!1,D),a=L.pick_object(a[0],a[1])):a=L.pick_object(a.clientX,a.clientY);a?(L.outlining_is_enabled(a)&&L.set_outline_intensity(a,1),L.outlining_is_enabled(V)&&a!=V&&L.set_outline_intensity(V,0)):L.outlining_is_enabled(V)&&L.set_outline_intensity(V,0);V=a}var t=Object(O.a)(d),E=Object(T.a)(d),v=Object(G.a)(d),B=Object(r.a)(d),C=Object(f.a)(d),L=Object(k.a)(d),H=Object(y.a)(d),I=Object(x.a)(d),da=1,N=0,U=0,K=new Float32Array(2),D=new Float32Array(2),R=null,V=null,F=0,z=
!1,w=!1;p.request_pointerlock=function(a,d,f,g,h,k){function l(){if(document.pointerLockElement===a||document.webkitPointerLockElement===a||document.mozPointerLockElement===a){b(a);a.addEventListener("mousemove",g,!1);var c=L.get_active_camera();if(!v.check_sensor_manifold(c,"SMOOTH_PL")){var h=v.create_elapsed_sensor();v.create_sensor_manifold(c,"SMOOTH_PL",v.CT_CONTINUOUS,[h],null,e,k)}d()}else a.removeEventListener("mousemove",g,!1),F=0,document.removeEventListener("pointerlockchange",l,!1),document.removeEventListener("webkitpointerlockchange",
l,!1),document.removeEventListener("mozpointerlockchange",l,!1),f()}if(1!=F){F=1;d=d||function(){};f=f||function(){};k=k||c;h=h||function(){return!0};g=g||function(a){if(h()){if("number"==typeof a.movementX){var b=a.movementX;a=a.movementY}else"number"==typeof a.webkitMovementX?(b=a.webkitMovementX,a=a.webkitMovementY):"number"==typeof a.mozMovementX?(b=a.mozMovementX,a=a.mozMovementY):a=b=0;K[0]+=b;K[1]+=a}};document.addEventListener("pointerlockchange",l,!1);document.addEventListener("webkitpointerlockchange",
l,!1);document.addEventListener("mozpointerlockchange",l,!1);var m=a.requestPointerLock||a.webkitRequestPointerLock||a.mozRequestPointerLock;"function"===typeof m?m.apply(a):C.error("Pointer lock is not available")}};p.exit_pointerlock=m;p.check_pointerlock=function(a){return"function"===typeof(a.requestPointerLock||a.webkitRequestPointerLock||a.mozRequestPointerLock)?!0:!1};p.request_mouse_drag=function(a,b,d,g){2!=F&&(F=2,m(),R=b||function(){return!0},d=d||c,w=!!g,a.addEventListener("mousedown",
h,!1),a.addEventListener("mouseup",l,!1),a=L.get_active_camera(),v.check_sensor_manifold(a,"SMOOTH_DRAG")||(b=v.create_elapsed_sensor(),v.create_sensor_manifold(a,"SMOOTH_DRAG",v.CT_CONTINUOUS,[b],null,e,d)))};p.exit_mouse_drag=b;p.enable_mouse_hover_outline=function(b){z=!!b;I.detect_mobile()||E.get_canvas().addEventListener("mousemove",a)};p.disable_mouse_hover_outline=function(){I.detect_mobile()||(E.get_canvas().removeEventListener("mousemove",a),V&&L.set_outline_intensity(V,0))};p.get_coords_x=
function(a,b,c){return c?E.get_coords_target_space(a,b,D)[0]:"clientX"in a?a.clientX:(a="touchend"==a.type?a.changedTouches:b?a.targetTouches:a.touches)&&a[0]&&"clientX"in a[0]?a[0].clientX:-1};p.get_coords_y=function(a,b,c){return c?E.get_coords_target_space(a,b,D)[1]:"clientY"in a?a.clientY:(a="touchend"==a.type?a.changedTouches:b?a.targetTouches:a.touches)&&a[0]&&"clientY"in a[0]?a[0].clientY:-1};p.set_plock_smooth_factor=function(a){da=a};p.get_plock_smooth_factor=function(){return da}});t.a=
d},function(E,t,d){E=d(0);var O=d(83),T=d(24),G=d(9),r=d(29),f=d(68),k=d(40),y=d(3),x=d(54),m=d(1),p=d(26);d=Object(E.a)("npc_ai",function(d,b){function q(b,c){var e=c.destination,d=c.Vy,f=U;C.get_translation(c.collider,f);var h=0,k=f[2];e[2]=k;switch(c.type){case z:if(c.random&&c.Nl){e[0]=(12*Math.random()-6)*c.speed+d[0];e[1]=-(12*Math.random()-6)*c.speed+d[1];var l=V,d=K,m=c.speed,n=c.rot_speed;C.get_rotation(c.collider,l);y.transformQuat(I.AXIS_MY,l,d);d[2]=0;y.normalize(d,d);l=.5*m/Math.sin(n/
2);f=y.dist(e,f);f<2*l&&y.scaleAndAdd(e,d,2*l-f,e);c.Nl=!1}c.dA&&(h=c.dA-k,f=c.speed*b,h>f?h=f:h<-f&&(h=-f));c.Ok=h;break;case w:case W:c.gq?h=c.gq:c.Ok&&(h=c.Ok,c.type==W&&(h*=b)),c.random&&c.Nl&&(c.type==W?(c.speed=Math.random()+.1,f=c.JG-c.MG):f=c.max_height-c.min_height,e[0]=10*Math.random()-5+d[0],e[1]=10*Math.random()-5+d[1],e[2]=k-(Math.random()*f-.5*f),c.Nl=!1)}h&&(e[2]=k+h);var e=N,f=U,l=K,h=F,n=c.rig,d=c.collider,k=c.destination,p=c.speed,q=c.actions,v=t.get_current_anim_name(n);if(!t.is_play(n)||
!q.idle||-1==q.idle.indexOf(v)){C.get_translation(d,e);var m=k[0]-e[0],r=k[1]-e[1],m=Math.sqrt(m*m+r*r);if(m>2*p*b)c.state=20,I.horizontal_direction(k,e,l),q=c.rig,t.is_animated(q)&&(n=c.speed,p=t.get_frame(q),q=t.get_anim_length(q),n=q/24*(1-p/q)*n,.9>m/n&&y.scaleAndAdd(k,l,n-m,k)),m=V,n=D,C.get_rotation(c.collider,m),y.transformQuat(I.AXIS_MY,m,f),n[0]=f[0],n[1]=f[1],n[2]=0,y.normalize(n,n),p=y.dot(n,l),q=b/(Math.abs(Math.acos(p))/Math.PI)*c.rot_speed*c.BB,G.rotationTo(n,l,h),G.rotationTo(I.AXIS_MY,
n,m),1<=Math.abs(p)?G.copy(m,h):(G.multiply(h,m,h),G.slerp(m,h,Math.min(q,1),h)),l=b,c.type!=w&&(l=Math.max(l,1/60),m=R,n=V,G.setAxisAngle(I.AXIS_X,-Math.asin(-f[2]),n),G.setAxisAngle(I.AXIS_X,-Math.atan(c.Ok/(c.speed*l)),m),G.slerp(n,m,l,m),G.multiply(h,m,h)),C.set_rotation_v(d,h),f=K,d=D,I.quat_to_dir(h,I.AXIS_MY,f),y.scale(f,c.speed*b,d),y.add(d,e,d),d[2]=c.type!=z?(k[2]-e[2])*b*.1+e[2]:k[2],C.set_translation_v(c.collider,d);else if(c.type==z)q.move?v&&-1!=q.move.indexOf(v)&&t.is_play(n)?c.state=
20:(c.state=10,c.Nl=!0):(c.state=10,c.Nl=!0);else if(c.type==W||c.type==w)c.Nl=!0;if(a(c)&&(e=c.rig,!t.is_play(e))){h=null;switch(c.state){case 10:h=c.actions;h=h.idle?I.random_from_array(h.idle):null;break;case 20:h=t.get_current_anim_name(c.rig),f=k=c.actions,f.move_blends&&-1==f.move_blends.indexOf(h)&&f.move&&-1!=f.move.indexOf(h)&&.33<Math.random()?(k=c.actions,h=k.move_blends[k.move.indexOf(h)]):(f=c.actions,f.move&&(-1!=f.move.indexOf(h)||!f.move_blends&&!f.move_start||!f.move_start&&!h||f.move_blends&&
-1!=f.move_blends.indexOf(h)||f.move_start&&-1!=f.move_start.indexOf(h))?(k=c.actions,k.move_blends?(f=k.move_blends.indexOf(h),-1!=f?(h=f+1,h=h<k.move.length?h:0,h=k.move[h]):h=-1!=k.move.indexOf(h)?h:I.random_from_array(k.move)):h=I.random_from_array(k.move)):(f=c.actions,h=f.move_start&&-1==f.move_start.indexOf(h)&&f.move&&-1==f.move.indexOf(h)?I.random_from_array(k.move_start):null))}h&&(t.apply(e,h),t.set_behavior(e,t.AB_FINISH_RESET),t.set_frame(e,0),t.play(e))}}}function h(a,b,c,e){if(e)if(1==
c)switch(e.type){case w:a:{for(c=0;3>c;c++){var d=E.get_sensor_payload(a,b,c).hit_fract;if(d){b=d;break a}}b=void 0}b=100*b;e.Ok=b<e.min_height?10:b>e.max_height?-10:0;break;case z:a=E.get_sensor_payload(a,b,0);e.dA=a.hit_pos[2];break;case W:a=E.get_sensor_payload(a,b,0),"CLOSE_GROUND"==b?(e.Ok=100*a.hit_fract-1,e.Ok=.1>e.Ok?.05:0):"CLOSE_WATER"==b&&(e.gq=100*a.hit_fract,e.gq=e.gq<e.MG?-.02:e.gq>e.JG?.02:0)}else e.Ok=0}function l(){for(var a=0;a<da.length;a++){var b=da[a];e(b);c(b);t.get_current_anim_name(b.rig)&&
t.play(b.rig)}}function e(a){var b=y.create(),c=a.collider;switch(a.type){case w:var e=E.create_ray_sensor(c,b,[0,0,-100],"TERRAIN",!0,!0),d=E.create_ray_sensor(c,b,[0,0,-100],"STONE",!0,!0),b=E.create_ray_sensor(c,b,[0,0,-100],"WATER",!0,!0),e=[e,d,b];E.create_sensor_manifold(c,"CLOSE_GROUND",E.CT_CONTINUOUS,e,function(a){return a[0]||a[1]||a[2]},h,a);break;case z:e=E.create_ray_sensor(c,[0,0,1],[0,0,-99],"TERRAIN",!0,!0);e=[e];E.create_sensor_manifold(c,"CLOSE_GROUND",E.CT_CONTINUOUS,e,null,h,a);
break;case W:e=E.create_ray_sensor(c,[0,0,1],[0,0,-99],"TERRAIN",!0,!0),b=E.create_ray_sensor(c,b,[0,0,100],"WATER",!0,!0),e=[e],E.create_sensor_manifold(c,"CLOSE_WATER",E.CT_CONTINUOUS,[b],null,h,a),E.create_sensor_manifold(c,"CLOSE_GROUND",E.CT_CONTINUOUS,e,null,h,a)}}function c(a){var b=a.collider;if(a.type==z){var c=E.create_collision_sensor(b,"CONSTRUCTION",!1);E.create_sensor_manifold(b,"CONSTRUCTION_COLL",E.CT_CONTINUOUS,[c],null,function(b,c,e){1==e?(y.copy(a.Vy,a.destination),a.BB=4):a.BB=
1})}}function a(a){var b=a.rig;if(!t.is_play(b))return!0;b=t.get_current_anim_name(b);if(!b)return!0;var c=a.actions;switch(a.state){case 10:if(!c.idle)return!1;break;case 20:if(!c.move||-1!=c.move.indexOf(b)||c.move_start&&-1!=c.move_start.indexOf(b)||c.move_blends&&-1!=c.move_blends.indexOf(b))return!1;break;default:return!1}return!0}var t=Object(O.a)(d),E=Object(T.a)(d),v=Object(r.a)(d),B=Object(f.a)(d),C=Object(k.a)(d),L=Object(x.a)(d),H=Object(m.a)(d),I=Object(p.a)(d),da=[],N=new Float32Array(3),
U=new Float32Array(3),K=new Float32Array(3),D=new Float32Array(3),R=new Float32Array(4),V=new Float32Array(4),F=new Float32Array(4),z=b.NT_WALKING=10,w=b.NT_FLYING=20,W=b.NT_SWIMMING=30;b.new_event_track=function(a){var b={obj:null,rig:null,collider:null,empty:null,type:z,state:10,actions:{},Vy:new Float32Array(3),destination:new Float32Array(3),path:[],start:[],ended:[],Zu:[],delay:[],random:!0,Nl:!0,dA:0,Ok:0,gq:0,BB:1,speed:1,rot_speed:.1,max_height:0,min_height:0,JG:0,MG:0};if("object"!=typeof a.obj)H.error("Can't create event track. Wrong object.");
else if("object"!=typeof a.rig)H.error("Can't create event track. Wrong rig object.");else if("object"==typeof a.collider&&L.has_physics(a.collider)){b.obj=a.obj;b.collider=a.collider;b.rig=a.rig;C.get_translation(a.collider,b.Vy);"object"==typeof a.actions&&(b.actions=a.actions);"boolean"==typeof a.random&&(b.random=a.random);"number"==typeof a.type&&(b.type=a.type);"number"==typeof a.speed&&(b.speed=a.speed);"number"==typeof a.rot_speed&&(b.rot_speed=a.rot_speed);"number"==typeof a.max_height&&
(b.max_height=a.max_height);"number"==typeof a.min_height&&(b.min_height=a.min_height);if(!b.random){for(var c=0;c<a.path.length;c++)b.start[c]=-1,b.ended[c]=!1,b.Zu[c]=!1;b.path=a.path;b.delay=a.delay}a=a.actions;var c=t.get_current_anim_name(b.rig),e;for(e in a)for(var d=a[e],f=0;f<d.length;f++)t.apply(b.rig,d[f]);c&&t.apply(b.rig,c);da.push(b)}else H.error("Can't create event track. Wrong collider object.")};b.enable_animation=function(){if(da.length){l();var a=E.create_elapsed_sensor();E.create_sensor_manifold(da[0].collider,
"ELAPSED",E.CT_CONTINUOUS,[a],function(a){return a[0]},function(a,b,c){if(1==c)for(a=E.get_sensor_value(a,b,0),b=0;b<da.length;b++){c=da[b];var e=a;if(v.is_visible(c.obj))if(c.random)q(e,c);else{for(var d=B.get_timeline(),f=0;f<c.path.length;f++)if(!c.ended[f]){c.Zu[f]||(c.Zu[f]=!0,c.destination[0]=c.path[f][0],c.destination[1]=c.path[f][1],c.destination[2]=c.path[f][2],c.start[f]=d+c.delay[f]);if(d<c.start[f])break;q(e,c);c.ended[f]=c.Nl;break}a:{for(e=0;e<c.path.length;e++)if(0==c.ended[e]){e=!1;
break a}e=!0}if(e)for(e=0;e<c.path.length;e++)c.Zu[e]=!1,c.ended[e]=!1}}})}};b.disable_animation=function(){if(!(0>=da.length))for(var a=0;a<da.length;a++){var b=da[a];E.check_sensor_manifolds(b.collider)&&E.remove_sensor_manifold(b.collider);t.is_play(b.rig)&&t.stop(b.rig)}}});t.a=d},function(E,t,d){E=d(0);var O=d(39);d=Object(E.a)("preloader",function(d,t){var r=Object(O.a)(d),f,k,y,x,m,p,q,b,u=null;t.create_preloader=function(b){var d="#484848",e="#5276cf",c="rgba(150, 150, 150, 0.7)",a="#fff",
h;for(h in b)switch(h){case "container_color":d=b.container_color;break;case "bar_color":e=b.bar_color;break;case "frame_color":c=b.frame_color;break;case "font_color":a=b.font_color}b=document.createElement("div");h=b.cloneNode(!1);var m=b.cloneNode(!1),p=b.cloneNode(!1),q=r.get_container();m.appendChild(h);m.appendChild(p);b.appendChild(m);q.appendChild(b);b.style.cssText="background-color: "+d+";width: 100%;height: 100%;position: absolute;top: 0;left: 0;";m.style.cssText="position: absolute;left: 50%;top: 50%;margin-left: -150px;margin-top: -30px;width: 300px;height: 28px;box-shadow: 0px 0px 10px 0px "+
c+";border: 2px solid "+c+";";h.style.cssText="position: absolute;width: 0%;top: 0;left: 0;background-color: "+e+";height: 100%;";p.style.cssText="font-family: Arial, sans-serif;line-height: 28px;height: 100%;width: 100%;top: 0;left: 0;text-align: center;position: absolute;font-size: 16px;font-weight: bold;text-shadow: 0px 0px 6px "+c+";color: "+a+";";f=h;k=p;y=b;x="DEFAULT"};t.create_simple_preloader=function(b){var d=null,e=null,c="#bf9221",a="#000",h;for(h in b)switch(h){case "canvas_container_id":d=
b.canvas_container_id;break;case "background_container_id":e=b.background_container_id;break;case "bg_color":a=b.bg_color;break;case "bar_color":c=b.bar_color}b=document.createElement("div");h=document.createElement("div");b.id="simple_preloader_container";var p=document.createElement("div"),q=document.createElement("div"),e=document.getElementById(e);u=document.getElementById(d);b.style.cssText="z-index: 4;background-color: "+a+";width: 100%;height: 100%;position: absolute;margin: 0;padding: 0;top: 0;left: 0;";
h.style.cssText="position: absolute;left: 50%;top: 82%;width: 300px;height: 20px;margin-left: -150px;margin-top: -10px;border-style:solid;border-width:4px;border-color: #000;border-radius: 0px;";p.style.cssText="position: absolute;left: 0px;top: 1px;width: 0px;height: 18px;background-color: "+c+";border-radius: 0px;";q.style.cssText="position: absolute;left: 50%;top: 50%;width: 100%;height: 100%;margin-left: -150px;margin-top: -10px;text-align: center;font-size: 17px;font-weight: bold;color: #000;font-family: Verdana;"+
h.appendChild(p);h.appendChild(q);b.appendChild(h);document.body.appendChild(b);x="SIMPLE";y=b;f=p;k=q;m=e};t.create_rotation_preloader=function(b){var d=null,e=null,c="rgba(0,0,0,0)",a="",f="",h="rgba(0,0,0,0)",q;for(q in b)switch(q){case "canvas_container_id":d=b.canvas_container_id;break;case "background_container_id":e=b.background_container_id;break;case "frame_bg_color":c=b.frame_bg_color;break;case "bg_color":h=b.bg_color;break;case "frame_class":a=b.frame_class;break;case "anim_elem_class":f=
b.anim_elem_class}b=document.createElement("div");q=document.createElement("div");var r=document.createElement("div"),t=document.createElement("div"),e=document.getElementById(e);u=document.getElementById(d);b.style.cssText="z-index: 4;background-color: "+h+";width: 100%;height: 100%;position: absolute;margin: 0;padding: 0;top: 0;left: 0;";q.style.cssText="position: absolute;left: 50%;top: 50%;width: 117px;height: 117px;margin-left: -58px;margin-top: -58px;background-color: "+c+";";r.style.cssText=
"position: absolute;left: 0px;top: 0px;width: 100%;height: 100%;background-position: center;background-repeat: no-repeat;";t.style.cssText="position: absolute;width: 100%;height: 100%;text-align: center;margin-top: 38px;font-size: 36px;color: #ffffff;font-family: Arial;font-weight: bold;";r.className=f;q.appendChild(r);q.className=a;q.appendChild(t);b.appendChild(q);u.appendChild(b);x="ROTATION";y=b;p=r;k=t;m=e};t.create_advanced_preloader=function(d){var h=d.preloader_width,h=h/(h-d.img_width),e=
document.getElementById(d.preloader_bar_id),c=document.getElementById(d.fill_band_id),a=document.getElementById(d.preloader_caption_id),p=document.getElementById(d.preloader_container_id),r=document.getElementById(d.background_container_id);u=document.getElementById(d.canvas_container_id);x="ADVANCED";f=e;q=c;b=h;k=a;y=p;m=r};t.update_preloader=function(d){k.innerHTML=d+"%";"SIMPLE"==x?f.style.width=d+"%":"ADVANCED"==x?(f.style.width=d/b+"%",q.style.width=100-d+"%"):"ROTATION"==x?p.style.transform=
"rotate("+d+"deg)":"DEFAULT"==x&&(f.style.width=d+"%");100==d&&(y.parentNode.removeChild(y),m&&m.parentNode.removeChild(m))}});t.a=d},function(E,t,d){E=d(0);var O=d(50),T=d(1);d=Object(E.a)("screenshooter",function(d,r){var f=Object(O.a)(d),k=Object(T.a)(d);r.shot=function(d,r){k.df("shot","screen.shot");f.shot(d,r)}});t.a=d},function(E,t,d){E=d(0);var O=d(55);d=Object(E.a)("anchors",function(d,t){var r=Object(O.a)(d);t.attach_move_cb=r.attach_move_cb;t.detach_move_cb=r.detach_move_cb;t.is_anchor=
r.is_anchor;t.get_element_id=r.get_element_id;t.update=function(){r.update(!0)}});t.a=d},function(E,t,d){E=d(0);var O=d(56),T=d(8),G=d(13),r=d(1);d=Object(E.a)("armature",function(d,k){var f=Object(T.a)(d),t=Object(G.a)(d),m=Object(r.a)(d);k.get_bone_tsr=function(d,k,b){if(!f.is_armature(d))return null;if(!O.a(d,k))return m.error('There is no bone: "',k,'" in "',d.name,'".'),null;b||(b=new Float32Array(8));O.b(d,k,!1,!1,b);return b};k.get_bone_tsr_rel=function(d,k,b){if(!f.is_armature(d))return null;
if(!O.a(d,k))return m.error('There is no bone: "',k,'" in "',d.name,'".'),null;b||(b=new Float32Array(8));O.b(d,k,!1,!0,b);return b};k.set_bone_tsr=function(d,k,b){f.is_armature(d)&&(O.a(d,k)?(O.c(d,k,b,!1),t.Ea(d)):m.error('There is no bone: "',k,'" in "',d.name,'".'))};k.set_bone_tsr_rel=function(d,k,b){f.is_armature(d)&&(O.a(d,k)?(O.c(d,k,b,!0),t.Ea(d)):m.error('There is no bone: "',k,'" in "',d.name,'".'))}});t.a=d},function(E,t,d){E=d(0);var O=d(43);d=Object(E.a)("assets",function(d,t){var r=
Object(O.a)(d);t.AT_ARRAYBUFFER=r.AT_ARRAYBUFFER;t.AT_ARRAYBUFFER_ZIP=r.AT_ARRAYBUFFER_ZIP;t.AT_JSON=r.AT_JSON;t.AT_JSON_ZIP=r.AT_JSON_ZIP;t.AT_TEXT=r.AT_TEXT;t.AT_AUDIOBUFFER=r.AT_AUDIOBUFFER;t.AT_IMAGE_ELEMENT=r.AT_IMAGE_ELEMENT;t.AT_AUDIO_ELEMENT=r.AT_AUDIO_ELEMENT;t.AT_VIDEO_ELEMENT=r.AT_VIDEO_ELEMENT;t.AT_SEQ_VIDEO_ELEMENT=r.AT_SEQ_VIDEO_ELEMENT;t.enqueue=function(d,k,t,x){d.length&&r.enqueue(d,k,t,x)}});t.a=d},function(E,t,d){E=d(0);var O=d(16),T=d(20),G=d(1),r=d(22),f=d(36);d=Object(E.a)("geometry",
function(d,t){var k=Object(O.a)(d),m=Object(T.a)(d),p=Object(G.a)(d),q=Object(r.a)(d);t.extract_vertex_array=function(b,d,f){if(!m.bk(b))return p.error("Wrong object:",b.name),null;if(b=k.$b(b,d,"MAIN")){if((d=b.Za)&&d.mc&&("a_normal"==f&&d.mc.a_tbn||d.mc[f]))return m.Kz(d,f);p.error("Attribute not found:"+f);return null}p.error("Wrong material:",d);return null};t.extract_index_array=function(b,d){if(!m.bk(b))return p.error("Wrong object:",b.name),null;var f=k.$b(b,d,"MAIN");if(f){if((f=f.Za)&&f.mc)return f.Je;
p.error("Buffer data not found");return null}p.error("Wrong material:",d);return null};t.update_vertex_array=function(b,d,f,l){if(m.bk(b))for(var e=["MAIN","SHADOW","COLOR_ID"],c=0;c<e.length;c++){var a=k.$b(b,d,e[c]);a&&(a=a.Za)&&a.mc&&("a_normal"==f&&a.mc.a_tbn||a.mc[f])&&m.GI(a,f,0,l)}else p.error("Wrong object:",b.name)};t.override_geometry=function(b,d,h,l,e){if(m.bk(b))if(h instanceof Uint16Array||h instanceof Uint32Array)if(l instanceof Float32Array)for(var c=["MAIN","SHADOW","COLOR_ID"],a=
0;a<c.length;a++){var r=k.$b(b,d,c[a]);if(r){var t=r.Za;if(t){m.HI(t,r.fi,h);var v={},u;for(u in t.mc){var x=t.mc[u],x=l.length/3*x.Tc,y=m.Io(u);v[y]||(v[y]=0);v[y]+=x}y=m.GQ(v);t.Pc=y;v={};for(u in t.mc)switch(x=t.mc[u],y=m.Io(u),v[y]||(v[y]=0),u){case "a_position":m.pt(t.Pc,"a_position",l,v[y]);x.offset=v[y];x.length=l.length;v[y]+=x.length;break;case "a_tbn":var H;e&&(H=m.VD(h,l,l));var I=m.UD(h,l,H);x.length=l.length/3*x.Tc;for(var E=new Float32Array(x.length),G=0;G<E.length;G+=4)E[G]=1,E[G+3]=
1;I=f.d(I,E);m.pt(t.Pc,"a_tbn",I,v[y]);x.offset=v[y];v[y]+=x.length;break;default:x.offset=v[y],x.length=l.length/3*x.Tc,I=new (m.GP(y))(x.length),m.pt(t.Pc,u,I,v[y]),v[y]+=x.length}m.sC(t);q.Wt(r);(r=k.Tg(b,r))&&r.Za&&(r.Za=t)}}}else p.error("Wrong positions_array type");else p.error("Wrong ibo_array type");else p.error("Wrong object:",b.name)};t.set_shape_key_value=function(b,d,f){m.check_shape_keys(b)?m.iA(b,d)?m.Uy(b,d,parseFloat(f)):p.error("Wrong key name:",d):p.error("Wrong object:",b.name)};
t.check_shape_keys=function(b){return m.check_shape_keys(b)};t.get_shape_keys_names=function(b){return m.check_shape_keys(b)?m.get_shape_keys_names(b):(p.error("Wrong object:",b.name),[])};t.get_shape_key_value=function(b,d){return m.check_shape_keys(b)?m.iA(b,d)?m.get_shape_key_value(b,d):(p.error("Wrong key name:",d),0):(p.error("Wrong object:",b.name),0)};t.draw_line=function(b,d,f){f=f||!1;if(d instanceof Float32Array){if(b=k.kv(b))m.draw_line(b,d,f),q.Wt(b)}else p.error("Wrong positions type")}});
t.a=d},function(E,t,d){E=d(0);var O=d(51),T=d(1);d=Object(E.a)("hud",function(d,r){var f=Object(O.a)(d),k=Object(T.a)(d);r.draw_mixer_strip=function(d,r,m,p,q,b,t){k.df("draw_mixer_strip","screen.draw_mixer_strip");f.draw_mixer_strip(d,r,m,p,q,b,t)};r.plot_array=function(d,r,m,p,q,b,t){k.df("plot_array","screen.plot_array");f.plot_array(d,r,m,p,q,b,t)}});t.a=d},function(E,t,d){E=d(0);var O=d(57),T=d(12),G=d(8),r=d(1),f=d(10),k=d(13),y=d(6),x=d(2),m=d(3);d=Object(E.a)("lights",function(d,q){function b(b){for(var d=
c.get_active(),f=h.Fc(d,"LAMP",h.DATA_ID_ALL),k=0;k<f.length;k++){var l=f[k];if("SUN"==l.lc.type){var p=l;break}}if(!p)e.error("There is no sun on the scene");else if("number"==typeof b.hor_position&&"number"==typeof b.vert_position){f=x.T(180-b.hor_position);b=x.T(90-b.vert_position);k=p.ka;a.set_rotation_euler(p,[b,0,f]);f=new Float32Array(3);l=y.g(k.na);x._33(l,x.f,f);k=y.j(k.na);k=m.length(k);m.copy(f,t);m.scale(t,k,t);a.set_translation(p,t);a.Ea(p);f=p.lc;if(f.aF){k=d.world.horizon_color;l=d.world.zenith_color;
b=Math.cos(Math.abs(b));var q=Math.max(b,.1)*d.world.light_settings.environment_energy;O.d(f,Math.max(Math.min(3*b,1),0)*f.RE);c.set_environment_colors(d,q,k,l)}c.gt(p,d)}}function p(a){if(l.is_lamp(a))return a.lc.type;e.error("get_light_type(): Wrong object");return""}var h=Object(T.a)(d),l=Object(G.a)(d),e=Object(r.a)(d),c=Object(f.a)(d),a=Object(k.a)(d),t=new Float32Array(3),E,v,B,C=60;q.get_lamps=function(a){var b=c.get_active(),b=h.Fc(b,"LAMP",h.DATA_ID_ALL);if(!a)return b;for(var e=[],d=0;d<
b.length;d++){var f=b[d];f.lc.type===a&&e.push(f)}return e};q.get_sun_params=function(){for(var a=c.get_active(),a=h.Fc(a,"LAMP",h.DATA_ID_ALL),b=null,e=0;e<a.length;e++){var d=a[e];if("SUN"==d.lc.type){b=d;break}}return b?(b=b.lc.direction,a=x._38(Math.atan2(-b[1],b[0]))+90,180<a&&(a-=360),b=x._38(Math.atan2(b[2],Math.sqrt(b[0]*b[0]+b[1]*b[1]))),e={},e.hor_position=a,e.vert_position=b,e):null};q.set_sun_params=b;q.set_day_time=function(a){for(var d=c.get_active(),d=h.Fc(d,"LAMP",h.DATA_ID_ALL),f=
0;f<d.length;f++){var k=d[f];if("SUN"==k.lc.type){var l=k;break}}l?(l=-Math.cos(a/12*Math.PI)*C,d={},d.hor_position=12>a?15*a:15*(a-24),d.vert_position=l,b(d)):e.error("There is no sun on the scene")};q.set_date=function(a){E=a.getFullYear();v=a.getMonth();B=a.getDate();E?1582==E&&9==v&&4<B&&15>B&&e.error("The dates 5 through 14 October, 1582, do not exist in the Gregorian system!"):e.error("There is no year 0 in the Julian system!")};q.set_max_sun_angle=function(a){C=Math.min(Math.max(a,0),90)};
q.get_light_params=function(a){if(l.is_lamp(a))var b=a.lc;else return e.error("get_light_params(): Wrong object"),null;if(a=p(a))switch(a){case "SPOT":var c={light_type:a,light_color:new Float32Array(3),light_energy:b.Rg,light_spot_blend:b.Ts,light_spot_size:b.En,light_distance:b.distance};c.light_color.set(b.color);break;case "POINT":c={light_type:a,light_color:new Float32Array(3),light_energy:b.Rg,light_distance:b.distance};c.light_color.set(b.color);break;default:c={light_type:a,light_color:new Float32Array(3),
light_energy:b.Rg},c.light_color.set(b.color)}return c?c:null};q.get_light_type=p;q.set_light_params=function(a,b){if(l.is_lamp(a)){var d=a.lc,f=c.get_active(),h=!1;"number"==typeof b.light_energy&&O.d(d,b.light_energy);"object"==typeof b.light_color&&O.b(d,b.light_color);"number"==typeof b.light_spot_blend&&(O.e(d,b.light_spot_blend),h=!0);"number"==typeof b.light_spot_size&&(O.f(d,b.light_spot_size),h=!0);"number"==typeof b.light_distance&&(O.c(d,b.light_distance),h=!0);c.gt(a,f);h&&c.jU(f)}else e.error("set_light_params(): Wrong object")};
q.get_light_energy=function(a){return l.is_lamp(a)?a.lc.Rg:(e.error("get_light_energy(): Wrong object"),0)};q.set_light_energy=function(a,b){if(l.is_lamp(a)){var d=c.get_active();O.d(a.lc,b);c.gt(a,d)}else e.error("set_light_energy(): Wrong object")};q.get_light_color=function(a,b){if(!l.is_lamp(a))return e.error("get_light_color(): Wrong object"),null;b=b||new Float32Array(3);b.set(a.lc.color);return b};q.set_light_color=function(a,b){if(l.is_lamp(a)){var d=c.get_active();O.b(a.lc,b);c.gt(a,d)}else e.error("set_light_color(): Wrong object")}});
t.a=d},function(E,t,d){E=d(0);var O=d(59);d=Object(E.a)("logic_nodes",function(d,t){var r=Object(O.a)(d);t.append_custom_callback=function(d,k){r.NL(d,k)};t.remove_custom_callback=function(d){r.tS(d)};t.run_entrypoint=function(d,k){r.GS(d,k)}});t.a=d},function(E,t,d){E=d(0);var O=d(16),T=d(4),G=d(20),r=d(12),f=d(8),k=d(1),y=d(34),x=d(2),m=d(10);d=Object(E.a)("material",function(d,q){var b=Object(O.a)(d),p=Object(T.a)(d),h=Object(G.a)(d),l=Object(r.a)(d),e=Object(f.a)(d),c=Object(k.a)(d),a=Object(y.a)(d),
t=Object(m.a)(d),E=p.wa;q.inherit_material=function(a,b,e,d){if(h.bk(e)&&h.bk(a)){var f=a.Hf.Fl.indexOf(b);if(-1==f)c.error('inherit_material(): material "'+b+'" not found on the object "'+a.le+'".');else{var k=e.Hf.Fl.indexOf(d);-1==k?c.error('inherit_material(): material "'+d+'" not found on the object "'+e.le+'".'):(0==e.Vk.data.submeshes[k].shade_tangs.length&&a.Sc[f].Se&&c.warn('The target material "'+d+'" was exported without tangent shading data. However, the "'+b+'" material requires it. It\'s needed to enable the "Tangent Shading" option on the target material for correct rendering.'),
l.inherit_material(a,b,e,d))}}else c.error('inherit_material(): both objects "'+a.le+'" and "'+e.le+'" must have the "Dynamic Geometry & Materials" flag enabled.')};q.get_materials_names=function(a){var b=[];if(!e.kc(a))return c.error('get_materials_names(): Object "'+a.name+'" is not a dynamic MESH.'),b;a=a.Ba;for(var d=0;d<a.length;d++)for(var f=a[d].Ia,h=0;h<f.length;h++){var k=f[h];if("MAIN"==k.type)for(var l=0;l<k.Hc.length;l++)-1==b.indexOf(k.Hc[l])&&b.push(k.Hc[l])}return b};q.set_diffuse_color=
function(a,d,f){if(e.kc(a)){var h=b.$b(a,d,"MAIN");h?h.bc?c.error("set_diffuse_color(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):(h.Qc.set(f),(a=b.Tg(a,d,"MAIN"))&&a.Qc.set(f)):c.error('set_diffuse_color(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".')}else c.error('set_diffuse_color(): Object "'+a.name+'" is not a dynamic MESH.')};q.get_diffuse_color=function(a,d){var f=new Float32Array(4);if(!e.kc(a))return c.error('get_diffuse_color(): Object "'+
a.name+'" is not a dynamic MESH.'),f;var h=b.$b(a,d,"MAIN");if(!h)return c.error('get_diffuse_color(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".'),f;if(h.bc)return c.error("get_diffuse_color(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),f;f.set(h.Qc);return f};q.set_diffuse_intensity=function(a,d,f){if(e.kc(a)){var h=b.$b(a,d,"MAIN");if(h)if(h.bc)c.error("set_diffuse_intensity(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");
else{if(h.Ie=f,a=b.Tg(a,d,"MAIN"))a.Ie=f}else c.error('set_diffuse_intensity(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".')}else c.error('set_diffuse_intensity(): Object "'+a.name+'" is not a dynamic MESH.')};q.get_diffuse_intensity=function(a,d){if(!e.kc(a))return c.error('get_diffuse_intensity(): Object "'+a.name+'" is not a dynamic MESH.'),0;var f=b.$b(a,d,"MAIN");return f?f.bc?(c.error("get_diffuse_intensity(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),
0):f.Ie:(c.error('get_diffuse_intensity(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".'),0)};q.set_specular_color=function(a,d,f){if(e.kc(a)){var h=b.$b(a,d,"MAIN");h?h.bc?c.error("set_specular_color(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):(h.Qe.set(f),(a=b.Tg(a,d,"MAIN"))&&a.Qe.set(f)):c.error('set_specular_color(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".')}else c.error('set_specular_color(): Object "'+a.name+'" is not a dynamic MESH.')};
q.get_specular_color=function(a,d){var f=new Float32Array(3);if(!e.kc(a))return c.error('get_specular_color(): Object "'+a.name+'" is not a dynamic MESH.'),f;var h=b.$b(a,d,"MAIN");if(!h)return c.error('get_specular_color(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".'),f;if(h.bc)return c.error("get_specular_color(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),f;f.set(h.Qe);return f};q.set_specular_color_factor=function(a,d,f){if(e.kc(a)){var h=
b.$b(a,d,"MAIN");if(h)if(h.bc)c.error("set_specular_color_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(h.Dk=f,a=b.Tg(a,d,"MAIN"))a.Dk=f}else c.error('set_specular_color_factor(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".')}else c.error('set_specular_color_factor(): Object "'+a.name+'" is not a dynamic MESH.')};q.get_specular_color_factor=function(a,d){if(!e.kc(a))return c.error('get_specular_color_factor(): Object "'+a.name+
'" is not a dynamic MESH.'),0;var f=b.$b(a,d,"MAIN");return f?f.bc?(c.error("get_specular_color_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.Dk:(c.error('get_specular_color_factor(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".'),0)};q.set_specular_intensity=function(a,d,f){if(e.kc(a)){var h=b.$b(a,d,"MAIN");h?h.bc?c.error("set_specular_intensity(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):
(h.rf[0]=f,(a=b.Tg(a,d,"MAIN"))&&(a.rf[0]=f)):c.error('set_specular_intensity(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".')}else c.error('set_specular_intensity(): Object "'+a.name+'" is not a dynamic MESH.')};q.get_specular_intensity=function(a,d){if(!e.kc(a))return c.error('get_specular_intensity(): Object "'+a.name+'" is not a dynamic MESH.'),0;var f=b.$b(a,d,"MAIN");return f?f.bc?(c.error("get_specular_intensity(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),
0):f.rf[0]:(c.error('get_specular_intensity(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".'),0)};q.check_specular_intensity=function(a,e){c.Pa("check_specular_intensity() is deprecated, not needed anymore");var d=b.$b(a,e,"MAIN");return!(!d||!d.rf[0])};q.set_specular_hardness=function(a,d,f){if(e.kc(a)){var h=b.$b(a,d,"MAIN");h?h.bc?c.error("set_specular_hardness(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead."):(h.rf[1]=f,(a=b.Tg(a,d,"MAIN"))&&
(a.rf[1]=f)):c.error('set_specular_hardness(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".')}else c.error('set_specular_hardness(): Object "'+a.name+'" is not a dynamic MESH.')};q.get_specular_hardness=function(a,d){if(!e.kc(a))return c.error('get_specular_hardness(): Object "'+a.name+'" is not a dynamic MESH.'),0;var f=b.$b(a,d,"MAIN");return f?f.bc?(c.error("get_specular_hardness(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.rf[1]:
(c.error('get_specular_hardness(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".'),0)};q.check_specular_hardness=function(a,e){c.Pa("check_specular_hardness() is deprecated, not needed anymore");var d=b.$b(a,e,"MAIN");return!(!d||!d.rf[1])};q.set_emit_factor=function(a,d,f){if(e.kc(a)){var h=b.$b(a,d,"MAIN");if(h)if(h.bc)c.error("set_emit_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(h.fe=f,a=b.Tg(a,d,"MAIN"))a.fe=f}else c.error('set_emit_factor(): Material "'+
d+'" wasn\'t found on the object "'+a.name+'".')}else c.error('set_emit_factor(): Object "'+a.name+'" is not a dynamic MESH.')};q.get_emit_factor=function(a,d){if(!e.kc(a))return c.error('get_emit_factor(): Object "'+a.name+'" is not a dynamic MESH.'),0;var f=b.$b(a,d,"MAIN");return f?f.bc?(c.error("get_emit_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.fe:(c.error('get_emit_factor(): Material "'+d+'" wasn\'t found on the object "'+a.name+
'".'),0)};q.set_ambient_factor=function(a,d,f){if(e.kc(a)){var h=b.$b(a,d,"MAIN");if(h)if(h.bc)c.error("set_ambient_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(h.ce=f,a=b.Tg(a,d,"MAIN"))a.ce=f}else c.error('set_ambient_factor(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".')}else c.error('set_ambient_factor(): Object "'+a.name+'" is not a dynamic MESH.')};q.get_ambient_factor=function(a,d){if(!e.kc(a))return c.error('get_ambient_factor(): Object "'+
a.name+'" is not a dynamic MESH.'),0;var f=b.$b(a,d,"MAIN");return f?f.bc?(c.error("get_ambient_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.ce:(c.error('get_ambient_factor(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".'),0)};q.set_diffuse_color_factor=function(a,d,f){if(e.kc(a)){var h=b.$b(a,d,"MAIN");if(h)if(h.bc)c.error("set_diffuse_color_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");
else{if(h.Vi=f,a=b.Tg(a,d,"MAIN"))a.Vi=f}else c.error('set_diffuse_color_factor(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".')}else c.error('set_diffuse_color_factor(): Object "'+a.name+'" is not a dynamic MESH.')};q.get_diffuse_color_factor=function(a,d){if(!e.kc(a))return c.error('get_diffuse_color_factor(): Object "'+a.name+'" is not a dynamic MESH.'),0;var f=b.$b(a,d,"MAIN");return f?f.bc?(c.error("get_diffuse_color_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),
0):f.Vi:(c.error('get_diffuse_color_factor(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".'),0)};q.set_alpha_factor=function(a,d,f){if(e.kc(a)){var h=b.$b(a,d,"MAIN");if(h)if(h.bc)c.error("set_alpha_factor(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{if(h.ph=f,a=b.Tg(a,d,"MAIN"))a.ph=f}else c.error('set_alpha_factor(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".')}else c.error('set_alpha_factor(): Object "'+a.name+'" is not a dynamic MESH.')};
q.get_alpha_factor=function(a,d){if(!e.kc(a))return c.error('get_alpha_factor(): Object "'+a.name+'" is not a dynamic MESH.'),0;var f=b.$b(a,d,"MAIN");return f?f.bc?(c.error("get_alpha_factor(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),0):f.ph:(c.error('get_alpha_factor(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".'),0)};q.get_material_extended_params=function(a,d){if(!e.kc(a))return c.error('get_material_extended_params(): Object "'+
a.name+'" is not a dynamic MESH.'),null;var f=b.$b(a,d,"MAIN");if(!f)return c.error('get_material_extended_params(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".'),null;if(f.bc)return c.error("get_material_extended_params(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),null;var h={};h.reflect_factor=f.reflect_factor;h.fresnel=f.ii[0];h.fresnel_factor=5*(1-f.ii[1]);h.parallax_scale=f.parallax_scale;h.parallax_steps=parseFloat(b.Pd(f,"PARALLAX_STEPS")[1]);
return h};q.set_material_extended_params=function(d,f,h){if(e.kc(d)){var k=b.$b(d,f,"MAIN");if(k)if(k.bc)c.error("set_material_extended_params(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{var l=[k];(k=b.Tg(d,f,"MAIN"))&&l.push(k);for(d=0;d<l.length;d++)k=l[d],"number"==typeof h.reflect_factor&&(k.reflect_factor=h.reflect_factor),"number"==typeof h.fresnel&&(k.ii[0]=h.fresnel),"number"==typeof h.fresnel_factor&&(k.ii[1]=1-h.fresnel_factor/5),"number"==
typeof h.parallax_scale&&(k.parallax_scale=h.parallax_scale),"number"==typeof h.parallax_steps&&(b.dc(k,"PARALLAX_STEPS",a.Fa(h.parallax_steps)),b.md(k),t.rH(k))}else c.error('set_material_extended_params(): Material "'+f+'" wasn\'t found on the object "'+d.name+'".')}else c.error('set_material_extended_params(): Object "'+d.name+'" is not a dynamic MESH.')};q.get_water_material_params=function(a,d){if(!e.kc(a))return c.error('get_water_material_params(): Object "'+a.name+'" is not a dynamic MESH.'),
null;var f=b.$b(a,d,"MAIN");if(!f||!f.yg)return c.error('get_water_material_params(): Material "'+d+'" wasn\'t found on the object "'+a.name+"\" or it's not a water material."),null;if(f.bc)return c.error("get_water_material_params(): Not allowed for node materials! Use get_nodemat_value/get_nodemat_rgb methods instead."),null;var h={};h.shore_smoothing=E.shore_smoothing&&f.Un&&!!parseFloat(b.Pd(f,"SHORE_SMOOTHING")[1]);h.absorb_factor=parseFloat(b.Pd(f,"ABSORB")[1]);h.foam_factor=f.foam_factor;h.shallow_water_col=
new Float32Array(3);h.shore_water_col=new Float32Array(3);h.shallow_water_col_fac=0;h.shore_water_col_fac=0;E.xp&&(h.shallow_water_col.set(f.shallow_water_col),h.shore_water_col.set(f.shore_water_col),h.shallow_water_col_fac=f.shallow_water_col_fac,h.shore_water_col_fac=f.shore_water_col_fac);h.norm_uv_velocity=f.km;h.water_dynamic=E.water_dynamic&&f.water_dynamic&&!!parseFloat(b.Pd(f,"DYNAMIC")[1]);h.sss_strength=parseFloat(b.Pd(f,"SSS_STRENGTH")[1]);h.sss_width=parseFloat(b.Pd(f,"SSS_WIDTH")[1]);
h.waves_height=parseFloat(b.Pd(f,"WAVES_HEIGHT")[1]);h.waves_length=parseFloat(b.Pd(f,"WAVES_LENGTH")[1]);h.dst_noise_scale0=parseFloat(b.Pd(f,"DST_NOISE_SCALE_0")[1]);h.dst_noise_scale1=parseFloat(b.Pd(f,"DST_NOISE_SCALE_1")[1]);h.dst_noise_freq0=parseFloat(b.Pd(f,"DST_NOISE_FREQ_0")[1]);h.dst_noise_freq1=parseFloat(b.Pd(f,"DST_NOISE_FREQ_1")[1]);h.dir_min_shore_fac=parseFloat(b.Pd(f,"DIR_MIN_SHR_FAC")[1]);h.dir_freq=parseFloat(b.Pd(f,"DIR_FREQ")[1]);h.dir_noise_scale=parseFloat(b.Pd(f,"DIR_NOISE_SCALE")[1]);
h.dir_noise_freq=parseFloat(b.Pd(f,"DIR_NOISE_FREQ")[1]);h.dir_min_noise_fac=parseFloat(b.Pd(f,"DIR_MIN_NOISE_FAC")[1]);h.dst_min_fac=parseFloat(b.Pd(f,"DST_MIN_FAC")[1]);h.waves_hor_fac=parseFloat(b.Pd(f,"WAVES_HOR_FAC")[1]);return h};q.set_water_material_params=function(d,f,h){if(e.kc(d)){var k=b.$b(d,f,"MAIN");if(k&&k.yg)if(k.bc)c.error("set_water_material_params(): Not allowed for node materials! Use set_nodemat_value/set_nodemat_rgb methods instead.");else{var l=[k];(k=b.Tg(d,f,"MAIN"))&&l.push(k);
for(d=0;d<l.length;d++)k=l[d],"boolean"==typeof h.shore_smoothing&&(E.shore_smoothing&&k.Un&&h.shore_smoothing?b.dc(k,"SHORE_SMOOTHING",1):b.dc(k,"SHORE_SMOOTHING",0)),"number"==typeof h.absorb_factor&&(f=a.Fa(parseFloat(h.absorb_factor)),b.dc(k,"ABSORB",f)),"number"==typeof h.foam_factor&&E.Eo&&(k.foam_factor=h.foam_factor),E.xp&&("object"==typeof h.shallow_water_col&&k.shallow_water_col.set(h.shallow_water_col),"number"==typeof h.shallow_water_col_fac&&(k.shallow_water_col_fac=h.shallow_water_col_fac),
"object"==typeof h.shore_water_col&&k.shore_water_col.set(h.shore_water_col),"number"==typeof h.shore_water_col_fac&&(k.shore_water_col_fac=h.shore_water_col_fac)),"number"==typeof h.norm_uv_velocity&&(k.km=h.norm_uv_velocity),E.water_dynamic&&k.water_dynamic&&("boolean"==typeof h.water_dynamic&&(h.water_dynamic?b.dc(k,"DYNAMIC",1):b.dc(k,"DYNAMIC",0)),"number"==typeof h.sss_strength&&(f=a.Fa(parseFloat(h.sss_strength)),b.dc(k,"SSS_STRENGTH",f)),"number"==typeof h.sss_width&&(f=a.Fa(parseFloat(h.sss_width)),
b.dc(k,"SSS_WIDTH",f)),"number"==typeof h.waves_height&&(f=a.Fa(parseFloat(h.waves_height)),b.dc(k,"WAVES_HEIGHT",f)),"number"==typeof h.waves_length&&(f=a.Fa(parseFloat(h.waves_length)),b.dc(k,"WAVES_LENGTH",f)),"number"==typeof h.dst_noise_scale0&&(f=a.Fa(parseFloat(h.dst_noise_scale0)),b.dc(k,"DST_NOISE_SCALE_0",f)),"number"==typeof h.dst_noise_scale1&&(f=a.Fa(parseFloat(h.dst_noise_scale1)),b.dc(k,"DST_NOISE_SCALE_1",f)),"number"==typeof h.dst_noise_freq0&&(f=a.Fa(parseFloat(h.dst_noise_freq0)),
b.dc(k,"DST_NOISE_FREQ_0",f)),"number"==typeof h.dst_noise_freq1&&(f=a.Fa(parseFloat(h.dst_noise_freq1)),b.dc(k,"DST_NOISE_FREQ_1",f)),"number"==typeof h.dir_min_shore_fac&&(f=a.Fa(parseFloat(h.dir_min_shore_fac)),b.dc(k,"DIR_MIN_SHR_FAC",f)),"number"==typeof h.dir_freq&&(f=a.Fa(parseFloat(h.dir_freq)),b.dc(k,"DIR_FREQ",f)),"number"==typeof h.dir_noise_scale&&(f=a.Fa(parseFloat(h.dir_noise_scale)),b.dc(k,"DIR_NOISE_SCALE",f)),"number"==typeof h.dir_noise_freq&&(f=a.Fa(parseFloat(h.dir_noise_freq)),
b.dc(k,"DIR_NOISE_FREQ",f)),"number"==typeof h.dir_min_noise_fac&&(f=a.Fa(parseFloat(h.dir_min_noise_fac)),b.dc(k,"DIR_MIN_NOISE_FAC",f)),"number"==typeof h.dst_min_fac&&(f=a.Fa(parseFloat(h.dst_min_fac)),b.dc(k,"DST_MIN_FAC",f)),"number"==typeof h.waves_hor_fac&&(f=a.Fa(parseFloat(h.waves_hor_fac)),b.dc(k,"WAVES_HOR_FAC",f))),b.md(k),t.rH(k)}else c.error('set_water_material_params(): Material "'+f+'" wasn\'t found on the object "'+d.name+"\" or it's not a water material.")}else c.error('set_water_material_params(): Object "'+
d.name+'" is not a dynamic MESH.')};q.set_line_params=function(a,d){if(e.is_line(a)){var f=b.kv(a);f?(x._16(d.color)&&f.Qc.set(d.color),x._16(d.width)&&(f.kn=d.width)):c.error("set_line_params(): Couldn't set line parameters!")}else c.error('set_line_params(): Object "'+a.name+'" is not a LINE object.')};q.get_line_params=function(a){if(!e.is_line(a))return c.error('get_line_params(): Object "'+a.name+'" is not a LINE object.'),null;a=b.kv(a);return a?{color:new Float32Array(a.Qc),width:a.kn}:(c.error("get_line_params(): Couldn't get line parameters!"),
null)};q.set_nodemat_value=function(a,d,f){var h=e.kc(a),k=e.is_world(a),m=k?l.tv(a):a.name;if(h||k){if(h){var p=d[0],q=1,h=b.wh(a,p,"MAIN")||b.wh(a,p,"PARTICLES");if(!h){c.error('set_nodemat_value(): Material "'+p+'" wasn\'t found on the object "'+m+'".');return}}else if(k&&(h=t.get_active(),p="",q=0,h=b.Gr(a,h),!h)){c.error("set_nodemat_value(): Sky node material wasn't found on the world object \""+m+'".');return}q=b.as(d,q);l.set_nodemat_value(a,p,q,f)||c.error('set_nodemat_value(): Value node "'+
d[d.length-1]+'" was not found in the object "'+m+'".')}else c.error('set_nodemat_value(): Object "'+m+'" is not a dynamic MESH or WORLD.')};q.get_nodemat_value=function(a,d){var f=e.kc(a),h=e.is_world(a),k=h?l.tv(a):a.name;if(!f&&!h)return c.error('get_nodemat_value(): Object "'+k+'" is not a dynamic MESH or WORLD.'),0;if(f){var m=d[0],p=1,f=b.wh(a,m,"MAIN")||b.wh(a,m,"PARTICLES");if(!f)return c.error('get_nodemat_value(): Material "'+m+'" wasn\'t found on the object "'+k+'".'),0}else if(h&&(f=t.get_active(),
m="",p=0,f=b.Gr(a,f),!f))return c.error("get_nodemat_value(): Sky node material wasn't found on the world object \""+k+'".'),0;p=b.as(d,p);m=l.get_nodemat_value(a,m,p);null===m&&c.error('get_nodemat_value(): Value node "'+d[d.length-1]+'" was not found in the object "'+k+'".');return m};q.set_nodemat_rgb=function(a,d,f,h,k){var m=e.kc(a),p=e.is_world(a),q=p?l.tv(a):a.name;if(m||p){if(m){var r=d[0],u=1,m=b.wh(a,r,"MAIN")||b.wh(a,r,"PARTICLES");if(!m){c.error('set_nodemat_rgb(): Material "'+r+'" wasn\'t found on the object "'+
q+'".');return}}else if(p&&(m=t.get_active(),r="",u=0,m=b.Gr(a,m),!m)){c.error("set_nodemat_rgb(): Sky node material wasn't found on the world object \""+q+'".');return}u=b.as(d,u);l.set_nodemat_rgb(a,r,u,f,h,k)||c.error('set_nodemat_rgb(): RGB node "'+d[d.length-1]+'" was not found in the object "'+q+'".')}else c.error('set_nodemat_rgb(): Object "'+q+'" is not a dynamic MESH or WORLD.')};q.get_nodemat_rgb=function(a,d,f){var h=e.kc(a),k=e.is_world(a),m=k?l.tv(a):a.name;if(!h&&!k)return c.error('get_nodemat_rgb(): Object "'+
m+'" is not a dynamic MESH or WORLD.'),null;if(h){var p=d[0],q=1,h=b.wh(a,p,"MAIN")||b.wh(a,p,"PARTICLES");if(!h)return c.error('get_nodemat_rgb(): Material "'+p+'" wasn\'t found on the object "'+m+'".'),null}else if(k&&(h=t.get_active(),p="",q=0,h=b.Gr(a,h),!h))return c.error("get_nodemat_rgb(): Sky node material wasn't found on the world object \""+m+'".'),null;f||(f=new Float32Array(3));q=b.as(d,q);(f=l.get_nodemat_rgb(a,p,q,f))||c.error('get_nodemat_rgb(): RGB node "'+d[d.length-1]+'" was not found in the object "'+
m+'".');return f};q.is_node_material=function(a,d){if(!e.kc(a))return c.error('is_node_material(): Object "'+a.name+'" is not a dynamic MESH.'),!1;var f=b.$b(a,d,"MAIN");return f?f.bc:(c.error('is_node_material(): Material "'+d+'" wasn\'t found on the object "'+a.name+'".'),!1)};q.is_water_material=function(a,d){if(!e.kc(a))return c.error('is_water_material(): Object "'+a.name+'" is not a dynamic MESH.'),!1;var f=b.$b(a,d,"MAIN");return f?f.yg&&!f.bc:(c.error('is_water_material(): Material "'+d+'" wasn\'t found on the object "'+
a.name+'".'),!1)}});t.a=d},function(E,t,d){E=d(0);var O=d(3),T=d(2),G=d(41);d=Object(E.a)("math",function(d,f){var k=new Float32Array(3);f.create_pline_from_points=function(d,f){var m=new Float32Array(6);G.R(m,d);O.subtract(f,d,k);G.Q(m,k);return m};f.create_pline_from_point_vec=function(d,f){var k=new Float32Array(6);G.R(k,d);G.Q(k,f);return k};f.create_pline=function(){return new Float32Array(6)};f.get_pline_directional_vec=G.M;f.get_pline_initial_point=G.N;f.set_pline_initial_point=G.R;f.set_pline_directional_vec=
G.Q;f.line_plane_intersect=T._21;f.calc_pline_point=G.f;f.point_plane_dist=G.P;f.linear_tween=G.O;f.ease_in_quad=G.x;f.ease_out_quad=G.H;f.ease_in_out_quad=G.t;f.ease_in_cubic=G.k;f.ease_out_cubic=G.E;f.ease_in_out_cubic=G.q;f.ease_in_quart=G.y;f.ease_out_quart=G.I;f.ease_in_out_quart=G.u;f.ease_in_quint=G.z;f.ease_out_quint=G.J;f.ease_in_out_quint=G.v;f.ease_in_sine=G.A;f.ease_out_sine=G.K;f.ease_in_out_sine=G.w;f.ease_in_expo=G.m;f.ease_out_expo=G.G;f.ease_in_out_expo=G.s;f.ease_in_circ=G.j;f.ease_out_circ=
G.D;f.ease_in_out_circ=G.p;f.ease_in_elastic=G.l;f.ease_out_elastic=G.F;f.ease_in_out_elastic=G.r;f.ease_in_back=G.h;f.ease_out_back=G.B;f.ease_in_out_back=G.n;f.ease_in_bounce=G.i;f.ease_out_bounce=G.C;f.ease_in_out_bounce=G.o});t.a=d},function(E,t,d){E=d(0);var O=d(52),T=d(18),G=d(1),r=d(2);d=Object(E.a)("nla",function(d,k){var f=Object(O.a)(d),t=Object(T.a)(d),m=Object(G.a)(d);k.set_frame=function(d){d=r.M(d,f.get_frame_start(),f.get_frame_end());f.check_logic_nodes()?m.error("The active scene is using the Logic Editor."):
f.set_frame(d,t.get_timeline())};k.get_frame=function(){return f.get_frame(t.get_timeline())};k.stop=function(){f.check_logic_nodes()&&m.warn("The active scene is using the Logic Editor. It may conflicts with your JS-code.");f.WB()};k.play=function(d){f.check_logic_nodes()&&m.warn("The active scene is using the Logic Editor. It may conflicts with your JS-code.");f.jH(d)};k.is_play=function(){return f.is_play()};k.get_frame_start=function(){return f.get_frame_start()};k.get_frame_end=function(){return f.get_frame_end()};
k.check_nla=function(){return f.check_nla()};k.check_logic_nodes=function(){return f.check_logic_nodes()};k.set_range=function(d,k){f.check_logic_nodes()?m.error("The active scene is using the Logic Editor."):(k=parseFloat(k)||f.get_frame_end(),d=parseFloat(d)||f.get_frame_end(),k=r.M(k,f.get_frame_start(),f.get_frame_end()),d=r.M(d,f.get_frame_start(),k),f.set_range(d,k))};k.reset_range=function(){f.check_logic_nodes()?m.error("The active scene is using the Logic Editor."):f.reset_range()};k.set_cyclic=
function(d){f.check_logic_nodes()?m.error("The active scene is using the Logic Editor."):f.set_cyclic(d)};k.clear_callback=function(){f.check_logic_nodes()?m.error("The active scene is using the Logic Editor."):f.clear_callback()}});t.a=d},function(E,t,d){E=d(0);var O=d(20),T=d(12),G=d(16),r=d(8),f=d(1),k=d(10),y=d(2);d=Object(E.a)("objects",function(d,m){var p=Object(O.a)(d),q=Object(T.a)(d),b=Object(G.a)(d),t=Object(r.a)(d),h=Object(f.a)(d),l=Object(k.a)(d);m.get_meta_tags=function(b){if(b)return q.get_meta_tags(b)};
m.get_custom_prop=function(b){if(b)return q.get_custom_prop(b)};m.copy=function(b,c,a){return t.is_mesh(b)?t.is_dynamic(b)?p.bk(b)||p.check_shape_keys(b)||!a?-1==q.Fc(l.get_active(),"MESH",q.DATA_ID_ALL).indexOf(b)?(h.error('object "'+b.name+'" does not belong to the active scene.'),!1):q.copy(b,c||"",a):(h.error('object "'+b.name+'" has not dynamic geometry for deep copying.'),!1):(h.error('object "'+b.name+'" is not dynamic.'),!1):(h.error('object "'+b.name+'" is not of type "MESH".'),!1)};m.update_boundings=
function(b){t.is_mesh(b)?p.bk(b)||p.check_shape_keys(b)?q.update_boundings(b):h.error('object "'+b.name+'" has not dynamic geometry.'):h.error('The type of the object "'+b.name+'" is not "MESH".')};m.get_parent=t.get_parent;m.get_dg_parent=t.get_dg_parent;m.is_mesh=t.is_mesh;m.is_armature=t.is_armature;m.is_speaker=t.is_speaker;m.is_camera=t.is_camera;m.is_lamp=t.is_lamp;m.is_empty=t.is_empty;m.is_line=t.is_line;m.is_world=t.is_world;m.get_selectable_objects=function(){return q.get_selectable_objects()};
m.get_outlining_objects=function(){return q.get_outlining_objects()};m.is_dynamic=t.is_dynamic;m.set_wind_bending_params=function(e,c){if(t.kc(e)){var a=e.ka;if(a.wf){if("number"==typeof c.angle){var d=b.nJ(y.T(c.angle),a.Hj,a.na[3]);a.zg=d}"number"==typeof c.main_frequency&&(a.Ag=c.main_frequency);"number"==typeof c.detail_frequency&&(a.fg=c.detail_frequency);"number"==typeof c.detail_amplitude&&(a.eg=c.detail_amplitude);"number"==typeof c.branch_amplitude&&(a.$f=c.branch_amplitude);q.eT(e)}else h.error('The "'+
e.name+"\" object doesn't have wind bending parameters.")}else h.error('The type of the object "'+e.name+'" is not "MESH" or it is not dynamic.')};m.get_wind_bending_params=function(e){e=e.ka;if(!e.wf)return null;var c={},a=y._38(b.mV(e.zg,e.Hj,e.na[3]));c.angle=a;c.main_frequency=e.Ag;c.detail_frequency=e.fg;c.detail_amplitude=e.eg;c.branch_amplitude=e.$f;return c};m.create_line=function(b){return q.create_line(b)};m.hide_all_by_data_id=function(b){b=q.get_all_objects("ALL",b);for(var c=0;c<b.length;c++)l.Dm(b[c],
!0)};m.show_all_by_data_id=function(b){b=q.get_all_objects("ALL",b);for(var c=0;c<b.length;c++)l.Dm(b[c],!1)}});t.a=d},function(E,t,d){E=d(0);var O=d(47),T=d(1);d=Object(E.a)("particles",function(d,r){var f=Object(O.a)(d),k=Object(T.a)(d);r.set_size=function(d,r,m){f.$A(d,r)?f.set_size(d,r,m):k.error('set_size(): Object "'+d.name+'" has not a particle system named "'+r+'"')};r.set_normal_factor=function(d,r,m){f.$A(d,r)?f.set_normal_factor(d,r,m):k.error('set_normal_factor(): Object "'+d.name+'" has not a particle system named "'+
r+'"')};r.set_factor=function(d,r,m){f.$A(d,r)?(m=Math.min(m,1),m=Math.max(m,0),f.set_factor(d,r,m)):k.error('set_factor(): Object "'+d.name+'" has not a particle system named "'+r+'"')}});t.a=d},function(E,t,d){E=d(0);var O=d(2);d=Object(E.a)("rgb",function(d,t){var r=new Float32Array(3);t.create=function(){return new Float32Array(3)};t.from_values=function(d,k,r){var f=new Float32Array(3);f[0]=d;f[1]=k;f[2]=r;return f};t.set=function(d,k,r,t){t[0]=d;t[1]=k;t[2]=r;return t};t.css_to_rgb=function(d,
k,r,t){t=t||new Float32Array(3);t[0]=d/255;t[1]=k/255;t[2]=r/255;O._56(t,t);return t};t.rgb_to_css=function(d){d=O._20(d,r);return[Math.round(255*d[0]),Math.round(255*d[1]),Math.round(255*d[2])]};t.rgb_to_css_hex=function(d){function f(d){d=Math.round(255*d).toString(16);return 1==d.length?"0"+d:d}d=O._20(d,r);return"#"+f(d[0])+f(d[1])+f(d[2])}});t.a=d},function(E,t,d){E=d(0);var O=d(1),T=d(10),G=d(17),r=d(8),f=d(43),k=d(48);d=Object(E.a)("textures",function(d,t){var m=Object(O.a)(d),p=Object(T.a)(d),
q=Object(G.a)(d),b=Object(r.a)(d),u=Object(f.a)(d);t.play_video=function(b,d){d||(d=0);var e=q.aA(b,d);e?p.get_active().b4w_use_nla&&q.AC(e)?m.error("NLA texture can't be controlled directly through API."):q.play_video(e):m.error('Texture with name "'+b+'" not found!')};t.pause_video=function(b,d){d||(d=0);var e=q.aA(b,d);e?p.get_active().b4w_use_nla&&q.AC(e)?m.error("NLA texture can't be controlled directly through API."):q.pause_video(e):m.error('Texture with name "'+b+'" not found!')};t.reset_video=
function(b,d){d||(d=0);var e=q.aA(b,d);e?p.get_active().b4w_use_nla&&q.AC(e)?m.error("NLA texture can't be controlled directly through API."):q.reset_video(e):m.error('Texture with name "'+b+'" not found!')};t.get_canvas_ctx=function(d,f){if(b.is_mesh(d)){var e=q.BP(d,f);if(e)return e;m.error("Couldn't find canvas texture with this name: "+f)}else m.error("Object must be type of mesh.");return null};t.update_canvas_ctx=function(d,f){if(!b.is_mesh(d))return m.error("Object must be type of mesh."),
!1;var e=q.sv(d,f);if(!e||"CANVAS"!=e.source)return m.error("Couldn't find canvas texture \""+f+'" in object "'+d.name+'".'),!1;q.PU(e);return!0};t.change_image=function(b,d,e,c){m.df("change_image","replace_image");c=c||function(){};var a=q.sv(b,d);if(a)if(a.dj)m.error("Changing video textures is forbidden."),c(!1);else{var f=Object(k.b)(e);a.pl==f?c(!0):u.enqueue([{id:e,type:u.AT_IMAGE_ELEMENT,url:e,request_method:"GET"}],function(f){f?(q.change_image(b,a,d,f,e),c(!0)):c(!1)},null,null)}else m.error("Couldn't find texture \""+
d+'" in object "'+b.name+'".'),c(!1)};t.replace_image=function(b,d,e,c){c=c||function(){};var a=q.sv(b,d);a?a.dj?(m.error("Changing video textures is forbidden."),c(!1)):"src"in e?q.change_image(b,a,d,e,e.src):(m.error("Incorrect image."),c(!1)):(m.error("Couldn't find texture \""+d+'" in object "'+b.name+'".'),c(!1))};t.get_texture_names=function(d){if(b.is_mesh(d))return q.get_texture_names(d);m.error("Object must be type of mesh.");return[]}});t.a=d},function(E,t,d){E=d(0);var O=d(46);d=Object(E.a)("version",
function(d,t){t.version=O.e;t.version_str=O.f;t.type=O.d;t.date=O.a;t.date_str=O.b;t.get_build_version=O.c});t.a=d}]);
//# sourceMappingURL=/dist/b4w.min.js.map